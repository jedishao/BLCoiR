caller condition race atomiclong writesoutstanding context asyncfileimpl counter state write