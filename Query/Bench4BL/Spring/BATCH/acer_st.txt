170	Concurrent modification StepExecution running asynchrounous step operationUse hibernateJobDao eventually StaleObjectStateException running asynchrounous step operation bean myStepExecutor org springframework batch execution step simple SimpleStepExecutor scope prototype property transactionManager txManager property repository simpleJobRepository property stepOperations bean org springframework batch repeat support TaskExecutorRepeatTemplate property taskExecutor threadPoolTaskExecutor bean property bean http forum springframework org showthread php Concurrent modification StepExecution running asynchrounous step operationUse hibernateJobDao eventually StaleObjectStateException running asynchrounous step operation job step execution set repeat start row exit
449	skip synchronization reader writer ItemSkipPolicyItemHandler calls skip reader writer reader threw exception item writer calling skip reader skip item caused error writer skip previous item skip synchronization reader writer test item chunk skip step listener read exception
603	JobExecution fields modified Thread JobExecution fields modified Thread JobExecution fields modified Thread set job field execution row parameter type item
782	Synchronization issue ItemOrientedStep exception chunk processing read source code share problem ItemOrientedStep Code ExitStatus doExecute StepExecution stepExecution Exception blablabla stepOperations iterate RepeatCallback ExitStatus doInIteration RepeatContext context Exception balblabla Process chunk synchronizer lock stepExecution InterruptedException stepExecution setStatus BatchStatus STOPPED Thread currentThread interrupt step execution persistence Error processRollback stepExecution contribution fatalException transaction Exception processRollback stepExecution contribution fatalException transaction synchronizer release stepExecution blblabla exitStatus exception occured synchronizer lock internal semaphore synchronizer acquired block releases synchronizer releasing semaphore JDK API stated Semaphore released thread original acquirer semaphore parallel processing Thread acquired semaphore step execution persistence stuff Thread exception processChunk releasing semaphore Thread originally waiting semaphore acquired semaphore Thread releases peresistence block code Thread block code step execution persistence environment throwed exception writer caused exception ERROR SimpleAsyncTaskExecutor step AbstractStep Encountered error executing step org springframework batch core step AbstractStep FatalException Fatal error detected save step execution context stack trace deleted Caused org springframework dao OptimisticLockingFailureException Attempt update step execution wrong version current version stack trace deleted caused concurrent access persistence step execution mentioned issue happening step execution updated UNKNOWN status preventing quick set flag synchronizer lock release flag set cater interruption exception synchronizer locking Synchronization issue ItemOrientedStep exception chunk processing set chunk skip step item repeat process key
912	Thread safety issue JobRegistryBackgroundJobRunner noticed errors variable JobRegistryBackgroundJobRunner modified thread accessed synchronization ArrayList isn thread safe visibility issues code checks errors occurred initialization application context visibility issues hard prove theory problem replacing List Exception errors ArrayList Exception List Exception errors Collections synchronizedCollection ArrayList Exception making list work confident implications making collection variable Don performance hit Thread safety issue JobRegistryBackgroundJobRunner job step context set code source test execution
1272	Write skips work multi threaded step Write skips work multi threaded step strange hard explain FaultTolerantChunkProcessor fault tolerant multiple threads Write skips work multi threaded step skip test set item job read context step
1278	RepeatTemplate aborts early multiple threads ignorable exceptionsRepeatTemplate aborts early multiple threads ignorable exceptions underlying BATCH RepeatTemplate aborts early multiple threads ignorable exceptionsRepeatTemplate aborts early multiple threads ignorable exceptions set partition step test context completion result exception
1362	Threads spinning multi threaded StepThreads spinning multi threaded Step multi threaded step waiting chunk process wait threads FINISHED spinning work visible large disparity commit count read count step user reported infinite loop JVM scheduler priority real worker thread Threads spinning multi threaded StepThreads spinning multi threaded Step multi threaded step waiting chunk process wait threads FINISHED spinning work visible large disparity commit count read count step user reported infinite loop JVM scheduler priority real worker thread set step test item context job increment transaction
1526	Memory leak web deployments ThreadLocal nulled ChunkMonitorThe Tomcat leak detection caught tiny leak thread local ChunkMonitor nulled deployment web application result memory leak Tomcat fixes amp apos big deal existing users Memory leak web deployments ThreadLocal nulled ChunkMonitorThe Tomcat leak detection caught set step execution job item messaging create context
1542	Thread safety JobExecution StepExecution collectionsThe collections JobExecution StepExecution copy write concurrency protection place fast step job executions MapJobRepository thread safe BATCH Thread safety JobExecution StepExecution collectionsThe collections JobExecution StepExecution copy write concurrency protection test step retry execution failed save job commit
1572	Step failing org springframework transaction UnexpectedRollbackExceptionThe transaction timing read reader step lock transaction manager marks transaction rollback lock released reader returns org springframework transaction UnexpectedRollbackException thrown updating chunk database Batch exception fatal exception continuing chunk logging exception debug level ity fail step guess Problem loosing records chunk changed org springframework batch core step item SimpleRetryExceptionHandler java constructor SimpleRetryExceptionHandler RetryPolicy retryPolicy ExceptionHandler exceptionHandler Collection Throwable fatalExceptionClasses retryPolicy retryPolicy exceptionHandler exceptionHandler fatalExceptionClasses add org springframework transaction UnexpectedRollbackException fatalExceptionClassifier BinaryExceptionClassifier fatalExceptionClasses tested failing step Step failing org springframework transaction UnexpectedRollbackExceptionThe transaction timing read reader step lock set step item transaction chunk test retry partition
1709	BeanWrapperFieldSetMapper race condition cache BeanWrapperFieldSetMapper occasionally fails concurrent setting strange messages duplicate properties distance limit column names exact concurrency bug caching BeanWrapperFieldSetMapper race condition cache test set property nested bean transactional key mapper
1724	Multithreaded step processing chunk skip retry limitI sort understand amusing bug irritating doubt critical outcome step failure multi threaded step check failure thread time time checked failed chunk queue processing Oddly single background thread fails special cases Multithreaded step processing chunk skip retry limitI sort understand amusing bug irritating set skip exception chunk step retry item listener
1725	SubclassClassifier ConcurrentHashMapSubclassClassifier ConcurrentHashMap concurrent modification exceptions concurrently SubclassClassifier ConcurrentHashMapSubclassClassifier ConcurrentHashMap concurrent modification exceptions concurrently exception step set retry skip chunk create repeat
2126	DefaultJobParametersConverter thread safe SimpleJobOperator DefaultJobParametersConverter thread safe usage instance variable numberFormat dateFormat longNumberFormat SimpleJobOperator JobParametersConverter instance variable thread safe SimpleAsyncTaskExecutor asynchronous TaskExecutor explain setup evaluated work properly asynchronous TaskExecutor DefaultJobParametersConverter thread safe SimpleJobOperator DefaultJobParametersConverter thread safe usage instance variable numberFormat dateFormat longNumberFormat set item result job read internal repeat partition
2153	StepSynchronizationManager HashMap NullPointerException multiple Threadsorg springframework batch core scope context StepSynchronizationManager produces NullPointerException java util HashMap increment decrement variables current Thread threadsafe Solution Replacing java util HashMap java util Hashtable threadsafe works build error https build springsource org browse BATCH TRUNK JOB test jsessionid exception Find attached minimal maven project start TestStepSynchronizationManagerMain reproduce NullPointerException StepSynchronizationManager HashMap NullPointerException multiple Threadsorg springframework batch core scope context StepSynchronizationManager produces NullPointerException java util HashMap increment decrement variables current Thread threadsafe test context simple skip inherit step job retry
2156	TaskExecutorRepeatTemplate ExecutingRunnable TaskletStep ChunkTransactionCallback StepContextRepeatCallback TaskletStep 2 TransactionTemplate doInChunkContext Transaction SQLStateSQLExceptionTranslator doInTransaction run Step SQLStateSQLException FatalStepExecutionException JDBCException ConcurrencyFailureException AbstractFallbackSQLException Error ConcurrencyFailureException when multithreaded tasklet updates  PREFIX STEP EXECUTION CONTEXT tableNeed to synchronize the stepExecution in org springframework batch core repository dao JdbcExecutionContextDao in the method updateExecutionContext final StepExecution stepExecution  in order to prevent concurrency failures if two threads are trying to update the same step execution context record
2313	SimpleJobLauncher 1 AutomarkBatchCommandLineRunner SyncTaskExecutor FlowJob Job CommandLineJobRunner doExecute SimpleJobLauncher SimpleFlow main run JobExecutionException NullPointerException FlowExecutionException Possible race condition leading to NullPointerException in SynchronizationManagerSupport