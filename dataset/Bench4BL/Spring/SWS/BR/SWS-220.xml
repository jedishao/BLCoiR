<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Fri Dec 23 07:20:30 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SWS-220/SWS-220.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SWS-220] Jaxb2Marshaller::supports method does not consider multiple marshallers</title>
                <link>https://jira.spring.io/browse/SWS-220</link>
                <project id="10060" key="SWS">Spring Web Services</project>
                    <description>&lt;p&gt;When evaluating multiple MarshallingMethodEndpointAdapters, each with their own Jaxb2MarshallingEndpoint, the first MarshallingMethodEndpointAdapter::supports method is always true.&lt;/p&gt;

&lt;p&gt;We are building a modular application; where each endpoint is packaged as it&apos;s own module.&lt;br/&gt;
Each of those endpoint modules has it&apos;s own MarshallingMethodEndpointAdapter and it&apos;s own Jaxb2Marshaller.&lt;br/&gt;
This means that when the webapp is packaged and running there will be multiple MarshallingMethodEndpointAdapters available to the MessageDispatcher.&lt;/p&gt;

&lt;p&gt;The Jaxb2Marshaller::supports method is implemented to return true for any subclass of Jaxb2Element.&lt;/p&gt;

&lt;p/&gt;
&lt;div id=&quot;syntaxplugin&quot; class=&quot;syntaxplugin&quot; style=&quot;border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;&quot;&gt;
&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; border=&quot;0&quot; width=&quot;100%&quot; style=&quot;font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;&quot;&gt;
		&lt;tbody &gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;    public boolean supports(Class clazz) {&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;        if (JAXBElement.class.isAssignableFrom(clazz)) {&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;            return true;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;        }&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;        ...&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;    }&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
			&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;p/&gt;

&lt;p&gt;The Jaxb2Marshaller should not even bother with this check, it should only return true if the JaxbContext is capable of supporting the given class.&lt;/p&gt;</description>
                <environment></environment>
        <key id="18356">SWS-220</key>
            <summary>Jaxb2Marshaller::supports method does not consider multiple marshallers</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://jira.spring.io/images/icons/priorities/critical.png">Critical</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="arjen.poutsma">Arjen Poutsma</assignee>
                                    <reporter username="raykrueger">Ray Krueger</reporter>
                        <labels>
                    </labels>
                <created>Tue, 30 Oct 2007 14:06:34 +0000</created>
                <updated>Thu, 8 Nov 2007 01:14:02 +0000</updated>
                            <resolved>Mon, 5 Nov 2007 08:59:29 +0000</resolved>
                                    <version>1.0</version>
                                    <fixVersion>1.0.2</fixVersion>
                                    <component>OXM</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="27184" author="raykrueger" created="Tue, 30 Oct 2007 14:36:44 +0000"  >&lt;p&gt;I&apos;ve attached a patch that works a bit differently than the current implementation. Rather than using the Introspector, it uses the contextPath and classes to be bound.&lt;/p&gt;</comment>
                            <comment id="27203" author="raykrueger" created="Wed, 31 Oct 2007 02:46:45 +0000"  >&lt;p&gt;Uploading Jaxb2Marshaller.patch2.txt to fix bugs in the first upload...&lt;/p&gt;</comment>
                            <comment id="27205" author="raykrueger" created="Wed, 31 Oct 2007 03:51:44 +0000"  >&lt;p&gt;Jaxb2Marshaller.patch3.txt is the latest&lt;/p&gt;

&lt;p&gt;Removed the map and the synchronized block. Made the &quot;supports&quot; method defensive.&lt;/p&gt;
</comment>
                            <comment id="27206" author="raykrueger" created="Wed, 31 Oct 2007 04:29:59 +0000"  >&lt;p&gt;Assigned a fix version of 1.0.2. though Arjen is probably the one who should make that decision &lt;img class=&quot;emoticon&quot; src=&quot;https://jira.spring.io/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="27241" author="arjen.poutsma" created="Fri, 2 Nov 2007 00:30:03 +0000"  >&lt;p&gt;The attached patch results in the marshaller not supporting types such as JAXBElement&amp;lt;FlightElement&amp;gt;, which should be supported.&lt;/p&gt;</comment>
                            <comment id="27242" author="arjen.poutsma" created="Fri, 2 Nov 2007 01:03:53 +0000"  >&lt;p&gt;Unfortunately, the generic information of JAXBElement is erased at runtime, so we can do nothing but:&lt;/p&gt;

&lt;p&gt;        if (JAXBElement.class.isAssignableFrom(clazz)) &lt;/p&gt;
{ 
            return true; 
        }
&lt;p&gt; &lt;/p&gt;

&lt;p&gt;in the supports method. The problem is that we need to know whether the type is supported before the method is invoked, and the generic parameters are only available at runtime. Catch-22.&lt;/p&gt;

&lt;p&gt;So it is not as simple as it seems. One possible solution is to create a ParameterizedMarshallingMethodEndpointAdapter in core-tiger, which has a different supportsInternal() implementation.&lt;/p&gt;</comment>
                            <comment id="27243" author="raykrueger" created="Fri, 2 Nov 2007 01:07:09 +0000"  >&lt;p&gt;Wouldn&apos;t it be possible to do that JAXBElement check at the end then?&lt;br/&gt;
Check the contextPath, check the classesToBeBound, and then fall back on the JAXBElement check.&lt;/p&gt;

&lt;p&gt;It&apos;s unfortunate that the JaxbContext doesn&apos;t have some sort of &quot;supports&quot; method.&lt;/p&gt;</comment>
                            <comment id="27308" author="arjen.poutsma" created="Mon, 5 Nov 2007 08:59:28 +0000"  >&lt;p&gt;I&apos;ve introduced a GenericMarshallingMethodEndpointAdapter, which supports the new java.lang.reflect.Type hierarchy introduced in Java 5. This GenericMarshallingMethodEndpointAdapter should be used instead of the plain MarshallingMethodEndpointAdapter in combination with Java 5 marshallers, such as the Jaxb2Marshaller. It&apos;s a drop-in replacement.&lt;/p&gt;

&lt;p&gt;I&apos;ve adapted the airline sample accordingly, and updated the reference docs.&lt;/p&gt;</comment>
                            <comment id="27326" author="raykrueger" created="Mon, 5 Nov 2007 21:59:46 +0000"  >&lt;p&gt;Arjen, I see you&apos;re checking the contextPath using &quot;getContextPath().startsWith(packageName)&quot;. From what I read the &quot;contextPath&quot; for the JAXBContext can be a colon delimited string. Meaning that if my packageName isn&apos;t first in the list, this check will fail. Granted I used &quot;contains&quot; which wasn&apos;t added till 1.5 &lt;img class=&quot;emoticon&quot; src=&quot;https://jira.spring.io/images/icons/emoticons/tongue.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;, but an indexOf check here might be necessary.&lt;/p&gt;

&lt;p&gt;Or did I read that wrong?&lt;/p&gt;</comment>
                            <comment id="27327" author="arjen.poutsma" created="Mon, 5 Nov 2007 22:11:16 +0000"  >&lt;p&gt;Yes, you are right. The funny thing is that I was just thinking about the same thing. Great minds...&lt;/p&gt;

&lt;p&gt;I will tokenize the context path first based on colon, and then use startsWith.&lt;/p&gt;</comment>
                            <comment id="27328" author="arjen.poutsma" created="Mon, 5 Nov 2007 22:44:13 +0000"  >&lt;p&gt;Done. I now tokenize the context path. &lt;/p&gt;

&lt;p&gt;Also, the spec says that supported classes should be in the package denoted by the context path (and not subpackages). So I now use equals rather than startsWith.&lt;/p&gt;</comment>
                            <comment id="27332" author="arjen.poutsma" created="Tue, 6 Nov 2007 03:50:53 +0000"  >&lt;p&gt;After some more testing, the supports() issue turned out to be even more difficult than I thought. All JAXB2 Marshallers must also support JAXBElements which are parameterized over a primitive or standard type, such as JAXBElement&amp;lt;String&amp;gt;, etc.&lt;/p&gt;</comment>
                            <comment id="27420" author="arjen.poutsma" created="Thu, 8 Nov 2007 01:14:02 +0000"  >&lt;p&gt;Closing 1.0.2 issues.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13052" name="Jaxb2Marshaller.patch.txt" size="3357" author="raykrueger" created="Tue, 30 Oct 2007 14:35:32 +0000"/>
                            <attachment id="13060" name="Jaxb2Marshaller.patch2.txt" size="3339" author="raykrueger" created="Wed, 31 Oct 2007 02:46:45 +0000"/>
                            <attachment id="13062" name="Jaxb2Marshaller.patch3.txt" size="2507" author="raykrueger" created="Wed, 31 Oct 2007 03:51:44 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 2 Nov 2007 00:30:03 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10280" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7885</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i01mv3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9581</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10381" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Ranking</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9618</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>