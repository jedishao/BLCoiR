<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Thu Dec 22 13:13:18 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/DATACMNS-697/DATACMNS-697.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[DATACMNS-697] Field-local generics information not honored</title>
                <link>https://jira.spring.io/browse/DATACMNS-697</link>
                <project id="10510" key="DATACMNS">Spring Data Commons</project>
                    <description>&lt;p&gt;In my project, we have an entity called &lt;tt&gt;NormalizedProfile&lt;/tt&gt;, which is a huge collection of generic &lt;tt&gt;ListField&lt;/tt&gt; s. Each listField is a list of &lt;tt&gt;Value&lt;/tt&gt; s plus some metadata. And &lt;tt&gt;Value&lt;/tt&gt; is a (well) single &quot;value&quot; plus some metadata. In our case, atomic &quot;value&quot; is either primitive wrapper, Object or Enum, never a collection (in case it is relevant).&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;Value&amp;lt;T&amp;gt;&lt;/tt&gt; gets its generic type from &lt;tt&gt;ListField&amp;lt;T&amp;gt;&lt;/tt&gt; it is enclosed in. Nothing fancy.&lt;/p&gt;

&lt;p&gt;In addition to standard java SpringDataMongo config, we customise &lt;tt&gt;MappingMongoConverter&lt;/tt&gt; to stop save and use &quot;_class&quot; field. No polymorphic behaviour is needed in our case, so why not.&lt;/p&gt;

&lt;p&gt;Problem is with Object- and Enum- generalized &lt;tt&gt;ListField&lt;/tt&gt; s. After they are saved, they never read as a real object and returned as LHM instead. When I use &lt;tt&gt;java.util.List&lt;/tt&gt; instead of our custom structure, everything works fine.&lt;/p&gt;

&lt;p&gt;Please see attached minimal test - &lt;tt&gt;j.u.List&amp;lt;Education&amp;gt;&lt;/tt&gt; testcase succeeds and &lt;tt&gt;ListField&amp;lt;Education&amp;gt;&lt;/tt&gt; fails.&lt;/p&gt;</description>
                <environment>Java 8, Spring 4, Spring Data Mongo 1.7.0</environment>
        <key id="63782">DATACMNS-697</key>
            <summary>Field-local generics information not honored</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://jira.spring.io/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="olivergierke">Oliver Gierke</assignee>
                                    <reporter username="malexejev">Max Alexejev</reporter>
                        <labels>
                    </labels>
                <created>Fri, 15 May 2015 11:00:52 +0000</created>
                <updated>Tue, 2 Jun 2015 04:58:59 +0000</updated>
                            <resolved>Sat, 16 May 2015 09:58:38 +0000</resolved>
                                    <version>1.10 GA (Fowler)</version>
                                    <fixVersion>1.11 M1 (Gosling)</fixVersion>
                    <fixVersion>1.9.3 (Evans SR3)</fixVersion>
                    <fixVersion>1.10.1 (Fowler SR1)</fixVersion>
                    <fixVersion>1.8.6 (Dijkstra SR6)</fixVersion>
                                    <component>Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="115693" author="malexejev" created="Fri, 15 May 2015 11:01:25 +0000"  >&lt;p&gt;Executable tests.&lt;/p&gt;</comment>
                            <comment id="115724" author="olivergierke" created="Sat, 16 May 2015 09:58:39 +0000"  >&lt;p&gt;Thanks for finding this, Max! I&apos;ve altered &lt;tt&gt;TypeDiscoverer&lt;/tt&gt; to now also consider field-local generics information on parameterized types. Snapshots should be available in a few minutes. I ported the fix back into all currently maintained bugfix branches.&lt;/p&gt;</comment>
                            <comment id="115731" author="malexejev" created="Sat, 16 May 2015 15:01:39 +0000"  >&lt;p&gt;Great job, Oliver! Thanks&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="22798" name="GenericListFieldPersistenceTest.java" size="7231" author="malexejev" created="Fri, 15 May 2015 11:01:16 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 16 May 2015 09:58:39 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10280" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10182" key="com.atlassian.jira.toolkit:lastupdaterorcommenter">
                        <customfieldname>Last updater</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>olivergierke</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08g2v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10381" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Ranking</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10480" key="com.pyxis.greenhopper.jira:gh-sprint">
                        <customfieldname>Sprint</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="84">57 - Fowler Aftermath</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>