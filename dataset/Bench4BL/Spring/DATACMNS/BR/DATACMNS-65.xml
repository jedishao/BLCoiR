<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Thu Dec 22 13:19:23 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/DATACMNS-65/DATACMNS-65.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[DATACMNS-65] BasicPersistentEntity potentially suffers from ConcurrentModificationException</title>
                <link>https://jira.spring.io/browse/DATACMNS-65</link>
                <project id="10510" key="DATACMNS">Spring Data Commons</project>
                    <description>&lt;p&gt;&lt;tt&gt;BasicPersistentEntity&lt;/tt&gt; exposes an &lt;tt&gt;addPersistentEntity(...)&lt;/tt&gt; method to allow adding properties and essentially makes it mutable. This potentially opens it up to a concurrency problem given the following scenario:&lt;/p&gt;

&lt;p&gt;1. We concurrently use MongoTemplate for inserting objects of a type not already known to the &lt;tt&gt;MappingContext&lt;/tt&gt;.&lt;br/&gt;
2. Thread A enters &lt;tt&gt;getPersistentEntity(...)&lt;/tt&gt; which discovers the entity not mapped already and thus calls &lt;tt&gt;addPersistentEntity(...)&lt;/tt&gt;. The algorithm in there eagerly adds the &lt;tt&gt;PersistentEntity&lt;/tt&gt; object to the map of &lt;tt&gt;PersistentEntities&lt;/tt&gt; to allow type self-references be detected. No or some properties might have been discovered already.&lt;br/&gt;
3. Thread B enters &lt;tt&gt;getPersistentEntity(...)&lt;/tt&gt; which now discovers the semi-parsed &lt;tt&gt;PersistentEntity&lt;/tt&gt; and thus returns it. This thread continues and at some point &lt;tt&gt;doWithProperties(...)&lt;/tt&gt; gets invoked, iterating over the &lt;tt&gt;PersistentProperties&lt;/tt&gt; already registered.&lt;br/&gt;
4. Meanwhile Thread A wants to add additional &lt;tt&gt;PersistentProperties&lt;/tt&gt; and thus causes a &lt;tt&gt;ConcurrentModificationException&lt;/tt&gt; in thread B.&lt;/p&gt;</description>
                <environment></environment>
        <key id="39278">DATACMNS-65</key>
            <summary>BasicPersistentEntity potentially suffers from ConcurrentModificationException</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://jira.spring.io/images/icons/priorities/critical.png">Critical</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="olivergierke">Oliver Gierke</assignee>
                                    <reporter username="olivergierke">Oliver Gierke</reporter>
                        <labels>
                    </labels>
                <created>Tue, 23 Aug 2011 00:48:49 +0000</created>
                <updated>Mon, 25 Mar 2013 09:25:42 +0000</updated>
                            <resolved>Tue, 23 Aug 2011 11:19:12 +0000</resolved>
                                    <version>1.1 Final</version>
                                    <fixVersion>1.2 M1</fixVersion>
                                    <component>Mapping metadata</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                    <timeoriginalestimate seconds="0">0d</timeoriginalestimate>
                            <timeestimate seconds="0">0d</timeestimate>
                                        <comments>
                            <comment id="69594" author="olivergierke" created="Tue, 23 Aug 2011 11:19:12 +0000"  >&lt;p&gt;Fixed and deployed to snapshot repository.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="18589" name="mylyn-context.zip" size="5408" author="olivergierke" created="Tue, 23 Aug 2011 11:19:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                    <customfield id="customfield_10280" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1663</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10182" key="com.atlassian.jira.toolkit:lastupdaterorcommenter">
                        <customfieldname>Last updater</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>tmarshall</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i00x53:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5414</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10381" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Ranking</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6708</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10120" key="com.atlassian.jira.plugin.system.customfieldtypes:url">
                        <customfieldname>Reference URL</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[http://forum.springsource.org/showthread.php?113192]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>