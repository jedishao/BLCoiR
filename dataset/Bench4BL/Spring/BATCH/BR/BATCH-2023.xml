<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Thu Dec 22 12:29:57 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/BATCH-2023/BATCH-2023.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[BATCH-2023] @StepScope should default to ScopedProxyMode.TARGET_CLASS</title>
                <link>https://jira.spring.io/browse/BATCH-2023</link>
                <project id="10090" key="BATCH">Spring Batch</project>
                    <description>&lt;p&gt;If I use @StepScope on a @Bean method that returns a FlatFileItemReader, I get a ClassCastException:  java.lang.ClassCastException: $Proxy16 cannot be cast to org.springframework.batch.item.file.FlatFileItemReader&lt;/p&gt;

&lt;p&gt;That&apos;s because the ScopedProxyMode is INTERFACES, and the proxy created is based on of the interfaces of FlatFileItemReader, and not FlatFileItemReader itself. Since we always have CGLIB when using @Configuration, I see no reason for not changing the default proxyMode of @StepScope to TARGET_CLASS. &lt;/p&gt;

&lt;p&gt;One more argument for the proxyMode TARGET_CLASS: when I change the return type of the @Bean method to ItemReader&amp;lt;xx&amp;gt;, but still return a FlatFileItemReader, I don&apos;t get a ClassCastException, but the ItemStream registration does not work, and the FlatFileItemReader throws an exception on the first read.&lt;/p&gt;

&lt;p&gt;Altogether those are serious stumble blocks for people not familiar with the proxying mechanisms in Spring, and we would avoid all of them with the default proxyMode TARGET_CLASS.&lt;/p&gt;</description>
                <environment></environment>
        <key id="48430">BATCH-2023</key>
            <summary>@StepScope should default to ScopedProxyMode.TARGET_CLASS</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://jira.spring.io/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://jira.spring.io/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Complete</resolution>
                                        <assignee username="david_syer">Dave Syer</assignee>
                                    <reporter username="tobias79">Tobias Flohre</reporter>
                        <labels>
                    </labels>
                <created>Sat, 4 May 2013 03:44:01 +0000</created>
                <updated>Tue, 14 May 2013 08:13:33 +0000</updated>
                            <resolved>Mon, 6 May 2013 01:50:03 +0000</resolved>
                                    <version>2.2.0.RC1</version>
                                    <fixVersion>2.2.0 Backlog</fixVersion>
                    <fixVersion>2.2.0.RC2</fixVersion>
                                    <component>Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                    <timeoriginalestimate seconds="0">0d</timeoriginalestimate>
                            <timeestimate seconds="0">0d</timeestimate>
                                        <comments>
                            <comment id="89870" author="david_syer" created="Sun, 5 May 2013 23:52:44 +0000"  >&lt;p&gt;Initially I thought that backward compatibility with the old XML would be more important, but on reflection I think you are right: you always have cglib on the classpath now anyway (since Spring 3.2 carries it inside spring-core), so the default could be TARGET_CLASS and no-one would even notice.&lt;/p&gt;</comment>
                            <comment id="89873" author="david_syer" created="Mon, 6 May 2013 01:50:03 +0000"  >&lt;p&gt;Done.  As predicted there was no sign of anything breaking.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 5 May 2013 23:52:44 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10280" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>34950</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i06ai7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>36740</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10381" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Ranking</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>34652</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>