<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Fri Dec 23 11:17:54 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SEC-1208/SEC-1208.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SEC-1208] http create-session=never throws exception when concurrent session filter is in use</title>
                <link>https://jira.spring.io/browse/SEC-1208</link>
                <project id="10040" key="SEC">Spring Security</project>
                    <description>&lt;p&gt;When using create-session=&quot;never&quot; in http namespace and security:concurrent-session-control is specified, registerConcurrentSessionControlBeansIfRequired method in HttpSecurityBeanDefinitionParser sets forceEagerSessionCreation to true.&lt;/p&gt;

&lt;p&gt;I think this is not required as ConcurrentSessionFilter checks for existence of a session before doing it&apos;s job.&lt;/p&gt;

&lt;p&gt;My case is that I don&apos;t want sessions to be created unless users are logged in, and also I want concurrent session control. Currently, if I want concurrent session control, I&apos;m forced to create sessions for logged out users too which I don&apos;t want.&lt;/p&gt;</description>
                <environment></environment>
        <key id="27427">SEC-1208</key>
            <summary>http create-session=never throws exception when concurrent session filter is in use</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://jira.spring.io/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="luke">Luke Taylor</assignee>
                                    <reporter username="behrangn">Behrang Noroozinia</reporter>
                        <labels>
                    </labels>
                <created>Wed, 22 Jul 2009 19:23:53 +0000</created>
                <updated>Sat, 6 Feb 2016 06:11:19 +0000</updated>
                            <resolved>Mon, 5 Oct 2009 04:45:42 +0000</resolved>
                                    <version>2.0.4</version>
                                    <fixVersion>3.0.0 RC1</fixVersion>
                                    <component>Namespace</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="45866" author="luke" created="Sun, 2 Aug 2009 03:00:46 +0000"  >&lt;p&gt;Use of create-session=&quot;never&quot; implies that your application is stateless and doesn&apos;t use sessions. It&apos;s not a simple thing to change the existing architecture, as the ConcurrentSessionController cannot make a decision unless a session already exists (eager session creation isn&apos;t for the benefit of the filter).&lt;/p&gt;</comment>
                            <comment id="46196" author="timfulmer" created="Thu, 20 Aug 2009 06:16:13 +0000"  >&lt;p&gt;We&apos;ve got a case with a custom session registry implemented using the database to store session information for a stateless load balanced deployment.  In this case concurrent session control does not make use of the HTTP session at all.  However, I can&apos;t configure Spring Security with create-session=&quot;never&quot; because of this issue.  IMHO this is a legitimate use case.&lt;/p&gt;</comment>
                            <comment id="46201" author="behrangn" created="Thu, 20 Aug 2009 17:19:31 +0000"  >&lt;p&gt;I still think that requiring eager session creation is not required. Concurrent session filter should only work when there is a session. If there is no session, it can skip it&apos;s duties.&lt;/p&gt;

&lt;p&gt;I read the registerConcurrentSessionControlBeansIfRequired() method source code and depending on existing of a concurentSession element, it sets forceEagerSessionCreation to true.&lt;/p&gt;

&lt;p&gt;IMHO commenting out the las line before return in registerConcurrentSessionControlBeansIfRequired() method will not break any existing code! Or am I missing something?&lt;/p&gt;</comment>
                            <comment id="46221" author="luke" created="Thu, 20 Aug 2009 22:45:15 +0000"  >&lt;p&gt;Yes, I think you are missing something &lt;img class=&quot;emoticon&quot; src=&quot;https://jira.spring.io/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;. I&apos;ve already pointed out that the filter doesn&apos;t make the decision on whether a concurrent session is allowed - that is done when the user attempts to authenticate. The AuthenticationManager calls the ConcurrentSessionController. Let&apos;s assume that you have an application configured to only allow one concurrent login. A user who is already logged in then attempts to log in again, but doesn&apos;t have a session yet. If, as you suggest, the ConcurrentSessionController should do nothing when there is no session then the user would be authenticated, a session would later be created in order to store the security context and from that point on the user would have two authenticated sessions, so the concurrent session control would be ineffective. forceEagerSessionCreation is explicitly there for this purpose (see &lt;a href=&quot;https://jira.spring.io/browse/SEC-183&quot; title=&quot;Avoid unnecessary HttpSession creation when using Anonymous and Remember-Me authentication&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SEC-183&quot;&gt;&lt;del&gt;SEC-183&lt;/del&gt;&lt;/a&gt;, for example).&lt;/p&gt;
</comment>
                            <comment id="46288" author="luke" created="Mon, 24 Aug 2009 06:19:36 +0000"  >&lt;p&gt;I&apos;m looking into redesigning the concurrent session control implementation in a way that will prevent this issue (and others). Please track &lt;a href=&quot;https://jira.spring.io/browse/SEC-1229&quot; title=&quot;Redesign Concurrent Session Control implementation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SEC-1229&quot;&gt;&lt;del&gt;SEC-1229&lt;/del&gt;&lt;/a&gt; instead.&lt;/p&gt;</comment>
                            <comment id="47219" author="luke" created="Mon, 5 Oct 2009 04:45:42 +0000"  >&lt;p&gt;Fixed as a side-effect of &lt;a href=&quot;https://jira.spring.io/browse/SEC-1229&quot; title=&quot;Redesign Concurrent Session Control implementation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SEC-1229&quot;&gt;&lt;del&gt;SEC-1229&lt;/del&gt;&lt;/a&gt;. Sessions are only created when a user is authenticated.&lt;/p&gt;</comment>
                            <comment id="124107" author="issuemaster" created="Sat, 6 Feb 2016 06:11:19 +0000"  >&lt;p&gt;This issue has been migrated to &lt;a href=&quot;https://github.com/spring-projects/spring-security/issues/1459&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/spring-projects/spring-security/issues/1459&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10130">
                    <name>Supersede</name>
                                                                <inwardlinks description="is superseded by">
                                        <issuelink>
            <issuekey id="27709">SEC-1229</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 2 Aug 2009 03:00:46 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10280" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>19715</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i023v3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>12335</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10381" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Ranking</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>12182</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>