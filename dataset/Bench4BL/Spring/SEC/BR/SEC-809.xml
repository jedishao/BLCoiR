<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Fri Dec 23 10:54:39 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SEC-809/SEC-809.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SEC-809] Concurrent Session Control and OpenID Incompatibility</title>
                <link>https://jira.spring.io/browse/SEC-809</link>
                <project id="10040" key="SEC">Spring Security</project>
                    <description>&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;The openid sample worked fine for me.&lt;br/&gt;
I tried to use the Concurrent Session Control but it doesn&apos;t work. &lt;/p&gt;

&lt;p&gt;The following post has the same bug : &lt;a href=&quot;http://forum.springframework.org/showthread.php?p=177626&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://forum.springframework.org/showthread.php?p=177626&lt;/a&gt;&lt;br/&gt;
Solution proposed is to update the OpenIDAuthenticationProcessingFilter and to populate details before call to the authenticationManager, this way :&lt;br/&gt;
token.setDetails(authenticationDetailsSource.buildDetails(req));&lt;/p&gt;

&lt;p&gt;Not sure what uNcode suggests is the good  way to fix it.&lt;/p&gt;

&lt;p&gt;Could be related to &lt;br/&gt;
&lt;a href=&quot;http://jira.springframework.org/browse/SEC-618&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://jira.springframework.org/browse/SEC-618&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Here is my SS configuration (really basic, based on the sample openid):&lt;br/&gt;
--------------------------------------&lt;br/&gt;
        &amp;lt;http&amp;gt;&lt;br/&gt;
		&amp;lt;intercept-url pattern=&quot;/**&quot; access=&quot;ROLE_USER&quot; /&amp;gt;&lt;br/&gt;
		&amp;lt;logout /&amp;gt;&lt;br/&gt;
		&amp;lt;openid-login login-page=&quot;/openidlogin.jsp&quot; /&amp;gt;&lt;br/&gt;
		&amp;lt;concurrent-session-control max-sessions=&quot;1&quot; exception-if-maximum-exceeded=&quot;true&quot;/&amp;gt;&lt;br/&gt;
	&amp;lt;/http&amp;gt;&lt;/p&gt;

&lt;p&gt;	&amp;lt;authentication-manager alias=&quot;authenticationManager&quot; /&amp;gt;&lt;/p&gt;

&lt;p&gt;	&amp;lt;user-service id=&quot;userService&quot;&amp;gt;&lt;br/&gt;
		&amp;lt;user name=&quot;http://MYACCOUNT.myopenid.com/&quot; password=&quot;notused&quot; authorities=&quot;ROLE_SUPERVISOR,ROLE_USER&quot; /&amp;gt;&lt;br/&gt;
	&amp;lt;/user-service&amp;gt;&lt;/p&gt;

&lt;p&gt;Here is my stack trace :&lt;br/&gt;
--------------------------------&lt;br/&gt;
java.lang.IllegalArgumentException: Authentication.getDetails() required&lt;br/&gt;
        at org.springframework.util.Assert.notNull(Assert.java:112)&lt;br/&gt;
        at org.springframework.security.concurrent.SessionRegistryUtils.obtainSessionIdFromAuthentication(SessionRegistryUtils.java:52)&lt;br/&gt;
        at org.springframework.security.concurrent.ConcurrentSessionControllerImpl.checkAuthenticationAllowed(ConcurrentSessionControllerImpl.java:92)&lt;br/&gt;
        at org.springframework.security.providers.ProviderManager.doAuthentication(ProviderManager.java:199)&lt;br/&gt;
        at org.springframework.security.AbstractAuthenticationManager.authenticate(AbstractAuthenticationManager.java:46)&lt;br/&gt;
        at org.springframework.security.ui.openid.OpenIDAuthenticationProcessingFilter.attemptAuthentication(OpenIDAuthenticationProcessingFilter.java:82)&lt;br/&gt;
        at org.springframework.security.ui.AbstractProcessingFilter.doFilterHttp(AbstractProcessingFilter.java:249)&lt;br/&gt;
        at org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)&lt;br/&gt;
        at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:371)&lt;br/&gt;
        at org.springframework.security.ui.logout.LogoutFilter.doFilterHttp(LogoutFilter.java:87)&lt;br/&gt;
        at org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)&lt;br/&gt;
        at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:371)&lt;br/&gt;
        at org.springframework.security.ui.SessionFixationProtectionFilter.doFilterHttp(SessionFixationProtectionFilter.java:68)&lt;br/&gt;
        at org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)&lt;br/&gt;
        at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:371)&lt;br/&gt;
        at org.springframework.security.context.HttpSessionContextIntegrationFilter.doFilterHttp(HttpSessionContextIntegrationFilter.java:229)&lt;br/&gt;
        at org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)&lt;br/&gt;
        at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:371)&lt;br/&gt;
        at org.springframework.security.concurrent.ConcurrentSessionFilter.doFilterHttp(ConcurrentSessionFilter.java:97)&lt;br/&gt;
        at org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)&lt;br/&gt;
        at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:371)&lt;br/&gt;
        at org.springframework.security.securechannel.ChannelProcessingFilter.doFilterHttp(ChannelProcessingFilter.java:116)&lt;br/&gt;
        at org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)&lt;br/&gt;
        at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:371)&lt;br/&gt;
        at org.springframework.security.util.FilterChainProxy.doFilter(FilterChainProxy.java:174)&lt;br/&gt;
        at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:183)&lt;br/&gt;
        at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:138)&lt;/p&gt;
</description>
                <environment>Weblogic Server 8.1 sp5&lt;br/&gt;
jdk 1.4.2&lt;br/&gt;
</environment>
        <key id="21959">SEC-809</key>
            <summary>Concurrent Session Control and OpenID Incompatibility</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://jira.spring.io/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="luke">Luke Taylor</assignee>
                                    <reporter username="nomadeous">Nomadeous</reporter>
                        <labels>
                    </labels>
                <created>Thu, 1 May 2008 01:15:21 +0000</created>
                <updated>Sat, 6 Feb 2016 06:36:52 +0000</updated>
                            <resolved>Mon, 12 May 2008 07:06:10 +0000</resolved>
                                    <version>2.0.0</version>
                                    <fixVersion>2.0.2</fixVersion>
                                    <component>OpenID</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="35610" author="luke" created="Mon, 12 May 2008 07:06:10 +0000"  >&lt;p&gt;Thanks for spotting this. I&apos;ve updated the filter to set the authentication details object on the token, so that the concurrent session control code can obtain the session id.&lt;/p&gt;</comment>
                            <comment id="126822" author="issuemaster" created="Sat, 6 Feb 2016 06:36:52 +0000"  >&lt;p&gt;This issue has been migrated to &lt;a href=&quot;https://github.com/spring-projects/spring-security/issues/1070&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/spring-projects/spring-security/issues/1070&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 12 May 2008 07:06:10 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10280" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7350</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i059hz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>30745</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10381" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Ranking</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>27790</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>