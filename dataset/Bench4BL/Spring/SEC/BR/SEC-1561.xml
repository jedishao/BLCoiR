<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Fri Dec 23 11:13:06 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SEC-1561/SEC-1561.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SEC-1561] HttpSecurityContextRepository fails to store security context to a newly authenticated session</title>
                <link>https://jira.spring.io/browse/SEC-1561</link>
                <project id="10040" key="SEC">Spring Security</project>
                    <description>&lt;p&gt;When a second (or later subsequent) authentication attempt arrives on an already authenticated session and session attribute migration is disabled the security context is not always persisted to the new session.&lt;/p&gt;

&lt;p&gt;With an existing authenticated session, subsequent POST requests to the form-login login-processing url will destroy the old session and create a new session. Occasionally the hash code of the persisted security context does not change and so the HttpSecurityContextRepository does not &quot;update&quot; the context stored in the session. The problem is that the old session held the unchanged security context but the new session does not hold any security context. After successfully authenticating another authentication is required because the new session does not contain a SecurityContext.&lt;/p&gt;

&lt;p&gt;One factor causing the HttpSecurityContextRepository to not update/store the SecurityContext is that the session id stored in the security context is the old session id, even after that session has been destroyed and a new one created to replace it. This allows the SecurityContext hashCode to remain the same even though some aspect of the SecurityContext has indeed changed.&lt;/p&gt;

&lt;p&gt;The check to set the security context attribute in HttpSecurityContextRepository.SaveToSessionResponseWrapper.saveContext should probably include something to ensure that the current session actually does contain the context, whether it has changed or not. In the case that the context has not changed, but the session has, the context should be stored to the new session.&lt;/p&gt;</description>
                <environment></environment>
        <key id="33225">SEC-1561</key>
            <summary>HttpSecurityContextRepository fails to store security context to a newly authenticated session</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://jira.spring.io/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="luke">Luke Taylor</assignee>
                                    <reporter username="dscherger">Derek Scherger</reporter>
                        <labels>
                    </labels>
                <created>Tue, 7 Sep 2010 09:21:50 +0000</created>
                <updated>Sat, 6 Feb 2016 06:15:22 +0000</updated>
                            <resolved>Wed, 10 Nov 2010 05:08:38 +0000</resolved>
                                    <version>3.0.1</version>
                                    <fixVersion>3.0.5</fixVersion>
                    <fixVersion>3.1.0.M2</fixVersion>
                                    <component>Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="57732" author="dscherger" created="Tue, 7 Sep 2010 09:29:13 +0000"  >&lt;p&gt;This issue appears to be related to &lt;a href=&quot;https://jira.spring.io/browse/SEC-37&quot; title=&quot;HttpSessionContextIntegrationFilter concurrent request handling&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SEC-37&quot;&gt;&lt;del&gt;SEC-37&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://jira.spring.io/browse/SEC-1307&quot; title=&quot;Investigate optimization of logic in HttpSessionSecurityContextRepository which checks for changes in the SecurityContext&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SEC-1307&quot;&gt;&lt;del&gt;SEC-1307&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://jira.spring.io/browse/SEC-1528&quot; title=&quot;HttpSession.setAttribute() must be called if the SecurityContext is modified during a request&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SEC-1528&quot;&gt;&lt;del&gt;SEC-1528&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="59458" author="luke" created="Tue, 19 Oct 2010 08:25:10 +0000"  >&lt;p&gt;I think this should already be fixed in master as internal Spring Security attributes are now migrated by default. However, it would probably still make sense to add a check for the presence of the context attribute in the session, in case a new session has been created for some other reason.&lt;/p&gt;</comment>
                            <comment id="60515" author="luke" created="Wed, 10 Nov 2010 05:08:39 +0000"  >&lt;p&gt;When saving the context, I&apos;ve added a check on whether the context attribute is set in the session, so it will always be saved if a new session has been created during the request.&lt;/p&gt;</comment>
                            <comment id="124489" author="issuemaster" created="Sat, 6 Feb 2016 06:15:22 +0000"  >&lt;p&gt;This issue has been migrated to &lt;a href=&quot;https://github.com/spring-projects/spring-security/issues/1802&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/spring-projects/spring-security/issues/1802&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 19 Oct 2010 08:25:10 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10280" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>19420</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i03y4f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>23070</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10381" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Ranking</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>19577</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>