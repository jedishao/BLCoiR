<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Fri Dec 23 02:48:05 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/ROO-60/ROO-60.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[ROO-60] Failure to create correct @javax.persistence.Column name attribute for non-clashing version field name</title>
                <link>https://jira.spring.io/browse/ROO-60</link>
                <project id="10340" key="ROO">Spring Roo</project>
                    <description>&lt;p&gt;EntityMetadata correctly resolves a non-conflicting field name for optimistic locking version support. However, it fails to ensure the @javax.persistence.Column definition has the correct &quot;name&quot; attribute to reflect the resolved non-conflicting field name. It always assumes the column name is &quot;version&quot;, even if the resolved non-conflicting field name is, for example, &quot;_version&quot;.&lt;/p&gt;

&lt;p&gt;Steps to reproduce:&lt;/p&gt;

&lt;p&gt;create project com.foo&lt;br/&gt;
install jpa -provider HIBERNATE -database HYPERSONIC_IN_MEMORY &lt;br/&gt;
new persistent class jpa -name SomeClass -testAutomatically   &lt;br/&gt;
add field string someField&lt;br/&gt;
add field string version&lt;/p&gt;

&lt;p&gt;A review of SomeClass_Roo_Entity.aj includes:&lt;/p&gt;

&lt;p&gt;    @javax.persistence.Version    &lt;br/&gt;
    @javax.persistence.Column(name = &quot;version&quot;)    &lt;br/&gt;
    private java.lang.Integer SomeClass._version;    &lt;/p&gt;

&lt;p&gt;This is incorrect and will clash with the user-defined &quot;version&quot; property. The resulting exception when &quot;mvn test&quot; executed:&lt;/p&gt;

&lt;p&gt;Caused by: javax.persistence.PersistenceException: &lt;span class=&quot;error&quot;&gt;&amp;#91;PersistenceUnit: persistenceUnit&amp;#93;&lt;/span&gt; Unable to build EntityManagerFactory&lt;br/&gt;
	at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:677)&lt;br/&gt;
	at org.hibernate.ejb.HibernatePersistence.createContainerEntityManagerFactory(HibernatePersistence.java:132)&lt;br/&gt;
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:225)&lt;br/&gt;
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:288)&lt;br/&gt;
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1368)&lt;br/&gt;
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1334)&lt;br/&gt;
	... 53 more&lt;br/&gt;
Caused by: org.hibernate.MappingException: Repeated column in mapping for entity: com.foo.SomeClass column: version (should be mapped with insert=&quot;false&quot; update=&quot;false&quot;)&lt;br/&gt;
	at org.hibernate.mapping.PersistentClass.checkColumnDuplication(PersistentClass.java:652)&lt;br/&gt;
	at org.hibernate.mapping.PersistentClass.checkPropertyColumnDuplication(PersistentClass.java:674)&lt;br/&gt;
	at org.hibernate.mapping.PersistentClass.checkColumnDuplication(PersistentClass.java:696)&lt;br/&gt;
	at org.hibernate.mapping.PersistentClass.validate(PersistentClass.java:450)&lt;br/&gt;
	at org.hibernate.mapping.RootClass.validate(RootClass.java:192)&lt;br/&gt;
	at org.hibernate.cfg.Configuration.validate(Configuration.java:1108)&lt;br/&gt;
	at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1293)&lt;br/&gt;
	at org.hibernate.cfg.AnnotationConfiguration.buildSessionFactory(AnnotationConfiguration.java:859)&lt;br/&gt;
	at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:669)&lt;/p&gt;</description>
                <environment>Reproduced in SVN rev 66.</environment>
        <key id="26749">ROO-60</key>
            <summary>Failure to create correct @javax.persistence.Column name attribute for non-clashing version field name</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://jira.spring.io/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="balex">Ben Alex</assignee>
                                    <reporter username="balex">Ben Alex</reporter>
                        <labels>
                    </labels>
                <created>Fri, 29 May 2009 13:33:17 +0000</created>
                <updated>Wed, 15 Jul 2009 16:36:18 +0000</updated>
                            <resolved>Sun, 31 May 2009 14:40:01 +0000</resolved>
                                    <version>1.0.0.M1</version>
                                    <fixVersion>1.0.0.M2</fixVersion>
                                    <component>PERSISTENCE</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="44523" author="balex" created="Sun, 31 May 2009 14:40:01 +0000"  >&lt;p&gt;Updated EntityMetadata. The column name is now identical to the computed field name.&lt;/p&gt;

&lt;p&gt;The above steps to reproduce the error no longer fail.&lt;/p&gt;

&lt;p&gt;Committed to SVN revision 75.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                    <customfield id="customfield_10280" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>22980</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i04ejj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>25730</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10381" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Ranking</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>26555</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>