<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Fri Dec 23 04:15:16 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/ROO-1127/ROO-1127.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[ROO-1127] Tests randomly fail for simple projects that use MYSQL db but work in HYPERSONIC_IN_MEMORY db</title>
                <link>https://jira.spring.io/browse/ROO-1127</link>
                <project id="10340" key="ROO">Spring Roo</project>
                    <description>&lt;p&gt;I was noticing that my tests would fail, with &quot;java.lang.AssertionError: Data on demand for &apos;Thing&apos; failed to initialize correctly&quot; (replace &apos;Thing&apos; with the name of a random class). My search through the forums found a similar, though not same issue where the reporter said that the tests would eventually pass if you re-ran them often enough. So I started re-running my tests, and noticed that the failing classes would change with each run.&lt;/p&gt;

&lt;p&gt;In order to rule out something I may have changed during round-trip engineering, I created a new basic project (attached as log.roo-InMemoryTest.txt). To my disappointment, it worked fine. After further attempts with my main project such as re-creating all the integration tests, I decided to go back to my test project and try using the MYSQL database that I was using for my main project (attached as log.roo-MySqlTest.txt)... and Voila! My simple little four entity project will fail on random classes and then every now and then pass. (see attached TestResults.txt)&lt;/p&gt;

&lt;p&gt;In fairness, this might be a bit complex of an example, since the &quot;Thing&quot; entity has a reference to a &quot;Store&quot; and a &quot;Person&quot;, and the &quot;Storage&quot; entity has a collection of &quot;Thing&quot;s. However, that&apos;s not really that complex of a scenario in real life. Given that the error message in the surefire-report references &quot;failed to initialize correctly&quot;, I suspect that the failure may be due to an order of executing the tests... but that&apos;s just a guess.&lt;/p&gt;

&lt;p&gt;I will try installing 1.1.0.M2 to see if the situation persists.&lt;/p&gt;

&lt;p&gt;Thanks for all your hard work on this project, the above incident aside, I love this tool.&lt;/p&gt;</description>
                <environment>Linux (Ubuntu 10.04), MySQL (MySQL 5.1.41-3ubuntu12.3) on localhost ROO 1.1.0.M1</environment>
        <key id="32321">ROO-1127</key>
            <summary>Tests randomly fail for simple projects that use MYSQL db but work in HYPERSONIC_IN_MEMORY db</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://jira.spring.io/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Complete</resolution>
                                        <assignee username="stewarta">Alan Stewart</assignee>
                                    <reporter username="wrochow">Waldo Rochow</reporter>
                        <labels>
                    </labels>
                <created>Wed, 21 Jul 2010 02:52:12 +0000</created>
                <updated>Thu, 7 Oct 2010 21:18:15 +0000</updated>
                            <resolved>Sun, 22 Aug 2010 21:56:32 +0000</resolved>
                                    <version>1.1.0.M1</version>
                                    <fixVersion>1.1.0.M3</fixVersion>
                                    <component>PERSISTENCE</component>
                    <component>TESTING</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="55912" author="wrochow" created="Wed, 21 Jul 2010 02:57:19 +0000"  >&lt;p&gt;Sure-fire report of a failure to intialize.&lt;/p&gt;</comment>
                            <comment id="55913" author="wrochow" created="Wed, 21 Jul 2010 02:58:01 +0000"  >&lt;p&gt;Forum thread created at: &lt;a href=&quot;http://forum.springsource.org/showthread.php?p=310262#post310262&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://forum.springsource.org/showthread.php?p=310262#post310262&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="56020" author="wt" created="Sun, 25 Jul 2010 21:21:13 +0000"  >&lt;p&gt;Same for me using the latest build from the repository as well as 1.1.0.M2 with MySQL DB on OS X. My tests fail as soon as I have two entities connected though everything is working fine. Starting up Roo 1.0.2 in the project directory results in managing all DoDs and integration tests. After that &quot;perform tests&quot; does not produce any errors.&lt;/p&gt;

&lt;p&gt;Seems that the DoD&apos;s init method &quot;sometimes&quot; returns without creating any objects, after which the getRandomThing method returns null. The condition for checking if data exists did change and is now using data.isEmpty().&lt;/p&gt;</comment>
                            <comment id="56268" author="gvenez" created="Sun, 1 Aug 2010 14:53:30 +0000"  >&lt;p&gt;I have the same problem and these started happening after my roo crashed in between with string index out of bounds exception. I lost the stack trace of the crash but this happened when I pressed the up key to access my history and tried to edit it by pressing backspace.&lt;/p&gt;

&lt;p&gt;I deleted the last created entity and tried to run but with no success. Now I am going to delete ALL entities and try again. Wish me luck fellas!&lt;/p&gt;</comment>
                            <comment id="56271" author="stewarta" created="Sun, 1 Aug 2010 22:29:21 +0000"  >&lt;p&gt;The appears to be similar to that reported in &lt;a href=&quot;https://jira.spring.io/browse/ROO-873&quot; title=&quot;Integration Test Error STS 2.3.3M1 with ROO 1.1.0M1&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ROO-873&quot;&gt;&lt;del&gt;ROO-873&lt;/del&gt;&lt;/a&gt;. It only appears with MySql. We may have to defer the bug until it is decided that Data On Demand is to be rewritten (not far away)&lt;/p&gt;</comment>
                            <comment id="56895" author="stewarta" created="Thu, 19 Aug 2010 18:17:11 +0000"  >&lt;p&gt;Until data on demand is re-written, we will need to defer this bug&lt;/p&gt;</comment>
                            <comment id="56897" author="bfayle" created="Thu, 19 Aug 2010 19:16:22 +0000"  >&lt;p&gt;I solved this issue on my project by changing the persistence.xml&lt;/p&gt;

&lt;p&gt;I changed:&lt;/p&gt;

&lt;p&gt;&amp;lt;property name=&quot;hibernate.dialect&quot; value=&quot;org.hibernate.dialect.MySQLDialect&quot;/&amp;gt;&lt;/p&gt;

&lt;p&gt;to:&lt;/p&gt;

&lt;p&gt;&amp;lt;property name=&quot;hibernate.dialect&quot; value=&quot;org.hibernate.dialect.MySQL5InnoDBDialect&quot;/&amp;gt;&lt;/p&gt;

&lt;p&gt;The default setting creates MyISAM tables. Changing to the latter creates InnoDB tables with proper transaction support. Using InnoDB tables the tests work fine.&lt;/p&gt;</comment>
                            <comment id="56898" author="bfayle" created="Thu, 19 Aug 2010 19:27:48 +0000"  >&lt;p&gt;In my opinion this is really a bug with the &quot;persistence setup&quot; command and not the DataOnDemand classes.&lt;/p&gt;</comment>
                            <comment id="56902" author="stewarta" created="Thu, 19 Aug 2010 21:04:32 +0000"  >&lt;p&gt;Thanks for testing this. I will use the InnoDB dialect and do some testing as well. We may make this the default in Roo for MySQL&lt;/p&gt;</comment>
                            <comment id="56904" author="stewarta" created="Thu, 19 Aug 2010 23:38:39 +0000"  >&lt;p&gt;The change to the different dialect has fixed the issue in &lt;a href=&quot;https://jira.spring.io/browse/ROO-873&quot; title=&quot;Integration Test Error STS 2.3.3M1 with ROO 1.1.0M1&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ROO-873&quot;&gt;&lt;del&gt;ROO-873&lt;/del&gt;&lt;/a&gt; and other projects. &lt;/p&gt;</comment>
                            <comment id="58947" author="prefabsoft" created="Thu, 7 Oct 2010 15:08:25 +0000"  >&lt;p&gt;FYI: I&apos;m also biting the dust. Running MySQL with MySQL5InnoDBDialect on ROO 1.1.0.M3 and same issue.&lt;/p&gt;


&lt;p&gt;Tried switching to EclipseLink but that seemed to trigger another issue:&lt;br/&gt;
7-okt-2010 23:14:56 org.aspectj.weaver.tools.Jdk14Trace error&lt;br/&gt;
SEVERE: com/prefabsoft/domain/Dealer_Roo_ToString/class&lt;br/&gt;
java.lang.UnsupportedOperationException: Known limitation in M4 - can&apos;t find ITD members when type variable is used as an argument and has upper bound specified&lt;/p&gt;

&lt;p&gt;Switching to non MySQL DB should solve the issue? Any non in memory DB&apos;s worth trying (except for Oracle, because they will be too busy with lawsuits instead of software)&lt;/p&gt;</comment>
                            <comment id="58949" author="bfayle" created="Thu, 7 Oct 2010 15:34:10 +0000"  >&lt;p&gt;Which version of MySQL and which drivers are you using?&lt;/p&gt;</comment>
                            <comment id="58965" author="stewarta" created="Thu, 7 Oct 2010 21:18:15 +0000"  >&lt;p&gt;Can you attach a project backup zip here please?&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="31459">ROO-873</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10020">
                    <name>Related</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="30714">ROO-734</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="16920" name="TestResults.txt" size="13533" author="wrochow" created="Wed, 21 Jul 2010 02:52:12 +0000"/>
                            <attachment id="16921" name="eh.inventory.domain.ThingIntegrationTest.txt" size="3757" author="wrochow" created="Wed, 21 Jul 2010 02:57:19 +0000"/>
                            <attachment id="16918" name="log.roo-InMemoryTest.txt" size="1177" author="wrochow" created="Wed, 21 Jul 2010 02:52:12 +0000"/>
                            <attachment id="16919" name="log.roo-MySqlTest.txt" size="1263" author="wrochow" created="Wed, 21 Jul 2010 02:52:12 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 25 Jul 2010 21:21:13 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10280" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>22099</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02a8f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>13367</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10381" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Ranking</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>13108</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>