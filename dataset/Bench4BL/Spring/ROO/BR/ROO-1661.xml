<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Fri Dec 23 02:45:04 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/ROO-1661/ROO-1661.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[ROO-1661]  Multiple writable mappings for fields if using database reverse engineering</title>
                <link>https://jira.spring.io/browse/ROO-1661</link>
                <project id="10340" key="ROO">Spring Roo</project>
                    <description>&lt;p&gt;I tried the database reverse engineering on a MySQL database Hyperic stores its data in. I use EclipseLink as JPA provider.&lt;/p&gt;

&lt;p&gt;The result when I start the application is:&lt;/p&gt;

&lt;p&gt;Exception &lt;span class=&quot;error&quot;&gt;&amp;#91;EclipseLink-48&amp;#93;&lt;/span&gt; (Eclipse Persistence Services - 2.1.0.v20100614-r7608): org.eclipse.persistence.exceptions.DescriptorException&lt;br/&gt;
Exception Description: Multiple writable mappings exist for the field &lt;span class=&quot;error&quot;&gt;&amp;#91;HQ.EAM_UI_ATTACH_RSRC.ATTACH_ID&amp;#93;&lt;/span&gt;.  Only one may be defined as writable, all others must be specified read-only.&lt;br/&gt;
Mapping: org.eclipse.persistence.mappings.OneToOneMapping&lt;span class=&quot;error&quot;&gt;&amp;#91;eamUiAttachment&amp;#93;&lt;/span&gt;&lt;br/&gt;
Descriptor: RelationalDescriptor(com.springsource.dbintrospection.domain.EamUiAttachRsrc --&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;DatabaseTable(HQ.EAM_UI_ATTACH_RSRC)&amp;#93;&lt;/span&gt;)&lt;/p&gt;

&lt;p&gt;I attached the ITDs. It appears that it mapped to a relation to another table as well as the primary key. I am not sure how the foreign key relation was reverse engineered but I believe this database design is not so uncommon after all.&lt;/p&gt;</description>
                <environment></environment>
        <key id="34608">ROO-1661</key>
            <summary> Multiple writable mappings for fields if using database reverse engineering</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://jira.spring.io/images/icons/priorities/minor.png">Minor</priority>
                        <status id="5" iconUrl="https://jira.spring.io/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Complete</resolution>
                                        <assignee username="stewarta">Alan Stewart</assignee>
                                    <reporter username="eberhardwolff">Eberhard Wolff</reporter>
                        <labels>
                    </labels>
                <created>Mon, 1 Nov 2010 09:59:38 +0000</created>
                <updated>Tue, 23 Nov 2010 00:38:38 +0000</updated>
                            <resolved>Tue, 23 Nov 2010 00:38:37 +0000</resolved>
                                    <version>1.1.0.RELEASE</version>
                                    <fixVersion>1.1.1.RELEASE</fixVersion>
                                    <component>PERSISTENCE</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="60164" author="stewarta" created="Mon, 1 Nov 2010 16:07:35 +0000"  >&lt;p&gt;First, I want to rule out any bugs in EclipseLink. I have found one in Hibernate that at first I thought was DBRE-related. So please use your Eclipse/STS JPA entities from tables wizard and point it to your MySQL db and generate the entities. Compare these with what DBRE generates and also copy them to the project and spin up your web app to see if the same error occurs.&lt;/p&gt;</comment>
                            <comment id="60229" author="eberhardwolff" created="Wed, 3 Nov 2010 12:02:52 +0000"  >&lt;p&gt;This is what the Eclipse generator generates. It is basically the same, there is no @GeneratedValue for the primary key. Removing the annotation in the code generated by Roo does not solve the issue, however. Also switching to Hibernate does not solve the issue.&lt;/p&gt;

&lt;p&gt;However, these tests do not mean that Roo is behaving correctly. If you have a table where the primary key is also a foreign key to another table the database reverse engineering does not create executable code.&lt;/p&gt;</comment>
                            <comment id="60237" author="stewarta" created="Wed, 3 Nov 2010 14:52:48 +0000"  >&lt;p&gt;Thanks for following this up. Would you please also attach the DDL? I need to re-create this and I want to use your exact use case, along with my own.&lt;/p&gt;</comment>
                            <comment id="60259" author="stewarta" created="Wed, 3 Nov 2010 23:12:30 +0000"  >&lt;p&gt;I have been able to reproduce this, however simply placing insertable = false and updatable = false in the @JoinColumn for the one-to-one mapping does not solve the issue. A @PrePersist method is required in EamUiAttachAdmin entity to set its primary key matching the primary key of the EamUiAttachment entity, otherwise the new EamUiAttachAdmin entity will get the primary key of the first entry in the EamUiAttachment table.&lt;/p&gt;</comment>
                            <comment id="60261" author="eberhardwolff" created="Thu, 4 Nov 2010 02:20:08 +0000"  >&lt;p&gt;DDL as requested&lt;/p&gt;</comment>
                            <comment id="60701" author="stewarta" created="Tue, 16 Nov 2010 16:46:43 +0000"  >&lt;p&gt;Eberhard, would you please attach your whole project here? Use the Roo backup command. I am having trouble generating a web tier again&lt;/p&gt;</comment>
                            <comment id="60703" author="eberhardwolff" created="Wed, 17 Nov 2010 03:57:48 +0000"  >&lt;p&gt;This is a .tar.gz of the project after mvn clean. I cannot use backup in Roo because of &lt;a href=&quot;https://jira.springsource.org/browse/ROO-1676&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://jira.springsource.org/browse/ROO-1676&lt;/a&gt; . Sorry. Let me know I should do something different.&lt;/p&gt;</comment>
                            <comment id="60742" author="stewarta" created="Wed, 17 Nov 2010 22:43:03 +0000"  >&lt;p&gt;Added code in Git ID d35496263063b3057b64294762a690f097618e01. Please test. &lt;a href=&quot;https://jira.spring.io/browse/ROO-1676&quot; title=&quot;Project with Database Reverse Engineering locks Roo shell up after restart&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ROO-1676&quot;&gt;&lt;del&gt;ROO-1676&lt;/del&gt;&lt;/a&gt; was resolved, but there does appear to be an issue with controller duplicate method creation. Stefan will look at this, however for now, delete those offending controllers &lt;/p&gt;

&lt;p&gt;Also, you must delete the @RooDbManaged annotation from primary key classes (classes with the @RooIdentifier annotation), as a result of the fix for &lt;a href=&quot;https://jira.spring.io/browse/ROO-1676&quot; title=&quot;Project with Database Reverse Engineering locks Roo shell up after restart&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ROO-1676&quot;&gt;&lt;del&gt;ROO-1676&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="60855" author="stewarta" created="Tue, 23 Nov 2010 00:38:38 +0000"  >&lt;p&gt;Generating @PrePersist methods is beyond the scope of DBRE especially for this corner case. Checked in code fixes this issue.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="17361" name="DBIntrospection.tar.gz" size="404314" author="eberhardwolff" created="Wed, 17 Nov 2010 03:57:48 +0000"/>
                            <attachment id="17307" name="EamUiAttachAdmin.java" size="1044" author="eberhardwolff" created="Wed, 3 Nov 2010 12:02:52 +0000"/>
                            <attachment id="17304" name="EamUiAttachAdmin_Roo_DbManaged.aj" size="1203" author="eberhardwolff" created="Mon, 1 Nov 2010 09:59:38 +0000"/>
                            <attachment id="17303" name="EamUiAttachAdmin_Roo_Entity.aj" size="3661" author="eberhardwolff" created="Mon, 1 Nov 2010 09:59:38 +0000"/>
                            <attachment id="17313" name="hq.sql.gz" size="15379" author="eberhardwolff" created="Thu, 4 Nov 2010 02:20:08 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 1 Nov 2010 16:07:35 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10280" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>21611</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i04isn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>26419</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10381" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Ranking</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>24726</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>