<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Fri Dec 23 02:28:25 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/ROO-1974/ROO-1974.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[ROO-1974] Perpetual &quot;Still Loading&quot; Loop</title>
                <link>https://jira.spring.io/browse/ROO-1974</link>
                <project id="10340" key="ROO">Spring Roo</project>
                    <description>&lt;p&gt;Running into some issues since 1.1.1. When I first ran the update it detected our custom ConversionService, so I followed instructions, removed that and pushed the code into Roo&apos;s new ApplicationConversionServiceFactoryBean.&lt;/p&gt;

&lt;p&gt;That class is also now mentioned in the webmvc-config. ie.&lt;br/&gt;
&amp;lt;mvc:annotation-driven conversion-service=&quot;applicationConversionService&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;bean class=&quot;xx.xxxx.xxxxxxx.web.ApplicationConversionServiceFactoryBean&quot; id=&quot;applicationConversionService&quot;/&amp;gt;&lt;/p&gt;

&lt;p&gt;However the Roo Shell now gets stuck on all subsequent startups. I&apos;ve tried removing the /cache and the temporary files, and restarting it fresh, but I get similar result.  What I can see, is that we have an application.properties that has around 2000 lines of labels, and if I delete that and let Roo regenerate it is gets through about 1300 of them before silently stalling and refusing to go any futher.  &lt;/p&gt;

&lt;p&gt;If I leave the application.properties alone, I can see it creating hundreds of 100kb copies of this application.properties in the temp dir while it is processing updates., Roo starts, and appears to do nothing, but never becomes responsive. After 3-4 mins it ceases created temporary files in the background, but doesn&apos;t continue from that point.  Any attempt to use the Shell results in a &quot;Still Loading&quot; message.  Turning development mode to true doesn&apos;t output anything further.&lt;/p&gt;

&lt;p&gt;We&apos;ve been using Roo for coming up a year now, and this is a new problem to us.  Is there any way to get a clearer picture of what it is doing?  These are corporate dev machines, so they have any number of background tasks and scans running in the background that I have no ability to turn off, but I would have just expected that to slow file operations, Roo hasn&apos;t stalled completely before.&lt;/p&gt;</description>
                <environment></environment>
        <key id="35830">ROO-1974</key>
            <summary>Perpetual &quot;Still Loading&quot; Loop</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://jira.spring.io/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Complete</resolution>
                                        <assignee username="stewarta">Alan Stewart</assignee>
                                    <reporter username="brad.murray@fronde.com">Brad Murray</reporter>
                        <labels>
                    </labels>
                <created>Wed, 12 Jan 2011 12:23:55 +0000</created>
                <updated>Mon, 14 Feb 2011 23:16:32 +0000</updated>
                            <resolved>Mon, 14 Feb 2011 23:16:32 +0000</resolved>
                                    <version>1.1.1.RELEASE</version>
                                    <fixVersion>1.1.2.RELEASE</fixVersion>
                                    <component>@ ROO SHELL</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="62297" author="brad.murray@fronde.com" created="Wed, 12 Jan 2011 12:25:39 +0000"  >&lt;p&gt;Forgot to mention.  1.1.1 works perfectly fine on other small projects or samples on this machine, it just starting having problems with the real project.&lt;/p&gt;</comment>
                            <comment id="62302" author="brad.murray@fronde.com" created="Wed, 12 Jan 2011 13:29:18 +0000"  >&lt;p&gt;Further testing:  With a 111KB application.properties file, if I delete it, and let Roo recreate the labels, I can see many output lines like &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;FelixDispatchQueue&amp;#93;&lt;/span&gt; 6a46ea9 Updated SRC_MAIN_WEBAPP\WEB-INF\i18n\application.properties&lt;/p&gt;

&lt;p&gt;however the temp directory activity shows iterations of the file growing up to 38KB (UpdateFile7588021711832049993tmp etc) and then stopping.  Again the Shell stalls / becomes unresponsive.&lt;/p&gt;
</comment>
                            <comment id="62304" author="brad.murray@fronde.com" created="Wed, 12 Jan 2011 13:44:47 +0000"  >&lt;p&gt;I am a bit surprised to see over 2,600 tmp files of the same application.properties as UpdateFile12142 etc created over a 6 minute period.  I checked with a text editor in half a dozen places and found all the files to be identical.&lt;/p&gt;</comment>
                            <comment id="62313" author="brad.murray@fronde.com" created="Wed, 12 Jan 2011 15:47:57 +0000"  >&lt;p&gt;Even more info, hopefully this is useful.&lt;/p&gt;

&lt;p&gt;I&apos;m looking at the org.springframework.roo.bootstrap.Main java process in jconsole.  And checking the thread states.  Since I have no idea what &apos;normal&apos; is for the app, here is a complete dump of what I see for each one.  My impression is there are a lot of blocked/waiting threads.&lt;/p&gt;

&lt;p&gt;Name: main&lt;br/&gt;
State: WAITING on org.apache.felix.framework.util.ThreadGate@a37a18&lt;br/&gt;
Total blocked: 1  Total waited: 2&lt;/p&gt;

&lt;p&gt;Stack trace: &lt;br/&gt;
java.lang.Object.wait(Native Method)&lt;br/&gt;
org.apache.felix.framework.util.ThreadGate.await(ThreadGate.java:79)&lt;br/&gt;
org.apache.felix.framework.Felix.waitForStop(Felix.java:836)&lt;br/&gt;
org.springframework.roo.bootstrap.Main.main(Main.java:296)&lt;/p&gt;

&lt;p&gt;Name: Reference Handler&lt;br/&gt;
State: WAITING on java.lang.ref.Reference$Lock@7dccc2&lt;br/&gt;
Total blocked: 445  Total waited: 437&lt;/p&gt;

&lt;p&gt;Stack trace: &lt;br/&gt;
java.lang.Object.wait(Native Method)&lt;br/&gt;
java.lang.Object.wait(Object.java:485)&lt;br/&gt;
java.lang.ref.Reference$ReferenceHandler.run(Reference.java:116)&lt;/p&gt;

&lt;p&gt;Name: Finalizer&lt;br/&gt;
State: WAITING on java.lang.ref.ReferenceQueue$Lock@1845505&lt;br/&gt;
Total blocked: 337  Total waited: 329&lt;/p&gt;

&lt;p&gt;Stack trace: &lt;br/&gt;
java.lang.Object.wait(Native Method)&lt;br/&gt;
java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:118)&lt;br/&gt;
java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:134)&lt;br/&gt;
java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:159)&lt;/p&gt;

&lt;p&gt;Name: Signal Dispatcher&lt;br/&gt;
State: RUNNABLE&lt;br/&gt;
Total blocked: 0  Total waited: 0&lt;/p&gt;

&lt;p&gt;Stack trace: &lt;/p&gt;

&lt;p&gt;Name: Attach Listener&lt;br/&gt;
State: RUNNABLE&lt;br/&gt;
Total blocked: 0  Total waited: 0&lt;/p&gt;

&lt;p&gt;Stack trace: &lt;/p&gt;

&lt;p&gt;Name: FelixDispatchQueue&lt;br/&gt;
State: RUNNABLE&lt;br/&gt;
Total blocked: 205  Total waited: 205&lt;/p&gt;

&lt;p&gt;Stack trace: &lt;br/&gt;
java.util.ArrayList.size(ArrayList.java:177)&lt;br/&gt;
java.util.AbstractList$Itr.hasNext(AbstractList.java:339)&lt;br/&gt;
org.springframework.roo.classpath.details.AbstractIdentifiableAnnotatedJavaStructureBuilder.buildAnnotations(AbstractIdentifiableAnnotatedJavaStructureBuilder.java:49)&lt;br/&gt;
org.springframework.roo.classpath.details.MethodMetadataBuilder.build(MethodMetadataBuilder.java:46)&lt;br/&gt;
org.springframework.roo.addon.entity.EntityMetadata.getIdentifierAccessor(EntityMetadata.java:497)&lt;br/&gt;
org.springframework.roo.addon.entity.EntityMetadata.getIdentifierAccessor(EntityMetadata.java:470)&lt;br/&gt;
org.springframework.roo.addon.web.mvc.controller.JavaTypeWrapper.findRelatedDomainTypes(JavaTypeWrapper.java:242)&lt;br/&gt;
org.springframework.roo.addon.web.mvc.controller.JavaTypeWrapper.&amp;lt;init&amp;gt;(JavaTypeWrapper.java:71)&lt;br/&gt;
org.springframework.roo.addon.web.mvc.controller.JavaTypeWrapper.findRelatedDomainTypes(JavaTypeWrapper.java:265)&lt;br/&gt;
org.springframework.roo.addon.web.mvc.controller.JavaTypeWrapper.&amp;lt;init&amp;gt;(JavaTypeWrapper.java:71)&lt;br/&gt;
org.springframework.roo.addon.web.mvc.controller.JavaTypeWrapper.findRelatedDomainTypes(JavaTypeWrapper.java:257)&lt;br/&gt;
org.springframework.roo.addon.web.mvc.controller.JavaTypeWrapper.&amp;lt;init&amp;gt;(JavaTypeWrapper.java:71)&lt;br/&gt;
org.springframework.roo.addon.web.mvc.controller.JavaTypeWrapper.findRelatedDomainTypes(JavaTypeWrapper.java:265)&lt;br/&gt;
org.springframework.roo.addon.web.mvc.controller.JavaTypeWrapper.&amp;lt;init&amp;gt;(JavaTypeWrapper.java:71)&lt;br/&gt;
org.springframework.roo.addon.web.mvc.controller.JavaTypeWrapper.findRelatedDomainTypes(JavaTypeWrapper.java:265)&lt;br/&gt;
org.springframework.roo.addon.web.mvc.controller.JavaTypeWrapper.&amp;lt;init&amp;gt;(JavaTypeWrapper.java:71)&lt;br/&gt;
org.springframework.roo.addon.web.mvc.controller.JavaTypeWrapper.findRelatedDomainTypes(JavaTypeWrapper.java:265)&lt;br/&gt;
org.springframework.roo.addon.web.mvc.controller.JavaTypeWrapper.&amp;lt;init&amp;gt;(JavaTypeWrapper.java:71)&lt;br/&gt;
org.springframework.roo.addon.web.mvc.controller.JavaTypeWrapper.findRelatedDomainTypes(JavaTypeWrapper.java:257)&lt;br/&gt;
org.springframework.roo.addon.web.mvc.controller.JavaTypeWrapper.&amp;lt;init&amp;gt;(JavaTypeWrapper.java:71)&lt;br/&gt;
org.springframework.roo.addon.web.mvc.controller.JavaTypeWrapper.findRelatedDomainTypes(JavaTypeWrapper.java:265)&lt;br/&gt;
org.springframework.roo.addon.web.mvc.controller.JavaTypeWrapper.&amp;lt;init&amp;gt;(JavaTypeWrapper.java:71)&lt;br/&gt;
org.springframework.roo.addon.web.mvc.controller.JavaTypeWrapper.findRelatedDomainTypes(JavaTypeWrapper.java:257)&lt;br/&gt;
org.springframework.roo.addon.web.mvc.controller.JavaTypeWrapper.&amp;lt;init&amp;gt;(JavaTypeWrapper.java:71)&lt;br/&gt;
org.springframework.roo.addon.web.mvc.controller.JavaTypeWrapper.findRelatedDomainTypes(JavaTypeWrapper.java:257)&lt;br/&gt;
org.springframework.roo.addon.web.mvc.controller.JavaTypeWrapper.&amp;lt;init&amp;gt;(JavaTypeWrapper.java:71)&lt;br/&gt;
org.springframework.roo.addon.web.mvc.controller.JavaTypeWrapper.findRelatedDomainTypes(JavaTypeWrapper.java:265)&lt;br/&gt;
org.springframework.roo.addon.web.mvc.controller.JavaTypeWrapper.&amp;lt;init&amp;gt;(JavaTypeWrapper.java:71)&lt;br/&gt;
org.springframework.roo.addon.web.mvc.controller.JavaTypeWrapper.findRelatedDomainTypes(JavaTypeWrapper.java:265)&lt;br/&gt;
org.springframework.roo.addon.web.mvc.controller.JavaTypeWrapper.&amp;lt;init&amp;gt;(JavaTypeWrapper.java:71)&lt;br/&gt;
org.springframework.roo.addon.web.mvc.controller.JavaTypeWrapper.findRelatedDomainTypes(JavaTypeWrapper.java:257)&lt;br/&gt;
org.springframework.roo.addon.web.mvc.controller.JavaTypeWrapper.&amp;lt;init&amp;gt;(JavaTypeWrapper.java:71)&lt;br/&gt;
org.springframework.roo.addon.web.mvc.controller.JavaTypeWrapper.findRelatedDomainTypes(JavaTypeWrapper.java:265)&lt;br/&gt;
org.springframework.roo.addon.web.mvc.controller.JavaTypeWrapper.&amp;lt;init&amp;gt;(JavaTypeWrapper.java:71)&lt;br/&gt;
org.springframework.roo.addon.web.mvc.controller.JavaTypeWrapper.findRelatedDomainTypes(JavaTypeWrapper.java:265)&lt;br/&gt;
org.springframework.roo.addon.web.mvc.controller.JavaTypeWrapper.&amp;lt;init&amp;gt;(JavaTypeWrapper.java:71)&lt;br/&gt;
org.springframework.roo.addon.web.mvc.controller.ConversionServiceMetadataProviderImpl.findFormBackingObjectTypes(ConversionServiceMetadataProviderImpl.java:90)&lt;br/&gt;
org.springframework.roo.addon.web.mvc.controller.ConversionServiceMetadataProviderImpl.getMetadata(ConversionServiceMetadataProviderImpl.java:53)&lt;br/&gt;
org.springframework.roo.classpath.itd.AbstractItdMetadataProvider.get(AbstractItdMetadataProvider.java:266)&lt;br/&gt;
org.springframework.roo.metadata.DefaultMetadataService.getInternal(DefaultMetadataService.java:136)&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;locked java.lang.Boolean@f3e54b&lt;br/&gt;
org.springframework.roo.metadata.DefaultMetadataService.get(DefaultMetadataService.java:81)&lt;br/&gt;
org.springframework.roo.classpath.itd.AbstractItdMetadataProvider.notify(AbstractItdMetadataProvider.java:143)&lt;br/&gt;
org.springframework.roo.metadata.DefaultMetadataService.notify(DefaultMetadataService.java:199)&lt;/li&gt;
	&lt;li&gt;locked java.lang.Boolean@f3e54b&lt;br/&gt;
org.springframework.roo.metadata.internal.DefaultMetadataDependencyRegistry.notifyDownstream(DefaultMetadataDependencyRegistry.java:262)&lt;br/&gt;
org.springframework.roo.classpath.javaparser.JavaParserMetadataProvider.onFileEvent(JavaParserMetadataProvider.java:141)&lt;br/&gt;
org.springframework.roo.file.monitor.polling.PollingFileMonitorService.publish(PollingFileMonitorService.java:344)&lt;br/&gt;
org.springframework.roo.file.monitor.polling.PollingFileMonitorService.scanAll(PollingFileMonitorService.java:318)&lt;/li&gt;
	&lt;li&gt;locked java.lang.Boolean@52a27d&lt;br/&gt;
org.springframework.roo.process.manager.internal.DefaultFileManager.notify(DefaultFileManager.java:199)&lt;br/&gt;
org.springframework.roo.metadata.internal.DefaultMetadataDependencyRegistry.notifyDownstream(DefaultMetadataDependencyRegistry.java:276)&lt;br/&gt;
org.springframework.roo.addon.maven.MavenProjectMetadataProvider.onFileEvent(MavenProjectMetadataProvider.java:220)&lt;br/&gt;
org.springframework.roo.file.monitor.polling.PollingFileMonitorService.publish(PollingFileMonitorService.java:344)&lt;br/&gt;
org.springframework.roo.file.monitor.polling.PollingFileMonitorService.scanAll(PollingFileMonitorService.java:318)&lt;/li&gt;
	&lt;li&gt;locked java.lang.Boolean@52a27d&lt;br/&gt;
org.springframework.roo.process.manager.internal.MonitoringRequestCommand.callback(MonitoringRequestCommand.java:36)&lt;br/&gt;
org.springframework.roo.process.manager.internal.MonitoringRequestCommand.callback(MonitoringRequestCommand.java:15)&lt;br/&gt;
org.springframework.roo.process.manager.internal.DefaultProcessManager.doTransactionally(DefaultProcessManager.java:178)&lt;br/&gt;
org.springframework.roo.process.manager.internal.DefaultProcessManager.completeStartup(DefaultProcessManager.java:100)&lt;/li&gt;
	&lt;li&gt;locked org.springframework.roo.process.manager.event.AbstractProcessManagerStatusPublisher$StatusHolder@129f93b&lt;br/&gt;
org.springframework.roo.process.manager.internal.DefaultProcessManager$1.frameworkEvent(DefaultProcessManager.java:60)&lt;br/&gt;
org.apache.felix.framework.util.EventDispatcher.invokeFrameworkListenerCallback(EventDispatcher.java:767)&lt;br/&gt;
org.apache.felix.framework.util.EventDispatcher.fireEventImmediately(EventDispatcher.java:724)&lt;br/&gt;
org.apache.felix.framework.util.EventDispatcher.run(EventDispatcher.java:942)&lt;br/&gt;
org.apache.felix.framework.util.EventDispatcher.access$000(EventDispatcher.java:54)&lt;br/&gt;
org.apache.felix.framework.util.EventDispatcher$1.run(EventDispatcher.java:106)&lt;br/&gt;
java.lang.Thread.run(Thread.java:619)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Name: FelixStartLevel&lt;br/&gt;
State: WAITING on java.util.ArrayList@d1cf9e&lt;br/&gt;
Total blocked: 8  Total waited: 4&lt;/p&gt;

&lt;p&gt;Stack trace: &lt;br/&gt;
java.lang.Object.wait(Native Method)&lt;br/&gt;
java.lang.Object.wait(Object.java:485)&lt;br/&gt;
org.apache.felix.framework.StartLevelImpl.run(StartLevelImpl.java:242)&lt;br/&gt;
java.lang.Thread.run(Thread.java:619)&lt;/p&gt;

&lt;p&gt;Name: FelixPackageAdmin&lt;br/&gt;
State: WAITING on org.apache.felix.framework.PackageAdminImpl@26a4ce&lt;br/&gt;
Total blocked: 0  Total waited: 1&lt;/p&gt;

&lt;p&gt;Stack trace: &lt;br/&gt;
java.lang.Object.wait(Native Method)&lt;br/&gt;
java.lang.Object.wait(Object.java:485)&lt;br/&gt;
org.apache.felix.framework.PackageAdminImpl.run(PackageAdminImpl.java:316)&lt;br/&gt;
java.lang.Thread.run(Thread.java:619)&lt;/p&gt;

&lt;p&gt;Name: Thread-1&lt;br/&gt;
State: WAITING on org.apache.felix.ipojo.Extender$CreatorThread@be41d5&lt;br/&gt;
Total blocked: 66  Total waited: 67&lt;/p&gt;

&lt;p&gt;Stack trace: &lt;br/&gt;
java.lang.Object.wait(Native Method)&lt;br/&gt;
java.lang.Object.wait(Object.java:485)&lt;br/&gt;
org.apache.felix.ipojo.Extender$CreatorThread.run(Extender.java:650)&lt;br/&gt;
java.lang.Thread.run(Thread.java:619)&lt;/p&gt;

&lt;p&gt;Name: SCR Component Actor&lt;br/&gt;
State: WAITING on java.util.LinkedList@199723f&lt;br/&gt;
Total blocked: 98  Total waited: 80&lt;/p&gt;

&lt;p&gt;Stack trace: &lt;br/&gt;
java.lang.Object.wait(Native Method)&lt;br/&gt;
java.lang.Object.wait(Object.java:485)&lt;br/&gt;
org.apache.felix.scr.impl.ComponentActorThread.run(ComponentActorThread.java:74)&lt;br/&gt;
java.lang.Thread.run(Thread.java:619)&lt;/p&gt;

&lt;p&gt;Name: Thread-2&lt;br/&gt;
State: WAITING on java.util.Stack@1aea1ed&lt;br/&gt;
Total blocked: 160  Total waited: 161&lt;/p&gt;

&lt;p&gt;Stack trace: &lt;br/&gt;
java.lang.Object.wait(Native Method)&lt;br/&gt;
java.lang.Object.wait(Object.java:485)&lt;br/&gt;
org.apache.felix.log.LogListenerThread.run(LogListenerThread.java:123)&lt;/p&gt;

&lt;p&gt;Name: Timer-0&lt;br/&gt;
State: TIMED_WAITING on java.util.TaskQueue@b21710&lt;br/&gt;
Total blocked: 1  Total waited: 581&lt;/p&gt;

&lt;p&gt;Stack trace: &lt;br/&gt;
java.lang.Object.wait(Native Method)&lt;br/&gt;
java.util.TimerThread.mainLoop(Timer.java:509)&lt;br/&gt;
java.util.TimerThread.run(Timer.java:462)&lt;/p&gt;

&lt;p&gt;Name: JLine Shell&lt;br/&gt;
State: RUNNABLE&lt;br/&gt;
Total blocked: 2  Total waited: 0&lt;/p&gt;

&lt;p&gt;Stack trace: &lt;br/&gt;
jline.WindowsTerminal.readByte(Native Method)&lt;br/&gt;
jline.WindowsTerminal.readCharacter(WindowsTerminal.java:233)&lt;br/&gt;
jline.WindowsTerminal.readVirtualKey(WindowsTerminal.java:326)&lt;br/&gt;
jline.ConsoleReader.readVirtualKey(ConsoleReader.java:1453)&lt;br/&gt;
jline.ConsoleReader.readBinding(ConsoleReader.java:654)&lt;br/&gt;
jline.ConsoleReader.readLine(ConsoleReader.java:494)&lt;br/&gt;
jline.ConsoleReader.readLine(ConsoleReader.java:448)&lt;br/&gt;
jline.ConsoleReader.readLine(ConsoleReader.java:300)&lt;br/&gt;
org.springframework.roo.shell.jline.JLineShell.promptLoop(JLineShell.java:350)&lt;br/&gt;
org.springframework.roo.shell.jline.JLineShell.run(JLineShell.java:132)&lt;br/&gt;
java.lang.Thread.run(Thread.java:619)&lt;/p&gt;

&lt;p&gt;Name: Flash message manager&lt;br/&gt;
State: TIMED_WAITING&lt;br/&gt;
Total blocked: 1  Total waited: 2,938&lt;/p&gt;

&lt;p&gt;Stack trace: &lt;br/&gt;
java.lang.Thread.sleep(Native Method)&lt;br/&gt;
org.springframework.roo.shell.jline.JLineShell$4.run(JLineShell.java:221)&lt;br/&gt;
java.lang.Thread.run(Thread.java:619)&lt;/p&gt;

&lt;p&gt;Name: Timer-1&lt;br/&gt;
State: TIMED_WAITING on java.util.TaskQueue@13ac592&lt;br/&gt;
Total blocked: 1  Total waited: 120&lt;/p&gt;

&lt;p&gt;Stack trace: &lt;br/&gt;
java.lang.Object.wait(Native Method)&lt;br/&gt;
java.util.TimerThread.mainLoop(Timer.java:509)&lt;br/&gt;
java.util.TimerThread.run(Timer.java:462)&lt;/p&gt;

&lt;p&gt;Name: RMI TCP Accept-0&lt;br/&gt;
State: RUNNABLE&lt;br/&gt;
Total blocked: 0  Total waited: 0&lt;/p&gt;

&lt;p&gt;Stack trace: &lt;br/&gt;
java.net.PlainSocketImpl.socketAccept(Native Method)&lt;br/&gt;
java.net.PlainSocketImpl.accept(PlainSocketImpl.java:390)&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;locked java.net.SocksSocketImpl@ef9c23&lt;br/&gt;
java.net.ServerSocket.implAccept(ServerSocket.java:453)&lt;br/&gt;
java.net.ServerSocket.accept(ServerSocket.java:421)&lt;br/&gt;
sun.management.jmxremote.LocalRMIServerSocketFactory$1.accept(LocalRMIServerSocketFactory.java:34)&lt;br/&gt;
sun.rmi.transport.tcp.TCPTransport$AcceptLoop.executeAcceptLoop(TCPTransport.java:369)&lt;br/&gt;
sun.rmi.transport.tcp.TCPTransport$AcceptLoop.run(TCPTransport.java:341)&lt;br/&gt;
java.lang.Thread.run(Thread.java:619)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Name: RMI TCP Accept-0&lt;br/&gt;
State: RUNNABLE&lt;br/&gt;
Total blocked: 0  Total waited: 0&lt;/p&gt;

&lt;p&gt;Stack trace: &lt;br/&gt;
java.net.PlainSocketImpl.socketAccept(Native Method)&lt;br/&gt;
java.net.PlainSocketImpl.accept(PlainSocketImpl.java:390)&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;locked java.net.SocksSocketImpl@ef9c23&lt;br/&gt;
java.net.ServerSocket.implAccept(ServerSocket.java:453)&lt;br/&gt;
java.net.ServerSocket.accept(ServerSocket.java:421)&lt;br/&gt;
sun.management.jmxremote.LocalRMIServerSocketFactory$1.accept(LocalRMIServerSocketFactory.java:34)&lt;br/&gt;
sun.rmi.transport.tcp.TCPTransport$AcceptLoop.executeAcceptLoop(TCPTransport.java:369)&lt;br/&gt;
sun.rmi.transport.tcp.TCPTransport$AcceptLoop.run(TCPTransport.java:341)&lt;br/&gt;
java.lang.Thread.run(Thread.java:619)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Name: RMI TCP Connection(1)-10.224.3.94&lt;br/&gt;
State: RUNNABLE&lt;br/&gt;
Total blocked: 0  Total waited: 0&lt;/p&gt;

&lt;p&gt;Stack trace: &lt;br/&gt;
java.net.SocketInputStream.socketRead0(Native Method)&lt;br/&gt;
java.net.SocketInputStream.read(SocketInputStream.java:129)&lt;br/&gt;
java.io.BufferedInputStream.fill(BufferedInputStream.java:218)&lt;br/&gt;
java.io.BufferedInputStream.read(BufferedInputStream.java:237)&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;locked java.io.BufferedInputStream@c44a09&lt;br/&gt;
java.io.FilterInputStream.read(FilterInputStream.java:66)&lt;br/&gt;
sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:517)&lt;br/&gt;
sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:790)&lt;br/&gt;
sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:649)&lt;br/&gt;
java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)&lt;br/&gt;
java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)&lt;br/&gt;
java.lang.Thread.run(Thread.java:619)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Name: RMI Scheduler(0)&lt;br/&gt;
State: TIMED_WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@4cb162&lt;br/&gt;
Total blocked: 0  Total waited: 5&lt;/p&gt;

&lt;p&gt;Stack trace: &lt;br/&gt;
sun.misc.Unsafe.park(Native Method)&lt;br/&gt;
java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:198)&lt;br/&gt;
java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:1963)&lt;br/&gt;
java.util.concurrent.DelayQueue.take(DelayQueue.java:164)&lt;br/&gt;
java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:583)&lt;br/&gt;
java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:576)&lt;br/&gt;
java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:947)&lt;br/&gt;
java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907)&lt;br/&gt;
java.lang.Thread.run(Thread.java:619)&lt;/p&gt;

&lt;p&gt;Name: JMX server connection timeout 27&lt;br/&gt;
State: TIMED_WAITING on [I@7f2a19&lt;br/&gt;
Total blocked: 15  Total waited: 16&lt;/p&gt;

&lt;p&gt;Stack trace: &lt;br/&gt;
java.lang.Object.wait(Native Method)&lt;br/&gt;
com.sun.jmx.remote.internal.ServerCommunicatorAdmin$Timeout.run(ServerCommunicatorAdmin.java:150)&lt;br/&gt;
java.lang.Thread.run(Thread.java:619)&lt;/p&gt;

&lt;p&gt;Name: RMI TCP Connection(2)-10.224.3.94&lt;br/&gt;
State: TIMED_WAITING on com.sun.jmx.remote.internal.ArrayNotificationBuffer@e000bb&lt;br/&gt;
Total blocked: 0  Total waited: 6&lt;/p&gt;

&lt;p&gt;Stack trace: &lt;br/&gt;
java.lang.Object.wait(Native Method)&lt;br/&gt;
com.sun.jmx.remote.internal.ArrayNotificationBuffer.fetchNotifications(ArrayNotificationBuffer.java:417)&lt;br/&gt;
com.sun.jmx.remote.internal.ArrayNotificationBuffer$ShareBuffer.fetchNotifications(ArrayNotificationBuffer.java:209)&lt;br/&gt;
com.sun.jmx.remote.internal.ServerNotifForwarder.fetchNotifs(ServerNotifForwarder.java:258)&lt;br/&gt;
javax.management.remote.rmi.RMIConnectionImpl$2.run(RMIConnectionImpl.java:1227)&lt;br/&gt;
javax.management.remote.rmi.RMIConnectionImpl$2.run(RMIConnectionImpl.java:1225)&lt;br/&gt;
javax.management.remote.rmi.RMIConnectionImpl.fetchNotifications(RMIConnectionImpl.java:1231)&lt;br/&gt;
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:305)&lt;br/&gt;
sun.rmi.transport.Transport$1.run(Transport.java:159)&lt;br/&gt;
java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
sun.rmi.transport.Transport.serviceCall(Transport.java:155)&lt;br/&gt;
sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:535)&lt;br/&gt;
sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:790)&lt;br/&gt;
sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:649)&lt;br/&gt;
java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)&lt;br/&gt;
java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)&lt;br/&gt;
java.lang.Thread.run(Thread.java:619)&lt;/p&gt;

&lt;p&gt;Name: RMI TCP Connection(3)-10.224.3.94&lt;br/&gt;
State: RUNNABLE&lt;br/&gt;
Total blocked: 0  Total waited: 0&lt;/p&gt;

&lt;p&gt;Stack trace: &lt;br/&gt;
sun.management.ThreadImpl.dumpThreads0(Native Method)&lt;br/&gt;
sun.management.ThreadImpl.dumpAllThreads(ThreadImpl.java:374)&lt;br/&gt;
sun.reflect.GeneratedMethodAccessor97.invoke(Unknown Source)&lt;br/&gt;
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:167)&lt;br/&gt;
com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:96)&lt;br/&gt;
com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:33)&lt;br/&gt;
com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:208)&lt;br/&gt;
com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:120)&lt;br/&gt;
com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:262)&lt;br/&gt;
javax.management.StandardMBean.invoke(StandardMBean.java:391)&lt;br/&gt;
com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:836)&lt;br/&gt;
com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:761)&lt;br/&gt;
javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1427)&lt;br/&gt;
javax.management.remote.rmi.RMIConnectionImpl.access$200(RMIConnectionImpl.java:72)&lt;br/&gt;
javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1265)&lt;br/&gt;
javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1360)&lt;br/&gt;
javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:788)&lt;br/&gt;
sun.reflect.GeneratedMethodAccessor19.invoke(Unknown Source)&lt;br/&gt;
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:305)&lt;br/&gt;
sun.rmi.transport.Transport$1.run(Transport.java:159)&lt;br/&gt;
java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
sun.rmi.transport.Transport.serviceCall(Transport.java:155)&lt;br/&gt;
sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:535)&lt;br/&gt;
sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:790)&lt;br/&gt;
sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:649)&lt;br/&gt;
java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)&lt;br/&gt;
java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)&lt;br/&gt;
java.lang.Thread.run(Thread.java:619)&lt;/p&gt;











</comment>
                            <comment id="62315" author="brad.murray@fronde.com" created="Wed, 12 Jan 2011 16:14:48 +0000"  >&lt;p&gt;We can also see that the Total blocked, and Total waited on the Reference Handler just keeps climbing without end.&lt;br/&gt;
Every time you see State: WAITING on java.lang.ref.Reference$Lock@7dccc2 as below&lt;/p&gt;</comment>
                            <comment id="62318" author="balex" created="Wed, 12 Jan 2011 16:36:35 +0000"  >&lt;p&gt;Brad, we&apos;re aware of the property file growth and will resolve shortly. I&apos;ll tackle most of this issue via &lt;a href=&quot;https://jira.spring.io/browse/ROO-1975&quot; title=&quot;FileManager method changes to support deferred I/O as far as practical&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ROO-1975&quot;&gt;ROO-1975&lt;/a&gt; optimisations, although JspMetadataListener and MenuOperationsImpl could more efficiently call PropFileOperations. Whether it&apos;s worth the programming change is another issue, though, as the performance gains of &lt;a href=&quot;https://jira.spring.io/browse/ROO-1975&quot; title=&quot;FileManager method changes to support deferred I/O as far as practical&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ROO-1975&quot;&gt;ROO-1975&lt;/a&gt; will be material and no disk writes will occur (especially the temporary file writes) until final commit time, so that should eliminate the significant number of temporary files.&lt;/p&gt;

&lt;p&gt;Thanks for the above dump BTW. Would you mind confirming your JVM details, and also attempting this again but with an empty directory? We&apos;re seeing it at our end intermittently with empty directories (no pom.xml, src directory etc). Unfortunately on my machine I am unable to reproduce despite numerous attempts. FYI I&apos;m on Linux with build 1.6.0_22-b04 64-bit.&lt;/p&gt;</comment>
                            <comment id="62319" author="brad.murray@fronde.com" created="Wed, 12 Jan 2011 17:42:21 +0000"  >&lt;p&gt;Tested this in JDK 1.6.20 and now JDK 1.6.23, both 32bit.  Windows XP Pro 2002 SP3.&lt;/p&gt;

&lt;p&gt;By the property file growth, do you mean just the general volume of files, or the potential race condition I seem to be looking at where a lock (the file lock maybe?) gets blocked, so the process writes another copy of the same file.  &lt;/p&gt;

&lt;p&gt;As I type, Roo 1.1.0 Release  (trying to roll back from 1.1.1) wrote out 12,000 application.properties (the UpdateFile~ equivalent), with an odd size distribtion. It climbed from 0KB to 50KB within the first 1216 files, then wrote out 9183 identical copies of the file at 50KB, then finally climbed from 50KB to 115KB in the last 2000 files, then cleaned the directory.&lt;/p&gt;

&lt;p&gt;It never been this slow though, ~30 mins so far and the console isn&apos;t responding yet, although it appears to be making some progress through its workload if the temp files have now been cleaned up.&lt;/p&gt;

&lt;p&gt;Name: Reference Handler&lt;br/&gt;
State: WAITING on java.lang.ref.Reference$Lock@1e59f7c&lt;br/&gt;
Total blocked: 3,300  Total waited: 3,300&lt;/p&gt;
</comment>
                            <comment id="63130" author="stewarta" created="Sun, 6 Feb 2011 15:09:04 +0000"  >&lt;p&gt;Can you please see if the latest code from Git solves this?  There were changes since 1.1.1&lt;br/&gt;
Thanks&lt;/p&gt;</comment>
                            <comment id="63173" author="brad.murray@fronde.com" created="Mon, 7 Feb 2011 11:49:15 +0000"  >&lt;p&gt;I had a chance to grab the 1.1.2 nightly snapshot on the 31st and run it over our project, it works several timess faster than 1.1.0 without hangups.  I didn&apos;t specifically look at the what Ben has changed around the deferred file processing, but it looks good on projects of our size at the moment.&lt;/p&gt;

&lt;p&gt;The jconsole threads look pretty normal.&lt;/p&gt;
</comment>
                            <comment id="63380" author="stewarta" created="Mon, 14 Feb 2011 23:16:32 +0000"  >&lt;p&gt;Closing for now.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10151">
                    <name>Relate</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="35834">ROO-1977</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="35882">ROO-1991</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="35831">ROO-1975</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 12 Jan 2011 16:36:35 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10280" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>21357</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i031nr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>17811</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10381" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Ranking</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>17216</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10120" key="com.atlassian.jira.plugin.system.customfieldtypes:url">
                        <customfieldname>Reference URL</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[http://forum.springsource.org/showthread.php?t=100989]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>