<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Thu Dec 22 14:41:17 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/DATAJPA-728/DATAJPA-728.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[DATAJPA-728] PageImpl : wrong total count</title>
                <link>https://jira.spring.io/browse/DATAJPA-728</link>
                <project id="10552" key="DATAJPA">Spring Data JPA</project>
                    <description>&lt;p&gt;I have an Exception &apos;java.lang.IllegalArgumentException: Total must not be less than the number of elements given!&apos; throw in &apos;org.springframework.data.domain.PageImpl.&amp;lt;init&amp;gt;(PageImpl.java:45)&apos;.&lt;br/&gt;
The complete stack is attached.&lt;/p&gt;

&lt;p&gt;After some debugging, I have the scenario to reproduce it :&lt;br/&gt;
The important idea is to manage pagination, two requests are done : a first one to get total line count, and an other one to get the lines.&lt;br/&gt;
1 In my case I have 40 lines in the table, I retrieve a 100-size-page (page 0)&lt;br/&gt;
2 the count return 40&lt;br/&gt;
3 another thread insert a new entry&lt;br/&gt;
4 the second request retrieve the first 100 results &#187; 41&lt;br/&gt;
5 The PageImpl constructor crash because its has a total count of 40 and 41 content entities.&lt;/p&gt;

&lt;p&gt;I use this table to store messages to consumer thread. The workaround I found is to retrieve 1-size-page&#8230;&lt;/p&gt;

&lt;p&gt;Should the second request limit the request with the requested total (40) but not the page size (100) ; Or should the total (40) be overridden by the actual total is superior ?&lt;/p&gt;</description>
                <environment>Ubuntu, CentOS&lt;br/&gt;
Hibernate 4.3.10&lt;br/&gt;
PostgreSQL</environment>
        <key id="64011">DATAJPA-728</key>
            <summary>PageImpl : wrong total count</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://jira.spring.io/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="olivergierke">Oliver Gierke</assignee>
                                    <reporter username="Emmanuel">Emmanuel Martin</reporter>
                        <labels>
                    </labels>
                <created>Fri, 29 May 2015 01:44:11 +0000</created>
                <updated>Tue, 18 Aug 2015 04:43:26 +0000</updated>
                            <resolved>Mon, 15 Jun 2015 05:27:40 +0000</resolved>
                                    <version>1.7.2 (Evans SR2)</version>
                    <version>1.8 GA (Fowler)</version>
                                    <fixVersion>1.8.1 (Fowler SR1)</fixVersion>
                    <fixVersion>1.7.3 (Evans SR3)</fixVersion>
                    <fixVersion>1.6.6 (Dijkstra SR6)</fixVersion>
                    <fixVersion>1.9 RC1 (Gosling)</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="116633" author="olivergierke" created="Mon, 15 Jun 2015 05:27:40 +0000"  >&lt;p&gt;This should be fixed with the fix for &lt;a href=&quot;https://jira.spring.io/browse/DATACMNS-713&quot; title=&quot;PageImpl should adapt the total for last pages if it doesn&amp;#39;t match the content&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DATACMNS-713&quot;&gt;&lt;del&gt;DATACMNS-713&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="118648" author="tisoferi" created="Tue, 18 Aug 2015 04:35:29 +0000"  >&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;A few days ago I ran into this bug in version 1.8.2 of Spring Data JPA.&lt;br/&gt;
I was curious about the fix, so I started to investigate the branches in Github (1.8.x, 1.7.x, 1.6.x, master), to see the file modifications.&lt;br/&gt;
I experienced there is no commit which related to this bug in the branches, neither to DATACMS-713.&lt;/p&gt;

&lt;p&gt;Can you please confirm the bug fixed in the mention versions? &lt;br/&gt;
(no file modifications needed?)&lt;/p&gt;</comment>
                            <comment id="118649" author="olivergierke" created="Tue, 18 Aug 2015 04:37:28 +0000"  >&lt;p&gt;As stated in my previous example this is fixed by a change in Spring Data Commons.&lt;/p&gt;</comment>
                            <comment id="118650" author="tisoferi" created="Tue, 18 Aug 2015 04:43:26 +0000"  >&lt;p&gt;I see, thank you for the information, now its clear for me.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10151">
                    <name>Relate</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="64272">DATACMNS-713</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="22889" name="stack issue spring data" size="12807" author="Emmanuel" created="Fri, 29 May 2015 01:24:29 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 15 Jun 2015 05:27:40 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10280" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10182" key="com.atlassian.jira.toolkit:lastupdaterorcommenter">
                        <customfieldname>Last updater</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>tisoferi</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08h6f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10381" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Ranking</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10480" key="com.pyxis.greenhopper.jira:gh-sprint">
                        <customfieldname>Sprint</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="91">59 - Evans / Fowler SR</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>