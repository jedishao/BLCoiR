<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Thu Dec 22 14:30:13 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/DATAJPA-13/DATAJPA-13.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[DATAJPA-13] Repository findOne method throws Exception with Oracle</title>
                <link>https://jira.spring.io/browse/DATAJPA-13</link>
                <project id="10552" key="DATAJPA">Spring Data JPA</project>
                    <description>
&lt;p&gt;When I call findOne with a JpaRepository working against an Oracle DB, I get an &quot;result returns more than one elements&quot; exception. Instead of an exception, I would expect the findOne method to return one of the records matching the specification, as Mongo does.&lt;/p&gt;

&lt;p&gt;Outline of code:&lt;br/&gt;
		JpaRepository repository = ....;&lt;br/&gt;
		Specification spec =...;&lt;br/&gt;
		return repository.findOne(spec);&lt;br/&gt;
Exception:&lt;/p&gt;

&lt;p&gt;Exception in thread &quot;main&quot; com.shutterfly.platform.infrastructure.dal.MDBFactoryBean$1: result returns more than one elements&lt;br/&gt;
	at com.shutterfly.platform.infrastructure.dal.MDBFactoryBean.translateExceptionIfPossible(MDBFactoryBean.java:11)&lt;br/&gt;
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:58)&lt;br/&gt;
....&lt;/p&gt;</description>
                <environment></environment>
        <key id="35953">DATAJPA-13</key>
            <summary>Repository findOne method throws Exception with Oracle</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://jira.spring.io/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="olivergierke">Oliver Gierke</assignee>
                                    <reporter username="oshankershutterfly">Oruganti Shanker</reporter>
                        <labels>
                    </labels>
                <created>Thu, 20 Jan 2011 15:29:17 +0000</created>
                <updated>Mon, 25 Mar 2013 09:29:03 +0000</updated>
                            <resolved>Thu, 20 Jan 2011 16:52:14 +0000</resolved>
                                                    <fixVersion>1.0 M1</fixVersion>
                                    <component>Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                    <timeoriginalestimate seconds="0">0d</timeoriginalestimate>
                            <timeestimate seconds="0">0d</timeestimate>
                            <timespent seconds="1800">0.5h</timespent>
                                <comments>
                            <comment id="62590" author="olivergierke" created="Thu, 20 Jan 2011 16:52:14 +0000"  >&lt;p&gt;Fixed with d108bc9fed74a66ae6a444772efe558b13bc6340.&lt;/p&gt;</comment>
                            <comment id="62591" author="olivergierke" created="Thu, 20 Jan 2011 17:07:44 +0000"  >&lt;p&gt;I implemented the fix for a &lt;tt&gt;Specification&lt;/tt&gt; not returning any object. This will result in &lt;tt&gt;null&lt;/tt&gt; being returned now. However I haven&apos;t changed the code to implement an arbitrary result in case of multiple objects being returned as we don&apos;t have no control over the ordering in that case so that multiple calls to the same data store could result in differing results.&lt;/p&gt;

&lt;p&gt;Would it suit you simply calling &lt;tt&gt;findAll(Specification spec)&lt;/tt&gt; and use the first one returned?&lt;/p&gt;</comment>
                            <comment id="62592" author="oshankershutterfly" created="Thu, 20 Jan 2011 17:32:12 +0000"  >&lt;p&gt;Yes, what you propose is the best solution. There will be a difference in the findOne behavior when using MongoDB vs Oracle, but we can&apos;t avoid a few such differences (&lt;img class=&quot;emoticon&quot; src=&quot;https://jira.spring.io/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;).&lt;/p&gt;</comment>
                            <comment id="62598" author="olivergierke" created="Thu, 20 Jan 2011 23:52:45 +0000"  >&lt;p&gt;Well I think we could restrict the MongoDB version of &lt;tt&gt;findOne(&#8230;)&lt;/tt&gt; to align to that convention. So we would stay consistent and could outline the way I proposed in the comment above in the documentation as a workaround.&lt;/p&gt;</comment>
                            <comment id="62621" author="oshankershutterfly" created="Fri, 21 Jan 2011 10:01:26 +0000"  >&lt;p&gt;I would say we leave things the way they are now. The Mongo users of the API would expect findOne to return one object, as the Mongo API does. So the best way is to have findOne return what the Mongo API returns. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="17534" name="mylyn-context.zip" size="2813" author="olivergierke" created="Thu, 20 Jan 2011 16:52:18 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 20 Jan 2011 16:52:14 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10280" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2341</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10182" key="com.atlassian.jira.toolkit:lastupdaterorcommenter">
                        <customfieldname>Last updater</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>tmarshall</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02t6n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>16437</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10381" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Ranking</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>15510</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>