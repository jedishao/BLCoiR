<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Fri Dec 23 06:34:04 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SWF-1668/SWF-1668.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SWF-1668] ConversationContainer is not threadsafe</title>
                <link>https://jira.spring.io/browse/SWF-1668</link>
                <project id="10050" key="SWF">Spring Web Flow</project>
                    <description>&lt;p&gt;The ConversationContainer.conversations is not Threadsafe, we come across an issue in Jboss eap 6.2 session replication. While one thread is calling getConversation and the other thread is calling removeConversation, ConcurrentModificationException will occur.&lt;/p&gt;

&lt;p&gt;Suggest to fix it by &lt;/p&gt;


&lt;p/&gt;
&lt;div id=&quot;syntaxplugin&quot; class=&quot;syntaxplugin&quot; style=&quot;border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;&quot;&gt;
&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; border=&quot;0&quot; width=&quot;100%&quot; style=&quot;font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;&quot;&gt;
		&lt;tbody &gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;	public ConversationContainer(int maxConversations, String sessionKey) {&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;		this.maxConversations = maxConversations;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;		this.sessionKey = sessionKey;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;		this.conversations =  Collections.synchronizedList(new ArrayList&amp;lt;ContainedConversation&amp;gt;());&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;	}&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
			&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;p/&gt;</description>
            <key id="65282">SWF-1668</key>
            <summary>ConversationContainer is not threadsafe</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://jira.spring.io/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://jira.spring.io/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Complete</resolution>
                                        <assignee username="rstoya05-aop">Rossen Stoyanchev</assignee>
                                    <reporter username="cycchow">Ricky Chow</reporter>
                        <labels>
                    </labels>
                <created>Tue, 11 Aug 2015 21:07:42 +0000</created>
                <updated>Tue, 29 Mar 2016 04:21:24 +0000</updated>
                            <resolved>Wed, 19 Aug 2015 15:20:46 +0000</resolved>
                                    <version>2.4.1</version>
                                    <fixVersion>2.4.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="118480" author="cycchow" created="Tue, 11 Aug 2015 22:00:51 +0000"  >&lt;p&gt;although the three public methods already synchronized, but we are still facing the concurrentmodificationexception on member conversations&lt;/p&gt;</comment>
                            <comment id="118494" author="rstoya05-aop" created="Wed, 12 Aug 2015 03:58:14 +0000"  >&lt;p&gt;I&apos;ll have a look for 2.4.2.&lt;/p&gt;</comment>
                            <comment id="118722" author="rstoya05-aop" created="Wed, 19 Aug 2015 15:20:46 +0000"  >&lt;p&gt;I&apos;ve switched to using CopyOnWriteArrayList. If you could try testing with this change, that would be great. Thanks.&lt;/p&gt;</comment>
                            <comment id="128149" author="cycchow" created="Wed, 23 Mar 2016 04:35:41 +0000"  >&lt;p&gt;May i know any other place will have this issue? or already fixed? we will test 2.4.2 version soon. &lt;/p&gt;</comment>
                            <comment id="128150" author="cycchow" created="Wed, 23 Mar 2016 05:03:13 +0000"  >&lt;p&gt;besides, we found the following still having issues in 2.4.0&lt;/p&gt;

&lt;p&gt;Caused by: an exception which occurred:&lt;br/&gt;
        in field snapshots&lt;br/&gt;
        in field attributes&lt;br/&gt;
        in field conversations&lt;br/&gt;
        in object java.util.HashMap@f88c6f1&lt;br/&gt;
        in object org.jboss.as.clustering.SimpleMarshalledValue@f88c6f1&lt;br/&gt;
        in object org.infinispan.atomic.PutOperation@f118e963&lt;br/&gt;
        in object java.util.LinkedList@9cb503cf&lt;br/&gt;
        in object org.infinispan.atomic.AtomicHashMapDelta@3c5cc04f&lt;br/&gt;
        in object org.infinispan.commands.write.PutKeyValueCommand@1f3bb35&lt;br/&gt;
        in object org.infinispan.commands.tx.PrepareCommand@1da6fde1^M&lt;/p&gt;


&lt;p&gt;Please help to check another map and list in the session may cause concurrentmodificationexception, and i will give a help to scan the source as well.&lt;/p&gt;</comment>
                            <comment id="128287" author="cycchow" created="Tue, 29 Mar 2016 04:21:24 +0000"  >&lt;p&gt;we have make a check, the following fields is not thread safe&lt;/p&gt;

&lt;p&gt;ContainedConversation.attributes&lt;/p&gt;

&lt;p&gt;SimpleFlowExecutionSnapshotGroup.snapshots&lt;br/&gt;
SimpleFlowExecutionSnapshotGroup.snapshotIds&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="22979" name="ConversationContainer.java" size="5532" author="cycchow" created="Tue, 11 Aug 2015 21:07:28 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 12 Aug 2015 03:58:14 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08ok7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10120" key="com.atlassian.jira.plugin.system.customfieldtypes:url">
                        <customfieldname>Reference URL</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[http://stackoverflow.com/questions/31730559/concurrentmodificationexception-thrown-on-web-flow-conversations-during-session]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>