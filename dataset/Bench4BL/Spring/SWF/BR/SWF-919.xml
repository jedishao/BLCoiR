<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Fri Dec 23 06:42:57 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SWF-919/SWF-919.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SWF-919] Incorrect redirect in new session</title>
                <link>https://jira.spring.io/browse/SWF-919</link>
                <project id="10050" key="SWF">Spring Web Flow</project>
                    <description>&lt;p&gt;If a flow is mapped using a URL extension, and if someone uses a bookmarked link from an earlier flow instance, Spring WebFlow loses the extension on new flow creation, resulting in 404-not found. Here are the details:&lt;/p&gt;

&lt;p&gt;Spring WebFlow automatically puts a flow execution key in URL, for example accessing /myapp/myflow.xyz will take you to: /myapp/myflow.xyz?execution=e1s1&lt;/p&gt;

&lt;p&gt;If someone bookmarks this link, and later tries to use it directly (in a new browser session), WebFlow is supposed to redirect back to /myapp/myflow.xyz to start a new flow. However, it is redirecting to /myapp/myflow - note the missing &quot;.xyz&quot; suffix. Obviously, this results in 404-not found.&lt;/p&gt;

&lt;p&gt;I am using the normal setup - myflow.xyz is mapped to flowController using SimpleUrlHandlerMapping, and *.xyz is mapped to Spring MVC dispatcher servlet. The flow is defined in myflow.xml, and is registered with flowRegistry.&lt;/p&gt;

&lt;p&gt;The versions used are Spring WebFlow 2.0.3 and Spring 2.5. This bug occurs in all application servers and browsers I tested. As users frequently bookmark the links, at least the initial entry into a flow, this is a serious bug, with no work-around. &lt;/p&gt;

&lt;p&gt;Corresponding forum thread is at &lt;a href=&quot;http://forum.springframework.org/showthread.php?p=209256&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://forum.springframework.org/showthread.php?p=209256&lt;/a&gt; .&lt;/p&gt;</description>
            <key id="24425">SWF-919</key>
            <summary>Incorrect redirect in new session</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://jira.spring.io/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://jira.spring.io/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="kdonald">Keith Donald</assignee>
                                    <reporter username="alokkmittal">Alok Mittal</reporter>
                        <labels>
                    </labels>
                <created>Thu, 23 Oct 2008 01:16:48 +0000</created>
                <updated>Wed, 5 Aug 2009 05:55:11 +0000</updated>
                            <resolved>Wed, 5 Aug 2009 05:55:11 +0000</resolved>
                                    <version>2.0.3</version>
                                    <fixVersion>2.0.8</fixVersion>
                                    <component>Core: Flow Executor</component>
                    <component>Integration: Spring MVC</component>
                        <due></due>
                            <votes>7</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="40596" author="wolfman22" created="Thu, 23 Oct 2008 01:51:30 +0000"  >&lt;p&gt;Being unable to map the Dispatcher-Servlet to /* (when using mvc+jsf) as you can see here:&lt;br/&gt;
&lt;a href=&quot;http://forum.springframework.org/showthread.php?t=61946&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://forum.springframework.org/showthread.php?t=61946&lt;/a&gt;&lt;br/&gt;
I&apos;m forced to map Dispatcher-Servlet to *.html causing problems discribed by A.Mittal above. (going kinda circular problem &lt;img class=&quot;emoticon&quot; src=&quot;https://jira.spring.io/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="40602" author="alokkmittal" created="Thu, 23 Oct 2008 02:36:22 +0000"  >&lt;p&gt;This is due to a bug in DefaultFlowUrlHandler.createFlowDefinitionUrl(). It gets the base of the URL, and simply appends the flow id, rather than the requested URL without the execution key.&lt;/p&gt;

&lt;p&gt;&amp;lt;pre&amp;gt;&lt;br/&gt;
public String createFlowDefinitionUrl(String flowId, AttributeMap input, HttpServletRequest request) {&lt;br/&gt;
		StringBuffer url = new StringBuffer();&lt;br/&gt;
		url.append(getFlowHandlerUri(request));&lt;br/&gt;
		url.append(&apos;/&apos;);&lt;br/&gt;
		url.append(encode(flowId));&lt;br/&gt;
		if (input != null &amp;amp;&amp;amp; !input.isEmpty()) &lt;/p&gt;
{
			url.append(&apos;?&apos;);
			appendQueryParameters(url, input.asMap());
		}
&lt;p&gt;		return url.toString();&lt;br/&gt;
	}&lt;br/&gt;
&amp;lt;/pre&amp;gt;&lt;/p&gt;</comment>
                            <comment id="40618" author="alokkmittal" created="Fri, 24 Oct 2008 01:44:48 +0000"  >&lt;p&gt;This can be fixed by changing the DefaultFlowUrlHandler.createFlowDefinitionUrl() function to:&lt;/p&gt;

&lt;p&gt;   public String createFlowDefinitionUrl( String flowId, AttributeMap input, HttpServletRequest request ) {&lt;br/&gt;
      StringBuffer url = new StringBuffer(  );&lt;br/&gt;
      url.append( request.getRequestURI(  ) );&lt;br/&gt;
      if( ( input != null ) &amp;amp;&amp;amp; !input.isEmpty(  ) )&lt;/p&gt;
      {
         url.append( &apos;?&apos; );
         appendQueryParameters( url, input.asMap(  ) );
      }
&lt;p&gt;      return url.toString(  );&lt;br/&gt;
   }&lt;/p&gt;

&lt;p&gt;Until this is fixed, you can have a custom implementation of FlowUrlHandler, fixed as above, and inject it to your FlowController.&lt;/p&gt;</comment>
                            <comment id="41013" author="kdonald" created="Mon, 10 Nov 2008 08:14:11 +0000"  >&lt;p&gt;Unfortunately the fix you provided is not that simple--it will not work with a redirect to another flow definition.  It should be possible to detect the presence of a file extension in the request URI e.g. .htm and then guess that this needs to be appended to the flow id for the next request to be mapped properly.  It would be much cleaner if we could actually lookup the servlet mapping, but this is not supported by the servlet specification at present.&lt;/p&gt;</comment>
                            <comment id="41820" author="nickmz" created="Sun, 28 Dec 2008 20:36:23 +0000"  >&lt;p&gt;I have the same serious problem. Is it possible to add a new setter method to specify extension manually?&lt;/p&gt;

&lt;p&gt;&amp;lt;pre&amp;gt;&lt;br/&gt;
DefaultFlowUrlHandler.setExtention(String extension);&lt;br/&gt;
&amp;lt;/pre&amp;gt;&lt;/p&gt;

&lt;p&gt;&amp;lt;pre&amp;gt;&lt;br/&gt;
public String createFlowDefinitionUrl(String flowId, AttributeMap input, HttpServletRequest request) {&lt;br/&gt;
   ...&lt;br/&gt;
   url.append(this.extension);&lt;br/&gt;
   return url.toString();&lt;br/&gt;
}&lt;br/&gt;
&amp;lt;/pre&amp;gt;&lt;/p&gt;</comment>
                            <comment id="43959" author="rvanrijn" created="Mon, 4 May 2009 01:12:46 +0000"  >&lt;p&gt;We have a similar problem where WebFlow loses part of the URL when it redirects due to an execution being expired. In our case we we have extra parts in the url between the servlet path and the flow id which are lost.&lt;/p&gt;

&lt;p&gt;For example the following url:&lt;br/&gt;
/myapp/myurlpart/myflow?execution=e1s1 &lt;/p&gt;

&lt;p&gt;is redirected to:&lt;br/&gt;
/myapp/myflow&lt;/p&gt;

&lt;p&gt;The extra url parts are lost in the createFlowDefinitionUrl method in DefaultFlowUrlHandler:&lt;/p&gt;

&lt;p&gt;url.append(request.getContextPath());&lt;br/&gt;
url.append(request.getServletPath());&lt;br/&gt;
url.append(&apos;/&apos;);&lt;br/&gt;
url.append(flowId);&lt;/p&gt;

&lt;p&gt;A fix for this would be much appreciated. &lt;/p&gt;</comment>
                            <comment id="43960" author="kdonald" created="Mon, 4 May 2009 01:23:22 +0000"  >&lt;p&gt;Ronald,&lt;/p&gt;

&lt;p&gt;Have you upgraded to 2.0.7?&lt;/p&gt;</comment>
                            <comment id="43965" author="rvanrijn" created="Mon, 4 May 2009 02:27:23 +0000"  >&lt;p&gt;Hi Keith,&lt;/p&gt;

&lt;p&gt;we are using the 2.0.7 release of WebFlow. If you need any more information please let me know. &lt;/p&gt;

&lt;p&gt;best regards,&lt;br/&gt;
Ronald&lt;/p&gt;</comment>
                            <comment id="44068" author="nkaza" created="Sun, 10 May 2009 02:11:36 +0000"  >&lt;p&gt;This looks like the same issue as &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://jira.spring.io/browse/SWF-1027&quot; title=&quot;FilenameFlowUrlHandler does not implement createFlowDefinitionUrl&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SWF-1027&quot;&gt;&lt;del&gt;SWF-1027&lt;/del&gt;&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://jira.spring.io/browse/SWF-1006&quot; title=&quot;DefaultFlowUrlHandler does not take into account servlet mapping suffix in createFlowDefinitionUrl&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SWF-1006&quot;&gt;&lt;del&gt;SWF-1006&lt;/del&gt;&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://jira.spring.io/browse/SWF-988&quot; title=&quot;File extension left off when generating flow definition URLs for requests mapped using a servlet-mapping of *.extension (like *.htm)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SWF-988&quot;&gt;&lt;del&gt;SWF-988&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;
</comment>
                            <comment id="45939" author="jeremyg484" created="Wed, 5 Aug 2009 05:55:11 +0000"  >&lt;p&gt;Agreed, this should be handled by the fix provided in &lt;a href=&quot;https://jira.spring.io/browse/SWF-1027&quot; title=&quot;FilenameFlowUrlHandler does not implement createFlowDefinitionUrl&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SWF-1027&quot;&gt;&lt;del&gt;SWF-1027&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 23 Oct 2008 01:51:30 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i04o47:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>27281</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>