<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Thu Dec 22 12:46:57 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/BATCHADM-111/BATCHADM-111.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[BATCHADM-111] removeInactiveExecutions may not be called by Scheduled Thread, causing possible out of memory</title>
                <link>https://jira.spring.io/browse/BATCHADM-111</link>
                <project id="10380" key="BATCHADM">Spring Batch Admin</project>
                    <description>&lt;p&gt;I use the spring batch admin in production system, and find that the memory usage is slowly increase.  &lt;br/&gt;
Then I generated heapdump on the application server(Websphere), found that the ArrayList in SimpleJobService class contains many child, So I checked the source code and found &lt;br/&gt;
@Scheduled(fixedDelay=60000L)&lt;br/&gt;
  public void removeInactiveExecutions()&lt;br/&gt;
  {&lt;br/&gt;
    for (Iterator iterator = this.activeExecutions.iterator(); iterator.hasNext(); ) {&lt;br/&gt;
      JobExecution jobExecution = (JobExecution)iterator.next();&lt;br/&gt;
      try &lt;/p&gt;
{
        jobExecution = getJobExecution(jobExecution.getId());
      }
&lt;p&gt;      catch (NoSuchJobExecutionException e) &lt;/p&gt;
{
        logger.error(&quot;Unexpected exception loading JobExecution&quot;, e);
      }
&lt;p&gt;      if (!(jobExecution.isRunning()))&lt;br/&gt;
        iterator.remove();&lt;br/&gt;
    }&lt;br/&gt;
  }&lt;br/&gt;
I guess this mean to be executed via Scheduled Thread, however I could not found any configuration xml that contains &amp;lt;task:annotation-driven executor=&quot;myExecutor&quot; scheduler=&quot;myScheduler&quot;/&amp;gt;&lt;/p&gt;

&lt;p&gt;Also the SimpleJobService is created via SimpleJobServiceFactoryBean. So I can&apos;t see how the @Scheduled can be picked up (or may be I don&apos;t know too way about spring framework)&lt;/p&gt;

&lt;p&gt;I have attached a heap dump screen shot, hope is useful.&lt;/p&gt;

&lt;p&gt;Regards,&lt;/p&gt;

&lt;p&gt;Chun&lt;/p&gt;
</description>
                <environment>Websphere Application Server 6.0.31</environment>
        <key id="37459">BATCHADM-111</key>
            <summary>removeInactiveExecutions may not be called by Scheduled Thread, causing possible out of memory</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://jira.spring.io/images/icons/priorities/minor.png">Minor</priority>
                        <status id="5" iconUrl="https://jira.spring.io/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Complete</resolution>
                                        <assignee username="david_syer">Dave Syer</assignee>
                                    <reporter username="hepoi">Hepoi Ko</reporter>
                        <labels>
                    </labels>
                <created>Mon, 11 Apr 2011 15:10:49 +0000</created>
                <updated>Fri, 15 Apr 2011 00:48:20 +0000</updated>
                            <resolved>Fri, 15 Apr 2011 00:48:20 +0000</resolved>
                                    <version>1.2.0</version>
                                    <fixVersion>1.2.1</fixVersion>
                                    <component>Manager</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                    <timeoriginalestimate seconds="0">0d</timeoriginalestimate>
                            <timeestimate seconds="0">0d</timeestimate>
                                        <comments>
                            <comment id="65285" author="hepoi" created="Mon, 11 Apr 2011 15:13:00 +0000"  >&lt;p&gt;Typo mistake&lt;/p&gt;

&lt;p&gt;Also the SimpleJobService is created via SimpleJobServiceFactoryBean. So I can&apos;t see how the @Scheduled can be picked up (or may be I don&apos;t know too well about spring framework) &lt;/p&gt;</comment>
                            <comment id="65372" author="david_syer" created="Fri, 15 Apr 2011 00:48:19 +0000"  >&lt;p&gt;It would be picked up from the factory product if there was a &amp;lt;task:annotation-driven/&amp;gt; declaration anywhere (which there isn&apos;t).  Thanks for finding this problem.  I fixed it by adding an explicit &amp;lt;task:scheduled-tasks/&amp;gt; declaration, so that the interval can easily be overridden by users.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="18024" name="heapdump-spring-batch-admin.png" size="134232" author="hepoi" created="Mon, 11 Apr 2011 15:10:49 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 15 Apr 2011 00:48:19 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10280" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3678</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02y3b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>17233</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10381" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Ranking</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>16233</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>