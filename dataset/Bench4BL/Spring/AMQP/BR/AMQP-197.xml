<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Thu Dec 22 10:52:00 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/AMQP-197/AMQP-197.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[AMQP-197] NPE when stopping rabbitmq master in ha mode</title>
                <link>https://jira.spring.io/browse/AMQP-197</link>
                <project id="10450" key="AMQP">Spring AMQP</project>
                    <description>&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;I am testing HA mode (Active/Active) in RabbitMQ 2.6.1. In one of the tests, I am stopping rabbitmq master&lt;br/&gt;
&quot;sudo /etc/init.d/rabbitmq-server stop&quot;. sometimes it works fine, but occasionally it leads to this NPE below:&lt;/p&gt;


&lt;p&gt;Consumer null (amq.ctag-6iSabxbsB8yndhtRW0FC2A==) method handleCancelOk for channel AMQChannel(amqp://guest@127.0.0.1:5672/,2) threw an exception for channel AMQChannel(amqp://guest@127.0.0.1:5672/,2):&lt;br/&gt;
java.lang.NullPointerException&lt;br/&gt;
	at com.rabbitmq.client.impl.ChannelN$2.transformReply(ChannelN.java:929)&lt;br/&gt;
	at com.rabbitmq.client.impl.ChannelN$2.transformReply(ChannelN.java:921)&lt;br/&gt;
	at com.rabbitmq.client.impl.AMQChannel$BlockingRpcContinuation.handleCommand(AMQChannel.java:328)&lt;br/&gt;
	at com.rabbitmq.client.impl.AMQChannel.handleCompleteInboundCommand(AMQChannel.java:157)&lt;br/&gt;
	at com.rabbitmq.client.impl.AMQChannel.handleFrame(AMQChannel.java:99)&lt;br/&gt;
	at com.rabbitmq.client.impl.AMQConnection$MainLoop.run(AMQConnection.java:443)&lt;br/&gt;
Exception in thread &quot;SimpleAsyncTaskExecutor-1&quot; org.springframework.amqp.AmqpIOException: java.io.IOException&lt;br/&gt;
	at org.springframework.amqp.rabbit.connection.RabbitUtils.convertRabbitAccessException(RabbitUtils.java:109)&lt;br/&gt;
	at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.createBareConnection(AbstractConnectionFactory.java:118)&lt;br/&gt;
	at org.springframework.amqp.rabbit.connection.CachingConnectionFactory.createConnection(CachingConnectionFactory.java:179)&lt;br/&gt;
	at org.springframework.amqp.rabbit.connection.CachingConnectionFactory.createBareChannel(CachingConnectionFactory.java:171)&lt;br/&gt;
	at org.springframework.amqp.rabbit.connection.CachingConnectionFactory.access$200(CachingConnectionFactory.java:48)&lt;br/&gt;
	at org.springframework.amqp.rabbit.connection.CachingConnectionFactory$CachedChannelInvocationHandler.invoke(CachingConnectionFactory.java:296)&lt;br/&gt;
	at $Proxy142.basicRecover(Unknown Source)&lt;br/&gt;
	at org.springframework.amqp.rabbit.connection.RabbitUtils.closeMessageConsumer(RabbitUtils.java:129)&lt;br/&gt;
	at org.springframework.amqp.rabbit.listener.BlockingQueueConsumer.stop(BlockingQueueConsumer.java:210)&lt;br/&gt;
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.restart(SimpleMessageListenerContainer.java:379)&lt;br/&gt;
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1300(SimpleMessageListenerContainer.java:56)&lt;br/&gt;
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:551)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:662)&lt;br/&gt;
Caused by: java.io.IOException&lt;br/&gt;
	at com.rabbitmq.client.impl.AMQChannel.wrap(AMQChannel.java:110)&lt;br/&gt;
	at com.rabbitmq.client.impl.AMQConnection.start(AMQConnection.java:263)&lt;br/&gt;
	at com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:403)&lt;br/&gt;
	at com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:423)&lt;br/&gt;
	at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.createBareConnection(AbstractConnectionFactory.java:116)&lt;br/&gt;
	... 11 more&lt;br/&gt;
Caused by: com.rabbitmq.client.ShutdownSignalException: connection error; reason: java.io.EOFException&lt;br/&gt;
	at com.rabbitmq.utility.ValueOrException.getValue(ValueOrException.java:67)&lt;br/&gt;
	at com.rabbitmq.utility.BlockingValueOrException.uninterruptibleGetValue(BlockingValueOrException.java:33)&lt;br/&gt;
	at com.rabbitmq.client.impl.AMQChannel$BlockingRpcContinuation.getReply(AMQChannel.java:337)&lt;br/&gt;
	at com.rabbitmq.client.impl.AMQConnection.start(AMQConnection.java:248)&lt;br/&gt;
	... 14 more&lt;br/&gt;
Caused by: java.io.EOFException&lt;br/&gt;
	at java.io.DataInputStream.readUnsignedByte(DataInputStream.java:273)&lt;br/&gt;
	at com.rabbitmq.client.impl.Frame.readFrom(Frame.java:99)&lt;br/&gt;
	at com.rabbitmq.client.impl.SocketFrameHandler.readFrame(SocketFrameHandler.java:140)&lt;br/&gt;
	at com.rabbitmq.client.impl.AMQConnection.readFrame(AMQConnection.java:399)&lt;br/&gt;
	at com.rabbitmq.client.impl.AMQConnection$MainLoop.run(AMQConnection.java:427)&lt;/p&gt;</description>
                <environment>Ubuntu 11 64bit, jdk 1.6.27, Spring AMQP 1.0.0 GA, RabbitMQ 2.6.1. two rabbitmq nodes behind LB</environment>
        <key id="39994">AMQP-197</key>
            <summary>NPE when stopping rabbitmq master in ha mode</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://jira.spring.io/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Complete</resolution>
                                        <assignee username="grussell">Gary Russell</assignee>
                                    <reporter username="flysteer">Dmitry</reporter>
                        <labels>
                    </labels>
                <created>Fri, 30 Sep 2011 12:36:19 +0000</created>
                <updated>Tue, 29 May 2012 06:22:15 +0000</updated>
                            <resolved>Tue, 29 May 2012 06:22:15 +0000</resolved>
                                    <version>1.0.0 GA</version>
                                    <fixVersion>1.1.0.GA</fixVersion>
                                    <component>RabbitMQ</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="71235" author="david_syer" created="Wed, 12 Oct 2011 02:03:26 +0000"  >&lt;p&gt;That looks harmless.  Is there a problem other than an ugly log file?&lt;/p&gt;</comment>
                            <comment id="74788" author="tmccuch" created="Sun, 15 Jan 2012 11:20:42 +0000"  >&lt;p&gt;I don&apos;t think this is harmless. &lt;/p&gt;

&lt;p&gt;I&apos;m testing with RabbitMQ 2.7.1.&lt;/p&gt;

&lt;p&gt;In one of my tests of the spring integration cafe amqp example below, I lose 3 out of 40 drinks (1 cold and 2 hot), and 6 out of 20 deliveries when I fail over the master broker during the middle of processing. I stopped the rabbitmq master with &quot;rabbitmqctl stop_app&quot;.&lt;/p&gt;


&lt;p&gt;Here is the log output from the cold drink barista (using inbound-amqp-gateway):&lt;/p&gt;

&lt;p&gt;SimpleAsyncTaskExecutor-1 WARN : org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer - Consumer raised exception, processing can restart if the connection factory supports it. Exception summary: org.springframework.amqp.AmqpIOException: java.io.IOException&lt;br/&gt;
SimpleAsyncTaskExecutor-1 INFO : org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer - Restarting Consumer: tag=&lt;span class=&quot;error&quot;&gt;&amp;#91;null&amp;#93;&lt;/span&gt;, channel=null, acknowledgeMode=AUTO local queue size=0&lt;br/&gt;
SimpleAsyncTaskExecutor-2 INFO : org.springframework.integration.samples.cafe.xml.Barista - SimpleAsyncTaskExecutor-2 prepared cold drink #1 for order #1: iced 3 shot MOCHA&lt;br/&gt;
SimpleAsyncTaskExecutor-2 DEBUG: org.springframework.amqp.rabbit.connection.CachingConnectionFactory - Creating cached Rabbit Channel from AMQChannel(amqp://guest@172.16.227.150:5672/,2)&lt;br/&gt;
SimpleAsyncTaskExecutor-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.150:5672/,2)&lt;br/&gt;
SimpleAsyncTaskExecutor-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange [], routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;amq.gen-wjdIrRcLX60pJ1kVA5r2dD&amp;#93;&lt;/span&gt;&lt;br/&gt;
SimpleAsyncTaskExecutor-2 INFO : org.springframework.integration.samples.cafe.xml.Barista - SimpleAsyncTaskExecutor-2 prepared cold drink #2 for order #2: iced 3 shot MOCHA&lt;br/&gt;
SimpleAsyncTaskExecutor-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.150:5672/,2)&lt;br/&gt;
SimpleAsyncTaskExecutor-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange [], routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;amq.gen-wa0nLbPvlwvptrNHc_EgT-&amp;#93;&lt;/span&gt;&lt;br/&gt;
SimpleAsyncTaskExecutor-2 INFO : org.springframework.integration.samples.cafe.xml.Barista - SimpleAsyncTaskExecutor-2 prepared cold drink #3 for order #3: iced 3 shot MOCHA&lt;br/&gt;
SimpleAsyncTaskExecutor-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.150:5672/,2)&lt;br/&gt;
SimpleAsyncTaskExecutor-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange [], routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;amq.gen-wz75KS1NafL-xEWWF6DAlP&amp;#93;&lt;/span&gt;&lt;br/&gt;
SimpleAsyncTaskExecutor-2 INFO : org.springframework.integration.samples.cafe.xml.Barista - SimpleAsyncTaskExecutor-2 prepared cold drink #4 for order #4: iced 3 shot MOCHA&lt;br/&gt;
SimpleAsyncTaskExecutor-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.150:5672/,2)&lt;br/&gt;
SimpleAsyncTaskExecutor-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange [], routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;amq.gen-QG74bgiIejFU82ZkddrZPS&amp;#93;&lt;/span&gt;&lt;br/&gt;
SimpleAsyncTaskExecutor-2 INFO : org.springframework.integration.samples.cafe.xml.Barista - SimpleAsyncTaskExecutor-2 prepared cold drink #5 for order #5: iced 3 shot MOCHA&lt;br/&gt;
SimpleAsyncTaskExecutor-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.150:5672/,2)&lt;br/&gt;
SimpleAsyncTaskExecutor-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange [], routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;amq.gen-QSTe8hSPOBKJIvv_GAjq06&amp;#93;&lt;/span&gt;&lt;br/&gt;
SimpleAsyncTaskExecutor-2 INFO : org.springframework.integration.samples.cafe.xml.Barista - SimpleAsyncTaskExecutor-2 prepared cold drink #6 for order #6: iced 3 shot MOCHA&lt;br/&gt;
SimpleAsyncTaskExecutor-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.150:5672/,2)&lt;br/&gt;
SimpleAsyncTaskExecutor-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange [], routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;amq.gen-geCL4pzby7eHKcUVorLCwI&amp;#93;&lt;/span&gt;&lt;br/&gt;
SimpleAsyncTaskExecutor-2 INFO : org.springframework.integration.samples.cafe.xml.Barista - SimpleAsyncTaskExecutor-2 prepared cold drink #7 for order #7: iced 3 shot MOCHA&lt;br/&gt;
SimpleAsyncTaskExecutor-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.150:5672/,2)&lt;br/&gt;
SimpleAsyncTaskExecutor-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange [], routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;amq.gen-wXgALGWNxwgosxm7u3wrDd&amp;#93;&lt;/span&gt;&lt;br/&gt;
SimpleAsyncTaskExecutor-2 INFO : org.springframework.integration.samples.cafe.xml.Barista - SimpleAsyncTaskExecutor-2 prepared cold drink #8 for order #8: iced 3 shot MOCHA&lt;br/&gt;
SimpleAsyncTaskExecutor-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.150:5672/,2)&lt;br/&gt;
SimpleAsyncTaskExecutor-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange [], routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;amq.gen-AOzJmzzf1UrR68zuaA7rT4&amp;#93;&lt;/span&gt;&lt;br/&gt;
SimpleAsyncTaskExecutor-2 INFO : org.springframework.integration.samples.cafe.xml.Barista - SimpleAsyncTaskExecutor-2 prepared cold drink #9 for order #9: iced 3 shot MOCHA&lt;br/&gt;
SimpleAsyncTaskExecutor-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.150:5672/,2)&lt;br/&gt;
SimpleAsyncTaskExecutor-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange [], routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;amq.gen-QGxRQ4EFf9HHFTJfIJNKZC&amp;#93;&lt;/span&gt;&lt;br/&gt;
SimpleAsyncTaskExecutor-2 INFO : org.springframework.integration.samples.cafe.xml.Barista - SimpleAsyncTaskExecutor-2 prepared cold drink #10 for order #10: iced 3 shot MOCHA&lt;br/&gt;
SimpleAsyncTaskExecutor-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.150:5672/,2)&lt;br/&gt;
SimpleAsyncTaskExecutor-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange [], routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;amq.gen-wkOZfv7k4WFlG9jRomdP1s&amp;#93;&lt;/span&gt;&lt;br/&gt;
SimpleAsyncTaskExecutor-2 INFO : org.springframework.integration.samples.cafe.xml.Barista - SimpleAsyncTaskExecutor-2 prepared cold drink #11 for order #11: iced 3 shot MOCHA&lt;br/&gt;
SimpleAsyncTaskExecutor-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.150:5672/,2)&lt;br/&gt;
SimpleAsyncTaskExecutor-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange [], routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;amq.gen-gWJKyBRBgaWzJlrj44TofR&amp;#93;&lt;/span&gt;&lt;br/&gt;
SimpleAsyncTaskExecutor-2 INFO : org.springframework.integration.samples.cafe.xml.Barista - SimpleAsyncTaskExecutor-2 prepared cold drink #12 for order #12: iced 3 shot MOCHA&lt;br/&gt;
SimpleAsyncTaskExecutor-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.150:5672/,2)&lt;br/&gt;
SimpleAsyncTaskExecutor-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange [], routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;amq.gen-A15ZozBvvvNAXr5lTYPJzD&amp;#93;&lt;/span&gt;&lt;br/&gt;
SimpleAsyncTaskExecutor-2 INFO : org.springframework.integration.samples.cafe.xml.Barista - SimpleAsyncTaskExecutor-2 prepared cold drink #13 for order #13: iced 3 shot MOCHA&lt;br/&gt;
SimpleAsyncTaskExecutor-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.150:5672/,2)&lt;br/&gt;
SimpleAsyncTaskExecutor-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange [], routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;amq.gen-w14sTqT-ou8sr06WVO_vEa&amp;#93;&lt;/span&gt;&lt;br/&gt;
SimpleAsyncTaskExecutor-2 INFO : org.springframework.integration.samples.cafe.xml.Barista - SimpleAsyncTaskExecutor-2 prepared cold drink #14 for order #14: iced 3 shot MOCHA&lt;br/&gt;
SimpleAsyncTaskExecutor-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.150:5672/,2)&lt;br/&gt;
SimpleAsyncTaskExecutor-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange [], routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;amq.gen-wuPePhVYtoR-At8D-hk47d&amp;#93;&lt;/span&gt;&lt;br/&gt;
SimpleAsyncTaskExecutor-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitAdmin - Initializing declarations&lt;br/&gt;
SimpleAsyncTaskExecutor-2 WARN : org.springframework.amqp.rabbit.core.RabbitAdmin - Auto-declaring an auto-delete Exchange (cafe-drinks). It will be deleted by the broker if not in use (if all bindings are deleted), but will only be redeclared if the connection is closed and reopened.&lt;br/&gt;
SimpleAsyncTaskExecutor-2 WARN : org.springframework.amqp.rabbit.core.RabbitAdmin - Auto-declaring an auto-delete Queue (cold-drinks). It will be deleted by the broker if not in use, and all messages will be lost.  Redeclared when the connection is closed and reopened.&lt;br/&gt;
SimpleAsyncTaskExecutor-2 WARN : org.springframework.amqp.rabbit.core.RabbitAdmin - Auto-declaring an auto-delete Queue (all-cold-drinks). It will be deleted by the broker if not in use, and all messages will be lost.  Redeclared when the connection is closed and reopened.&lt;br/&gt;
SimpleAsyncTaskExecutor-2 DEBUG: org.springframework.amqp.rabbit.connection.CachingConnectionFactory - Creating cached Rabbit Channel from AMQChannel(amqp://guest@172.16.227.151:5672/,1)&lt;br/&gt;
SimpleAsyncTaskExecutor-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.151:5672/,1)&lt;br/&gt;
SimpleAsyncTaskExecutor-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitAdmin - declaring Exchange &apos;cafe-drinks&apos;&lt;br/&gt;
SimpleAsyncTaskExecutor-2 DEBUG: org.springframework.amqp.rabbit.connection.CachingConnectionFactory - Detected closed channel on exception.  Re-initializing: null&lt;br/&gt;
SimpleAsyncTaskExecutor-2 INFO : org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer - Execution of Rabbit message listener failed, and no ErrorHandler has been set: class org.springframework.amqp.rabbit.listener.ListenerExecutionFailedException: Listener threw exception&lt;br/&gt;
SimpleAsyncTaskExecutor-2 WARN : org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer - Consumer raised exception, processing can restart if the connection factory supports it. Exception summary: com.rabbitmq.client.ShutdownSignalException: connection error; reason: &lt;/p&gt;
{#method&amp;lt;connection.close&amp;gt;(reply-code=320, reply-text=CONNECTION_FORCED - broker forced connection closure with reason &apos;shutdown&apos;, class-id=0, method-id=0), null, &quot;[B@4eb5ad68&quot;}
&lt;p&gt;SimpleAsyncTaskExecutor-2 INFO : org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer - Restarting Consumer: tag=&lt;span class=&quot;error&quot;&gt;&amp;#91;amq.ctag-A2b6hpVDtj6Ca3Vb2sCGCR&amp;#93;&lt;/span&gt;, channel=Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.150:5672/,1), acknowledgeMode=AUTO local queue size=0&lt;br/&gt;
SimpleAsyncTaskExecutor-3 INFO : org.springframework.integration.samples.cafe.xml.Barista - SimpleAsyncTaskExecutor-3 prepared cold drink #15 for order #14: iced 3 shot MOCHA&lt;br/&gt;
SimpleAsyncTaskExecutor-3 DEBUG: org.springframework.amqp.rabbit.connection.CachingConnectionFactory - Creating cached Rabbit Channel from AMQChannel(amqp://guest@172.16.227.151:5672/,2)&lt;br/&gt;
SimpleAsyncTaskExecutor-3 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.151:5672/,2)&lt;br/&gt;
SimpleAsyncTaskExecutor-3 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange [], routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;amq.gen-wuPePhVYtoR-At8D-hk47d&amp;#93;&lt;/span&gt;&lt;br/&gt;
SimpleAsyncTaskExecutor-3 INFO : org.springframework.integration.samples.cafe.xml.Barista - SimpleAsyncTaskExecutor-3 prepared cold drink #16 for order #16: iced 3 shot MOCHA&lt;br/&gt;
SimpleAsyncTaskExecutor-3 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.151:5672/,2)&lt;br/&gt;
SimpleAsyncTaskExecutor-3 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange [], routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;amq.gen-AEYQ_ieJcAZTp4pw8Qoh9J&amp;#93;&lt;/span&gt;&lt;br/&gt;
SimpleAsyncTaskExecutor-3 INFO : org.springframework.integration.samples.cafe.xml.Barista - SimpleAsyncTaskExecutor-3 prepared cold drink #17 for order #17: iced 3 shot MOCHA&lt;br/&gt;
SimpleAsyncTaskExecutor-3 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.151:5672/,2)&lt;br/&gt;
SimpleAsyncTaskExecutor-3 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange [], routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;amq.gen-gMKX12UL-T_4DkYVRaqk_T&amp;#93;&lt;/span&gt;&lt;br/&gt;
SimpleAsyncTaskExecutor-3 INFO : org.springframework.integration.samples.cafe.xml.Barista - SimpleAsyncTaskExecutor-3 prepared cold drink #18 for order #18: iced 3 shot MOCHA&lt;br/&gt;
SimpleAsyncTaskExecutor-3 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.151:5672/,2)&lt;br/&gt;
SimpleAsyncTaskExecutor-3 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange [], routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;amq.gen-AWIvtNSanYnxjZ_Uo78bfs&amp;#93;&lt;/span&gt;&lt;br/&gt;
SimpleAsyncTaskExecutor-3 INFO : org.springframework.integration.samples.cafe.xml.Barista - SimpleAsyncTaskExecutor-3 prepared cold drink #19 for order #19: iced 3 shot MOCHA&lt;br/&gt;
SimpleAsyncTaskExecutor-3 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.151:5672/,2)&lt;br/&gt;
SimpleAsyncTaskExecutor-3 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange [], routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;amq.gen-Qvc6FaOOSy_H7QFd_pTGiO&amp;#93;&lt;/span&gt;&lt;br/&gt;
SimpleAsyncTaskExecutor-3 INFO : org.springframework.integration.samples.cafe.xml.Barista - SimpleAsyncTaskExecutor-3 prepared cold drink #20 for order #20: iced 3 shot MOCHA&lt;br/&gt;
SimpleAsyncTaskExecutor-3 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.151:5672/,2)&lt;br/&gt;
SimpleAsyncTaskExecutor-3 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange [], routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;amq.gen-gT_L03-FbP1IkDbxDsZHBJ&amp;#93;&lt;/span&gt;&lt;/p&gt;


&lt;p&gt;Here is the log output from the hot drink barista (using inbound-amqp-gateway):&lt;/p&gt;

&lt;p&gt;SimpleAsyncTaskExecutor-1 WARN : org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer - Consumer raised exception, processing can restart if the connection factory supports it. Exception summary: org.springframework.amqp.AmqpIOException: java.io.IOException&lt;br/&gt;
SimpleAsyncTaskExecutor-1 INFO : org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer - Restarting Consumer: tag=&lt;span class=&quot;error&quot;&gt;&amp;#91;null&amp;#93;&lt;/span&gt;, channel=null, acknowledgeMode=AUTO local queue size=0&lt;br/&gt;
SimpleAsyncTaskExecutor-2 INFO : org.springframework.integration.samples.cafe.xml.Barista - SimpleAsyncTaskExecutor-2 prepared hot drink #1 for order #1: hot 2 shot LATTE&lt;br/&gt;
SimpleAsyncTaskExecutor-2 DEBUG: org.springframework.amqp.rabbit.connection.CachingConnectionFactory - Creating cached Rabbit Channel from AMQChannel(amqp://guest@172.16.227.150:5672/,2)&lt;br/&gt;
SimpleAsyncTaskExecutor-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.150:5672/,2)&lt;br/&gt;
SimpleAsyncTaskExecutor-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange [], routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;amq.gen-gz7VlBZL1aU2SCCszY-Ozy&amp;#93;&lt;/span&gt;&lt;br/&gt;
SimpleAsyncTaskExecutor-2 INFO : org.springframework.integration.samples.cafe.xml.Barista - SimpleAsyncTaskExecutor-2 prepared hot drink #2 for order #2: hot 2 shot LATTE&lt;br/&gt;
SimpleAsyncTaskExecutor-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.150:5672/,2)&lt;br/&gt;
SimpleAsyncTaskExecutor-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange [], routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;amq.gen-wuZnXZi7qcrYkT2mMtfE8l&amp;#93;&lt;/span&gt;&lt;br/&gt;
SimpleAsyncTaskExecutor-2 INFO : org.springframework.integration.samples.cafe.xml.Barista - SimpleAsyncTaskExecutor-2 prepared hot drink #3 for order #3: hot 2 shot LATTE&lt;br/&gt;
SimpleAsyncTaskExecutor-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.150:5672/,2)&lt;br/&gt;
SimpleAsyncTaskExecutor-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange [], routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;amq.gen-ABkfaColGWxJr9Sbe-P326&amp;#93;&lt;/span&gt;&lt;br/&gt;
SimpleAsyncTaskExecutor-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitAdmin - Initializing declarations&lt;br/&gt;
SimpleAsyncTaskExecutor-2 WARN : org.springframework.amqp.rabbit.core.RabbitAdmin - Auto-declaring an auto-delete Exchange (cafe-drinks). It will be deleted by the broker if not in use (if all bindings are deleted), but will only be redeclared if the connection is closed and reopened.&lt;br/&gt;
SimpleAsyncTaskExecutor-2 WARN : org.springframework.amqp.rabbit.core.RabbitAdmin - Auto-declaring an auto-delete Queue (hot-drinks). It will be deleted by the broker if not in use, and all messages will be lost.  Redeclared when the connection is closed and reopened.&lt;br/&gt;
SimpleAsyncTaskExecutor-2 WARN : org.springframework.amqp.rabbit.core.RabbitAdmin - Auto-declaring an auto-delete Queue (all-hot-drinks). It will be deleted by the broker if not in use, and all messages will be lost.  Redeclared when the connection is closed and reopened.&lt;br/&gt;
SimpleAsyncTaskExecutor-2 DEBUG: org.springframework.amqp.rabbit.connection.CachingConnectionFactory - Creating cached Rabbit Channel from AMQChannel(amqp://guest@172.16.227.151:5672/,1)&lt;br/&gt;
SimpleAsyncTaskExecutor-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.151:5672/,1)&lt;br/&gt;
SimpleAsyncTaskExecutor-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitAdmin - declaring Exchange &apos;cafe-drinks&apos;&lt;br/&gt;
SimpleAsyncTaskExecutor-2 DEBUG: org.springframework.amqp.rabbit.connection.CachingConnectionFactory - Detected closed channel on exception.  Re-initializing: null&lt;br/&gt;
SimpleAsyncTaskExecutor-2 INFO : org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer - Execution of Rabbit message listener failed, and no ErrorHandler has been set: class org.springframework.amqp.rabbit.listener.ListenerExecutionFailedException: Listener threw exception&lt;br/&gt;
SimpleAsyncTaskExecutor-2 WARN : org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer - Consumer raised exception, processing can restart if the connection factory supports it. Exception summary: com.rabbitmq.client.ShutdownSignalException: connection error; reason: &lt;/p&gt;
{#method&amp;lt;connection.close&amp;gt;(reply-code=320, reply-text=CONNECTION_FORCED - broker forced connection closure with reason &apos;shutdown&apos;, class-id=0, method-id=0), null, &quot;[B@5fa13338&quot;}
&lt;p&gt;SimpleAsyncTaskExecutor-2 INFO : org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer - Restarting Consumer: tag=&lt;span class=&quot;error&quot;&gt;&amp;#91;amq.ctag-AUaNhR7bLdjeRKNHhivtQH&amp;#93;&lt;/span&gt;, channel=Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.150:5672/,1), acknowledgeMode=AUTO local queue size=0&lt;br/&gt;
SimpleAsyncTaskExecutor-3 INFO : org.springframework.integration.samples.cafe.xml.Barista - SimpleAsyncTaskExecutor-3 prepared hot drink #4 for order #3: hot 2 shot LATTE&lt;br/&gt;
SimpleAsyncTaskExecutor-3 DEBUG: org.springframework.amqp.rabbit.connection.CachingConnectionFactory - Creating cached Rabbit Channel from AMQChannel(amqp://guest@172.16.227.151:5672/,2)&lt;br/&gt;
SimpleAsyncTaskExecutor-3 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.151:5672/,2)&lt;br/&gt;
SimpleAsyncTaskExecutor-3 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange [], routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;amq.gen-ABkfaColGWxJr9Sbe-P326&amp;#93;&lt;/span&gt;&lt;br/&gt;
SimpleAsyncTaskExecutor-3 INFO : org.springframework.integration.samples.cafe.xml.Barista - SimpleAsyncTaskExecutor-3 prepared hot drink #5 for order #5: hot 2 shot LATTE&lt;br/&gt;
SimpleAsyncTaskExecutor-3 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.151:5672/,2)&lt;br/&gt;
SimpleAsyncTaskExecutor-3 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange [], routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;amq.gen-gJ1VRJEP5LCJuEUstaKJfz&amp;#93;&lt;/span&gt;&lt;br/&gt;
SimpleAsyncTaskExecutor-3 INFO : org.springframework.integration.samples.cafe.xml.Barista - SimpleAsyncTaskExecutor-3 prepared hot drink #6 for order #7: hot 2 shot LATTE&lt;br/&gt;
SimpleAsyncTaskExecutor-3 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.151:5672/,2)&lt;br/&gt;
SimpleAsyncTaskExecutor-3 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange [], routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;amq.gen-QwZ8BfWFX6faB3Fuj_Pry-&amp;#93;&lt;/span&gt;&lt;br/&gt;
SimpleAsyncTaskExecutor-3 INFO : org.springframework.integration.samples.cafe.xml.Barista - SimpleAsyncTaskExecutor-3 prepared hot drink #7 for order #8: hot 2 shot LATTE&lt;br/&gt;
SimpleAsyncTaskExecutor-3 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.151:5672/,2)&lt;br/&gt;
SimpleAsyncTaskExecutor-3 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange [], routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;amq.gen-QR1x1uB3CBVzxkF1AQaXCK&amp;#93;&lt;/span&gt;&lt;br/&gt;
SimpleAsyncTaskExecutor-3 INFO : org.springframework.integration.samples.cafe.xml.Barista - SimpleAsyncTaskExecutor-3 prepared hot drink #8 for order #9: hot 2 shot LATTE&lt;br/&gt;
SimpleAsyncTaskExecutor-3 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.151:5672/,2)&lt;br/&gt;
SimpleAsyncTaskExecutor-3 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange [], routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;amq.gen-QQbnZii0ECuvHTHoP-QzQS&amp;#93;&lt;/span&gt;&lt;br/&gt;
SimpleAsyncTaskExecutor-3 INFO : org.springframework.integration.samples.cafe.xml.Barista - SimpleAsyncTaskExecutor-3 prepared hot drink #9 for order #10: hot 2 shot LATTE&lt;br/&gt;
SimpleAsyncTaskExecutor-3 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.151:5672/,2)&lt;br/&gt;
SimpleAsyncTaskExecutor-3 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange [], routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;amq.gen-w_fc0GG3w_1HL1UuRGIKZv&amp;#93;&lt;/span&gt;&lt;br/&gt;
SimpleAsyncTaskExecutor-3 INFO : org.springframework.integration.samples.cafe.xml.Barista - SimpleAsyncTaskExecutor-3 prepared hot drink #10 for order #11: hot 2 shot LATTE&lt;br/&gt;
SimpleAsyncTaskExecutor-3 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.151:5672/,2)&lt;br/&gt;
SimpleAsyncTaskExecutor-3 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange [], routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;amq.gen-QznpY3qBnHFNdxHVrpYC5c&amp;#93;&lt;/span&gt;&lt;br/&gt;
SimpleAsyncTaskExecutor-3 INFO : org.springframework.integration.samples.cafe.xml.Barista - SimpleAsyncTaskExecutor-3 prepared hot drink #11 for order #12: hot 2 shot LATTE&lt;br/&gt;
SimpleAsyncTaskExecutor-3 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.151:5672/,2)&lt;br/&gt;
SimpleAsyncTaskExecutor-3 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange [], routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;amq.gen-QMfXZlVMUCTAjePIdUB6kt&amp;#93;&lt;/span&gt;&lt;br/&gt;
SimpleAsyncTaskExecutor-3 INFO : org.springframework.integration.samples.cafe.xml.Barista - SimpleAsyncTaskExecutor-3 prepared hot drink #12 for order #13: hot 2 shot LATTE&lt;br/&gt;
SimpleAsyncTaskExecutor-3 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.151:5672/,2)&lt;br/&gt;
SimpleAsyncTaskExecutor-3 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange [], routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;amq.gen-A3A1a995yzqMACkhl_Q0WH&amp;#93;&lt;/span&gt;&lt;br/&gt;
SimpleAsyncTaskExecutor-3 INFO : org.springframework.integration.samples.cafe.xml.Barista - SimpleAsyncTaskExecutor-3 prepared hot drink #13 for order #14: hot 2 shot LATTE&lt;br/&gt;
SimpleAsyncTaskExecutor-3 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.151:5672/,2)&lt;br/&gt;
SimpleAsyncTaskExecutor-3 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange [], routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;amq.gen-A3q5VpQ7NplgKlpvBmBmk5&amp;#93;&lt;/span&gt;&lt;br/&gt;
SimpleAsyncTaskExecutor-3 INFO : org.springframework.integration.samples.cafe.xml.Barista - SimpleAsyncTaskExecutor-3 prepared hot drink #14 for order #15: hot 2 shot LATTE&lt;br/&gt;
SimpleAsyncTaskExecutor-3 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.151:5672/,2)&lt;br/&gt;
SimpleAsyncTaskExecutor-3 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange [], routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;amq.gen-gQOpUvTVrju24MNiaTK1ug&amp;#93;&lt;/span&gt;&lt;br/&gt;
SimpleAsyncTaskExecutor-3 INFO : org.springframework.integration.samples.cafe.xml.Barista - SimpleAsyncTaskExecutor-3 prepared hot drink #15 for order #16: hot 2 shot LATTE&lt;br/&gt;
SimpleAsyncTaskExecutor-3 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.151:5672/,2)&lt;br/&gt;
SimpleAsyncTaskExecutor-3 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange [], routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;amq.gen-Az4vvh0VBtyZyYzmEaqXgX&amp;#93;&lt;/span&gt;&lt;br/&gt;
SimpleAsyncTaskExecutor-3 INFO : org.springframework.integration.samples.cafe.xml.Barista - SimpleAsyncTaskExecutor-3 prepared hot drink #16 for order #17: hot 2 shot LATTE&lt;br/&gt;
SimpleAsyncTaskExecutor-3 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.151:5672/,2)&lt;br/&gt;
SimpleAsyncTaskExecutor-3 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange [], routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;amq.gen-g6VtgW2S3Hb2l7wICZIRpm&amp;#93;&lt;/span&gt;&lt;br/&gt;
SimpleAsyncTaskExecutor-3 INFO : org.springframework.integration.samples.cafe.xml.Barista - SimpleAsyncTaskExecutor-3 prepared hot drink #17 for order #18: hot 2 shot LATTE&lt;br/&gt;
SimpleAsyncTaskExecutor-3 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.151:5672/,2)&lt;br/&gt;
SimpleAsyncTaskExecutor-3 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange [], routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;amq.gen-ANB5efdIw5RiQucdu8GZcD&amp;#93;&lt;/span&gt;&lt;br/&gt;
SimpleAsyncTaskExecutor-3 INFO : org.springframework.integration.samples.cafe.xml.Barista - SimpleAsyncTaskExecutor-3 prepared hot drink #18 for order #19: hot 2 shot LATTE&lt;br/&gt;
SimpleAsyncTaskExecutor-3 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.151:5672/,2)&lt;br/&gt;
SimpleAsyncTaskExecutor-3 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange [], routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;amq.gen-gQJAoy98Sb9UwzMWFtlNV_&amp;#93;&lt;/span&gt;&lt;br/&gt;
SimpleAsyncTaskExecutor-3 INFO : org.springframework.integration.samples.cafe.xml.Barista - SimpleAsyncTaskExecutor-3 prepared hot drink #19 for order #20: hot 2 shot LATTE&lt;br/&gt;
SimpleAsyncTaskExecutor-3 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.151:5672/,2)&lt;br/&gt;
SimpleAsyncTaskExecutor-3 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange [], routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;amq.gen-A86eIg4f4VFO8SODSdIiAn&amp;#93;&lt;/span&gt;&lt;/p&gt;


&lt;p&gt;Here is the log output from the cafe itself (using outbound-amqp-gateway):&lt;/p&gt;

&lt;p&gt;task-scheduler-1 INFO : org.springframework.integration.handler.LoggingHandler - &lt;span class=&quot;error&quot;&gt;&amp;#91;Payload=Iced MOCHA, 3 shots.&amp;#93;&lt;/span&gt;[Headers=&lt;/p&gt;
{correlationId=88a4836a-0e1f-4dd9-a9cd-6f3f50239b68, amqp_contentType=text/plain, sequenceSize=2, amqp_receivedExchange=cafe-orders, amqp_contentEncoding=UTF-8, ICED=true, amqp_redelivered=false, sequenceNumber=2, id=888d6cb2-291f-40a3-b680-0edb2fcfa8da, timestamp=1326651750756, amqp_receivedRoutingKey=amq.gen-wjdIrRcLX60pJ1kVA5r2dD, amqp_deliveryMode=PERSISTENT, amqp_deliveryTag=1}
&lt;p&gt;]&lt;br/&gt;
task-scheduler-1 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.150:5672/,2)&lt;br/&gt;
task-scheduler-1 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange &lt;span class=&quot;error&quot;&gt;&amp;#91;cafe-drinks&amp;#93;&lt;/span&gt;, routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;drink.cold&amp;#93;&lt;/span&gt;&lt;br/&gt;
task-scheduler-1 INFO : org.springframework.integration.handler.LoggingHandler - &lt;span class=&quot;error&quot;&gt;&amp;#91;Payload=Iced MOCHA, 3 shots.&amp;#93;&lt;/span&gt;[Headers=&lt;/p&gt;
{correlationId=9decdb1f-23a4-44fd-89f5-b902ba5d9a6a, amqp_contentType=text/plain, sequenceSize=2, amqp_receivedExchange=cafe-orders, amqp_contentEncoding=UTF-8, ICED=true, amqp_redelivered=false, sequenceNumber=2, id=1355aff6-c1b3-45b6-95e1-6d1886cc578c, timestamp=1326651751777, amqp_receivedRoutingKey=amq.gen-wa0nLbPvlwvptrNHc_EgT-, amqp_deliveryMode=PERSISTENT, amqp_deliveryTag=2}
&lt;p&gt;]&lt;br/&gt;
task-scheduler-1 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.150:5672/,2)&lt;br/&gt;
task-scheduler-1 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange &lt;span class=&quot;error&quot;&gt;&amp;#91;cafe-drinks&amp;#93;&lt;/span&gt;, routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;drink.cold&amp;#93;&lt;/span&gt;&lt;br/&gt;
task-scheduler-1 INFO : org.springframework.integration.handler.LoggingHandler - &lt;span class=&quot;error&quot;&gt;&amp;#91;Payload=Iced MOCHA, 3 shots.&amp;#93;&lt;/span&gt;[Headers=&lt;/p&gt;
{correlationId=7cdc150a-3ce5-4308-8a62-5e4b5beadd97, amqp_contentType=text/plain, sequenceSize=2, amqp_receivedExchange=cafe-orders, amqp_contentEncoding=UTF-8, ICED=true, amqp_redelivered=false, sequenceNumber=2, id=57bc0e9d-d373-48e1-b1db-25ff526395b8, timestamp=1326651752797, amqp_receivedRoutingKey=amq.gen-wz75KS1NafL-xEWWF6DAlP, amqp_deliveryMode=PERSISTENT, amqp_deliveryTag=3}
&lt;p&gt;]&lt;br/&gt;
task-scheduler-1 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.150:5672/,2)&lt;br/&gt;
task-scheduler-1 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange &lt;span class=&quot;error&quot;&gt;&amp;#91;cafe-drinks&amp;#93;&lt;/span&gt;, routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;drink.cold&amp;#93;&lt;/span&gt;&lt;br/&gt;
task-scheduler-1 INFO : org.springframework.integration.handler.LoggingHandler - &lt;span class=&quot;error&quot;&gt;&amp;#91;Payload=Iced MOCHA, 3 shots.&amp;#93;&lt;/span&gt;[Headers=&lt;/p&gt;
{correlationId=5bebe7fc-d239-4ee1-8d74-8ae070eea70f, amqp_contentType=text/plain, sequenceSize=2, amqp_receivedExchange=cafe-orders, amqp_contentEncoding=UTF-8, ICED=true, amqp_redelivered=false, sequenceNumber=2, id=efdd4331-7798-4c72-85fc-283bd11f7d77, timestamp=1326651753819, amqp_receivedRoutingKey=amq.gen-QG74bgiIejFU82ZkddrZPS, amqp_deliveryMode=PERSISTENT, amqp_deliveryTag=4}
&lt;p&gt;]&lt;br/&gt;
task-scheduler-1 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.150:5672/,2)&lt;br/&gt;
task-scheduler-1 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange &lt;span class=&quot;error&quot;&gt;&amp;#91;cafe-drinks&amp;#93;&lt;/span&gt;, routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;drink.cold&amp;#93;&lt;/span&gt;&lt;br/&gt;
task-scheduler-2 INFO : org.springframework.integration.handler.LoggingHandler - &lt;span class=&quot;error&quot;&gt;&amp;#91;Payload=Hot LATTE, 2 shots.&amp;#93;&lt;/span&gt;[Headers=&lt;/p&gt;
{correlationId=88a4836a-0e1f-4dd9-a9cd-6f3f50239b68, amqp_contentType=text/plain, sequenceSize=2, amqp_receivedExchange=cafe-orders, amqp_contentEncoding=UTF-8, ICED=false, amqp_redelivered=false, sequenceNumber=1, id=cf614a84-b307-4730-9b30-12af974004ef, timestamp=1326651754752, amqp_receivedRoutingKey=amq.gen-gz7VlBZL1aU2SCCszY-Ozy, amqp_deliveryMode=PERSISTENT, amqp_deliveryTag=1}
&lt;p&gt;]&lt;br/&gt;
task-scheduler-2 INFO : org.springframework.integration.handler.LoggingHandler - [Payload=-----------------------&lt;br/&gt;
Order #1&lt;br/&gt;
Iced MOCHA, 3 shots.&lt;br/&gt;
Hot LATTE, 2 shots.&lt;br/&gt;
-----------------------&lt;br/&gt;
][Headers=&lt;/p&gt;
{timestamp=1326651754756, id=b19b684d-2567-4360-b2a3-6142c5738b6e, amqp_deliveryMode=PERSISTENT, correlationId=88a4836a-0e1f-4dd9-a9cd-6f3f50239b68, amqp_contentType=text/plain, amqp_receivedExchange=cafe-orders, amqp_contentEncoding=UTF-8, amqp_redelivered=false, amqp_deliveryTag=1, NUMBER=1}
&lt;p&gt;]&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.150:5672/,3)&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange &lt;span class=&quot;error&quot;&gt;&amp;#91;cafe-deliveries&amp;#93;&lt;/span&gt;, routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;delivery.1&amp;#93;&lt;/span&gt;&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.150:5672/,3)&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange &lt;span class=&quot;error&quot;&gt;&amp;#91;cafe-drinks&amp;#93;&lt;/span&gt;, routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;drink.hot&amp;#93;&lt;/span&gt;&lt;br/&gt;
task-scheduler-1 INFO : org.springframework.integration.handler.LoggingHandler - &lt;span class=&quot;error&quot;&gt;&amp;#91;Payload=Iced MOCHA, 3 shots.&amp;#93;&lt;/span&gt;[Headers=&lt;/p&gt;
{correlationId=961bf046-9830-43fa-a208-2213db754f3b, amqp_contentType=text/plain, sequenceSize=2, amqp_receivedExchange=cafe-orders, amqp_contentEncoding=UTF-8, ICED=true, amqp_redelivered=false, sequenceNumber=2, id=a70d7746-0c7f-442f-8657-bfe06be72f85, timestamp=1326651754841, amqp_receivedRoutingKey=amq.gen-QSTe8hSPOBKJIvv_GAjq06, amqp_deliveryMode=PERSISTENT, amqp_deliveryTag=5}
&lt;p&gt;]&lt;br/&gt;
task-scheduler-1 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.150:5672/,2)&lt;br/&gt;
task-scheduler-1 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange &lt;span class=&quot;error&quot;&gt;&amp;#91;cafe-drinks&amp;#93;&lt;/span&gt;, routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;drink.cold&amp;#93;&lt;/span&gt;&lt;br/&gt;
task-scheduler-1 INFO : org.springframework.integration.handler.LoggingHandler - &lt;span class=&quot;error&quot;&gt;&amp;#91;Payload=Iced MOCHA, 3 shots.&amp;#93;&lt;/span&gt;[Headers=&lt;/p&gt;
{correlationId=b4e92525-3a81-4040-a028-efcb9490514f, amqp_contentType=text/plain, sequenceSize=2, amqp_receivedExchange=cafe-orders, amqp_contentEncoding=UTF-8, ICED=true, amqp_redelivered=false, sequenceNumber=2, id=f9dd8279-a98a-4971-8f4d-951c94274c75, timestamp=1326651755864, amqp_receivedRoutingKey=amq.gen-geCL4pzby7eHKcUVorLCwI, amqp_deliveryMode=PERSISTENT, amqp_deliveryTag=6}
&lt;p&gt;]&lt;br/&gt;
task-scheduler-1 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.150:5672/,2)&lt;br/&gt;
task-scheduler-1 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange &lt;span class=&quot;error&quot;&gt;&amp;#91;cafe-drinks&amp;#93;&lt;/span&gt;, routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;drink.cold&amp;#93;&lt;/span&gt;&lt;br/&gt;
task-scheduler-1 INFO : org.springframework.integration.handler.LoggingHandler - &lt;span class=&quot;error&quot;&gt;&amp;#91;Payload=Iced MOCHA, 3 shots.&amp;#93;&lt;/span&gt;[Headers=&lt;/p&gt;
{correlationId=788e0fd0-c9f9-4d76-bf82-3d1cd0d8a73f, amqp_contentType=text/plain, sequenceSize=2, amqp_receivedExchange=cafe-orders, amqp_contentEncoding=UTF-8, ICED=true, amqp_redelivered=false, sequenceNumber=2, id=9e228b22-91cd-48e2-8fa7-ad3b9adf12b2, timestamp=1326651756887, amqp_receivedRoutingKey=amq.gen-wXgALGWNxwgosxm7u3wrDd, amqp_deliveryMode=PERSISTENT, amqp_deliveryTag=7}
&lt;p&gt;]&lt;br/&gt;
task-scheduler-1 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.150:5672/,2)&lt;br/&gt;
task-scheduler-1 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange &lt;span class=&quot;error&quot;&gt;&amp;#91;cafe-drinks&amp;#93;&lt;/span&gt;, routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;drink.cold&amp;#93;&lt;/span&gt;&lt;br/&gt;
task-scheduler-1 INFO : org.springframework.integration.handler.LoggingHandler - &lt;span class=&quot;error&quot;&gt;&amp;#91;Payload=Iced MOCHA, 3 shots.&amp;#93;&lt;/span&gt;[Headers=&lt;/p&gt;
{correlationId=8d83c836-b47b-459b-a3bf-fd9f8297e5de, amqp_contentType=text/plain, sequenceSize=2, amqp_receivedExchange=cafe-orders, amqp_contentEncoding=UTF-8, ICED=true, amqp_redelivered=false, sequenceNumber=2, id=f0723cb5-a315-46f1-8ef8-6cc4a80be887, timestamp=1326651757907, amqp_receivedRoutingKey=amq.gen-AOzJmzzf1UrR68zuaA7rT4, amqp_deliveryMode=PERSISTENT, amqp_deliveryTag=8}
&lt;p&gt;]&lt;br/&gt;
task-scheduler-1 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.150:5672/,2)&lt;br/&gt;
task-scheduler-1 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange &lt;span class=&quot;error&quot;&gt;&amp;#91;cafe-drinks&amp;#93;&lt;/span&gt;, routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;drink.cold&amp;#93;&lt;/span&gt;&lt;br/&gt;
task-scheduler-1 INFO : org.springframework.integration.handler.LoggingHandler - &lt;span class=&quot;error&quot;&gt;&amp;#91;Payload=Iced MOCHA, 3 shots.&amp;#93;&lt;/span&gt;[Headers=&lt;/p&gt;
{correlationId=9ae0540c-65cd-4fea-a808-f94443130bf1, amqp_contentType=text/plain, sequenceSize=2, amqp_receivedExchange=cafe-orders, amqp_contentEncoding=UTF-8, ICED=true, amqp_redelivered=false, sequenceNumber=2, id=a324e1d1-cb37-4a2e-acc4-abbb85c75de1, timestamp=1326651758928, amqp_receivedRoutingKey=amq.gen-QGxRQ4EFf9HHFTJfIJNKZC, amqp_deliveryMode=PERSISTENT, amqp_deliveryTag=9}
&lt;p&gt;]&lt;br/&gt;
task-scheduler-1 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.150:5672/,2)&lt;br/&gt;
task-scheduler-1 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange &lt;span class=&quot;error&quot;&gt;&amp;#91;cafe-drinks&amp;#93;&lt;/span&gt;, routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;drink.cold&amp;#93;&lt;/span&gt;&lt;br/&gt;
task-scheduler-2 INFO : org.springframework.integration.handler.LoggingHandler - &lt;span class=&quot;error&quot;&gt;&amp;#91;Payload=Hot LATTE, 2 shots.&amp;#93;&lt;/span&gt;[Headers=&lt;/p&gt;
{correlationId=9decdb1f-23a4-44fd-89f5-b902ba5d9a6a, amqp_contentType=text/plain, sequenceSize=2, amqp_receivedExchange=cafe-orders, amqp_contentEncoding=UTF-8, ICED=false, amqp_redelivered=false, sequenceNumber=1, id=0ab8497f-8d61-4935-a5ba-0b5ff4f4f2ec, timestamp=1326651759787, amqp_receivedRoutingKey=amq.gen-wuZnXZi7qcrYkT2mMtfE8l, amqp_deliveryMode=PERSISTENT, amqp_deliveryTag=2}
&lt;p&gt;]&lt;br/&gt;
task-scheduler-2 INFO : org.springframework.integration.handler.LoggingHandler - [Payload=-----------------------&lt;br/&gt;
Order #2&lt;br/&gt;
Iced MOCHA, 3 shots.&lt;br/&gt;
Hot LATTE, 2 shots.&lt;br/&gt;
-----------------------&lt;br/&gt;
][Headers=&lt;/p&gt;
{timestamp=1326651759788, id=8befd8c4-7342-45e2-b23a-3babc3cbe18d, amqp_deliveryMode=PERSISTENT, correlationId=9decdb1f-23a4-44fd-89f5-b902ba5d9a6a, amqp_contentType=text/plain, amqp_receivedExchange=cafe-orders, amqp_contentEncoding=UTF-8, amqp_redelivered=false, amqp_deliveryTag=2, NUMBER=2}
&lt;p&gt;]&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.150:5672/,3)&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange &lt;span class=&quot;error&quot;&gt;&amp;#91;cafe-deliveries&amp;#93;&lt;/span&gt;, routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;delivery.2&amp;#93;&lt;/span&gt;&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.150:5672/,3)&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange &lt;span class=&quot;error&quot;&gt;&amp;#91;cafe-drinks&amp;#93;&lt;/span&gt;, routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;drink.hot&amp;#93;&lt;/span&gt;&lt;br/&gt;
task-scheduler-1 INFO : org.springframework.integration.handler.LoggingHandler - &lt;span class=&quot;error&quot;&gt;&amp;#91;Payload=Iced MOCHA, 3 shots.&amp;#93;&lt;/span&gt;[Headers=&lt;/p&gt;
{correlationId=bbfe1f42-c77f-43e8-a133-fca4b9e51f68, amqp_contentType=text/plain, sequenceSize=2, amqp_receivedExchange=cafe-orders, amqp_contentEncoding=UTF-8, ICED=true, amqp_redelivered=false, sequenceNumber=2, id=5cf08998-8e0d-4a59-a90e-befb63bc003e, timestamp=1326651759946, amqp_receivedRoutingKey=amq.gen-wkOZfv7k4WFlG9jRomdP1s, amqp_deliveryMode=PERSISTENT, amqp_deliveryTag=10}
&lt;p&gt;]&lt;br/&gt;
task-scheduler-1 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.150:5672/,2)&lt;br/&gt;
task-scheduler-1 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange &lt;span class=&quot;error&quot;&gt;&amp;#91;cafe-drinks&amp;#93;&lt;/span&gt;, routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;drink.cold&amp;#93;&lt;/span&gt;&lt;br/&gt;
task-scheduler-1 INFO : org.springframework.integration.handler.LoggingHandler - &lt;span class=&quot;error&quot;&gt;&amp;#91;Payload=Iced MOCHA, 3 shots.&amp;#93;&lt;/span&gt;[Headers=&lt;/p&gt;
{correlationId=b3f94366-34fa-4764-8028-e991df37af6f, amqp_contentType=text/plain, sequenceSize=2, amqp_receivedExchange=cafe-orders, amqp_contentEncoding=UTF-8, ICED=true, amqp_redelivered=false, sequenceNumber=2, id=daa0c3d4-2af2-4853-8e9a-c063dd6dc6fd, timestamp=1326651760968, amqp_receivedRoutingKey=amq.gen-gWJKyBRBgaWzJlrj44TofR, amqp_deliveryMode=PERSISTENT, amqp_deliveryTag=11}
&lt;p&gt;]&lt;br/&gt;
task-scheduler-1 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.150:5672/,2)&lt;br/&gt;
task-scheduler-1 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange &lt;span class=&quot;error&quot;&gt;&amp;#91;cafe-drinks&amp;#93;&lt;/span&gt;, routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;drink.cold&amp;#93;&lt;/span&gt;&lt;br/&gt;
task-scheduler-1 INFO : org.springframework.integration.handler.LoggingHandler - &lt;span class=&quot;error&quot;&gt;&amp;#91;Payload=Iced MOCHA, 3 shots.&amp;#93;&lt;/span&gt;[Headers=&lt;/p&gt;
{correlationId=cf6be7f9-abeb-4dca-a6ce-e02e1db9c684, amqp_contentType=text/plain, sequenceSize=2, amqp_receivedExchange=cafe-orders, amqp_contentEncoding=UTF-8, ICED=true, amqp_redelivered=false, sequenceNumber=2, id=ac727f36-7e8c-4809-9752-698dbcd4352e, timestamp=1326651761989, amqp_receivedRoutingKey=amq.gen-A15ZozBvvvNAXr5lTYPJzD, amqp_deliveryMode=PERSISTENT, amqp_deliveryTag=12}
&lt;p&gt;]&lt;br/&gt;
task-scheduler-1 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.150:5672/,2)&lt;br/&gt;
task-scheduler-1 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange &lt;span class=&quot;error&quot;&gt;&amp;#91;cafe-drinks&amp;#93;&lt;/span&gt;, routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;drink.cold&amp;#93;&lt;/span&gt;&lt;br/&gt;
task-scheduler-1 INFO : org.springframework.integration.handler.LoggingHandler - &lt;span class=&quot;error&quot;&gt;&amp;#91;Payload=Iced MOCHA, 3 shots.&amp;#93;&lt;/span&gt;[Headers=&lt;/p&gt;
{correlationId=ae27bfa3-c7cc-4af5-be41-5dd000a54f95, amqp_contentType=text/plain, sequenceSize=2, amqp_receivedExchange=cafe-orders, amqp_contentEncoding=UTF-8, ICED=true, amqp_redelivered=false, sequenceNumber=2, id=e8e0a904-063c-4eed-b534-a823c26d75c2, timestamp=1326651763009, amqp_receivedRoutingKey=amq.gen-w14sTqT-ou8sr06WVO_vEa, amqp_deliveryMode=PERSISTENT, amqp_deliveryTag=13}
&lt;p&gt;]&lt;br/&gt;
task-scheduler-1 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.150:5672/,2)&lt;br/&gt;
task-scheduler-1 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange &lt;span class=&quot;error&quot;&gt;&amp;#91;cafe-drinks&amp;#93;&lt;/span&gt;, routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;drink.cold&amp;#93;&lt;/span&gt;&lt;br/&gt;
SimpleAsyncTaskExecutor-2 WARN : org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer - Consumer raised exception, processing can restart if the connection factory supports it. Exception summary: com.rabbitmq.client.ShutdownSignalException: connection error; reason: &lt;/p&gt;
{#method&amp;lt;connection.close&amp;gt;(reply-code=320, reply-text=CONNECTION_FORCED - broker forced connection closure with reason &apos;shutdown&apos;, class-id=0, method-id=0), null, &quot;[B@4def3d1b&quot;}
&lt;p&gt;SimpleAsyncTaskExecutor-2 INFO : org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer - Restarting Consumer: tag=&lt;span class=&quot;error&quot;&gt;&amp;#91;amq.ctag-AJ5QWNLOdMQHQdU3KqNF9e&amp;#93;&lt;/span&gt;, channel=Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.150:5672/,1), acknowledgeMode=AUTO local queue size=0&lt;br/&gt;
SimpleAsyncTaskExecutor-3 DEBUG: org.springframework.amqp.rabbit.core.RabbitAdmin - Initializing declarations&lt;br/&gt;
SimpleAsyncTaskExecutor-3 WARN : org.springframework.amqp.rabbit.core.RabbitAdmin - Auto-declaring an auto-delete Exchange (cafe-drinks). It will be deleted by the broker if not in use (if all bindings are deleted), but will only be redeclared if the connection is closed and reopened.&lt;br/&gt;
SimpleAsyncTaskExecutor-3 WARN : org.springframework.amqp.rabbit.core.RabbitAdmin - Auto-declaring an auto-delete Queue (all-drinks). It will be deleted by the broker if not in use, and all messages will be lost.  Redeclared when the connection is closed and reopened.&lt;br/&gt;
SimpleAsyncTaskExecutor-3 DEBUG: org.springframework.amqp.rabbit.connection.CachingConnectionFactory - Creating cached Rabbit Channel from AMQChannel(amqp://guest@172.16.227.151:5672/,1)&lt;br/&gt;
SimpleAsyncTaskExecutor-3 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.151:5672/,1)&lt;br/&gt;
SimpleAsyncTaskExecutor-3 DEBUG: org.springframework.amqp.rabbit.core.RabbitAdmin - declaring Exchange &apos;cafe-drinks&apos;&lt;br/&gt;
SimpleAsyncTaskExecutor-3 DEBUG: org.springframework.amqp.rabbit.connection.CachingConnectionFactory - Detected closed channel on exception.  Re-initializing: null&lt;br/&gt;
SimpleAsyncTaskExecutor-3 WARN : org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer - Consumer raised exception, processing can restart if the connection factory supports it. Exception summary: org.springframework.amqp.AmqpIOException: java.io.IOException&lt;br/&gt;
SimpleAsyncTaskExecutor-3 INFO : org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer - Restarting Consumer: tag=&lt;span class=&quot;error&quot;&gt;&amp;#91;null&amp;#93;&lt;/span&gt;, channel=null, acknowledgeMode=AUTO local queue size=0&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.151:5672/,2)&lt;br/&gt;
Consumer null (f286115e-23a3-4485-b264-93abd643c95c) method handleCancelOk for channel AMQChannel(amqp://guest@172.16.227.151:5672/,2) threw an exception for channel AMQChannel(amqp://guest@172.16.227.151:5672/,2):&lt;br/&gt;
java.lang.NullPointerException&lt;br/&gt;
	at com.rabbitmq.client.impl.ConsumerDispatcher$2.run(ConsumerDispatcher.java:91)&lt;br/&gt;
	at com.rabbitmq.client.impl.ConsumerWorkService$WorkPoolRunnable.run(ConsumerWorkService.java:79)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:680)&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.connection.CachingConnectionFactory - Detected closed channel on exception.  Re-initializing: null&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitAdmin - Initializing declarations&lt;br/&gt;
task-scheduler-2 WARN : org.springframework.amqp.rabbit.core.RabbitAdmin - Auto-declaring an auto-delete Exchange (cafe-drinks). It will be deleted by the broker if not in use (if all bindings are deleted), but will only be redeclared if the connection is closed and reopened.&lt;br/&gt;
task-scheduler-2 WARN : org.springframework.amqp.rabbit.core.RabbitAdmin - Auto-declaring an auto-delete Queue (all-drinks). It will be deleted by the broker if not in use, and all messages will be lost.  Redeclared when the connection is closed and reopened.&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.connection.CachingConnectionFactory - Creating cached Rabbit Channel from AMQChannel(amqp://guest@172.16.227.151:5672/,1)&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.151:5672/,1)&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitAdmin - declaring Exchange &apos;cafe-drinks&apos;&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.connection.CachingConnectionFactory - Detected closed channel on exception.  Re-initializing: null&lt;br/&gt;
task-scheduler-2 ERROR: org.springframework.integration.handler.LoggingHandler - org.springframework.integration.MessageHandlingException: error occurred in message handler &lt;a href=&quot;#1&quot;&gt;org.springframework.integration.amqp.outbound.AmqpOutboundEndpoint#1&lt;/a&gt;&lt;br/&gt;
	at org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:79)&lt;br/&gt;
	at org.springframework.integration.endpoint.PollingConsumer.doPoll(PollingConsumer.java:70)&lt;br/&gt;
	at org.springframework.integration.endpoint.AbstractPollingEndpoint$1.call(AbstractPollingEndpoint.java:146)&lt;br/&gt;
	at org.springframework.integration.endpoint.AbstractPollingEndpoint$1.call(AbstractPollingEndpoint.java:144)&lt;br/&gt;
	at org.springframework.integration.endpoint.AbstractPollingEndpoint$Poller$1.run(AbstractPollingEndpoint.java:207)&lt;br/&gt;
	at org.springframework.integration.util.ErrorHandlingTaskExecutor$1.run(ErrorHandlingTaskExecutor.java:52)&lt;br/&gt;
	at org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:48)&lt;br/&gt;
	at org.springframework.integration.util.ErrorHandlingTaskExecutor.execute(ErrorHandlingTaskExecutor.java:49)&lt;br/&gt;
	at org.springframework.integration.endpoint.AbstractPollingEndpoint$Poller.run(AbstractPollingEndpoint.java:202)&lt;br/&gt;
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:53)&lt;br/&gt;
	at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:81)&lt;br/&gt;
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)&lt;br/&gt;
	at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)&lt;br/&gt;
	at java.util.concurrent.FutureTask.run(FutureTask.java:138)&lt;br/&gt;
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:98)&lt;br/&gt;
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:206)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:680)&lt;br/&gt;
Caused by: org.springframework.amqp.AmqpIOException: java.io.IOException&lt;br/&gt;
	at org.springframework.amqp.rabbit.connection.RabbitUtils.convertRabbitAccessException(RabbitUtils.java:109)&lt;br/&gt;
	at org.springframework.amqp.rabbit.connection.RabbitAccessor.convertRabbitAccessException(RabbitAccessor.java:106)&lt;br/&gt;
	at org.springframework.amqp.rabbit.core.RabbitTemplate.execute(RabbitTemplate.java:435)&lt;br/&gt;
	at org.springframework.amqp.rabbit.core.RabbitAdmin.initialize(RabbitAdmin.java:298)&lt;br/&gt;
	at org.springframework.amqp.rabbit.core.RabbitAdmin$10.onCreate(RabbitAdmin.java:232)&lt;br/&gt;
	at org.springframework.amqp.rabbit.connection.CompositeConnectionListener.onCreate(CompositeConnectionListener.java:31)&lt;br/&gt;
	at org.springframework.amqp.rabbit.connection.CachingConnectionFactory.createConnection(CachingConnectionFactory.java:181)&lt;br/&gt;
	at org.springframework.amqp.rabbit.connection.CachingConnectionFactory.createBareChannel(CachingConnectionFactory.java:171)&lt;br/&gt;
	at org.springframework.amqp.rabbit.connection.CachingConnectionFactory.access$1(CachingConnectionFactory.java:167)&lt;br/&gt;
	at org.springframework.amqp.rabbit.connection.CachingConnectionFactory$CachedChannelInvocationHandler.invoke(CachingConnectionFactory.java:307)&lt;br/&gt;
	at $Proxy5.queueDeclare(Unknown Source)&lt;br/&gt;
	at org.springframework.amqp.rabbit.core.RabbitTemplate$3.doInRabbit(RabbitTemplate.java:389)&lt;br/&gt;
	at org.springframework.amqp.rabbit.core.RabbitTemplate$3.doInRabbit(RabbitTemplate.java:1)&lt;br/&gt;
	at org.springframework.amqp.rabbit.core.RabbitTemplate.execute(RabbitTemplate.java:430)&lt;br/&gt;
	at org.springframework.amqp.rabbit.core.RabbitTemplate.doSendAndReceive(RabbitTemplate.java:383)&lt;br/&gt;
	at org.springframework.amqp.rabbit.core.RabbitTemplate.sendAndReceive(RabbitTemplate.java:335)&lt;br/&gt;
	at org.springframework.integration.amqp.outbound.AmqpOutboundEndpoint.sendAndReceive(AmqpOutboundEndpoint.java:154)&lt;br/&gt;
	at org.springframework.integration.amqp.outbound.AmqpOutboundEndpoint.handleRequestMessage(AmqpOutboundEndpoint.java:128)&lt;br/&gt;
	at org.springframework.integration.handler.AbstractReplyProducingMessageHandler.handleMessageInternal(AbstractReplyProducingMessageHandler.java:97)&lt;br/&gt;
	at org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:73)&lt;br/&gt;
	... 18 more&lt;br/&gt;
Caused by: java.io.IOException&lt;br/&gt;
	at com.rabbitmq.client.impl.AMQChannel.wrap(AMQChannel.java:106)&lt;br/&gt;
	at com.rabbitmq.client.impl.AMQChannel.wrap(AMQChannel.java:102)&lt;br/&gt;
	at com.rabbitmq.client.impl.AMQChannel.exnWrappingRpc(AMQChannel.java:124)&lt;br/&gt;
	at com.rabbitmq.client.impl.ChannelN.exchangeDeclare(ChannelN.java:590)&lt;br/&gt;
	at com.rabbitmq.client.impl.ChannelN.exchangeDeclare(ChannelN.java:577)&lt;br/&gt;
	at com.rabbitmq.client.impl.ChannelN.exchangeDeclare(ChannelN.java:61)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
	at org.springframework.amqp.rabbit.connection.CachingConnectionFactory$CachedChannelInvocationHandler.invoke(CachingConnectionFactory.java:298)&lt;br/&gt;
	at $Proxy5.exchangeDeclare(Unknown Source)&lt;br/&gt;
	at org.springframework.amqp.rabbit.core.RabbitAdmin.declareExchanges(RabbitAdmin.java:317)&lt;br/&gt;
	at org.springframework.amqp.rabbit.core.RabbitAdmin.access$0(RabbitAdmin.java:312)&lt;br/&gt;
	at org.springframework.amqp.rabbit.core.RabbitAdmin$11.doInRabbit(RabbitAdmin.java:300)&lt;br/&gt;
	at org.springframework.amqp.rabbit.core.RabbitTemplate.execute(RabbitTemplate.java:430)&lt;br/&gt;
	... 35 more&lt;br/&gt;
Caused by: com.rabbitmq.client.ShutdownSignalException: channel error; reason: &lt;/p&gt;
{#method&amp;lt;channel.close&amp;gt;(reply-code=406, reply-text=PRECONDITION_FAILED - cannot redeclare exchange &apos;cafe-drinks&apos; in vhost &apos;/&apos; with different type, durable, internal or autodelete value, class-id=40, method-id=10), null, &quot;[B@4def3d1b&quot;}&lt;br/&gt;
	at com.rabbitmq.utility.ValueOrException.getValue(ValueOrException.java:67)&lt;br/&gt;
	at com.rabbitmq.utility.BlockingValueOrException.uninterruptibleGetValue(BlockingValueOrException.java:33)&lt;br/&gt;
	at com.rabbitmq.client.impl.AMQChannel$BlockingRpcContinuation.getReply(AMQChannel.java:343)&lt;br/&gt;
	at com.rabbitmq.client.impl.AMQChannel.privateRpc(AMQChannel.java:216)&lt;br/&gt;
	at com.rabbitmq.client.impl.AMQChannel.exnWrappingRpc(AMQChannel.java:118)&lt;br/&gt;
	... 48 more&lt;br/&gt;
Caused by: com.rabbitmq.client.ShutdownSignalException: channel error; reason: {#method&amp;lt;channel.close&amp;gt;(reply-code=406, reply-text=PRECONDITION_FAILED - cannot redeclare exchange &apos;cafe-drinks&apos; in vhost &apos;/&apos; with different type, durable, internal or autodelete value, class-id=40, method-id=10), null, &quot;[B@4def3d1b&quot;}
&lt;p&gt;	at com.rabbitmq.client.impl.ChannelN.asyncShutdown(ChannelN.java:422)&lt;br/&gt;
	at com.rabbitmq.client.impl.ChannelN.processAsync(ChannelN.java:262)&lt;br/&gt;
	at com.rabbitmq.client.impl.AMQChannel.handleCompleteInboundCommand(AMQChannel.java:144)&lt;br/&gt;
	at com.rabbitmq.client.impl.AMQChannel.handleFrame(AMQChannel.java:91)&lt;br/&gt;
	at com.rabbitmq.client.impl.AMQConnection$MainLoop.run(AMQConnection.java:510)&lt;/p&gt;

&lt;p&gt;task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.151:5672/,1)&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange &lt;span class=&quot;error&quot;&gt;&amp;#91;cafe-drinks&amp;#93;&lt;/span&gt;, routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;drink.hot&amp;#93;&lt;/span&gt;&lt;br/&gt;
SimpleAsyncTaskExecutor-4 WARN : org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer - Consumer raised exception, processing can restart if the connection factory supports it. Exception summary: com.rabbitmq.client.ShutdownSignalException: connection error; reason: #method&amp;lt;connection.close&amp;gt;(reply-code=541, reply-text=Internal error in Consumer null (f286115e-23a3-4485-b264-93abd643c95c) method handleCancelOk for channel AMQChannel(amqp://guest@172.16.227.151:5672/,2), class-id=0, method-id=0)&lt;br/&gt;
SimpleAsyncTaskExecutor-4 INFO : org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer - Restarting Consumer: tag=&lt;span class=&quot;error&quot;&gt;&amp;#91;amq.ctag-wiSTEFr8bNnS-979NR1mi_&amp;#93;&lt;/span&gt;, channel=Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.151:5672/,1), acknowledgeMode=AUTO local queue size=0&lt;br/&gt;
SimpleAsyncTaskExecutor-5 DEBUG: org.springframework.amqp.rabbit.connection.CachingConnectionFactory - Creating cached Rabbit Channel from AMQChannel(amqp://guest@172.16.227.151:5672/,2)&lt;br/&gt;
Consumer null (4c9dd9cd-a62a-4831-978b-689a8f490171) method handleCancelOk for channel AMQChannel(amqp://guest@172.16.227.151:5672/,3) threw an exception for channel AMQChannel(amqp://guest@172.16.227.151:5672/,3):&lt;br/&gt;
java.lang.NullPointerException&lt;br/&gt;
task-scheduler-1 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.151:5672/,3)&lt;br/&gt;
	at com.rabbitmq.client.impl.ConsumerDispatcher$2.run(ConsumerDispatcher.java:91)&lt;br/&gt;
	at com.rabbitmq.client.impl.ConsumerWorkService$WorkPoolRunnable.run(ConsumerWorkService.java:79)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:680)&lt;br/&gt;
task-scheduler-1 DEBUG: org.springframework.amqp.rabbit.connection.CachingConnectionFactory - Detected closed channel on exception.  Re-initializing: null&lt;br/&gt;
task-scheduler-1 DEBUG: org.springframework.amqp.rabbit.core.RabbitAdmin - Initializing declarations&lt;br/&gt;
task-scheduler-1 WARN : org.springframework.amqp.rabbit.core.RabbitAdmin - Auto-declaring an auto-delete Exchange (cafe-drinks). It will be deleted by the broker if not in use (if all bindings are deleted), but will only be redeclared if the connection is closed and reopened.&lt;br/&gt;
task-scheduler-1 WARN : org.springframework.amqp.rabbit.core.RabbitAdmin - Auto-declaring an auto-delete Queue (all-drinks). It will be deleted by the broker if not in use, and all messages will be lost.  Redeclared when the connection is closed and reopened.&lt;br/&gt;
task-scheduler-1 DEBUG: org.springframework.amqp.rabbit.connection.CachingConnectionFactory - Creating cached Rabbit Channel from AMQChannel(amqp://guest@172.16.227.151:5672/,1)&lt;br/&gt;
task-scheduler-1 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.151:5672/,1)&lt;br/&gt;
task-scheduler-1 DEBUG: org.springframework.amqp.rabbit.core.RabbitAdmin - declaring Exchange &apos;cafe-drinks&apos;&lt;br/&gt;
task-scheduler-1 DEBUG: org.springframework.amqp.rabbit.connection.CachingConnectionFactory - Detected closed channel on exception.  Re-initializing: null&lt;br/&gt;
task-scheduler-1 ERROR: org.springframework.integration.handler.LoggingHandler - org.springframework.integration.MessageHandlingException: error occurred in message handler &lt;a href=&quot;#0&quot;&gt;org.springframework.integration.amqp.outbound.AmqpOutboundEndpoint#0&lt;/a&gt;&lt;br/&gt;
	at org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:79)&lt;br/&gt;
	at org.springframework.integration.endpoint.PollingConsumer.doPoll(PollingConsumer.java:70)&lt;br/&gt;
	at org.springframework.integration.endpoint.AbstractPollingEndpoint$1.call(AbstractPollingEndpoint.java:146)&lt;br/&gt;
	at org.springframework.integration.endpoint.AbstractPollingEndpoint$1.call(AbstractPollingEndpoint.java:144)&lt;br/&gt;
	at org.springframework.integration.endpoint.AbstractPollingEndpoint$Poller$1.run(AbstractPollingEndpoint.java:207)&lt;br/&gt;
	at org.springframework.integration.util.ErrorHandlingTaskExecutor$1.run(ErrorHandlingTaskExecutor.java:52)&lt;br/&gt;
	at org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:48)&lt;br/&gt;
	at org.springframework.integration.util.ErrorHandlingTaskExecutor.execute(ErrorHandlingTaskExecutor.java:49)&lt;br/&gt;
	at org.springframework.integration.endpoint.AbstractPollingEndpoint$Poller.run(AbstractPollingEndpoint.java:202)&lt;br/&gt;
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:53)&lt;br/&gt;
	at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:81)&lt;br/&gt;
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)&lt;br/&gt;
	at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)&lt;br/&gt;
	at java.util.concurrent.FutureTask.run(FutureTask.java:138)&lt;br/&gt;
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:98)&lt;br/&gt;
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:206)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:680)&lt;br/&gt;
Caused by: org.springframework.amqp.AmqpIOException: java.io.IOException&lt;br/&gt;
	at org.springframework.amqp.rabbit.connection.RabbitUtils.convertRabbitAccessException(RabbitUtils.java:109)&lt;br/&gt;
	at org.springframework.amqp.rabbit.connection.RabbitAccessor.convertRabbitAccessException(RabbitAccessor.java:106)&lt;br/&gt;
	at org.springframework.amqp.rabbit.core.RabbitTemplate.execute(RabbitTemplate.java:435)&lt;br/&gt;
	at org.springframework.amqp.rabbit.core.RabbitAdmin.initialize(RabbitAdmin.java:298)&lt;br/&gt;
	at org.springframework.amqp.rabbit.core.RabbitAdmin$10.onCreate(RabbitAdmin.java:232)&lt;br/&gt;
	at org.springframework.amqp.rabbit.connection.CompositeConnectionListener.onCreate(CompositeConnectionListener.java:31)&lt;br/&gt;
	at org.springframework.amqp.rabbit.connection.CachingConnectionFactory.createConnection(CachingConnectionFactory.java:181)&lt;br/&gt;
	at org.springframework.amqp.rabbit.connection.CachingConnectionFactory.createBareChannel(CachingConnectionFactory.java:171)&lt;br/&gt;
	at org.springframework.amqp.rabbit.connection.CachingConnectionFactory.access$1(CachingConnectionFactory.java:167)&lt;br/&gt;
	at org.springframework.amqp.rabbit.connection.CachingConnectionFactory$CachedChannelInvocationHandler.invoke(CachingConnectionFactory.java:307)&lt;br/&gt;
	at $Proxy5.queueDeclare(Unknown Source)&lt;br/&gt;
	at org.springframework.amqp.rabbit.core.RabbitTemplate$3.doInRabbit(RabbitTemplate.java:389)&lt;br/&gt;
	at org.springframework.amqp.rabbit.core.RabbitTemplate$3.doInRabbit(RabbitTemplate.java:1)&lt;br/&gt;
	at org.springframework.amqp.rabbit.core.RabbitTemplate.execute(RabbitTemplate.java:430)&lt;br/&gt;
	at org.springframework.amqp.rabbit.core.RabbitTemplate.doSendAndReceive(RabbitTemplate.java:383)&lt;br/&gt;
	at org.springframework.amqp.rabbit.core.RabbitTemplate.sendAndReceive(RabbitTemplate.java:335)&lt;br/&gt;
	at org.springframework.integration.amqp.outbound.AmqpOutboundEndpoint.sendAndReceive(AmqpOutboundEndpoint.java:154)&lt;br/&gt;
	at org.springframework.integration.amqp.outbound.AmqpOutboundEndpoint.handleRequestMessage(AmqpOutboundEndpoint.java:128)&lt;br/&gt;
	at org.springframework.integration.handler.AbstractReplyProducingMessageHandler.handleMessageInternal(AbstractReplyProducingMessageHandler.java:97)&lt;br/&gt;
	at org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:73)&lt;br/&gt;
	... 18 more&lt;br/&gt;
Caused by: java.io.IOException&lt;br/&gt;
	at com.rabbitmq.client.impl.AMQChannel.wrap(AMQChannel.java:106)&lt;br/&gt;
	at com.rabbitmq.client.impl.AMQChannel.wrap(AMQChannel.java:102)&lt;br/&gt;
	at com.rabbitmq.client.impl.AMQChannel.exnWrappingRpc(AMQChannel.java:124)&lt;br/&gt;
	at com.rabbitmq.client.impl.ChannelN.exchangeDeclare(ChannelN.java:590)&lt;br/&gt;
	at com.rabbitmq.client.impl.ChannelN.exchangeDeclare(ChannelN.java:577)&lt;br/&gt;
	at com.rabbitmq.client.impl.ChannelN.exchangeDeclare(ChannelN.java:61)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
	at org.springframework.amqp.rabbit.connection.CachingConnectionFactory$CachedChannelInvocationHandler.invoke(CachingConnectionFactory.java:298)&lt;br/&gt;
	at $Proxy5.exchangeDeclare(Unknown Source)&lt;br/&gt;
	at org.springframework.amqp.rabbit.core.RabbitAdmin.declareExchanges(RabbitAdmin.java:317)&lt;br/&gt;
	at org.springframework.amqp.rabbit.core.RabbitAdmin.access$0(RabbitAdmin.java:312)&lt;br/&gt;
	at org.springframework.amqp.rabbit.core.RabbitAdmin$11.doInRabbit(RabbitAdmin.java:300)&lt;br/&gt;
	at org.springframework.amqp.rabbit.core.RabbitTemplate.execute(RabbitTemplate.java:430)&lt;br/&gt;
	... 35 more&lt;br/&gt;
Caused by: com.rabbitmq.client.ShutdownSignalException: channel error; reason: &lt;/p&gt;
{#method&amp;lt;channel.close&amp;gt;(reply-code=406, reply-text=PRECONDITION_FAILED - cannot redeclare exchange &apos;cafe-drinks&apos; in vhost &apos;/&apos; with different type, durable, internal or autodelete value, class-id=40, method-id=10), null, &quot;[B@4def3d1b&quot;}&lt;br/&gt;
	at com.rabbitmq.utility.ValueOrException.getValue(ValueOrException.java:67)&lt;br/&gt;
	at com.rabbitmq.utility.BlockingValueOrException.uninterruptibleGetValue(BlockingValueOrException.java:33)&lt;br/&gt;
	at com.rabbitmq.client.impl.AMQChannel$BlockingRpcContinuation.getReply(AMQChannel.java:343)&lt;br/&gt;
	at com.rabbitmq.client.impl.AMQChannel.privateRpc(AMQChannel.java:216)&lt;br/&gt;
	at com.rabbitmq.client.impl.AMQChannel.exnWrappingRpc(AMQChannel.java:118)&lt;br/&gt;
	... 48 more&lt;br/&gt;
Caused by: com.rabbitmq.client.ShutdownSignalException: channel error; reason: {#method&amp;lt;channel.close&amp;gt;(reply-code=406, reply-text=PRECONDITION_FAILED - cannot redeclare exchange &apos;cafe-drinks&apos; in vhost &apos;/&apos; with different type, durable, internal or autodelete value, class-id=40, method-id=10), null, &quot;[B@4def3d1b&quot;}
&lt;p&gt;	at com.rabbitmq.client.impl.ChannelN.asyncShutdown(ChannelN.java:422)&lt;br/&gt;
	at com.rabbitmq.client.impl.ChannelN.processAsync(ChannelN.java:262)&lt;br/&gt;
	at com.rabbitmq.client.impl.AMQChannel.handleCompleteInboundCommand(AMQChannel.java:144)&lt;br/&gt;
	at com.rabbitmq.client.impl.AMQChannel.handleFrame(AMQChannel.java:91)&lt;br/&gt;
	at com.rabbitmq.client.impl.AMQConnection$MainLoop.run(AMQConnection.java:510)&lt;/p&gt;

&lt;p&gt;task-scheduler-1 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.151:5672/,1)&lt;br/&gt;
task-scheduler-1 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange &lt;span class=&quot;error&quot;&gt;&amp;#91;cafe-drinks&amp;#93;&lt;/span&gt;, routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;drink.cold&amp;#93;&lt;/span&gt;&lt;br/&gt;
SimpleAsyncTaskExecutor-5 WARN : org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer - Consumer raised exception, processing can restart if the connection factory supports it. Exception summary: com.rabbitmq.client.ShutdownSignalException: connection error; reason: #method&amp;lt;connection.close&amp;gt;(reply-code=541, reply-text=Internal error in Consumer null (4c9dd9cd-a62a-4831-978b-689a8f490171) method handleCancelOk for channel AMQChannel(amqp://guest@172.16.227.151:5672/,3), class-id=0, method-id=0)&lt;br/&gt;
SimpleAsyncTaskExecutor-5 INFO : org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer - Restarting Consumer: tag=&lt;span class=&quot;error&quot;&gt;&amp;#91;amq.ctag-A7cIA6av0Bb0xHTrXeiLoZ&amp;#93;&lt;/span&gt;, channel=Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.151:5672/,2), acknowledgeMode=AUTO local queue size=0&lt;br/&gt;
SimpleAsyncTaskExecutor-6 DEBUG: org.springframework.amqp.rabbit.connection.CachingConnectionFactory - Creating cached Rabbit Channel from AMQChannel(amqp://guest@172.16.227.151:5672/,2)&lt;br/&gt;
task-scheduler-1 INFO : org.springframework.integration.handler.LoggingHandler - &lt;span class=&quot;error&quot;&gt;&amp;#91;Payload=Iced MOCHA, 3 shots.&amp;#93;&lt;/span&gt;[Headers=&lt;/p&gt;
{correlationId=e4d764d4-1aea-484e-825a-1eb0a0ebd3a4, amqp_contentType=text/plain, sequenceSize=2, amqp_receivedExchange=cafe-orders, amqp_contentEncoding=UTF-8, ICED=true, amqp_redelivered=false, sequenceNumber=2, id=79f82a94-f117-403a-933d-ece182a86c79, timestamp=1326651824052, amqp_receivedRoutingKey=amq.gen-AEYQ_ieJcAZTp4pw8Qoh9J, amqp_deliveryMode=PERSISTENT, amqp_deliveryTag=1}
&lt;p&gt;]&lt;br/&gt;
task-scheduler-1 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.151:5672/,1)&lt;br/&gt;
task-scheduler-1 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange &lt;span class=&quot;error&quot;&gt;&amp;#91;cafe-drinks&amp;#93;&lt;/span&gt;, routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;drink.cold&amp;#93;&lt;/span&gt;&lt;br/&gt;
task-scheduler-1 INFO : org.springframework.integration.handler.LoggingHandler - &lt;span class=&quot;error&quot;&gt;&amp;#91;Payload=Iced MOCHA, 3 shots.&amp;#93;&lt;/span&gt;[Headers=&lt;/p&gt;
{correlationId=48c50847-2b9f-4080-9bdf-7ebbd3a80c11, amqp_contentType=text/plain, sequenceSize=2, amqp_receivedExchange=cafe-orders, amqp_contentEncoding=UTF-8, ICED=true, amqp_redelivered=false, sequenceNumber=2, id=d7a2aed9-a743-436a-83d9-7504e09ea123, timestamp=1326651825061, amqp_receivedRoutingKey=amq.gen-gMKX12UL-T_4DkYVRaqk_T, amqp_deliveryMode=PERSISTENT, amqp_deliveryTag=2}
&lt;p&gt;]&lt;br/&gt;
task-scheduler-1 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.151:5672/,1)&lt;br/&gt;
task-scheduler-1 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange &lt;span class=&quot;error&quot;&gt;&amp;#91;cafe-drinks&amp;#93;&lt;/span&gt;, routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;drink.cold&amp;#93;&lt;/span&gt;&lt;br/&gt;
task-scheduler-1 INFO : org.springframework.integration.handler.LoggingHandler - &lt;span class=&quot;error&quot;&gt;&amp;#91;Payload=Iced MOCHA, 3 shots.&amp;#93;&lt;/span&gt;[Headers=&lt;/p&gt;
{correlationId=b905111c-a496-4815-b949-848291b40991, amqp_contentType=text/plain, sequenceSize=2, amqp_receivedExchange=cafe-orders, amqp_contentEncoding=UTF-8, ICED=true, amqp_redelivered=false, sequenceNumber=2, id=a078e262-4a87-44a4-8d65-7147f0ec1f9e, timestamp=1326651826069, amqp_receivedRoutingKey=amq.gen-AWIvtNSanYnxjZ_Uo78bfs, amqp_deliveryMode=PERSISTENT, amqp_deliveryTag=3}
&lt;p&gt;]&lt;br/&gt;
task-scheduler-1 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.151:5672/,1)&lt;br/&gt;
task-scheduler-1 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange &lt;span class=&quot;error&quot;&gt;&amp;#91;cafe-drinks&amp;#93;&lt;/span&gt;, routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;drink.cold&amp;#93;&lt;/span&gt;&lt;br/&gt;
task-scheduler-1 INFO : org.springframework.integration.handler.LoggingHandler - &lt;span class=&quot;error&quot;&gt;&amp;#91;Payload=Iced MOCHA, 3 shots.&amp;#93;&lt;/span&gt;[Headers=&lt;/p&gt;
{correlationId=66709c4c-dbfc-4dbd-a3aa-2069553d8b94, amqp_contentType=text/plain, sequenceSize=2, amqp_receivedExchange=cafe-orders, amqp_contentEncoding=UTF-8, ICED=true, amqp_redelivered=false, sequenceNumber=2, id=10fed659-39bd-4d1f-846d-bbd42f653e7c, timestamp=1326651827076, amqp_receivedRoutingKey=amq.gen-Qvc6FaOOSy_H7QFd_pTGiO, amqp_deliveryMode=PERSISTENT, amqp_deliveryTag=4}
&lt;p&gt;]&lt;br/&gt;
task-scheduler-1 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.151:5672/,1)&lt;br/&gt;
task-scheduler-1 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange &lt;span class=&quot;error&quot;&gt;&amp;#91;cafe-drinks&amp;#93;&lt;/span&gt;, routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;drink.cold&amp;#93;&lt;/span&gt;&lt;br/&gt;
task-scheduler-1 INFO : org.springframework.integration.handler.LoggingHandler - &lt;span class=&quot;error&quot;&gt;&amp;#91;Payload=Iced MOCHA, 3 shots.&amp;#93;&lt;/span&gt;[Headers=&lt;/p&gt;
{correlationId=81617c5b-45fc-404f-96bc-feb68b882aec, amqp_contentType=text/plain, sequenceSize=2, amqp_receivedExchange=cafe-orders, amqp_contentEncoding=UTF-8, ICED=true, amqp_redelivered=false, sequenceNumber=2, id=52ce0c26-925f-4523-9b6e-1b378dbecc51, timestamp=1326651828097, amqp_receivedRoutingKey=amq.gen-gT_L03-FbP1IkDbxDsZHBJ, amqp_deliveryMode=PERSISTENT, amqp_deliveryTag=5}
&lt;p&gt;]&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.connection.CachingConnectionFactory - Closing cached Channel: AMQChannel(amqp://guest@172.16.227.151:5672/,3)&lt;br/&gt;
Consumer null (378b099a-ca8a-47ab-a385-b71c2d3eeaff) method handleCancelOk for channel AMQChannel(amqp://guest@172.16.227.151:5672/,3) threw an exception for channel AMQChannel(amqp://guest@172.16.227.151:5672/,3):&lt;br/&gt;
java.lang.NullPointerException&lt;br/&gt;
	at com.rabbitmq.client.impl.ConsumerDispatcher$2.run(ConsumerDispatcher.java:91)&lt;br/&gt;
	at com.rabbitmq.client.impl.ConsumerWorkService$WorkPoolRunnable.run(ConsumerWorkService.java:79)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:680)&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.connection.RabbitUtils - Unexpected exception on closing RabbitMQ Channel&lt;br/&gt;
com.rabbitmq.client.ShutdownSignalException: connection error; reason: #method&amp;lt;connection.close&amp;gt;(reply-code=541, reply-text=Internal error in Consumer null (378b099a-ca8a-47ab-a385-b71c2d3eeaff) method handleCancelOk for channel AMQChannel(amqp://guest@172.16.227.151:5672/,3), class-id=0, method-id=0)&lt;br/&gt;
	at com.rabbitmq.utility.ValueOrException.getValue(ValueOrException.java:67)&lt;br/&gt;
	at com.rabbitmq.utility.BlockingValueOrException.uninterruptibleGetValue(BlockingValueOrException.java:37)&lt;br/&gt;
	at com.rabbitmq.client.impl.AMQChannel$BlockingRpcContinuation.getReply(AMQChannel.java:349)&lt;br/&gt;
	at com.rabbitmq.client.impl.ChannelN.close(ChannelN.java:504)&lt;br/&gt;
	at com.rabbitmq.client.impl.ChannelN.close(ChannelN.java:448)&lt;br/&gt;
	at com.rabbitmq.client.impl.ChannelN.close(ChannelN.java:441)&lt;br/&gt;
	at org.springframework.amqp.rabbit.connection.CachingConnectionFactory$CachedChannelInvocationHandler.physicalClose(CachingConnectionFactory.java:348)&lt;br/&gt;
	at org.springframework.amqp.rabbit.connection.CachingConnectionFactory$CachedChannelInvocationHandler.invoke(CachingConnectionFactory.java:281)&lt;br/&gt;
	at $Proxy5.close(Unknown Source)&lt;br/&gt;
	at org.springframework.amqp.rabbit.connection.RabbitUtils.closeChannel(RabbitUtils.java:66)&lt;br/&gt;
	at org.springframework.amqp.rabbit.connection.ConnectionFactoryUtils.releaseResources(ConnectionFactoryUtils.java:145)&lt;br/&gt;
	at org.springframework.amqp.rabbit.core.RabbitTemplate.execute(RabbitTemplate.java:437)&lt;br/&gt;
	at org.springframework.amqp.rabbit.core.RabbitTemplate.doSendAndReceive(RabbitTemplate.java:383)&lt;br/&gt;
	at org.springframework.amqp.rabbit.core.RabbitTemplate.sendAndReceive(RabbitTemplate.java:335)&lt;br/&gt;
	at org.springframework.integration.amqp.outbound.AmqpOutboundEndpoint.sendAndReceive(AmqpOutboundEndpoint.java:154)&lt;br/&gt;
	at org.springframework.integration.amqp.outbound.AmqpOutboundEndpoint.handleRequestMessage(AmqpOutboundEndpoint.java:128)&lt;br/&gt;
	at org.springframework.integration.handler.AbstractReplyProducingMessageHandler.handleMessageInternal(AbstractReplyProducingMessageHandler.java:97)&lt;br/&gt;
	at org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:73)&lt;br/&gt;
	at org.springframework.integration.endpoint.PollingConsumer.doPoll(PollingConsumer.java:70)&lt;br/&gt;
	at org.springframework.integration.endpoint.AbstractPollingEndpoint$1.call(AbstractPollingEndpoint.java:146)&lt;br/&gt;
	at org.springframework.integration.endpoint.AbstractPollingEndpoint$1.call(AbstractPollingEndpoint.java:144)&lt;br/&gt;
	at org.springframework.integration.endpoint.AbstractPollingEndpoint$Poller$1.run(AbstractPollingEndpoint.java:207)&lt;br/&gt;
	at org.springframework.integration.util.ErrorHandlingTaskExecutor$1.run(ErrorHandlingTaskExecutor.java:52)&lt;br/&gt;
	at org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:48)&lt;br/&gt;
	at org.springframework.integration.util.ErrorHandlingTaskExecutor.execute(ErrorHandlingTaskExecutor.java:49)&lt;br/&gt;
	at org.springframework.integration.endpoint.AbstractPollingEndpoint$Poller.run(AbstractPollingEndpoint.java:202)&lt;br/&gt;
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:53)&lt;br/&gt;
	at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:81)&lt;br/&gt;
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)&lt;br/&gt;
	at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)&lt;br/&gt;
	at java.util.concurrent.FutureTask.run(FutureTask.java:138)&lt;br/&gt;
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:98)&lt;br/&gt;
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:206)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:680)&lt;br/&gt;
Caused by: java.lang.NullPointerException&lt;br/&gt;
	at com.rabbitmq.client.impl.ConsumerDispatcher$2.run(ConsumerDispatcher.java:91)&lt;br/&gt;
	at com.rabbitmq.client.impl.ConsumerWorkService$WorkPoolRunnable.run(ConsumerWorkService.java:79)&lt;br/&gt;
	... 3 more&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.151:5672/,1)&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitAdmin - Initializing declarations&lt;br/&gt;
task-scheduler-2 WARN : org.springframework.amqp.rabbit.core.RabbitAdmin - Auto-declaring an auto-delete Exchange (cafe-drinks). It will be deleted by the broker if not in use (if all bindings are deleted), but will only be redeclared if the connection is closed and reopened.&lt;br/&gt;
task-scheduler-2 WARN : org.springframework.amqp.rabbit.core.RabbitAdmin - Auto-declaring an auto-delete Queue (all-drinks). It will be deleted by the broker if not in use, and all messages will be lost.  Redeclared when the connection is closed and reopened.&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.connection.CachingConnectionFactory - Creating cached Rabbit Channel from AMQChannel(amqp://guest@172.16.227.151:5672/,1)&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.151:5672/,1)&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitAdmin - declaring Exchange &apos;cafe-drinks&apos;&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.connection.CachingConnectionFactory - Detected closed channel on exception.  Re-initializing: null&lt;br/&gt;
task-scheduler-2 ERROR: org.springframework.integration.handler.LoggingHandler - org.springframework.integration.MessageHandlingException: error occurred in message handler &lt;a href=&quot;#1&quot;&gt;org.springframework.integration.amqp.outbound.AmqpOutboundEndpoint#1&lt;/a&gt;&lt;br/&gt;
	at org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:79)&lt;br/&gt;
	at org.springframework.integration.endpoint.PollingConsumer.doPoll(PollingConsumer.java:70)&lt;br/&gt;
	at org.springframework.integration.endpoint.AbstractPollingEndpoint$1.call(AbstractPollingEndpoint.java:146)&lt;br/&gt;
	at org.springframework.integration.endpoint.AbstractPollingEndpoint$1.call(AbstractPollingEndpoint.java:144)&lt;br/&gt;
	at org.springframework.integration.endpoint.AbstractPollingEndpoint$Poller$1.run(AbstractPollingEndpoint.java:207)&lt;br/&gt;
	at org.springframework.integration.util.ErrorHandlingTaskExecutor$1.run(ErrorHandlingTaskExecutor.java:52)&lt;br/&gt;
	at org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:48)&lt;br/&gt;
	at org.springframework.integration.util.ErrorHandlingTaskExecutor.execute(ErrorHandlingTaskExecutor.java:49)&lt;br/&gt;
	at org.springframework.integration.endpoint.AbstractPollingEndpoint$Poller.run(AbstractPollingEndpoint.java:202)&lt;br/&gt;
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:53)&lt;br/&gt;
	at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:81)&lt;br/&gt;
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)&lt;br/&gt;
	at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)&lt;br/&gt;
	at java.util.concurrent.FutureTask.run(FutureTask.java:138)&lt;br/&gt;
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:98)&lt;br/&gt;
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:206)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:680)&lt;br/&gt;
Caused by: org.springframework.amqp.AmqpIOException: java.io.IOException&lt;br/&gt;
	at org.springframework.amqp.rabbit.connection.RabbitUtils.convertRabbitAccessException(RabbitUtils.java:109)&lt;br/&gt;
	at org.springframework.amqp.rabbit.connection.RabbitAccessor.convertRabbitAccessException(RabbitAccessor.java:106)&lt;br/&gt;
	at org.springframework.amqp.rabbit.core.RabbitTemplate.execute(RabbitTemplate.java:435)&lt;br/&gt;
	at org.springframework.amqp.rabbit.core.RabbitAdmin.initialize(RabbitAdmin.java:298)&lt;br/&gt;
	at org.springframework.amqp.rabbit.core.RabbitAdmin$10.onCreate(RabbitAdmin.java:232)&lt;br/&gt;
	at org.springframework.amqp.rabbit.connection.CompositeConnectionListener.onCreate(CompositeConnectionListener.java:31)&lt;br/&gt;
	at org.springframework.amqp.rabbit.connection.CachingConnectionFactory.createConnection(CachingConnectionFactory.java:181)&lt;br/&gt;
	at org.springframework.amqp.rabbit.connection.CachingConnectionFactory.createBareChannel(CachingConnectionFactory.java:171)&lt;br/&gt;
	at org.springframework.amqp.rabbit.connection.CachingConnectionFactory.access$1(CachingConnectionFactory.java:167)&lt;br/&gt;
	at org.springframework.amqp.rabbit.connection.CachingConnectionFactory$CachedChannelInvocationHandler.invoke(CachingConnectionFactory.java:296)&lt;br/&gt;
	at $Proxy5.queueDeclare(Unknown Source)&lt;br/&gt;
	at org.springframework.amqp.rabbit.core.RabbitTemplate$3.doInRabbit(RabbitTemplate.java:389)&lt;br/&gt;
	at org.springframework.amqp.rabbit.core.RabbitTemplate$3.doInRabbit(RabbitTemplate.java:1)&lt;br/&gt;
	at org.springframework.amqp.rabbit.core.RabbitTemplate.execute(RabbitTemplate.java:430)&lt;br/&gt;
	at org.springframework.amqp.rabbit.core.RabbitTemplate.doSendAndReceive(RabbitTemplate.java:383)&lt;br/&gt;
	at org.springframework.amqp.rabbit.core.RabbitTemplate.sendAndReceive(RabbitTemplate.java:335)&lt;br/&gt;
	at org.springframework.integration.amqp.outbound.AmqpOutboundEndpoint.sendAndReceive(AmqpOutboundEndpoint.java:154)&lt;br/&gt;
	at org.springframework.integration.amqp.outbound.AmqpOutboundEndpoint.handleRequestMessage(AmqpOutboundEndpoint.java:128)&lt;br/&gt;
	at org.springframework.integration.handler.AbstractReplyProducingMessageHandler.handleMessageInternal(AbstractReplyProducingMessageHandler.java:97)&lt;br/&gt;
	at org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:73)&lt;br/&gt;
	... 18 more&lt;br/&gt;
Caused by: java.io.IOException&lt;br/&gt;
	at com.rabbitmq.client.impl.AMQChannel.wrap(AMQChannel.java:106)&lt;br/&gt;
	at com.rabbitmq.client.impl.AMQChannel.wrap(AMQChannel.java:102)&lt;br/&gt;
	at com.rabbitmq.client.impl.AMQChannel.exnWrappingRpc(AMQChannel.java:124)&lt;br/&gt;
	at com.rabbitmq.client.impl.ChannelN.exchangeDeclare(ChannelN.java:590)&lt;br/&gt;
	at com.rabbitmq.client.impl.ChannelN.exchangeDeclare(ChannelN.java:577)&lt;br/&gt;
	at com.rabbitmq.client.impl.ChannelN.exchangeDeclare(ChannelN.java:61)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
	at org.springframework.amqp.rabbit.connection.CachingConnectionFactory$CachedChannelInvocationHandler.invoke(CachingConnectionFactory.java:298)&lt;br/&gt;
	at $Proxy5.exchangeDeclare(Unknown Source)&lt;br/&gt;
	at org.springframework.amqp.rabbit.core.RabbitAdmin.declareExchanges(RabbitAdmin.java:317)&lt;br/&gt;
	at org.springframework.amqp.rabbit.core.RabbitAdmin.access$0(RabbitAdmin.java:312)&lt;br/&gt;
	at org.springframework.amqp.rabbit.core.RabbitAdmin$11.doInRabbit(RabbitAdmin.java:300)&lt;br/&gt;
	at org.springframework.amqp.rabbit.core.RabbitTemplate.execute(RabbitTemplate.java:430)&lt;br/&gt;
	... 35 more&lt;br/&gt;
Caused by: com.rabbitmq.client.ShutdownSignalException: channel error; reason: &lt;/p&gt;
{#method&amp;lt;channel.close&amp;gt;(reply-code=406, reply-text=PRECONDITION_FAILED - cannot redeclare exchange &apos;cafe-drinks&apos; in vhost &apos;/&apos; with different type, durable, internal or autodelete value, class-id=40, method-id=10), null, &quot;[B@4def3d1b&quot;}&lt;br/&gt;
	at com.rabbitmq.utility.ValueOrException.getValue(ValueOrException.java:67)&lt;br/&gt;
	at com.rabbitmq.utility.BlockingValueOrException.uninterruptibleGetValue(BlockingValueOrException.java:33)&lt;br/&gt;
	at com.rabbitmq.client.impl.AMQChannel$BlockingRpcContinuation.getReply(AMQChannel.java:343)&lt;br/&gt;
	at com.rabbitmq.client.impl.AMQChannel.privateRpc(AMQChannel.java:216)&lt;br/&gt;
	at com.rabbitmq.client.impl.AMQChannel.exnWrappingRpc(AMQChannel.java:118)&lt;br/&gt;
	... 48 more&lt;br/&gt;
Caused by: com.rabbitmq.client.ShutdownSignalException: channel error; reason: {#method&amp;lt;channel.close&amp;gt;(reply-code=406, reply-text=PRECONDITION_FAILED - cannot redeclare exchange &apos;cafe-drinks&apos; in vhost &apos;/&apos; with different type, durable, internal or autodelete value, class-id=40, method-id=10), null, &quot;[B@4def3d1b&quot;}
&lt;p&gt;	at com.rabbitmq.client.impl.ChannelN.asyncShutdown(ChannelN.java:422)&lt;br/&gt;
	at com.rabbitmq.client.impl.ChannelN.processAsync(ChannelN.java:262)&lt;br/&gt;
	at com.rabbitmq.client.impl.AMQChannel.handleCompleteInboundCommand(AMQChannel.java:144)&lt;br/&gt;
	at com.rabbitmq.client.impl.AMQChannel.handleFrame(AMQChannel.java:91)&lt;br/&gt;
	at com.rabbitmq.client.impl.AMQConnection$MainLoop.run(AMQConnection.java:510)&lt;/p&gt;

&lt;p&gt;task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.151:5672/,1)&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange &lt;span class=&quot;error&quot;&gt;&amp;#91;cafe-drinks&amp;#93;&lt;/span&gt;, routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;drink.hot&amp;#93;&lt;/span&gt;&lt;br/&gt;
SimpleAsyncTaskExecutor-6 WARN : org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer - Consumer raised exception, processing can restart if the connection factory supports it. Exception summary: com.rabbitmq.client.ShutdownSignalException: connection error; reason: #method&amp;lt;connection.close&amp;gt;(reply-code=541, reply-text=Internal error in Consumer null (378b099a-ca8a-47ab-a385-b71c2d3eeaff) method handleCancelOk for channel AMQChannel(amqp://guest@172.16.227.151:5672/,3), class-id=0, method-id=0)&lt;br/&gt;
SimpleAsyncTaskExecutor-6 INFO : org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer - Restarting Consumer: tag=&lt;span class=&quot;error&quot;&gt;&amp;#91;amq.ctag-A8axLFVTqxdYKQABES9yZo&amp;#93;&lt;/span&gt;, channel=Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.151:5672/,2), acknowledgeMode=AUTO local queue size=0&lt;br/&gt;
SimpleAsyncTaskExecutor-7 DEBUG: org.springframework.amqp.rabbit.connection.CachingConnectionFactory - Creating cached Rabbit Channel from AMQChannel(amqp://guest@172.16.227.151:5672/,2)&lt;br/&gt;
task-scheduler-2 INFO : org.springframework.integration.handler.LoggingHandler - &lt;span class=&quot;error&quot;&gt;&amp;#91;Payload=Hot LATTE, 2 shots.&amp;#93;&lt;/span&gt;[Headers=&lt;/p&gt;
{correlationId=788e0fd0-c9f9-4d76-bf82-3d1cd0d8a73f, amqp_contentType=text/plain, sequenceSize=2, amqp_receivedExchange=cafe-orders, amqp_contentEncoding=UTF-8, ICED=false, amqp_redelivered=false, sequenceNumber=1, id=f50ee638-0e49-4337-9971-971a415c60b6, timestamp=1326651884841, amqp_receivedRoutingKey=amq.gen-QwZ8BfWFX6faB3Fuj_Pry-, amqp_deliveryMode=PERSISTENT, amqp_deliveryTag=1}
&lt;p&gt;]&lt;br/&gt;
task-scheduler-2 INFO : org.springframework.integration.handler.LoggingHandler - [Payload=-----------------------&lt;br/&gt;
Order #7&lt;br/&gt;
Iced MOCHA, 3 shots.&lt;br/&gt;
Hot LATTE, 2 shots.&lt;br/&gt;
-----------------------&lt;br/&gt;
][Headers=&lt;/p&gt;
{timestamp=1326651884842, id=dbe3af72-32c8-4c47-8502-f43c08672cc3, amqp_deliveryMode=PERSISTENT, correlationId=788e0fd0-c9f9-4d76-bf82-3d1cd0d8a73f, amqp_contentType=text/plain, amqp_receivedExchange=cafe-orders, amqp_contentEncoding=UTF-8, amqp_redelivered=false, NUMBER=7}
&lt;p&gt;]&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.151:5672/,1)&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange &lt;span class=&quot;error&quot;&gt;&amp;#91;cafe-deliveries&amp;#93;&lt;/span&gt;, routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;delivery.7&amp;#93;&lt;/span&gt;&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.151:5672/,1)&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange &lt;span class=&quot;error&quot;&gt;&amp;#91;cafe-drinks&amp;#93;&lt;/span&gt;, routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;drink.hot&amp;#93;&lt;/span&gt;&lt;br/&gt;
task-scheduler-2 INFO : org.springframework.integration.handler.LoggingHandler - &lt;span class=&quot;error&quot;&gt;&amp;#91;Payload=Hot LATTE, 2 shots.&amp;#93;&lt;/span&gt;[Headers=&lt;/p&gt;
{correlationId=8d83c836-b47b-459b-a3bf-fd9f8297e5de, amqp_contentType=text/plain, sequenceSize=2, amqp_receivedExchange=cafe-orders, amqp_contentEncoding=UTF-8, ICED=false, amqp_redelivered=false, sequenceNumber=1, id=3f9bff4e-7717-4907-bc15-e6bef39d7db1, timestamp=1326651889851, amqp_receivedRoutingKey=amq.gen-QR1x1uB3CBVzxkF1AQaXCK, amqp_deliveryMode=PERSISTENT, amqp_deliveryTag=2}
&lt;p&gt;]&lt;br/&gt;
task-scheduler-2 INFO : org.springframework.integration.handler.LoggingHandler - [Payload=-----------------------&lt;br/&gt;
Order #8&lt;br/&gt;
Iced MOCHA, 3 shots.&lt;br/&gt;
Hot LATTE, 2 shots.&lt;br/&gt;
-----------------------&lt;br/&gt;
][Headers=&lt;/p&gt;
{timestamp=1326651889851, id=71f9b7bc-7dc5-4b0e-802a-1efc96089669, amqp_deliveryMode=PERSISTENT, correlationId=8d83c836-b47b-459b-a3bf-fd9f8297e5de, amqp_contentType=text/plain, amqp_receivedExchange=cafe-orders, amqp_contentEncoding=UTF-8, amqp_redelivered=false, NUMBER=8}
&lt;p&gt;]&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.151:5672/,1)&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange &lt;span class=&quot;error&quot;&gt;&amp;#91;cafe-deliveries&amp;#93;&lt;/span&gt;, routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;delivery.8&amp;#93;&lt;/span&gt;&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.151:5672/,1)&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange &lt;span class=&quot;error&quot;&gt;&amp;#91;cafe-drinks&amp;#93;&lt;/span&gt;, routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;drink.hot&amp;#93;&lt;/span&gt;&lt;br/&gt;
task-scheduler-2 INFO : org.springframework.integration.handler.LoggingHandler - &lt;span class=&quot;error&quot;&gt;&amp;#91;Payload=Hot LATTE, 2 shots.&amp;#93;&lt;/span&gt;[Headers=&lt;/p&gt;
{correlationId=9ae0540c-65cd-4fea-a808-f94443130bf1, amqp_contentType=text/plain, sequenceSize=2, amqp_receivedExchange=cafe-orders, amqp_contentEncoding=UTF-8, ICED=false, amqp_redelivered=false, sequenceNumber=1, id=7557c801-baab-4be5-8e84-2ecdd25c5ec3, timestamp=1326651894859, amqp_receivedRoutingKey=amq.gen-QQbnZii0ECuvHTHoP-QzQS, amqp_deliveryMode=PERSISTENT, amqp_deliveryTag=3}
&lt;p&gt;]&lt;br/&gt;
task-scheduler-2 INFO : org.springframework.integration.handler.LoggingHandler - [Payload=-----------------------&lt;br/&gt;
Order #9&lt;br/&gt;
Iced MOCHA, 3 shots.&lt;br/&gt;
Hot LATTE, 2 shots.&lt;br/&gt;
-----------------------&lt;br/&gt;
][Headers=&lt;/p&gt;
{timestamp=1326651894860, id=c6f0af54-b395-4607-a3f1-c2de055e8475, amqp_deliveryMode=PERSISTENT, correlationId=9ae0540c-65cd-4fea-a808-f94443130bf1, amqp_contentType=text/plain, amqp_receivedExchange=cafe-orders, amqp_contentEncoding=UTF-8, amqp_redelivered=false, NUMBER=9}
&lt;p&gt;]&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.151:5672/,1)&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange &lt;span class=&quot;error&quot;&gt;&amp;#91;cafe-deliveries&amp;#93;&lt;/span&gt;, routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;delivery.9&amp;#93;&lt;/span&gt;&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.151:5672/,1)&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange &lt;span class=&quot;error&quot;&gt;&amp;#91;cafe-drinks&amp;#93;&lt;/span&gt;, routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;drink.hot&amp;#93;&lt;/span&gt;&lt;br/&gt;
task-scheduler-2 INFO : org.springframework.integration.handler.LoggingHandler - &lt;span class=&quot;error&quot;&gt;&amp;#91;Payload=Hot LATTE, 2 shots.&amp;#93;&lt;/span&gt;[Headers=&lt;/p&gt;
{correlationId=bbfe1f42-c77f-43e8-a133-fca4b9e51f68, amqp_contentType=text/plain, sequenceSize=2, amqp_receivedExchange=cafe-orders, amqp_contentEncoding=UTF-8, ICED=false, amqp_redelivered=false, sequenceNumber=1, id=944c4986-d5ae-4c44-9850-7cd1d3f39502, timestamp=1326651899868, amqp_receivedRoutingKey=amq.gen-w_fc0GG3w_1HL1UuRGIKZv, amqp_deliveryMode=PERSISTENT, amqp_deliveryTag=4}
&lt;p&gt;]&lt;br/&gt;
task-scheduler-2 INFO : org.springframework.integration.handler.LoggingHandler - [Payload=-----------------------&lt;br/&gt;
Order #10&lt;br/&gt;
Iced MOCHA, 3 shots.&lt;br/&gt;
Hot LATTE, 2 shots.&lt;br/&gt;
-----------------------&lt;br/&gt;
][Headers=&lt;/p&gt;
{timestamp=1326651899869, id=ac345888-78b0-4678-836b-0dce4b750414, amqp_deliveryMode=PERSISTENT, correlationId=bbfe1f42-c77f-43e8-a133-fca4b9e51f68, amqp_contentType=text/plain, amqp_receivedExchange=cafe-orders, amqp_contentEncoding=UTF-8, amqp_redelivered=false, NUMBER=10}
&lt;p&gt;]&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.151:5672/,1)&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange &lt;span class=&quot;error&quot;&gt;&amp;#91;cafe-deliveries&amp;#93;&lt;/span&gt;, routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;delivery.10&amp;#93;&lt;/span&gt;&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.151:5672/,1)&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange &lt;span class=&quot;error&quot;&gt;&amp;#91;cafe-drinks&amp;#93;&lt;/span&gt;, routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;drink.hot&amp;#93;&lt;/span&gt;&lt;br/&gt;
task-scheduler-2 INFO : org.springframework.integration.handler.LoggingHandler - &lt;span class=&quot;error&quot;&gt;&amp;#91;Payload=Hot LATTE, 2 shots.&amp;#93;&lt;/span&gt;[Headers=&lt;/p&gt;
{correlationId=b3f94366-34fa-4764-8028-e991df37af6f, amqp_contentType=text/plain, sequenceSize=2, amqp_receivedExchange=cafe-orders, amqp_contentEncoding=UTF-8, ICED=false, amqp_redelivered=false, sequenceNumber=1, id=a0434cab-aad3-456e-93c6-e58dac55764c, timestamp=1326651904877, amqp_receivedRoutingKey=amq.gen-QznpY3qBnHFNdxHVrpYC5c, amqp_deliveryMode=PERSISTENT, amqp_deliveryTag=5}
&lt;p&gt;]&lt;br/&gt;
task-scheduler-2 INFO : org.springframework.integration.handler.LoggingHandler - [Payload=-----------------------&lt;br/&gt;
Order #11&lt;br/&gt;
Iced MOCHA, 3 shots.&lt;br/&gt;
Hot LATTE, 2 shots.&lt;br/&gt;
-----------------------&lt;br/&gt;
][Headers=&lt;/p&gt;
{timestamp=1326651904878, id=f4cf7f20-ac46-4839-9ed8-b1471a6ac648, amqp_deliveryMode=PERSISTENT, correlationId=b3f94366-34fa-4764-8028-e991df37af6f, amqp_contentType=text/plain, amqp_receivedExchange=cafe-orders, amqp_contentEncoding=UTF-8, amqp_redelivered=false, NUMBER=11}
&lt;p&gt;]&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.151:5672/,1)&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange &lt;span class=&quot;error&quot;&gt;&amp;#91;cafe-deliveries&amp;#93;&lt;/span&gt;, routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;delivery.11&amp;#93;&lt;/span&gt;&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.151:5672/,1)&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange &lt;span class=&quot;error&quot;&gt;&amp;#91;cafe-drinks&amp;#93;&lt;/span&gt;, routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;drink.hot&amp;#93;&lt;/span&gt;&lt;br/&gt;
task-scheduler-2 INFO : org.springframework.integration.handler.LoggingHandler - &lt;span class=&quot;error&quot;&gt;&amp;#91;Payload=Hot LATTE, 2 shots.&amp;#93;&lt;/span&gt;[Headers=&lt;/p&gt;
{correlationId=cf6be7f9-abeb-4dca-a6ce-e02e1db9c684, amqp_contentType=text/plain, sequenceSize=2, amqp_receivedExchange=cafe-orders, amqp_contentEncoding=UTF-8, ICED=false, amqp_redelivered=false, sequenceNumber=1, id=cba329e9-cdef-453f-ac19-c35593a6279c, timestamp=1326651909886, amqp_receivedRoutingKey=amq.gen-QMfXZlVMUCTAjePIdUB6kt, amqp_deliveryMode=PERSISTENT, amqp_deliveryTag=6}
&lt;p&gt;]&lt;br/&gt;
task-scheduler-2 INFO : org.springframework.integration.handler.LoggingHandler - [Payload=-----------------------&lt;br/&gt;
Order #12&lt;br/&gt;
Iced MOCHA, 3 shots.&lt;br/&gt;
Hot LATTE, 2 shots.&lt;br/&gt;
-----------------------&lt;br/&gt;
][Headers=&lt;/p&gt;
{timestamp=1326651909887, id=8e1674e6-3764-4c50-8be1-367ebefd0278, amqp_deliveryMode=PERSISTENT, correlationId=cf6be7f9-abeb-4dca-a6ce-e02e1db9c684, amqp_contentType=text/plain, amqp_receivedExchange=cafe-orders, amqp_contentEncoding=UTF-8, amqp_redelivered=false, NUMBER=12}
&lt;p&gt;]&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.151:5672/,1)&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange &lt;span class=&quot;error&quot;&gt;&amp;#91;cafe-deliveries&amp;#93;&lt;/span&gt;, routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;delivery.12&amp;#93;&lt;/span&gt;&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.151:5672/,1)&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange &lt;span class=&quot;error&quot;&gt;&amp;#91;cafe-drinks&amp;#93;&lt;/span&gt;, routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;drink.hot&amp;#93;&lt;/span&gt;&lt;br/&gt;
task-scheduler-2 INFO : org.springframework.integration.handler.LoggingHandler - &lt;span class=&quot;error&quot;&gt;&amp;#91;Payload=Hot LATTE, 2 shots.&amp;#93;&lt;/span&gt;[Headers=&lt;/p&gt;
{correlationId=ae27bfa3-c7cc-4af5-be41-5dd000a54f95, amqp_contentType=text/plain, sequenceSize=2, amqp_receivedExchange=cafe-orders, amqp_contentEncoding=UTF-8, ICED=false, amqp_redelivered=false, sequenceNumber=1, id=b5780a46-4c8a-4244-89ba-a8877e29bd77, timestamp=1326651914896, amqp_receivedRoutingKey=amq.gen-A3A1a995yzqMACkhl_Q0WH, amqp_deliveryMode=PERSISTENT, amqp_deliveryTag=7}
&lt;p&gt;]&lt;br/&gt;
task-scheduler-2 INFO : org.springframework.integration.handler.LoggingHandler - [Payload=-----------------------&lt;br/&gt;
Order #13&lt;br/&gt;
Iced MOCHA, 3 shots.&lt;br/&gt;
Hot LATTE, 2 shots.&lt;br/&gt;
-----------------------&lt;br/&gt;
][Headers=&lt;/p&gt;
{timestamp=1326651914897, id=b540f6ac-49c4-4e40-86d7-8f6c81369f8f, amqp_deliveryMode=PERSISTENT, correlationId=ae27bfa3-c7cc-4af5-be41-5dd000a54f95, amqp_contentType=text/plain, amqp_receivedExchange=cafe-orders, amqp_contentEncoding=UTF-8, amqp_redelivered=false, NUMBER=13}
&lt;p&gt;]&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.151:5672/,1)&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange &lt;span class=&quot;error&quot;&gt;&amp;#91;cafe-deliveries&amp;#93;&lt;/span&gt;, routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;delivery.13&amp;#93;&lt;/span&gt;&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.151:5672/,1)&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange &lt;span class=&quot;error&quot;&gt;&amp;#91;cafe-drinks&amp;#93;&lt;/span&gt;, routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;drink.hot&amp;#93;&lt;/span&gt;&lt;br/&gt;
task-scheduler-2 INFO : org.springframework.integration.handler.LoggingHandler - &lt;span class=&quot;error&quot;&gt;&amp;#91;Payload=Hot LATTE, 2 shots.&amp;#93;&lt;/span&gt;[Headers=&lt;/p&gt;
{correlationId=5741f896-0aec-4fdb-b621-9f9bceca9273, amqp_contentType=text/plain, sequenceSize=2, amqp_receivedExchange=cafe-orders, amqp_contentEncoding=UTF-8, ICED=false, amqp_redelivered=false, sequenceNumber=1, id=5479ff6f-0178-4abd-9c1d-be589352ab83, timestamp=1326651919905, amqp_receivedRoutingKey=amq.gen-A3q5VpQ7NplgKlpvBmBmk5, amqp_deliveryMode=PERSISTENT, amqp_deliveryTag=8}
&lt;p&gt;]&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.151:5672/,1)&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange &lt;span class=&quot;error&quot;&gt;&amp;#91;cafe-drinks&amp;#93;&lt;/span&gt;, routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;drink.hot&amp;#93;&lt;/span&gt;&lt;br/&gt;
task-scheduler-2 INFO : org.springframework.integration.handler.LoggingHandler - &lt;span class=&quot;error&quot;&gt;&amp;#91;Payload=Hot LATTE, 2 shots.&amp;#93;&lt;/span&gt;[Headers=&lt;/p&gt;
{correlationId=5dcba618-7b07-437f-b90a-fb77a49fe0f0, amqp_contentType=text/plain, sequenceSize=2, amqp_receivedExchange=cafe-orders, amqp_contentEncoding=UTF-8, ICED=false, amqp_redelivered=false, sequenceNumber=1, id=578a2e6d-dc52-4626-9ca1-cd7b9456400d, timestamp=1326651924912, amqp_receivedRoutingKey=amq.gen-gQOpUvTVrju24MNiaTK1ug, amqp_deliveryMode=PERSISTENT, amqp_deliveryTag=9}
&lt;p&gt;]&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.151:5672/,1)&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange &lt;span class=&quot;error&quot;&gt;&amp;#91;cafe-drinks&amp;#93;&lt;/span&gt;, routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;drink.hot&amp;#93;&lt;/span&gt;&lt;br/&gt;
task-scheduler-2 INFO : org.springframework.integration.handler.LoggingHandler - &lt;span class=&quot;error&quot;&gt;&amp;#91;Payload=Hot LATTE, 2 shots.&amp;#93;&lt;/span&gt;[Headers=&lt;/p&gt;
{correlationId=e4d764d4-1aea-484e-825a-1eb0a0ebd3a4, amqp_contentType=text/plain, sequenceSize=2, amqp_receivedExchange=cafe-orders, amqp_contentEncoding=UTF-8, ICED=false, amqp_redelivered=false, sequenceNumber=1, id=eed6f154-dcc9-47d0-af09-9a92628e8f14, timestamp=1326651929920, amqp_receivedRoutingKey=amq.gen-Az4vvh0VBtyZyYzmEaqXgX, amqp_deliveryMode=PERSISTENT, amqp_deliveryTag=10}
&lt;p&gt;]&lt;br/&gt;
task-scheduler-2 INFO : org.springframework.integration.handler.LoggingHandler - [Payload=-----------------------&lt;br/&gt;
Order #16&lt;br/&gt;
Iced MOCHA, 3 shots.&lt;br/&gt;
Hot LATTE, 2 shots.&lt;br/&gt;
-----------------------&lt;br/&gt;
][Headers=&lt;/p&gt;
{timestamp=1326651929920, id=1c96c9ef-0fbe-4bf5-974a-6ddf53e95528, amqp_deliveryMode=PERSISTENT, correlationId=e4d764d4-1aea-484e-825a-1eb0a0ebd3a4, amqp_contentType=text/plain, amqp_receivedExchange=cafe-orders, amqp_contentEncoding=UTF-8, amqp_redelivered=false, NUMBER=16}
&lt;p&gt;]&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.151:5672/,1)&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange &lt;span class=&quot;error&quot;&gt;&amp;#91;cafe-deliveries&amp;#93;&lt;/span&gt;, routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;delivery.16&amp;#93;&lt;/span&gt;&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.151:5672/,1)&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange &lt;span class=&quot;error&quot;&gt;&amp;#91;cafe-drinks&amp;#93;&lt;/span&gt;, routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;drink.hot&amp;#93;&lt;/span&gt;&lt;br/&gt;
task-scheduler-2 INFO : org.springframework.integration.handler.LoggingHandler - &lt;span class=&quot;error&quot;&gt;&amp;#91;Payload=Hot LATTE, 2 shots.&amp;#93;&lt;/span&gt;[Headers=&lt;/p&gt;
{correlationId=48c50847-2b9f-4080-9bdf-7ebbd3a80c11, amqp_contentType=text/plain, sequenceSize=2, amqp_receivedExchange=cafe-orders, amqp_contentEncoding=UTF-8, ICED=false, amqp_redelivered=false, sequenceNumber=1, id=9bf0c769-0a5c-4ead-8cc8-623924d707cd, timestamp=1326651934934, amqp_receivedRoutingKey=amq.gen-g6VtgW2S3Hb2l7wICZIRpm, amqp_deliveryMode=PERSISTENT, amqp_deliveryTag=11}
&lt;p&gt;]&lt;br/&gt;
task-scheduler-2 INFO : org.springframework.integration.handler.LoggingHandler - [Payload=-----------------------&lt;br/&gt;
Order #17&lt;br/&gt;
Iced MOCHA, 3 shots.&lt;br/&gt;
Hot LATTE, 2 shots.&lt;br/&gt;
-----------------------&lt;br/&gt;
][Headers=&lt;/p&gt;
{timestamp=1326651934934, id=32023525-0355-4fc3-9d5f-6a8e8571780a, amqp_deliveryMode=PERSISTENT, correlationId=48c50847-2b9f-4080-9bdf-7ebbd3a80c11, amqp_contentType=text/plain, amqp_receivedExchange=cafe-orders, amqp_contentEncoding=UTF-8, amqp_redelivered=false, NUMBER=17}
&lt;p&gt;]&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.151:5672/,1)&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange &lt;span class=&quot;error&quot;&gt;&amp;#91;cafe-deliveries&amp;#93;&lt;/span&gt;, routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;delivery.17&amp;#93;&lt;/span&gt;&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.151:5672/,1)&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange &lt;span class=&quot;error&quot;&gt;&amp;#91;cafe-drinks&amp;#93;&lt;/span&gt;, routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;drink.hot&amp;#93;&lt;/span&gt;&lt;br/&gt;
task-scheduler-2 INFO : org.springframework.integration.handler.LoggingHandler - &lt;span class=&quot;error&quot;&gt;&amp;#91;Payload=Hot LATTE, 2 shots.&amp;#93;&lt;/span&gt;[Headers=&lt;/p&gt;
{correlationId=b905111c-a496-4815-b949-848291b40991, amqp_contentType=text/plain, sequenceSize=2, amqp_receivedExchange=cafe-orders, amqp_contentEncoding=UTF-8, ICED=false, amqp_redelivered=false, sequenceNumber=1, id=1bc72c2c-6111-42aa-b010-c775940bad75, timestamp=1326651939944, amqp_receivedRoutingKey=amq.gen-ANB5efdIw5RiQucdu8GZcD, amqp_deliveryMode=PERSISTENT, amqp_deliveryTag=12}
&lt;p&gt;]&lt;br/&gt;
task-scheduler-2 INFO : org.springframework.integration.handler.LoggingHandler - [Payload=-----------------------&lt;br/&gt;
Order #18&lt;br/&gt;
Iced MOCHA, 3 shots.&lt;br/&gt;
Hot LATTE, 2 shots.&lt;br/&gt;
-----------------------&lt;br/&gt;
][Headers=&lt;/p&gt;
{timestamp=1326651939945, id=28c6af8c-67d4-4e65-b9db-6b74a8f687bf, amqp_deliveryMode=PERSISTENT, correlationId=b905111c-a496-4815-b949-848291b40991, amqp_contentType=text/plain, amqp_receivedExchange=cafe-orders, amqp_contentEncoding=UTF-8, amqp_redelivered=false, NUMBER=18}
&lt;p&gt;]&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.151:5672/,1)&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange &lt;span class=&quot;error&quot;&gt;&amp;#91;cafe-deliveries&amp;#93;&lt;/span&gt;, routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;delivery.18&amp;#93;&lt;/span&gt;&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.151:5672/,1)&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange &lt;span class=&quot;error&quot;&gt;&amp;#91;cafe-drinks&amp;#93;&lt;/span&gt;, routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;drink.hot&amp;#93;&lt;/span&gt;&lt;br/&gt;
task-scheduler-2 INFO : org.springframework.integration.handler.LoggingHandler - &lt;span class=&quot;error&quot;&gt;&amp;#91;Payload=Hot LATTE, 2 shots.&amp;#93;&lt;/span&gt;[Headers=&lt;/p&gt;
{correlationId=66709c4c-dbfc-4dbd-a3aa-2069553d8b94, amqp_contentType=text/plain, sequenceSize=2, amqp_receivedExchange=cafe-orders, amqp_contentEncoding=UTF-8, ICED=false, amqp_redelivered=false, sequenceNumber=1, id=279b958f-2dc9-4459-ba52-51091dc7f1b7, timestamp=1326651944953, amqp_receivedRoutingKey=amq.gen-gQJAoy98Sb9UwzMWFtlNV_, amqp_deliveryMode=PERSISTENT, amqp_deliveryTag=13}
&lt;p&gt;]&lt;br/&gt;
task-scheduler-2 INFO : org.springframework.integration.handler.LoggingHandler - [Payload=-----------------------&lt;br/&gt;
Order #19&lt;br/&gt;
Iced MOCHA, 3 shots.&lt;br/&gt;
Hot LATTE, 2 shots.&lt;br/&gt;
-----------------------&lt;br/&gt;
][Headers=&lt;/p&gt;
{timestamp=1326651944953, id=fd1458fe-7fb9-4ed8-80c7-fcd0a450006b, amqp_deliveryMode=PERSISTENT, correlationId=66709c4c-dbfc-4dbd-a3aa-2069553d8b94, amqp_contentType=text/plain, amqp_receivedExchange=cafe-orders, amqp_contentEncoding=UTF-8, amqp_redelivered=false, NUMBER=19}
&lt;p&gt;]&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.151:5672/,1)&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange &lt;span class=&quot;error&quot;&gt;&amp;#91;cafe-deliveries&amp;#93;&lt;/span&gt;, routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;delivery.19&amp;#93;&lt;/span&gt;&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.151:5672/,1)&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange &lt;span class=&quot;error&quot;&gt;&amp;#91;cafe-drinks&amp;#93;&lt;/span&gt;, routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;drink.hot&amp;#93;&lt;/span&gt;&lt;br/&gt;
task-scheduler-2 INFO : org.springframework.integration.handler.LoggingHandler - &lt;span class=&quot;error&quot;&gt;&amp;#91;Payload=Hot LATTE, 2 shots.&amp;#93;&lt;/span&gt;[Headers=&lt;/p&gt;
{correlationId=81617c5b-45fc-404f-96bc-feb68b882aec, amqp_contentType=text/plain, sequenceSize=2, amqp_receivedExchange=cafe-orders, amqp_contentEncoding=UTF-8, ICED=false, amqp_redelivered=false, sequenceNumber=1, id=9154a1cf-15f7-4ccb-ab19-9c671508ce9d, timestamp=1326651949962, amqp_receivedRoutingKey=amq.gen-A86eIg4f4VFO8SODSdIiAn, amqp_deliveryMode=PERSISTENT, amqp_deliveryTag=14}
&lt;p&gt;]&lt;br/&gt;
task-scheduler-2 INFO : org.springframework.integration.handler.LoggingHandler - [Payload=-----------------------&lt;br/&gt;
Order #20&lt;br/&gt;
Iced MOCHA, 3 shots.&lt;br/&gt;
Hot LATTE, 2 shots.&lt;br/&gt;
-----------------------&lt;br/&gt;
][Headers=&lt;/p&gt;
{timestamp=1326651949962, id=d300dc95-70d3-4e5c-9007-c644b6845df8, amqp_deliveryMode=PERSISTENT, correlationId=81617c5b-45fc-404f-96bc-feb68b882aec, amqp_contentType=text/plain, amqp_receivedExchange=cafe-orders, amqp_contentEncoding=UTF-8, amqp_redelivered=false, NUMBER=20}
&lt;p&gt;]&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.16.227.151:5672/,1)&lt;br/&gt;
task-scheduler-2 DEBUG: org.springframework.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange &lt;span class=&quot;error&quot;&gt;&amp;#91;cafe-deliveries&amp;#93;&lt;/span&gt;, routingKey = &lt;span class=&quot;error&quot;&gt;&amp;#91;delivery.20&amp;#93;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="75077" author="drstevens" created="Thu, 26 Jan 2012 20:22:37 +0000"  >&lt;p&gt;I believe this is related to &lt;a href=&quot;https://jira.spring.io/browse/AMQP-209&quot; title=&quot;BlockingQueueConsumer.InternalConsumer does not override handleCancel which is called when consumer is cancelled by broker&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQP-209&quot;&gt;&lt;del&gt;AMQP-209&lt;/del&gt;&lt;/a&gt; - &lt;a href=&quot;https://jira.springsource.org/browse/AMQP-209&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://jira.springsource.org/browse/AMQP-209&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="79391" author="grussell" created="Tue, 29 May 2012 06:22:15 +0000"  >&lt;p&gt;We believe this was addressed in the 1.1.0 release; please request reopen if the issue persists.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 12 Oct 2011 02:03:26 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10280" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>27552</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i010l3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5972</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10381" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Ranking</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7128</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>