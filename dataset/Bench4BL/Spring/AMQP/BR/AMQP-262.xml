<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Thu Dec 22 11:01:22 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/AMQP-262/AMQP-262.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[AMQP-262] ConcurrentModificationException with publish confirms</title>
                <link>https://jira.spring.io/browse/AMQP-262</link>
                <project id="10450" key="AMQP">Spring AMQP</project>
                    <description>&lt;p&gt;I&apos;m getting random ConcurrentModificationExceptions in the publish confirm code when sending messages from multiple threads, using the same rabbit template. &lt;/p&gt;

&lt;p&gt;Caused by: java.util.ConcurrentModificationException&lt;br/&gt;
	at java.util.TreeMap$NavigableSubMap$SubMapIterator.nextEntry(TreeMap.java:1594)&lt;br/&gt;
	at java.util.TreeMap$NavigableSubMap$SubMapEntryIterator.next(TreeMap.java:1642)&lt;br/&gt;
	at java.util.TreeMap$NavigableSubMap$SubMapEntryIterator.next(TreeMap.java:1636)&lt;br/&gt;
	at org.springframework.amqp.rabbit.support.PublisherCallbackChannelImpl.processAck(PublisherCallbackChannelImpl.java:493)&lt;br/&gt;
	at org.springframework.amqp.rabbit.support.PublisherCallbackChannelImpl.handleAck(PublisherCallbackChannelImpl.java:474)&lt;br/&gt;
	at com.rabbitmq.client.impl.ChannelN.callConfirmListeners(ChannelN.java:435)&lt;br/&gt;
	at com.rabbitmq.client.impl.ChannelN.processAsync(ChannelN.java:351)&lt;br/&gt;
	at com.rabbitmq.client.impl.AMQChannel.handleCompleteInboundCommand(AMQChannel.java:144)&lt;br/&gt;
	at com.rabbitmq.client.impl.AMQChannel.handleFrame(AMQChannel.java:91)&lt;br/&gt;
	at com.rabbitmq.client.impl.AMQConnection$MainLoop.run(AMQConnection.java:526)&lt;/p&gt;

&lt;p&gt;Looking at the code, it seems that PublisherCallbackChannelImpl.addPendingConfirm() is thread unsafe. It should synchronize the access to this.pendingConfirms, just like processAck() does. I&apos;ve attached a possible fix. &lt;/p&gt;
</description>
                <environment>OSX Lion, Java 1.7.0u5, Macbook core i5</environment>
        <key id="44800">AMQP-262</key>
            <summary>ConcurrentModificationException with publish confirms</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://jira.spring.io/images/icons/priorities/critical.png">Critical</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Complete</resolution>
                                        <assignee username="grussell">Gary Russell</assignee>
                                    <reporter username="asrgomes">Antonio Gomes</reporter>
                        <labels>
                            <label>PullRequest</label>
                            <label>error-reporting</label>
                    </labels>
                <created>Mon, 6 Aug 2012 09:51:41 +0000</created>
                <updated>Thu, 23 Aug 2012 14:56:26 +0000</updated>
                            <resolved>Wed, 22 Aug 2012 10:34:57 +0000</resolved>
                                    <version>1.1.1</version>
                                    <fixVersion>1.1.2</fixVersion>
                    <fixVersion>1.2.0.M1</fixVersion>
                                    <component>RabbitMQ</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="82319" author="grussell" created="Mon, 6 Aug 2012 14:06:50 +0000"  >&lt;p&gt;Pull Request Issued: &lt;a href=&quot;https://github.com/SpringSource/spring-amqp/pull/66&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/SpringSource/spring-amqp/pull/66&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="20144" name="ConcurrentModificationException-publishConfirm.patch" size="1101" author="asrgomes" created="Mon, 6 Aug 2012 09:51:41 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 6 Aug 2012 14:06:50 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10280" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>31844</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i05ro7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>33689</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10381" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Ranking</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>31544</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>