<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Thu Dec 22 15:37:13 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/DATAMONGO-373/DATAMONGO-373.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[DATAMONGO-373] QueryMapper is getting a ClassCasteException When trying to Convert an ArrayList to a BSONList</title>
                <link>https://jira.spring.io/browse/DATAMONGO-373</link>
                <project id="10701" key="DATAMONGO">Spring Data MongoDB</project>
                    <description>&lt;p&gt;I am using Mongodb java driver (mongo-java-driver - 2.7.2) to create a Query using QueryBuilder and then using QueryBuilder to get the DBObject to create a BasicQuery; then using MongoTemplate&apos;s find method by passing the BasicQuery Object.  Getting a ClassCastException in QueryMapper - trying cast an ArrayList to a BasicBSONList.  Using version 1.0.0.M4.  It would be nice if a patch is applied to this version??  Attached is the changes I made in order to make it work.&lt;/p&gt;</description>
                <environment></environment>
        <key id="41680">DATAMONGO-373</key>
            <summary>QueryMapper is getting a ClassCasteException When trying to Convert an ArrayList to a BSONList</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://jira.spring.io/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="olivergierke">Oliver Gierke</assignee>
                                    <reporter username="lshabbot">Leith Shabbot</reporter>
                        <labels>
                    </labels>
                <created>Mon, 9 Jan 2012 14:35:14 +0000</created>
                <updated>Mon, 25 Mar 2013 09:31:00 +0000</updated>
                            <resolved>Wed, 11 Jan 2012 11:20:42 +0000</resolved>
                                    <version>1.0 GA</version>
                                    <fixVersion>1.1 M1</fixVersion>
                                    <component>Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                    <timeoriginalestimate seconds="0">0d</timeoriginalestimate>
                            <timeestimate seconds="0">0d</timeestimate>
                                        <comments>
                            <comment id="74583" author="olivergierke" created="Mon, 9 Jan 2012 23:51:55 +0000"  >&lt;p&gt;Would you mind trying this against the latest 1.0 GA release?&lt;/p&gt;</comment>
                            <comment id="74658" author="lshabbot" created="Wed, 11 Jan 2012 06:40:55 +0000"  >&lt;p&gt;Our project is now using spring-data-mongo-1.0.0.RC1 and spring-data-commons-core version 1.2.0.M2.  I am seeing a different error (see attached log).  When we are trying to save our object in mongo, we are getting a NumberFormatException?  Looking at the source for QueryMapper and it is still casting it to BasicBSONList (line 100). I do not see what that is necessary because all this code is doing is calling the iterator method on the BasicBSONList which is part of the Collection Interface.  The casting looks unnecessary?? &lt;/p&gt;</comment>
                            <comment id="74659" author="olivergierke" created="Wed, 11 Jan 2012 07:07:58 +0000"  >&lt;ol&gt;
	&lt;li&gt;Would you mind trying with SD MongoDB 1.0.0.RELEASE, as suggested above?&lt;/li&gt;
	&lt;li&gt;The stack trace you attached doesn&apos;t show any involvement of &lt;tt&gt;QueryMapper&lt;/tt&gt;&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="74660" author="lshabbot" created="Wed, 11 Jan 2012 07:34:05 +0000"  >&lt;p&gt;1. I have added the following dependencies in my pom. Is this correct, because now I get an error when trying to construct &lt;tt&gt;MongoTemplate&lt;/tt&gt;&lt;/p&gt;
&lt;p/&gt;
&lt;div id=&quot;syntaxplugin&quot; class=&quot;syntaxplugin&quot; style=&quot;border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;&quot;&gt;
&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; border=&quot;0&quot; width=&quot;100%&quot; style=&quot;font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;&quot;&gt;
		&lt;tbody &gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span style=&quot;color: #006699; font-weight: bold; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;dependency&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt; &amp;lt;&lt;/span&gt;&lt;span style=&quot;color: #006699; font-weight: bold; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;groupId&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;&amp;gt;org.springframework.data&amp;lt;/&lt;/span&gt;&lt;span style=&quot;color: #006699; font-weight: bold; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;groupId&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt; &amp;lt;&lt;/span&gt;&lt;span style=&quot;color: #006699; font-weight: bold; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;artifactId&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;&amp;gt;spring-data-commons-core&amp;lt;/&lt;/span&gt;&lt;span style=&quot;color: #006699; font-weight: bold; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;artifactId&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt; &amp;lt;&lt;/span&gt;&lt;span style=&quot;color: #006699; font-weight: bold; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;version&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;&amp;gt;1.2.0.RELEASE&amp;lt;/&lt;/span&gt;&lt;span style=&quot;color: #006699; font-weight: bold; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;version&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span style=&quot;color: #006699; font-weight: bold; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;dependency&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span style=&quot;color: #006699; font-weight: bold; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;dependency&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt; &amp;lt;&lt;/span&gt;&lt;span style=&quot;color: #006699; font-weight: bold; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;groupId&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;&amp;gt;org.springframework.data&amp;lt;/&lt;/span&gt;&lt;span style=&quot;color: #006699; font-weight: bold; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;groupId&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt; &amp;lt;&lt;/span&gt;&lt;span style=&quot;color: #006699; font-weight: bold; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;artifactId&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;&amp;gt;spring-data-mongodb&amp;lt;/&lt;/span&gt;&lt;span style=&quot;color: #006699; font-weight: bold; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;artifactId&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt; &amp;lt;&lt;/span&gt;&lt;span style=&quot;color: #006699; font-weight: bold; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;version&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;&amp;gt;1.0.0.RELEASE&amp;lt;/&lt;/span&gt;&lt;span style=&quot;color: #006699; font-weight: bold; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;version&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span style=&quot;color: #006699; font-weight: bold; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;dependency&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
			&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;p/&gt;

&lt;p&gt;2. You do not see QueryMapper in the stack trace because I did not even get that far.  The stack trace is from trying to save data to mongo. I did not reach the step in my code where I attempt to build queries in order to run against mongo (this is where QueryMapper would gets involved).&lt;/p&gt;</comment>
                            <comment id="74662" author="olivergierke" created="Wed, 11 Jan 2012 07:41:49 +0000"  >&lt;p&gt;Right, you actually don&apos;t need to configure SD Commons dependency explicitly as it should be pulled transitively. What error are you seeing regarding &lt;tt&gt;MongoTemplate&lt;/tt&gt; construction?&lt;/p&gt;</comment>
                            <comment id="74665" author="lshabbot" created="Wed, 11 Jan 2012 07:46:50 +0000"  >&lt;p&gt;Result from trying the following&lt;/p&gt;

&lt;p&gt;MongoTemplate mt = new MongoTemplate(mongo, dbName); //SpringConnectionManagerImpl.java:61&lt;/p&gt;

&lt;p&gt;Exception in thread &quot;main&quot; java.lang.IllegalAccessError: tried to access method org.springframework.core.GenericTypeResolver.getTypeVariableMap(Ljava/lang/Class;)Ljava/util/Map; from class org.springframework.data.util.ClassTypeInformation&lt;br/&gt;
	at org.springframework.data.util.ClassTypeInformation.&amp;lt;init&amp;gt;(ClassTypeInformation.java:96)&lt;br/&gt;
	at org.springframework.data.util.ClassTypeInformation.&amp;lt;clinit&amp;gt;(ClassTypeInformation.java:42)&lt;br/&gt;
	at org.springframework.data.mongodb.core.convert.DefaultMongoTypeMapper.&amp;lt;clinit&amp;gt;(DefaultMongoTypeMapper.java:45)&lt;br/&gt;
	at org.springframework.data.mongodb.core.convert.MappingMongoConverter.&amp;lt;init&amp;gt;(MappingMongoConverter.java:102)&lt;br/&gt;
	at org.springframework.data.mongodb.core.MongoTemplate.getDefaultMongoConverter(MongoTemplate.java:1543)&lt;br/&gt;
	at org.springframework.data.mongodb.core.MongoTemplate.&amp;lt;init&amp;gt;(MongoTemplate.java:198)&lt;br/&gt;
	at org.springframework.data.mongodb.core.MongoTemplate.&amp;lt;init&amp;gt;(MongoTemplate.java:163)&lt;br/&gt;
	at com.x.infra.xbridge.dal.spring.SpringConnectionManagerImpl.createDataStore(SpringConnectionManagerImpl.java:61)&lt;br/&gt;
	at com.x.infra.xbridge.dal.spring.SpringConnectionManagerImpl.&amp;lt;init&amp;gt;(SpringConnectionManagerImpl.java:23)&lt;br/&gt;
	at com.x.infra.xbridge.dal.spring.SpringDriver.main(SpringDriver.java:27)&lt;/p&gt;</comment>
                            <comment id="74666" author="olivergierke" created="Wed, 11 Jan 2012 07:55:21 +0000"  >&lt;p&gt;Make sure you&apos;re using Spring 3.0.7 that contains the referenced method in the necessary scope.&lt;/p&gt;</comment>
                            <comment id="74667" author="lshabbot" created="Wed, 11 Jan 2012 08:13:22 +0000"  >&lt;p&gt;Thanks.  Still getting the ClassCastException using the latest versions of Spring.  To be honest, I do not know who the bug belongs too (either Spring or Mongo&apos;s java driver). Here is the snippet of code  from Mongo&apos;s java driver QueryBuilder class: (Comments are added by me)&lt;/p&gt;

&lt;p&gt;@SuppressWarnings(&quot;unchecked&quot;)&lt;br/&gt;
    public QueryBuilder or( DBObject ... ors ){&lt;br/&gt;
        List l = (List)_query.get( &quot;$or&quot; );&lt;br/&gt;
        if ( l == null )&lt;/p&gt;
{
            l = new ArrayList();  //Using ArrayList, should they use BasicBSONList???
            _query.put( &quot;$or&quot; , l );
        }
&lt;p&gt;        for ( DBObject o : ors )&lt;br/&gt;
            l.add( o );&lt;br/&gt;
        return this;&lt;br/&gt;
    }&lt;/p&gt;

&lt;p&gt;Here is the snippet of code from Spring&apos;s QueryMapper class where the ClassCastException gets thrown&lt;/p&gt;

&lt;p&gt;BasicBSONList conditions = (BasicBSONList) value;  //ClassCastException Thrown&lt;br/&gt;
BasicBSONList newConditions = new BasicBSONList();&lt;br/&gt;
				Iterator&amp;lt;Object&amp;gt; iter = conditions.iterator();&lt;br/&gt;
				while (iter.hasNext()) &lt;/p&gt;
{
					newConditions.add(getMappedObject((DBObject) iter.next(), entity));
				}
&lt;p&gt;				value = newConditions;&lt;/p&gt;</comment>
                            <comment id="74672" author="olivergierke" created="Wed, 11 Jan 2012 11:20:41 +0000"  >&lt;p&gt;The issue seems to be originating from you using the MongoDB driver&apos;s &lt;tt&gt;QueryBuilder&lt;/tt&gt; instead of our &lt;tt&gt;Query&lt;/tt&gt; API. &lt;tt&gt;QueryMapper&lt;/tt&gt; had relied on &lt;tt&gt;Criteria&lt;/tt&gt; using &lt;tt&gt;BasicBSONList&lt;/tt&gt; in it&apos;s implementation of &lt;tt&gt;or(&#8230;)&lt;/tt&gt; and &lt;tt&gt;nor(&#8230;)&lt;/tt&gt; which doesn&apos;t hold true for &lt;tt&gt;QueryBuilder&lt;/tt&gt; which uses a plain &lt;tt&gt;ArrayList&lt;/tt&gt; internally.&lt;/p&gt;

&lt;p&gt;We now only cast the value to &lt;tt&gt;Iterable&lt;/tt&gt; which works fine now. I&apos;ve deployed the fix to the snapshot repo, so feel free to give it a try.&lt;/p&gt;</comment>
                            <comment id="74682" author="lshabbot" created="Wed, 11 Jan 2012 13:12:01 +0000"  >&lt;p&gt;Thanks.  It&apos;s all good.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="19284" name="file.zip" size="5189" author="lshabbot" created="Mon, 9 Jan 2012 14:35:14 +0000"/>
                            <attachment id="19294" name="stackTrace.txt" size="2168" author="lshabbot" created="Wed, 11 Jan 2012 06:40:39 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 9 Jan 2012 23:51:55 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10280" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>29013</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10182" key="com.atlassian.jira.toolkit:lastupdaterorcommenter">
                        <customfieldname>Last updater</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>tmarshall</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i033vj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18170</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10381" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Ranking</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>17530</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>