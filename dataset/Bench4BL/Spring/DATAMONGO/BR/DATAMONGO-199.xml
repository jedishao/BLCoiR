<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Thu Dec 22 15:02:50 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/DATAMONGO-199/DATAMONGO-199.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[DATAMONGO-199] Synchronisation during performance tests</title>
                <link>https://jira.spring.io/browse/DATAMONGO-199</link>
                <project id="10701" key="DATAMONGO">Spring Data MongoDB</project>
                    <description>&lt;p&gt;Hi, &lt;br/&gt;
During performance tests, I observed that several threads were in status &quot;blocked&quot;. Below, the stack:&lt;/p&gt;

&lt;p&gt;The tests were carried out with jmeter with read-only queries.&lt;/p&gt;

&lt;p&gt;&quot;&quot;http-bio-8080&quot;-exec-52&quot; - Thread t@115&lt;br/&gt;
   java.lang.Thread.State: BLOCKED&lt;br/&gt;
	at java.lang.reflect.Field.declaredAnnotations(Field.java:1013)&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;waiting to lock &amp;lt;27df34b4&amp;gt; (a java.lang.reflect.Field) owned by &quot;&quot;http-bio-8080&quot;-exec-31&quot; t@94&lt;br/&gt;
	at java.lang.reflect.Field.getAnnotation(Field.java:1000)&lt;br/&gt;
	at java.lang.reflect.AccessibleObject.isAnnotationPresent(AccessibleObject.java:168)&lt;br/&gt;
	at org.springframework.data.mapping.AnnotationBasedPersistentProperty.isTransient(AnnotationBasedPersistentProperty.java:74)&lt;br/&gt;
	at org.springframework.data.mapping.BasicPersistentEntity.doWithProperties(BasicPersistentEntity.java:111)&lt;br/&gt;
	at org.springframework.data.document.mongodb.convert.MappingMongoConverter.read(MappingMongoConverter.java:230)&lt;br/&gt;
	at org.springframework.data.document.mongodb.convert.MappingMongoConverter.read(MappingMongoConverter.java:174)&lt;br/&gt;
	at org.springframework.data.document.mongodb.convert.MappingMongoConverter.read(MappingMongoConverter.java:128)&lt;br/&gt;
	at org.springframework.data.document.mongodb.MongoTemplate$ReadDbObjectCallback.doWith(MongoTemplate.java:1655)&lt;br/&gt;
	at org.springframework.data.document.mongodb.MongoTemplate.executeFindMultiInternal(MongoTemplate.java:1426)&lt;br/&gt;
	at org.springframework.data.document.mongodb.MongoTemplate.doFind(MongoTemplate.java:1186)&lt;br/&gt;
	at org.springframework.data.document.mongodb.MongoTemplate.find(MongoTemplate.java:587)&lt;br/&gt;
	at org.springframework.data.document.mongodb.MongoTemplate.find(MongoTemplate.java:557)&lt;br/&gt;
	at $MongoOperations_1314237160b.find($MongoOperations_1314237160b.java)&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment>JVM SUN 1.6 / Tomcat 7.0.x</environment>
        <key id="40281">DATAMONGO-199</key>
            <summary>Synchronisation during performance tests</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://jira.spring.io/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="olivergierke">Oliver Gierke</assignee>
                                    <reporter username="lucas.pouzac.pro">Lucas POUZAC</reporter>
                        <labels>
                    </labels>
                <created>Tue, 19 Jul 2011 05:40:40 +0000</created>
                <updated>Mon, 25 Mar 2013 09:31:16 +0000</updated>
                            <resolved>Tue, 6 Dec 2011 04:46:47 +0000</resolved>
                                    <version>1.0 M3</version>
                                    <fixVersion>1.0 RC1</fixVersion>
                                    <component>Mapping</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                    <timeoriginalestimate seconds="0">0d</timeoriginalestimate>
                            <timeestimate seconds="0">0d</timeestimate>
                                        <comments>
                            <comment id="71778" author="lucas.pouzac.pro" created="Tue, 19 Jul 2011 07:52:05 +0000"  >&lt;p&gt;Same problem by an other path. It would probably manage a storage mapping / annotations on the entity, and avoid the reflection on each object to retrieve the same value. &lt;/p&gt;

&lt;p&gt;&quot;&quot;http-bio-8080&quot;-exec-166&quot; - Thread t@237&lt;br/&gt;
   java.lang.Thread.State: BLOCKED&lt;br/&gt;
	at java.lang.reflect.Field.declaredAnnotations(Field.java:1013)&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;waiting to lock &amp;lt;15d0d8b8&amp;gt; (a java.lang.reflect.Field) owned by &quot;&quot;http-bio-8080&quot;-exec-168&quot; t@239&lt;br/&gt;
	at java.lang.reflect.Field.getAnnotation(Field.java:1000)&lt;br/&gt;
	at org.springframework.data.document.mongodb.mapping.BasicMongoPersistentProperty.getFieldName(BasicMongoPersistentProperty.java:104)&lt;br/&gt;
	at org.springframework.data.document.mongodb.convert.MappingMongoConverter$2.doWithPersistentProperty(MappingMongoConverter.java:234)&lt;br/&gt;
	at org.springframework.data.document.mongodb.convert.MappingMongoConverter$2.doWithPersistentProperty(MappingMongoConverter.java:230)&lt;br/&gt;
	at org.springframework.data.mapping.BasicPersistentEntity.doWithProperties(BasicPersistentEntity.java:112)&lt;br/&gt;
	at org.springframework.data.document.mongodb.convert.MappingMongoConverter.read(MappingMongoConverter.java:230)&lt;br/&gt;
	at org.springframework.data.document.mongodb.convert.MappingMongoConverter.read(MappingMongoConverter.java:174)&lt;br/&gt;
	at org.springframework.data.document.mongodb.convert.MappingMongoConverter.read(MappingMongoConverter.java:128)&lt;br/&gt;
	at org.springframework.data.document.mongodb.MongoTemplate$ReadDbObjectCallback.doWith(MongoTemplate.java:1655)&lt;br/&gt;
	at org.springframework.data.document.mongodb.MongoTemplate.executeFindMultiInternal(MongoTemplate.java:1426)&lt;br/&gt;
	at org.springframework.data.document.mongodb.MongoTemplate.doFind(MongoTemplate.java:1186)&lt;br/&gt;
	at org.springframework.data.document.mongodb.MongoTemplate.find(MongoTemplate.java:587)&lt;br/&gt;
	at org.springframework.data.document.mongodb.MongoTemplate.find(MongoTemplate.java:557)&lt;br/&gt;
	at $MongoOperations_13142c979e9.find($MongoOperations_13142c979e9.java)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&quot;&quot;http-bio-8080&quot;-exec-169&quot; - Thread t@240&lt;br/&gt;
   java.lang.Thread.State: BLOCKED&lt;br/&gt;
	at java.lang.reflect.Field.declaredAnnotations(Field.java:1013)&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;waiting to lock &amp;lt;5ad19ff&amp;gt; (a java.lang.reflect.Field) owned by &quot;&quot;http-bio-8080&quot;-exec-159&quot; t@229&lt;br/&gt;
	at java.lang.reflect.Field.getAnnotation(Field.java:1000)&lt;br/&gt;
	at java.lang.reflect.AccessibleObject.isAnnotationPresent(AccessibleObject.java:168)&lt;br/&gt;
	at org.springframework.data.mapping.AnnotationBasedPersistentProperty.isIdProperty(AnnotationBasedPersistentProperty.java:83)&lt;br/&gt;
	at org.springframework.data.document.mongodb.mapping.BasicMongoPersistentProperty.isIdProperty(BasicMongoPersistentProperty.java:84)&lt;br/&gt;
	at org.springframework.data.document.mongodb.mapping.BasicMongoPersistentProperty.getFieldName(BasicMongoPersistentProperty.java:100)&lt;br/&gt;
	at org.springframework.data.document.mongodb.convert.MappingMongoConverter$2.doWithPersistentProperty(MappingMongoConverter.java:234)&lt;br/&gt;
	at org.springframework.data.document.mongodb.convert.MappingMongoConverter$2.doWithPersistentProperty(MappingMongoConverter.java:230)&lt;br/&gt;
	at org.springframework.data.mapping.BasicPersistentEntity.doWithProperties(BasicPersistentEntity.java:112)&lt;br/&gt;
	at org.springframework.data.document.mongodb.convert.MappingMongoConverter.read(MappingMongoConverter.java:230)&lt;br/&gt;
	at org.springframework.data.document.mongodb.convert.MappingMongoConverter.read(MappingMongoConverter.java:174)&lt;br/&gt;
	at org.springframework.data.document.mongodb.convert.MappingMongoConverter.read(MappingMongoConverter.java:128)&lt;br/&gt;
	at org.springframework.data.document.mongodb.MongoTemplate$ReadDbObjectCallback.doWith(MongoTemplate.java:1655)&lt;br/&gt;
	at org.springframework.data.document.mongodb.MongoTemplate.executeFindMultiInternal(MongoTemplate.java:1426)&lt;br/&gt;
	at org.springframework.data.document.mongodb.MongoTemplate.doFind(MongoTemplate.java:1186)&lt;br/&gt;
	at org.springframework.data.document.mongodb.MongoTemplate.find(MongoTemplate.java:587)&lt;br/&gt;
	at org.springframework.data.document.mongodb.MongoTemplate.find(MongoTemplate.java:557)&lt;br/&gt;
	at $MongoOperations_13142c979e9.find($MongoOperations_13142c979e9.java)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&quot;&quot;http-bio-8080&quot;-exec-157&quot; - Thread t@227&lt;br/&gt;
   java.lang.Thread.State: BLOCKED&lt;br/&gt;
	at java.lang.reflect.Field.declaredAnnotations(Field.java:1013)&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;waiting to lock &amp;lt;7eda940a&amp;gt; (a java.lang.reflect.Field) owned by &quot;&quot;http-bio-8080&quot;-exec-146&quot; t@216&lt;br/&gt;
	at java.lang.reflect.Field.getAnnotation(Field.java:1000)&lt;br/&gt;
	at java.lang.reflect.AccessibleObject.isAnnotationPresent(AccessibleObject.java:168)&lt;br/&gt;
	at org.springframework.data.document.mongodb.mapping.BasicMongoPersistentProperty.isAssociation(BasicMongoPersistentProperty.java:73)&lt;br/&gt;
	at org.springframework.data.mapping.BasicPersistentEntity.doWithProperties(BasicPersistentEntity.java:111)&lt;br/&gt;
	at org.springframework.data.document.mongodb.convert.MappingMongoConverter.read(MappingMongoConverter.java:230)&lt;br/&gt;
	at org.springframework.data.document.mongodb.convert.MappingMongoConverter.read(MappingMongoConverter.java:174)&lt;br/&gt;
	at org.springframework.data.document.mongodb.convert.MappingMongoConverter.read(MappingMongoConverter.java:128)&lt;br/&gt;
	at org.springframework.data.document.mongodb.MongoTemplate$ReadDbObjectCallback.doWith(MongoTemplate.java:1655)&lt;br/&gt;
	at org.springframework.data.document.mongodb.MongoTemplate.executeFindMultiInternal(MongoTemplate.java:1426)&lt;br/&gt;
	at org.springframework.data.document.mongodb.MongoTemplate.doFind(MongoTemplate.java:1186)&lt;br/&gt;
	at org.springframework.data.document.mongodb.MongoTemplate.find(MongoTemplate.java:587)&lt;br/&gt;
	at org.springframework.data.document.mongodb.MongoTemplate.find(MongoTemplate.java:557)&lt;br/&gt;
	at $MongoOperations_13142c979e9.find($MongoOperations_13142c979e9.java)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;...&lt;/p&gt;</comment>
                            <comment id="71781" author="mark.pollack" created="Tue, 19 Jul 2011 11:15:04 +0000"  >&lt;p&gt;Forgive my possible ignorance here, but BLOCKED isn&apos;t necessarily an invalid state, at the moment the stack trace was taken the thread was in the blocked state - to quote from Javadoc &quot;A thread in the blocked state is waiting for a monitor lock to enter a synchronized block/method or reenter a synchronized block/method after calling Object.wait.&quot;&lt;/p&gt;

&lt;p&gt;So as long as your tests complete just fine - no deadloc or other issues, then there is nothing to fix here.&lt;/p&gt;</comment>
                            <comment id="71783" author="lucas.pouzac.pro" created="Tue, 19 Jul 2011 13:25:02 +0000"  >&lt;p&gt;It&apos;s not an invalid state but this significantly degrades the performance of application.&lt;br/&gt;
In my performance tests, there is too much contention and this is related to the synchronisation in the spring-data library.&lt;/p&gt;

&lt;p&gt;While NoSQL solutions are expected to provide increased performance, it is unfortunate that the layer java wrapper can not be as good. &lt;img class=&quot;emoticon&quot; src=&quot;https://jira.spring.io/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Here&apos;s a fuller explanation of this problem: &lt;a href=&quot;http://www.ibm.com/developerworks/java/library/j-threads2/index.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.ibm.com/developerworks/java/library/j-threads2/index.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="71795" author="olivergierke" created="Mon, 25 Jul 2011 03:53:25 +0000"  >&lt;p&gt;Well, so what is the actual intent of this ticket? The stacktraces do not contain any synchonized code from our side. We cannot do anything about &lt;tt&gt;Field.getAnnotation()&lt;/tt&gt; using synchronization internally. The only thing we could do is caching the annotation information to work around repeated calls to the JDK method. If that&apos;s the case I&apos;d like to alter the ticket description to appropriately capture the intent.&lt;/p&gt;</comment>
                            <comment id="71801" author="lucas.pouzac.pro" created="Mon, 25 Jul 2011 05:30:29 +0000"  >&lt;p&gt;Yes exactly. Attached is a report of load tests performed (with web application test).&lt;/p&gt;</comment>
                            <comment id="71804" author="lucas.pouzac.pro" created="Mon, 25 Jul 2011 08:41:57 +0000"  >&lt;p&gt;Test report provided&lt;/p&gt;</comment>
                            <comment id="71899" author="olivergierke" created="Mon, 29 Aug 2011 08:41:37 +0000"  >&lt;p&gt;Attached JMeter results (unprofiled).&lt;/p&gt;</comment>
                            <comment id="71900" author="olivergierke" created="Mon, 29 Aug 2011 08:42:05 +0000"  >&lt;p&gt;Attached JMeter results (profiled).&lt;/p&gt;</comment>
                            <comment id="71901" author="olivergierke" created="Mon, 29 Aug 2011 08:42:29 +0000"  >&lt;p&gt;Added jVisualVM profiling results.&lt;/p&gt;</comment>
                            <comment id="71903" author="olivergierke" created="Mon, 29 Aug 2011 08:47:05 +0000"  >&lt;p&gt;Hi Lucas,&lt;/p&gt;

&lt;p&gt;I re-ran your JMeter performance tests on my Macbook (early 2010), 2.53Ghz, 8GB RAM in a tcServer 2.5 and a Mongo 1.8.2. Without the profiler enabled the JMeter test gets ~880 Requests/second answered on average. This we even see that number increasing once the requests requesting 500 results start. When running the tests with the jvisual profiler enabled numbers drop to 285 but that&apos;s probably due to the instrumentation code being executed.&lt;/p&gt;

&lt;p&gt;Bottom line is that I cannot seem to reproduce the significant performance decrease you seem to have identified. Also the profiling result shows most of the time spent actually reading the data from Mongo. Attached you&apos;ll find JMeter results for both runs (profiled and unprofiled) plus the profiling result.&lt;/p&gt;</comment>
                            <comment id="71904" author="lucas.pouzac.pro" created="Mon, 29 Aug 2011 09:04:46 +0000"  >&lt;p&gt;Hi Olivier, &lt;/p&gt;

&lt;p&gt;Data is correctly loaded ?&lt;br/&gt;
You try to reproduce with spring-data-mongodb 1.0-M3 ? &lt;br/&gt;
If you tried to reproduce with version 1.0-M4-SNAPSHOT, could you try to reproduce with version 1.0-M3 to ensure that the correction is properly integrated ?&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                            <comment id="71905" author="lucas.pouzac.pro" created="Mon, 29 Aug 2011 09:14:31 +0000"  >&lt;p&gt;I think the data are not properly loaded because the stream returned by mongodb is the same size (between 1 and 50 required item)&lt;/p&gt;

&lt;p&gt;sampler_label	                average_bytes&lt;br/&gt;
queryByCode1	                340.46&lt;br/&gt;
queryByCode1 - 500	        340.24&lt;br/&gt;
queryByCode2ExcludeCode1	346.39&lt;br/&gt;
queryByCode2ExcludeCode1 - 500	346.16&lt;br/&gt;
queryByCode3ExcludeCode1	345.34&lt;br/&gt;
queryByCode3ExcludeCode1 - 500	345.09&lt;/p&gt;</comment>
                            <comment id="71906" author="lucas.pouzac.pro" created="Mon, 29 Aug 2011 09:16:21 +0000"  >&lt;p&gt;Data not correctly loaded&lt;/p&gt;</comment>
                            <comment id="71913" author="olivergierke" created="Tue, 30 Aug 2011 07:49:31 +0000"  >&lt;p&gt;I simply ran your JMeter setup against your test web application. What do you exactly mean with &quot;data not correctly loaded&quot;? Would you mind checking it&apos;s correctly loaded for you? Any steps I might have missed when trying to reproduce the test run?&lt;/p&gt;</comment>
                            <comment id="71914" author="lucas.pouzac.pro" created="Tue, 30 Aug 2011 08:01:49 +0000"  >&lt;p&gt;Chapter 3.3 and 3.4 of are not correctly executed&lt;/p&gt;

&lt;p&gt;3.3 Create MongoDB Collection&lt;br/&gt;
Execute &lt;a href=&quot;http://$&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://$&lt;/a&gt;&lt;/p&gt;
{host}:${port}/${applicationName}/init to create and populate MongoDB&lt;br/&gt;
Collection.&lt;br/&gt;
To reset the base, execute &lt;a href=&quot;http://$&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://$&lt;/a&gt;{host}
&lt;p&gt;:$&lt;/p&gt;
{port}/${applicationName}/reinit.&lt;br/&gt;
Warning : After this action, Tomcat7 must be restarted, otherwise mongodb indexes won&apos;t&lt;br/&gt;
be created at the first query execution.&lt;br/&gt;
&lt;br/&gt;
3.4 Test installation&lt;br/&gt;
Execute &lt;a href=&quot;http://${host}:$&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://${host}:$&lt;/a&gt;{port}
&lt;p&gt;/$&lt;/p&gt;
{applicationName}
&lt;p&gt;/queryByCode1?&lt;br/&gt;
code1=0330630A&amp;amp;index=0&amp;amp;nresult=10&lt;br/&gt;
This query create indexes. If result is ok, Jmeter can be lauched.&lt;/p&gt;</comment>
                            <comment id="71912" author="olivergierke" created="Tue, 30 Aug 2011 22:36:57 +0000"  >&lt;p&gt;Another round of profiling. Although I see a significant decrease in the throughput rate (as there&apos;s now actually data being read and converted) the observations regarding queries returning 1 object VS. 50 stay the same. We spend 1.3% of the time in &lt;tt&gt;BasicMongoPersistentProperty.isIdProperty()&lt;/tt&gt; and 0.8% in &lt;tt&gt;BasicMongoPersistentProperty.getFieldName()&lt;/tt&gt;. So I&apos;ll compare this to a profiling run against M4 and add a caching wrapper to &lt;tt&gt;MongoMappingContext&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="71915" author="olivergierke" created="Wed, 31 Aug 2011 10:46:38 +0000"  >&lt;p&gt;Added &lt;tt&gt;CachingMongoPersistentProperty&lt;/tt&gt; to cache &lt;tt&gt;isIdProperty()&lt;/tt&gt; and &lt;tt&gt;getFieldName()&lt;/tt&gt; calls. Profiling results from my side do not show the metadata related methods in the top results anymore. Feel free to give the current snapshot a try on your side.&lt;/p&gt;</comment>
                            <comment id="71890" author="lucas.pouzac.pro" created="Fri, 2 Sep 2011 00:07:24 +0000"  >&lt;p&gt;Ok. I start a test from September 13. I Am currently on vacation.&lt;/p&gt;</comment>
                            <comment id="71919" author="olivergierke" created="Fri, 2 Sep 2011 00:26:55 +0000"  >&lt;p&gt;Then you shouldn&apos;t answer JIRA issues &lt;img class=&quot;emoticon&quot; src=&quot;https://jira.spring.io/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;. Please open another issue in case you still see significant problems as we&apos;ve just released M4. Enjoy your vacation!&lt;/p&gt;</comment>
                            <comment id="71936" author="lucas.pouzac.pro" created="Thu, 15 Sep 2011 07:20:57 +0000"  >&lt;p&gt;This bug isn&apos;t correctly resolved (NI = Not Implemented). I added CachingMongoPersistentProperty in attached file&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;org.springframework.data.mapping.AnnotationBasedPersistentProperty.isTransient() --&amp;gt; NI&lt;/li&gt;
	&lt;li&gt;org.springframework.data.mapping.AnnotationBasedPersistentProperty.isIdProperty() --&amp;gt; OK&lt;/li&gt;
	&lt;li&gt;org.springframework.data.mapping.AnnotationBasedPersistentProperty.isAssociation() --&amp;gt; NI&lt;/li&gt;
	&lt;li&gt;org.springframework.data.document.mongodb.mapping.BasicMongoPersistentProperty.isAssociation() --&amp;gt; NI&lt;/li&gt;
	&lt;li&gt;org.springframework.data.document.mongodb.mapping.BasicMongoPersistentProperty.getFieldName() --&amp;gt; OK&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="71937" author="lucas.pouzac.pro" created="Thu, 15 Sep 2011 07:22:15 +0000"  >&lt;p&gt;Atteched file with correction&lt;/p&gt;</comment>
                            <comment id="73441" author="olivergierke" created="Tue, 6 Dec 2011 04:46:46 +0000"  >&lt;p&gt;Re-closing this as fixed as we cache the methods identified as bottlenecks. We&apos;re not going to prematurely cache method calls without a performance impact.&lt;/p&gt;</comment>
                            <comment id="73443" author="lucas.pouzac.pro" created="Tue, 6 Dec 2011 05:11:15 +0000"  >&lt;p&gt;I did the test by patching spring-data. Caching method calls a significant beneficial effect on performance.&lt;br/&gt;
It&apos;s not premature, the following methods are identified as bottlenecks :&lt;/p&gt;

&lt;p/&gt;
&lt;div id=&quot;syntaxplugin&quot; class=&quot;syntaxplugin&quot; style=&quot;border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;&quot;&gt;
&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; border=&quot;0&quot; width=&quot;100%&quot; style=&quot;font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;&quot;&gt;
		&lt;tbody &gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;waiting to lock &amp;lt;27df34b4&amp;gt; (a java.lang.reflect.Field) owned by &quot;&quot;http-bio-8080&quot;-exec-31&quot; t@94&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt; at java.lang.reflect.Field.getAnnotation(Field.java:1000)&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt; at java.lang.reflect.AccessibleObject.isAnnotationPresent(AccessibleObject.java:168)&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt; at org.springframework.data.mapping.AnnotationBasedPersistentProperty.isTransient(AnnotationBasedPersistentProperty.java:74)&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&amp;nbsp;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;waiting to lock &amp;lt;15d0d8b8&amp;gt; (a java.lang.reflect.Field) owned by &quot;&quot;http-bio-8080&quot;-exec-168&quot; t@239&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt; at java.lang.reflect.Field.getAnnotation(Field.java:1000)&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt; at org.springframework.data.document.mongodb.mapping.BasicMongoPersistentProperty.getFieldName(BasicMongoPersistentProperty.java:104)&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&amp;nbsp;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;waiting to lock &amp;lt;5ad19ff&amp;gt; (a java.lang.reflect.Field) owned by &quot;&quot;http-bio-8080&quot;-exec-159&quot; t@229&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt; at java.lang.reflect.Field.getAnnotation(Field.java:1000)&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt; at java.lang.reflect.AccessibleObject.isAnnotationPresent(AccessibleObject.java:168)&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt; at org.springframework.data.mapping.AnnotationBasedPersistentProperty.isIdProperty(AnnotationBasedPersistentProperty.java:83)&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&amp;nbsp;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;waiting to lock &amp;lt;7eda940a&amp;gt; (a java.lang.reflect.Field) owned by &quot;&quot;http-bio-8080&quot;-exec-146&quot; t@216&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt; at java.lang.reflect.Field.getAnnotation(Field.java:1000)&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt; at java.lang.reflect.AccessibleObject.isAnnotationPresent(AccessibleObject.java:168)&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt; at org.springframework.data.document.mongodb.mapping.BasicMongoPersistentProperty.isAssociation(BasicMongoPersistentProperty.java:73)&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
			&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;p/&gt;

&lt;p&gt;In addition, a bug exists in the &lt;tt&gt;CachingMongoPersistentProperty&lt;/tt&gt; class&lt;/p&gt;

&lt;p/&gt;
&lt;div id=&quot;syntaxplugin&quot; class=&quot;syntaxplugin&quot; style=&quot;border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;&quot;&gt;
&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; border=&quot;0&quot; width=&quot;100%&quot; style=&quot;font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;&quot;&gt;
		&lt;tbody &gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: #008200; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;// Actually&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: gray; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;@Override&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: #006699; font-weight: bold; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;public&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt; String getFieldName() {&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #006699; font-weight: bold; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;if&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt; (&lt;/span&gt;&lt;span style=&quot;color: #006699; font-weight: bold; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;this&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;.fieldName == &lt;/span&gt;&lt;span style=&quot;color: #006699; font-weight: bold; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;null&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;) {&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #006699; font-weight: bold; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;this&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;.fieldName = &lt;/span&gt;&lt;span style=&quot;color: #006699; font-weight: bold; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;super&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;.getFieldName();&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt; }&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #006699; font-weight: bold; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;return&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #006699; font-weight: bold; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;super&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;.getFieldName();&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;}&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
			&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;p/&gt;
&lt;p&gt;but must be:&lt;/p&gt;

&lt;p/&gt;
&lt;div id=&quot;syntaxplugin&quot; class=&quot;syntaxplugin&quot; style=&quot;border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;&quot;&gt;
&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; border=&quot;0&quot; width=&quot;100%&quot; style=&quot;font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;&quot;&gt;
		&lt;tbody &gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: gray; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;@Override&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: #006699; font-weight: bold; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;public&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt; String getFieldName() {&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #006699; font-weight: bold; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;if&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt; (&lt;/span&gt;&lt;span style=&quot;color: #006699; font-weight: bold; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;this&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;.fieldName == &lt;/span&gt;&lt;span style=&quot;color: #006699; font-weight: bold; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;null&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;) {&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #006699; font-weight: bold; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;this&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;.fieldName = &lt;/span&gt;&lt;span style=&quot;color: #006699; font-weight: bold; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;super&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;.getFieldName();&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt; }&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #006699; font-weight: bold; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;return&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #006699; font-weight: bold; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;this&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;.fieldName;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;}&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
			&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;p/&gt;</comment>
                            <comment id="73455" author="olivergierke" created="Tue, 6 Dec 2011 05:53:47 +0000"  >&lt;p&gt;According to the profiling results above &lt;tt&gt;&#8230;.isIdProperty()&lt;/tt&gt; and &lt;tt&gt;&#8230;.getFieldName()&lt;/tt&gt; are the two most time consuming methods on issue &lt;tt&gt;BasicMongoPersistentProperty&lt;/tt&gt; and take up 2.2% of the execution. Beyond that no method calls show up in that performance test which makes the caching neglectable. Fixed the bug in &lt;tt&gt;CachingMongoPersistentProperty.getFieldName()&lt;/tt&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="18995" name="CachingMongoPersistentProperty.java" size="2818" author="lucas.pouzac.pro" created="Thu, 15 Sep 2011 07:22:15 +0000"/>
                            <attachment id="18985" name="profiling.csv" size="66599" author="olivergierke" created="Mon, 29 Aug 2011 08:42:29 +0000"/>
                            <attachment id="18988" name="profiling_new.csv" size="82225" author="olivergierke" created="Tue, 30 Aug 2011 22:36:57 +0000"/>
                            <attachment id="18960" name="spring-data-mongodb-performance-tests.tar.gz" size="1960243" author="lucas.pouzac.pro" created="Mon, 25 Jul 2011 05:30:29 +0000"/>
                            <attachment id="18982" name="summary.csv" size="1133" author="olivergierke" created="Mon, 29 Aug 2011 08:41:37 +0000"/>
                            <attachment id="18983" name="summary2.csv" size="996" author="olivergierke" created="Mon, 29 Aug 2011 08:42:05 +0000"/>
                            <attachment id="18984" name="summary_new.csv" size="1079" author="olivergierke" created="Tue, 30 Aug 2011 22:36:57 +0000"/>
                            <attachment id="18987" name="summary_new2.csv" size="1130" author="olivergierke" created="Tue, 30 Aug 2011 22:36:57 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 19 Jul 2011 11:15:04 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10280" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>28181</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10182" key="com.atlassian.jira.toolkit:lastupdaterorcommenter">
                        <customfieldname>Last updater</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>tmarshall</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i01yof:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>11495</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10381" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Ranking</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>11466</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>