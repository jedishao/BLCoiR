<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Thu Dec 22 17:57:51 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SPR-2986/SPR-2986.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SPR-2986] Unexpected AccessControlException throwed while using a XmlBeanFactory inside an Applet</title>
                <link>https://jira.spring.io/browse/SPR-2986</link>
                <project id="10000" key="SPR">Spring Framework</project>
                    <description>&lt;p&gt;Exception:   &lt;/p&gt;

&lt;p&gt;java.security.AccessControlException: access denied (java.util.PropertyPermission user.dir read)&lt;/p&gt;

&lt;p&gt;Cause:&lt;/p&gt;

&lt;p&gt;Currently I developing an applet that  uses XmlBeanFactory for infrastructure beans providing. &lt;br/&gt;
The reported problem arises when the XmlBeanFactory is configured and a bean is retrieved:&lt;/p&gt;

&lt;p&gt;                         XmlBeanFactory factory  = new XmlBeanFactory(new UrlResource(configurationFileURL relative to classloader))&lt;br/&gt;
                         Object object = beanFactory.getBean(someBeanId, beanClass);&lt;/p&gt;

&lt;p&gt;Note: I am using my own utility class to retrieve a URL from a classloader resource.&lt;/p&gt;

&lt;p&gt;It turns out that the XmlBeanFactory  will eventually call the resolveEntity method on the ResourceEntityResolver class. This method, in order to configure a systemRootUrl, does the following on line 76:&lt;/p&gt;

&lt;p&gt;                          String systemRootUrl = new File(&quot;&quot;).toURL().toString(); &lt;/p&gt;

&lt;p&gt;That&#180;s a problem since non-signed applet cannot read local file. (new File(&quot;&quot;).toURL() is a READ call).&lt;/p&gt;

&lt;p&gt;Sugestion:&lt;/p&gt;

&lt;p&gt;Replace the following code on ResourceEntityResolver , method resolveEntity: &lt;/p&gt;

&lt;p&gt;72&lt;br/&gt;
73			try {&lt;br/&gt;
74				String decodedSystemId = URLDecoder.decode(systemId);&lt;br/&gt;
75				String givenUrl = new URL(decodedSystemId).toString();&lt;br/&gt;
76				String systemRootUrl = new File(&quot;&quot;).toURL().toString();&lt;br/&gt;
77				// try relative to resource base if currently in system root&lt;br/&gt;
78				if (givenUrl.startsWith(systemRootUrl)) &lt;/p&gt;
{
79					resourcePath = givenUrl.substring(systemRootUrl.length());
80				}&lt;br/&gt;
81			}&lt;br/&gt;
82			catch (MalformedURLException ex) {
83				// no URL -&amp;gt; try relative to resource base
84				resourcePath = systemId;
85			}&lt;br/&gt;
&lt;br/&gt;
with &lt;br/&gt;
&lt;br/&gt;
72&lt;br/&gt;
73			try {&lt;br/&gt;
74				String decodedSystemId = URLDecoder.decode(systemId);&lt;br/&gt;
75				String givenUrl = new URL(decodedSystemId).toString();&lt;br/&gt;
76				String systemRootUrl = new File(&quot;&quot;).toURL().toString();&lt;br/&gt;
77				// try relative to resource base if currently in system root&lt;br/&gt;
78				if (givenUrl.startsWith(systemRootUrl)) {79					resourcePath = givenUrl.substring(systemRootUrl.length());80				}
&lt;p&gt;81			}&lt;br/&gt;
82			catch (MalformedURLException ex) &lt;/p&gt;
{
83				// no URL -&amp;gt; try relative to resource base
84				resourcePath = systemId;
85			}
&lt;p&gt;86			catch (AccessControlException ex) &lt;/p&gt;
{
87				//Error while trying to access priviledge resource
88				resourcePath = systemId;
89			}

&lt;p&gt;Original stack trace:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; CollectionFactory - JDK 1.4+ collections available&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; XmlBeanDefinitionReader - Loading XML bean definitions from URL &lt;span class=&quot;error&quot;&gt;&amp;#91;jar:http://rb000110:8080/gro/applets/app-gro_bayesiannet-applet.jar!/br/com/gro/causal/uc2401_redebayesiana/view/applet/registry-causal-applet.xml&amp;#93;&lt;/span&gt;&lt;br/&gt;
org.springframework.beans.factory.BeanDefinitionStoreException: Unexpected exception parsing XML document from URL &lt;span class=&quot;error&quot;&gt;&amp;#91;jar:http://rb000110:8080/gro/applets/app-gro_bayesiannet-applet.jar!/br/com/gro/causal/uc2401_redebayesiana/view/applet/registry-causal-applet.xml&amp;#93;&lt;/span&gt;; nested exception is java.security.AccessControlException: access denied (java.util.PropertyPermission user.dir read)&lt;br/&gt;
Caused by: java.security.AccessControlException: access denied (java.util.PropertyPermission user.dir read)&lt;br/&gt;
	at java.security.AccessControlContext.checkPermission(Unknown Source)&lt;br/&gt;
	at java.security.AccessController.checkPermission(Unknown Source)&lt;br/&gt;
	at java.lang.SecurityManager.checkPermission(Unknown Source)&lt;br/&gt;
	at java.lang.SecurityManager.checkPropertyAccess(Unknown Source)&lt;br/&gt;
	at java.lang.System.getProperty(Unknown Source)&lt;br/&gt;
	at java.io.Win32FileSystem.getUserPath(Unknown Source)&lt;br/&gt;
	at java.io.Win32FileSystem.resolve(Unknown Source)&lt;br/&gt;
	at java.io.File.getAbsolutePath(Unknown Source)&lt;br/&gt;
	at java.io.File.toURL(Unknown Source)&lt;br/&gt;
	at org.springframework.beans.factory.xml.ResourceEntityResolver.resolveEntity(ResourceEntityResolver.java:76)&lt;br/&gt;
	at com.sun.org.apache.xerces.internal.util.EntityResolverWrapper.resolveEntity(Unknown Source)&lt;br/&gt;
	at com.sun.org.apache.xerces.internal.impl.XMLEntityManager.resolveEntity(Unknown Source)&lt;br/&gt;
	at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaLoader.resolveDocument(Unknown Source)&lt;br/&gt;
	at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.findSchemaGrammar(Unknown Source)&lt;br/&gt;
	at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.handleStartElement(Unknown Source)&lt;br/&gt;
	at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.startElement(Unknown Source)&lt;br/&gt;
	at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanStartElement(Unknown Source)&lt;br/&gt;
	at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl$NSContentDispatcher.scanRootElementHook(Unknown Source)&lt;br/&gt;
	at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.dispatch(Unknown Source)&lt;br/&gt;
	at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)&lt;br/&gt;
	at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)&lt;br/&gt;
	at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)&lt;br/&gt;
	at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(Unknown Source)&lt;br/&gt;
	at com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(Unknown Source)&lt;br/&gt;
	at com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(Unknown Source)&lt;br/&gt;
	at org.springframework.beans.factory.xml.DefaultDocumentLoader.loadDocument(DefaultDocumentLoader.java:77)&lt;br/&gt;
	at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:405)&lt;br/&gt;
	at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:357)&lt;br/&gt;
	at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)&lt;br/&gt;
	at org.springframework.beans.factory.xml.XmlBeanFactory.&amp;lt;init&amp;gt;(XmlBeanFactory.java:73)&lt;br/&gt;
	at org.springframework.beans.factory.xml.XmlBeanFactory.&amp;lt;init&amp;gt;(XmlBeanFactory.java:61)&lt;br/&gt;
	at br.com.regerbanc.infra.core.registry.RegistryManager.setupRegistry(RegistryManager.java:142)&lt;/p&gt;</description>
            <key id="15767">SPR-2986</key>
            <summary>Unexpected AccessControlException throwed while using a XmlBeanFactory inside an Applet</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://jira.spring.io/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="juergen.hoeller">Juergen Hoeller</assignee>
                                    <reporter username="rudolf">Rodolfo Rothganger</reporter>
                        <labels>
                    </labels>
                <created>Wed, 27 Dec 2006 02:17:28 +0000</created>
                <updated>Tue, 19 Jun 2012 03:50:36 +0000</updated>
                            <resolved>Wed, 27 Dec 2006 08:33:51 +0000</resolved>
                                    <version>1.2.8</version>
                    <version>2.0.1</version>
                                    <fixVersion>2.0.2</fixVersion>
                    <fixVersion>1.2.9</fixVersion>
                                    <component>Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="21465" author="juergen.hoeller" created="Wed, 27 Dec 2006 08:33:38 +0000"  >&lt;p&gt;Thanks for pointing this out! I&apos;ve fixed this through a general &quot;catch (Exception ex) &quot; block for the entire system root URL check.&lt;/p&gt;

&lt;p&gt;Juergen&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10180" key="com.atlassian.jira.toolkit:dayslastcommented">
                        <customfieldname>Days since last comment</customfieldname>
                        <customfieldvalues>
                                        10 years, 1 week, 1 day ago
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 27 Dec 2006 08:33:38 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10181" key="com.atlassian.jira.toolkit:lastusercommented">
                        <customfieldname>Last commented by a User</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>false</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10182" key="com.atlassian.jira.toolkit:lastupdaterorcommenter">
                        <customfieldname>Last updater</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>tmarshall</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i00uz3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5063</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>