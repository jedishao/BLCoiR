<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Thu Dec 22 21:15:08 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SPR-5541/SPR-5541.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SPR-5541] MVC BindStatus does not interact with Web Flow&apos;s BindingModel</title>
                <link>https://jira.spring.io/browse/SPR-5541</link>
                <project id="10000" key="SPR">Spring Framework</project>
                    <description>&lt;p&gt;1) do some entries into the HTML form&lt;br/&gt;
2) do submit the form&lt;br/&gt;
3) do some changes to the form&apos;s entries on the server side&lt;br/&gt;
4) the changes are not displayed to the user, old unchanged entries remind in the form&lt;/p&gt;

&lt;p&gt;Probably the bug is here:&lt;/p&gt;

&lt;p&gt;in the Constructor of the org.springframework.web.servlet.support.BindStatus&lt;br/&gt;
it is&lt;br/&gt;
=&amp;gt;&lt;br/&gt;
...&lt;br/&gt;
this.errors = requestContext.getErrors(beanName, false);&lt;br/&gt;
if (this.errors != null) &lt;/p&gt;
{ ... } else { ... }
&lt;p&gt;}&lt;br/&gt;
=&amp;gt;&lt;br/&gt;
the requestContext.getErrors returns errors Object that is not null but empty so (this.errors.hasErrors() is false)&lt;br/&gt;
the else block is NEVER EXECUTED !!!&lt;/p&gt;

&lt;p&gt;The solution could be:&lt;br/&gt;
=&amp;gt;&lt;br/&gt;
if (this.errors != null &amp;amp;&amp;amp; this.errors.hasErrors()) &lt;/p&gt;
{ ... } else { ... }
&lt;p&gt;}&lt;br/&gt;
=&amp;gt;&lt;/p&gt;


&lt;p&gt;SEE ALSO: &lt;a href=&quot;http://jira.springframework.org/browse/SPR-5528&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://jira.springframework.org/browse/SPR-5528&lt;/a&gt;&lt;/p&gt;</description>
            <key id="25834">SPR-5541</key>
            <summary>MVC BindStatus does not interact with Web Flow&apos;s BindingModel</summary>
                <type id="4" iconUrl="https://jira.spring.io/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://jira.spring.io/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://jira.spring.io/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="juergen.hoeller">Juergen Hoeller</assignee>
                                    <reporter username="soleg">Oleg Soloviov</reporter>
                        <labels>
                    </labels>
                <created>Tue, 3 Mar 2009 02:02:33 +0000</created>
                <updated>Tue, 22 Sep 2015 16:49:59 +0000</updated>
                            <resolved>Tue, 22 Sep 2015 16:49:59 +0000</resolved>
                                    <version>2.5.6</version>
                    <version>3.0 M1</version>
                    <version>3.0 M2</version>
                    <version>3.0 M3</version>
                                                    <component>Web</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="42871" author="soleg" created="Tue, 3 Mar 2009 21:39:10 +0000"  >&lt;p&gt;=&amp;gt; old unchanged entries remind in the form&lt;br/&gt;
here I mean the HTML form, that is displayed by the &quot;spring jsp tags&quot;, the form java object has the changes&lt;/p&gt;</comment>
                            <comment id="44595" author="soleg" created="Wed, 3 Jun 2009 23:40:34 +0000"  >&lt;p&gt;Probably the solution can be like:&lt;/p&gt;

&lt;p&gt;in the org.springframework.webflow.mvc.view.BindingModel there is the method&lt;/p&gt;

&lt;p&gt;	public Object getFieldValue(String field) {&lt;br/&gt;
		if (mappingResults != null) {&lt;br/&gt;
			List results = mappingResults.getResults(new FieldErrorResult(field));&lt;br/&gt;
			if (!results.isEmpty()) &lt;/p&gt;
{
				MappingResult fieldError = (MappingResult) results.get(0);
				return fieldError.getOriginalValue();
			}
&lt;p&gt;		}&lt;br/&gt;
		return getFormattedValue(parseFieldExpression(field));&lt;br/&gt;
	}&lt;/p&gt;

&lt;p&gt;the mappingResults.getResults(new FieldErrorResult(field)) returns List of results, where the results are something like&lt;br/&gt;
&quot;errors 0 result success ...&quot;, so the results List is not empty but fieldError.getOriginalValue() is returned.&lt;/p&gt;

&lt;p&gt;I wrote a wrapper class of the org.springframework.web.servlet.support.RequestContext that has:&lt;br/&gt;
        /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;@see org.springframework.webflow.mvc.view.BindingModel#getFieldValue(String)&lt;br/&gt;
         */&lt;br/&gt;
        @Override&lt;br/&gt;
        public Errors getErrors(final String theName,&lt;br/&gt;
                final boolean theHtmlEscape) 
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {            final Errors errors = super.getErrors(theName, theHtmlEscape);            if (errors != null &amp;amp;&amp;amp; !errors.hasErrors()                    &amp;amp;&amp;amp; errors instanceof BindingModel) {
                // it should be called the getFormattedValue in this case
                ((BindingModel) errors).setMappingResults(null);
            }            return errors;        }&lt;/span&gt; &lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;



</comment>
                            <comment id="44596" author="soleg" created="Wed, 3 Jun 2009 23:43:45 +0000"  >&lt;p&gt;      &quot;Unknown macro&quot; was not expected .&lt;br/&gt;
once more again &lt;br/&gt;
I wrote a wrapper class of the org.springframework.web.servlet.support.RequestContext that has:&lt;/p&gt;


&lt;p&gt;public Errors getErrors(final String theName, final boolean theHtmlEscape) {&lt;/p&gt;

&lt;p&gt;    final Errors errors = super.getErrors(theName, theHtmlEscape);&lt;/p&gt;

&lt;p&gt;    if (errors != null &amp;amp;&amp;amp; !errors.hasErrors() &amp;amp;&amp;amp; errors instanceof BindingModel) &lt;/p&gt;
{ 

           // it should be called the getFormattedValue in this case 
   
          ((BindingModel) errors).setMappingResults(null); }
&lt;p&gt; return errors; &lt;/p&gt;

&lt;p&gt;}&lt;/p&gt;</comment>
                            <comment id="44598" author="soleg" created="Wed, 3 Jun 2009 23:47:30 +0000"  >&lt;p&gt;public Errors getErrors(final String theName, final boolean theHtmlEscape) {&lt;/p&gt;

&lt;p&gt;final Errors errors = super.getErrors(theName, theHtmlEscape);&lt;/p&gt;

&lt;p&gt;if (errors != null &amp;amp;&amp;amp; !errors.hasErrors() &amp;amp;&amp;amp; errors instanceof BindingModel) &lt;/p&gt;
{ 

((BindingModel) errors).setMappingResults(null); }
&lt;p&gt; return errors;&lt;/p&gt;

&lt;p&gt;}&lt;/p&gt;

&lt;p&gt;return errors;&lt;/p&gt;

&lt;p&gt;}&lt;/p&gt;</comment>
                            <comment id="44672" author="juergen.hoeller" created="Mon, 8 Jun 2009 02:14:43 +0000"  >&lt;p&gt;Keith, this seems to be related to MVC and Web Flow binding interaction... something to consider for our 3.0 binding unification.&lt;/p&gt;

&lt;p&gt;Juergen&lt;/p&gt;</comment>
                            <comment id="51911" author="soleg" created="Wed, 10 Mar 2010 20:49:16 +0000"  >&lt;p&gt;Again to BindingModel the Method getFieldValue:&lt;/p&gt;



&lt;p&gt;public Object getFieldValue(String field) {&lt;/p&gt;

&lt;p&gt; if (mappingResults != null) {&lt;/p&gt;

&lt;p&gt;   List results = mappingResults.getResults(new FieldErrorReult(field));&lt;/p&gt;

&lt;p&gt;    if (!results.isEmpty()) &lt;/p&gt;
{

            /* Thete is ONLY one element with text &quot;error 0 result success&quot; */

            MappingResult fieldError = (MappingResult) results.get(0);

            return fieldError.getOriginalValue();

    }

&lt;p&gt;  }&lt;/p&gt;

&lt;p&gt;  return getFormattedValue(parseFieldExpression(field));&lt;br/&gt;
}&lt;/p&gt;



&lt;p&gt;so, the mappingResults.getResults(new FieldErrorReult(field)) gives always the Results-List back that is not empty bat has only thext &quot;error 0 result success&quot;&lt;/p&gt;

</comment>
                            <comment id="70046" author="vnadgir" created="Fri, 2 Sep 2011 07:41:03 +0000"  >&lt;p&gt;This issue is stopping the use of form backing object with velocity templates. Is it possible to increase the priority of this issue? Any chance this will be back-ported?&lt;/p&gt;</comment>
                            <comment id="70047" author="vnadgir" created="Fri, 2 Sep 2011 07:42:39 +0000"  >&lt;p&gt;I am willing to offer a hand in fixing this.&lt;/p&gt;</comment>
                            <comment id="119585" author="juergen.hoeller" created="Tue, 22 Sep 2015 16:49:59 +0000"  >&lt;p&gt;Closing groups of outdated issues. Please reopen if still relevant.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="25795">SPR-5528</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10180" key="com.atlassian.jira.toolkit:dayslastcommented">
                        <customfieldname>Days since last comment</customfieldname>
                        <customfieldvalues>
                                        1 year, 13 weeks, 2 days ago
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 8 Jun 2009 02:14:43 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10181" key="com.atlassian.jira.toolkit:lastusercommented">
                        <customfieldname>Last commented by a User</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>false</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10182" key="com.atlassian.jira.toolkit:lastupdaterorcommenter">
                        <customfieldname>Last updater</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>juergen.hoeller</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i00i1z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2970</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10120" key="com.atlassian.jira.plugin.system.customfieldtypes:url">
                        <customfieldname>Reference URL</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[http://forum.springsource.org/showthread.php?t=68273]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>