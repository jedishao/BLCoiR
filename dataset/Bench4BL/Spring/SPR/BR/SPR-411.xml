<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Thu Dec 22 19:54:08 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SPR-411/SPR-411.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SPR-411] OpenSessionInViewFilter plus CMT not handled propertly by SessionFactoryUtils for existing trans</title>
                <link>https://jira.spring.io/browse/SPR-411</link>
                <project id="10000" key="SPR">Spring Framework</project>
                    <description>&lt;p&gt;Juergen,&lt;/p&gt;

&lt;p&gt;Can you see this:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://forum.springframework.org/viewtopic.php?t=1406&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://forum.springframework.org/viewtopic.php?t=1406&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Looking at the current implementation of getJtaSynchronizedSession in SessionFactoryUtils, unless I&apos;m mistaken the code is wrong, as it can not handle the case of an existing thread-bound session (as would come from the OSIV filter). In this case, the check for an active tx will match, but there won&apos;t be a session bound to the tx key, so the function will return null, not the existing session, and a new session will end up being created...&lt;/p&gt;

&lt;p&gt;As I read this code now, it will work fine for the case that a new Session needs to be created and bound to the JTA tx, and it will work fine for the case that a subsequent session request is able to pick up this session bound to the tx, so the only issue is for an existing session created outside of the JTA tx...&lt;/p&gt;</description>
            <key id="10674">SPR-411</key>
            <summary>OpenSessionInViewFilter plus CMT not handled propertly by SessionFactoryUtils for existing trans</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://jira.spring.io/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="juergen.hoeller">Juergen Hoeller</assignee>
                                    <reporter username="colin.sampaleanu">Colin Sampaleanu</reporter>
                        <labels>
                    </labels>
                <created>Wed, 20 Oct 2004 02:47:34 +0000</created>
                <updated>Thu, 21 Oct 2004 03:52:07 +0000</updated>
                            <resolved>Thu, 21 Oct 2004 03:52:07 +0000</resolved>
                                    <version>1.1.1</version>
                                    <fixVersion>1.1.2</fixVersion>
                                    <component>Data</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="11321" author="juergen.hoeller" created="Thu, 21 Oct 2004 03:52:07 +0000"  >&lt;p&gt;Essentially, this scenario - i.e. OpenSessionInViewFilter with plain JTA and a specified Hibernate TransactionManagerLookup - wasn&apos;t supported before.&lt;/p&gt;

&lt;p&gt;The main problem here is that our plain JTA synchronization works with suspended JTA transactions, through registering Transaction-specific Sessions in a single SessionHolder - if a Hibernate TransactionManagerLookup is specified. This behavior was unfortunately not compatible with OpenSessionInViewFilter.&lt;/p&gt;

&lt;p&gt;I&apos;ve added corresponding JTA synchronization code, which is a bit tricky in the details but does work with OpenSessionInViewFilter/Interceptor and plain JTA transactions (or Spring&apos;s JtaTransactionManager with SYNCHRONIZATION_NEVER).&lt;/p&gt;

&lt;p&gt;I&apos;ve tested this against Resin; would be good to test it against other servers too. Of course, there are also corresponding test cases.&lt;/p&gt;

&lt;p&gt;Juergen&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10180" key="com.atlassian.jira.toolkit:dayslastcommented">
                        <customfieldname>Days since last comment</customfieldname>
                        <customfieldvalues>
                                        12 years, 11 weeks ago
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 21 Oct 2004 03:52:07 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10181" key="com.atlassian.jira.toolkit:lastusercommented">
                        <customfieldname>Last commented by a User</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>false</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10182" key="com.atlassian.jira.toolkit:lastupdaterorcommenter">
                        <customfieldname>Last updater</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>tmarshall</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i01fof:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>8417</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>