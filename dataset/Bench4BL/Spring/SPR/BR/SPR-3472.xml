<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Thu Dec 22 21:20:51 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SPR-3472/SPR-3472.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SPR-3472] Bad interactions betwen advice when one binds the original method parameters and one does not.</title>
                <link>https://jira.spring.io/browse/SPR-3472</link>
                <project id="10000" key="SPR">Spring Framework</project>
                    <description>&lt;p&gt;Repeated from my original forum post: (&lt;a href=&quot;http://forum.springframework.org/showthread.php?t=38619&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://forum.springframework.org/showthread.php?t=38619&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;We have two pieces of advice that we would like to execute &quot;around&quot; a service method. The service method takes a single parameter.&lt;/p&gt;

&lt;p&gt;The first piece of advice (AdviceA in this example) wants to capture all of the methods in the class. It does not care about the parameters passed into those methods.&lt;/p&gt;

&lt;p&gt;The second piece of advice (AdviceB in this example) wants to capture a specific method. It does care about the parameter. It wants to record this transaction into the logs if certain criteria are met.&lt;/p&gt;

&lt;p&gt;This was all working fine in spring 2.0.2. We recently attempted to upgrade to 2.0.5, and we ran into some failures. We backed off the versions and determined the root cause appears to be a change introduced with 2.0.3.&lt;/p&gt;

&lt;p&gt;Specifically, we&apos;re receive this error immediately after calling proceed() from the first piece of advice:&lt;/p&gt;

&lt;p&gt;Exception in thread &quot;main&quot; java.lang.IllegalStateException: Required to bind 2 arguments, but only bound 1 (JoinPointMatch was NOT bound in invocation)&lt;/p&gt;

&lt;p&gt;It seems worth noting that either of these pieces of advice will execute just fine if they are allowed to execute alone. It is only when &lt;b&gt;both&lt;/b&gt; pieces of advice are applied that we run into this issue.&lt;/p&gt;

&lt;p&gt;I&apos;ve managed to replicate this behavior in a very small test. I&apos;ll attempt to attach that to this bug (if i&apos;m allowed to do that sort of thing).&lt;/p&gt;</description>
            <key id="16812">SPR-3472</key>
            <summary>Bad interactions betwen advice when one binds the original method parameters and one does not.</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://jira.spring.io/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="juergen.hoeller">Juergen Hoeller</assignee>
                                    <reporter username="tomdewire">Tom DeWire</reporter>
                        <labels>
                    </labels>
                <created>Fri, 11 May 2007 03:16:59 +0000</created>
                <updated>Tue, 19 Jun 2012 03:50:32 +0000</updated>
                            <resolved>Sun, 20 May 2007 09:03:06 +0000</resolved>
                                    <version>2.0.3</version>
                    <version>2.0.4</version>
                    <version>2.0.5</version>
                                    <fixVersion>2.0.6</fixVersion>
                    <fixVersion>2.1 M2</fixVersion>
                                    <component>Core:AOP</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="23656" author="tomdewire" created="Fri, 11 May 2007 03:19:54 +0000"  >&lt;p&gt;A very small example demonstrating the conditions that cause this failure.&lt;/p&gt;</comment>
                            <comment id="23690" author="tomdewire" created="Mon, 14 May 2007 03:50:35 +0000"  >&lt;p&gt;Cleaned up the test case a bit to (hopefully) eliminate any red herrings. &lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Maven was resolving dependencies different than those supplied with the spring release.&lt;/li&gt;
	&lt;li&gt;Removed several of the needless jdbc, hibernate, etc dependencies.&lt;/li&gt;
	&lt;li&gt;Slightly altered the aspect pointcut to represent correct syntax.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="23785" author="juergen.hoeller" created="Sun, 20 May 2007 09:03:06 +0000"  >&lt;p&gt;This was caused by an optimization in ReflectiveMethodInvocation&apos;s user attribute handling, and the lack of a test case for &lt;b&gt;multiple&lt;/b&gt; advices with parameter binding...&lt;/p&gt;

&lt;p&gt;ReflectiveMethodInvocation always uses a shared user attribute Map in clones, for proper binding of multiple advices.&lt;/p&gt;

&lt;p&gt;This fix will be released in 2.1 M2 (scheduled for May 31st) and should be available in the next nightly snapshot already. It will also be backported to 2.0.6 (due in mid June).&lt;/p&gt;

&lt;p&gt;Juergen&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="16933">SPR-3519</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12595" name="aop-test-dependencies-corrected.zip" size="13440" author="tomdewire" created="Mon, 14 May 2007 03:50:35 +0000"/>
                            <attachment id="12591" name="aop-test.zip" size="13265" author="tomdewire" created="Fri, 11 May 2007 03:19:54 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10180" key="com.atlassian.jira.toolkit:dayslastcommented">
                        <customfieldname>Days since last comment</customfieldname>
                        <customfieldvalues>
                                        9 years, 32 weeks, 4 days ago
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 20 May 2007 09:03:06 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10181" key="com.atlassian.jira.toolkit:lastusercommented">
                        <customfieldname>Last commented by a User</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>false</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10182" key="com.atlassian.jira.toolkit:lastupdaterorcommenter">
                        <customfieldname>Last updater</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>tmarshall</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i00u5b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4929</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>