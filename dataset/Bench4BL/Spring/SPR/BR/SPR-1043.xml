<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Thu Dec 22 19:35:16 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SPR-1043/SPR-1043.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SPR-1043] Custom Property Editor not applied to &quot;typed&quot; values in map</title>
                <link>https://jira.spring.io/browse/SPR-1043</link>
                <project id="10000" key="SPR">Spring Framework</project>
                    <description>&lt;p&gt;I want to configure a &amp;lt;map&amp;gt; element in my applicationContext.xml where the entry values have to be converted to a specific type&lt;/p&gt;

&lt;p&gt;&amp;lt;bean name=&quot;map&quot; &lt;br/&gt;
  class=&quot;org.springframework.beans.factory.config.MapFactoryBean&quot;&amp;gt;&lt;br/&gt;
  &amp;lt;property name=&quot;sourceMap&quot;&amp;gt;&lt;br/&gt;
    &amp;lt;map&amp;gt;&lt;br/&gt;
      &amp;lt;entry key=&quot;myDate&quot;&amp;gt;&lt;br/&gt;
        &amp;lt;value type=&quot;java.util.Date&quot;&amp;gt;2005-01-01&amp;lt;/value&amp;gt;&lt;br/&gt;
      &amp;lt;/entry&amp;gt;&lt;br/&gt;
    &amp;lt;/map&amp;gt;&lt;br/&gt;
  &amp;lt;/property&amp;gt;&lt;br/&gt;
&amp;lt;/bean&amp;gt;&lt;/p&gt;

&lt;p&gt;I have declared a CustomDateEditor for the java.util.Date type in the application context via the CustomEditorConfigurer.  However, when the application context is loaded I get the following exception: -&lt;/p&gt;

&lt;p&gt;Exception in thread &quot;main&quot; org.springframework.beans.factory.BeanCreationException: Error creating bean with name &apos;map&apos; defined in class path resource &lt;span class=&quot;error&quot;&gt;&amp;#91;applicationContext.xml&amp;#93;&lt;/span&gt;: Error converting typed String value for sourceMap&lt;span class=&quot;error&quot;&gt;&amp;#91;myDate&amp;#93;&lt;/span&gt;; nested exception is org.springframework.beans.TypeMismatchException: Failed to convert property value of type &lt;span class=&quot;error&quot;&gt;&amp;#91;java.lang.String&amp;#93;&lt;/span&gt; to required type &lt;span class=&quot;error&quot;&gt;&amp;#91;java.util.Date&amp;#93;&lt;/span&gt;&lt;br/&gt;
org.springframework.beans.TypeMismatchException: Failed to convert property value of type &lt;span class=&quot;error&quot;&gt;&amp;#91;java.lang.String&amp;#93;&lt;/span&gt; to required type &lt;span class=&quot;error&quot;&gt;&amp;#91;java.util.Date&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.springframework.beans.BeanWrapperImpl.doTypeConversionIfNecessary(BeanWrapperImpl.java:1040)&lt;br/&gt;
	at org.springframework.beans.BeanWrapperImpl.doTypeConversionIfNecessary(BeanWrapperImpl.java:917)&lt;br/&gt;
	at org.springframework.beans.factory.support.AbstractBeanFactory.doTypeConversionIfNecessary(AbstractBeanFactory.java:601)&lt;br/&gt;
	at org.springframework.beans.factory.support.AbstractBeanFactory.doTypeConversionIfNecessary(AbstractBeanFactory.java:581)&lt;br/&gt;
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:123)&lt;br/&gt;
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveManagedMap(BeanDefinitionValueResolver.java:225)&lt;br/&gt;
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:117)&lt;br/&gt;
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:891)&lt;br/&gt;
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:707)&lt;br/&gt;
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:316)&lt;br/&gt;
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:222)&lt;br/&gt;
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:146)&lt;br/&gt;
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:271)&lt;br/&gt;
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:310)&lt;br/&gt;
	at org.springframework.context.support.ClassPathXmlApplicationContext.&amp;lt;init&amp;gt;(ClassPathXmlApplicationContext.java:80)&lt;br/&gt;
	at org.springframework.context.support.ClassPathXmlApplicationContext.&amp;lt;init&amp;gt;(ClassPathXmlApplicationContext.java:65)&lt;br/&gt;
	at org.springframework.context.support.ClassPathXmlApplicationContext.&amp;lt;init&amp;gt;(ClassPathXmlApplicationContext.java:56)&lt;span class=&quot;error&quot;&gt;&amp;#91;/code&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;Spring is only applying the default property editors when converting the &quot;TypedStringValue&quot;.&lt;/p&gt;

&lt;p&gt;e.g. line 123 of BeanDefinitionValueResolver.java invokes the 2 parameter version of AbstractBeanFactory.doTypeConversionIfNecessary, which creates a new BeanWrapperImpl but does not register the customEditors previously setup in the bean factory.&lt;/p&gt;</description>
            <key id="11736">SPR-1043</key>
            <summary>Custom Property Editor not applied to &quot;typed&quot; values in map</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://jira.spring.io/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="juergen.hoeller">Juergen Hoeller</assignee>
                                    <reporter username="dallas">Dallas Hopewell</reporter>
                        <labels>
                    </labels>
                <created>Tue, 14 Jun 2005 19:36:29 +0000</created>
                <updated>Mon, 27 Jun 2005 12:54:58 +0000</updated>
                            <resolved>Mon, 27 Jun 2005 12:54:58 +0000</resolved>
                                    <version>1.2.1</version>
                                    <fixVersion>1.2.2</fixVersion>
                                    <component>Core</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13553" author="dallas" created="Tue, 14 Jun 2005 19:37:24 +0000"  >&lt;p&gt;Example application context showing the problem&lt;/p&gt;</comment>
                            <comment id="13667" author="jmelby" created="Sun, 26 Jun 2005 09:37:09 +0000"  >&lt;p&gt;I am having the same problem with a &amp;lt;set&amp;gt;. Debugging through it, it seems that the BeanWrapperImpl used to resolve the properties on the set does not have access to the custom editors (customEditors == null). Making the property an array UserRights[] works, but I&apos;d prefer to use a collection.&lt;/p&gt;

&lt;p&gt;    &amp;lt;bean id=&quot;customEditorConfigurer&quot; class=&quot;org.springframework.beans.factory.config.CustomEditorConfigurer&quot;&amp;gt;&lt;br/&gt;
        &amp;lt;property name=&quot;customEditors&quot;&amp;gt;&lt;br/&gt;
            &amp;lt;map&amp;gt;&lt;br/&gt;
                &amp;lt;entry key=&quot;com.dreamlizard.elosha.constants.UserRights&quot;&amp;gt;&lt;br/&gt;
                    &amp;lt;bean id=&quot;userRightsEditor&quot; class=&quot;com.dreamlizard.miles.beans.EnumPropertyEditor&quot;&amp;gt;&lt;br/&gt;
                        &amp;lt;property name=&quot;enumClass&quot;&amp;gt;&lt;br/&gt;
                            &amp;lt;value&amp;gt;com.dreamlizard.elosha.constants.UserRights&amp;lt;/value&amp;gt;&lt;br/&gt;
                        &amp;lt;/property&amp;gt;&lt;br/&gt;
                    &amp;lt;/bean&amp;gt;&lt;br/&gt;
                &amp;lt;/entry&amp;gt;&lt;br/&gt;
            &amp;lt;/map&amp;gt;&lt;br/&gt;
        &amp;lt;/property&amp;gt;&lt;br/&gt;
    &amp;lt;/bean&amp;gt;&lt;/p&gt;

&lt;p&gt;    &amp;lt;bean id=&quot;userSecurityInterceptor&quot; class=&quot;com.dreamlizard.elosha.interceptor.SecurityHandlerInterceptor&quot;&amp;gt;&lt;br/&gt;
        &amp;lt;property name=&quot;userRightsSet&quot;&amp;gt;&lt;br/&gt;
            &amp;lt;set&amp;gt;&lt;br/&gt;
                &amp;lt;value type=&quot;com.dreamlizard.elosha.constants.UserRights&quot;&amp;gt;USER&amp;lt;/value&amp;gt;&lt;br/&gt;
            &amp;lt;/set&amp;gt;&lt;br/&gt;
        &amp;lt;/property&amp;gt;&lt;br/&gt;
        &amp;lt;property name=&quot;redirectUrl&quot;&amp;gt;&lt;br/&gt;
            &amp;lt;value&amp;gt;/login.url&amp;lt;/value&amp;gt;&lt;br/&gt;
        &amp;lt;/property&amp;gt;&lt;br/&gt;
    &amp;lt;/bean&amp;gt;&lt;/p&gt;

&lt;p&gt;Exception:&lt;/p&gt;

&lt;p&gt;org.springframework.beans.factory.BeanCreationException: Error creating bean with name &apos;userSecurityInterceptor&apos; defined in ServletContext resource &lt;span class=&quot;error&quot;&gt;&amp;#91;/WEB-INF/elosha-servlet.xml&amp;#93;&lt;/span&gt;: Error converting typed String value for userRightsSet&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;; nested exception is org.springframework.beans.TypeMismatchException: Failed to convert property value of type &lt;span class=&quot;error&quot;&gt;&amp;#91;java.lang.String&amp;#93;&lt;/span&gt; to required type &lt;span class=&quot;error&quot;&gt;&amp;#91;com.dreamlizard.elosha.constants.UserRights&amp;#93;&lt;/span&gt;&lt;br/&gt;
org.springframework.beans.TypeMismatchException: Failed to convert property value of type &lt;span class=&quot;error&quot;&gt;&amp;#91;java.lang.String&amp;#93;&lt;/span&gt; to required type &lt;span class=&quot;error&quot;&gt;&amp;#91;com.dreamlizard.elosha.constants.UserRights&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.springframework.beans.BeanWrapperImpl.doTypeConversionIfNecessary(BeanWrapperImpl.java:1035)&lt;/p&gt;</comment>
                            <comment id="13668" author="jmelby" created="Sun, 26 Jun 2005 10:12:38 +0000"  >&lt;p&gt;Update... I found that using an array UserRights[] only works when you have exactly one value and don&apos;t group them into a &amp;lt;list&amp;gt;, making this a more serious issue, in my view since the workaround is ugly--accepting a String array or list in your bean and converting their types manually there.&lt;/p&gt;</comment>
                            <comment id="13692" author="juergen.hoeller" created="Mon, 27 Jun 2005 12:54:58 +0000"  >&lt;p&gt;Thanks for the report! Indeed, AbstractBeanFactory needs to initialize the BeanWrapper with its custom editors in this case as well. I&apos;ve fixed this for Spring 1.2.2.&lt;/p&gt;

&lt;p&gt;Juergen&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="10796" name="applicationContext.xml" size="1282" author="dallas" created="Tue, 14 Jun 2005 19:37:24 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10180" key="com.atlassian.jira.toolkit:dayslastcommented">
                        <customfieldname>Days since last comment</customfieldname>
                        <customfieldvalues>
                                        11 years, 27 weeks, 3 days ago
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 26 Jun 2005 09:37:09 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10181" key="com.atlassian.jira.toolkit:lastusercommented">
                        <customfieldname>Last commented by a User</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>false</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10182" key="com.atlassian.jira.toolkit:lastupdaterorcommenter">
                        <customfieldname>Last updater</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>tmarshall</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i04wrj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>28682</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>