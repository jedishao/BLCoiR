<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Thu Dec 22 21:36:56 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SPR-13829/SPR-13829.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SPR-13829] Regression: Spring 4.2.4 fails to load configuration class on Google App Engine</title>
                <link>https://jira.spring.io/browse/SPR-13829</link>
                <project id="10000" key="SPR">Spring Framework</project>
                    <description>&lt;p&gt;Spring 4.2.4 fails to load a configuration class due to a security exception (see below).&lt;br/&gt;
4.2.3 is not affected by this bug.&lt;/p&gt;

&lt;p&gt;java.lang.IllegalStateException: Cannot load configuration class: org.springframework.web.servlet.config.annotation.DelegatingWebMvcConfiguration&lt;br/&gt;
	at org.springframework.context.annotation.ConfigurationClassPostProcessor.enhanceConfigurationClasses(ConfigurationClassPostProcessor.java:410)&lt;br/&gt;
	at org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanFactory(ConfigurationClassPostProcessor.java:263)&lt;br/&gt;
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:284)&lt;br/&gt;
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:130)&lt;br/&gt;
	at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:678)&lt;br/&gt;
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:520)&lt;br/&gt;
	at org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:668)&lt;br/&gt;
	at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:634)&lt;br/&gt;
	at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:682)&lt;br/&gt;
	at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:553)&lt;br/&gt;
	at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:494)&lt;br/&gt;
	at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:136)&lt;br/&gt;
	at javax.servlet.GenericServlet.init(GenericServlet.java:212)&lt;br/&gt;
	at org.mortbay.jetty.servlet.ServletHolder.initServlet(ServletHolder.java:440)&lt;br/&gt;
	at org.mortbay.jetty.servlet.ServletHolder.getServlet(ServletHolder.java:339)&lt;br/&gt;
	at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:487)&lt;br/&gt;
	at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)&lt;br/&gt;
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:316)&lt;br/&gt;
	at org.springframework.security.web.authentication.preauth.AbstractPreAuthenticatedProcessingFilter.doFilter(AbstractPreAuthenticatedProcessingFilter.java:116)&lt;br/&gt;
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330)&lt;br/&gt;
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:64)&lt;br/&gt;
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)&lt;br/&gt;
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330)&lt;br/&gt;
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:213)&lt;br/&gt;
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:176)&lt;br/&gt;
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)&lt;br/&gt;
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:262)&lt;br/&gt;
	at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)&lt;br/&gt;
	at com.google.appengine.api.socket.dev.DevSocketFilter.doFilter(DevSocketFilter.java:74)&lt;br/&gt;
	at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)&lt;br/&gt;
	at com.google.appengine.tools.development.ResponseRewriterFilter.doFilter(ResponseRewriterFilter.java:128)&lt;br/&gt;
	at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)&lt;br/&gt;
	at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:34)&lt;br/&gt;
	at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)&lt;br/&gt;
	at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:63)&lt;br/&gt;
	at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)&lt;br/&gt;
	at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)&lt;br/&gt;
	at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)&lt;br/&gt;
	at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:125)&lt;br/&gt;
	at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)&lt;br/&gt;
	at com.google.appengine.tools.development.DevAppServerModulesFilter.doDirectRequest(DevAppServerModulesFilter.java:366)&lt;br/&gt;
	at com.google.appengine.tools.development.DevAppServerModulesFilter.doDirectModuleRequest(DevAppServerModulesFilter.java:349)&lt;br/&gt;
	at com.google.appengine.tools.development.DevAppServerModulesFilter.doFilter(DevAppServerModulesFilter.java:116)&lt;br/&gt;
	at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)&lt;br/&gt;
	at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)&lt;br/&gt;
	at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)&lt;br/&gt;
	at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)&lt;br/&gt;
	at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)&lt;br/&gt;
	at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)&lt;br/&gt;
	at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:98)&lt;br/&gt;
	at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)&lt;br/&gt;
	at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:512)&lt;br/&gt;
	at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)&lt;br/&gt;
	at org.mortbay.jetty.Server.handle(Server.java:326)&lt;br/&gt;
	at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)&lt;br/&gt;
	at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)&lt;br/&gt;
	at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:547)&lt;br/&gt;
	at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212)&lt;br/&gt;
	at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)&lt;br/&gt;
	at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)&lt;br/&gt;
	at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)&lt;br/&gt;
Caused by: java.security.AccessControlException: access denied (&quot;java.lang.RuntimePermission&quot; &quot;accessClassInPackage.sun.reflect.annotation&quot;)&lt;br/&gt;
	at java.security.AccessControlContext.checkPermission(AccessControlContext.java:474)&lt;br/&gt;
	at java.security.AccessController.checkPermission(AccessController.java:685)&lt;br/&gt;
	at java.lang.SecurityManager.checkPermission(SecurityManager.java:549)&lt;br/&gt;
	at com.google.appengine.tools.development.DevAppServerFactory$CustomSecurityManager.checkPermission(DevAppServerFactory.java:429)&lt;br/&gt;
	at java.lang.SecurityManager.checkPackageAccess(SecurityManager.java:1525)&lt;br/&gt;
	at sun.reflect.misc.ReflectUtil.checkPackageAccess(ReflectUtil.java:188)&lt;br/&gt;
	at sun.reflect.misc.ReflectUtil.checkPackageAccess(ReflectUtil.java:164)&lt;br/&gt;
	at java.lang.reflect.Proxy.getInvocationHandler(Proxy.java:822)&lt;br/&gt;
	at org.springframework.core.annotation.AnnotationUtils.synthesizeAnnotation(AnnotationUtils.java:1364)&lt;br/&gt;
	at org.springframework.core.annotation.AnnotationUtils.findAnnotation(AnnotationUtils.java:498)&lt;br/&gt;
	at org.springframework.core.annotation.AnnotationUtils.findAnnotation(AnnotationUtils.java:563)&lt;br/&gt;
	at org.springframework.context.annotation.BeanAnnotationHelper.isBeanAnnotated(BeanAnnotationHelper.java:35)&lt;br/&gt;
	at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.isMatch(ConfigurationClassEnhancer.java:487)&lt;br/&gt;
	at org.springframework.context.annotation.ConfigurationClassEnhancer$ConditionalCallbackFilter.accept(ConfigurationClassEnhancer.java:190)&lt;br/&gt;
	at org.springframework.cglib.proxy.Enhancer.emitMethods(Enhancer.java:898)&lt;br/&gt;
	at org.springframework.cglib.proxy.Enhancer.generateClass(Enhancer.java:509)&lt;br/&gt;
	at org.springframework.cglib.transform.TransformingClassGenerator.generateClass(TransformingClassGenerator.java:33)&lt;br/&gt;
	at org.springframework.cglib.core.DefaultGeneratorStrategy.generate(DefaultGeneratorStrategy.java:25)&lt;br/&gt;
	at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanFactoryAwareGeneratorStrategy.generate(ConfigurationClassEnhancer.java:249)&lt;br/&gt;
	at org.springframework.cglib.core.AbstractClassGenerator.create(AbstractClassGenerator.java:231)&lt;br/&gt;
	at org.springframework.cglib.proxy.Enhancer.createHelper(Enhancer.java:378)&lt;br/&gt;
	at org.springframework.cglib.proxy.Enhancer.createClass(Enhancer.java:318)&lt;br/&gt;
	at org.springframework.context.annotation.ConfigurationClassEnhancer.createClass(ConfigurationClassEnhancer.java:135)&lt;br/&gt;
	at org.springframework.context.annotation.ConfigurationClassEnhancer.enhance(ConfigurationClassEnhancer.java:107)&lt;br/&gt;
	at org.springframework.context.annotation.ConfigurationClassPostProcessor.enhanceConfigurationClasses(ConfigurationClassPostProcessor.java:400)&lt;/p&gt;</description>
            <key id="67196">SPR-13829</key>
            <summary>Regression: Spring 4.2.4 fails to load configuration class on Google App Engine</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://jira.spring.io/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Complete</resolution>
                                        <assignee username="juergen.hoeller">Juergen Hoeller</assignee>
                                    <reporter username="marekw">Marek Wi&#261;cek</reporter>
                        <labels>
                    </labels>
                <created>Tue, 29 Dec 2015 17:02:52 +0000</created>
                <updated>Thu, 25 Feb 2016 09:36:35 +0000</updated>
                            <resolved>Tue, 29 Dec 2015 19:19:59 +0000</resolved>
                                    <version>4.2.4</version>
                                    <fixVersion>4.2.5</fixVersion>
                    <fixVersion>4.3 RC1</fixVersion>
                                    <component>Core</component>
                    <component>Web</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="122739" author="juergen.hoeller" created="Tue, 29 Dec 2015 19:19:59 +0000"  >&lt;p&gt;This was caused by &lt;a href=&quot;https://jira.spring.io/browse/SPR-13696&quot; title=&quot;SynthesizedAnnotation is not visible from class loader&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPR-13696&quot;&gt;&lt;del&gt;SPR-13696&lt;/del&gt;&lt;/a&gt; where we more defensively handle synthesized proxy generation... at the expense of checking the proxy&apos;s &lt;tt&gt;InvocationHandler&lt;/tt&gt; instead of just our own marker annotation. Since that seems to be a &lt;tt&gt;SecurityManager&lt;/tt&gt;-sensitive operation, possibly not just on Google App Engine, I&apos;ve moved that check beyond the &lt;tt&gt;isSynthesizable&lt;/tt&gt; point in order to only check actually synthesizable annotations that way. I&apos;ve also added a general &lt;tt&gt;catch (SecurityException&lt;/tt&gt; block for that particular operation, like we have in other places for Google App Engine purposes already.&lt;/p&gt;

&lt;p&gt;This will be ready for testing in tonight&apos;s &lt;tt&gt;4.2.5.BUILD-SNAPSHOT&lt;/tt&gt;. It would be great if you could give it a try once available...&lt;/p&gt;

&lt;p&gt;Juergen&lt;/p&gt;</comment>
                            <comment id="122740" author="marekw" created="Tue, 29 Dec 2015 19:34:10 +0000"  >&lt;p&gt;GAE SDK is available in Maven repos and GAE Gradle plugin supports running automated functional tests. It should therefore be easy to implement an automated sanity test that deploys a hello world MVC app to GAE DevServer to make sure that there are no compatibility issues.&lt;/p&gt;

&lt;p&gt;If that sounds like a good idea, I can create a pull request on GitHub.&lt;/p&gt;</comment>
                            <comment id="122741" author="marekw" created="Tue, 29 Dec 2015 19:34:45 +0000"  >&lt;p&gt;Sure, I will test the snapshot build tonight.&lt;/p&gt;</comment>
                            <comment id="122742" author="juergen.hoeller" created="Tue, 29 Dec 2015 20:22:05 +0000"  >&lt;p&gt;For an even simpler arrangement, I eventually dropped the entire &lt;tt&gt;InvocationHandler&lt;/tt&gt; check to begin with. Our subsequent &lt;tt&gt;isSynthesizable&lt;/tt&gt; check is a quite effective filter anyway, so in that particular spot, we can never run into a situation where an actually synthesizable annotation (for the purposes of our affected method here) can be pre-synthesized without the &lt;tt&gt;SynthesizedAnnotation&lt;/tt&gt; marker. So the only expense we have is a &lt;tt&gt;ConcurrentReferenceHashMap&lt;/tt&gt; lookup for that &lt;tt&gt;isSynthesizable&lt;/tt&gt; check now but that&apos;s perfectly acceptable; it&apos;s not worth having a &lt;tt&gt;SecurityException&lt;/tt&gt;-sensitive check just to bypass that map lookup.&lt;/p&gt;

&lt;p&gt;Juergen&lt;/p&gt;</comment>
                            <comment id="122743" author="juergen.hoeller" created="Tue, 29 Dec 2015 20:30:12 +0000"  >&lt;p&gt;A new 4.2.5 snapshot will be available in about 1.5 hours now.&lt;/p&gt;

&lt;p&gt;As for an automated smoke test against the GAE SDK, that&apos;s a fine idea! Please create a separate JIRA issue for it, as a task to consider such a test setup.&lt;/p&gt;</comment>
                            <comment id="122746" author="marekw" created="Tue, 29 Dec 2015 22:03:12 +0000"  >&lt;p&gt;Problem is fixed in 4.2.5.BUILD-20151229.205308-8, thanks.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="67562">SPR-13925</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10151">
                    <name>Relate</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="66761">SPR-13696</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="67199">SPR-13830</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10180" key="com.atlassian.jira.toolkit:dayslastcommented">
                        <customfieldname>Days since last comment</customfieldname>
                        <customfieldvalues>
                                        51 weeks, 1 day ago
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 29 Dec 2015 19:19:59 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10181" key="com.atlassian.jira.toolkit:lastusercommented">
                        <customfieldname>Last commented by a User</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>true</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10182" key="com.atlassian.jira.toolkit:lastupdaterorcommenter">
                        <customfieldname>Last updater</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>snicoll</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08zcf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>