<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Thu Dec 22 20:22:40 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SPR-2758/SPR-2758.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SPR-2758] Request/Session scoped beans are not available in render phase in Spring Portlet MVC</title>
                <link>https://jira.spring.io/browse/SPR-2758</link>
                <project id="10000" key="SPR">Spring Framework</project>
                    <description>&lt;p&gt;(I already mentioned it in the forum, but got no feedback (&lt;a href=&quot;http://forum.springframework.org/showthread.php?t=30498&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://forum.springframework.org/showthread.php?t=30498&lt;/a&gt;).)&lt;/p&gt;

&lt;p&gt;The DispatcherPortlet allows to use session-scoped beans by injecting a PortletRequestAttributes object into the RequestContextHolder. Unfortunately, this is only done for the action phase, but not for the render phase. So a session scoped bean is not available during the render phase. Now I really wonder why this is the case - or if it is just a bug.&lt;/p&gt;

&lt;p&gt;We worked around it by writing a RequestContextInterceptor (reduced to the necessary):&lt;/p&gt;

&lt;p&gt;public class RequestContextInterceptor implements HandlerInterceptor {&lt;/p&gt;

&lt;p&gt;  public boolean preHandleRender(RenderRequest request_,&lt;br/&gt;
                                 RenderResponse response_,&lt;br/&gt;
                                 Object handler_) throws Exception &lt;/p&gt;
{
    // Expose current RequestAttributes to current thread.
    PortletRequestAttributes requestAttributes = 
      new PortletRequestAttributes(request_);
    RequestContextHolder.setRequestAttributes(requestAttributes);
    return true;
  }

&lt;p&gt;  public void afterRenderCompletion(RenderRequest request_,&lt;br/&gt;
                                    RenderResponse response_, &lt;br/&gt;
                                    Object handler_,&lt;br/&gt;
                                    Exception ex_) throws Exception &lt;/p&gt;
{
    PortletRequestAttributes requestAttributes = 
      (PortletRequestAttributes)RequestContextHolder.currentRequestAttributes();
    // Reset thread-bound RequestAttributes.
    requestAttributes.requestCompleted();
    RequestContextHolder.setRequestAttributes(null);
  }

&lt;p&gt;}&lt;/p&gt;

&lt;p&gt;The content of the both methods is more or less copied from DispatcherPortlet.doActionService(..). I only wonder why the same is not done for DispatcherPortlet.doRenderService(..).&lt;/p&gt;

&lt;p&gt;J&#246;rg&lt;/p&gt;</description>
            <key id="15341">SPR-2758</key>
            <summary>Request/Session scoped beans are not available in render phase in Spring Portlet MVC</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://jira.spring.io/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="juergen.hoeller">Juergen Hoeller</assignee>
                                    <reporter username="joerg.heinicke@gmx.de">J&#246;rg Heinicke</reporter>
                        <labels>
                    </labels>
                <created>Wed, 25 Oct 2006 23:44:21 +0000</created>
                <updated>Tue, 19 Jun 2012 03:50:58 +0000</updated>
                            <resolved>Thu, 26 Oct 2006 04:47:54 +0000</resolved>
                                    <version>2.0 final</version>
                                    <fixVersion>2.0.1</fixVersion>
                                    <component>Web</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="20466" author="juergen.hoeller" created="Thu, 26 Oct 2006 04:47:54 +0000"  >&lt;p&gt;This is an embarrassing oversight... As you point out, DispatcherPortlet is supposed to expose the thread-bound request attributes for both action and render requests.&lt;/p&gt;

&lt;p&gt;Thanks for the report!&lt;/p&gt;

&lt;p&gt;Juergen&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10180" key="com.atlassian.jira.toolkit:dayslastcommented">
                        <customfieldname>Days since last comment</customfieldname>
                        <customfieldvalues>
                                        10 years, 10 weeks ago
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 26 Oct 2006 04:47:54 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10181" key="com.atlassian.jira.toolkit:lastusercommented">
                        <customfieldname>Last commented by a User</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>false</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10182" key="com.atlassian.jira.toolkit:lastupdaterorcommenter">
                        <customfieldname>Last updater</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>tmarshall</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i00vfr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5138</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>