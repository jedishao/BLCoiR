<!-- 
RSS generated by JIRA (7.2.3#72005-sha1:73be91d2b96fc29303a7eb6820acf420e5d0ed65) at Mon Dec 12 16:05:40 EST 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.jboss.org/si/jira.issueviews:issue-xml/ENTESB-2345/ENTESB-2345.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>JBoss Issue Tracker</title>
    <link>https://issues.jboss.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>7.2.3</version>
        <build-number>72005</build-number>
        <build-date>06-10-2016</build-date>
    </build-info>

<item>
            <title>[ENTESB-2345] Hawtio becomes not available when the client repeatidly tries to create more connections than &apos;maximumConnections&apos; property</title>
                <link>https://issues.jboss.org/browse/ENTESB-2345</link>
                <project id="12314570" key="ENTESB">JBoss Fuse</project>
                    <description>&lt;p&gt;1)Add transportConnector to activemq.xml: &lt;/p&gt;
&lt;p/&gt;
&lt;div id=&quot;syntaxplugin&quot; class=&quot;syntaxplugin&quot; style=&quot;border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;&quot;&gt;
&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; border=&quot;0&quot; width=&quot;100%&quot; style=&quot;font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;&quot;&gt;
		&lt;tbody &gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;  margin-top: 10px;   margin-bottom: 10px;  width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt; &amp;lt;transportConnector name=&quot;mqtt&quot; uri=&quot;mqtt://0.0.0.0:1883?maximumConnections=1000&amp;amp;amp;wireFormat.maxFrameSize=104857600&quot;/&amp;gt; &lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
			&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;p/&gt;
&lt;p&gt;2) Start A-MQ &lt;br/&gt;
3) Run test attached. &lt;br/&gt;
4) After 1000 connections were started, try to log in into hawtio Hawtio becomes not available In Firefox is:&lt;/p&gt;
 &lt;p/&gt;
&lt;div id=&quot;syntaxplugin&quot; class=&quot;syntaxplugin&quot; style=&quot;border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;&quot;&gt;
&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; border=&quot;0&quot; width=&quot;100%&quot; style=&quot;font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;&quot;&gt;
		&lt;tbody &gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;  margin-top: 10px;   margin-bottom: 10px;  width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt; Unresponsive script: http://localhost:8181/hawtio/lib/sugar-1.3.6-custom.min.js?v=1.2-redhat-387:35 &lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
			&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;p/&gt;
&lt;p&gt; jconsole is still available In the log is every 6-8 seconds: &lt;/p&gt;
&lt;p/&gt;
&lt;div id=&quot;syntaxplugin&quot; class=&quot;syntaxplugin&quot; style=&quot;border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;&quot;&gt;
&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; border=&quot;0&quot; width=&quot;100%&quot; style=&quot;font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;&quot;&gt;
		&lt;tbody &gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;  margin-top: 10px;   margin-bottom: 10px;  width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt; 14:33:53,565 | ERROR | meSize=104857600 | TransportConnector | 131 - org.apache.activemq.activemq-osgi - 5.9.0.redhat-610387 | Could not accept connection : org.apache.activemq.transport.tcp.ExceededMaximumConnectionsException: Exceeded the maximum number of allowed client connections. See the &apos;maximumConnections&apos; property on the TCP transport configuration URI in the ActiveMQ configuration file (e.g., activemq.xml) 14:33:59,966 | ERROR | meSize=104857600 | TransportConnector | 131 - org.apache.activemq.activemq-osgi - 5.9.0.redhat-610387 | Could not accept connection : org.apache.activemq.transport.tcp.ExceededMaximumConnectionsException: Exceeded the maximum number of allowed client connections. See the &apos;maximumConnections&apos; property on the TCP transport configuration URI in the ActiveMQ configuration file (e.g., activemq.xml) &lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
			&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;p/&gt;</description>
                <environment>&lt;p&gt;JBoss Fuse/A-MQ (6.1.0.redhat-379), and with patch applied&lt;br/&gt;
Chromium&lt;br/&gt;
Firefox&lt;/p&gt;</environment>
        <key id="12550588">ENTESB-2345</key>
            <summary>Hawtio becomes not available when the client repeatidly tries to create more connections than &apos;maximumConnections&apos; property</summary>
                <type id="1" iconUrl="https://issues.jboss.org/secure/viewavatar?size=xsmall&amp;avatarId=13263&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.jboss.org/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.jboss.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Done</resolution>
                                        <assignee username="sonicaaaa">Paolo Antinori</assignee>
                                    <reporter username="emedvede">Elena Medvedeva</reporter>
                        <labels>
                    </labels>
                <created>Fri, 29 Aug 2014 08:46:56 -0400</created>
                <updated>Mon, 31 Aug 2015 10:29:36 -0400</updated>
                            <resolved>Wed, 17 Dec 2014 09:37:25 -0500</resolved>
                                                                    <component>Hawtio</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                <comments>
                            <comment id="13028163" author="sonicaaaa" created="Wed, 17 Dec 2014 03:01:55 -0500"  >&lt;p&gt;Update on my progresses (no improvement but i have excluded some causes):&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;sample use case exposes the problem on a constant base&lt;/li&gt;
	&lt;li&gt;hawtio freezes due to some network invocation that never complete. which invocation varies from time to time, often is &lt;b&gt;/plugin&lt;/b&gt; for an already logged other times is &lt;b&gt;/login&lt;/b&gt; for a new session&lt;/li&gt;
	&lt;li&gt;fuse / pax-web seem not to be blocked: performing the never returning network invocation via cUrl return its output correctly and timely&lt;/li&gt;
	&lt;li&gt;the bug resembles this JVM one: &lt;a href=&quot;https://bugs.eclipse.org/bugs/show_bug.cgi?id=357318&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://bugs.eclipse.org/bugs/show_bug.cgi?id=357318&lt;/a&gt; but it&apos;s probably not, I have verified the same behavior on both JDK7 and JDK8&lt;/li&gt;
	&lt;li&gt;i have tried changing Jetty connector, switching to &lt;tt&gt;org.eclipse.jetty.server.bio.SocketConnector&lt;/tt&gt; but obtained the same behavior&lt;/li&gt;
	&lt;li&gt;I have noticed, but I have to double check this, that after a long inactivity time, the problem solves itself. it looks like there is a blocking timeout that expires, and after that functionality is restored. I need to verify this, paying attention to not alter the system during the test&lt;/li&gt;
	&lt;li&gt;I have to verify if other connectors work fine while the one under stress reaches its max connection limit&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13028229" author="sonicaaaa" created="Wed, 17 Dec 2014 05:40:54 -0500"  >&lt;p&gt;Made progress with the help of a savvy friend FE developer. &lt;br/&gt;
The problem has been narrowed down being an Hawtio issue.&lt;br/&gt;
Probably the returned output for the list of available JMX objects, gets translated into a recursive data structure at Hawtio rendering level.&lt;br/&gt;
I still have to find where the problem exactly is, but at least its a reasonable explanation of the behavior + I have already partially verified this is the case, debugging at .js and verifying that the network call returns correctly but the in-browser event of &quot;invocation-completed&quot; is never acknowledge by the rendering engine since its busy in an infinite/very large set of operations.&lt;/p&gt;</comment>
                            <comment id="13028294" author="sonicaaaa" created="Wed, 17 Dec 2014 08:30:18 -0500"  >&lt;p&gt;Further update: &lt;br/&gt;
It&apos;s definitely a computation/performance problem. Reducing the limit of concurrent connection to 300 produces the page in ~10s .&lt;/p&gt;

&lt;p&gt;I&apos;m working with the js profiler to narrow down the critical portions of the code and understand how we can support larger set of elements&lt;/p&gt;</comment>
                            <comment id="13028327" author="sonicaaaa" created="Wed, 17 Dec 2014 09:37:13 -0500"  >&lt;p&gt;Fixed with this PR:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/jboss-fuse/hawtio/pull/22&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/jboss-fuse/hawtio/pull/22&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Please, consider that it was a performance related problem. Consider that for very large numbers, other problems similar to the one we have just fixed could show up.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310001">
                    <name>Related</name>
                                            <outwardlinks description="relates to">
                                                        </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12384537" name="mqtt-hawtio-not-available.zip" size="34020" author="emedvede" created="Fri, 29 Aug 2014 08:48:53 -0400"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310641" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Number of attachments</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310640" key="com.atlassian.jira.toolkit:comments">
                        <customfieldname>Number of comments</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311940" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1|hzt0e7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310840" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>