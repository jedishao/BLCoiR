<!-- 
RSS generated by JIRA (7.2.3#72005-sha1:73be91d2b96fc29303a7eb6820acf420e5d0ed65) at Tue Dec 06 19:58:26 EST 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.jboss.org/si/jira.issueviews:issue-xml/ENTESB-969/ENTESB-969.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>JBoss Issue Tracker</title>
    <link>https://issues.jboss.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>7.2.3</version>
        <build-number>72005</build-number>
        <build-date>06-10-2016</build-date>
    </build-info>

<item>
            <title>[ENTESB-969] Camel routes activemq consumers stuck on lock</title>
                <link>https://issues.jboss.org/browse/ENTESB-969</link>
                <project id="12314570" key="ENTESB">JBoss Fuse</project>
                    <description>&lt;p&gt;Looking at the thread dumps:&lt;/p&gt;

&lt;p&gt;&quot;Camel (feSndToEPTS) thread #38146 - JmsConsumer&lt;span class=&quot;error&quot;&gt;&amp;#91;A436.TSIS.q.to.EPTS&amp;#93;&lt;/span&gt;&quot; - Thread t@1495604&lt;br/&gt;
   java.lang.Thread.State: WAITING&lt;br/&gt;
	at java.lang.Object.wait(Native Method)&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;waiting on &amp;lt;229c229c&amp;gt; (a org.apache.sshd.common.channel.Window)&lt;br/&gt;
	at java.lang.Object.wait(Object.java:167)&lt;br/&gt;
	at org.apache.sshd.common.channel.Window.waitForSpace(Window.java:146)&lt;/li&gt;
	&lt;li&gt;locked &amp;lt;229c229c&amp;gt; (a org.apache.sshd.common.channel.Window)&lt;br/&gt;
	at org.apache.sshd.common.channel.ChannelOutputStream.flush(ChannelOutputStream.java:104)&lt;/li&gt;
	&lt;li&gt;locked &amp;lt;2aaa2aaa&amp;gt; (a org.apache.sshd.common.channel.ChannelOutputStream)&lt;br/&gt;
	at org.apache.sshd.common.channel.ChannelOutputStream.write(ChannelOutputStream.java:75)&lt;/li&gt;
	&lt;li&gt;locked &amp;lt;2aaa2aaa&amp;gt; (a org.apache.sshd.common.channel.ChannelOutputStream)&lt;br/&gt;
	at org.apache.sshd.common.channel.ChannelOutputStream.write(ChannelOutputStream.java:57)&lt;/li&gt;
	&lt;li&gt;locked &amp;lt;2aaa2aaa&amp;gt; (a org.apache.sshd.common.channel.ChannelOutputStream)&lt;br/&gt;
	at org.apache.karaf.shell.ssh.ShellFactoryImpl$LfToCrLfFilterOutputStream.write(ShellFactoryImpl.java:217)&lt;br/&gt;
	at java.io.FilterOutputStream.write(FilterOutputStream.java:119)&lt;br/&gt;
	at java.io.PrintStream.write(PrintStream.java:454)&lt;/li&gt;
	&lt;li&gt;locked &amp;lt;2c3b2c3b&amp;gt; (a java.io.PrintStream)&lt;br/&gt;
	at sun.nio.cs.StreamEncoder$CharsetSE.writeBytes(StreamEncoder.java:355)&lt;br/&gt;
	at sun.nio.cs.StreamEncoder$CharsetSE.implFlushBuffer(StreamEncoder.java:425)&lt;br/&gt;
	at sun.nio.cs.StreamEncoder.flushBuffer(StreamEncoder.java:138)&lt;/li&gt;
	&lt;li&gt;locked &amp;lt;2c4a2c4a&amp;gt; (a java.io.OutputStreamWriter)&lt;br/&gt;
	at java.io.OutputStreamWriter.flushBuffer(OutputStreamWriter.java:187)&lt;br/&gt;
	at java.io.PrintStream.write(PrintStream.java:501)&lt;/li&gt;
	&lt;li&gt;locked &amp;lt;2c3b2c3b&amp;gt; (a java.io.PrintStream)&lt;br/&gt;
	at java.io.PrintStream.print(PrintStream.java:643)&lt;br/&gt;
	at java.io.PrintStream.println(PrintStream.java:780)&lt;/li&gt;
	&lt;li&gt;locked &amp;lt;2c3b2c3b&amp;gt; (a java.io.PrintStream)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;is holding 2c3b2c3b, while:&lt;/p&gt;

&lt;p&gt;&quot;Camel (feSndToEPTS) thread #38147 - JmsConsumer&lt;span class=&quot;error&quot;&gt;&amp;#91;A436.TSIS.q.to.EPTS&amp;#93;&lt;/span&gt;&quot; - Thread t@1495605&lt;br/&gt;
   java.lang.Thread.State: BLOCKED&lt;br/&gt;
	at java.io.PrintStream.println(PrintStream.java:779)&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;waiting to lock &amp;lt;2c3b2c3b&amp;gt; (a java.io.PrintStream) owned by &quot;Camel (feSndToEPTS) thread #38146 - JmsConsumer&lt;span class=&quot;error&quot;&gt;&amp;#91;A436.TSIS.q.to.EPTS&amp;#93;&lt;/span&gt;&quot; t@1495604&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&quot;Camel (feSndToEPTS) thread #38148 - JmsConsumer&lt;span class=&quot;error&quot;&gt;&amp;#91;A436.TSIS.q.to.EPTS&amp;#93;&lt;/span&gt;&quot; - Thread t@1495606&lt;br/&gt;
   java.lang.Thread.State: BLOCKED&lt;br/&gt;
	at java.io.PrintStream.println(PrintStream.java:779)&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;waiting to lock &amp;lt;2c3b2c3b&amp;gt; (a java.io.PrintStream) owned by &quot;Camel (feSndToEPTS) thread #38146 - JmsConsumer&lt;span class=&quot;error&quot;&gt;&amp;#91;A436.TSIS.q.to.EPTS&amp;#93;&lt;/span&gt;&quot; t@1495604&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&quot;Camel (feSndToEPTS) thread #38149 - JmsConsumer&lt;span class=&quot;error&quot;&gt;&amp;#91;A436.TSIS.q.to.EPTS&amp;#93;&lt;/span&gt;&quot; - Thread t@1495607&lt;br/&gt;
   java.lang.Thread.State: BLOCKED&lt;br/&gt;
	at java.io.PrintStream.println(PrintStream.java:779)&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;waiting to lock &amp;lt;2c3b2c3b&amp;gt; (a java.io.PrintStream) owned by &quot;Camel (feSndToEPTS) thread #38146 - JmsConsumer&lt;span class=&quot;error&quot;&gt;&amp;#91;A436.TSIS.q.to.EPTS&amp;#93;&lt;/span&gt;&quot; t@1495604&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;etc...  are waiting for that lock.&lt;/p&gt;

&lt;p&gt;The thread holding the lock:&lt;/p&gt;

&lt;p&gt; org.apache.sshd.common.channel.Window.waitForSpace&lt;/p&gt;

&lt;p&gt;From the code:&lt;/p&gt;

&lt;p&gt;A Window for a given channel. Windows are used to not overflow the client or server when sending datas. Both clients and servers have a local and remote window and won&apos;t send anymore data until the window has been expanded.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12511943">ENTESB-969</key>
            <summary>Camel routes activemq consumers stuck on lock</summary>
                <type id="1" iconUrl="https://issues.jboss.org/secure/viewavatar?size=xsmall&amp;avatarId=13263&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.jboss.org/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.jboss.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Done</resolution>
                                        <assignee username="gnodet">Guillaume Nodet</assignee>
                                    <reporter username="dgrove_redhat.com">Doug Grove</reporter>
                        <labels>
                    </labels>
                <created>Tue, 22 Oct 2013 16:08:28 -0400</created>
                <updated>Tue, 25 Mar 2014 17:54:05 -0400</updated>
                            <resolved>Fri, 6 Dec 2013 11:09:22 -0500</resolved>
                                    <version>fuse-esb-7.1.0</version>
                                    <fixVersion>jboss-fuse-6.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="12832490" author="dgrove_redhat.com" created="Tue, 22 Oct 2013 18:19:33 -0400"  >&lt;p&gt;Guillaume Nodet replied:&lt;/p&gt;

&lt;p&gt;This issue is specific to the SSH protocol which uses a window mechanism to make sure that you can&apos;t overflow either side with data.&lt;br/&gt;
In that case, the server is waiting for space on the client side, and other threads are blocked on the output stream too (I suppose they try to log something to the console).&lt;br/&gt;
So the question is: which client is on the other side and is it hung ?&lt;/p&gt;</comment>
                            <comment id="12832561" author="dgrove_redhat.com" created="Mon, 28 Oct 2013 21:35:58 -0400"  >&lt;p&gt;&quot;Camel (feSndToEPTS) thread #38146 - JmsConsumer&lt;span class=&quot;error&quot;&gt;&amp;#91;A436.TSIS.q.to.EPTS&amp;#93;&lt;/span&gt;&quot; - Thread t@1495604&lt;br/&gt;
   java.lang.Thread.State: WAITING&lt;br/&gt;
	at java.lang.Object.wait(Native Method)&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;waiting on &amp;lt;229c229c&amp;gt; (a org.apache.sshd.common.channel.Window)&lt;br/&gt;
	at java.lang.Object.wait(Object.java:167)&lt;br/&gt;
	at org.apache.sshd.common.channel.Window.waitForSpace(Window.java:146)&lt;/li&gt;
	&lt;li&gt;locked &amp;lt;229c229c&amp;gt; (a org.apache.sshd.common.channel.Window)&lt;br/&gt;
	at org.apache.sshd.common.channel.ChannelOutputStream.flush(ChannelOutputStream.java:104)&lt;/li&gt;
	&lt;li&gt;locked &amp;lt;2aaa2aaa&amp;gt; (a org.apache.sshd.common.channel.ChannelOutputStream)&lt;br/&gt;
	at org.apache.sshd.common.channel.ChannelOutputStream.write(ChannelOutputStream.java:75)&lt;/li&gt;
	&lt;li&gt;locked &amp;lt;2aaa2aaa&amp;gt; (a org.apache.sshd.common.channel.ChannelOutputStream)&lt;br/&gt;
	at org.apache.sshd.common.channel.ChannelOutputStream.write(ChannelOutputStream.java:57)&lt;/li&gt;
	&lt;li&gt;locked &amp;lt;2aaa2aaa&amp;gt; (a org.apache.sshd.common.channel.ChannelOutputStream)&lt;br/&gt;
	at org.apache.karaf.shell.ssh.ShellFactoryImpl$LfToCrLfFilterOutputStream.write(ShellFactoryImpl.java:217)&lt;br/&gt;
	at java.io.FilterOutputStream.write(FilterOutputStream.java:119)&lt;br/&gt;
	at java.io.PrintStream.write(PrintStream.java:454)&lt;/li&gt;
	&lt;li&gt;locked &amp;lt;2c3b2c3b&amp;gt; (a java.io.PrintStream)&lt;br/&gt;
	at sun.nio.cs.StreamEncoder$CharsetSE.writeBytes(StreamEncoder.java:355)&lt;br/&gt;
	at sun.nio.cs.StreamEncoder$CharsetSE.implFlushBuffer(StreamEncoder.java:425)&lt;br/&gt;
	at sun.nio.cs.StreamEncoder.flushBuffer(StreamEncoder.java:138)&lt;/li&gt;
	&lt;li&gt;locked &amp;lt;2c4a2c4a&amp;gt; (a java.io.OutputStreamWriter)&lt;br/&gt;
	at java.io.OutputStreamWriter.flushBuffer(OutputStreamWriter.java:187)&lt;br/&gt;
	at java.io.PrintStream.write(PrintStream.java:501)&lt;/li&gt;
	&lt;li&gt;locked &amp;lt;2c3b2c3b&amp;gt; (a java.io.PrintStream)&lt;br/&gt;
	at java.io.PrintStream.print(PrintStream.java:643)&lt;br/&gt;
	at java.io.PrintStream.println(PrintStream.java:780)&lt;/li&gt;
	&lt;li&gt;locked &amp;lt;2c3b2c3b&amp;gt; (a java.io.PrintStream)&lt;br/&gt;
	at org.apache.felix.gogo.runtime.threadio.ThreadPrintStream.println(ThreadPrintStream.java:200)&lt;br/&gt;
	at org.apache.xml.serializer.ToStream.setProp(ToStream.java:455)&lt;br/&gt;
	at org.apache.xml.serializer.SerializerBase.setOutputProperty(SerializerBase.java:1601)&lt;br/&gt;
	at org.apache.xml.serializer.ToStream.setOutputFormat(ToStream.java:587)&lt;br/&gt;
	at org.apache.xml.serializer.SerializerFactory.getSerializer(SerializerFactory.java:139)&lt;br/&gt;
	at org.apache.xalan.transformer.TransformerIdentityImpl.createResultContentHandler(TransformerIdentityImpl.java:260)&lt;br/&gt;
	at org.apache.xalan.transformer.TransformerIdentityImpl.transform(TransformerIdentityImpl.java:330)&lt;br/&gt;
	at org.apache.camel.converter.jaxp.XmlConverter.toResult(XmlConverter.java:140)&lt;br/&gt;
	at org.apache.camel.converter.jaxp.XmlConverter.toResult(XmlConverter.java:124)&lt;br/&gt;
	at org.apache.camel.converter.jaxp.XmlConverter.toString(XmlConverter.java:247)&lt;br/&gt;
	at org.apache.camel.converter.jaxp.XmlConverter.toString(XmlConverter.java:280)&lt;br/&gt;
	at org.apache.camel.converter.jaxp.DomConverter.toString(DomConverter.java:72)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I don&apos;t know that there is &quot;another side&quot; involved.  For some reason, the gogo shell always seems to write to an ssh stream.  Maybe I&apos;m mistaken.&lt;/p&gt;

&lt;p&gt;In any event, the:&lt;/p&gt;

&lt;p&gt;at org.apache.felix.gogo.runtime.threadio.ThreadPrintStream.println(ThreadPrintStream.java:200)&lt;/p&gt;

&lt;p&gt;is synchronized on a printStream.  This has implications both for scalability - why have multiple writers when only one can write at a time - and for tolerance.   The whole idea being that even if one writer/reader is slow, the others will not be affected.  &lt;/p&gt;

&lt;p&gt;See:&lt;/p&gt;

&lt;p&gt;svn commit: r792359 - in /felix/trunk/gogo/runtime/src/main/java/org/apache/felix/gogo/runtime/threadio: ThreadInputStream.java ThreadPrintStream.java&lt;/p&gt;

&lt;p&gt;Author: gnodet&lt;br/&gt;
Date: Wed Jul  8 23:45:39 2009&lt;br/&gt;
New Revision: 792359&lt;/p&gt;

&lt;p&gt;URL: &lt;a href=&quot;http://svn.apache.org/viewvc?rev=792359&amp;amp;view=rev&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc?rev=792359&amp;amp;view=rev&lt;/a&gt;&lt;br/&gt;
Log:&lt;br/&gt;
Make sure to delegate all methods to the underlying print stream to avoid deadlocks (as the&lt;br/&gt;
print stream classes are synchronized, but we only use a single instance for all threads)&lt;/p&gt;



</comment>
                            <comment id="12926631" author="davestanley" created="Mon, 25 Nov 2013 23:45:32 -0500"  >&lt;p&gt;Attaching test that approximates stack trace.&lt;/p&gt;

&lt;p&gt;Steps to reproduce:&lt;/p&gt;

&lt;p&gt;1) Build and install bundle&lt;/p&gt;

&lt;p/&gt;
&lt;div id=&quot;syntaxplugin&quot; class=&quot;syntaxplugin&quot; style=&quot;border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;&quot;&gt;
&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; border=&quot;0&quot; width=&quot;100%&quot; style=&quot;font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;&quot;&gt;
		&lt;tbody &gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;  margin-top: 10px;   margin-bottom: 10px;  width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;&amp;gt;mvn install&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
			&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;p/&gt;

&lt;p&gt; on Fuse ESB 7.1-047&lt;/p&gt;

&lt;p/&gt;
&lt;div id=&quot;syntaxplugin&quot; class=&quot;syntaxplugin&quot; style=&quot;border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;&quot;&gt;
&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; border=&quot;0&quot; width=&quot;100%&quot; style=&quot;font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;&quot;&gt;
		&lt;tbody &gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;  margin-top: 10px;   margin-bottom: 10px;  width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;&amp;gt; osgi:install -s mvn:com.redhat.support/camel-xslt/1.0-SNAPSHOT&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
			&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;p/&gt;

&lt;p&gt;2) Install putty &lt;/p&gt;

&lt;p/&gt;
&lt;div id=&quot;syntaxplugin&quot; class=&quot;syntaxplugin&quot; style=&quot;border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;&quot;&gt;
&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; border=&quot;0&quot; width=&quot;100%&quot; style=&quot;font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;&quot;&gt;
		&lt;tbody &gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;&amp;gt;brew install putty&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;&amp;gt;plink -P 8101 admin@localhost&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
			&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;p/&gt;


&lt;p&gt;3) Send a bunch of jms messages to &quot;TEST&quot; queue. I used &amp;lt;standalone-amq&amp;gt;/example with:&lt;/p&gt;


&lt;p/&gt;
&lt;div id=&quot;syntaxplugin&quot; class=&quot;syntaxplugin&quot; style=&quot;border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;&quot;&gt;
&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; border=&quot;0&quot; width=&quot;100%&quot; style=&quot;font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;&quot;&gt;
		&lt;tbody &gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt; &amp;lt;!-- example program defaults --&amp;gt;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;        &amp;lt;property name=&quot;url&quot; value=&quot;tcp://localhost:61616?jms.watchTopicAdvisories=false&quot; /&amp;gt;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;        &amp;lt;property name=&quot;topic&quot; value=&quot;false&quot; /&amp;gt;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;        &amp;lt;property name=&quot;subject&quot; value=&quot;TEST&quot; /&amp;gt;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;        &amp;lt;property name=&quot;durable&quot; value=&quot;true&quot; /&amp;gt;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;        &amp;lt;property name=&quot;max&quot; value=&quot;10000&quot; /&amp;gt;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;        &amp;lt;property name=&quot;parallelThreads&quot; value=&quot;1&quot; /&amp;gt;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;        &amp;lt;property name=&quot;messageSize&quot; value=&quot;1000&quot; /&amp;gt;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;        &amp;lt;property name=&quot;clientId&quot; value=&quot;consumer1&quot; /&amp;gt;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;        &amp;lt;property name=&quot;producerClientId&quot; value=&quot;null&quot; /&amp;gt;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;        &amp;lt;property name=&quot;timeToLive&quot; value=&quot;0&quot; /&amp;gt;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;        &amp;lt;property name=&quot;sleepTime&quot; value=&quot;0&quot; /&amp;gt;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;        &amp;lt;property name=&quot;transacted&quot; value=&quot;false&quot; /&amp;gt;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;        &amp;lt;property name=&quot;reply-subject&quot; value=&quot;&quot; /&amp;gt;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;        &amp;lt;property name=&quot;verbose&quot; value=&quot;true&quot;/&amp;gt;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;        &amp;lt;property name=&quot;ack-mode&quot; value=&quot;AUTO_ACKNOWLEDGE&quot;/&amp;gt;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;        &amp;lt;property name=&quot;receive-time-out&quot; value=&quot;0&quot;/&amp;gt;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;        &amp;lt;property name=&quot;subscribers&quot; value=&quot;1&quot;/&amp;gt;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;        &amp;lt;property name=&quot;batch&quot; value=&quot;10&quot;/&amp;gt;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
			&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;p/&gt;

&lt;p&gt;On putty side, you should see messages printed to the console window.&lt;/p&gt;

&lt;p&gt;4) It should not be necessary - but periodic suspend/resumes of putty client can slow it down further.&lt;/p&gt;

&lt;p&gt;kill -17/-19 &amp;lt;pid&amp;gt;&lt;/p&gt;

&lt;p&gt;5) Grab periodic stack traces from ESB&lt;/p&gt;

&lt;p&gt;&amp;gt;jstack -F &amp;lt;pid&amp;gt; &amp;gt; stack0.txt&lt;/p&gt;


&lt;p&gt;Should see something like this:&lt;/p&gt;

&lt;p/&gt;
&lt;div id=&quot;syntaxplugin&quot; class=&quot;syntaxplugin&quot; style=&quot;border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;&quot;&gt;
&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; border=&quot;0&quot; width=&quot;100%&quot; style=&quot;font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;&quot;&gt;
		&lt;tbody &gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;Thread 132619: (state = BLOCKED)&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt; - java.lang.Object.wait(long) @bci=0 (Interpreted frame)&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt; - java.lang.Object.wait() @bci=2, line=503 (Compiled frame)&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt; - org.apache.sshd.common.channel.Window.waitForSpace() @bci=44, line=146 (Compiled frame)&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt; - org.apache.sshd.common.channel.ChannelOutputStream.flush() @bci=38, line=104 (Compiled frame)&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt; - java.io.FilterOutputStream.flush() @bci=4, line=140 (Compiled frame)&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt; - java.io.PrintStream.write(byte[], int, int) @bci=30, line=482 (Compiled frame)&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt; - sun.nio.cs.StreamEncoder.writeBytes() @bci=120, line=221 (Compiled frame)&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt; ...&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
			&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;p/&gt;




</comment>
                            <comment id="12927598" author="gnodet" created="Fri, 29 Nov 2013 09:26:28 -0500"  >&lt;p&gt;I&apos;ve raised KARAF-2594 and FELIX-4336 to fix the ssh streams problems.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310001">
                    <name>Related</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12511796">ENTESB-824</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                                        </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12379172" name="testcase_v1_camel_xslt.zip" size="10465" author="davestanley" created="Mon, 25 Nov 2013 23:45:32 -0500"/>
                            <attachment id="12379128" name="testcase_v1_camel_xslt.zip" size="10465" author="hooman_b2455" created="Fri, 22 Nov 2013 01:36:39 -0500"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310641" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Number of attachments</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310640" key="com.atlassian.jira.toolkit:comments">
                        <customfieldname>Number of comments</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311940" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1|hzjpj3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310840" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>175281</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>