<!-- 
RSS generated by JIRA (7.2.3#72005-sha1:73be91d2b96fc29303a7eb6820acf420e5d0ed65) at Mon Dec 12 14:36:53 EST 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.jboss.org/si/jira.issueviews:issue-xml/ENTESB-3949/ENTESB-3949.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>JBoss Issue Tracker</title>
    <link>https://issues.jboss.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>7.2.3</version>
        <build-number>72005</build-number>
        <build-date>06-10-2016</build-date>
    </build-info>

<item>
            <title>[ENTESB-3949] 6.2  Patching ensemble containers</title>
                <link>https://issues.jboss.org/browse/ENTESB-3949</link>
                <project id="12314570" key="ENTESB">JBoss Fuse</project>
                    <description>&lt;p&gt;We&apos;ve created an 3 member ensemble. The first container patched correctly. When applying the patch to the another ensemble member, the patch artifacts would not resolve. &lt;/p&gt;

&lt;p&gt;This was tracked down to the fact that our maven upload directory only had one endpoint exposed, i.e from cluster-list:&lt;/p&gt;

&lt;p/&gt;
&lt;div id=&quot;syntaxplugin&quot; class=&quot;syntaxplugin&quot; style=&quot;border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;&quot;&gt;
&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; border=&quot;0&quot; width=&quot;100%&quot; style=&quot;font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;&quot;&gt;
		&lt;tbody &gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;io.fabric8.fabric-maven-proxy/1.2.0.redhat-153/maven/upload                                                                                         &lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;   em_q12                                                      em_q12     -         http://dhcp181-42.gsslab.rdu2.redhat.com:8181/maven/upload      &lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;   root                                                        root       -         http://10.10.181.61:8181/maven/upload  &lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
			&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;p/&gt;

&lt;p&gt;This machine (&lt;a href=&quot;http://dhcp181-42.gsslab.rdu2.redhat.com&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://dhcp181-42.gsslab.rdu2.redhat.com&lt;/a&gt;) does not have the patched artifacts&lt;br/&gt;
. They are only available in the data/maven/upload directory where I originally patched the container. &lt;/p&gt;

&lt;p&gt;To workaround this issue, we removed the fabric-maven-proxy agent from the other containers in the ensemble and restarted the fabric-maven-proxy agent on the container where I installed the patch.  This forced the endpoint to be exposed on the machine where my artifacts were, i.e:&lt;/p&gt;

&lt;p/&gt;
&lt;div id=&quot;syntaxplugin&quot; class=&quot;syntaxplugin&quot; style=&quot;border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;&quot;&gt;
&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; border=&quot;0&quot; width=&quot;100%&quot; style=&quot;font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;&quot;&gt;
		&lt;tbody &gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;io.fabric8.fabric-maven-proxy/1.2.0.redhat-153/maven/upload                                                                                  &lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;   root                                                        root       -         http://10.10.181.61:8181/maven/upload  &lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
			&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;p/&gt;

&lt;p&gt;Restarting the fabric-agent forced my container to resync and as such find the artifacts correctly and come up. &lt;/p&gt;

&lt;p&gt;We also noted in a customer environment that these endpoints seem to disappear. We think this may be related to &lt;a href=&quot;https://issues.jboss.org/browse/ENTESB-3913&quot; title=&quot;IllegalStateException: Cannot obtain profile write lock in time&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ENTESB-3913&quot;&gt;&lt;del&gt;ENTESB-3913&lt;/del&gt;&lt;/a&gt;. Restart the fabric-maven-proxy resolved the problem. &lt;/p&gt;

&lt;p&gt;Problems:&lt;/p&gt;

&lt;p&gt;1. Why aren&apos;t all three directories exposed? For one of my customers the other ensembles did eventually show up as endpoints, however, this was after a period of 30 - 60 minutes. In addition, we did not seem to iterate through the list to find the artifacts. &lt;/p&gt;

&lt;p&gt;2. Shouldn&apos;t the patched artifacts be pushed out to all the maven/upload folders so that we are covered in the case a machine goes down? &lt;/p&gt;

&lt;p&gt;It seems we may have an initial endpoint creation problem, potential search issue and propagation issue. &lt;/p&gt;

</description>
                <environment></environment>
        <key id="12584078">ENTESB-3949</key>
            <summary>6.2  Patching ensemble containers</summary>
                <type id="1" iconUrl="https://issues.jboss.org/secure/viewavatar?size=xsmall&amp;avatarId=13263&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.jboss.org/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.jboss.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Done</resolution>
                                        <assignee username="sonicaaaa">Paolo Antinori</assignee>
                                    <reporter username="sjavurek">Susan Javurek</reporter>
                        <labels>
                    </labels>
                <created>Fri, 4 Sep 2015 19:17:38 -0400</created>
                <updated>Mon, 7 Dec 2015 10:24:10 -0500</updated>
                            <resolved>Wed, 21 Oct 2015 10:09:56 -0400</resolved>
                                                    <fixVersion>jboss-fuse-6.2.1</fixVersion>
                                    <component>Patching</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13105898" author="sjavurek" created="Fri, 4 Sep 2015 19:19:58 -0400"  >&lt;p&gt;Also, can this affect customer bundles deployed? We did see one artifact during a screen  share that made it to two ensemble members but not  the third. We are researching what that bundle is and how it was deployed.&lt;/p&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12312340" key="org.jboss.labs.jira.plugin.jboss-custom-field-types-plugin:jbonlyselect">
                        <customfieldname>GSS Priority</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310641" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Number of attachments</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310640" key="com.atlassian.jira.toolkit:comments">
                        <customfieldname>Number of comments</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311940" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1|hzyc73:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310840" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>