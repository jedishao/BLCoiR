<!-- 
RSS generated by JIRA (7.2.3#72005-sha1:73be91d2b96fc29303a7eb6820acf420e5d0ed65) at Mon Dec 12 14:26:13 EST 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.jboss.org/si/jira.issueviews:issue-xml/ENTESB-3996/ENTESB-3996.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>JBoss Issue Tracker</title>
    <link>https://issues.jboss.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>7.2.3</version>
        <build-number>72005</build-number>
        <build-date>06-10-2016</build-date>
    </build-info>

<item>
            <title>[ENTESB-3996] S-RAMP DDL scripts contain errors</title>
                <link>https://issues.jboss.org/browse/ENTESB-3996</link>
                <project id="12314570" key="ENTESB">JBoss Fuse</project>
                    <description>&lt;p&gt;There are errors in several S-RAMP DDL scripts. As mention in the &lt;span class=&quot;error&quot;&gt;&amp;#91;http://docs.jboss.org/artificer/1.0.0.Final/html_single/#_ddl|docs&amp;#93;&lt;/span&gt;, S-RAMP should be able to check whether the necessary tables exist and create them accordingly. The S-RAMP repository throws same exceptions in the EAP console, as DDL scripts would be imported manually.&lt;/p&gt;

&lt;p&gt;The errors in DDL scripts thrown when importing them manually (also EAP thrown them in console), are in:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;DB2 - &lt;ins&gt;ddl-db2-import.dump&lt;/ins&gt;&lt;/li&gt;
	&lt;li&gt;Oracle - perhaps we could support the newest Oracle DB (12c)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The errors thrown in EAP console, when S-RAMP is trying to create tables/sequences/indexes:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;MySQL - &lt;ins&gt;mysql-server-exception.dump&lt;/ins&gt;&lt;/li&gt;
&lt;/ul&gt;


</description>
                <environment>&lt;h5&gt;&lt;a name=&quot;Servers&quot;&gt;&lt;/a&gt;Servers&lt;/h5&gt;
&lt;p&gt;EAP 6.4.0.GA&lt;br/&gt;
S-RAMP ER2&lt;/p&gt;
&lt;h5&gt;&lt;a name=&quot;Databases&quot;&gt;&lt;/a&gt;Databases&lt;/h5&gt;
&lt;h6&gt;&lt;a name=&quot;DB29.7&quot;&gt;&lt;/a&gt;DB2 9.7&lt;/h6&gt;
&lt;ul&gt;
	&lt;li&gt;db2-jdbc-4.9.78&lt;/li&gt;
&lt;/ul&gt;


&lt;h6&gt;&lt;a name=&quot;MySQL5.7&quot;&gt;&lt;/a&gt;MySQL 5.7&lt;/h6&gt;
&lt;ul&gt;
	&lt;li&gt;mysql-connector-java-5.1.36&lt;/li&gt;
&lt;/ul&gt;


&lt;h6&gt;&lt;a name=&quot;Oracle12c&quot;&gt;&lt;/a&gt;Oracle 12c&lt;/h6&gt;
&lt;ul&gt;
	&lt;li&gt;Oracle JDBC Driver v12&lt;/li&gt;
&lt;/ul&gt;
</environment>
        <key id="12584795">ENTESB-3996</key>
            <summary>S-RAMP DDL scripts contain errors</summary>
                <type id="1" iconUrl="https://issues.jboss.org/secure/viewavatar?size=xsmall&amp;avatarId=13263&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.jboss.org/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.jboss.org/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Done</resolution>
                                        <assignee username="virchete">David virgil naranjo</assignee>
                                    <reporter username="vkasala">Viliam Kasala</reporter>
                        <labels>
                    </labels>
                <created>Mon, 14 Sep 2015 06:55:16 -0400</created>
                <updated>Wed, 25 Nov 2015 11:20:37 -0500</updated>
                            <resolved>Thu, 1 Oct 2015 11:28:04 -0400</resolved>
                                    <version>jboss-fuse-6.2.1</version>
                                    <fixVersion>jboss-fuse-6.2.1</fixVersion>
                                    <component>S-RAMP</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13110100" author="virchete" created="Thu, 17 Sep 2015 11:38:37 -0400"  >&lt;p&gt;For Oracle 12g I think right now it is not possible.&lt;/p&gt;

&lt;p&gt;The names of the tables are so long in some cases and I receive this error:&lt;/p&gt;

&lt;p&gt;Error: ORA-00972: identifier is too long&lt;/p&gt;

&lt;p&gt;SQLState:  42000&lt;br/&gt;
ErrorCode: 972&lt;br/&gt;
Position: 17&lt;/p&gt;

&lt;p&gt;An example of tables used in s-ramp that are too long are:&lt;/p&gt;

&lt;p&gt;ArtificerRelationship_otherAttributes&lt;br/&gt;
ArtificerArtifact_normalizedClassifiers&lt;/p&gt;</comment>
                            <comment id="13110201" author="aileenc" created="Thu, 17 Sep 2015 15:48:01 -0400"  >&lt;p&gt;I would document this as a restriction for now. If any one looks for Oracle 12 support then we&apos;ll need to rename tables.&lt;/p&gt;</comment>
                            <comment id="13110382" author="virchete" created="Fri, 18 Sep 2015 07:47:30 -0400"  >&lt;p&gt;Does anyone tested s-ramp with Oracle 10g? &lt;/p&gt;

&lt;p&gt;There is a limitation in Oracle 10/11/12g about the table/index/sequence names size of 30 characters.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://stackoverflow.com/questions/18248318/change-table-column-index-names-size-in-oracle-11g-or-12c&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://stackoverflow.com/questions/18248318/change-table-column-index-names-size-in-oracle-11g-or-12c&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;With the current scripts it is not possible they can run on these environments.&lt;/p&gt;</comment>
                            <comment id="13113079" author="vkasala" created="Tue, 29 Sep 2015 02:55:51 -0400"  >&lt;p&gt;Hi, David,&lt;/p&gt;

&lt;p&gt;I am sorry, I haven&apos;t written you much sooner.&lt;/p&gt;

&lt;p&gt;I have tried S-RAMP with Oracle 10g, but I wasn&apos;t able to get it work. Moreover, I am not sure, whether if I had an appropriate JDBC driver.&lt;/p&gt;</comment>
                            <comment id="13113094" author="virchete" created="Tue, 29 Sep 2015 04:12:33 -0400"  >&lt;p&gt;Could you tell me which error are you seeing?&lt;/p&gt;

&lt;p&gt;I&apos;ve attached the jdbc driver that is working for me.&lt;/p&gt;</comment>
                            <comment id="13113137" author="vkasala" created="Tue, 29 Sep 2015 05:27:37 -0400"  >&lt;p&gt;Thanks David, &lt;/p&gt;

&lt;p&gt;I will check it and let you know. Thanks.&lt;/p&gt;</comment>
                            <comment id="13113342" author="vkasala" created="Tue, 29 Sep 2015 10:15:26 -0400"  >&lt;p&gt;Hi David,&lt;/p&gt;

&lt;p&gt;I have tried your ojdbc14 driver and it works for Oracle10g. Thanks for that.&lt;/p&gt;

&lt;p&gt;I have modified &lt;b&gt;oracle10.sql&lt;/b&gt; script as in &lt;b&gt;&lt;a href=&quot;https://issues.jboss.org/browse/ENTESB-4102&quot; title=&quot;S-RAMP DDL scripts ORACLE error&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ENTESB-4102&quot;&gt;&lt;del&gt;ENTESB-4102&lt;/del&gt;&lt;/a&gt;&lt;/b&gt;.&lt;/p&gt;

&lt;p&gt;Unfortunately, I was not able to get artificer work with it. I have tried to run artificer with clean database and also with database already initialized with &lt;b&gt;oracle10.sql&lt;/b&gt;. I have tried it with navigating to &quot;http://localhost:8080/artificer-ui/&quot;.&lt;/p&gt;

&lt;p&gt;I have attached logs from eap-6.4.0.&lt;/p&gt;

&lt;p&gt;Please let me know, if artificer with Oracle10g worked for you. Thanks.&lt;/p&gt;</comment>
                            <comment id="13113360" author="virchete" created="Tue, 29 Sep 2015 10:42:27 -0400"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;I share with you one useful document I ve done about how to configure the different datasources with EAP:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://gist.github.com/dvirgiln/ccb2141c94ccaafdceca&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://gist.github.com/dvirgiln/ccb2141c94ccaafdceca&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;You can see per database what you need to set in the artificer.properties and what to modify in the standalone.xml&lt;/p&gt;

&lt;p&gt;In the case of Oracle, I ve included the values for oracle 11g. Should be similar for 10g.&lt;/p&gt;

&lt;p&gt;I use these useful 2 links to get an instance of the databases:&lt;/p&gt;

&lt;p&gt;Drivers:&lt;a href=&quot;http://www.qa.jboss.com/jdbc-drivers-products/EAP/6.4.0/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.qa.jboss.com/jdbc-drivers-products/EAP/6.4.0/&lt;/a&gt;&lt;br/&gt;
Oracle 10g: &lt;a href=&quot;http://dballocator.mw.lab.eng.bos.redhat.com:8080/Allocator/AllocatorServlet?operation=report&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://dballocator.mw.lab.eng.bos.redhat.com:8080/Allocator/AllocatorServlet?operation=report&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I ve included a file that contains the drivers for eap. For oracle10g modify the current ojdb jar file by the one i provided you. &lt;/p&gt;

&lt;p&gt;I ll try tomorrow morning to point from s-ramp to oracle10g, but I imagine if everything is correctly set, it will work.&lt;/p&gt;</comment>
                            <comment id="13113366" author="virchete" created="Tue, 29 Sep 2015 10:51:06 -0400"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;colored text&lt;/font&gt;&lt;/p&gt;</comment>
                            <comment id="13113604" author="vkasala" created="Wed, 30 Sep 2015 02:12:48 -0400"  >&lt;p&gt;Hi David,&lt;/p&gt;

&lt;p&gt;I can also share you my step, which I have followed in order to setup oracle datasource with eap:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://gist.github.com/vkasala/54e89d4f8dabb1f80e08&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://gist.github.com/vkasala/54e89d4f8dabb1f80e08&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;After that, I tried to erase oracle10 db from dballocator and then navigate to #Artifacts page in artificer-ui console. All the tables should be created when first access to artificer is made. This is how the docs says. All errors can be seen in &lt;b&gt;server-clean-artif-db.log&lt;/b&gt;.&lt;/p&gt;

&lt;p&gt;At last, I have tried to initialize database with slightly modified &lt;b&gt;oracle10g&lt;/b&gt; script, that creates all the tables. After that, I have also tried to navigate to #Artifacts page in artificer-ui console. All errors can be seen in server-initialized-artif-db.log.&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                            <comment id="13133883" author="jbouska" created="Wed, 25 Nov 2015 11:20:37 -0500"  >&lt;p&gt;Verified on jboss-fuse-6.2.1-CR1.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10012">
                    <name>Dependency</name>
                                            <outwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12586376">ENTESB-4102</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12586673">ENTESB-4115</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12393270" name="com.zip" size="9078488" author="virchete" created="Tue, 29 Sep 2015 10:44:28 -0400"/>
                            <attachment id="12392786" name="ddl-db2-import.dump" size="25629" author="vkasala" created="Mon, 14 Sep 2015 10:16:51 -0400"/>
                            <attachment id="12392787" name="mysql-server-exception.dump" size="19451" author="vkasala" created="Mon, 14 Sep 2015 10:23:11 -0400"/>
                            <attachment id="12393254" name="ojdbc14.jar" size="1540457" author="virchete" created="Tue, 29 Sep 2015 04:13:08 -0400"/>
                            <attachment id="12393264" name="server-clean-artif-db.log" size="148015" author="vkasala" created="Tue, 29 Sep 2015 10:10:09 -0400"/>
                            <attachment id="12393265" name="server-initialized-artif-db.log" size="98690" author="vkasala" created="Tue, 29 Sep 2015 10:10:09 -0400"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="org.jboss.labs.jira.plugin.jboss-custom-field-types-plugin:multiurl">
                        <customfieldname>Git Pull Request</customfieldname>
                        <customfieldvalues>
                            https://github.com/ArtificerRepo/artificer/pull/520
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310641" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Number of attachments</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310640" key="com.atlassian.jira.toolkit:comments">
                        <customfieldname>Number of comments</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>11.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311940" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1|hzyghr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310840" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>