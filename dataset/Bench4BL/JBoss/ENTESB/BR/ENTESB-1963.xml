<!-- 
RSS generated by JIRA (7.2.3#72005-sha1:73be91d2b96fc29303a7eb6820acf420e5d0ed65) at Tue Dec 06 20:23:17 EST 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.jboss.org/si/jira.issueviews:issue-xml/ENTESB-1963/ENTESB-1963.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>JBoss Issue Tracker</title>
    <link>https://issues.jboss.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>7.2.3</version>
        <build-number>72005</build-number>
        <build-date>06-10-2016</build-date>
    </build-info>

<item>
            <title>[ENTESB-1963] Always fail to migrate from old rpm version to new rpm version.</title>
                <link>https://issues.jboss.org/browse/ENTESB-1963</link>
                <project id="12314570" key="ENTESB">JBoss Fuse</project>
                    <description>&lt;p&gt;Fail to migrate from old rpm version to new rpm version. Check the log on node, find some errors like &quot;September 18 13:34:54 INFO oo_spawn buffer(10/) CLIENT_ERROR: Command Failed: Could not reach amq console.&quot; . &lt;/p&gt;

&lt;p&gt;Please analyse it.&lt;/p&gt;</description>
                <environment>&lt;p&gt;openshift-origin-cartridge-fuse-6.1.0.redhat.396-901-fc18.noarch.rpm&lt;br/&gt;
openshift-origin-cartridge-fuse-6.1.0.redhat.396-902-fc18.noarch.rpm&lt;/p&gt;</environment>
        <key id="12552533">ENTESB-1963</key>
            <summary>Always fail to migrate from old rpm version to new rpm version.</summary>
                <type id="1" iconUrl="https://issues.jboss.org/secure/viewavatar?size=xsmall&amp;avatarId=13263&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.jboss.org/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.jboss.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Done</resolution>
                                        <assignee username="janstey">Jonathan Anstey</assignee>
                                    <reporter username="xuanjia">Xuan Jia</reporter>
                        <labels>
                    </labels>
                <created>Thu, 18 Sep 2014 03:09:39 -0400</created>
                <updated>Sun, 22 Feb 2015 13:01:45 -0500</updated>
                            <resolved>Sun, 22 Feb 2015 13:01:45 -0500</resolved>
                                    <version>jboss-fuse-6.1 on OSE</version>
                                    <fixVersion> jboss-fuse-6.2</fixVersion>
                                    <component>OpenShift</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13003849" author="janstey" created="Thu, 18 Sep 2014 08:04:38 -0400"  >&lt;p&gt;Do you still have the Fuse container logs from the node that threw this error:&lt;/p&gt;

&lt;p&gt;&quot;Unhandled exception performing step: No such file or directory - /var/lib/openshift/541a4bd21018d617e100013c/fuse/container/data/git/local/fabric/.git/index.lock&quot;&lt;/p&gt;

&lt;p&gt;From logs it looks to be app_name:&quot;test2&quot; ,hostname:&quot;node2&quot;.&lt;/p&gt;</comment>
                            <comment id="13004080" author="janstey" created="Thu, 18 Sep 2014 17:28:16 -0400"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.jboss.org/secure/ViewProfile.jspa?name=xuanjia&quot; class=&quot;user-hover&quot; rel=&quot;xuanjia&quot;&gt;Xuan Jia&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;Another thing, for the AMQ nodes did you use the AMQ cart or add a broker to a Fuse container via hawtio? The latest AMQ cart doesn&apos;t have all the patching fixes so I wonder if that caused  a problem for you... &lt;/p&gt;

&lt;p&gt;I&apos;ve tried several times upgrading a multi-node setup (including nodes with JMS broker) and it has always worked. I only used the -901 -902 Fuse RPMs though.&lt;/p&gt;

&lt;p&gt;One thing I have not tested is an upgrade across domains like you did. Can&apos;t see how that would cause an issue though... I will try that out tomorrow.&lt;/p&gt;</comment>
                            <comment id="13005669" author="xuanjia" created="Wed, 24 Sep 2014 06:19:50 -0400"  >&lt;p&gt;Hmm , this time, i didn&apos;t create amq cartridge. It works. Maybe I should not create AMQ application when i test this scenario.  &lt;/p&gt;

&lt;p&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;root@broker ~&amp;#93;&lt;/span&gt;# oo-admin-upgrade upgrade-node --version 2.1&lt;br/&gt;
Upgrader started with options: {:version=&amp;gt;&quot;2.1&quot;, :ignore_cartridge_version=&amp;gt;false, :target_server_identity=&amp;gt;nil, :upgrade_position=&amp;gt;1, :num_upgraders=&amp;gt;1, :max_threads=&amp;gt;12, :gear_whitelist=&amp;gt;[], :num_tries=&amp;gt;2}&lt;br/&gt;
Building new upgrade queues and cluster metadata&lt;br/&gt;
Getting all active gears...&lt;br/&gt;
Getting all logins...&lt;br/&gt;
Writing 3 entries to gear queue for node node2.fuse-vsphere.com at /var/log/openshift/broker/upgrade/gear_queue_node2.fuse-vsphere.com&lt;br/&gt;
Writing 3 entries to gear queue for node node1.fuse-vsphere.com at /var/log/openshift/broker/upgrade/gear_queue_node1.fuse-vsphere.com&lt;br/&gt;
Writing node queue to /var/log/openshift/broker/upgrade/node_queue&lt;br/&gt;
Writing cluster metadata to /var/log/openshift/broker/upgrade/cluster_metadata&lt;br/&gt;
Loading cluster metadata from /var/log/openshift/broker/upgrade/cluster_metadata&lt;br/&gt;
Loading node queue from /var/log/openshift/broker/upgrade/node_queue&lt;br/&gt;
Upgrading node node2.fuse-vsphere.com from gear queue file at /var/log/openshift/broker/upgrade/gear_queue_node2.fuse-vsphere.com&lt;br/&gt;
Upgrading node node1.fuse-vsphere.com from gear queue file at /var/log/openshift/broker/upgrade/gear_queue_node1.fuse-vsphere.com&lt;br/&gt;
1 of 2 nodes completed&lt;br/&gt;
2 of 2 nodes completed&lt;br/&gt;
Writing updated node queue to /var/log/openshift/broker/upgrade/node_queue&lt;br/&gt;
#####################################################&lt;br/&gt;
Summary:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;of users: 1&lt;/li&gt;
	&lt;li&gt;of gears: 6&lt;/li&gt;
	&lt;li&gt;of failures: 0&lt;/li&gt;
	&lt;li&gt;of leftovers: 0&lt;br/&gt;
Gear counts per thread: &lt;span class=&quot;error&quot;&gt;&amp;#91;3, nil, nil, 3&amp;#93;&lt;/span&gt;&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Timings:&lt;br/&gt;
    start=1411551933.211s&lt;br/&gt;
    total=82.301s&lt;br/&gt;
Additional timings:&lt;br/&gt;
    gather_active_gears_total_time=20.431s&lt;br/&gt;
    gather_users_total_time=0.013s&lt;br/&gt;
#####################################################&lt;/p&gt;</comment>
                            <comment id="13005682" author="xuanjia" created="Wed, 24 Sep 2014 07:55:45 -0400"  >&lt;p&gt;Sorry, I still can reproduce this issue. Only use Fuse cartridge 396-901 and 396-902. Assume we have two nodes, and two domains.&lt;br/&gt;
domain1:&lt;br/&gt;
    fuse11(node1): root container&lt;br/&gt;
    fuse12(node1): created by rhc console&lt;br/&gt;
    fuse13(node2): created by rhc console&lt;br/&gt;
    container11(node1): created via Hawtio&lt;br/&gt;
    container12(node2): created via Hawtio&lt;/p&gt;

&lt;p&gt;domain2:&lt;br/&gt;
    fuse21(node2):root container&lt;br/&gt;
    fuse22(node1):created by rhc console&lt;br/&gt;
    fuse23(node2):created by rhc console&lt;br/&gt;
    container21(node1):created via Hawtio&lt;br/&gt;
    container22(node2): created via Hawtio&lt;/p&gt;

&lt;p&gt;TIPS: Stop ruby193-mcollecitve service, then app will no be created no this node. So if you want to create an app on node2. Make sure you have stopped ruby193-mcollective service on node1, and started it on node2.&lt;/p&gt;

&lt;p&gt;Then follow the document to upgrade. You could reproduce it. &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;root@broker ~&amp;#93;&lt;/span&gt;# oo-admin-upgrade upgrade-node --version 2.1&lt;br/&gt;
Upgrader started with options: {:version=&amp;gt;&quot;2.1&quot;, :ignore_cartridge_version=&amp;gt;false, :target_server_identity=&amp;gt;nil, :upgrade_position=&amp;gt;1, :num_upgraders=&amp;gt;1, :max_threads=&amp;gt;12, :gear_whitelist=&amp;gt;[], :num_tries=&amp;gt;2}&lt;br/&gt;
Building new upgrade queues and cluster metadata&lt;br/&gt;
Getting all active gears...&lt;br/&gt;
Getting all logins...&lt;br/&gt;
Writing 5 entries to gear queue for node node2.fuse-vsphere.com at /var/log/openshift/broker/upgrade/gear_queue_node2.fuse-vsphere.com&lt;br/&gt;
Writing 5 entries to gear queue for node node1.fuse-vsphere.com at /var/log/openshift/broker/upgrade/gear_queue_node1.fuse-vsphere.com&lt;br/&gt;
Writing node queue to /var/log/openshift/broker/upgrade/node_queue&lt;br/&gt;
Writing cluster metadata to /var/log/openshift/broker/upgrade/cluster_metadata&lt;br/&gt;
Loading cluster metadata from /var/log/openshift/broker/upgrade/cluster_metadata&lt;br/&gt;
Loading node queue from /var/log/openshift/broker/upgrade/node_queue&lt;br/&gt;
Upgrading node node2.fuse-vsphere.com from gear queue file at /var/log/openshift/broker/upgrade/gear_queue_node2.fuse-vsphere.com&lt;br/&gt;
Upgrading node node1.fuse-vsphere.com from gear queue file at /var/log/openshift/broker/upgrade/gear_queue_node1.fuse-vsphere.com&lt;br/&gt;
warn 2014/09/24 19:32:52: client.rb:218:in `rescue in start_receiver&apos; Could not receive all responses. Expected : 1. Received : 0&lt;br/&gt;
warn 2014/09/24 19:33:07: client.rb:218:in `rescue in start_receiver&apos; Could not receive all responses. Expected : 1. Received : 0&lt;br/&gt;
warn 2014/09/24 19:35:56: client.rb:218:in `rescue in start_receiver&apos; Could not receive all responses. Expected : 1. Received : 0&lt;br/&gt;
warn 2014/09/24 19:36:11: client.rb:218:in `rescue in start_receiver&apos; Could not receive all responses. Expected : 1. Received : 0&lt;br/&gt;
warn 2014/09/24 19:39:03: client.rb:218:in `rescue in start_receiver&apos; Could not receive all responses. Expected : 1. Received : 0&lt;br/&gt;
warn 2014/09/24 19:39:11: client.rb:218:in `rescue in start_receiver&apos; Could not receive all responses. Expected : 1. Received : 0&lt;br/&gt;
warn 2014/09/24 19:42:07: client.rb:218:in `rescue in start_receiver&apos; Could not receive all responses. Expected : 1. Received : 0&lt;br/&gt;
1 of 2 nodes completed&lt;br/&gt;
warn 2014/09/24 19:42:15: client.rb:218:in `rescue in start_receiver&apos; Could not receive all responses. Expected : 1. Received : 0&lt;br/&gt;
2 of 2 nodes completed&lt;br/&gt;
Writing updated node queue to /var/log/openshift/broker/upgrade/node_queue&lt;br/&gt;
!!!!!!!!!&lt;span class=&quot;error&quot;&gt;Unable to render embedded object: File (WARNING) not found.&lt;/span&gt;!!!!!!!!!!!&lt;span class=&quot;error&quot;&gt;Unable to render embedded object: File (WARNING) not found.&lt;/span&gt;!!!!!!!!!!&lt;span class=&quot;error&quot;&gt;Unable to render embedded object: File (WARNING) not found.&lt;/span&gt;!!!!!!!!!&lt;br/&gt;
The upgrade was incomplete due to unprocessed or failed gears&lt;br/&gt;
remaining in node gear queues:&lt;/p&gt;

&lt;p&gt;4 failed gears:&lt;br/&gt;
  node2.fuse-vsphere.com: 2&lt;br/&gt;
  node1.fuse-vsphere.com: 2&lt;/p&gt;

&lt;p&gt;You can run the upgrade again with the same arguments to continue.&lt;br/&gt;
!!!!!!!!!&lt;span class=&quot;error&quot;&gt;Unable to render embedded object: File (WARNING) not found.&lt;/span&gt;!!!!!!!!!!!&lt;span class=&quot;error&quot;&gt;Unable to render embedded object: File (WARNING) not found.&lt;/span&gt;!!!!!!!!!!&lt;span class=&quot;error&quot;&gt;Unable to render embedded object: File (WARNING) not found.&lt;/span&gt;!!!!!!!!!&lt;br/&gt;
#####################################################&lt;br/&gt;
Summary:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;of users: 1&lt;/li&gt;
	&lt;li&gt;of gears: 10&lt;/li&gt;
	&lt;li&gt;of failures: 4&lt;/li&gt;
	&lt;li&gt;of failures per state:&lt;br/&gt;
    Active: 4&lt;/li&gt;
	&lt;li&gt;of leftovers: 0&lt;br/&gt;
Gear counts per thread: &lt;span class=&quot;error&quot;&gt;&amp;#91;5, nil, nil, 5&amp;#93;&lt;/span&gt;&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Timings:&lt;br/&gt;
    start=1411558104.128s&lt;br/&gt;
    total=832.63s&lt;br/&gt;
Additional timings:&lt;br/&gt;
    gather_active_gears_total_time=20.444s&lt;br/&gt;
    gather_users_total_time=0.014s&lt;br/&gt;
#####################################################&lt;/p&gt;</comment>
                            <comment id="13006160" author="aileenc" created="Thu, 25 Sep 2014 11:02:21 -0400"  >&lt;p&gt;This happens when resources are limited, there are some improvements we can make to install script to lessen the likelihood of hittng this. &lt;/p&gt;</comment>
                            <comment id="13006268" author="janstey" created="Thu, 25 Sep 2014 17:53:01 -0400"  >&lt;p&gt;New RPMs for testing patch fixes:&lt;br/&gt;
Without patch - &lt;a href=&quot;https://repository.jboss.org/nexus/content/groups/ea/org/jboss/fuse/openshift-origin-cartridge-fuse/6.1.0.redhat.396-903/openshift-origin-cartridge-fuse-6.1.0.redhat.396-903-fc18.noarch.rpm&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://repository.jboss.org/nexus/content/groups/ea/org/jboss/fuse/openshift-origin-cartridge-fuse/6.1.0.redhat.396-903/openshift-origin-cartridge-fuse-6.1.0.redhat.396-903-fc18.noarch.rpm&lt;/a&gt;&lt;br/&gt;
With patch - &lt;a href=&quot;https://repository.jboss.org/nexus/content/groups/ea/org/jboss/fuse/openshift-origin-cartridge-fuse/6.1.0.redhat.396-904/openshift-origin-cartridge-fuse-6.1.0.redhat.396-904-fc18.noarch.rpm&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://repository.jboss.org/nexus/content/groups/ea/org/jboss/fuse/openshift-origin-cartridge-fuse/6.1.0.redhat.396-904/openshift-origin-cartridge-fuse-6.1.0.redhat.396-904-fc18.noarch.rpm&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Please adjust timeouts as per &lt;a href=&quot;https://issues.jboss.org/browse/ENTESB-1999&quot; title=&quot;fuse gear creation sometimes exceeds OSE install timeout  &amp;quot;exceeded timeout of&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ENTESB-1999&quot;&gt;&lt;del&gt;ENTESB-1999&lt;/del&gt;&lt;/a&gt; as well. For my 0.5 CPU VM, 400s was sufficient. Not sure if a higher amount is required for your environment.&lt;/p&gt;</comment>
                            <comment id="13006400" author="xuanjia" created="Fri, 26 Sep 2014 05:51:16 -0400"  >&lt;p&gt;This is my environment. &lt;br/&gt;
Broker: &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;root@broker ~&amp;#93;&lt;/span&gt;# cat /proc/cpuinfo &lt;br/&gt;
processor	: 0&lt;br/&gt;
vendor_id	: GenuineIntel&lt;br/&gt;
cpu family	: 6&lt;br/&gt;
model		: 45&lt;br/&gt;
model name	: Intel(R) Xeon(R) CPU E5-2620 0 @ 2.00GHz&lt;br/&gt;
stepping	: 7&lt;br/&gt;
cpu MHz		: 2000.000&lt;br/&gt;
cache size	: 15360 KB&lt;br/&gt;
fpu		: yes&lt;br/&gt;
fpu_exception	: yes&lt;br/&gt;
cpuid level	: 13&lt;br/&gt;
wp		: yes&lt;br/&gt;
flags		: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts mmx fxsr sse sse2 ss syscall nx rdtscp lm constant_tsc up arch_perfmon pebs bts xtopology tsc_reliable nonstop_tsc aperfmperf unfair_spinlock pni pclmulqdq ssse3 cx16 sse4_1 sse4_2 popcnt aes xsave avx hypervisor lahf_lm ida arat epb xsaveopt pln pts dts&lt;br/&gt;
bogomips	: 4000.00&lt;br/&gt;
clflush size	: 64&lt;br/&gt;
cache_alignment	: 64&lt;br/&gt;
address sizes	: 40 bits physical, 48 bits virtual&lt;br/&gt;
power management:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;root@broker ~&amp;#93;&lt;/span&gt;# free -m&lt;br/&gt;
             total       used       free     shared    buffers     cached&lt;br/&gt;
Mem:          7872       1927       5945          0        320        686&lt;br/&gt;
-/+ buffers/cache:        920       6952&lt;br/&gt;
Swap:         3071          0       3071&lt;/p&gt;

&lt;p&gt;Node:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;root@node1 ~&amp;#93;&lt;/span&gt;# cat /proc/cpuinfo&lt;br/&gt;
processor	: 0&lt;br/&gt;
vendor_id	: GenuineIntel&lt;br/&gt;
cpu family	: 6&lt;br/&gt;
model		: 45&lt;br/&gt;
model name	: Intel(R) Xeon(R) CPU E5-2620 0 @ 2.00GHz&lt;br/&gt;
stepping	: 7&lt;br/&gt;
cpu MHz		: 2000.000&lt;br/&gt;
cache size	: 15360 KB&lt;br/&gt;
fpu		: yes&lt;br/&gt;
fpu_exception	: yes&lt;br/&gt;
cpuid level	: 13&lt;br/&gt;
wp		: yes&lt;br/&gt;
flags		: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts mmx fxsr sse sse2 ss syscall nx rdtscp lm constant_tsc up arch_perfmon pebs bts xtopology tsc_reliable nonstop_tsc aperfmperf unfair_spinlock pni pclmulqdq ssse3 cx16 sse4_1 sse4_2 popcnt aes xsave avx hypervisor lahf_lm ida arat epb xsaveopt pln pts dts&lt;br/&gt;
bogomips	: 4000.00&lt;br/&gt;
clflush size	: 64&lt;br/&gt;
cache_alignment	: 64&lt;br/&gt;
address sizes	: 40 bits physical, 48 bits virtual&lt;br/&gt;
power management:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;root@node1 ~&amp;#93;&lt;/span&gt;# free -m&lt;br/&gt;
             total       used       free     shared    buffers     cached&lt;br/&gt;
Mem:         11912       9477       2435          0        666       7090&lt;br/&gt;
-/+ buffers/cache:       1719      10192&lt;br/&gt;
Swap:         3071          0       3071&lt;/p&gt;

&lt;p&gt;Node2:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;root@node2 ~&amp;#93;&lt;/span&gt;# cat /proc/cpuinfo&lt;br/&gt;
processor	: 0&lt;br/&gt;
vendor_id	: GenuineIntel&lt;br/&gt;
cpu family	: 6&lt;br/&gt;
model		: 45&lt;br/&gt;
model name	: Intel(R) Xeon(R) CPU E5-2620 0 @ 2.00GHz&lt;br/&gt;
stepping	: 7&lt;br/&gt;
cpu MHz		: 2000.000&lt;br/&gt;
cache size	: 15360 KB&lt;br/&gt;
fpu		: yes&lt;br/&gt;
fpu_exception	: yes&lt;br/&gt;
cpuid level	: 13&lt;br/&gt;
wp		: yes&lt;br/&gt;
flags		: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts mmx fxsr sse sse2 ss syscall nx rdtscp lm constant_tsc up arch_perfmon pebs bts xtopology tsc_reliable nonstop_tsc aperfmperf unfair_spinlock pni pclmulqdq ssse3 cx16 sse4_1 sse4_2 popcnt aes xsave avx hypervisor lahf_lm ida arat epb xsaveopt pln pts dts&lt;br/&gt;
bogomips	: 4000.00&lt;br/&gt;
clflush size	: 64&lt;br/&gt;
cache_alignment	: 64&lt;br/&gt;
address sizes	: 40 bits physical, 48 bits virtual&lt;br/&gt;
power management:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;root@node2 ~&amp;#93;&lt;/span&gt;# free -m&lt;br/&gt;
             total       used       free     shared    buffers     cached&lt;br/&gt;
Mem:         11912       7986       3926          0        286       5767&lt;br/&gt;
-/+ buffers/cache:       1932       9980&lt;br/&gt;
Swap:         5119          0       5119&lt;/p&gt;

&lt;p&gt;Now, only 3 gears failed to be upgraded.  I am wondering if memory size is not sufficient in resource_limit.conf, although i have set 300s for mcollecitve timeout.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12385224" name="broker_upgrade.log.tar" size="102400" author="xuanjia" created="Fri, 19 Sep 2014 02:43:16 -0400"/>
                            <attachment id="12385225" name="node1_upgrade.log.tar" size="563200" author="xuanjia" created="Fri, 19 Sep 2014 02:43:16 -0400"/>
                            <attachment id="12385226" name="node2_upgrade.log.tar" size="1269760" author="xuanjia" created="Fri, 19 Sep 2014 02:43:16 -0400"/>
                            <attachment id="12385202" name="upgrade_errors_node1.fuse-vsphere.com_2014-09-18-135525" size="1048" author="xuanjia" created="Thu, 18 Sep 2014 03:11:15 -0400"/>
                            <attachment id="12385201" name="upgrade_errors_node2.fuse-vsphere.com_2014-09-18-135525" size="12020" author="xuanjia" created="Thu, 18 Sep 2014 03:10:33 -0400"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310641" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Number of attachments</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310640" key="com.atlassian.jira.toolkit:comments">
                        <customfieldname>Number of comments</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311940" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1|hztazb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310840" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310183" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Steps to Reproduce</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;Set up this env:&lt;br/&gt;
1. One broker , two nodes with xpaas profile&lt;br/&gt;
2. Create two domains, one is fusedomain, the other one is amqdomain&lt;br/&gt;
3. For fusedomain, create a fuse(root container) application on node1, and another two applications(amq,fuse) created from rhc console on node2. Two containers created from Hawtio on node1.&lt;br/&gt;
4. For amqdomain, create an amq(root container) application on node2, and another two applications(amq,fuse)created from rhc console on node1. Thwo containers created from Hawtio on node2.&lt;br/&gt;
5. Following migration document to update env&lt;br/&gt;
6. &lt;span class=&quot;error&quot;&gt;&amp;#91;root@broker ~&amp;#93;&lt;/span&gt;# oo-admin-upgrade upgrade-node --version 2.1&lt;br/&gt;
Upgrader started with options: {:version=&amp;gt;&quot;2.1&quot;, :ignore_cartridge_version=&amp;gt;false, :target_server_identity=&amp;gt;nil, :upgrade_position=&amp;gt;1, :num_upgraders=&amp;gt;1, :max_threads=&amp;gt;12, :gear_whitelist=&amp;gt;[], :num_tries=&amp;gt;2}&lt;br/&gt;
Building new upgrade queues and cluster metadata&lt;br/&gt;
Getting all active gears...&lt;br/&gt;
Getting all logins...&lt;br/&gt;
Writing 5 entries to gear queue for node node2.fuse-vsphere.com at /var/log/openshift/broker/upgrade/gear_queue_node2.fuse-vsphere.com&lt;br/&gt;
Writing 5 entries to gear queue for node node1.fuse-vsphere.com at /var/log/openshift/broker/upgrade/gear_queue_node1.fuse-vsphere.com&lt;br/&gt;
Writing node queue to /var/log/openshift/broker/upgrade/node_queue&lt;br/&gt;
Writing cluster metadata to /var/log/openshift/broker/upgrade/cluster_metadata&lt;br/&gt;
Loading cluster metadata from /var/log/openshift/broker/upgrade/cluster_metadata&lt;br/&gt;
Loading node queue from /var/log/openshift/broker/upgrade/node_queue&lt;br/&gt;
Upgrading node node2.fuse-vsphere.com from gear queue file at /var/log/openshift/broker/upgrade/gear_queue_node2.fuse-vsphere.com&lt;br/&gt;
Upgrading node node1.fuse-vsphere.com from gear queue file at /var/log/openshift/broker/upgrade/gear_queue_node1.fuse-vsphere.com&lt;br/&gt;
warn 2014/09/18 13:34:25: client.rb:218:in `rescue in start_receiver&apos; Could not receive all responses. Expected : 1. Received : 0&lt;br/&gt;
warn 2014/09/18 13:37:29: client.rb:218:in `rescue in start_receiver&apos; Could not receive all responses. Expected : 1. Received : 0&lt;br/&gt;
warn 2014/09/18 13:38:04: client.rb:218:in `rescue in start_receiver&apos; Could not receive all responses. Expected : 1. Received : 0&lt;br/&gt;
warn 2014/09/18 13:40:34: client.rb:218:in `rescue in start_receiver&apos; Could not receive all responses. Expected : 1. Received : 0&lt;br/&gt;
warn 2014/09/18 13:41:08: client.rb:218:in `rescue in start_receiver&apos; Could not receive all responses. Expected : 1. Received : 0&lt;br/&gt;
1 of 2 nodes completed&lt;br/&gt;
warn 2014/09/18 13:44:08: client.rb:218:in `rescue in start_receiver&apos; Could not receive all responses. Expected : 1. Received : 0&lt;br/&gt;
warn 2014/09/18 13:47:12: client.rb:218:in `rescue in start_receiver&apos; Could not receive all responses. Expected : 1. Received : 0&lt;br/&gt;
2 of 2 nodes completed&lt;br/&gt;
Writing updated node queue to /var/log/openshift/broker/upgrade/node_queue&lt;br/&gt;
!!!!!!!!!&lt;span class=&quot;error&quot;&gt;Unable to render embedded object: File (WARNING) not found.&lt;/span&gt;!!!!!!!!!!!&lt;span class=&quot;error&quot;&gt;Unable to render embedded object: File (WARNING) not found.&lt;/span&gt;!!!!!!!!!!&lt;span class=&quot;error&quot;&gt;Unable to render embedded object: File (WARNING) not found.&lt;/span&gt;!!!!!!!!!&lt;br/&gt;
The upgrade was incomplete due to unprocessed or failed gears&lt;br/&gt;
remaining in node gear queues:&lt;/p&gt;

&lt;p&gt;4 failed gears:&lt;br/&gt;
  node2.fuse-vsphere.com: 2&lt;br/&gt;
  node1.fuse-vsphere.com: 2&lt;/p&gt;

&lt;p&gt;You can run the upgrade again with the same arguments to continue.&lt;br/&gt;
!!!!!!!!!&lt;span class=&quot;error&quot;&gt;Unable to render embedded object: File (WARNING) not found.&lt;/span&gt;!!!!!!!!!!!&lt;span class=&quot;error&quot;&gt;Unable to render embedded object: File (WARNING) not found.&lt;/span&gt;!!!!!!!!!!&lt;span class=&quot;error&quot;&gt;Unable to render embedded object: File (WARNING) not found.&lt;/span&gt;!!!!!!!!!&lt;br/&gt;
#####################################################&lt;br/&gt;
Summary:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;of users: 2&lt;/li&gt;
	&lt;li&gt;of gears: 10&lt;/li&gt;
	&lt;li&gt;of failures: 4&lt;/li&gt;
	&lt;li&gt;of failures per state:&lt;br/&gt;
    Active: 4&lt;/li&gt;
	&lt;li&gt;of leftovers: 0&lt;br/&gt;
Gear counts per thread: &lt;span class=&quot;error&quot;&gt;&amp;#91;5, nil, 5&amp;#93;&lt;/span&gt;&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Timings:&lt;br/&gt;
    start=1411018238.803s&lt;br/&gt;
    total=994.907s&lt;br/&gt;
Additional timings:&lt;br/&gt;
    gather_active_gears_total_time=20.451s&lt;br/&gt;
    gather_users_total_time=0.012s&lt;br/&gt;
#####################################################&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>