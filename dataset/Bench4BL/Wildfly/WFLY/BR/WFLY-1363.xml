<!-- 
RSS generated by JIRA (7.2.3#72005-sha1:73be91d2b96fc29303a7eb6820acf420e5d0ed65) at Tue Dec 06 14:54:26 EST 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.jboss.org/si/jira.issueviews:issue-xml/WFLY-1363/WFLY-1363.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>JBoss Issue Tracker</title>
    <link>https://issues.jboss.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>7.2.3</version>
        <build-number>72005</build-number>
        <build-date>06-10-2016</build-date>
    </build-info>

<item>
            <title>[WFLY-1363] Updating deployment with dependant</title>
                <link>https://issues.jboss.org/browse/WFLY-1363</link>
                <project id="12313721" key="WFLY">WildFly</project>
                    <description>&lt;p&gt;I&apos;m faced with a certain deployment issue, for which I&apos;ve created a small maven project (see attachment) so anyone can easily reproduce this behaviour.&lt;/p&gt;

&lt;p&gt;I have a scenario where I have two EAR deployments: base.ear and service.ear. The latter uses some services of the former. For this to work, it has all the necessary entries in its manifest.&lt;br/&gt;
Once deployed, I can call the EJB from service.ear and the EJB from base.ear gets injected and used. No problems so far.&lt;/p&gt;

&lt;p&gt;This works fine, until I want to update base.ear.&lt;/p&gt;

&lt;p&gt;We have our own mechanism to update deployments (through the management API), but the same result can be achieved by deploying through the JBoss Admin console or JBoss CLI.&lt;br/&gt;
So, when I update base.ear (just replace with the same base.ear file) it deploys fine and the invocation is successful. However, there&apos;s one line in the console which goes like:&lt;br/&gt;
JBAS014777:   Services which failed to start:      service jboss.deployment.subunit.&quot;service.ear&quot;.&quot;service-ejb.jar&quot;.FIRST_MODULE_USE: org.jboss.msc.service.StartException in service jboss.deployment.subunit.&quot;service.ear&quot;.&quot;service-ejb.jar&quot;.FIRST_MODULE_USE: JBAS018733: Failed to process phase FIRST_MODULE_USE of subdepl&lt;br/&gt;
oyment &quot;service-ejb.jar&quot; of deployment &quot;service.ear&quot;&lt;/p&gt;

&lt;p&gt;At this moment, the service.ear, and all its EJBs, isn&apos;t really deployed anymore. Or atleast, wrongfully deployed. Not sure how to call that state.&lt;br/&gt;
One possibility is to invoke the :reload command (or restart the server), but ideally we&apos;d like to not have this error in the first place.&lt;/p&gt;
</description>
                <environment>&lt;p&gt;Windows 7 64bit, JBoss 7.2.0.Final&lt;/p&gt;</environment>
        <key id="12492100">WFLY-1363</key>
            <summary>Updating deployment with dependant</summary>
                <type id="1" iconUrl="https://issues.jboss.org/secure/viewavatar?size=xsmall&amp;avatarId=13263&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.jboss.org/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.jboss.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Done</resolution>
                                        <assignee username="jason.greene">Jason Greene</assignee>
                                    <reporter username="ansur">Bart Van Dosselaer</reporter>
                        <labels>
                            <label>deployment</label>
                    </labels>
                <created>Fri, 17 May 2013 11:08:27 -0400</created>
                <updated>Tue, 17 Nov 2015 13:12:53 -0500</updated>
                            <resolved>Tue, 17 Nov 2015 13:12:53 -0500</resolved>
                                                    <fixVersion>8.0.0.Alpha1</fixVersion>
                                    <component>Server</component>
                        <due></due>
                            <votes>4</votes>
                                    <watches>7</watches>
                                                                <comments>
                            <comment id="12775078" author="ansur" created="Fri, 17 May 2013 11:09:15 -0400"  >&lt;p&gt;Maven project to reproduce the issue.&lt;/p&gt;</comment>
                            <comment id="12801160" author="ctomc" created="Tue, 3 Sep 2013 09:39:10 -0400"  >&lt;p&gt;Did you try with jboss-all.xml and adding deployment dependency configuration?&lt;/p&gt;</comment>
                            <comment id="12801183" author="ansur" created="Tue, 3 Sep 2013 10:03:36 -0400"  >&lt;p&gt;Just did - the same result, but a different error:&lt;/p&gt;

&lt;p&gt;16:00:11,102 ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;org.jboss.msc.service.fail&amp;#93;&lt;/span&gt; (MSC service thread 1-5) MSC00001: Failed to start service jboss.deployment.unit.&quot;service.ear&quot;.PARSE: org.jboss.&lt;br/&gt;
msc.service.StartException in service jboss.deployment.unit.&quot;service.ear&quot;.PARSE: JBAS018733: Failed to process phase PARSE of deployment &quot;service.ear&quot;&lt;br/&gt;
        at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:127) &lt;span class=&quot;error&quot;&gt;&amp;#91;jboss-as-server-7.2.0.Final.jar:7.2.0.Final&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) &lt;span class=&quot;error&quot;&gt;&amp;#91;jboss-msc-1.0.4.GA.jar:1.0.4.GA&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) &lt;span class=&quot;error&quot;&gt;&amp;#91;jboss-msc-1.0.4.GA.jar:1.0.4.GA&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145) &lt;span class=&quot;error&quot;&gt;&amp;#91;rt.jar:1.7.0_25&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615) &lt;span class=&quot;error&quot;&gt;&amp;#91;rt.jar:1.7.0_25&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:724) &lt;span class=&quot;error&quot;&gt;&amp;#91;rt.jar:1.7.0_25&amp;#93;&lt;/span&gt;&lt;br/&gt;
Caused by: java.lang.IllegalStateException&lt;br/&gt;
        at org.jboss.as.webservices.util.ASHelper.getRequiredAttachment(ASHelper.java:162)&lt;br/&gt;
        at org.jboss.as.webservices.deployers.WSIntegrationProcessorJAXWS_EJB.processAnnotation(WSIntegrationProcessorJAXWS_EJB.java:81)&lt;br/&gt;
        at org.jboss.as.webservices.deployers.WSIntegrationProcessorJAXWS_EJB.deploy(WSIntegrationProcessorJAXWS_EJB.java:70)&lt;br/&gt;
        at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:120) &lt;span class=&quot;error&quot;&gt;&amp;#91;jboss-as-server-7.2.0.Final.jar:7.2.0.Final&amp;#93;&lt;/span&gt;&lt;br/&gt;
        ... 5 more&lt;/p&gt;</comment>
                            <comment id="12801187" author="ansur" created="Tue, 3 Sep 2013 10:04:27 -0400"  >&lt;p&gt;Updated with jboss-all.xml configuration in service.ear&lt;/p&gt;</comment>
                            <comment id="12801195" author="ansur" created="Tue, 3 Sep 2013 10:14:24 -0400"  >&lt;p&gt;Just tested the same scenario with wildfly-8.0.0.Alpha4 - there it works.&lt;/p&gt;

&lt;p&gt;So the only way to have this working is to switch from JBoss 7.2.0 to WildFly 8?&lt;/p&gt;</comment>
                            <comment id="12801402" author="gamba" created="Wed, 4 Sep 2013 03:18:00 -0400"  >&lt;p&gt;We use EAP 6.1.0. Same error with jboss-all.xml &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.jboss.org/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13129740" author="bmaxwell" created="Tue, 17 Nov 2015 12:32:35 -0500"  >&lt;p&gt;Looks like duplicate of &lt;a href=&quot;https://issues.jboss.org/browse/WFLY-975&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.jboss.org/browse/WFLY-975&lt;/a&gt; - which is fixed in wildfly, I tested wildfly-10.0.0.CR4 , deployed a depends on b, then redeployed a and then redeployed b, and did not get the IllegalStateException that I saw in EAP 6.4, so I would say this Wildfly jira is resolved in Wildlfy&lt;/p&gt;
</comment>
                            <comment id="13129897" author="bmaxwell" created="Tue, 17 Nov 2015 13:11:15 -0500"  >&lt;p&gt;Fixed in EAP 6.3 and beyond - via &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=924562&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://bugzilla.redhat.com/show_bug.cgi?id=924562&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310220">
                    <name>Causality</name>
                                            <outwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="12487614">WFLY-975</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12364420" name="jboss-deployment.zip" size="12566" author="ansur" created="Tue, 3 Sep 2013 10:04:27 -0400"/>
                            <attachment id="12362588" name="jboss-deployment.zip" size="11355" author="ansur" created="Fri, 17 May 2013 11:09:15 -0400"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310440" key="org.jboss.labs.jira.plugin.jboss-custom-field-types-plugin:multiurl">
                        <customfieldname>Bugzilla References</customfieldname>
                        <customfieldvalues>
                            https://bugzilla.redhat.com/show_bug.cgi?id=924562
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310341" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bugzilla Update</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10250"><![CDATA[Perform]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310641" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Number of attachments</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310640" key="com.atlassian.jira.toolkit:comments">
                        <customfieldname>Number of comments</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>8.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311940" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1|hzgx6v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310840" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>159148</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310183" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Steps to Reproduce</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;Build the attached maven project.&lt;/p&gt;

&lt;p&gt;1. deploy base.ear&lt;br/&gt;
2. deploy service.ear&lt;br/&gt;
3. replace base.ear with the same file&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310091" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Workaround Description</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;after deployment, issue the :reload command&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>