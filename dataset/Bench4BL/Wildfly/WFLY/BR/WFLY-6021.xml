<!-- 
RSS generated by JIRA (7.2.3#72005-sha1:73be91d2b96fc29303a7eb6820acf420e5d0ed65) at Tue Dec 06 15:40:40 EST 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.jboss.org/si/jira.issueviews:issue-xml/WFLY-6021/WFLY-6021.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>JBoss Issue Tracker</title>
    <link>https://issues.jboss.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>7.2.3</version>
        <build-number>72005</build-number>
        <build-date>06-10-2016</build-date>
    </build-info>

<item>
            <title>[WFLY-6021] Default transaction timeout is not applied for EJB bean when set for second time</title>
                <link>https://issues.jboss.org/browse/WFLY-6021</link>
                <project id="12313721" key="WFLY">WildFly</project>
                    <description>&lt;p&gt;It seems that transaction subsystem attribute &lt;tt&gt;default-timeout&lt;/tt&gt; does not have any effect for EJB if it&apos;s redefined. It means if I set the default transaction timeout in transaction subystem for second (and next) time it&apos;s not applied for EJB beans. It&apos;s used the firstly set value.&lt;/p&gt;

&lt;p&gt;The transaction timeout is not changed for EJB when server is reloaded. When server is restarted it refreshes all settings and EJB starts using the expected value for timeout settings.&lt;/p&gt;

&lt;p&gt;If the value is read from subsystem&lt;br/&gt;
&lt;tt&gt;/subsystem=transactions:read-attribute(name=default-timeout)&lt;/tt&gt;&lt;br/&gt;
it shows correct value (that one set for second time). But EJB seems not applying it.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12599801">WFLY-6021</key>
            <summary>Default transaction timeout is not applied for EJB bean when set for second time</summary>
                <type id="1" iconUrl="https://issues.jboss.org/secure/viewavatar?size=xsmall&amp;avatarId=13263&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.jboss.org/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.jboss.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Done</resolution>
                                        <assignee username="fedor.gavrilov">Fedor Gavrilov</assignee>
                                    <reporter username="ochaloup">Ondra Chaloupka</reporter>
                        <labels>
                    </labels>
                <created>Mon, 18 Jan 2016 05:21:44 -0500</created>
                <updated>Thu, 27 Oct 2016 06:36:10 -0400</updated>
                            <resolved>Thu, 27 Oct 2016 06:36:10 -0400</resolved>
                                                    <fixVersion>10.2.0.Final</fixVersion>
                                    <component>EJB</component>
                    <component>Transactions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13156168" author="tomjenkinson" created="Thu, 28 Jan 2016 16:26:48 -0500"  >&lt;p&gt;It is marked as requires reload in the meta-data: &lt;a href=&quot;https://github.com/wildfly/wildfly/blob/master/transactions/src/main/java/org/jboss/as/txn/subsystem/TransactionSubsystemRootResourceDefinition.java#L145&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/wildfly/wildfly/blob/master/transactions/src/main/java/org/jboss/as/txn/subsystem/TransactionSubsystemRootResourceDefinition.java#L145&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;That said, if it was hooked up to &lt;a href=&quot;https://github.com/jbosstm/narayana/blob/master/ArjunaCore/arjuna/classes/com/arjuna/ats/arjuna/coordinator/TxControl.java#L88&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/jbosstm/narayana/blob/master/ArjunaCore/arjuna/classes/com/arjuna/ats/arjuna/coordinator/TxControl.java#L88&lt;/a&gt; then it would work at runtime without a reload required I believe.&lt;/p&gt;</comment>
                            <comment id="13156171" author="brian.stansberry" created="Thu, 28 Jan 2016 16:35:53 -0500"  >&lt;p&gt;It&apos;s interesting then that Ond&#345;ej reports that a reload doesn&apos;t result in a behavior change, only a restart does. (The Steps to Reproduce don&apos;t mention a reload but the main JIRA description says reload is ineffective.)&lt;/p&gt;

&lt;p&gt;It would be great if this didn&apos;t require a reload at all. That&apos;s the goal for most any attribute.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310120">
                    <name>Cloners</name>
                                            <outwardlinks description="cloned from">
                                        <issuelink>
            <issuekey id="12599800">JBEAP-2833</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="org.jboss.labs.jira.plugin.jboss-custom-field-types-plugin:multiurl">
                        <customfieldname>Git Pull Request</customfieldname>
                        <customfieldvalues>
                            https://github.com/wildfly/wildfly/pull/8682
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310641" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Number of attachments</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310640" key="com.atlassian.jira.toolkit:comments">
                        <customfieldname>Number of comments</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311940" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1|i00t73:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310840" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310183" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Steps to Reproduce</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;ul&gt;
	&lt;li&gt;Start EAP server&lt;/li&gt;
	&lt;li&gt;Deploy app with EJB&lt;/li&gt;
	&lt;li&gt;Define transaction timeout
	&lt;ul&gt;
		&lt;li&gt;&lt;tt&gt;/subsystem=transactions:write-attribute(name=default-timeout, value = 1)&lt;/tt&gt;&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;Call ejb method with Thread sleep greater than 1 (e.g. 5 seconds)
	&lt;ul&gt;
		&lt;li&gt;transaction will be timeouted (timeout is 1, sleep time is 5)&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;Define transaction timeout greater than bean sleep time (e.g. 10 seconds)
	&lt;ul&gt;
		&lt;li&gt;&lt;tt&gt;/subsystem=transactions:write-attribute(name=default-timeout, value = 10)&lt;/tt&gt;&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;Call ejb method with Thread sleep less than 10 (e.g. 5 seconds)
	&lt;ul&gt;
		&lt;li&gt;transaction should not be timeouted (but it&apos;s which is wrong)&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;There is a reproducer in eap management testsuite&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;tt&gt;git clone &lt;a href=&quot;http://git.app.eng.bos.redhat.com/git/jbossqe-eap-tests-management.git&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://git.app.eng.bos.redhat.com/git/jbossqe-eap-tests-management.git&lt;/a&gt;&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;cd jbossqe-eap-tests-management&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;mvn clean integration-test -Dit.test=TimeoutITManual -Pintegration-tests -Djboss.home=$JBOSS_HOME&lt;/tt&gt;&lt;/li&gt;
&lt;/ul&gt;
</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>