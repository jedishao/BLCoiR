<!-- 
RSS generated by JIRA (7.2.3#72005-sha1:73be91d2b96fc29303a7eb6820acf420e5d0ed65) at Tue Dec 06 13:35:41 EST 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.jboss.org/si/jira.issueviews:issue-xml/WFLY-2689/WFLY-2689.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>JBoss Issue Tracker</title>
    <link>https://issues.jboss.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>7.2.3</version>
        <build-number>72005</build-number>
        <build-date>06-10-2016</build-date>
    </build-info>

<item>
            <title>[WFLY-2689] @Producer method never called when producing a bean from a static module</title>
                <link>https://issues.jboss.org/browse/WFLY-2689</link>
                <project id="12313721" key="WFLY">WildFly</project>
                    <description>&lt;p&gt;I&apos;ve configured a static module for PicketLink CDI library. This library provides some extensions which are loaded fine, as described by &lt;a href=&quot;https://issues.jboss.org/browse/WFLY-1370&quot; title=&quot;Add ability to load CDI portable extensions from static modules&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WFLY-1370&quot;&gt;&lt;del&gt;WFLY-1370&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;However, I&apos;m trying to deploy my application which the following producer method:&lt;/p&gt;

&lt;p/&gt;
&lt;div id=&quot;syntaxplugin&quot; class=&quot;syntaxplugin&quot; style=&quot;border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;&quot;&gt;
&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; border=&quot;0&quot; width=&quot;100%&quot; style=&quot;font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;&quot;&gt;
		&lt;tbody &gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;@Produces&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;@PicketLink&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;public PartitionManager getPartitionManager() {&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;    // produce an instance&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;}&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
			&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;p/&gt;

&lt;p&gt;Where the @PicketLink annotation is a qualifier that allows my deployment to provide its own instance instead.&lt;/p&gt;

&lt;p&gt;In the PicketLink side, we have a injection point as follows:&lt;/p&gt;

&lt;p&gt;@Inject&lt;br/&gt;
@PicketLink&lt;br/&gt;
private Instance&amp;lt;PartitionManager&amp;gt; partitionManagerInstance;&lt;/p&gt;

&lt;p&gt;Where a call to partitionManagerInstance.isUnsatisfied() always returns true, even if my deployment provides a proper producer method.&lt;/p&gt;

&lt;p&gt;The issue here is that the producer method is never called, despite the use of qualifiers or not.&lt;/p&gt;

&lt;p&gt;FYI, I&apos;m able to listen for events fired by PicketLink during the application startup as follows:&lt;/p&gt;

&lt;p&gt;public void observeIdentityConfigurationEvent(@Observes IdentityConfigurationEvent event) &lt;/p&gt;
{
    // observer
}

&lt;p&gt;Where IdentityConfigurationEvent is one of the lifecycle events fired by PicketLink during the startup.&lt;/p&gt;</description>
                <environment>&lt;p&gt;WildFly 8.0.0.CR1&lt;/p&gt;</environment>
        <key id="12528426">WFLY-2689</key>
            <summary>@Producer method never called when producing a bean from a static module</summary>
                <type id="1" iconUrl="https://issues.jboss.org/secure/viewavatar?size=xsmall&amp;avatarId=13263&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.jboss.org/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.jboss.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Done</resolution>
                                        <assignee username="jharting">Jozef Hartinger</assignee>
                                    <reporter username="pcraveiro">Pedro Igor</reporter>
                        <labels>
                    </labels>
                <created>Thu, 26 Dec 2013 07:32:01 -0500</created>
                <updated>Thu, 4 Sep 2014 09:37:48 -0400</updated>
                            <resolved>Fri, 28 Mar 2014 12:29:01 -0400</resolved>
                                    <version>8.0.0.CR1</version>
                                    <fixVersion>8.0.0.Final</fixVersion>
                                    <component>CDI / Weld</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="12933245" author="pcraveiro" created="Fri, 27 Dec 2013 09:02:41 -0500"  >&lt;p&gt;FYI, the same code works for EAP 6.1 and 6.2.&lt;/p&gt;</comment>
                            <comment id="12933397" author="jharting" created="Thu, 2 Jan 2014 10:44:31 -0500"  >&lt;p&gt;Bean accessibility follows classloader isolation - a bean from a deployment is not considered accessible from a bean in a static module. We cannot change this until &lt;a href=&quot;https://issues.jboss.org/browse/WELD-1536&quot; title=&quot;Cross-BDA resolution should not be transitive&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WELD-1536&quot;&gt;&lt;del&gt;WELD-1536&lt;/del&gt;&lt;/a&gt; is resolved.&lt;/p&gt;</comment>
                            <comment id="12933513" author="pcraveiro" created="Thu, 2 Jan 2014 17:27:10 -0500"  >&lt;p&gt;Thanks Jozef. I&apos;m happy that this issue is already being addressed.&lt;/p&gt;</comment>
                            <comment id="12937272" author="jharting" created="Mon, 20 Jan 2014 11:22:09 -0500"  >&lt;p&gt;I fixed &lt;a href=&quot;https://issues.jboss.org/browse/WFLY-2761&quot; title=&quot;Make it possible for static cdi-enabled modules to see the beans in top-level deployments&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WFLY-2761&quot;&gt;&lt;del&gt;WFLY-2761&lt;/del&gt;&lt;/a&gt; which I think is the root cause of this issue. Can you verify that your testcase works with &lt;a href=&quot;https://github.com/jharting/wildfly/tree/WFLY-2761?&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/jharting/wildfly/tree/WFLY-2761?&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12937604" author="pcraveiro" created="Tue, 21 Jan 2014 11:12:03 -0500"  >&lt;p&gt;Hi Josef,&lt;/p&gt;

&lt;p&gt;     Yes they are all working now ! Thank you very much  !&lt;/p&gt;

&lt;p&gt;     Without your changes the following test case is not working:&lt;/p&gt;

&lt;p&gt;         &lt;a href=&quot;https://github.com/pedroigor/wildfly/blob/pl-extension/testsuite/integration/basic/src/test/java/org/jboss/as/test/integration/picketlink/core/PartitionManagerProducerTestCase.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/pedroigor/wildfly/blob/pl-extension/testsuite/integration/basic/src/test/java/org/jboss/as/test/integration/picketlink/core/PartitionManagerProducerTestCase.java&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;     I&apos;m still writing some more tests, but I think this fix will help them as well.&lt;/p&gt;

&lt;p&gt;     This was an important piece to get some more PL features into WildFly.]&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                            <comment id="12937618" author="jharting" created="Tue, 21 Jan 2014 11:32:02 -0500"  >&lt;p&gt;Note that the @Producer will always only be picked up from a top-level deployment unit (e.g. a war or ear/lib), not from subdeployments.&lt;/p&gt;</comment>
                            <comment id="12937619" author="pcraveiro" created="Tue, 21 Jan 2014 11:35:45 -0500"  >&lt;p&gt;That should be fine for most of our use cases.&lt;/p&gt;</comment>
                            <comment id="12957409" author="jharting" created="Fri, 28 Mar 2014 12:29:01 -0400"  >&lt;p&gt;I believe this was resolved for 8.0.0.Final. Feel free to reopen if I am wrong.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10012">
                    <name>Dependency</name>
                                            <outwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12508769">WELD-1536</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12529575">WFLY-2761</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12529014">WFLY-2733</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12524472">PLINK-319</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310001">
                    <name>Related</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12492364">WFLY-1370</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310641" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Number of attachments</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310640" key="com.atlassian.jira.toolkit:comments">
                        <customfieldname>Number of comments</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>8.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311940" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1|hzlmkv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310840" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>186443</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310183" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Steps to Reproduce</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;1) Please clone this branch:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/pedroigor/picketlink-as-subsystem/tree/WFLY_8.PLINK-348&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/pedroigor/picketlink-as-subsystem/tree/WFLY_8.PLINK-348&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;2) Run  mvn -Pintegration-tests clean install&lt;/p&gt;

&lt;p&gt;3) Start WildFly from the following location target/integration-tests/containers/wildfly-8.0.0.CR1/&lt;/p&gt;

&lt;p&gt;4) Run the following Arquillian test: test.org.picketlink.as.subsystem.core.integration.AuthenticationWithSubsystemPartitionManagerTestCase&lt;/p&gt;

&lt;p&gt;The test.org.picketlink.as.subsystem.core.integration.MyPartitionManagerProducer producer method is never called.&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>