<!-- 
RSS generated by JIRA (7.2.3#72005-sha1:73be91d2b96fc29303a7eb6820acf420e5d0ed65) at Tue Dec 06 13:47:36 EST 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.jboss.org/si/jira.issueviews:issue-xml/WFLY-4579/WFLY-4579.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>JBoss Issue Tracker</title>
    <link>https://issues.jboss.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>7.2.3</version>
        <build-number>72005</build-number>
        <build-date>06-10-2016</build-date>
    </build-info>

<item>
            <title>[WFLY-4579] BeanManager method getBeans() is not available during application initialization</title>
                <link>https://issues.jboss.org/browse/WFLY-4579</link>
                <project id="12313721" key="WFLY">WildFly</project>
                    <description>&lt;p&gt;Deployment of an EAR fails because of this exception:&lt;/p&gt;

&lt;p&gt;09:34:30,854 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;org.jboss.weld.deployer&amp;#93;&lt;/span&gt; (MSC service thread 1-2) JBAS016002: Processing weld deployment Project-ejb.jar&lt;br/&gt;
09:34:30,862 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;org.jboss.as.ejb3.deployment.processors.EjbJndiBindingsDeploymentUnitProcessor&amp;#93;&lt;/span&gt; (MSC service thread 1-2) JNDI bindings for session bean named ModelContext in deployment unit subdeployment &quot;Project-ejb.jar&quot; of deployment &quot;Project-ear-0.1.0-SNAPSHOT.ear&quot; are as follows:&lt;/p&gt;

&lt;p&gt;        java:global/Project-ear-0.1.0-SNAPSHOT/Project-ejb/ModelContext!simulator.ModelContext&lt;br/&gt;
        java:app/Project-ejb/ModelContext!simulator.ModelContext&lt;br/&gt;
        java:module/ModelContext!simulator.ModelContext&lt;br/&gt;
        java:global/Project-ear-0.1.0-SNAPSHOT/Project-ejb/ModelContext&lt;br/&gt;
        java:app/Project-ejb/ModelContext&lt;br/&gt;
        java:module/ModelContext&lt;/p&gt;

&lt;p&gt;09:34:30,863 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;org.jboss.as.ejb3.deployment.processors.EjbJndiBindingsDeploymentUnitProcessor&amp;#93;&lt;/span&gt; (MSC service thread 1-2) JNDI bindings for session bean named AccountsBean in deployment unit subdeployment &quot;Project-ejb.jar&quot; of deployment &quot;Project-ear-0.1.0-SNAPSHOT.ear&quot; are as follows:&lt;/p&gt;

&lt;p&gt;        java:global/Project-ear-0.1.0-SNAPSHOT/Project-ejb/AccountsBean!simulator.AccountsBean&lt;br/&gt;
        java:app/Project-ejb/AccountsBean!simulator.AccountsBean&lt;br/&gt;
        java:module/AccountsBean!simulator.AccountsBean&lt;br/&gt;
        java:global/Project-ear-0.1.0-SNAPSHOT/Project-ejb/AccountsBean&lt;br/&gt;
        java:app/Project-ejb/AccountsBean&lt;br/&gt;
        java:module/AccountsBean&lt;/p&gt;

&lt;p&gt;09:34:30,864 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;org.jboss.as.ejb3.deployment.processors.EjbJndiBindingsDeploymentUnitProcessor&amp;#93;&lt;/span&gt; (MSC service thread 1-2) JNDI bindings for session bean named ContactsBean in deployment unit subdeployment &quot;Project-ejb.jar&quot; of deployment &quot;Project-ear-0.1.0-SNAPSHOT.ear&quot; are as follows:&lt;/p&gt;

&lt;p&gt;        java:global/Project-ear-0.1.0-SNAPSHOT/Project-ejb/ContactsBean!simulator.ContactsBean&lt;br/&gt;
        java:app/Project-ejb/ContactsBean!simulator.ContactsBean&lt;br/&gt;
        java:module/ContactsBean!simulator.ContactsBean&lt;br/&gt;
        java:global/Project-ear-0.1.0-SNAPSHOT/Project-ejb/ContactsBean&lt;br/&gt;
        java:app/Project-ejb/ContactsBean&lt;br/&gt;
        java:module/ContactsBean&lt;/p&gt;

&lt;p&gt;09:34:30,892 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;org.jboss.weld.deployer&amp;#93;&lt;/span&gt; (MSC service thread 1-1) JBAS016002: Processing weld deployment Project-webapp.war&lt;br/&gt;
09:34:30,954 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;org.jboss.weld.deployer&amp;#93;&lt;/span&gt; (MSC service thread 1-1) JBAS016005: Starting Services for CDI deployment: Project-ear-0.1.0-SNAPSHOT.ear&lt;br/&gt;
09:34:31,016 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;org.jboss.weld.Version&amp;#93;&lt;/span&gt; (MSC service thread 1-1) &lt;a href=&quot;https://issues.jboss.org/browse/WELD-900&quot; title=&quot;Docs: Improve Weld reference. Make it less poetic and more structured.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WELD-900&quot;&gt;&lt;del&gt;WELD-000900&lt;/del&gt;&lt;/a&gt;: 2.2.6 (Final)&lt;br/&gt;
09:34:31,169 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;org.jboss.weld.deployer&amp;#93;&lt;/span&gt; (MSC service thread 1-3) JBAS016008: Starting weld service for deployment Project-ear-0.1.0-SNAPSHOT.ear&lt;/p&gt;

&lt;p&gt;09:34:32,203 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;javax.enterprise.resource.webcontainer.jsf.config&amp;#93;&lt;/span&gt; (MSC service thread 1-1) Mojarra 2.2.8-jbossorg-1 20140822-1131 f&#179;r Kontext &apos;/v1&apos; wird initialisiert.&lt;br/&gt;
09:34:33,738 SEVERE &lt;span class=&quot;error&quot;&gt;&amp;#91;javax.enterprise.resource.webcontainer.jsf.config&amp;#93;&lt;/span&gt; (MSC service thread 1-1) Critical error during deployment: : org.jboss.weld.exceptions.IllegalStateException: &lt;a href=&quot;https://issues.jboss.org/browse/WELD-1332&quot; title=&quot;Make raw bean type assignable into parameterized required type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WELD-1332&quot;&gt;&lt;del&gt;WELD-001332&lt;/del&gt;&lt;/a&gt;: BeanManager method getBeans() is not available during application initialization&lt;br/&gt;
        at org.jboss.weld.bean.builtin.BeanManagerProxy.checkContainerState(BeanManagerProxy.java:246) &lt;span class=&quot;error&quot;&gt;&amp;#91;weld-core-impl-2.2.6.Final.jar:2014-10-03 10:05&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.jboss.weld.bean.builtin.BeanManagerProxy.checkContainerState(BeanManagerProxy.java:251) &lt;span class=&quot;error&quot;&gt;&amp;#91;weld-core-impl-2.2.6.Final.jar:2014-10-03 10:05&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.jboss.weld.bean.builtin.BeanManagerProxy.getBeans(BeanManagerProxy.java:100) &lt;span class=&quot;error&quot;&gt;&amp;#91;weld-core-impl-2.2.6.Final.jar:2014-10-03 10:05&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at com.sun.faces.application.JavaFlowLoaderHelper.loadFlows(JavaFlowLoaderHelper.java:66) &lt;span class=&quot;error&quot;&gt;&amp;#91;jsf-impl-2.2.8-jbossorg-1.jar:&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at com.sun.faces.application.ApplicationAssociate$PostConstructApplicationListener.processEvent(ApplicationAssociate.java:298) &lt;span class=&quot;error&quot;&gt;&amp;#91;jsf-impl-2.2.8-jbossorg-1.jar:&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at javax.faces.event.SystemEvent.processListener(SystemEvent.java:108) &lt;span class=&quot;error&quot;&gt;&amp;#91;jboss-jsf-api_2.2_spec-2.2.8.jar:2.2.8&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at com.sun.faces.application.ApplicationImpl.processListeners(ApplicationImpl.java:2190) &lt;span class=&quot;error&quot;&gt;&amp;#91;jsf-impl-2.2.8-jbossorg-1.jar:&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at com.sun.faces.application.ApplicationImpl.invokeListenersFor(ApplicationImpl.java:2163) &lt;span class=&quot;error&quot;&gt;&amp;#91;jsf-impl-2.2.8-jbossorg-1.jar:&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at com.sun.faces.application.ApplicationImpl.publishEvent(ApplicationImpl.java:296) &lt;span class=&quot;error&quot;&gt;&amp;#91;jsf-impl-2.2.8-jbossorg-1.jar:&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.jboss.as.jsf.injection.weld.ForwardingApplication.publishEvent(ForwardingApplication.java:294) &lt;span class=&quot;error&quot;&gt;&amp;#91;wildfly-jsf-injection-8.2.0.Final.jar:8.2.0.Final&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at com.sun.faces.config.ConfigManager.publishPostConfigEvent(ConfigManager.java:692) &lt;span class=&quot;error&quot;&gt;&amp;#91;jsf-impl-2.2.8-jbossorg-1.jar:&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:260) &lt;span class=&quot;error&quot;&gt;&amp;#91;jsf-impl-2.2.8-jbossorg-1.jar:&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at io.undertow.servlet.core.ApplicationListeners.contextInitialized(ApplicationListeners.java:173) &lt;span class=&quot;error&quot;&gt;&amp;#91;undertow-servlet-1.1.0.Final.jar:1.1.0.Final&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at io.undertow.servlet.core.DeploymentManagerImpl.deploy(DeploymentManagerImpl.java:193) &lt;span class=&quot;error&quot;&gt;&amp;#91;undertow-servlet-1.1.0.Final.jar:1.1.0.Final&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.wildfly.extension.undertow.deployment.UndertowDeploymentService.startContext(UndertowDeploymentService.java:87)&lt;br/&gt;
        at org.wildfly.extension.undertow.deployment.UndertowDeploymentService.start(UndertowDeploymentService.java:72)&lt;br/&gt;
        at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1948)&lt;br/&gt;
        at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1881)&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) &lt;span class=&quot;error&quot;&gt;&amp;#91;rt.jar:1.8.0_31&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) &lt;span class=&quot;error&quot;&gt;&amp;#91;rt.jar:1.8.0_31&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:745) &lt;span class=&quot;error&quot;&gt;&amp;#91;rt.jar:1.8.0_31&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;09:34:33,938 ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;org.jboss.msc.service.fail&amp;#93;&lt;/span&gt; (MSC service thread 1-1) MSC000001: Failed to start service jboss.undertow.deployment.default-server.default-host./v1: org.jboss.msc.service.StartException in service jboss.undertow.deployment.default-server.default-host./v1: Failed to start service&lt;br/&gt;
        at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1904) &lt;span class=&quot;error&quot;&gt;&amp;#91;jboss-msc-1.2.2.Final.jar:1.2.2.Final&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) &lt;span class=&quot;error&quot;&gt;&amp;#91;rt.jar:1.8.0_31&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) &lt;span class=&quot;error&quot;&gt;&amp;#91;rt.jar:1.8.0_31&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:745) &lt;span class=&quot;error&quot;&gt;&amp;#91;rt.jar:1.8.0_31&amp;#93;&lt;/span&gt;&lt;br/&gt;
Caused by: java.lang.RuntimeException: java.lang.RuntimeException: org.jboss.weld.exceptions.IllegalStateException: &lt;a href=&quot;https://issues.jboss.org/browse/WELD-1332&quot; title=&quot;Make raw bean type assignable into parameterized required type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WELD-1332&quot;&gt;&lt;del&gt;WELD-001332&lt;/del&gt;&lt;/a&gt;: BeanManager method getBeans() is not available during application initialization&lt;br/&gt;
        at io.undertow.servlet.core.DeploymentManagerImpl.deploy(DeploymentManagerImpl.java:222)&lt;br/&gt;
        at org.wildfly.extension.undertow.deployment.UndertowDeploymentService.startContext(UndertowDeploymentService.java:87)&lt;br/&gt;
        at org.wildfly.extension.undertow.deployment.UndertowDeploymentService.start(UndertowDeploymentService.java:72)&lt;br/&gt;
        at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1948) &lt;span class=&quot;error&quot;&gt;&amp;#91;jboss-msc-1.2.2.Final.jar:1.2.2.Final&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1881) &lt;span class=&quot;error&quot;&gt;&amp;#91;jboss-msc-1.2.2.Final.jar:1.2.2.Final&amp;#93;&lt;/span&gt;&lt;br/&gt;
        ... 3 more&lt;br/&gt;
Caused by: java.lang.RuntimeException: org.jboss.weld.exceptions.IllegalStateException: &lt;a href=&quot;https://issues.jboss.org/browse/WELD-1332&quot; title=&quot;Make raw bean type assignable into parameterized required type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WELD-1332&quot;&gt;&lt;del&gt;WELD-001332&lt;/del&gt;&lt;/a&gt;: BeanManager method getBeans() is not available during application initialization&lt;br/&gt;
        at com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:280)&lt;br/&gt;
        at io.undertow.servlet.core.ApplicationListeners.contextInitialized(ApplicationListeners.java:173)&lt;br/&gt;
        at io.undertow.servlet.core.DeploymentManagerImpl.deploy(DeploymentManagerImpl.java:193)&lt;br/&gt;
        ... 7 more&lt;br/&gt;
Caused by: org.jboss.weld.exceptions.IllegalStateException: &lt;a href=&quot;https://issues.jboss.org/browse/WELD-1332&quot; title=&quot;Make raw bean type assignable into parameterized required type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WELD-1332&quot;&gt;&lt;del&gt;WELD-001332&lt;/del&gt;&lt;/a&gt;: BeanManager method getBeans() is not available during application initialization&lt;br/&gt;
        at org.jboss.weld.bean.builtin.BeanManagerProxy.checkContainerState(BeanManagerProxy.java:246)&lt;br/&gt;
        at org.jboss.weld.bean.builtin.BeanManagerProxy.checkContainerState(BeanManagerProxy.java:251)&lt;br/&gt;
        at org.jboss.weld.bean.builtin.BeanManagerProxy.getBeans(BeanManagerProxy.java:100)&lt;br/&gt;
        at com.sun.faces.application.JavaFlowLoaderHelper.loadFlows(JavaFlowLoaderHelper.java:66)&lt;br/&gt;
        at com.sun.faces.application.ApplicationAssociate$PostConstructApplicationListener.processEvent(ApplicationAssociate.java:298)&lt;br/&gt;
        at javax.faces.event.SystemEvent.processListener(SystemEvent.java:108)&lt;br/&gt;
        at com.sun.faces.application.ApplicationImpl.processListeners(ApplicationImpl.java:2190)&lt;br/&gt;
        at com.sun.faces.application.ApplicationImpl.invokeListenersFor(ApplicationImpl.java:2163)&lt;br/&gt;
        at com.sun.faces.application.ApplicationImpl.publishEvent(ApplicationImpl.java:296)&lt;br/&gt;
        at org.jboss.as.jsf.injection.weld.ForwardingApplication.publishEvent(ForwardingApplication.java:294)&lt;br/&gt;
        at com.sun.faces.config.ConfigManager.publishPostConfigEvent(ConfigManager.java:692)&lt;br/&gt;
        at com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:260)&lt;br/&gt;
        ... 9 more&lt;/p&gt;

&lt;p&gt;09:34:34,099 ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;org.jboss.as.controller.management-operation&amp;#93;&lt;/span&gt; (DeploymentScanner-threads - 2) JBAS014613: Operation (&quot;deploy&quot;) failed - address: (&lt;span class=&quot;error&quot;&gt;&amp;#91;(&amp;quot;deployment&amp;quot; =&amp;gt; &amp;quot;Project-ear-0.1.0-SNAPSHOT.ear&amp;quot;)&amp;#93;&lt;/span&gt;) - failure description: {&quot;JBAS014671: Failed services&quot; =&amp;gt; {&quot;jboss.undertow.deployment.default-server.default-host./v1&quot; =&amp;gt; &quot;org.jboss.msc.service.StartException in service jboss.undertow.deployment.default-server.default-host./v1: Failed to start service&lt;br/&gt;
    Caused by: java.lang.RuntimeException: java.lang.RuntimeException: org.jboss.weld.exceptions.IllegalStateException: &lt;a href=&quot;https://issues.jboss.org/browse/WELD-1332&quot; title=&quot;Make raw bean type assignable into parameterized required type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WELD-1332&quot;&gt;&lt;del&gt;WELD-001332&lt;/del&gt;&lt;/a&gt;: BeanManager method getBeans() is not available during application initialization&lt;br/&gt;
    Caused by: java.lang.RuntimeException: org.jboss.weld.exceptions.IllegalStateException: &lt;a href=&quot;https://issues.jboss.org/browse/WELD-1332&quot; title=&quot;Make raw bean type assignable into parameterized required type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WELD-1332&quot;&gt;&lt;del&gt;WELD-001332&lt;/del&gt;&lt;/a&gt;: BeanManager method getBeans() is not available during application initialization&lt;br/&gt;
    Caused by: org.jboss.weld.exceptions.IllegalStateException: &lt;a href=&quot;https://issues.jboss.org/browse/WELD-1332&quot; title=&quot;Make raw bean type assignable into parameterized required type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WELD-1332&quot;&gt;&lt;del&gt;WELD-001332&lt;/del&gt;&lt;/a&gt;: BeanManager method getBeans() is not available during application initialization&quot;}}&lt;/p&gt;

&lt;p&gt;09:34:34,188 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;org.jboss.as.server&amp;#93;&lt;/span&gt; (DeploymentScanner-threads - 2) JBAS018559: Deployed &quot;Project-ear-0.1.0-SNAPSHOT.ear&quot; (runtime-name : &quot;Project-ear-0.1.0-SNAPSHOT.ear&quot;)&lt;br/&gt;
09:34:34,188 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;org.jboss.as.controller&amp;#93;&lt;/span&gt; (DeploymentScanner-threads - 2) JBAS014774: Service status report&lt;br/&gt;
JBAS014777:   Services which failed to start:&lt;br/&gt;
service jboss.undertow.deployment.default-server.default-host./v1: org.jboss.msc.service.StartException in service jboss.undertow.deployment.default-server.default-host./v1: Failed to start service&lt;/p&gt;

&lt;p&gt;The EAR contains:&lt;br/&gt;
 1.) An EJB JAR&lt;br/&gt;
 2.) An WepApp WAR&lt;/p&gt;

&lt;p&gt;The webapp uses JSF and JAX-RS.&lt;br/&gt;
None of our code seesm to be involved.&lt;/p&gt;

&lt;p&gt;The EAR can succesfully deployet on an Weblogic AS.&lt;/p&gt;

&lt;p&gt;When I start the WildFly AS with --debug mode and halt at BeanManagerProxy.getBeans() and directly continue the thread exectuion. the deployment of the EAR file works correctly. Feels like some race condition..&lt;/p&gt;

&lt;p&gt;Any ideas how to fix this?&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows 7&lt;/p&gt;</environment>
        <key id="12570570">WFLY-4579</key>
            <summary>BeanManager method getBeans() is not available during application initialization</summary>
                <type id="1" iconUrl="https://issues.jboss.org/secure/viewavatar?size=xsmall&amp;avatarId=13263&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.jboss.org/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.jboss.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Done</resolution>
                                        <assignee username="swd847">Stuart Douglas</assignee>
                                    <reporter username="thomas-z.meyer">Thomas Meyer</reporter>
                        <labels>
                    </labels>
                <created>Mon, 4 May 2015 04:10:17 -0400</created>
                <updated>Tue, 19 May 2015 09:19:37 -0400</updated>
                            <resolved>Tue, 5 May 2015 16:02:43 -0400</resolved>
                                    <version>8.2.0.Final</version>
                                    <fixVersion>9.0.0.CR2</fixVersion>
                    <fixVersion>10.0.0.Alpha1</fixVersion>
                                    <component>CDI / Weld</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13065445" author="thomas-z.meyer" created="Tue, 5 May 2015 08:26:26 -0400"  >&lt;p&gt;Original stack trace leading to the IllegalStateException:&lt;/p&gt;

&lt;p&gt;Thread &lt;span class=&quot;error&quot;&gt;&amp;#91;MSC service thread 1-4&amp;#93;&lt;/span&gt; (Suspended (exception IllegalStateException))	&lt;br/&gt;
	owns: JavaFlowLoaderHelper  (id=185)	&lt;br/&gt;
	BeanManagerProxy.checkContainerState(String, ContainerState) line: 246	&lt;br/&gt;
	BeanManagerProxy.checkContainerState(String) line: 251	&lt;br/&gt;
	BeanManagerProxy.getBeans(Type, Annotation...) line: 100	&lt;br/&gt;
	JavaFlowLoaderHelper.loadFlows(FacesContext, FlowHandler) line: 66	&lt;br/&gt;
	ApplicationAssociate$PostConstructApplicationListener.processEvent(SystemEvent) line: 298	&lt;br/&gt;
	PostConstructApplicationEvent(SystemEvent).processListener(FacesListener) line: 108	&lt;br/&gt;
	ApplicationImpl.processListeners(Collection&amp;lt;SystemEventListener&amp;gt;, SystemEvent, Object, EventInfo) line: 2190	&lt;br/&gt;
	ApplicationImpl.invokeListenersFor(Class&amp;lt;SystemEvent&amp;gt;, SystemEvent, Object, Class&amp;lt;?&amp;gt;, boolean) line: 2163	&lt;br/&gt;
	ApplicationImpl.publishEvent(FacesContext, Class&amp;lt;SystemEvent&amp;gt;, Class&amp;lt;?&amp;gt;, Object) line: 296	&lt;br/&gt;
	WeldApplication(ForwardingApplication).publishEvent(FacesContext, Class&amp;lt;SystemEvent&amp;gt;, Class&amp;lt;?&amp;gt;, Object) line: 294	&lt;br/&gt;
	ConfigManager.publishPostConfigEvent() line: 692	&lt;br/&gt;
	ConfigureListener.contextInitialized(ServletContextEvent) line: 260	&lt;br/&gt;
	ApplicationListeners.contextInitialized() line: 173	&lt;br/&gt;
	DeploymentManagerImpl.deploy() line: 193	&lt;br/&gt;
	UndertowDeploymentService.startContext() line: 87	&lt;br/&gt;
	UndertowDeploymentService.start(StartContext) line: 72	&lt;br/&gt;
	ServiceControllerImpl$StartTask.startService(Service&amp;lt;? extends S&amp;gt;, StartContext) line: 1948	&lt;br/&gt;
	ServiceControllerImpl$StartTask.run() line: 1881	&lt;br/&gt;
	ServiceContainerImpl$ContainerExecutor(ThreadPoolExecutor).runWorker(ThreadPoolExecutor$Worker) line: 1142	&lt;br/&gt;
	ThreadPoolExecutor$Worker.run() line: 617	&lt;br/&gt;
	ServiceContainerImpl$ServiceThread(Thread).run() line: 745	&lt;/p&gt;

&lt;p&gt;This seems to happen because the EAR contains one WebApp. In this one WebApp we have an JSF servlet and an JAX-RS servlet. We did add an wait listener now in the web.xml file:&lt;br/&gt;
  &amp;lt;listener&amp;gt;&lt;br/&gt;
    &amp;lt;listener-class&amp;gt;listener.WaitListener&amp;lt;/listener-class&amp;gt;&lt;br/&gt;
  &amp;lt;/listener&amp;gt;&lt;/p&gt;

&lt;p&gt;Which basically does:&lt;/p&gt;

&lt;p&gt;	public void contextInitialized(ServletContextEvent sce) {&lt;br/&gt;
		ServletContext context = sce.getServletContext();&lt;br/&gt;
		try &lt;/p&gt;
{
			Thread.sleep(3000);
		}
&lt;p&gt; catch (InterruptedException e) &lt;/p&gt;
{
			e.printStackTrace();
		}
&lt;p&gt;	}&lt;/p&gt;

&lt;p&gt;With this listener installed, the EAR can be deployed sucessfully on WildFly.&lt;/p&gt;

&lt;p&gt;May be related to &lt;a href=&quot;https://issues.jboss.org/browse/WFLY-3259&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.jboss.org/browse/WFLY-3259&lt;/a&gt; and &lt;a href=&quot;https://issues.jboss.org/browse/WFLY-3207&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.jboss.org/browse/WFLY-3207&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13065448" author="swd847" created="Tue, 5 May 2015 08:34:23 -0400"  >&lt;p&gt;Have you tried the linked pull request?&lt;/p&gt;</comment>
                            <comment id="13065524" author="thomas-z.meyer" created="Tue, 5 May 2015 10:58:41 -0400"  >&lt;p&gt;Hi Stuart,&lt;/p&gt;

&lt;p&gt;what pull request are you refering to? &lt;a href=&quot;https://github.com/wildfly/wildfly/pull/6171&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/wildfly/wildfly/pull/6171&lt;/a&gt;&lt;br/&gt;
No, I didn&apos;t check this one, because both issues &lt;a href=&quot;https://issues.jboss.org/browse/WFLY-3259&quot; title=&quot;Race condition in built-in ServletContextListeners&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WFLY-3259&quot;&gt;&lt;del&gt;WFLY-3259&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.jboss.org/browse/WFLY-3207&quot; title=&quot;ContextNotActiveException: WELD-001303: No active contexts for scope type javax.faces.flow.builder.FlowDefinition on reload&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WFLY-3207&quot;&gt;&lt;del&gt;WFLY-3207&lt;/del&gt;&lt;/a&gt; are fixed in 8.1.0.Final (according to their description) and I&apos;m using 8.2.0.Final, so I had the idea that my version already contain those fix.&lt;/p&gt;

&lt;p&gt;I just wanted to point out that maybe the fix in &lt;a href=&quot;https://issues.jboss.org/browse/WFLY-3259&quot; title=&quot;Race condition in built-in ServletContextListeners&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WFLY-3259&quot;&gt;&lt;del&gt;WFLY-3259&lt;/del&gt;&lt;/a&gt; is somehow related to this issue.&lt;/p&gt;</comment>
                            <comment id="13065528" author="thomas-z.meyer" created="Tue, 5 May 2015 11:01:06 -0400"  >&lt;p&gt;Oops!&lt;br/&gt;
I&apos;ll have a look at your pull request. Sorry for the noise...&lt;/p&gt;</comment>
                            <comment id="13069216" author="thomas-z.meyer" created="Tue, 19 May 2015 09:19:37 -0400"  >&lt;p&gt;Tested with 10.0.0.Alpha1.&lt;br/&gt;
Works correctly now.&lt;br/&gt;
Thanks for the fix.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="org.jboss.labs.jira.plugin.jboss-custom-field-types-plugin:multiurl">
                        <customfieldname>Git Pull Request</customfieldname>
                        <customfieldvalues>
                            https://github.com/wildfly/wildfly/pull/7409
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310641" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Number of attachments</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310640" key="com.atlassian.jira.toolkit:comments">
                        <customfieldname>Number of comments</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311940" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1|hzw7mv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310840" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>