<!-- 
RSS generated by JIRA (7.2.3#72005-sha1:73be91d2b96fc29303a7eb6820acf420e5d0ed65) at Tue Dec 06 15:38:18 EST 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.jboss.org/si/jira.issueviews:issue-xml/WFLY-3316/WFLY-3316.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>JBoss Issue Tracker</title>
    <link>https://issues.jboss.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>7.2.3</version>
        <build-number>72005</build-number>
        <build-date>06-10-2016</build-date>
    </build-info>

<item>
            <title>[WFLY-3316] Multi threaded ejb invocations via remote-naming produce EJBCLIENT000025 if the Context is closed</title>
                <link>https://issues.jboss.org/browse/WFLY-3316</link>
                <project id="12313721" key="WFLY">WildFly</project>
                    <description>&lt;p&gt;If a client run multi threads and each Thread use it&apos;s own InitialContext the behaviour is unexpected.&lt;/p&gt;

&lt;p&gt;The behaviour is as followed:&lt;br/&gt;
if each invocation create it&apos;s own IC and lookup the EJB there is sometimes a EJBCLIENT000025 because one of the one thread has closed the IC until another thread try to invoke an EJB.&lt;br/&gt;
If the IC is reused the failure might happen only if the first Thread has finished the invocations and close the IC during other Threads are still running.&lt;/p&gt;

&lt;p&gt;It looks that the underlying remote connection will be closed if the first IC is closed without respect that there are different IC&apos;s created and still in use.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12539854">WFLY-3316</key>
            <summary>Multi threaded ejb invocations via remote-naming produce EJBCLIENT000025 if the Context is closed</summary>
                <type id="1" iconUrl="https://issues.jboss.org/secure/viewavatar?size=xsmall&amp;avatarId=13263&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.jboss.org/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.jboss.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Done</resolution>
                                        <assignee username="elguardian">Enrique Gonz&#225;lez Mart&#237;nez</assignee>
                                    <reporter username="wdfink">Wolf-Dieter Fink</reporter>
                        <labels>
                            <label>ejb</label>
                            <label>naming</label>
                            <label>remote-clients</label>
                            <label>remote-ejb-connection</label>
                    </labels>
                <created>Mon, 5 May 2014 10:38:10 -0400</created>
                <updated>Fri, 15 May 2015 04:10:53 -0400</updated>
                            <resolved>Fri, 13 Mar 2015 03:33:10 -0400</resolved>
                                    <version>8.0.0.Final</version>
                                                    <component>EJB</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13024608" author="jira-bugzilla-migration" created="Wed, 3 Dec 2014 02:30:01 -0500"  >&lt;p&gt;Enrique Gonzalez Martinez &amp;lt;egonzale@redhat.com&amp;gt; changed the Status of &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=1094380&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 1094380&lt;/a&gt; from NEW to ASSIGNED&lt;/p&gt;</comment>
                            <comment id="13025204" author="jira-bugzilla-migration" created="Thu, 4 Dec 2014 10:02:47 -0500"  >&lt;p&gt;Enrique Gonzalez Martinez &amp;lt;egonzale@redhat.com&amp;gt; changed the Status of &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=1094380&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 1094380&lt;/a&gt; from ASSIGNED to POST&lt;/p&gt;</comment>
                            <comment id="13049704" author="jira-bugzilla-migration" created="Fri, 13 Mar 2015 03:34:33 -0400"  >&lt;p&gt;Enrique Gonzalez Martinez &amp;lt;egonzale@redhat.com&amp;gt; changed the Status of &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=1094380&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 1094380&lt;/a&gt; from POST to MODIFIED&lt;/p&gt;</comment>
                            <comment id="13067990" author="jira-bugzilla-migration" created="Thu, 14 May 2015 07:15:30 -0400"  >&lt;p&gt;Vladimir Dosoudil &amp;lt;dosoudil@redhat.com&amp;gt; changed the Status of &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=1094380&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 1094380&lt;/a&gt; from MODIFIED to ON_QA&lt;/p&gt;</comment>
                            <comment id="13068258" author="jira-bugzilla-migration" created="Fri, 15 May 2015 04:10:53 -0400"  >&lt;p&gt;Jan Martiska &amp;lt;jmartisk@redhat.com&amp;gt; changed the Status of &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=1094380&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 1094380&lt;/a&gt; from ON_QA to VERIFIED&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12382245" name="reproducer.zip" size="17092" author="wdfink" created="Mon, 5 May 2014 10:38:59 -0400"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310440" key="org.jboss.labs.jira.plugin.jboss-custom-field-types-plugin:multiurl">
                        <customfieldname>Bugzilla References</customfieldname>
                        <customfieldvalues>
                            https://bugzilla.redhat.com/show_bug.cgi?id=1094380
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310341" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bugzilla Update</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10250"><![CDATA[Perform]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="org.jboss.labs.jira.plugin.jboss-custom-field-types-plugin:multiurl">
                        <customfieldname>Git Pull Request</customfieldname>
                        <customfieldvalues>
                            https://github.com/jbossas/jboss-remote-naming/pull/23, https://github.com/jbossas/jboss-remote-naming/pull/22
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310641" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Number of attachments</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310640" key="com.atlassian.jira.toolkit:comments">
                        <customfieldname>Number of comments</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311940" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1|hznkxr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310840" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>197837</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310183" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Steps to Reproduce</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;Use the attached application and client &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;start a server&lt;/li&gt;
	&lt;li&gt;configure &apos;/subsystem=ejb3:write-attribute(name=default-missing-method-permissions-deny-access, value=false)&apos;&lt;/li&gt;
	&lt;li&gt;deploy &apos;jboss-ejb-multi-server-app-two.ear&apos;&lt;/li&gt;
	&lt;li&gt;run the client:&lt;br/&gt;
java -cp bin/client/jboss-client.jar:jboss-ejb-multi-server-app-two-ejb-client.jar:jboss-as-ejb-clients-remote-naming.jar org.jboss.as.quickstarts.ejb.clients.MultiThreadJBossRemoteClient -U http-remoting://localhost:8080 -M &lt;span class=&quot;error&quot;&gt;&amp;#91;0|1|2&amp;#93;&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;-M 0 =&amp;gt; create IC and proxy inside the Thread loop each time&lt;br/&gt;
-M 1 =&amp;gt; create IC once and create the proxy each time&lt;br/&gt;
-M 2 =&amp;gt; create IC and proxy inside the Thread once and reuse it&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>