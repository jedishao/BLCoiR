<!-- 
RSS generated by JIRA (7.2.3#72005-sha1:73be91d2b96fc29303a7eb6820acf420e5d0ed65) at Mon Dec 12 13:28:18 EST 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.jboss.org/si/jira.issueviews:issue-xml/WFLY-3738/WFLY-3738.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>JBoss Issue Tracker</title>
    <link>https://issues.jboss.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>7.2.3</version>
        <build-number>72005</build-number>
        <build-date>06-10-2016</build-date>
    </build-info>

<item>
            <title>[WFLY-3738] Secured JavaEE appclient hangs on invalid login</title>
                <link>https://issues.jboss.org/browse/WFLY-3738</link>
                <project id="12313721" key="WFLY">WildFly</project>
                    <description>&lt;p&gt;See attached sample EAR file: it contains a secured EJB and a JavaEE application client. When running the JavaEE application client, you are prompted to enter a user/password, which causes an authentication against a security domain (the prompt to enter login/password does not work correctly, so enter username when nothing more happens, press enter, enter password when nothing more happens and press enter &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.jboss.org/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;). &lt;/p&gt;

&lt;p&gt;If you enter valid credentials (e.g. &quot;admin/admin&quot; or &quot;kunde/kunde&quot;), everything is fine. But if you enter e.g. an invalid password, the app client container does not exit. It hangs at the step &lt;br/&gt;
&quot;20:39:28,649 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;org.jboss.as&amp;#93;&lt;/span&gt; (MSC service thread 1-2) JBAS015950: WildFly 8.1.0.Final &quot;Kenny&quot; stopped in 339ms&quot;&lt;/p&gt;

&lt;p&gt;To reproduce:&lt;br/&gt;
a) modify &quot;standalone.xml&quot;:&lt;br/&gt;
a.1) I need a custom realm:&lt;br/&gt;
            &amp;lt;security-realm name=&quot;KnaufRealm&quot;&amp;gt;&lt;br/&gt;
                &amp;lt;authentication&amp;gt;&lt;br/&gt;
                    &amp;lt;jaas name=&quot;knaufsecurity&quot;/&amp;gt;&lt;br/&gt;
                &amp;lt;/authentication&amp;gt;&lt;br/&gt;
            &amp;lt;/security-realm&amp;gt;&lt;br/&gt;
a.2) add this security domain:&lt;br/&gt;
                &amp;lt;security-domain name=&quot;knaufsecurity&quot; cache-type=&quot;default&quot;&amp;gt;&lt;br/&gt;
                    &amp;lt;authentication&amp;gt;&lt;br/&gt;
                        &amp;lt;login-module code=&quot;Database&quot; flag=&quot;required&quot;&amp;gt;&lt;br/&gt;
                            &amp;lt;module-option name=&quot;dsJndiName&quot; value=&quot;java:jboss/datasources/ExampleDS&quot;/&amp;gt;&lt;br/&gt;
                            &amp;lt;module-option name=&quot;principalsQuery&quot; value=&quot;SELECT PASSWORT FROM BENUTZER WHERE LOGIN=?&quot;/&amp;gt;&lt;br/&gt;
                            &amp;lt;module-option name=&quot;rolesQuery&quot; value=&quot;SELECT R.ROLLE, &apos;Roles&apos; FROM ROLLE AS R, BENUTZER_ROLLE AS BR, BENUTZER AS B WHERE B.LOGIN=? AND BR.ROLLEN_ID = R.ID AND BR.BENUTZER_ID = B.ID&quot;/&amp;gt;&lt;br/&gt;
                            &amp;lt;module-option name=&quot;unauthenticatedIdentity&quot; value=&quot;gast&quot;/&amp;gt;&lt;br/&gt;
                        &amp;lt;/login-module&amp;gt;&lt;br/&gt;
                    &amp;lt;/authentication&amp;gt;&lt;br/&gt;
                &amp;lt;/security-domain&amp;gt;&lt;br/&gt;
a.3) point the remoting connector to my own security realm:&lt;br/&gt;
        &amp;lt;subsystem xmlns=&quot;urn:jboss:domain:remoting:2.0&quot;&amp;gt;&lt;br/&gt;
            &amp;lt;endpoint worker=&quot;default&quot;/&amp;gt;&lt;br/&gt;
            &amp;lt;http-connector name=&quot;http-remoting-connector&quot; connector-ref=&quot;default&quot; security-realm=&quot;KnaufRealm&quot;/&amp;gt;&lt;br/&gt;
        &amp;lt;/subsystem&amp;gt;&lt;/p&gt;

&lt;p&gt;b) deploy attached EAR file to the server&lt;br/&gt;
c) run JavaEE application client: %WILDFLY_HOME%\bin\appclient.bat c:\path_to\Security.ear#SecurityClient.jar&lt;/p&gt;</description>
                <environment></environment>
        <key id="12549459">WFLY-3738</key>
            <summary>Secured JavaEE appclient hangs on invalid login</summary>
                <type id="1" iconUrl="https://issues.jboss.org/secure/viewavatar?size=xsmall&amp;avatarId=13263&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.jboss.org/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.jboss.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Done</resolution>
                                        <assignee username="swd847">Stuart Douglas</assignee>
                                    <reporter username="wolfgangknauf">Wolfgang Knauf</reporter>
                        <labels>
                    </labels>
                <created>Fri, 15 Aug 2014 15:03:45 -0400</created>
                <updated>Thu, 4 Sep 2014 09:17:05 -0400</updated>
                            <resolved>Wed, 3 Sep 2014 21:12:55 -0400</resolved>
                                    <version>8.1.0.Final</version>
                                    <fixVersion>9.0.0.Alpha1</fixVersion>
                                    <component>Application Client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12993301" author="wolfgangknauf" created="Fri, 15 Aug 2014 15:05:33 -0400"  >&lt;p&gt;That&apos;s my config file with all changes necessary to reproduce this sample (+logging of the security layer)&lt;/p&gt;</comment>
                            <comment id="12993387" author="swd847" created="Sun, 17 Aug 2014 22:32:51 -0400"  >&lt;p&gt;Can you take a thread dump of the hanging process? Basically this usually happens when a background thread that should be marked as being a daemon thread has not been. &lt;/p&gt;</comment>
                            <comment id="12993695" author="wolfgangknauf" created="Mon, 18 Aug 2014 15:27:21 -0400"  >&lt;p&gt;Requested threaddump&lt;/p&gt;</comment>
                            <comment id="12994156" author="swd847" created="Wed, 20 Aug 2014 02:17:37 -0400"  >&lt;p&gt;Can you include a source version of your project so I can see exactly what the app client is doing? The issue appears to be that a remoting endpoint is not being shut down (and does not have its threads marked as daemon). &lt;/p&gt;</comment>
                            <comment id="12994203" author="wolfgangknauf" created="Wed, 20 Aug 2014 03:19:51 -0400"  >&lt;p&gt;The EAR file contains the sources. If you import it in Eclipse (&quot;import EAR file&quot;), you will receive the full project structure. Or do you need a zipped version of my Eclipse project?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12384211" name="Security.ear" size="15965" author="wolfgangknauf" created="Fri, 15 Aug 2014 15:04:42 -0400"/>
                            <attachment id="12384212" name="standalone.xml" size="20793" author="wolfgangknauf" created="Fri, 15 Aug 2014 15:05:33 -0400"/>
                            <attachment id="12384245" name="threaddump.txt" size="12387" author="wolfgangknauf" created="Mon, 18 Aug 2014 15:27:21 -0400"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="org.jboss.labs.jira.plugin.jboss-custom-field-types-plugin:multiurl">
                        <customfieldname>Git Pull Request</customfieldname>
                        <customfieldvalues>
                            https://github.com/wildfly/wildfly/pull/6657
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310641" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Number of attachments</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310640" key="com.atlassian.jira.toolkit:comments">
                        <customfieldname>Number of comments</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311940" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1|hzsub3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310840" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>