<!-- 
RSS generated by JIRA (7.2.3#72005-sha1:73be91d2b96fc29303a7eb6820acf420e5d0ed65) at Tue Dec 06 14:57:33 EST 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.jboss.org/si/jira.issueviews:issue-xml/WFLY-4994/WFLY-4994.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>JBoss Issue Tracker</title>
    <link>https://issues.jboss.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>7.2.3</version>
        <build-number>72005</build-number>
        <build-date>06-10-2016</build-date>
    </build-info>

<item>
            <title>[WFLY-4994] SPEC JMS 2007 benchmark fails due to performance drop with http-connector</title>
                <link>https://issues.jboss.org/browse/WFLY-4994</link>
                <project id="12313721" key="WFLY">WildFly</project>
                    <description>&lt;p&gt;Hi, we have huge performance drop in SPEC JMS 2007 benchmark when we use http-connectors. Netty connectors seems to be working fine.&lt;br/&gt;
Currently we are having troubles even with very low load of 50 SMAgents&lt;/p&gt;</description>
                <environment></environment>
        <key id="12579043">WFLY-4994</key>
            <summary>SPEC JMS 2007 benchmark fails due to performance drop with http-connector</summary>
                <type id="1" iconUrl="https://issues.jboss.org/secure/viewavatar?size=xsmall&amp;avatarId=13263&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.jboss.org/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.jboss.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Done</resolution>
                                        <assignee username="flavia.rainone">Flavia Rainone</assignee>
                                    <reporter username="okalman">Ond&#345;ej Kalman</reporter>
                        <labels>
                    </labels>
                <created>Thu, 23 Jul 2015 05:34:47 -0400</created>
                <updated>Tue, 9 Feb 2016 05:04:24 -0500</updated>
                            <resolved>Tue, 9 Feb 2016 05:04:24 -0500</resolved>
                                    <version>10.0.0.Alpha5</version>
                                    <fixVersion>10.0.0.Final</fixVersion>
                                    <component>JMS</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>9</watches>
                                                                <comments>
                            <comment id="13092094" author="okalman" created="Thu, 23 Jul 2015 05:37:45 -0400"  >&lt;p&gt;config files for eap used with benchmark&lt;/p&gt;</comment>
                            <comment id="13092123" author="ctomc" created="Thu, 23 Jul 2015 06:30:39 -0400"  >&lt;p&gt;Are maybe clients disconnecting after each request? &lt;br/&gt;
As only overhead of http connector is that it does one additional request on opening connection that upgrades connection to native one that is same as netty.&lt;/p&gt;</comment>
                            <comment id="13092133" author="clebert.suconic" created="Thu, 23 Jul 2015 06:50:27 -0400"  >&lt;p&gt;that&apos;s what I&apos;m thinking.. on which case that&apos;s away from requirements.&lt;/p&gt;</comment>
                            <comment id="13092134" author="clebert.suconic" created="Thu, 23 Jul 2015 06:51:03 -0400"  >&lt;p&gt;&lt;a href=&quot;https://issues.jboss.org/secure/ViewProfile.jspa?name=ctomc&quot; class=&quot;user-hover&quot; rel=&quot;ctomc&quot;&gt;Tomaz Cerar&lt;/a&gt; that&apos;s basically what I asked on the attached JIRA. if it&apos;s throughput or connecting.&lt;/p&gt;</comment>
                            <comment id="13115629" author="dimitris" created="Tue, 6 Oct 2015 13:21:06 -0400"  >&lt;p&gt;Anyone looking at this? Thanks.&lt;/p&gt;</comment>
                            <comment id="13115631" author="clebert.suconic" created="Tue, 6 Oct 2015 13:25:19 -0400"  >&lt;p&gt;Not really.. I have no knowledge of the WebLayer to make any changes here.&lt;/p&gt;</comment>
                            <comment id="13115769" author="swd847" created="Wed, 7 Oct 2015 04:14:22 -0400"  >&lt;p&gt;I have not been able to get the benchmark to run, and the only profile that was provided was full of TRACE logging.&lt;/p&gt;

&lt;p&gt;My best guess is that Netty is used unpooled buffers when using HTTP, this may fix it:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/wildfly/wildfly/compare/master...stuartwdouglas:hornetq-perf?expand=1&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/wildfly/wildfly/compare/master...stuartwdouglas:hornetq-perf?expand=1&lt;/a&gt; &lt;/p&gt;

&lt;p&gt;However as I have not been able to run the benchmark and have no familiarity with this code this is really just a guess.&lt;/p&gt;</comment>
                            <comment id="13115770" author="jmesnil" created="Wed, 7 Oct 2015 04:18:40 -0400"  >&lt;p&gt;re. Stuart&apos;s suggestion to use pooled buffer, Netty 4.0.32 has a fix for PooledByteBuf that might be related: &lt;a href=&quot;https://github.com/netty/netty/pull/4278&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/netty/netty/pull/4278&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Upgrading Netty could be a worth a try&lt;/p&gt;</comment>
                            <comment id="13115831" author="okalman" created="Wed, 7 Oct 2015 06:08:32 -0400"  >&lt;p&gt;I&apos;m afraid that after changes in EAP 7.0.0.DR10 and EAP 7.0.0.DR11, previously posted configs will not work. I&apos;m attaching new configs working with EAP 7.0.0.DR11 which are currently used in our SPECJMS performance tests.&lt;/p&gt;</comment>
                            <comment id="13156938" author="dimitris" created="Mon, 1 Feb 2016 05:27:41 -0500"  >&lt;p&gt;&lt;a href=&quot;https://issues.jboss.org/secure/ViewProfile.jspa?name=flavia.rainone&quot; class=&quot;user-hover&quot; rel=&quot;flavia.rainone&quot;&gt;Flavia Rainone&lt;/a&gt;, &lt;a href=&quot;https://issues.jboss.org/secure/ViewProfile.jspa?name=jason.greene&quot; class=&quot;user-hover&quot; rel=&quot;jason.greene&quot;&gt;Jason Greene&lt;/a&gt; can you please clean up this?&lt;/p&gt;</comment>
                            <comment id="13160105" author="jmesnil" created="Tue, 9 Feb 2016 05:04:24 -0500"  >&lt;p&gt;Underlying Artemis issue was fixed in Artemis 1.1.0.wildfly-011&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310120">
                    <name>Cloners</name>
                                            <outwardlinks description="cloned from">
                                        <issuelink>
            <issuekey id="12579042">JBEAP-498</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10012">
                    <name>Dependency</name>
                                            <outwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12587816">WFLY-5480</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12393603" name="standalone-full-ha-http-aio.xml" size="27431" author="okalman" created="Wed, 7 Oct 2015 06:06:09 -0400"/>
                            <attachment id="12391270" name="standalone-full-ha-http-aio.xml" size="63479" author="okalman" created="Thu, 23 Jul 2015 05:37:45 -0400"/>
                            <attachment id="12393602" name="standalone-full-ha-netty-bio-nio.xml" size="27559" author="okalman" created="Wed, 7 Oct 2015 06:06:09 -0400"/>
                            <attachment id="12391269" name="standalone-full-ha-netty-bio-nio.xml" size="63296" author="okalman" created="Thu, 23 Jul 2015 05:37:45 -0400"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310641" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Number of attachments</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310640" key="com.atlassian.jira.toolkit:comments">
                        <customfieldname>Number of comments</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>11.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311940" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1|hzxlzb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310840" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310183" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Steps to Reproduce</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;How to reproduce:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Download and unzip attached specjms2007.zip benchamark&lt;/li&gt;
	&lt;li&gt;set correct path to client libs in specjms2007/config/default.env&lt;/li&gt;
	&lt;li&gt;run ant clean jar in specjms2007/&lt;/li&gt;
	&lt;li&gt;start eap7 with one of attached configs&lt;/li&gt;
	&lt;li&gt;run ant describe jms-setup in  specjms2007/&lt;/li&gt;
	&lt;li&gt;run ant startController in  specjms2007/&lt;/li&gt;
	&lt;li&gt;run in second terminal  ant -d startSatellite -Dcontroller.host=127.0.0.1 -Dnode.name=127.0.0.1 in  specjms2007/&lt;/li&gt;
	&lt;li&gt;when benchmark finishes, check specjms-result.html in latest direcotry in specjms2007/output/  if test passes, big rectangle on top of web site should be completely green (no red)&lt;/li&gt;
	&lt;li&gt;if you want to change load edit org.spec.jms.horizontal.BASE in specjms2007/config/horizontal.properties&lt;/li&gt;
&lt;/ul&gt;
</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>