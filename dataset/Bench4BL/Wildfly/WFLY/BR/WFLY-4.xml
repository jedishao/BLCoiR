<!-- 
RSS generated by JIRA (7.2.3#72005-sha1:73be91d2b96fc29303a7eb6820acf420e5d0ed65) at Tue Dec 06 15:32:52 EST 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.jboss.org/si/jira.issueviews:issue-xml/WFLY-4/WFLY-4.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>JBoss Issue Tracker</title>
    <link>https://issues.jboss.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>7.2.3</version>
        <build-number>72005</build-number>
        <build-date>06-10-2016</build-date>
    </build-info>

<item>
            <title>[WFLY-4] Unable to restart server group in domain mode</title>
                <link>https://issues.jboss.org/browse/WFLY-4</link>
                <project id="12313721" key="WFLY">WildFly</project>
                    <description>&lt;p&gt;Restarting the servers in the standard domain.xml main-server-group will result in a hang in the CLI and in the master HC.&lt;/p&gt;

&lt;p&gt;To reproduce start the standard domain.sh and in another window launch the CLI and:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;domain@localhost:9999 /&amp;#93;&lt;/span&gt; /server-group=main-server-group:restart-servers&lt;/p&gt;

&lt;p&gt;Resulting console log output:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;Host Controller&amp;#93;&lt;/span&gt; 18:17:30,511 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;org.jboss.as.host.controller&amp;#93;&lt;/span&gt; (management-handler-thread - 3) JBAS010923: Stopping server server-one&lt;br/&gt;
18:17:30,515 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;org.jboss.as.process.Server:server-one.status&amp;#93;&lt;/span&gt; (ProcessController-threads - 5) JBAS012018: Stopping process &apos;Server:server-one&apos;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;Server:server-one&amp;#93;&lt;/span&gt; 18:17:30,599 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;org.jboss.as.connector.deployment&amp;#93;&lt;/span&gt; (MSC service thread 1-4) JBAS010410: Unbound JCA ConnectionFactory &lt;span class=&quot;error&quot;&gt;&amp;#91;java:/JmsXA&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;Server:server-one&amp;#93;&lt;/span&gt; 18:17:30,600 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;org.jboss.as.connector.subsystems.datasources&amp;#93;&lt;/span&gt; (MSC service thread 1-3) JBAS010409: Unbound data source &lt;span class=&quot;error&quot;&gt;&amp;#91;java:jboss/datasources/ExampleDS&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;Server:server-one&amp;#93;&lt;/span&gt; 18:17:30,611 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.coyote.http11&amp;#93;&lt;/span&gt; (MSC service thread 1-1) JBWEB003075: Coyote HTTP/1.1 pausing on: http-localhost/127.0.0.1:8080&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;Server:server-one&amp;#93;&lt;/span&gt; 18:17:30,612 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.coyote.http11&amp;#93;&lt;/span&gt; (MSC service thread 1-1) JBWEB003077: Coyote HTTP/1.1 stopping on : http-localhost/127.0.0.1:8080&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;Server:server-one&amp;#93;&lt;/span&gt; 18:17:30,616 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;org.jboss.as.messaging&amp;#93;&lt;/span&gt; (ServerService Thread Pool &amp;#8211; 79) JBAS011605: Unbound messaging object to jndi name java:jboss/exported/jms/RemoteConnectionFactory&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;Server:server-one&amp;#93;&lt;/span&gt; 18:17:30,615 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.catalina.core&amp;#93;&lt;/span&gt; (MSC service thread 1-2) JBWEB001079: Container org.apache.catalina.core.ContainerBase.&lt;span class=&quot;error&quot;&gt;&amp;#91;jboss.web&amp;#93;&lt;/span&gt;.&lt;span class=&quot;error&quot;&gt;&amp;#91;default-host&amp;#93;&lt;/span&gt;.&lt;span class=&quot;error&quot;&gt;&amp;#91;/&amp;#93;&lt;/span&gt; has not been started&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;Server:server-one&amp;#93;&lt;/span&gt; 18:17:30,640 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;org.jboss.as.connector.deployers.jdbc&amp;#93;&lt;/span&gt; (MSC service thread 1-3) JBAS010418: Stopped Driver service with driver-name = h2&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;Server:server-one&amp;#93;&lt;/span&gt; 18:17:30,664 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;org.hornetq.ra&amp;#93;&lt;/span&gt; (MSC service thread 1-4) HQ151005: HornetQ resource adaptor stopped&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;Server:server-one&amp;#93;&lt;/span&gt; 18:17:30,704 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;org.hornetq.core.server&amp;#93;&lt;/span&gt; (MSC service thread 1-3) HQ221004: HornetQ Server version 2.3.0.CR1 (buzzzzz!, 122) &lt;span class=&quot;error&quot;&gt;&amp;#91;93f152f7-8aa1-11e2-8c0e-99b598ec3b97&amp;#93;&lt;/span&gt; stopped&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;Host Controller&amp;#93;&lt;/span&gt; 18:17:30,722 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;org.jboss.as.host.controller&amp;#93;&lt;/span&gt; (Remoting &quot;pingguo.local:MANAGEMENT&quot; read-1) JBAS010926: Unregistering server server-one&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;Server:server-one&amp;#93;&lt;/span&gt; 18:17:30,754 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;org.jboss.as&amp;#93;&lt;/span&gt; (MSC service thread 1-3) JBAS015950: JBoss AS 8.0.0.Alpha1-SNAPSHOT &quot;TBD&quot; stopped in 189ms&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;Server:server-one&amp;#93;&lt;/span&gt; &lt;br/&gt;
18:17:30,815 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;org.jboss.as.process.Server:server-one.status&amp;#93;&lt;/span&gt; (reaper for Server:server-one) JBAS012010: Process &apos;Server:server-one&apos; finished with an exit status of 0&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;Host Controller&amp;#93;&lt;/span&gt; 18:17:30,818 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;org.jboss.as.host.controller&amp;#93;&lt;/span&gt; (ProcessControllerConnection-thread - 2) JBAS010926: Unregistering server server-one&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;Host Controller&amp;#93;&lt;/span&gt; 18:17:30,836 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;org.jboss.as.host.controller&amp;#93;&lt;/span&gt; (management-handler-thread - 3) JBAS010922: Starting server server-one&lt;br/&gt;
18:17:30,845 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;org.jboss.as.process.Server:server-one.status&amp;#93;&lt;/span&gt; (ProcessController-threads - 5) JBAS012017: Starting process &apos;Server:server-one&apos;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;Server:server-one&amp;#93;&lt;/span&gt; 18:17:31,676 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;org.jboss.modules&amp;#93;&lt;/span&gt; (main) JBoss Modules version 1.2.0.CR2&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;Server:server-one&amp;#93;&lt;/span&gt; 18:17:32,178 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;org.jboss.msc&amp;#93;&lt;/span&gt; (main) JBoss MSC version 1.1.1.Final&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;Server:server-one&amp;#93;&lt;/span&gt; 18:17:32,332 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;org.jboss.as&amp;#93;&lt;/span&gt; (MSC service thread 1-4) JBAS015899: JBoss AS 8.0.0.Alpha1-SNAPSHOT &quot;TBD&quot; starting&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;Server:server-one&amp;#93;&lt;/span&gt; 18:17:32,530 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;org.xnio&amp;#93;&lt;/span&gt; (MSC service thread 1-3) XNIO Version 3.1.0.Beta9&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;Server:server-one&amp;#93;&lt;/span&gt; 18:17:32,538 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;org.xnio.nio&amp;#93;&lt;/span&gt; (MSC service thread 1-3) XNIO NIO Implementation Version 3.1.0.Beta9&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;Server:server-one&amp;#93;&lt;/span&gt; 18:17:32,559 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;org.jboss.remoting&amp;#93;&lt;/span&gt; (MSC service thread 1-3) JBoss Remoting version 3.2.15.GA&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;Host Controller&amp;#93;&lt;/span&gt; 18:17:33,607 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;org.jboss.as.domain.controller.mgmt&amp;#93;&lt;/span&gt; (Remoting &quot;pingguo.local:MANAGEMENT&quot; task-16) JBAS010920: Server &lt;span class=&quot;error&quot;&gt;&amp;#91;Server:server-one&amp;#93;&lt;/span&gt; registered using connection &lt;span class=&quot;error&quot;&gt;&amp;#91;Channel ID 2bacdeb7 (inbound) of Remoting connection 49660c5f to /127.0.0.1:60647&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;After that everything hangs.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12487008">WFLY-4</key>
            <summary>Unable to restart server group in domain mode</summary>
                <type id="1" iconUrl="https://issues.jboss.org/secure/viewavatar?size=xsmall&amp;avatarId=13263&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.jboss.org/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.jboss.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Done</resolution>
                                        <assignee username="emuckenhuber">Emanuel Muckenhuber</assignee>
                                    <reporter username="brian.stansberry">Brian Stansberry</reporter>
                        <labels>
                    </labels>
                <created>Mon, 11 Mar 2013 19:28:28 -0400</created>
                <updated>Mon, 24 Feb 2014 17:52:22 -0500</updated>
                            <resolved>Fri, 22 Mar 2013 08:06:50 -0400</resolved>
                                                    <fixVersion>8.0.0.Alpha1</fixVersion>
                                    <component>Domain Management</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="12760426" author="brian.stansberry" created="Mon, 11 Mar 2013 19:29:41 -0400"  >&lt;p&gt;Thread dump from server side processes.&lt;/p&gt;</comment>
                            <comment id="12760434" author="brian.stansberry" created="Mon, 11 Mar 2013 22:37:56 -0400"  >&lt;p&gt;It&apos;s simpler than the original description. Multiple servers aren&apos;t required, nor is restart-servers required. Calling /server-group=x:start-servers when the master HC has just a single server in group &quot;x&quot; will result in the problem.&lt;/p&gt;

&lt;p&gt;The problem is that:&lt;/p&gt;

&lt;p&gt;1) OperationCoordinatorStepHandler calls context.acquireControllerLock() at line 209. The lock will be held until the server connects.&lt;br/&gt;
2) The registering server needs to acquire the lock as part of registration, ServerToHostProtocolHandler line 254. Until it gets the lock, it cannot connect.&lt;/p&gt;

&lt;p&gt;This deadlocks.&lt;/p&gt;

&lt;p&gt;A likely workaround is to not run servers on the master HostController. The lock acquired in 1) is done on the master.&lt;/p&gt;</comment>
                            <comment id="12762800" author="jira-bugzilla-migration" created="Sun, 24 Mar 2013 09:19:30 -0400"  >&lt;p&gt;Brian Stansberry &amp;lt;brian.stansberry@redhat.com&amp;gt; changed the Status of &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=913236&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 913236&lt;/a&gt; from ASSIGNED to POST&lt;/p&gt;</comment>
                            <comment id="12763356" author="jira-bugzilla-migration" created="Tue, 26 Mar 2013 23:28:33 -0400"  >&lt;p&gt;Brian Stansberry &amp;lt;brian.stansberry@redhat.com&amp;gt; changed the Status of &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=913236&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 913236&lt;/a&gt; from POST to MODIFIED&lt;/p&gt;</comment>
                            <comment id="12764538" author="jira-bugzilla-migration" created="Tue, 2 Apr 2013 18:47:40 -0400"  >&lt;p&gt;Paul Gier &amp;lt;pgier@redhat.com&amp;gt; changed the Status of &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=913236&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 913236&lt;/a&gt; from MODIFIED to ON_QA&lt;/p&gt;</comment>
                            <comment id="12764939" author="jira-bugzilla-migration" created="Thu, 4 Apr 2013 08:15:58 -0400"  >&lt;p&gt;Radim Hatlapatka &amp;lt;rhatlapa@redhat.com&amp;gt; changed the Status of &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=913236&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 913236&lt;/a&gt; from ON_QA to VERIFIED&lt;/p&gt;</comment>
                            <comment id="12764940" author="jira-bugzilla-migration" created="Thu, 4 Apr 2013 08:15:59 -0400"  >&lt;p&gt;Radim Hatlapatka &amp;lt;rhatlapa@redhat.com&amp;gt; made a comment on &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=913236&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 913236&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Verified in EAP 6.1.0 ER4&lt;/p&gt;</comment>
                            <comment id="12791906" author="jira-bugzilla-migration" created="Tue, 23 Jul 2013 14:39:43 -0400"  >&lt;p&gt;mark yarborough &amp;lt;myarboro@redhat.com&amp;gt; changed the Status of &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=913236&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 913236&lt;/a&gt; from VERIFIED to CLOSED&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12361311" name="AS7-6711-threads.txt" size="130092" author="brian.stansberry" created="Mon, 11 Mar 2013 19:29:41 -0400"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310440" key="org.jboss.labs.jira.plugin.jboss-custom-field-types-plugin:multiurl">
                        <customfieldname>Bugzilla References</customfieldname>
                        <customfieldvalues>
                            https://bugzilla.redhat.com/show_bug.cgi?id=913236
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310641" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Number of attachments</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310640" key="com.atlassian.jira.toolkit:comments">
                        <customfieldname>Number of comments</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>8.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311940" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1|hzg4mv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310840" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>154537</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>