<!-- 
RSS generated by JIRA (7.2.3#72005-sha1:73be91d2b96fc29303a7eb6820acf420e5d0ed65) at Mon Dec 12 13:56:15 EST 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.jboss.org/si/jira.issueviews:issue-xml/WFLY-3532/WFLY-3532.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>JBoss Issue Tracker</title>
    <link>https://issues.jboss.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>7.2.3</version>
        <build-number>72005</build-number>
        <build-date>06-10-2016</build-date>
    </build-info>

<item>
            <title>[WFLY-3532]  RemoteFailoverTestCase still fails intermittently</title>
                <link>https://issues.jboss.org/browse/WFLY-3532</link>
                <project id="12313721" key="WFLY">WildFly</project>
                    <description>&lt;p&gt;Fail rate is at 1.5% atm.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://brontes.lab.eng.brq.redhat.com/project.html?projectId=WF&amp;amp;testNameId=3213279503671281753&amp;amp;tab=testDetails&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://brontes.lab.eng.brq.redhat.com/project.html?projectId=WF&amp;amp;testNameId=3213279503671281753&amp;amp;tab=testDetails&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;(making affected version alpha, but indeed its master)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12544517">WFLY-3532</key>
            <summary> RemoteFailoverTestCase still fails intermittently</summary>
                <type id="1" iconUrl="https://issues.jboss.org/secure/viewavatar?size=xsmall&amp;avatarId=13263&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.jboss.org/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.jboss.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Done</resolution>
                                        <assignee username="rhusar">Radoslav Husar</assignee>
                                    <reporter username="rhusar">Radoslav Husar</reporter>
                        <labels>
                            <label>clean_undeploy</label>
                    </labels>
                <created>Fri, 20 Jun 2014 10:57:45 -0400</created>
                <updated>Tue, 23 Aug 2016 11:02:23 -0400</updated>
                            <resolved>Tue, 23 Aug 2016 11:02:23 -0400</resolved>
                                    <version>9.0.0.Alpha1</version>
                                    <fixVersion>11.0.0.Alpha1</fixVersion>
                                    <component>EJB</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="12978741" author="rachmato" created="Mon, 23 Jun 2014 17:32:21 -0400"  >&lt;p&gt;The test case which is failing is RemoteFailoverTestCase.testConcurrentFailover(). The test works something like this. Two servers are started and a clustered application:involving a stateful session bean is deployed on each server. The client then does the following:&lt;/p&gt;

&lt;p/&gt;
&lt;div id=&quot;syntaxplugin&quot; class=&quot;syntaxplugin&quot; style=&quot;border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;&quot;&gt;
&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; border=&quot;0&quot; width=&quot;100%&quot; style=&quot;font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;&quot;&gt;
		&lt;tbody &gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;- schedule a periodic invocation on the application to be scheduled with no initial delay and a 10 millisecond period&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;- undeploy the application as invocations arrive&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;- cancel the periodic invocation after undeployment&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;- redeploy the application&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&amp;nbsp;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;- schedule a periodic invocation on the application to be scheduled with no initial delay and a 10 millisecond period&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;- stop the server as invocations arrive&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;- cancel the periodic invocation after stopping the server&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;- restart the server&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
			&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;p/&gt;

&lt;p&gt;The idea behind these test cases is that the EJB client should be able to cleanly handle pending requests in the presence of the application being undeployed or servers being stopped by failing over from one server to the other as the application is undeployed/server is shut down..&lt;/p&gt;

&lt;p&gt;With this failure issue, the test passes when the application is undeployed; it fails when the server is stopped.&lt;/p&gt;</comment>
                            <comment id="12978743" author="rachmato" created="Mon, 23 Jun 2014 17:36:15 -0400"  >&lt;p&gt;In the stack trace, there is an exception occurring on the client side which relates to remoting noticing that a communication channel originating on the client has been broken as a result of the server going down):&lt;/p&gt;

&lt;p/&gt;
&lt;div id=&quot;syntaxplugin&quot; class=&quot;syntaxplugin&quot; style=&quot;border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;&quot;&gt;
&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; border=&quot;0&quot; width=&quot;100%&quot; style=&quot;font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;&quot;&gt;
		&lt;tbody &gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;Caused by: java.io.IOException: Channel Channel ID 9a570e15 (outbound) of Remoting connection 0132be3f to /127.0.0.1:8180 has been closed&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;    at org.jboss.ejb.client.remoting.ChannelAssociation$1.handleClose(ChannelAssociation.java:123)&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;    at org.jboss.ejb.client.remoting.ChannelAssociation$1.handleClose(ChannelAssociation.java:115)&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;    at org.jboss.remoting3.spi.SpiUtils.safeHandleClose(SpiUtils.java:54)&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;    at org.jboss.remoting3.spi.AbstractHandleableCloseable$CloseHandlerTask.run(AbstractHandleableCloseable.java:501)&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;    at org.jboss.remoting3.spi.AbstractHandleableCloseable.runCloseTask(AbstractHandleableCloseable.java:406)&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;    at org.jboss.remoting3.spi.AbstractHandleableCloseable.closeComplete(AbstractHandleableCloseable.java:277)&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;    at org.jboss.remoting3.remote.RemoteConnectionChannel.closeAction(RemoteConnectionChannel.java:532)&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;    at org.jboss.remoting3.spi.AbstractHandleableCloseable.closeAsync(AbstractHandleableCloseable.java:359)&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;    at org.jboss.remoting3.remote.RemoteConnectionHandler.closeAllChannels(RemoteConnectionHandler.java:392)&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;    at org.jboss.remoting3.remote.RemoteConnectionHandler.receiveCloseRequest(RemoteConnectionHandler.java:213)&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;    at org.jboss.remoting3.remote.RemoteReadListener.handleEvent(RemoteReadListener.java:110)&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;    at org.jboss.remoting3.remote.RemoteReadListener.handleEvent(RemoteReadListener.java:45)&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;    at org.xnio.ChannelListeners.invokeChannelListener(ChannelListeners.java:92)&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;    at org.xnio.channels.TranslatingSuspendableChannel.handleReadable(TranslatingSuspendableChannel.java:199)&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;    at org.xnio.channels.TranslatingSuspendableChannel$1.handleEvent(TranslatingSuspendableChannel.java:113)&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;    at org.xnio.ChannelListeners.invokeChannelListener(ChannelListeners.java:92)&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;    at org.xnio.ChannelListeners$DelegatingChannelListener.handleEvent(ChannelListeners.java:1092)&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;    at org.xnio.ChannelListeners.invokeChannelListener(ChannelListeners.java:92)&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;    at org.xnio.conduits.ReadReadyHandler$ChannelListenerHandler.readReady(ReadReadyHandler.java:66)&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;    at org.xnio.nio.NioSocketConduit.handleReady(NioSocketConduit.java:87)&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;    at org.xnio.nio.WorkerThread.run(WorkerThread.java:539)&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
			&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;p/&gt;

&lt;p&gt;This causes the method ChannelAssociation.handleClose() to be called for the broken channel in question. It occurs asynchronously on the client.&lt;/p&gt;</comment>
                            <comment id="12978747" author="rachmato" created="Mon, 23 Jun 2014 17:44:53 -0400"  >&lt;p&gt;What I think is happening is this:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;requests are arriving for execution every 10 milliseconds&lt;/li&gt;
	&lt;li&gt;server is shutdown, and as it is being shutdown, some requests continue to arrive; some of these requests are processed correctly, but at some point in time, the server starts responding with EJBComponentUnavailable exception, indicating that the bean is no longer available&lt;/li&gt;
	&lt;li&gt;at a further point in time, a request has been sent to the server and is waiting for its reply&lt;/li&gt;
	&lt;li&gt;because the request started execution and it is synchronous, an EJBReceiver is chosen, the request &lt;b&gt;message&lt;/b&gt; is sent asynchronously on the channel to the server and we now wait synchronously for the result to arrive back from the server&lt;/li&gt;
	&lt;li&gt;while this is happening, the channel is detected as being broken when the server goes down&lt;/li&gt;
	&lt;li&gt;at the Remoting level, the ChannelCloseHandler installed by the ChannelAssociation is called&lt;/li&gt;
	&lt;li&gt;this has the effect of calling ChannelAsociation.notifyBrokenChannel() for all pending EJBClient invocations which make use of that channel&lt;/li&gt;
	&lt;li&gt;this has the effect of setting the Result for all pending invocations to UnuseableChannelResultProducer(ioException) where IOException&lt;br/&gt;
  is the reason why the channel close handler was called&lt;/li&gt;
	&lt;li&gt;because we are waiting for the the result, the result becomes ready (with the UnuseableChannelResultProducer) and when we call getResult(), the contained IOException is thrown&lt;/li&gt;
	&lt;li&gt;because of the design of EJBInvocationHandler, awaiting results is performed after the retries, so the exception gets passed back to the caller and we do not retry based on the exception&lt;/li&gt;
&lt;/ul&gt;

</comment>
                            <comment id="12978749" author="rachmato" created="Mon, 23 Jun 2014 17:52:41 -0400"  >&lt;p&gt;The issue present in the design of EJBInvocationHandler is that the exception arising from the broken channel only affects the Result object which is checked after we have made all of our possible retries based on excluded nodes. It would appear that although the server has shut down, a new topology update has not arrived from the other server (somehow) to influence the behaviour of the retries handler. Instead, as far as the retries handler is concerned, all is well. The server going down is only handled after the retries handler has communicated successfully with the remote node (and before the channel has broken) and so completed its task.&lt;/p&gt;

&lt;p&gt;I&apos;ll try and confirm these guesses before progressing.&lt;/p&gt;


</comment>
                            <comment id="13031969" author="rachmato" created="Mon, 12 Jan 2015 17:08:34 -0500"  >&lt;p&gt;This test case is still failing, and in various failure modes, as before; however, in the interim, the mechanism for shutting down the server has changed. Wildfly now incorporates the SuspendController / RequestController / ControlPoint / EJBSuspendInterceptor for managing clean shutdown, whereas previous implemetations made uee of the ShutdownInterceptorFactory for shutting down EJB services in a manageable way.&lt;/p&gt;

&lt;p&gt;It used to the the case that this test only failed on stop/start of the server. It now fails on undeploy / deploy as well as stop / start.&lt;/p&gt;

&lt;p&gt;In the case of undeploy, the issue has been isolated and a description appears here: :&lt;a href=&quot;https://issues.jboss.org/browse/WFLY-4234&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.jboss.org/browse/WFLY-4234&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;In the case of stop / start, there are a couple of issues:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;the test case framework uses the clean shutdown mechanism but does not specify a timeout value to give running invocations, which get through before shutdown starts, a chance to finish. Thus, although clean shutdown is in place, in the test case, we are effectively simulating a shutdown in which active invocations get no time to finish&lt;/li&gt;
	&lt;li&gt;if the shutdown timeout is adjusted so that either an invocation will get past the interceptor and have a chance to finish or an invocation will not get past the interceptor and return an EJBUnavailableException, then we still get exactly the type of exception as described above. The problem here is that if the EJBInvocationHandler has to retry an invocation on another node, due to an EJBUnavailableException, it does not correctly de-register the original invocation attempt from waiting for results coming off the original Channel; then when the channel does get closed (by the shutting down server), we get the exception described above. The fix here is, before retrying the request, make sure we de-enroll the invocation for waiting for results&lt;/li&gt;
&lt;/ul&gt;


</comment>
                            <comment id="13031971" author="rachmato" created="Mon, 12 Jan 2015 17:23:18 -0500"  >&lt;p&gt;I&apos;ll try and explain a little better:&lt;/p&gt;

&lt;p&gt;When we make an invocation, we start out with an EJBClientInvocationContext representing the invocation client and the invocation parameters. We then choose an EJBReceiver which can handle the invocation and create an EJBReceiverInvocationContext to represent it. The EJBReceiverInvocationContext refers to the EJBReceiver and also Channel used. When we successfully send out an invocation on a channel, we store the fact that we need to wai for a response, and store this fact in a map (ChannelAssociation.waitingMethodInvocations) specifying the invocationId and the EJBReceiverInvocationContext. &lt;/p&gt;

&lt;p&gt;If the response does not return, or returns with an EJBUnavailableException, we retry the invocation, ultimately using a new EJBReceiverInvocationContext (and so a new Channel). What was causing the exception was that, before retrying, we were not removing the the stored fact that we were waiting on an old EJBReceiverInvocationContext and Channel. When that Channel closed as a result of the server shutting down, it triggered the exception that we were seeing, despite the fact that a new EJBReceiver was being chosen and the retry of the invocation was failing over correctly.&lt;/p&gt;
</comment>
                            <comment id="13032243" author="rachmato" created="Tue, 13 Jan 2015 13:03:59 -0500"  >&lt;p&gt;Linked the EJBClient issue (&lt;a href=&quot;https://issues.jboss.org/browse/EJBCLIENT-130&quot; title=&quot;Channel exception should not occur during fail-over triggered by NoSuchEJBException  &quot; class=&quot;issue-link&quot; data-issue-key=&quot;EJBCLIENT-130&quot;&gt;&lt;del&gt;EJBCLIENT-130&lt;/del&gt;&lt;/a&gt;) which causes the channel exception to occur in the context of a request being retried on a different node due to EJB component not being available.&lt;/p&gt;</comment>
                            <comment id="13034432" author="rachmato" created="Thu, 22 Jan 2015 11:43:21 -0500"  >&lt;p&gt;This test case:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;fails intermittently&lt;/li&gt;
	&lt;li&gt;the underlying root causes (Arquillian setting of clean shutdown timeout, graceful undeploy) are not likely to be fixed in the next weeks&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;So i&apos;m proposing to ignore this test case until these issues are resolved. PR is attached.&lt;/p&gt;
</comment>
                            <comment id="13036281" author="rachmato" created="Thu, 29 Jan 2015 11:38:43 -0500"  >&lt;p&gt;The failing test case has been @Ignored until the underlying issues are fixed.&lt;/p&gt;</comment>
                            <comment id="13068138" author="rachmato" created="Thu, 14 May 2015 12:10:15 -0400"  >&lt;p&gt;Re-instating the test case now that underlying issues are resolved.&lt;/p&gt;</comment>
                            <comment id="13068150" author="rachmato" created="Thu, 14 May 2015 12:36:47 -0400"  >&lt;p&gt;Resolved.&lt;/p&gt;</comment>
                            <comment id="13068402" author="rhusar" created="Fri, 15 May 2015 09:33:11 -0400"  >&lt;p&gt;(PR for 9.x branch was &lt;a href=&quot;https://github.com/wildfly/wildfly/pull/7466&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/wildfly/wildfly/pull/7466&lt;/a&gt;)&lt;/p&gt;</comment>
                            <comment id="13068575" author="brian.stansberry" created="Fri, 15 May 2015 15:59:29 -0400"  >&lt;p&gt;Test is failing repeatedly.&lt;/p&gt;</comment>
                            <comment id="13068598" author="rachmato" created="Fri, 15 May 2015 18:48:10 -0400"  >&lt;p&gt;Going to try to get a TeamCity custom job setup to test further, as this test passes 10/10 locally.&lt;/p&gt;</comment>
                            <comment id="13068599" author="brian.stansberry" created="Fri, 15 May 2015 19:06:44 -0400"  >&lt;p&gt;Make sure your branch is up to date with master, as it&apos;s had version updates of ejb-client, infinispan and hibernate in the last 30 hours or so.&lt;/p&gt;</comment>
                            <comment id="13068600" author="rachmato" created="Fri, 15 May 2015 19:10:17 -0400"  >&lt;p&gt;I did rebase beforehand, and i&apos;m using ejb-client 2.1.1.Final. I did get one failed run out of about 20, but it was my second run before adding some extra logging.&lt;/p&gt;

&lt;p&gt;Just FYI for the issue overall, I did get one test case run hanging, not failing. Looking inside the logs which were still live I saw that one of the servers would not shut down due to an Infinispan NPE on trying to re-activate a passivated entry which was no longer available.&lt;/p&gt;</comment>
                            <comment id="13068602" author="rachmato" created="Fri, 15 May 2015 19:50:13 -0400"  >&lt;p&gt;Was previously running the test using -Dcluster-tests -Dtest= ... when I had 20/20 passed runs. &lt;br/&gt;
Running with -Dcluster-tests causes the failure to appear more regularly.&lt;br/&gt;
A number of transaction related errors. Will investigate.&lt;/p&gt;
</comment>
                            <comment id="13086858" author="rachmato" created="Mon, 6 Jul 2015 13:37:12 -0400"  >&lt;p&gt;This should be fixed for the case of clean shutdown via  &lt;a href=&quot;https://issues.jboss.org/browse/WFLY-4697&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.jboss.org/browse/WFLY-4697&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13089470" author="rachmato" created="Tue, 14 Jul 2015 17:06:23 -0400"  >&lt;p&gt;Looks to be resolved based on latest test results.&lt;/p&gt;</comment>
                            <comment id="13089479" author="brian.stansberry" created="Tue, 14 Jul 2015 17:41:52 -0400"  >&lt;p&gt;There are lots of failures:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://brontes.lab.eng.brq.redhat.com/project.html?projectId=WF&amp;amp;buildTypeId=&amp;amp;tab=testDetails&amp;amp;testNameId=3213279503671281753&amp;amp;order=TEST_STATUS_DESC&amp;amp;branch_WF=__all_branches__&amp;amp;itemsCount=50&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://brontes.lab.eng.brq.redhat.com/project.html?projectId=WF&amp;amp;buildTypeId=&amp;amp;tab=testDetails&amp;amp;testNameId=3213279503671281753&amp;amp;order=TEST_STATUS_DESC&amp;amp;branch_WF=__all_branches__&amp;amp;itemsCount=50&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://brontes.lab.eng.brq.redhat.com/project.html?projectId=WF&amp;amp;buildTypeId=&amp;amp;tab=testDetails&amp;amp;testNameId=-8959629855273844736&amp;amp;order=TEST_STATUS_DESC&amp;amp;branch_WF=__all_branches__&amp;amp;itemsCount=50&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://brontes.lab.eng.brq.redhat.com/project.html?projectId=WF&amp;amp;buildTypeId=&amp;amp;tab=testDetails&amp;amp;testNameId=-8959629855273844736&amp;amp;order=TEST_STATUS_DESC&amp;amp;branch_WF=__all_branches__&amp;amp;itemsCount=50&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://brontes.lab.eng.brq.redhat.com/project.html?projectId=WF&amp;amp;buildTypeId=&amp;amp;tab=testDetails&amp;amp;testNameId=7448292873196812875&amp;amp;order=TEST_STATUS_DESC&amp;amp;branch_WF=__all_branches__&amp;amp;itemsCount=50&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://brontes.lab.eng.brq.redhat.com/project.html?projectId=WF&amp;amp;buildTypeId=&amp;amp;tab=testDetails&amp;amp;testNameId=7448292873196812875&amp;amp;order=TEST_STATUS_DESC&amp;amp;branch_WF=__all_branches__&amp;amp;itemsCount=50&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://brontes.lab.eng.brq.redhat.com/project.html?projectId=WF&amp;amp;buildTypeId=&amp;amp;tab=testDetails&amp;amp;testNameId=-329177664848674764&amp;amp;order=TEST_STATUS_DESC&amp;amp;branch_WF=__all_branches__&amp;amp;itemsCount=50&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://brontes.lab.eng.brq.redhat.com/project.html?projectId=WF&amp;amp;buildTypeId=&amp;amp;tab=testDetails&amp;amp;testNameId=-329177664848674764&amp;amp;order=TEST_STATUS_DESC&amp;amp;branch_WF=__all_branches__&amp;amp;itemsCount=50&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;That&apos;s for the &quot;WildFly&quot; project on TeamCity. I expect there are more in the &quot;WildFly Core&quot; project in the jobs where it runs the WildFly full testsuite to check core PRs.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310220">
                    <name>Causality</name>
                                            <outwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="12561011">WFLY-4255</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12560852">EJBCLIENT-130</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10012">
                    <name>Dependency</name>
                                            <outwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12573154">WFLY-4697</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310001">
                    <name>Related</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12560559">WFLY-4234</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12643973">JBEAP-5679</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="org.jboss.labs.jira.plugin.jboss-custom-field-types-plugin:multiurl">
                        <customfieldname>Git Pull Request</customfieldname>
                        <customfieldvalues>
                            https://github.com/wildfly/wildfly/pull/8149
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310641" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Number of attachments</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310640" key="com.atlassian.jira.toolkit:comments">
                        <customfieldname>Number of comments</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>20.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311940" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1|hzs1cn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310840" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>