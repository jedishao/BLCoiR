<!-- 
RSS generated by JIRA (7.2.3#72005-sha1:73be91d2b96fc29303a7eb6820acf420e5d0ed65) at Tue Dec 06 14:12:18 EST 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.jboss.org/si/jira.issueviews:issue-xml/WFLY-5188/WFLY-5188.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>JBoss Issue Tracker</title>
    <link>https://issues.jboss.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>7.2.3</version>
        <build-number>72005</build-number>
        <build-date>06-10-2016</build-date>
    </build-info>

<item>
            <title>[WFLY-5188] DistributedWorkManager needs to handle unknown fork responses.</title>
                <link>https://issues.jboss.org/browse/WFLY-5188</link>
                <project id="12313721" key="WFLY">WildFly</project>
                    <description>&lt;p&gt;The JGroupsTransport employed by the DistributedWorkManager uses synchronous multicasting via the RpcDispatcher.  Since the JCA default configuration was modified to use fork channels, we need to ensure that it handles an exception case specific for fork channels, i.e. the case where a message is received by a node on which no such DWM exists.&lt;/p&gt;

&lt;p&gt;As I see it, there are 2 ways we can fix this:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Configure the RpcDispatcher with a custom response marshaller capable of recognizing unknown fork responses&lt;/li&gt;
	&lt;li&gt;Implement a transport that leverages CommandDispatcher, which already handles this exception case.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;#1 is the easiest.  The only hiccup is that the RpcDispatcher field in JGroupsTransport is private, which requires reflection to access from a subclass.&lt;/p&gt;

&lt;p&gt;#2 is probably the ideal long term solution.  The DistributedWorkManager already employs a command pattern, so using CommandDispatcher is a natural fit.  Using the CommandDispatcher will also simplifies marshalling/unmarshalling of the transport parameters.  Additionally, using the public clustering API allows us to remove the direct dependency on org.jgroups module from the connector subsystems.  The only hiccup here is that in order to optimize the marshalling of the command objects, requires the use of the marshalling API introduced as part of &lt;a href=&quot;https://issues.jboss.org/browse/WFLY-5091&quot; title=&quot;User supplied externalizers are ignored by web/ejb clustering code&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WFLY-5091&quot;&gt;&lt;del&gt;WFLY-5091&lt;/del&gt;&lt;/a&gt;, which, at the time of this writing, has not yet been merged into WF master.&lt;/p&gt;

&lt;p&gt;Given the above, I suggest a 2 phase solution, where we implement #1 for now, and #2 when the missing pieces are in place.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12582356">WFLY-5188</key>
            <summary>DistributedWorkManager needs to handle unknown fork responses.</summary>
                <type id="1" iconUrl="https://issues.jboss.org/secure/viewavatar?size=xsmall&amp;avatarId=13263&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.jboss.org/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.jboss.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Done</resolution>
                                        <assignee username="pferraro">Paul Ferraro</assignee>
                                    <reporter username="pferraro">Paul Ferraro</reporter>
                        <labels>
                    </labels>
                <created>Mon, 24 Aug 2015 10:49:59 -0400</created>
                <updated>Tue, 1 Sep 2015 22:09:25 -0400</updated>
                            <resolved>Tue, 1 Sep 2015 22:09:24 -0400</resolved>
                                    <version>10.0.0.Beta2</version>
                                    <fixVersion>10.0.0.CR1</fixVersion>
                                    <component>Clustering</component>
                    <component>JCA</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13101140" author="pferraro" created="Mon, 24 Aug 2015 12:16:22 -0400"  >&lt;p&gt;&lt;a href=&quot;https://issues.jboss.org/browse/JBJCA-1289&quot; title=&quot;Expose RpcDispatcher in JGroupsTransport&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JBJCA-1289&quot;&gt;&lt;del&gt;JBJCA-1289&lt;/del&gt;&lt;/a&gt; will eliminate the need for reflection.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10012">
                    <name>Dependency</name>
                                            <outwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12582364">WFLY-5191</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310001">
                    <name>Related</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12582363">JBJCA-1289</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="org.jboss.labs.jira.plugin.jboss-custom-field-types-plugin:multiurl">
                        <customfieldname>Git Pull Request</customfieldname>
                        <customfieldvalues>
                            https://github.com/wildfly/wildfly/pull/8045
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310641" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Number of attachments</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310640" key="com.atlassian.jira.toolkit:comments">
                        <customfieldname>Number of comments</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311940" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1|hzy47z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310840" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>