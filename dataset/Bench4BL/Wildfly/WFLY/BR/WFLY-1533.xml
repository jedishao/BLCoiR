<!-- 
RSS generated by JIRA (7.2.3#72005-sha1:73be91d2b96fc29303a7eb6820acf420e5d0ed65) at Tue Dec 06 11:52:30 EST 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.jboss.org/si/jira.issueviews:issue-xml/WFLY-1533/WFLY-1533.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>JBoss Issue Tracker</title>
    <link>https://issues.jboss.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>7.2.3</version>
        <build-number>72005</build-number>
        <build-date>06-10-2016</build-date>
    </build-info>

<item>
            <title>[WFLY-1533] UT015005: Error invoking method requestDestroyed on listener class </title>
                <link>https://issues.jboss.org/browse/WFLY-1533</link>
                <project id="12313721" key="WFLY">WildFly</project>
                    <description>&lt;p&gt;I&apos;m using a WildFly snapshot with Undertow 1.0.0.Alpha19 and Weld 2.0.1.Final. I&apos;m getting the following stacktrace:&lt;/p&gt;

&lt;p&gt;16:55:04,534 ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;io.undertow.servlet.request&amp;#93;&lt;/span&gt; UT015005: Error invoking method requestDestroyed on listener class org.jboss.weld.servlet.WeldListener: java.lang.IllegalStateException: UT000010: Session not found MDEkG_Aum5OlXUsjh11kGkh9&lt;br/&gt;
	at io.undertow.server.session.InMemorySessionManager$SessionImpl.getAttribute(InMemorySessionManager.java:221) &lt;span class=&quot;error&quot;&gt;&amp;#91;undertow-core-1.0.0.Alpha19.jar:1.0.0.Alpha19&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at io.undertow.servlet.spec.HttpSessionImpl.getAttribute(HttpSessionImpl.java:106) &lt;span class=&quot;error&quot;&gt;&amp;#91;undertow-servlet-1.0.0.Alpha19.jar:1.0.0.Alpha19&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.jboss.weld.context.http.HttpConversationContextImpl.getSessionAttribute(HttpConversationContextImpl.java:25) &lt;span class=&quot;error&quot;&gt;&amp;#91;weld-core-impl-2.0.1.Final.jar:2013-06-03 10:29&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.jboss.weld.context.http.HttpConversationContextImpl.getSessionAttribute(HttpConversationContextImpl.java:13) &lt;span class=&quot;error&quot;&gt;&amp;#91;weld-core-impl-2.0.1.Final.jar:2013-06-03 10:29&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.jboss.weld.context.AbstractConversationContext.dissociate(AbstractConversationContext.java:161) &lt;span class=&quot;error&quot;&gt;&amp;#91;weld-core-impl-2.0.1.Final.jar:2013-06-03 10:29&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.jboss.weld.servlet.ConversationContextActivator.disassociateConversationContext(ConversationContextActivator.java:162) &lt;span class=&quot;error&quot;&gt;&amp;#91;weld-core-impl-2.0.1.Final.jar:2013-06-03 10:29&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.jboss.weld.servlet.HttpContextLifecycle.requestDestroyed(HttpContextLifecycle.java:159) &lt;span class=&quot;error&quot;&gt;&amp;#91;weld-core-impl-2.0.1.Final.jar:2013-06-03 10:29&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.jboss.weld.servlet.WeldListener.requestDestroyed(WeldListener.java:91) &lt;span class=&quot;error&quot;&gt;&amp;#91;weld-core-impl-2.0.1.Final.jar:2013-06-03 10:29&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at io.undertow.servlet.core.ApplicationListeners.requestDestroyed(ApplicationListeners.java:196) &lt;span class=&quot;error&quot;&gt;&amp;#91;undertow-servlet-1.0.0.Alpha19.jar:1.0.0.Alpha19&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at io.undertow.servlet.handlers.ServletInitialHandler.handleFirstRequest(ServletInitialHandler.java:159) &lt;span class=&quot;error&quot;&gt;&amp;#91;undertow-servlet-1.0.0.Alpha19.jar:1.0.0.Alpha19&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at io.undertow.servlet.handlers.ServletInitialHandler.dispatchRequest(ServletInitialHandler.java:114) &lt;span class=&quot;error&quot;&gt;&amp;#91;undertow-servlet-1.0.0.Alpha19.jar:1.0.0.Alpha19&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at io.undertow.servlet.handlers.ServletInitialHandler.access$000(ServletInitialHandler.java:47) &lt;span class=&quot;error&quot;&gt;&amp;#91;undertow-servlet-1.0.0.Alpha19.jar:1.0.0.Alpha19&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at io.undertow.servlet.handlers.ServletInitialHandler$1.handleRequest(ServletInitialHandler.java:90) &lt;span class=&quot;error&quot;&gt;&amp;#91;undertow-servlet-1.0.0.Alpha19.jar:1.0.0.Alpha19&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at io.undertow.server.HttpHandlers.executeRootHandler(HttpHandlers.java:36) &lt;span class=&quot;error&quot;&gt;&amp;#91;undertow-core-1.0.0.Alpha19.jar:1.0.0.Alpha19&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at io.undertow.server.HttpServerExchange$1.run(HttpServerExchange.java:607) &lt;span class=&quot;error&quot;&gt;&amp;#91;undertow-core-1.0.0.Alpha19.jar:1.0.0.Alpha19&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145) &lt;span class=&quot;error&quot;&gt;&amp;#91;rt.jar:1.7.0_21&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615) &lt;span class=&quot;error&quot;&gt;&amp;#91;rt.jar:1.7.0_21&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:722) &lt;span class=&quot;error&quot;&gt;&amp;#91;rt.jar:1.7.0_21&amp;#93;&lt;/span&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12494311">WFLY-1533</key>
            <summary>UT015005: Error invoking method requestDestroyed on listener class </summary>
                <type id="1" iconUrl="https://issues.jboss.org/secure/viewavatar?size=xsmall&amp;avatarId=13263&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.jboss.org/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.jboss.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Done</resolution>
                                        <assignee username="mkouba">Martin Kouba</assignee>
                                    <reporter username="juergen.zimmermann">Juergen Zimmermann</reporter>
                        <labels>
                    </labels>
                <created>Fri, 14 Jun 2013 11:09:44 -0400</created>
                <updated>Thu, 4 Sep 2014 09:54:16 -0400</updated>
                            <resolved>Wed, 18 Dec 2013 03:12:48 -0500</resolved>
                                    <version>8.0.0.Alpha2</version>
                    <version>8.0.0.Alpha4</version>
                                    <fixVersion>8.0.0.CR1</fixVersion>
                                    <component>CDI / Weld</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="12782203" author="swd847" created="Mon, 17 Jun 2013 18:56:53 -0400"  >&lt;p&gt;Does this happen after the session has been invalidated, or at other times?&lt;/p&gt;</comment>
                            <comment id="12784234" author="juergen.zimmermann" created="Tue, 25 Jun 2013 04:45:02 -0400"  >&lt;p&gt;It happens when my logout method (see below) is processed.&lt;/p&gt;

&lt;p/&gt;
&lt;div id=&quot;syntaxplugin&quot; class=&quot;syntaxplugin&quot; style=&quot;border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;&quot;&gt;
&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; border=&quot;0&quot; width=&quot;100%&quot; style=&quot;font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;&quot;&gt;
		&lt;tbody &gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;@Named&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;@SessionScoped&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;public class AuthModel implements Serializable {&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;   @Inject&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;   private transient HttpServletRequest request;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;   @Inject&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;   private transient HttpSession session;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;   ...&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;   public String logout() {&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;      try {&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;         request.logout();&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;      }&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;      catch (ServletException e) {&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;         return null;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;      }&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;      session.invalidate();&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;      return &quot;/index?faces-redirect=true&quot;;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;   }&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;}&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
			&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;p/&gt;</comment>
                            <comment id="12789561" author="jaikiran" created="Mon, 15 Jul 2013 02:38:57 -0400"  >&lt;p&gt;Is this still an issue against latest nightly build of WildFly?&lt;/p&gt;</comment>
                            <comment id="12789607" author="juergen.zimmermann" created="Mon, 15 Jul 2013 06:36:42 -0400"  >&lt;p&gt;Yes, the issue still exists when using Undertow 1.0.0.Beta1. The problem in the code fragment above is the line&lt;/p&gt;
&lt;p/&gt;
&lt;div id=&quot;syntaxplugin&quot; class=&quot;syntaxplugin&quot; style=&quot;border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;&quot;&gt;
&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; border=&quot;0&quot; width=&quot;100%&quot; style=&quot;font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;&quot;&gt;
		&lt;tbody &gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;  margin-top: 10px;   margin-bottom: 10px;  width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;session.invalidate();&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
			&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;p/&gt;</comment>
                            <comment id="12797633" author="juergen.zimmermann" created="Mon, 19 Aug 2013 10:15:45 -0400"  >&lt;p&gt;I just compiled the latest WildFly snapshot having Undertow 1.0.0.Beta8: the issue still exists.&lt;/p&gt;</comment>
                            <comment id="12798562" author="juergen.zimmermann" created="Thu, 22 Aug 2013 12:09:20 -0400"  >&lt;p&gt;I just compiled the latest WildFly snapshot having Undertow 1.0.0.Beta9: the issue still exists&lt;/p&gt;</comment>
                            <comment id="12798824" author="swd847" created="Fri, 23 Aug 2013 07:21:05 -0400"  >&lt;p&gt;Are you using session clustering in your application? Or just the standard in memory session manager?&lt;/p&gt;</comment>
                            <comment id="12798831" author="swd847" created="Fri, 23 Aug 2013 07:47:53 -0400"  >&lt;p&gt;I can&apos;t reproduce this, and don&apos;t really understand how it could happen. &lt;/p&gt;

&lt;p&gt;Looking at the code HttpConversationContextImpl gets its session from org.jboss.weld.servlet.SessionHolder#CURRENT_SESSION, which should be cleared by a session listener when invalidate() is called. &lt;/p&gt;

&lt;p&gt;The only way I can see for this to happen is if somehow the session listeners are not being invoked, but I can&apos;t see how that could happen.&lt;/p&gt;</comment>
                            <comment id="12799516" author="juergen.zimmermann" created="Tue, 27 Aug 2013 08:41:04 -0400"  >&lt;p&gt;1) I&apos;m NOT using session clustering. The issue happens in my dev environment.&lt;br/&gt;
2) I&apos;m also using Mojarra 2.1.25 and RichFaces 5.0 which is only available for JSF 2.1 resp Mojarra 2.1.x&lt;/p&gt;</comment>
                            <comment id="12800592" author="juergen.zimmermann" created="Fri, 30 Aug 2013 09:50:34 -0400"  >&lt;p&gt;The issue still exists with Undertow 1.0.0.Beta11.&lt;/p&gt;</comment>
                            <comment id="12800740" author="jharting" created="Sun, 1 Sep 2013 04:56:06 -0400"  >&lt;p&gt;Juergen, would you be able to put together a minimal application that reliably reproduces the problem?&lt;/p&gt;</comment>
                            <comment id="12800962" author="juergen.zimmermann" created="Mon, 2 Sep 2013 12:28:06 -0400"  >&lt;p&gt;Josef, I&apos;m out of town until Friday. Then I&apos;ll put together a testcase.&lt;/p&gt;</comment>
                            <comment id="12802456" author="juergen.zimmermann" created="Fri, 6 Sep 2013 11:21:53 -0400"  >&lt;p&gt;Instructions for the testcase:&lt;/p&gt;

&lt;p&gt;1) Install WildFly from the latest master.&lt;/p&gt;

&lt;p&gt;2) Add the modules for Mojarra 2.1.26 because even the latest release of RichFaces doesn&apos;t work with Mojarra 2.2.x, i.e. just unzip mojarra-2.1.zip in $JBOSS_HOME/modules.&lt;/p&gt;

&lt;p&gt;3) In standalone/configuration/standalone.xml add the security domain &quot;testcase&quot; which is configured via users.properties and roles.properties in the testcase itself:&lt;/p&gt;
&lt;p/&gt;
&lt;div id=&quot;syntaxplugin&quot; class=&quot;syntaxplugin&quot; style=&quot;border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;&quot;&gt;
&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; border=&quot;0&quot; width=&quot;100%&quot; style=&quot;font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;&quot;&gt;
		&lt;tbody &gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;&amp;lt;security-domain name=&quot;testcase&quot; cache-type=&quot;default&quot;&amp;gt;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;   &amp;lt;authentication&amp;gt;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;      &amp;lt;login-module code=&quot;UsersRoles&quot; flag=&quot;required&quot;/&amp;gt;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;   &amp;lt;/authentication&amp;gt;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;&amp;lt;/security-domain&amp;gt;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
			&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;p/&gt;

&lt;p&gt;4) Start the WildFly server, i.e. $JBOSS_HOME/bin/standalone.bat&lt;/p&gt;

&lt;p&gt;5) Prepare the testcase in a shell:&lt;/p&gt;
&lt;p/&gt;
&lt;div id=&quot;syntaxplugin&quot; class=&quot;syntaxplugin&quot; style=&quot;border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;&quot;&gt;
&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; border=&quot;0&quot; width=&quot;100%&quot; style=&quot;font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;&quot;&gt;
		&lt;tbody &gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;mvn package&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;cp target/testcase.war $JBOSS_HOME/standalone/deployments&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
			&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;p/&gt;
&lt;p&gt;Remark 1: During deployment on Windows you see a warning about package-info because of &lt;a href=&quot;https://hibernate.atlassian.net/i#browse/HHH-8394&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hibernate.atlassian.net/i#browse/HHH-8394&lt;/a&gt;&lt;br/&gt;
Remark 2: &quot;mvn jboss-as:deploy&quot; doesn&apos;t work because users.properties is searched in the CLASSPATH.&lt;/p&gt;

&lt;p&gt;6) Now in a webbrowser submit &lt;a href=&quot;http://localhost:8080/testcase&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://localhost:8080/testcase&lt;/a&gt;, and then log in using ID 1 and password p in the right upper corner. Then just click the new logout link. After about 30 seconds the stacktrace appears in the WildFly console.&lt;/p&gt;</comment>
                            <comment id="12803018" author="swd847" created="Tue, 10 Sep 2013 05:27:10 -0400"  >&lt;p&gt;It looks like this is caused by a combination of atmosphere long running requests and weld. Atmosphere starts a long running request, and weld stashes the attached session in a thread local. While this request is ongoing another requests ends the session. Once the atmosphere request ends weld attempts to use the session it stashed in a thread local, which has since been invalidated. &lt;/p&gt;

&lt;p&gt;A simple fix would be to call getLastAccesedTime on the session to ensure it is still valid. A better approach would be to just store the request, and not the session, and call getSession(false) each time. This would reduce the number of thread locals that weld needs to set. Ideally weld would only set a single thread local in the listener, which is the current request, and all other thread local data would be derived from that.    &lt;/p&gt;</comment>
                            <comment id="12805640" author="pangalz" created="Wed, 18 Sep 2013 18:00:02 -0400"  >&lt;p&gt;I&apos;ve a similar problem with WildFly 8 Alpha 4 + CDI.&lt;/p&gt;

&lt;p&gt;I get this ugly error while raising a exception in a CDI listener method, in my case disposing the entitymanager.&lt;/p&gt;

&lt;p&gt;*Testcase attached&lt;/p&gt;

&lt;p/&gt;
&lt;div id=&quot;syntaxplugin&quot; class=&quot;syntaxplugin&quot; style=&quot;border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;&quot;&gt;
&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; border=&quot;0&quot; width=&quot;100%&quot; style=&quot;font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;&quot;&gt;
		&lt;tbody &gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;public void closeEntityManager(@Disposes EntityManager em) {&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;        throw new PersistenceException(&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;                &quot;test UT015005: Error invoking method requestDestroyed on listener class&quot;);&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;        //em.getTransaction().commit();&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;        //if (em.isOpen()) {&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;        //    em.close();&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;        //}&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;    }&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
			&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;p/&gt;</comment>
                            <comment id="12829632" author="juergen.zimmermann" created="Sat, 2 Nov 2013 09:28:35 -0400"  >&lt;p&gt;Is any additional info required for this issue?&lt;/p&gt;</comment>
                            <comment id="12840900" author="mkouba" created="Mon, 4 Nov 2013 08:23:05 -0500"  >&lt;p&gt;&lt;a href=&quot;https://issues.jboss.org/secure/ViewProfile.jspa?name=pangalz&quot; class=&quot;user-hover&quot; rel=&quot;pangalz&quot;&gt;Leonardo Zanivan&lt;/a&gt; your testcase covers a different issue, see also &lt;a href=&quot;https://issues.jboss.org/browse/WELD-1542&quot; title=&quot;An exception thrown while invoking a disposer method not caught&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WELD-1542&quot;&gt;&lt;del&gt;WELD-1542&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="12850503" author="pangalz" created="Mon, 4 Nov 2013 10:27:26 -0500"  >&lt;p&gt;&lt;a href=&quot;https://issues.jboss.org/secure/ViewProfile.jspa?name=mkouba&quot; class=&quot;user-hover&quot; rel=&quot;mkouba&quot;&gt;Martin Kouba&lt;/a&gt; you&apos;re right. Thanks.&lt;/p&gt;</comment>
                            <comment id="12851299" author="mkouba" created="Wed, 6 Nov 2013 05:01:35 -0500"  >&lt;p&gt;We cannot get rid of SessionHolder thread local because we need to work around an incompatibility problem with some Servlet containers - see also &lt;a href=&quot;https://issues.jboss.org/browse/WFLY-175&quot; title=&quot;Using Session Scope CDI bean does not work in a HttpSessionListener&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WFLY-175&quot;&gt;&lt;del&gt;WFLY-175&lt;/del&gt;&lt;/a&gt;. We also can&apos;t reattach the session-related contexts because we&apos;re not able to reassociate the request with a new session - i.e. request.getSession(true) currently doesn&apos;t return a new/valid session (and the Servlet spec is quite vague in this area). So the only thing we can do is to try to make a proper cleanup as much as possible and possibly log some warning message (and the full stack in debug level).&lt;/p&gt;</comment>
                            <comment id="12928133" author="mkouba" created="Tue, 3 Dec 2013 05:59:38 -0500"  >&lt;p&gt;The way Weld performs cleanup and logging was improved a little bit. However the stacktrace logged by Undertow will remain.&lt;/p&gt;</comment>
                            <comment id="12928151" author="mkouba" created="Tue, 3 Dec 2013 07:08:22 -0500"  >&lt;p&gt;Actually I was wrong the stacktrace will only show if the logging level for Weld is set to DEBUG. A more concise message is logged with WARN level.&lt;/p&gt;</comment>
                            <comment id="12932003" author="mkouba" created="Tue, 17 Dec 2013 04:29:13 -0500"  >&lt;p&gt;Weld is catching and logging an exception thrown during session and conversation context dissociation from version 2.1.1.Final.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10012">
                    <name>Dependency</name>
                                            <outwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12518158">WFLY-2449</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12527531">WELD-1565</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310001">
                    <name>Related</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12483908">WFLY-175</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12364473" name="mojarra-2.1.zip" size="2473821" author="juergen.zimmermann" created="Fri, 6 Sep 2013 11:21:53 -0400"/>
                            <attachment id="12364474" name="testcase-WFLY-1533.zip" size="76132" author="juergen.zimmermann" created="Fri, 6 Sep 2013 11:21:53 -0400"/>
                            <attachment id="12364609" name="testcase-wildfly-1533.zip" size="7669" author="pangalz" created="Wed, 18 Sep 2013 18:00:02 -0400"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310641" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Number of attachments</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310640" key="com.atlassian.jira.toolkit:comments">
                        <customfieldname>Number of comments</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>22.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311940" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1|hzhcnr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310840" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>161645</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>