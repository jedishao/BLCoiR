<!-- 
RSS generated by JIRA (7.2.3#72005-sha1:73be91d2b96fc29303a7eb6820acf420e5d0ed65) at Tue Dec 06 14:48:33 EST 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.jboss.org/si/jira.issueviews:issue-xml/WFLY-179/WFLY-179.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>JBoss Issue Tracker</title>
    <link>https://issues.jboss.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>7.2.3</version>
        <build-number>72005</build-number>
        <build-date>06-10-2016</build-date>
    </build-info>

<item>
            <title>[WFLY-179] CLONE - Adding modcluster via the CLI fails.</title>
                <link>https://issues.jboss.org/browse/WFLY-179</link>
                <project id="12313721" key="WFLY">WildFly</project>
                    <description>&lt;p&gt;Adding modcluster via the CLI fails.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12472771">WFLY-179</key>
            <summary>CLONE - Adding modcluster via the CLI fails.</summary>
                <type id="1" iconUrl="https://issues.jboss.org/secure/viewavatar?size=xsmall&amp;avatarId=13263&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.jboss.org/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.jboss.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Done</resolution>
                                        <assignee username="rhusar">Radoslav Husar</assignee>
                                    <reporter username="tfonteyn">Tom Fonteyne</reporter>
                        <labels>
                    </labels>
                <created>Tue, 21 Aug 2012 05:48:09 -0400</created>
                <updated>Mon, 24 Feb 2014 17:52:44 -0500</updated>
                            <resolved>Tue, 12 Mar 2013 14:29:20 -0400</resolved>
                                                    <fixVersion>8.0.0.Alpha1</fixVersion>
                                    <component>CLI</component>
                    <component>Clustering</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>7</watches>
                                                                <comments>
                            <comment id="12716250" author="gonthim" created="Thu, 6 Sep 2012 03:54:09 -0400"  >&lt;p&gt;The basic problem is that the modcluster subsystem cannot start without certain values in the mod-cluster-config being configured. However, the mod-cluster-config can&apos;t be set up until there is a subsystem. The composite operation works because the subsystem does not attempt to start until after the mod-cluster-config is set up.&lt;/p&gt;

&lt;p&gt;I&apos;ve found a few solutions, but the best seems to be this one.&lt;/p&gt;

&lt;p&gt;1) Start the modcluster in a disabled mode. Adding a new attribute to /subsystem=modcluster:add(), &apos;enabled&apos;, and defaulting it to &apos;false&apos;, would allow the subsystem to be installed. Then the user could go into the mod-cluster-config and set up whatever they wanted, and go back and start the subsystem service once the setup is complete.&lt;/p&gt;

&lt;p&gt;This creates a small hassle, because the user has to go back and manually activate the subsystem after it&apos;s installed and configured, but it allows the user to configure the subsystem to their liking.&lt;/p&gt;

&lt;p&gt;Thoughts?&lt;/p&gt;</comment>
                            <comment id="12716376" author="tfonteyn" created="Thu, 6 Sep 2012 10:36:18 -0400"  >&lt;p&gt;I&apos;d go for your proposal with the &quot;enable&quot; step - sounds like an acceptable &amp;amp; good solution to me.&lt;/p&gt;</comment>
                            <comment id="12716488" author="brian.stansberry" created="Thu, 6 Sep 2012 21:21:57 -0400"  >&lt;p&gt;Please, no &quot;enable&quot; op. We need to find a more elegant solution.&lt;/p&gt;</comment>
                            <comment id="12720262" author="gonthim" created="Thu, 20 Sep 2012 07:38:18 -0400"  >&lt;p&gt;A more elegant solution as requested.&lt;/p&gt;

&lt;p&gt;Adding a ListAttributeDefinition to the ModClusterDefinition. ModClusterConfigAttributeDefinition. The new attribute definition essentially replicates the ModClusterConfigResourceDefinition as an attribute so that it can be used during the ./subsystem=modcluster:add(__) command. This way the user can input configuration values before the modcluster subsystem attempts to start up.&lt;/p&gt;

&lt;p&gt;CLI Usage Example:&lt;/p&gt;
&lt;p/&gt;
&lt;div id=&quot;syntaxplugin&quot; class=&quot;syntaxplugin&quot; style=&quot;border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;&quot;&gt;
&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; border=&quot;0&quot; width=&quot;100%&quot; style=&quot;font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;&quot;&gt;
		&lt;tbody &gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;&quot;&gt;&amp;nbsp;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;    ./subsystem=modcluster:add(configuration=[{advertise-socket=ajp,connector=ajp}])&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;&quot;&gt;&amp;nbsp;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
			&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;p/&gt;

&lt;p&gt;Depending on how many of the configuration attributes the user wanted to define at the time. Only the connector would be required, like the ModClusterConfigResourceDefinition.&lt;/p&gt;</comment>
                            <comment id="12722051" author="brian.stansberry" created="Wed, 26 Sep 2012 13:00:49 -0400"  >&lt;p&gt;I haven&apos;t looked in detail, but that sounds like a step in the right direction.&lt;/p&gt;

&lt;p&gt;When I looked at this a couple weeks ago, another thing I saw is all of the child resources besides &quot;configuration&quot; required a reload if added. So they&apos;d have a similar issue. It would be nice if that :reload wasn&apos;t necessary, and the newly added bits of config could just update a running mod_cluster service. That may not be possible though.&lt;/p&gt;</comment>
                            <comment id="12737138" author="rhusar" created="Mon, 26 Nov 2012 16:19:07 -0500"  >&lt;p&gt;The way I want to fix this for 7.2 is to add &apos;connector&apos; as mandatory parameter to the add operation. Making &apos;connector&apos; attribute optional does not seem reasonable, as we need that as dependency for the subsystem.&lt;/p&gt;

&lt;p&gt;Using lists instead seems to only workaround the issue of not supporting runtime mode for attributes properly. Most of the problems should go away if it gets addressed.&lt;/p&gt;

&lt;p&gt;Objections?&lt;/p&gt;

</comment>
                            <comment id="12737140" author="brian.stansberry" created="Mon, 26 Nov 2012 16:33:59 -0500"  >&lt;p&gt;Have you seen &lt;a href=&quot;https://github.com/jbossas/jboss-as/pull/3201&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/jbossas/jboss-as/pull/3201&lt;/a&gt; ? That&apos;s been sitting there for a long time because I haven&apos;t had time to deal with it.&lt;/p&gt;</comment>
                            <comment id="12737451" author="rhusar" created="Tue, 27 Nov 2012 12:51:21 -0500"  >&lt;p&gt;@&lt;a href=&quot;https://issues.jboss.org/secure/ViewProfile.jspa?name=brian.stansberry&quot; class=&quot;user-hover&quot; rel=&quot;brian.stansberry&quot;&gt;Brian Stansberry&lt;/a&gt; No, I haven&apos;t seen it yet (since Joe didn&apos;t follow the Jira process and like the PR, nor does the commit itself reference this Jira...).&lt;/p&gt;

&lt;p&gt;I don&apos;t like this approach though (though for 7.1.x as workaround why not). By what I have done locally so far, as part of &lt;a href=&quot;https://issues.jboss.org/browse/WFLY-258&quot; title=&quot;Redesign mod_cluster subsystem&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WFLY-258&quot;&gt;AS7-3623&lt;/a&gt;, removing the extra level of configuration and just leveraging GenericSubsystemDescribeHandler which enables you to add properties as parameters &amp;#8211; I like this very much. &lt;/p&gt;

&lt;p&gt;I am wondering now though, what is the best approach with requiring advertise. The goal is to provide users with best default configuration so we need to make sure that advertise is on by default. However, that means that users either need to specifi advertise-socket or disable advertise when adding the subsystem. How about: make the socket default to &apos;modcluster&apos; abd if its defined just go with it, otherwise just disable advertise if its not.. &lt;/p&gt;

&lt;p&gt;PS: 4 comments above, the advertise-socket should be modcluster, not ajp.&lt;/p&gt;</comment>
                            <comment id="12737453" author="brian.stansberry" created="Tue, 27 Nov 2012 13:12:12 -0500"  >&lt;p&gt;I&apos;m fine with removing the extra level of configuration if JFC is, although you&apos;ll still have to support the old mod-cluster-config=configuration child resource for backwards compatibility.&lt;/p&gt;

&lt;p&gt;There is still the problem I mentioned above though re: the child resources under mod-cluster-config=configuration (DynamicLoadProviderDefinition, LoadMetricDefinition, CustomLoadMetricDefinition). If those resources are added after the initial add of the subsystem, and during boot, the result is the change isn&apos;t applied to the runtime and the server is put into reload-required. At a minimum we need to get it so if those are added after boot but as part of the same composite op that adds the subsystem, the reload isn&apos;t required. We can chat about how to do that. Ideally though some of those could be added at any time and the running service would be updated.&lt;/p&gt;

&lt;p&gt;Using a default of &apos;modcluster&apos; for advertise is ok, but only if you track whether or not the value was actually set in the config. IOW, &quot;undefined&quot; in the model leads to trying to use &quot;modcluster&quot; and disabling advertise if unsuccessful. But any specifically defined value has to be correct or it&apos;s a failure.&lt;/p&gt;</comment>
                            <comment id="12759177" author="jira-bugzilla-migration" created="Wed, 6 Mar 2013 14:35:39 -0500"  >&lt;p&gt;Brian Stansberry &amp;lt;brian.stansberry@redhat.com&amp;gt; made a comment on &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=900801&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 900801&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;There shouldn&apos;t be any expectation of any change in this in 6.1 beyond any improvements made in time for the 6.1.0 DR4/ER1 release.&lt;/p&gt;</comment>
                            <comment id="12759536" author="jira-bugzilla-migration" created="Thu, 7 Mar 2013 12:43:49 -0500"  >&lt;p&gt;Radoslav Husar &amp;lt;rhusar@redhat.com&amp;gt; changed the Status of &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=900801&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 900801&lt;/a&gt; from NEW to ASSIGNED&lt;/p&gt;</comment>
                            <comment id="12760662" author="rhusar" created="Tue, 12 Mar 2013 14:29:21 -0400"  >&lt;p&gt;Merged.&lt;/p&gt;

&lt;p&gt;You can now use batch/composite operation to set the required parameters.&lt;/p&gt;</comment>
                            <comment id="12761441" author="jira-bugzilla-migration" created="Fri, 15 Mar 2013 22:39:13 -0400"  >&lt;p&gt;Brian Stansberry &amp;lt;brian.stansberry@redhat.com&amp;gt; changed the Status of &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=900801&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 900801&lt;/a&gt; from ASSIGNED to MODIFIED&lt;/p&gt;</comment>
                            <comment id="12764546" author="jira-bugzilla-migration" created="Tue, 2 Apr 2013 18:47:52 -0400"  >&lt;p&gt;Paul Gier &amp;lt;pgier@redhat.com&amp;gt; changed the Status of &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=900801&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 900801&lt;/a&gt; from MODIFIED to ON_QA&lt;/p&gt;</comment>
                            <comment id="12765562" author="jira-bugzilla-migration" created="Mon, 8 Apr 2013 10:55:49 -0400"  >&lt;p&gt;Michal Babacek &amp;lt;mbabacek@redhat.com&amp;gt; changed the Status of &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=900801&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 900801&lt;/a&gt; from ON_QA to ASSIGNED&lt;/p&gt;</comment>
                            <comment id="12765705" author="jira-bugzilla-migration" created="Tue, 9 Apr 2013 03:00:56 -0400"  >&lt;p&gt;Jean-frederic Clere &amp;lt;jclere@redhat.com&amp;gt; made a comment on &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=900801&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 900801&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;first add modcluster and then the configuration.&lt;/p&gt;</comment>
                            <comment id="12766401" author="jira-bugzilla-migration" created="Thu, 11 Apr 2013 05:21:00 -0400"  >&lt;p&gt;Michal Babacek &amp;lt;mbabacek@redhat.com&amp;gt; made a comment on &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=900801&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 900801&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Guys, no. It is still broken. (EAP6.1.0.ER4)&lt;/p&gt;

&lt;p&gt;1) connector is ajp implicitly idea: Does not work.&lt;br/&gt;
/subsystem=modcluster:add()                &lt;br/&gt;
{&lt;br/&gt;
    &quot;outcome&quot; =&amp;gt; &quot;failed&quot;,&lt;br/&gt;
    &quot;failure-description&quot; =&amp;gt; &quot;JBAS014746: connector may not be null&quot;,&lt;br/&gt;
    &quot;rolled-back&quot; =&amp;gt; true&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;2) let&apos;s add it in disabled state idea: Does not work.&lt;br/&gt;
/subsystem=modcluster:add(enable=false)&lt;br/&gt;
Operation &apos;add&apos; does not expect any property.&lt;/p&gt;


&lt;p&gt;3) let&apos;s add it with connector=ajp idea: Does not work.&lt;br/&gt;
/subsystem=modcluster:add(connector=ajp)&lt;br/&gt;
Operation &apos;add&apos; does not expect any property.&lt;/p&gt;

&lt;p&gt;4) with the &quot;configuration&quot; level, similar to 3), Does not work.&lt;br/&gt;
/subsystem=modcluster:add(configuration=[&lt;/p&gt;
{advertise-socket=modcluster,connector=ajp}
&lt;p&gt;])&lt;br/&gt;
Operation &apos;add&apos; does not expect any property.&lt;/p&gt;

&lt;p&gt;5) composite operation idea: Does not work.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;standalone@localhost:9999 / #&amp;#93;&lt;/span&gt; list-batch&lt;br/&gt;
#1 /:composite(steps=[&lt;/p&gt;
{&quot;operation&quot; =&amp;gt; &quot;add&quot;, &quot;address&quot; =&amp;gt; [ (&quot;subsystem&quot; =&amp;gt; &quot;modcluster&quot;) ] }
&lt;p&gt;,&lt;/p&gt;
{ &quot;operation&quot; =&amp;gt; &quot;add&quot;, &quot;address&quot; =&amp;gt; [ (&quot;subsystem&quot; =&amp;gt; &quot;modcluster&quot;), (&quot;mod-cluster-config&quot; =&amp;gt; &quot;configuration&quot;) ], &quot;connector&quot; =&amp;gt; &quot;ajp&quot;}
&lt;p&gt;])&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;standalone@localhost:9999 / #&amp;#93;&lt;/span&gt; run-batch&lt;br/&gt;
{&quot;JBAS014653: Composite operation failed and was rolled back. Steps that failed:&quot; =&amp;gt; {&quot;Operation step-1&quot; =&amp;gt; {&quot;JBAS014653: Composite operation failed and was rolled back. Steps that failed:&quot; =&amp;gt; {&quot;Operation step-1&quot; =&amp;gt; {&quot;JBAS014671: Failed services&quot; =&amp;gt; {&quot;jboss.mod-cluster&quot; =&amp;gt; &quot;org.jboss.msc.service.StartException in service jboss.mod-cluster: java.lang.IllegalStateException&lt;br/&gt;
    Caused by: java.lang.IllegalStateException&quot;}}}}}}&lt;/p&gt;

&lt;p&gt;In log further:&lt;br/&gt;
10:59:56,694 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;org.jboss.as.modcluster&amp;#93;&lt;/span&gt; (management-handler-thread - 4) JBAS011704: Mod_cluster uses default load balancer provider&lt;br/&gt;
10:59:56,698 ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;org.jboss.msc.service.fail&amp;#93;&lt;/span&gt; (ServerService Thread Pool &amp;#8211; 48) MSC000001: Failed to start service jboss.mod-cluster: org.jboss.msc.service.StartException in service jboss.mod-cluster: java.lang.IllegalStateException&lt;br/&gt;
	at org.jboss.as.clustering.msc.AsynchronousService$1.run(AsynchronousService.java:87) &lt;span class=&quot;error&quot;&gt;&amp;#91;jboss-as-clustering-common-7.2.0.Final-redhat-4.jar:7.2.0.Final-redhat-4&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145) &lt;span class=&quot;error&quot;&gt;&amp;#91;rt.jar:1.7.0_15&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615) &lt;span class=&quot;error&quot;&gt;&amp;#91;rt.jar:1.7.0_15&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:722) &lt;span class=&quot;error&quot;&gt;&amp;#91;rt.jar:1.7.0_15&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.jboss.threads.JBossThread.run(JBossThread.java:122) &lt;span class=&quot;error&quot;&gt;&amp;#91;jboss-threads-2.1.0.Final-redhat-1.jar:2.1.0.Final-redhat-1&amp;#93;&lt;/span&gt;&lt;br/&gt;
Caused by: java.lang.IllegalStateException&lt;br/&gt;
	at org.jboss.msc.value.InjectedValue.getValue(InjectedValue.java:47) &lt;span class=&quot;error&quot;&gt;&amp;#91;jboss-msc-1.0.4.GA-redhat-1.jar:1.0.4.GA-redhat-1&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.jboss.as.modcluster.ModClusterService.start(ModClusterService.java:94)&lt;br/&gt;
	at org.jboss.as.clustering.msc.AsynchronousService$1.run(AsynchronousService.java:82) &lt;span class=&quot;error&quot;&gt;&amp;#91;jboss-as-clustering-common-7.2.0.Final-redhat-4.jar:7.2.0.Final-redhat-4&amp;#93;&lt;/span&gt;&lt;br/&gt;
	... 4 more&lt;/p&gt;


&lt;p&gt;Yes, I have /extension=org.jboss.as.modcluster:add() in place &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.jboss.org/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
Yes, I have /subsystem=web/connector=ajp:add(name=ajp,protocol=ajp,scheme=ajp,socket-binding=ajp) in place.&lt;/p&gt;

&lt;p&gt;Conclusion: I am not able to add modcluster subsystem via CLI while having standalone.xml configuration in place.&lt;/p&gt;</comment>
                            <comment id="12766489" author="jira-bugzilla-migration" created="Thu, 11 Apr 2013 09:48:06 -0400"  >&lt;p&gt;Tom Fonteyne &amp;lt;tfonteyn@redhat.com&amp;gt; made a comment on &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=900801&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 900801&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;There seems to be a regression. The composite command as given as workaround works fine in EAP 6.0.1&lt;/p&gt;

&lt;p&gt;So I agree with Michal. The &quot;normal&quot; way of adding the subsystem still does not work (just like in 6.0.x) and the &quot;composite&quot; way that used to work is broken now.&lt;/p&gt;</comment>
                            <comment id="12767529" author="jira-bugzilla-migration" created="Tue, 16 Apr 2013 08:25:12 -0400"  >&lt;p&gt;Michal Babacek &amp;lt;mbabacek@redhat.com&amp;gt; made a comment on &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=900801&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 900801&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;(In reply to comment #10)&lt;br/&gt;
&amp;gt; There seems to be a regression. The composite command as given as workaround&lt;br/&gt;
&amp;gt; works fine in EAP 6.0.1&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt; So I agree with Michal. The &quot;normal&quot; way of adding the subsystem still does&lt;br/&gt;
&amp;gt; not work (just like in 6.0.x) and the &quot;composite&quot; way that used to work is&lt;br/&gt;
&amp;gt; broken now.&lt;/p&gt;

&lt;p&gt;COMPOSITE OPERATION&lt;br/&gt;
Hmm, no, I was too quick in my judgement. The undermentioned composite operation actually &lt;em&gt;works&lt;/em&gt; both in 6.0.1 and 6.1.0. Obviously, the composite operation from my previous comment &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; is wrong as you might have noticed. Sorry for confusion.&lt;/p&gt;

&lt;p&gt;Add extension&lt;br/&gt;
/extension=org.jboss.as.modcluster:add()&lt;/p&gt;

&lt;p&gt;Add ajp connector&lt;br/&gt;
/subsystem=web/connector=ajp:add(name=ajp,protocol=ajp,scheme=ajp,socket-binding=ajp)&lt;/p&gt;

&lt;p&gt;Composite operation for mod_cluster&lt;br/&gt;
/:composite(steps=[ &lt;/p&gt;
{&quot;operation&quot; =&amp;gt; &quot;add&quot;, &quot;address&quot; =&amp;gt; [ (&quot;subsystem&quot; =&amp;gt; &quot;modcluster&quot;) ] }
&lt;p&gt;,&lt;/p&gt;
{ &quot;operation&quot; =&amp;gt; &quot;add&quot;, &quot;address&quot; =&amp;gt; [ (&quot;subsystem&quot; =&amp;gt; &quot;modcluster&quot;), (&quot;mod-cluster-config&quot; =&amp;gt; &quot;configuration&quot;) ], &quot;connector&quot; =&amp;gt; &quot;ajp&quot;, &quot;balancer&quot; =&amp;gt; &quot;my&quot;, &quot;advertise&quot; =&amp;gt; &quot;false&quot;, &quot;proxy-list&quot; =&amp;gt; &quot;127.0.0.1:6666&quot; }
&lt;p&gt; ])&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=900801#c9&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://bugzilla.redhat.com/show_bug.cgi?id=900801#c9&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12768513" author="jira-bugzilla-migration" created="Thu, 18 Apr 2013 11:02:52 -0400"  >&lt;p&gt;Tomaz Cerar &amp;lt;tcerar@redhat.com&amp;gt; made a comment on &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=900801&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 900801&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;What should be accepted solution to this?&lt;br/&gt;
Given that composite operation (cli batch) works as expected and verified?&lt;/p&gt;

&lt;p&gt;In EAP 6.0.x modcluster:add() operation also did not expect or take any attributes:&lt;/p&gt;

&lt;p&gt;output of operation definition in EAP 6.0.0.GA&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;standalone@localhost:9999 subsystem=modcluster&amp;#93;&lt;/span&gt; :read-operation-description(name=add)&lt;br/&gt;
{&lt;br/&gt;
    &quot;outcome&quot; =&amp;gt; &quot;success&quot;,&lt;br/&gt;
    &quot;result&quot; =&amp;gt; {&lt;br/&gt;
        &quot;operation-name&quot; =&amp;gt; &quot;add&quot;,&lt;br/&gt;
        &quot;description&quot; =&amp;gt; &quot;Operation adding the modcluster subsystem.&quot;,&lt;br/&gt;
        &quot;request-properties&quot; =&amp;gt; {},&lt;br/&gt;
        &quot;reply-properties&quot; =&amp;gt; {},&lt;br/&gt;
        &quot;read-only&quot; =&amp;gt; false&lt;br/&gt;
    }&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;Said this, I see no need to add new feature such as adding convenience attribute to subsystem=modcluster:add this late in development stage.&lt;br/&gt;
I could be nice RFE for 6.2 but absolutely not for 6.1 as it would require lots of additional work (model version upgrade, transformers, additional testing)&lt;/p&gt;</comment>
                            <comment id="12768522" author="jira-bugzilla-migration" created="Thu, 18 Apr 2013 11:31:41 -0400"  >&lt;p&gt;Brian Stansberry &amp;lt;brian.stansberry@redhat.com&amp;gt; made a comment on &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=900801&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 900801&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tomaz: agreed. This is what I meant in my comment on 2013-03-06.&lt;/p&gt;</comment>
                            <comment id="12768589" author="jira-bugzilla-migration" created="Thu, 18 Apr 2013 14:57:24 -0400"  >&lt;p&gt;Michal Babacek &amp;lt;mbabacek@redhat.com&amp;gt; made a comment on &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=900801&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 900801&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;As I stated in &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; on 2013-04-16, the composite operation mentioned &lt;em&gt;in that comment&lt;/em&gt; works. My previous error was in using a malformed command.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=900801#c11&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://bugzilla.redhat.com/show_bug.cgi?id=900801#c11&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12768591" author="jira-bugzilla-migration" created="Thu, 18 Apr 2013 15:06:01 -0400"  >&lt;p&gt;Brian Stansberry &amp;lt;brian.stansberry@redhat.com&amp;gt; made a comment on &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=900801&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 900801&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Thanks. To clarify my last clarification .... &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.jboss.org/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;If the composite operation mentioned in Michal&apos;s comment of Apri 16 works, IMHO there is no blocker, and no remaining &quot;Bug&quot;, and at most an RFE for a later release.&lt;/p&gt;</comment>
                            <comment id="12768884" author="jira-bugzilla-migration" created="Fri, 19 Apr 2013 12:03:21 -0400"  >&lt;p&gt;Michal Babacek &amp;lt;mbabacek@redhat.com&amp;gt; made a comment on &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=900801&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 900801&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Documentation&lt;br/&gt;
-------------&lt;/p&gt;

&lt;p&gt;If one wants to use advertise=true and no proxy-list, a proper socket-binding must be added. Here is the whole batch op executed from a command line:&lt;/p&gt;

&lt;p&gt;./jboss-cli.sh --connect --commands=&quot;&lt;br/&gt;
/extension=org.jboss.as.modcluster:add(),&lt;br/&gt;
/subsystem=web/connector=ajp:add(name=ajp,protocol=ajp,scheme=ajp,socket-binding=ajp),&lt;br/&gt;
batch,&lt;br/&gt;
/:composite(steps=[ &lt;br/&gt;
  &lt;/p&gt;
{\&quot;operation\&quot; =&amp;gt; \&quot;add\&quot;, \&quot;address\&quot; =&amp;gt; [ (\&quot;subsystem\&quot; =&amp;gt; \&quot;modcluster\&quot;) ] }
&lt;p&gt;,&lt;br/&gt;
  &lt;/p&gt;
{ \&quot;operation\&quot; =&amp;gt; \&quot;add\&quot;, \&quot;address\&quot; =&amp;gt; [ (\&quot;subsystem\&quot; =&amp;gt; \&quot;modcluster\&quot;), (\&quot;mod-cluster-config\&quot; =&amp;gt; \&quot;configuration\&quot;) ], \&quot;connector\&quot; =&amp;gt; \&quot;ajp\&quot;, \&quot;advertise-socket\&quot; =&amp;gt; \&quot;modcluster\&quot; }
&lt;p&gt;,&lt;/p&gt;
  {\&quot;operation\&quot; =&amp;gt; \&quot;add\&quot;, \&quot;address\&quot; =&amp;gt; [(\&quot;socket-binding-group\&quot; =&amp;gt; \&quot;standard-sockets\&quot;), (\&quot;socket-binding\&quot; =&amp;gt; \&quot;modcluster\&quot;)], \&quot;port\&quot; =&amp;gt; 0, \&quot;multicast-address\&quot; =&amp;gt; \&quot;224.0.1.105\&quot;, \&quot;multicast-port\&quot; =&amp;gt; \&quot;23364\&quot;}
&lt;p&gt;]),&lt;br/&gt;
run-batch&quot;&lt;/p&gt;

&lt;p&gt;(Note socket-binding and advertise-socket.)&lt;/p&gt;</comment>
                            <comment id="12769442" author="jira-bugzilla-migration" created="Tue, 23 Apr 2013 08:51:28 -0400"  >&lt;p&gt;Jean-frederic Clere &amp;lt;jclere@redhat.com&amp;gt; made a comment on &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=900801&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 900801&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;According Comment #19 and Comment #20 that is not a blocker.&lt;/p&gt;</comment>
                            <comment id="12769445" author="jira-bugzilla-migration" created="Tue, 23 Apr 2013 08:54:16 -0400"  >&lt;p&gt;John Doyle &amp;lt;jdoyle@redhat.com&amp;gt; made a comment on &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=900801&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 900801&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I&apos;m in favor of removing blocker status.&lt;/p&gt;</comment>
                            <comment id="12771813" author="jira-bugzilla-migration" created="Fri, 3 May 2013 03:57:40 -0400"  >&lt;p&gt;Aleksandar Kostadinov &amp;lt;akostadi@redhat.com&amp;gt; made a comment on &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=900801&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 900801&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I am running EAP 6.0.1 ER5 in &lt;b&gt;domain&lt;/b&gt; mode. And there seems to be no way to add mod_cluster through cli while there are running servers.&lt;/p&gt;

&lt;p&gt;Foremost composite operation does not seem to work at all. Any composite operation I try to execute results in:&lt;br/&gt;
&amp;gt; Operation &apos;composite&apos; does not expect any property.&lt;/p&gt;

&lt;p&gt;This command has worked with EAP 6.0.1 but is &lt;b&gt;not&lt;/b&gt; working now. This is a &lt;b&gt;regression&lt;/b&gt;:&lt;/p&gt;

&lt;p&gt;&amp;gt; /:composite(steps=[ &lt;/p&gt;
{&quot;operation&quot; =&amp;gt; &quot;add&quot;, &quot;address&quot; =&amp;gt; [ (&quot;profile&quot; =&amp;gt; &quot;default&quot;), (&quot;subsystem&quot; =&amp;gt; &quot;modcluster&quot;) ] }
&lt;p&gt;,{ &quot;operation&quot; =&amp;gt; &quot;add&quot;, &quot;address&quot; =&amp;gt; [ (&quot;profile&quot; =&amp;gt; &quot;default&quot;), (&quot;subsystem&quot; =&amp;gt; &quot;modcluster&quot;), (&quot;mod-cluster-config&quot; =&amp;gt; &quot;configuration&quot;) ], &quot;advertise&quot; =&amp;gt; &quot;false&quot;, &quot;proxy-list&quot; =&amp;gt; &quot;$&lt;/p&gt;
{jboss.modcluster.proxyList}
&lt;p&gt;&quot;, &quot;connector&quot; =&amp;gt; &quot;ajp&quot;}, &lt;/p&gt;
{ &quot;operation&quot; =&amp;gt; &quot;add&quot;, &quot;address&quot; =&amp;gt; [ (&quot;profile&quot; =&amp;gt; &quot;default&quot;), (&quot;subsystem&quot; =&amp;gt; &quot;modcluster&quot;), (&quot;mod-cluster-config&quot; =&amp;gt; &quot;configuration&quot;), (&quot;dynamic-load-provider&quot; =&amp;gt; &quot;configuration&quot;) ]}
&lt;p&gt;, &lt;/p&gt;
{ &quot;operation&quot; =&amp;gt; &quot;add&quot;, &quot;address&quot; =&amp;gt; [ (&quot;profile&quot; =&amp;gt; &quot;default&quot;), (&quot;subsystem&quot; =&amp;gt; &quot;modcluster&quot;), (&quot;mod-cluster-config&quot; =&amp;gt; &quot;configuration&quot;), (&quot;dynamic-load-provider&quot; =&amp;gt; &quot;configuration&quot;), (&quot;load-metric&quot; =&amp;gt; &quot;busyness&quot;)], &quot;type&quot; =&amp;gt; &quot;busyness&quot;}
&lt;p&gt; ])&lt;br/&gt;
&amp;gt; Operation &apos;composite&apos; does not expect any property.&lt;/p&gt;

&lt;p&gt;Trying with normal commands I&apos;m getting the famous &quot;connector may not be null&quot;&lt;/p&gt;

&lt;p&gt;&amp;gt; /profile=default/subsystem=modcluster:add&lt;br/&gt;
&amp;gt; {&lt;br/&gt;
&amp;gt;     &quot;outcome&quot; =&amp;gt; &quot;failed&quot;,&lt;br/&gt;
&amp;gt;     &quot;result&quot; =&amp;gt; undefined,&lt;br/&gt;
&amp;gt;     &quot;failure-description&quot; =&amp;gt; &quot;JBAS010839: Operation failed or was rolled back on all servers.&quot;,&lt;br/&gt;
&amp;gt;     &quot;rolled-back&quot; =&amp;gt; true,&lt;br/&gt;
&amp;gt;     &quot;server-groups&quot; =&amp;gt; {&quot;main-server-group&quot; =&amp;gt; {&quot;host&quot; =&amp;gt; {&quot;ip-10-0-254-48&quot; =&amp;gt; {&lt;br/&gt;
&amp;gt;         &quot;server-one&quot; =&amp;gt; {&quot;response&quot; =&amp;gt; {&lt;br/&gt;
&amp;gt;             &quot;outcome&quot; =&amp;gt; &quot;failed&quot;,&lt;br/&gt;
&amp;gt;             &quot;result&quot; =&amp;gt; undefined,&lt;br/&gt;
&amp;gt;             &quot;failure-description&quot; =&amp;gt; &quot;JBAS014746: connector may not be null&quot;,&lt;br/&gt;
&amp;gt;             &quot;rolled-back&quot; =&amp;gt; true&lt;br/&gt;
&amp;gt;         }},&lt;br/&gt;
&amp;gt;         &quot;server-two&quot; =&amp;gt; {&quot;response&quot; =&amp;gt; {&lt;br/&gt;
&amp;gt;             &quot;outcome&quot; =&amp;gt; &quot;failed&quot;,&lt;br/&gt;
&amp;gt;             &quot;result&quot; =&amp;gt; undefined,&lt;br/&gt;
&amp;gt;             &quot;failure-description&quot; =&amp;gt; &quot;JBAS014746: connector may not be null&quot;,&lt;br/&gt;
&amp;gt;             &quot;rolled-back&quot; =&amp;gt; true&lt;br/&gt;
&amp;gt;         }}&lt;br/&gt;
&amp;gt;     }}}}&lt;br/&gt;
&amp;gt; }&lt;/p&gt;

&lt;p&gt;The same command works only if server-one and server-two both are stopped. The composite command does not start working though.&lt;/p&gt;</comment>
                            <comment id="12771832" author="jira-bugzilla-migration" created="Fri, 3 May 2013 05:09:30 -0400"  >&lt;p&gt;Michal Babacek &amp;lt;mbabacek@redhat.com&amp;gt; made a comment on &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=900801&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 900801&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;(In reply to comment #24)&lt;br/&gt;
&amp;gt; I am running EAP 6.0.1 ER5 in &lt;b&gt;domain&lt;/b&gt; mode. And there seems to be no way to&lt;br/&gt;
&amp;gt; add mod_cluster through cli while there are running servers.&lt;/p&gt;

&lt;p&gt;Did you mean EAP 6.1.0 ER5? Regarding my Comment 20, I tested the standalone mode.&lt;/p&gt;</comment>
                            <comment id="12771851" author="jira-bugzilla-migration" created="Fri, 3 May 2013 06:05:35 -0400"  >&lt;p&gt;Aleksandar Kostadinov &amp;lt;akostadi@redhat.com&amp;gt; made a comment on &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=900801&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 900801&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Michal, that&apos;s right, I meant 6.1.0 ER5&lt;/p&gt;</comment>
                            <comment id="12772001" author="jira-bugzilla-migration" created="Fri, 3 May 2013 12:34:34 -0400"  >&lt;p&gt;Brian Stansberry &amp;lt;brian.stansberry@redhat.com&amp;gt; made a comment on &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=900801&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 900801&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Aleksandar, what happens when you use &lt;/p&gt;

&lt;p&gt;batch&lt;br/&gt;
...&lt;br/&gt;
run batch&lt;/p&gt;

&lt;p&gt;instead of building the composite yourself?&lt;/p&gt;</comment>
                            <comment id="12772011" author="jira-bugzilla-migration" created="Fri, 3 May 2013 13:34:56 -0400"  >&lt;p&gt;Radoslav Husar &amp;lt;rhusar@redhat.com&amp;gt; made a comment on &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=900801&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 900801&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I cannot reproduce this issue. I have created 2 servers using default configuration, where I removed mod_cluster subsystem. I let the servers autostart. I start the domain.&lt;/p&gt;

&lt;p&gt;I run the following batch:&lt;/p&gt;

&lt;p&gt;&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;domain@localhost:9999 /&amp;#93;&lt;/span&gt; batch &lt;br/&gt;
&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;domain@localhost:9999 / #&amp;#93;&lt;/span&gt; /profile=default/subsystem=modcluster:add&lt;br/&gt;
&amp;gt; #1 /profile=default/subsystem=modcluster:add&lt;br/&gt;
&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;domain@localhost:9999 / #&amp;#93;&lt;/span&gt; /profile=default/subsystem=modcluster/mod-cluster-config=configuration:add(advertise=false, proxy-list=&quot;localhost:6666&quot;, connector=http)&lt;br/&gt;
&amp;gt; #2 /profile=default/subsystem=modcluster/mod-cluster-config=configuration:add(advertise=false, proxy-list=&quot;localhost:6666&quot;, connector=http)&lt;br/&gt;
&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;domain@localhost:9999 / #&amp;#93;&lt;/span&gt; /profile=default/subsystem=modcluster/mod-cluster-config=configuration/dynamic-load-provider=configuration:add&lt;br/&gt;
&amp;gt; #3 /profile=default/subsystem=modcluster/mod-cluster-config=configuration/dynamic-load-provider=configuration:add&lt;br/&gt;
&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;domain@localhost:9999 / #&amp;#93;&lt;/span&gt; /profile=default/subsystem=modcluster/mod-cluster-config=configuration/dynamic-load-provider=configuration/load-metric=busyness:add(type=busyness)&lt;br/&gt;
&amp;gt; #4 /profile=default/subsystem=modcluster/mod-cluster-config=configuration/dynamic-load-provider=configuration/load-metric=busyness:add(type=busyness)&lt;br/&gt;
&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;domain@localhost:9999 / #&amp;#93;&lt;/span&gt; run-batch &lt;br/&gt;
&amp;gt; The batch executed successfully&lt;/p&gt;


&lt;p&gt;I get correct logging (from server1) which I am expecting:&lt;/p&gt;

&lt;p&gt;&amp;gt; 19:29:48,306 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;org.jboss.as.controller.management-operation&amp;#93;&lt;/span&gt; (host-controller-connection-threads - 1) Entered VERIFY stage; waiting for service container to settle&lt;br/&gt;
&amp;gt; 19:29:48,306 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;org.jboss.as.modcluster&amp;#93;&lt;/span&gt; (ServerService Thread Pool &amp;#8211; 48) Starting Mod_cluster Extension&lt;br/&gt;
&amp;gt; 19:29:48,327 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;org.jboss.modcluster&amp;#93;&lt;/span&gt; (ServerService Thread Pool &amp;#8211; 48) MODCLUSTER000001: Initializing mod_cluster $&lt;/p&gt;
{project.version}
&lt;p&gt;&amp;gt; 19:29:48,331 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;org.jboss.modcluster&amp;#93;&lt;/span&gt; (ServerService Thread Pool &amp;#8211; 48) MODCLUSTER000003: Received server start event&lt;br/&gt;
&amp;gt; 19:29:48,334 ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;org.jboss.modcluster&amp;#93;&lt;/span&gt; (ServerService Thread Pool &amp;#8211; 48) MODCLUSTER000043: Failed to send INFO to localhost/127.0.0.1:6666: java.net.ConnectException: Connection refused&lt;/p&gt;

&lt;p&gt;@Alex, what should I do differently to hit an issue?&lt;/p&gt;</comment>
                            <comment id="12772015" author="jira-bugzilla-migration" created="Fri, 3 May 2013 13:40:19 -0400"  >&lt;p&gt;Radoslav Husar &amp;lt;rhusar@redhat.com&amp;gt; made a comment on &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=900801&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 900801&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;@Alex, I see your problem now. You seem to be using the stock profile to test this, however:&lt;/p&gt;

&lt;p&gt;You are specifying the &quot;ajp&quot; connector as a connector for mod_cluster. Note that AJP connector has been &lt;b&gt;removed&lt;/b&gt; from the default profile in EAP 6.1.0, whereas it was present in EAP 6.0.1. The default profile now only specifies &quot;http&quot; connector.&lt;/p&gt;</comment>
                            <comment id="12772021" author="jira-bugzilla-migration" created="Fri, 3 May 2013 14:05:38 -0400"  >&lt;p&gt;Brian Stansberry &amp;lt;brian.stansberry@redhat.com&amp;gt; made a comment on &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=900801&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 900801&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;@Alex, looking into this, this &quot;Operation &apos;composite&apos; does not expect any property issue&quot; has nothing to do with the mod_cluster subsystem. The things Rado has pointed out may influence what results you would see when trying to isolate this issue, but it&apos;s a general problem with manually entered composite operations.&lt;/p&gt;

&lt;p&gt;I&apos;ll file a separate issue.&lt;/p&gt;</comment>
                            <comment id="12772024" author="jira-bugzilla-migration" created="Fri, 3 May 2013 14:18:51 -0400"  >&lt;p&gt;Brian Stansberry &amp;lt;brian.stansberry@redhat.com&amp;gt; made a comment on &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=900801&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 900801&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=959545&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://bugzilla.redhat.com/show_bug.cgi?id=959545&lt;/a&gt; is for the composite operation issue.&lt;/p&gt;</comment>
                            <comment id="12772222" author="jira-bugzilla-migration" created="Mon, 6 May 2013 03:02:22 -0400"  >&lt;p&gt;Aleksandar Kostadinov &amp;lt;akostadi@redhat.com&amp;gt; made a comment on &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=900801&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 900801&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Now I see. My problem was not the AJP connector, because I add it prior running the commands.&lt;br/&gt;
First (that might be obvious to others) but the modcluster :add command fails when run outside a batch. It makes sense so it is not a bug.&lt;/p&gt;

&lt;p&gt;I now see though why my batch command attempts failed but I didn&apos;t pay enough attention to it before. It seems that if I paste a couple of commands to the console, it ignores the new lines so it considers everything as one single command which is incorrect.&lt;/p&gt;

&lt;p&gt;So if I paste one line at a time and hit ENTER after each one, everything works fine. If I paste a couple of lines, then if fails with some error for incorrect command. This was not the case in the past. I&apos;ll file a separate bug for it because it is unrelated.&lt;/p&gt;</comment>
                            <comment id="12775943" author="jira-bugzilla-migration" created="Wed, 22 May 2013 07:47:39 -0400"  >&lt;p&gt;Jean-frederic Clere &amp;lt;jclere@redhat.com&amp;gt; made a comment on &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=900801&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 900801&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Cause: &lt;/p&gt;

&lt;p&gt;The modcluster subsystem can&apos;t be added without specifying a connector and the add of modcluster subsystem doesn&apos;t accept any parameter.&lt;/p&gt;

&lt;p&gt;Consequence: &lt;/p&gt;

&lt;p&gt;you can&apos;t add the modcluster subsystem via the cli.&lt;/p&gt;

&lt;p&gt;Workaround (if any): &lt;/p&gt;

&lt;p&gt;you need to use a batch something like:&lt;br/&gt;
batch&lt;br/&gt;
/subsystem=modcluster:add&lt;br/&gt;
/subsystem=modcluster/mod-cluster-config=configuration:add(connector=ajp,advertise-socket=modcluster)&lt;br/&gt;
run-batch&lt;/p&gt;

&lt;p&gt;Result: &lt;br/&gt;
.&lt;/p&gt;</comment>
                            <comment id="12795185" author="jira-bugzilla-migration" created="Mon, 5 Aug 2013 12:48:02 -0400"  >&lt;p&gt;Brian Stansberry &amp;lt;brian.stansberry@redhat.com&amp;gt; made a comment on &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=900801&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 900801&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The proposed docs text is ok. A more exact first paragraph would be:&lt;/p&gt;

&lt;p&gt;&quot;There exists an issue in JBoss EAP 6 where the `mod_cluster` subsystem cannot be added via a single simple command in the Management CLI, nor can it be added via a simple sequence of non-atomic individual commands. The `/subsystem=modcluster:add()` command requires that a connector be added as part of the same set of commands, however the `/subsystem=modcluster:add()` command does not itself allow configuring connectors.&quot;&lt;/p&gt;

&lt;p&gt;The above is pretty wordy and legalistic though. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.jboss.org/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12795186" author="jira-bugzilla-migration" created="Mon, 5 Aug 2013 12:48:02 -0400"  >&lt;p&gt;Brian Stansberry &amp;lt;brian.stansberry@redhat.com&amp;gt; made a comment on &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=900801&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 900801&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The proposed docs text is ok. A more exact first paragraph would be:&lt;/p&gt;

&lt;p&gt;&quot;There exists an issue in JBoss EAP 6 where the `mod_cluster` subsystem cannot be added via a single simple command in the Management CLI, nor can it be added via a simple sequence of non-atomic individual commands. The `/subsystem=modcluster:add()` command requires that a connector be added as part of the same set of commands, however the `/subsystem=modcluster:add()` command does not itself allow configuring connectors.&quot;&lt;/p&gt;

&lt;p&gt;The above is pretty wordy and legalistic though. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.jboss.org/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12795229" author="jira-bugzilla-migration" created="Mon, 5 Aug 2013 20:47:42 -0400"  >&lt;p&gt;Lucas Costi &amp;lt;lcosti@redhat.com&amp;gt; made a comment on &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=900801&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 900801&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Thanks for the feedback Brian. I have incorporated your suggestion into the docs text with some minor refinements. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.jboss.org/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Let us know if anything else needs needs to be changed.&lt;/p&gt;</comment>
                            <comment id="12795230" author="jira-bugzilla-migration" created="Mon, 5 Aug 2013 20:47:44 -0400"  >&lt;p&gt;Lucas Costi &amp;lt;lcosti@redhat.com&amp;gt; made a comment on &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=900801&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 900801&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Thanks for the feedback Brian. I have incorporated your suggestion into the docs text with some minor refinements. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.jboss.org/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Let us know if anything else needs needs to be changed.&lt;/p&gt;</comment>
                            <comment id="12815538" author="jira-bugzilla-migration" created="Wed, 16 Oct 2013 16:30:55 -0400"  >&lt;p&gt;mark yarborough &amp;lt;myarboro@redhat.com&amp;gt; changed the Status of &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=900801&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 900801&lt;/a&gt; from ASSIGNED to CLOSED&lt;/p&gt;</comment>
                            <comment id="12815539" author="jira-bugzilla-migration" created="Wed, 16 Oct 2013 16:30:55 -0400"  >&lt;p&gt;mark yarborough &amp;lt;myarboro@redhat.com&amp;gt; changed the Status of &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=900801&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 900801&lt;/a&gt; from ASSIGNED to CLOSED&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Cloners (old)</name>
                                                                <inwardlinks description="cloned from">
                                        <issuelink>
            <issuekey id="12472770">JBPAPP6-1420</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310440" key="org.jboss.labs.jira.plugin.jboss-custom-field-types-plugin:multiurl">
                        <customfieldname>Bugzilla References</customfieldname>
                        <customfieldvalues>
                            https://bugzilla.redhat.com/show_bug.cgi?id=900801
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310010" key="org.jboss.labs.jira.plugin.jboss-custom-field-types-plugin:multiurl">
                        <customfieldname>Forum Reference</customfieldname>
                        <customfieldvalues>
                            https://community.jboss.org/wiki/AddingANewExtensionSubsystemViaTheCLI
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310220" key="org.jboss.labs.jira.plugin.jboss-custom-field-types-plugin:multiurl">
                        <customfieldname>Git Pull Request</customfieldname>
                        <customfieldvalues>
                            https://github.com/jbossas/jboss-as/pull/4184
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310641" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Number of attachments</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310640" key="com.atlassian.jira.toolkit:comments">
                        <customfieldname>Number of comments</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311940" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1|hz4r8f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310840" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>88148</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310183" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Steps to Reproduce</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;Take a standard standalone install.&lt;/p&gt;

&lt;p&gt;Add to extensions:&lt;br/&gt;
/extension=org.jboss.as.modcluster:add()&lt;/p&gt;

&lt;p&gt;now add the subsystem:&lt;br/&gt;
/subsystem=modcluster:add()                &lt;/p&gt;
{
    &quot;outcome&quot; =&amp;gt; &quot;failed&quot;,
    &quot;failure-description&quot; =&amp;gt; &quot;JBAS014746: connector may not be null&quot;,
    &quot;rolled-back&quot; =&amp;gt; true
}

&lt;p&gt;but the add() operation does not allow any parameters.&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310090" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Workaround</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Workaround Exists]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310091" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Workaround Description</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;/:composite(steps=[ &lt;/p&gt;
{&quot;operation&quot; =&amp;gt; &quot;add&quot;, &quot;address&quot; =&amp;gt; [ (&quot;subsystem&quot; =&amp;gt; &quot;modcluster&quot;) ] }
&lt;p&gt;,&lt;/p&gt;
{ &quot;operation&quot; =&amp;gt; &quot;add&quot;, &quot;address&quot; =&amp;gt; [ (&quot;subsystem&quot; =&amp;gt; &quot;modcluster&quot;), (&quot;mod-cluster-config&quot; =&amp;gt; &quot;configuration&quot;) ], &quot;connector&quot; =&amp;gt; &quot;ajp&quot;, &quot;balancer&quot; =&amp;gt; &quot;my&quot;, &quot;advertise&quot; =&amp;gt; &quot;false&quot;, &quot;proxy-list&quot; =&amp;gt; &quot;zen&quot; }
&lt;p&gt; ])&lt;/p&gt;

&lt;p&gt;Note that the AJP connector needs to exist, if not, create it with something like this:&lt;br/&gt;
/subsystem=web/connector=ajp:add(name=ajp,protocol=ajp,scheme=ajp,socket-binding=ajp)&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>