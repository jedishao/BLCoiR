<!-- 
RSS generated by JIRA (7.2.3#72005-sha1:73be91d2b96fc29303a7eb6820acf420e5d0ed65) at Tue Dec 06 13:32:35 EST 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.jboss.org/si/jira.issueviews:issue-xml/WFLY-5604/WFLY-5604.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>JBoss Issue Tracker</title>
    <link>https://issues.jboss.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>7.2.3</version>
        <build-number>72005</build-number>
        <build-date>06-10-2016</build-date>
    </build-info>

<item>
            <title>[WFLY-5604] Weld deployment services not cleaned up properly if a deployment fails</title>
                <link>https://issues.jboss.org/browse/WFLY-5604</link>
                <project id="12313721" key="WFLY">WildFly</project>
                    <description>&lt;p&gt;The cleanup is currently only performed as a part of &lt;tt&gt;org.jboss.as.weld.WeldStartService.stop(StopContext)&lt;/tt&gt; invocation. However, if &lt;tt&gt;WeldStartService.start()&lt;/tt&gt; fails (e.g. because of a validation error) the stop method is never invoked. Some Weld bootstrap services need to clean up resources even if the deployment fails, e.g. &lt;tt&gt;org.jboss.weld.bootstrap.events.ContainerLifecycleEvents&lt;/tt&gt; (deactivable optimization) maintains a separate thread pool and so the referenced &lt;tt&gt;ExecutorService&lt;/tt&gt; is never shut down explicitly and the only hope to free resources is the GC and finalizers whose execution is deferred and may never even occur.&lt;/p&gt;

&lt;p&gt;We&apos;ve run into this problem when executing Weld and CDI TCK test suites on a specific HP-UX machine. Both test suites contain a lot of scenarios where the deployment fails. HP-UX jvm cannot handle this load and the test suite fails with &lt;em&gt;&quot;java.lang.OutOfMemoryError: unable to create new native thread&quot;&lt;/em&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12590827">WFLY-5604</key>
            <summary>Weld deployment services not cleaned up properly if a deployment fails</summary>
                <type id="1" iconUrl="https://issues.jboss.org/secure/viewavatar?size=xsmall&amp;avatarId=13263&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.jboss.org/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.jboss.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Done</resolution>
                                        <assignee username="mkouba">Martin Kouba</assignee>
                                    <reporter username="mkouba">Martin Kouba</reporter>
                        <labels>
                    </labels>
                <created>Thu, 29 Oct 2015 09:05:05 -0400</created>
                <updated>Wed, 20 Jan 2016 02:25:58 -0500</updated>
                            <resolved>Fri, 30 Oct 2015 03:01:30 -0400</resolved>
                                    <version>10.0.0.CR4</version>
                                    <fixVersion>10.0.0.CR5</fixVersion>
                                    <component>CDI / Weld</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13150976" author="mkouba" created="Wed, 20 Jan 2016 02:25:58 -0500"  >&lt;p&gt;For the record, this was a regression introduced by the fix for &lt;a href=&quot;https://issues.jboss.org/browse/WFLY-5232&quot; title=&quot;Naming store is null before CDI lifecycle BeforeShutdown event fires&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WFLY-5232&quot;&gt;&lt;del&gt;WFLY-5232&lt;/del&gt;&lt;/a&gt; (the cleanup was originally performed in &lt;tt&gt;WeldBootstrapService.stop()&lt;/tt&gt;).&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310221">
                    <name>Sequence</name>
                                                                <inwardlinks description="is followed up by">
                                        <issuelink>
            <issuekey id="12600104">WFLY-6031</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310641" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Number of attachments</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310640" key="com.atlassian.jira.toolkit:comments">
                        <customfieldname>Number of comments</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311940" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1|hzzdtr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310840" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>