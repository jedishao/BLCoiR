<!-- 
RSS generated by JIRA (7.2.3#72005-sha1:73be91d2b96fc29303a7eb6820acf420e5d0ed65) at Mon Dec 12 13:58:01 EST 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.jboss.org/si/jira.issueviews:issue-xml/WFLY-4165/WFLY-4165.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>JBoss Issue Tracker</title>
    <link>https://issues.jboss.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>7.2.3</version>
        <build-number>72005</build-number>
        <build-date>06-10-2016</build-date>
    </build-info>

<item>
            <title>[WFLY-4165] Invalidating another session removes the JSESSIONID cookie of the current session</title>
                <link>https://issues.jboss.org/browse/WFLY-4165</link>
                <project id="12313721" key="WFLY">WildFly</project>
                    <description>&lt;p&gt;When calling &lt;tt&gt;invalidate()&lt;/tt&gt; on a HttpSession object of another session than the current one, the server sends back a &quot;cookie expired&quot; header &lt;tt&gt;Set-Cookie: JSESSIONID=XXXXXXXX; path=/; HttpOnly; Max-Age=0; Expires=Thu, 01-Jan-1970 00:00:00 GMT&lt;/tt&gt; where XXXXXXXX is the session id of the invalidated session.&lt;br/&gt;
This results in the current JSESSIONID cookie being discarded by the browser, and the current session being lost.&lt;/p&gt;

&lt;p&gt;I was able to narrow the &quot;problem&quot; in &lt;tt&gt;&lt;a href=&quot;https://github.com/undertow-io/undertow/blob/1.0.15.Final/servlet/src/main/java/io/undertow/servlet/spec/HttpSessionImpl.java#L193&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;io.undertow.servlet.spec.HttpSessionImpl:193&lt;/a&gt;&lt;/tt&gt; (in Undertow 1.0.15.Final), where the ServletRequestContext is taken from the ThreadLocal storage, returning the current request context instead of null (as the target session is not associated to the current ServletRequestContext )&lt;/p&gt;

&lt;p&gt;A workaround is to call &lt;tt&gt;invalidate()&lt;/tt&gt; in a new Thread, so the retrieved ServletRequestContext is null&lt;/p&gt;</description>
                <environment>&lt;p&gt;WildFly 8.1.0.Final and WildFly 8.2.0.Final on Windows 7 x64 &lt;br/&gt;
JDK 8u25&lt;br/&gt;
Session storage set to Cookie&lt;/p&gt;</environment>
        <key id="12559030">WFLY-4165</key>
            <summary>Invalidating another session removes the JSESSIONID cookie of the current session</summary>
                <type id="1" iconUrl="https://issues.jboss.org/secure/viewavatar?size=xsmall&amp;avatarId=13263&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.jboss.org/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.jboss.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Done</resolution>
                                        <assignee username="swd847">Stuart Douglas</assignee>
                                    <reporter username="neo1203">Nicolas Grussenmeyer</reporter>
                        <labels>
                    </labels>
                <created>Tue, 9 Dec 2014 08:48:04 -0500</created>
                <updated>Tue, 27 Jan 2015 07:24:42 -0500</updated>
                            <resolved>Tue, 27 Jan 2015 07:24:42 -0500</resolved>
                                    <version>8.1.0.Final</version>
                    <version>8.2.0.Final</version>
                                    <fixVersion>9.0.0.Beta1</fixVersion>
                                    <component>Web (Undertow)</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13026925" author="swd847" created="Thu, 11 Dec 2014 01:01:58 -0500"  >&lt;p&gt;Fixed in undertow upstream&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310641" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Number of attachments</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310640" key="com.atlassian.jira.toolkit:comments">
                        <customfieldname>Number of comments</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311940" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1|hzud53:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310840" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310183" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Steps to Reproduce</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;ol&gt;
	&lt;li&gt;Store in an @ApplicationScoped managed bean for example an HttpSession instance&lt;/li&gt;
	&lt;li&gt;In another request, call &lt;tt&gt;invalidate()&lt;/tt&gt; on that HttpSession instance&lt;/li&gt;
	&lt;li&gt;Notice the &quot;Set-Cookie&quot; header in the response, discarding the cookie of the current session&lt;/li&gt;
&lt;/ol&gt;
</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>