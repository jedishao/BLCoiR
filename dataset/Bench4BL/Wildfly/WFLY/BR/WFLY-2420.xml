<!-- 
RSS generated by JIRA (7.2.3#72005-sha1:73be91d2b96fc29303a7eb6820acf420e5d0ed65) at Tue Dec 06 12:57:58 EST 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.jboss.org/si/jira.issueviews:issue-xml/WFLY-2420/WFLY-2420.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>JBoss Issue Tracker</title>
    <link>https://issues.jboss.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>7.2.3</version>
        <build-number>72005</build-number>
        <build-date>06-10-2016</build-date>
    </build-info>

<item>
            <title>[WFLY-2420] Domain controller fails to restart due to an inconsistent rollback of a redeploy</title>
                <link>https://issues.jboss.org/browse/WFLY-2420</link>
                <project id="12313721" key="WFLY">WildFly</project>
                    <description>&lt;p&gt;Osamu Nagano reports:&lt;/p&gt;

&lt;p&gt;When you try to redeploy (or deploy with --force option) the same application which has the same contents hash, and a necessary dependency like a datasource beeing injected in the application is lost by some reason, the redeploy operation will delete the contents under $JBOSS_HOME/domain/data/content directory but won&apos;t delete entries in domain.xml. Then the domain controller fails to start up because no contents found in the directory. This likely happens when you frequently changes settings during other servers shutting down.&lt;/p&gt;

&lt;p&gt;The domain controller fails to restart with the following log messages.&lt;br/&gt;
&amp;#8211;&lt;br/&gt;
12:04:10,623 ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;org.jboss.as.controller.management-operation&amp;#93;&lt;/span&gt; (Controller Boot Thread) JBAS014613: Operation (&quot;add&quot;) failed - address: (&lt;span class=&quot;error&quot;&gt;&amp;#91;(&amp;quot;deployment&amp;quot; =&amp;gt; &amp;quot;exampleapp.war&amp;quot;)&amp;#93;&lt;/span&gt;) - failure description: &quot;JBAS010876: No deployment content with hash c1306bc4855f4ed9914c9616f2b999c5c62a79d3 is available in the deployment content repository for deployment &apos;exampleapp.war&apos;. This is a fatal boot error. To correct the problem, either restart with the --admin-only switch set and use the CLI to install the missing content or remove it from the configuration, or remove the deployment from the xml configuraiton file and restart.&quot;&lt;br/&gt;
12:04:10,628 FATAL &lt;span class=&quot;error&quot;&gt;&amp;#91;org.jboss.as.host.controller&amp;#93;&lt;/span&gt; (Controller Boot Thread) JBAS010933: Host Controller boot has failed in an unrecoverable manner; exiting. See previous messages for details.&lt;br/&gt;
&amp;#8211;&lt;/p&gt;

&lt;p&gt;The domain controller should be independent from such a server specific issue and there should be a way to fix this via CLI or Console, not by a manual editing of domain.xml.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12509143">WFLY-2420</key>
            <summary>Domain controller fails to restart due to an inconsistent rollback of a redeploy</summary>
                <type id="1" iconUrl="https://issues.jboss.org/secure/viewavatar?size=xsmall&amp;avatarId=13263&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.jboss.org/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.jboss.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Done</resolution>
                                        <assignee username="brian.stansberry">Brian Stansberry</assignee>
                                    <reporter username="brian.stansberry">Brian Stansberry</reporter>
                        <labels>
                    </labels>
                <created>Wed, 30 Oct 2013 19:04:52 -0400</created>
                <updated>Thu, 4 Sep 2014 09:34:38 -0400</updated>
                            <resolved>Mon, 4 Nov 2013 11:19:25 -0500</resolved>
                                    <version>8.0.0.Beta1</version>
                                    <fixVersion>8.0.0.CR1</fixVersion>
                                    <component>Domain Management</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12826019" author="brian.stansberry" created="Wed, 30 Oct 2013 19:09:00 -0400"  >&lt;p&gt;The issue here is during rollback the DeploymentFullReplace handler isn&apos;t checking whether the hash of the &quot;replacement&quot; deployment is the same as the hash of the &quot;replaced&quot; deployment before removing the content from the repo. This is true in standalone as well, although reproducing it would take more effort.&lt;/p&gt;

&lt;p&gt;These handlers (plural meaning the server and HC variants) can use a general cleanup too. They&apos;ve gotten a bit convoluted.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12508413">WFLY-2352</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="org.jboss.labs.jira.plugin.jboss-custom-field-types-plugin:multiurl">
                        <customfieldname>Git Pull Request</customfieldname>
                        <customfieldvalues>
                            https://github.com/wildfly/wildfly/pull/5385
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310641" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Number of attachments</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310640" key="com.atlassian.jira.toolkit:comments">
                        <customfieldname>Number of comments</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311940" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1|hzjfsn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310840" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>173703</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>