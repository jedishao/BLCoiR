<!-- 
RSS generated by JIRA (7.2.3#72005-sha1:73be91d2b96fc29303a7eb6820acf420e5d0ed65) at Tue Dec 06 14:14:39 EST 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.jboss.org/si/jira.issueviews:issue-xml/WFLY-6571/WFLY-6571.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>JBoss Issue Tracker</title>
    <link>https://issues.jboss.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>7.2.3</version>
        <build-number>72005</build-number>
        <build-date>06-10-2016</build-date>
    </build-info>

<item>
            <title>[WFLY-6571] ClassNotFoundException while using remote-store for hibernate entity cache</title>
                <link>https://issues.jboss.org/browse/WFLY-6571</link>
                <project id="12313721" key="WFLY">WildFly</project>
                    <description>&lt;ul&gt;
	&lt;li&gt;configure hibernate cache, default cache is entity&lt;/li&gt;
	&lt;li&gt;configure entity cache as invalidation-cache with remote-store&lt;/li&gt;
	&lt;li&gt;deploying an application having @Cachable entities&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;-&amp;gt; you get:&lt;/p&gt;

&lt;p&gt;08:55:54,656 UTC INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;org.hibernate.cache.spi.UpdateTimestampsCache&amp;#93;&lt;/span&gt; (ServerService Thread Pool &amp;#8211; 28) HHH000250: Starting update timestamps cache at region: sample-ear.ear/sample-ejb.jar#primary.org.hibernate.ca                                                                                                                                                                                                                                                     che.spi.UpdateTimestampsCache&lt;br/&gt;
08:55:54,656 UTC INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;org.jboss.as.clustering.infinispan&amp;#93;&lt;/span&gt; (ServerService Thread Pool &amp;#8211; 28) WFLYCLINF0002: Started sample-ear.ear/sample-ejb.jar#primary.org.hibernate.cache.spi.UpdateTimestampsCache cache from hi                                                                                                                                                                                                                                                     bernate container&lt;br/&gt;
08:55:54,656 UTC INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;org.hibernate.cache.internal.StandardQueryCache&amp;#93;&lt;/span&gt; (ServerService Thread Pool &amp;#8211; 28) HHH000248: Starting query cache at region: sample-ear.ear/sample-ejb.jar#primary.org.hibernate.cache.intern                                                                                                                                                                                                                                                     al.StandardQueryCache&lt;br/&gt;
08:55:54,671 UTC INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;org.jboss.as.clustering.infinispan&amp;#93;&lt;/span&gt; (ServerService Thread Pool &amp;#8211; 28) WFLYCLINF0002: Started sample-ear.ear/sample-ejb.jar#primary.org.hibernate.cache.internal.StandardQueryCache cache from                                                                                                                                                                                                                                                      hibernate container&lt;br/&gt;
08:55:54,754 UTC ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;org.jboss.msc.service.fail&amp;#93;&lt;/span&gt; (ServerService Thread Pool &amp;#8211; 28) MSC000001: Failed to start service jboss.persistenceunit.&quot;sample-ear.ear/sample-ejb.jar#primary&quot;: org.jboss.msc.service.StartExc                                                                                                                                                                                                                                                     eption in service jboss.persistenceunit.&quot;sample-ear.ear/sample-ejb.jar#primary&quot;: javax.persistence.PersistenceException: &lt;span class=&quot;error&quot;&gt;&amp;#91;PersistenceUnit: primary&amp;#93;&lt;/span&gt; Unable to build Hibernate SessionFactory&lt;br/&gt;
        at org.jboss.as.jpa.service.PersistenceUnitServiceImpl$1$1.run(PersistenceUnitServiceImpl.java:172) &lt;span class=&quot;error&quot;&gt;&amp;#91;wildfly-jpa-10.0.0.Final.jar:10.0.0.Final&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.jboss.as.jpa.service.PersistenceUnitServiceImpl$1$1.run(PersistenceUnitServiceImpl.java:117) &lt;span class=&quot;error&quot;&gt;&amp;#91;wildfly-jpa-10.0.0.Final.jar:10.0.0.Final&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.wildfly.security.manager.WildFlySecurityManager.doChecked(WildFlySecurityManager.java:667)&lt;br/&gt;
        at org.jboss.as.jpa.service.PersistenceUnitServiceImpl$1.run(PersistenceUnitServiceImpl.java:182) &lt;span class=&quot;error&quot;&gt;&amp;#91;wildfly-jpa-10.0.0.Final.jar:10.0.0.Final&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) &lt;span class=&quot;error&quot;&gt;&amp;#91;rt.jar:1.8.0_45&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) &lt;span class=&quot;error&quot;&gt;&amp;#91;rt.jar:1.8.0_45&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:745) &lt;span class=&quot;error&quot;&gt;&amp;#91;rt.jar:1.8.0_45&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.jboss.threads.JBossThread.run(JBossThread.java:320)&lt;br/&gt;
Caused by: javax.persistence.PersistenceException: &lt;span class=&quot;error&quot;&gt;&amp;#91;PersistenceUnit: primary&amp;#93;&lt;/span&gt; Unable to build Hibernate SessionFactory&lt;br/&gt;
        at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.persistenceException(EntityManagerFactoryBuilderImpl.java:954) &lt;span class=&quot;error&quot;&gt;&amp;#91;hibernate-entitymanager-5.0.7.Final.jar:5.0.7.Final&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:882) &lt;span class=&quot;error&quot;&gt;&amp;#91;hibernate-entitymanager-5.0.7.Final.jar:5.0.7.Final&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.jboss.as.jpa.hibernate5.TwoPhaseBootstrapImpl.build(TwoPhaseBootstrapImpl.java:44)&lt;br/&gt;
        at org.jboss.as.jpa.service.PersistenceUnitServiceImpl$1$1.run(PersistenceUnitServiceImpl.java:154) &lt;span class=&quot;error&quot;&gt;&amp;#91;wildfly-jpa-10.0.0.Final.jar:10.0.0.Final&amp;#93;&lt;/span&gt;&lt;br/&gt;
        ... 7 more&lt;br/&gt;
Caused by: org.infinispan.commons.CacheException: Unable to invoke method public void org.infinispan.persistence.manager.PersistenceManagerImpl.start() on object of type PersistenceManagerImpl&lt;br/&gt;
        at org.infinispan.commons.util.ReflectionUtil.invokeAccessibly(ReflectionUtil.java:172)&lt;br/&gt;
        at org.infinispan.factories.AbstractComponentRegistry$PrioritizedMethod.invoke(AbstractComponentRegistry.java:870)&lt;br/&gt;
        at org.infinispan.factories.AbstractComponentRegistry.invokeStartMethods(AbstractComponentRegistry.java:639)&lt;br/&gt;
        at org.infinispan.factories.AbstractComponentRegistry.internalStart(AbstractComponentRegistry.java:628)&lt;br/&gt;
        at org.infinispan.factories.AbstractComponentRegistry.start(AbstractComponentRegistry.java:531)&lt;br/&gt;
        at org.infinispan.factories.ComponentRegistry.start(ComponentRegistry.java:222)&lt;br/&gt;
        at org.infinispan.cache.impl.CacheImpl.start(CacheImpl.java:849)&lt;br/&gt;
        at org.infinispan.manager.DefaultCacheManager.wireAndStartCache(DefaultCacheManager.java:621)&lt;br/&gt;
        at org.infinispan.manager.DefaultCacheManager.createCache(DefaultCacheManager.java:572)&lt;br/&gt;
        at org.infinispan.manager.DefaultCacheManager.getCache(DefaultCacheManager.java:440)&lt;br/&gt;
        at org.jboss.as.clustering.infinispan.DefaultCacheContainer.lambda$getCache$6(DefaultCacheContainer.java:119)&lt;br/&gt;
        at org.jboss.as.clustering.infinispan.DefaultCacheContainer$$Lambda$112/661685893.run(Unknown Source)&lt;br/&gt;
        at org.jboss.as.clustering.infinispan.DefaultCacheContainer.getCache(DefaultCacheContainer.java:120)&lt;br/&gt;
        at org.jboss.as.clustering.infinispan.DefaultCacheContainer.getCache(DefaultCacheContainer.java:114)&lt;br/&gt;
        at org.hibernate.cache.infinispan.InfinispanRegionFactory.getCache(InfinispanRegionFactory.java:673)&lt;br/&gt;
        at org.hibernate.cache.infinispan.InfinispanRegionFactory.buildEntityRegion(InfinispanRegionFactory.java:285)&lt;br/&gt;
        at org.hibernate.internal.SessionFactoryImpl.determineEntityRegionAccessStrategy(SessionFactoryImpl.java:619) &lt;span class=&quot;error&quot;&gt;&amp;#91;hibernate-core-5.0.7.Final.jar:5.0.7.Final&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.hibernate.internal.SessionFactoryImpl.&amp;lt;init&amp;gt;(SessionFactoryImpl.java:332) &lt;span class=&quot;error&quot;&gt;&amp;#91;hibernate-core-5.0.7.Final.jar:5.0.7.Final&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:444) &lt;span class=&quot;error&quot;&gt;&amp;#91;hibernate-core-5.0.7.Final.jar:5.0.7.Final&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:879) &lt;span class=&quot;error&quot;&gt;&amp;#91;hibernate-entitymanager-5.0.7.Final.jar:5.0.7.Final&amp;#93;&lt;/span&gt;&lt;br/&gt;
        ... 9 more&lt;br/&gt;
Caused by: org.infinispan.commons.CacheException: Unable to start cache loaders&lt;br/&gt;
        at org.infinispan.persistence.manager.PersistenceManagerImpl.start(PersistenceManagerImpl.java:174)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) &lt;span class=&quot;error&quot;&gt;&amp;#91;rt.jar:1.8.0_45&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) &lt;span class=&quot;error&quot;&gt;&amp;#91;rt.jar:1.8.0_45&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) &lt;span class=&quot;error&quot;&gt;&amp;#91;rt.jar:1.8.0_45&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Method.java:497) &lt;span class=&quot;error&quot;&gt;&amp;#91;rt.jar:1.8.0_45&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.infinispan.commons.util.ReflectionUtil.invokeAccessibly(ReflectionUtil.java:168)&lt;br/&gt;
        ... 28 more&lt;br/&gt;
Caused by: org.infinispan.commons.CacheConfigurationException: Unable to instantiate class org.infinispan.client.hotrod.impl.transport.tcp.RoundRobinBalancingStrategy&lt;br/&gt;
        at org.infinispan.commons.util.Util.loadClass(Util.java:103)&lt;br/&gt;
        at org.infinispan.client.hotrod.configuration.ConfigurationBuilder.balancingStrategy(ConfigurationBuilder.java:125)&lt;br/&gt;
        at org.infinispan.persistence.remote.RemoteStore.buildRemoteConfiguration(RemoteStore.java:221)&lt;br/&gt;
        at org.infinispan.persistence.remote.RemoteStore.start(RemoteStore.java:89)&lt;br/&gt;
        at org.infinispan.persistence.manager.PersistenceManagerImpl.start(PersistenceManagerImpl.java:141)&lt;br/&gt;
        ... 33 more&lt;br/&gt;
Caused by: java.lang.ClassNotFoundException: org.infinispan.client.hotrod.impl.transport.tcp.RoundRobinBalancingStrategy from &lt;span class=&quot;error&quot;&gt;&amp;#91;Module &amp;quot;deployment.sample-ear.ear.sample-ejb.jar:main&amp;quot; from Service Module Loader&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:198) &lt;span class=&quot;error&quot;&gt;&amp;#91;jboss-modules.jar:1.5.1.Final&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:363) &lt;span class=&quot;error&quot;&gt;&amp;#91;jboss-modules.jar:1.5.1.Final&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:351) &lt;span class=&quot;error&quot;&gt;&amp;#91;jboss-modules.jar:1.5.1.Final&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:93) &lt;span class=&quot;error&quot;&gt;&amp;#91;jboss-modules.jar:1.5.1.Final&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.lang.Class.forName0(Native Method) &lt;span class=&quot;error&quot;&gt;&amp;#91;rt.jar:1.8.0_45&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.lang.Class.forName(Class.java:348) &lt;span class=&quot;error&quot;&gt;&amp;#91;rt.jar:1.8.0_45&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.infinispan.commons.util.Util.loadClassStrict(Util.java:158)&lt;br/&gt;
        at org.infinispan.commons.util.Util.loadClass(Util.java:101)&lt;br/&gt;
        ... 37 more&lt;/p&gt;

&lt;p&gt;domain.xml is:&lt;/p&gt;

&lt;p&gt;{{&amp;lt;cache-container name=&quot;hibernate&quot; default-cache=&quot;entity&quot; module=&quot;org.hibernate.infinispan&quot;&amp;gt;&lt;br/&gt;
    &amp;lt;transport lock-timeout=&quot;60000&quot;/&amp;gt;&lt;br/&gt;
    &amp;lt;local-cache name=&quot;local-query&quot;&amp;gt;&lt;br/&gt;
        &amp;lt;eviction strategy=&quot;LRU&quot; max-entries=&quot;10000&quot;/&amp;gt;&lt;br/&gt;
        &amp;lt;expiration max-idle=&quot;100000&quot;/&amp;gt;&lt;br/&gt;
    &amp;lt;/local-cache&amp;gt;&lt;br/&gt;
    &amp;lt;invalidation-cache name=&quot;entity&quot; mode=&quot;SYNC&quot;&amp;gt;&lt;br/&gt;
        &amp;lt;eviction strategy=&quot;LRU&quot; max-entries=&quot;1000&quot;/&amp;gt;&lt;br/&gt;
        &amp;lt;expiration lifespan=&quot;45000&quot; max-idle=&quot;30000&quot;/&amp;gt;&lt;br/&gt;
        &amp;lt;remote-store cache=&quot;hibernateDistributed&quot; socket-timeout=&quot;60000&quot; tcp-no-delay=&quot;true&quot; remote-servers=&quot;local-cache-server&quot; fetch-state=&quot;false&quot; passivation=&quot;false&quot; preload=&quot;false&quot; purge=&quot;true&quot; shared=&quot;true&quot;/&amp;gt;&lt;br/&gt;
    &amp;lt;/invalidation-cache&amp;gt;&lt;br/&gt;
    &amp;lt;replicated-cache name=&quot;timestamps&quot; mode=&quot;ASYNC&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;/cache-container&amp;gt;}}&lt;/p&gt;


&lt;p&gt;The attached infinispan.zip conatins some changes to the module configuration&lt;br/&gt;
(module.xml&apos;s) in $JBOSS_HOME/modules/system/layers/base/org/infinispan. This&lt;br/&gt;
config changes are marked wih ALVARA an fix the problem for us.&lt;/p&gt;</description>
                <environment>&lt;ul&gt;
	&lt;li&gt;Java version: 1.8.0_45, vendor: Oracle Corporation&lt;/li&gt;
	&lt;li&gt;OS name: &quot;windows 8.1&quot;, version: &quot;6.3&quot;, arch: &quot;amd64&quot;, family: &quot;dos&quot;&lt;/li&gt;
&lt;/ul&gt;
</environment>
        <key id="12617267">WFLY-6571</key>
            <summary>ClassNotFoundException while using remote-store for hibernate entity cache</summary>
                <type id="2" iconUrl="https://issues.jboss.org/secure/viewavatar?size=xsmall&amp;avatarId=13271&amp;avatarType=issuetype">Feature Request</type>
                                            <priority id="3" iconUrl="https://issues.jboss.org/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.jboss.org/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate Issue</resolution>
                                        <assignee username="pferraro">Paul Ferraro</assignee>
                                    <reporter username="gvwolf3d">Gunther v. Wolffersdorff</reporter>
                        <labels>
                            <label>infinispan</label>
                            <label>remote-store</label>
                    </labels>
                <created>Thu, 28 Apr 2016 05:05:25 -0400</created>
                <updated>Mon, 2 May 2016 13:35:05 -0400</updated>
                            <resolved>Mon, 2 May 2016 13:35:05 -0400</resolved>
                                    <version>10.0.0.Final</version>
                                                    <component>Clustering</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13199219" author="pferraro" created="Fri, 29 Apr 2016 12:30:53 -0400"  >&lt;p&gt;Can you post your persistence.xml?  Specifically, which region factory implementation are you using?&lt;/p&gt;</comment>
                            <comment id="13199465" author="gvwolf3d" created="Mon, 2 May 2016 02:29:57 -0400"  >&lt;p&gt;I attached the used persistence.xml. In addition I attached the used sample application (sample.zip) and the standalone configuration (standalone.sample.ha.xml) . &lt;/p&gt;</comment>
                            <comment id="13199847" author="pferraro" created="Mon, 2 May 2016 13:35:05 -0400"  >&lt;p&gt;Duplicate of &lt;a href=&quot;https://issues.jboss.org/browse/WFLY-6203&quot; title=&quot;CNFE when offloading data to remote JDG server&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WFLY-6203&quot;&gt;&lt;del&gt;WFLY-6203&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12400795" name="infinispan.zip" size="3851" author="gvwolf3d" created="Thu, 28 Apr 2016 05:01:40 -0400"/>
                            <attachment id="12400904" name="persistence.xml" size="1992" author="gvwolf3d" created="Mon, 2 May 2016 02:13:33 -0400"/>
                            <attachment id="12400905" name="sample.zip" size="77896" author="gvwolf3d" created="Mon, 2 May 2016 02:14:00 -0400"/>
                            <attachment id="12400906" name="standalone.sample.ha.xml" size="32497" author="gvwolf3d" created="Mon, 2 May 2016 02:17:44 -0400"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310641" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Number of attachments</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310640" key="com.atlassian.jira.toolkit:comments">
                        <customfieldname>Number of comments</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311940" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1|i03n9z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310840" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>