<!-- 
RSS generated by JIRA (7.2.3#72005-sha1:73be91d2b96fc29303a7eb6820acf420e5d0ed65) at Tue Dec 06 12:46:12 EST 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.jboss.org/si/jira.issueviews:issue-xml/WFLY-3280/WFLY-3280.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>JBoss Issue Tracker</title>
    <link>https://issues.jboss.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>7.2.3</version>
        <build-number>72005</build-number>
        <build-date>06-10-2016</build-date>
    </build-info>

<item>
            <title>[WFLY-3280]  Thread locking problem when app server is going to shutdown</title>
                <link>https://issues.jboss.org/browse/WFLY-3280</link>
                <project id="12313721" key="WFLY">WildFly</project>
                    <description>&lt;p&gt;I face problem that remoting thread and MSC service thread is deadlocked when server is going to shutdown.&lt;br/&gt;
This happens in half of the cases when I run my integration arquillian tests again EAP 6.3.0 engineering releases.&lt;br/&gt;
I deploy one testing application packaged as jar file and then jdbc driver is deployed by copying to deployments folder.&lt;/p&gt;

&lt;p&gt;I&apos;m attaching server log file and thread dump at the time when threads are stuck.&lt;/p&gt;

&lt;p&gt;I was trying to find out where the lock occurs and from the stack trace it happens on two places. One is lock on remoting queue and other is lock on DeploymentRepository object.&lt;/p&gt;

&lt;p&gt;I did a quick fix which seems to work for me that I removed &apos;synchronized&apos; keyword from the methods which remove listeners in DeploymentRepository.&lt;br/&gt;
It means from:&lt;br/&gt;
&lt;a href=&quot;https://github.com/jbossas/jboss-eap/blob/6.x/ejb3/src/main/java/org/jboss/as/ejb3/deployment/DeploymentRepository.java#L103&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/jbossas/jboss-eap/blob/6.x/ejb3/src/main/java/org/jboss/as/ejb3/deployment/DeploymentRepository.java#L103&lt;/a&gt;&lt;br/&gt;
and&lt;br/&gt;
&lt;a href=&quot;https://github.com/jbossas/jboss-eap/blob/6.x/ejb3/src/main/java/org/jboss/as/ejb3/deployment/DeploymentRepository.java#L107&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/jbossas/jboss-eap/blob/6.x/ejb3/src/main/java/org/jboss/as/ejb3/deployment/DeploymentRepository.java#L107&lt;/a&gt;&lt;br/&gt;
I&apos;m really not sure whether this is &apos;a correct&apos; fix but I just put my observation here to have some starting point.&lt;/p&gt;

&lt;p&gt;This could not be trouble in remoting directly, maybe it&apos;s rather problem of MSC component. If so, please, change the jira type. Thank you.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12538827">WFLY-3280</key>
            <summary> Thread locking problem when app server is going to shutdown</summary>
                <type id="1" iconUrl="https://issues.jboss.org/secure/viewavatar?size=xsmall&amp;avatarId=13263&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.jboss.org/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.jboss.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Done</resolution>
                                        <assignee username="dmlloyd">David Lloyd</assignee>
                                    <reporter username="ochaloup">Ondra Chaloupka</reporter>
                        <labels>
                    </labels>
                <created>Wed, 23 Apr 2014 03:12:22 -0400</created>
                <updated>Thu, 4 Sep 2014 09:18:53 -0400</updated>
                            <resolved>Fri, 16 May 2014 12:39:22 -0400</resolved>
                                    <version>8.1.0.CR1</version>
                                    <fixVersion>8.1.0.Final</fixVersion>
                    <fixVersion>9.0.0.Alpha1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="12963173" author="ochaloup" created="Wed, 23 Apr 2014 03:13:13 -0400"  >&lt;p&gt;Dump of stacktrace of server when deadlock occurs&lt;/p&gt;</comment>
                            <comment id="12963174" author="ochaloup" created="Wed, 23 Apr 2014 03:14:04 -0400"  >&lt;p&gt;Server.log from time when server is stuck&lt;/p&gt;</comment>
                            <comment id="12963175" author="ochaloup" created="Wed, 23 Apr 2014 03:19:21 -0400"  >&lt;p&gt;I moved the bug under wildfly as I found that it&apos;s more appropriate.&lt;/p&gt;</comment>
                            <comment id="12963400" author="jira-bugzilla-migration" created="Wed, 23 Apr 2014 17:10:21 -0400"  >&lt;p&gt;Kabir Khan &amp;lt;kkhan@redhat.com&amp;gt; changed the Status of &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=1090147&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 1090147&lt;/a&gt; from NEW to MODIFIED&lt;/p&gt;</comment>
                            <comment id="12964974" author="jira-bugzilla-migration" created="Thu, 1 May 2014 17:20:35 -0400"  >&lt;p&gt;Paul Gier &amp;lt;pgier@redhat.com&amp;gt; changed the Status of &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=1090147&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 1090147&lt;/a&gt; from MODIFIED to ON_QA&lt;/p&gt;</comment>
                            <comment id="12965685" author="jira-bugzilla-migration" created="Tue, 6 May 2014 03:58:26 -0400"  >&lt;p&gt;Ondrej Chaloupka &amp;lt;ochaloup@redhat.com&amp;gt; changed the Status of &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=1090147&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 1090147&lt;/a&gt; from ON_QA to VERIFIED&lt;/p&gt;</comment>
                            <comment id="12980206" author="jira-bugzilla-migration" created="Sat, 28 Jun 2014 11:29:59 -0400"  >&lt;p&gt;mark yarborough &amp;lt;myarboro@redhat.com&amp;gt; changed the Status of &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=1090147&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 1090147&lt;/a&gt; from VERIFIED to CLOSED&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12381989" name="server.dump" size="36097" author="ochaloup" created="Wed, 23 Apr 2014 03:13:13 -0400"/>
                            <attachment id="12381990" name="server.log" size="382681" author="ochaloup" created="Wed, 23 Apr 2014 03:14:04 -0400"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310440" key="org.jboss.labs.jira.plugin.jboss-custom-field-types-plugin:multiurl">
                        <customfieldname>Bugzilla References</customfieldname>
                        <customfieldvalues>
                            https://bugzilla.redhat.com/show_bug.cgi?id=1090147
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310341" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bugzilla Update</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10250"><![CDATA[Perform]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="org.jboss.labs.jira.plugin.jboss-custom-field-types-plugin:multiurl">
                        <customfieldname>Git Pull Request</customfieldname>
                        <customfieldvalues>
                            https://github.com/wildfly/wildfly/pull/6195
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310641" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Number of attachments</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310640" key="com.atlassian.jira.toolkit:comments">
                        <customfieldname>Number of comments</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311940" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1|hznfbj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310840" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>196910</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>