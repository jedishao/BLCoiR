<!-- 
RSS generated by JIRA (7.2.3#72005-sha1:73be91d2b96fc29303a7eb6820acf420e5d0ed65) at Tue Dec 06 12:29:54 EST 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.jboss.org/si/jira.issueviews:issue-xml/WFLY-827/WFLY-827.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>JBoss Issue Tracker</title>
    <link>https://issues.jboss.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>7.2.3</version>
        <build-number>72005</build-number>
        <build-date>06-10-2016</build-date>
    </build-info>

<item>
            <title>[WFLY-827] NullPointer @ org.jboss.as.jpa.container.ExtendedPersistenceDeepInheritance</title>
                <link>https://issues.jboss.org/browse/WFLY-827</link>
                <project id="12313721" key="WFLY">WildFly</project>
                    <description>&lt;p&gt;Webproject with ManagedBean contains following PersistenceContext:&lt;br/&gt;
@PersistenceContext(unitName = &quot;MyPU&quot;, type = PersistenceContextType.EXTENDED)&lt;/p&gt;

&lt;p&gt;WebApp run fine under Jboss-7.1, in JBoss-7.2 (EAP-6.1.0) we&apos;ve got NulPointer-Exception and therefore further exceptions.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12489897">WFLY-827</key>
            <summary>NullPointer @ org.jboss.as.jpa.container.ExtendedPersistenceDeepInheritance</summary>
                <type id="1" iconUrl="https://issues.jboss.org/secure/viewavatar?size=xsmall&amp;avatarId=13263&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.jboss.org/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.jboss.org/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate Issue</resolution>
                                        <assignee username="smarlow">Scott Marlow</assignee>
                                    <reporter username="brand-neu">Brand Neu</reporter>
                        <labels>
                    </labels>
                <created>Fri, 19 Apr 2013 05:05:04 -0400</created>
                <updated>Fri, 25 Jul 2014 22:01:39 -0400</updated>
                            <resolved>Fri, 25 Jul 2014 22:01:29 -0400</resolved>
                                                    <fixVersion>9.0.0.Alpha1</fixVersion>
                                    <component>JPA / Hibernate</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="12768715" author="brand-neu" created="Fri, 19 Apr 2013 05:05:59 -0400"  >&lt;p&gt;Output Web-Exception&lt;/p&gt;</comment>
                            <comment id="12768778" author="smarlow" created="Fri, 19 Apr 2013 07:28:02 -0400"  >&lt;p&gt;Interesting, I didn&apos;t try this from a web application because you should only use PersistenceContextType.EXTENDED in a stateful session bean.&lt;/p&gt;

&lt;p&gt;Thanks for the bug report, I will definitely fix this!&lt;/p&gt;
</comment>
                            <comment id="12768780" author="smarlow" created="Fri, 19 Apr 2013 07:31:06 -0400"  >&lt;p&gt;Workaround:&lt;/p&gt;

&lt;p&gt;If you want an extended persistence context in a web application, change to @PersistenceUnit(unitName = &quot;MyPU&quot;) EntityManagerFactory.  The EntityManager that you get from the EntityManagerFactory will be application managed (instead of container managed) and is probably what you want.  The scope of the an application managed persistence context is that the EntityManager will stay open until you call close on it.&lt;/p&gt;</comment>
                            <comment id="12768790" author="smarlow" created="Fri, 19 Apr 2013 07:58:56 -0400"  >&lt;p&gt;From the attached stack trace, in org.jboss.as.jpa.container.ExtendedPersistenceDeepInheritance.findExtendedPersistenceContext() variable currentInjectedXPCs appears to be null.&lt;/p&gt;
&lt;p/&gt;
&lt;div id=&quot;syntaxplugin&quot; class=&quot;syntaxplugin&quot; style=&quot;border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;&quot;&gt;
&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; border=&quot;0&quot; width=&quot;100%&quot; style=&quot;font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;&quot;&gt;
		&lt;tbody &gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt; &lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;// will look directly at the top level bean being created (registerExtendedPersistenceContext() registers xpc there).&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;result = currentInjectedXPCs.findExtendedPersistenceContextDeepInheritance(puScopedName);&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
			&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;p/&gt;</comment>
                            <comment id="12768793" author="brand-neu" created="Fri, 19 Apr 2013 08:11:09 -0400"  >&lt;p&gt;Hi,&lt;br/&gt;
relevant source-snippet from class:&lt;/p&gt;

&lt;p/&gt;
&lt;div id=&quot;syntaxplugin&quot; class=&quot;syntaxplugin&quot; style=&quot;border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;&quot;&gt;
&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; border=&quot;0&quot; width=&quot;100%&quot; style=&quot;font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;&quot;&gt;
		&lt;tbody &gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt; &lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: gray; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;@ManagedBean&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;(name=&lt;/span&gt;&lt;span style=&quot;color: blue; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;&quot;KorrekturgrundFacade&quot;&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;)&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: gray; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;@SessionScoped&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt; &lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: gray; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;@Stateful&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: #006699; font-weight: bold; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;public&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #006699; font-weight: bold; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;class&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt; StdGrundKorrekturFacade &lt;/span&gt;&lt;span style=&quot;color: #006699; font-weight: bold; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;extends&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt; AbstractFacade&amp;lt;StdGrundKorrektur&amp;gt; {&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&amp;nbsp;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: gray; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;@PersistenceContext&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;(unitName = &lt;/span&gt;&lt;span style=&quot;color: blue; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;&quot;MyPU&quot;&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;, type = PersistenceContextType.EXTENDED)&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&amp;nbsp;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;...&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;}&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
			&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;p/&gt; </comment>
                            <comment id="12768827" author="smarlow" created="Fri, 19 Apr 2013 09:41:33 -0400"  >&lt;p&gt;You might want to follow &lt;a href=&quot;https://issues.jboss.org/browse/CDI-162&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;CDI-162&lt;/a&gt; which is about adding extended persistence context support to managed beans which is currently not supported.&lt;/p&gt;</comment>
                            <comment id="12769033" author="brand-neu" created="Mon, 22 Apr 2013 04:31:10 -0400"  >&lt;p&gt;Very interesting discussion; I&apos;ll try your suggested workaround.&lt;/p&gt;</comment>
                            <comment id="12771500" author="brand-neu" created="Thu, 2 May 2013 03:35:26 -0400"  >&lt;p&gt;Your workaround is ok for now!&lt;br/&gt;
Further enhancement: Jboss(Wildfly)-Log should contain not only the above NullPointer-Exception, but also a hint the problem and/or link to CDI.&lt;/p&gt;</comment>
                            <comment id="12961958" author="fer.marino" created="Tue, 15 Apr 2014 06:54:26 -0400"  >&lt;p&gt;got the same problem with EAP-6.2. In other parts of the application everything works fine, I&apos;ve got this error after I added an @ElementCollection of enum to an existing Entity that is referenced by the attached object that i throwing the error. I think he has some trouble going too deep into the hierarchy of the model.&lt;/p&gt;</comment>
                            <comment id="12987880" author="smarlow" created="Thu, 24 Jul 2014 16:43:42 -0400"  >&lt;p&gt;I agree that a NullPointerException should not be thrown.  We can add a check for the condition that shows an error like below (part of &lt;a href=&quot;https://issues.jboss.org/browse/WFLY-69&quot; title=&quot;Using an extended persistence context in a stateless session bean should throw an exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WFLY-69&quot;&gt;&lt;del&gt;WFLY-69&lt;/del&gt;&lt;/a&gt; changes).&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;... &lt;br/&gt;
omitted other top level exceptions&lt;br/&gt;
...&lt;br/&gt;
Caused by: java.lang.IllegalStateException: WFLYJPA0070: A container-managed extended persistence context can only be initiated within the scope of a stateful session bean (Persistence unit &apos;jpa_SerializationTestCase.jar#mypc&apos;).&lt;br/&gt;
	at org.jboss.as.jpa.container.SFSBCallStack.getSFSBCreationTimeInjectedXPCs(SFSBCallStack.java:110) &lt;span class=&quot;error&quot;&gt;&amp;#91;wildfly-jpa-9.0.0.Alpha1-SNAPSHOT.jar:9.0.0.Alpha1-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.jboss.as.jpa.container.ExtendedPersistenceDeepInheritance.findExtendedPersistenceContext(ExtendedPersistenceDeepInheritance.java:47) &lt;span class=&quot;error&quot;&gt;&amp;#91;wildfly-jpa-9.0.0.Alpha1-SNAPSHOT.jar:9.0.0.Alpha1-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.jboss.as.jpa.injectors.PersistenceContextInjectionSource$PersistenceContextJndiInjectable.getReference(PersistenceContextInjectionSource.java:168) &lt;span class=&quot;error&quot;&gt;&amp;#91;wildfly-jpa-9.0.0.Alpha1-SNAPSHOT.jar:9.0.0.Alpha1-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.jboss.as.naming.ServiceBasedNamingStore.lookup(ServiceBasedNamingStore.java:143)&lt;br/&gt;
	... 179 more&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I don&apos;t like how far into the exception that you have to read before seeing the &quot;java.lang.IllegalStateException: WFLYJPA0070: A container-managed extended persistence context can only be initiated within the scope of a stateful session bean (Persistence unit &apos;jpa_SerializationTestCase.jar#mypc&apos;)&quot;, but otherwise this is better.&lt;/p&gt;</comment>
                            <comment id="12988144" author="smarlow" created="Fri, 25 Jul 2014 22:01:29 -0400"  >&lt;p&gt;The fix for &lt;a href=&quot;https://issues.jboss.org/browse/WFLY-69&quot; title=&quot;Using an extended persistence context in a stateless session bean should throw an exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WFLY-69&quot;&gt;&lt;del&gt;WFLY-69&lt;/del&gt;&lt;/a&gt; is merged for WildFly (will be in 9.0.0.Beta1).  That fix replaces the NPE with an ISE.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10012">
                    <name>Dependency</name>
                                            <outwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12461041">WFLY-69</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12362090" name="JBoss Web_7.2.0.Final - JBWEB000064  Error report.htm" size="17288" author="brand-neu" created="Fri, 19 Apr 2013 05:05:59 -0400"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310641" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Number of attachments</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310640" key="com.atlassian.jira.toolkit:comments">
                        <customfieldname>Number of comments</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>11.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311940" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1|hzgkpb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310840" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>157141</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>