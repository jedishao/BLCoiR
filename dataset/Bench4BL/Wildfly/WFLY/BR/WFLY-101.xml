<!-- 
RSS generated by JIRA (7.2.3#72005-sha1:73be91d2b96fc29303a7eb6820acf420e5d0ed65) at Tue Dec 06 15:24:18 EST 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.jboss.org/si/jira.issueviews:issue-xml/WFLY-101/WFLY-101.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>JBoss Issue Tracker</title>
    <link>https://issues.jboss.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>7.2.3</version>
        <build-number>72005</build-number>
        <build-date>06-10-2016</build-date>
    </build-info>

<item>
            <title>[WFLY-101] JMSService.start is doing blocking I/O</title>
                <link>https://issues.jboss.org/browse/WFLY-101</link>
                <project id="12313721" key="WFLY">WildFly</project>
                    <description>&lt;p&gt;flag the start context as asynchronous&lt;/p&gt;</description>
                <environment></environment>
        <key id="12489128">WFLY-101</key>
            <summary>JMSService.start is doing blocking I/O</summary>
                <type id="1" iconUrl="https://issues.jboss.org/secure/viewavatar?size=xsmall&amp;avatarId=13263&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.jboss.org/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.jboss.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Done</resolution>
                                        <assignee username="jmesnil">Jeff Mesnil</assignee>
                                    <reporter username="jmesnil">Jeff Mesnil</reporter>
                        <labels>
                    </labels>
                <created>Thu, 11 Apr 2013 11:13:19 -0400</created>
                <updated>Thu, 7 Aug 2014 08:13:15 -0400</updated>
                            <resolved>Wed, 17 Apr 2013 06:52:31 -0400</resolved>
                                                    <fixVersion>8.0.0.Alpha1</fixVersion>
                                    <component>JMS</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12766532" author="jmesnil" created="Thu, 11 Apr 2013 11:24:50 -0400"  >&lt;p&gt;PR for master branch&lt;/p&gt;</comment>
                            <comment id="12767982" author="jmesnil" created="Wed, 17 Apr 2013 06:52:31 -0400"  >&lt;p&gt;PR merged in master branch&lt;/p&gt;</comment>
                            <comment id="12801167" author="jira-bugzilla-migration" created="Tue, 3 Sep 2013 09:50:45 -0400"  >&lt;p&gt;Jeff Mesnil &amp;lt;jmesnil@redhat.com&amp;gt; made a comment on &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=1003913&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 1003913&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Description of problem:&lt;/p&gt;

&lt;p&gt;JMSService.start is doing blocking I/O which is forbidden by the MSC service contract.&lt;/p&gt;</comment>
                            <comment id="12805014" author="jira-bugzilla-migration" created="Tue, 17 Sep 2013 07:13:41 -0400"  >&lt;p&gt;Brian Stansberry &amp;lt;brian.stansberry@redhat.com&amp;gt; changed the Status of &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=1003913&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 1003913&lt;/a&gt; from NEW to MODIFIED&lt;/p&gt;</comment>
                            <comment id="12805535" author="jira-bugzilla-migration" created="Wed, 18 Sep 2013 11:37:34 -0400"  >&lt;p&gt;Jeff Mesnil &amp;lt;jmesnil@redhat.com&amp;gt; made a comment on &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=1003913&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 1003913&lt;/a&gt;&lt;/p&gt;
</comment>
                            <comment id="12805541" author="jira-bugzilla-migration" created="Wed, 18 Sep 2013 11:49:11 -0400"  >&lt;p&gt;Jeff Mesnil &amp;lt;jmesnil@redhat.com&amp;gt; made a comment on &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=1003913&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 1003913&lt;/a&gt;&lt;/p&gt;
</comment>
                            <comment id="12807093" author="jira-bugzilla-migration" created="Tue, 24 Sep 2013 20:39:49 -0400"  >&lt;p&gt;Paul Gier &amp;lt;pgier@redhat.com&amp;gt; changed the Status of &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=1003913&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 1003913&lt;/a&gt; from MODIFIED to ON_QA&lt;/p&gt;</comment>
                            <comment id="12810493" author="jira-bugzilla-migration" created="Mon, 7 Oct 2013 09:01:33 -0400"  >&lt;p&gt;Miroslav Novak &amp;lt;mnovak@redhat.com&amp;gt; made a comment on &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=1003913&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 1003913&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Hi Jeff, &lt;/p&gt;

&lt;p&gt;could you help with verification of this bz, please? I can see that PR contains actually more than one thing. &quot;HornetQ fail-back results in XA recovery warnings&quot; I can verify easily.&lt;/p&gt;

&lt;p&gt;Problem is &quot;&lt;a href=&quot;https://issues.jboss.org/browse/WFLY-101&quot; title=&quot;JMSService.start is doing blocking I/O&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WFLY-101&quot;&gt;&lt;del&gt;WFLY-101&lt;/del&gt;&lt;/a&gt; JMSService.start to perform blocking I/O asynchronously&quot; I guess only way to verify is to read the code, right?&lt;/p&gt;</comment>
                            <comment id="12811431" author="jira-bugzilla-migration" created="Tue, 8 Oct 2013 03:08:02 -0400"  >&lt;p&gt;Jeff Mesnil &amp;lt;jmesnil@redhat.com&amp;gt; made a comment on &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=1003913&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 1003913&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;(In reply to Miroslav Novak from comment #5)&lt;br/&gt;
&amp;gt; Problem is &quot;&lt;a href=&quot;https://issues.jboss.org/browse/WFLY-101&quot; title=&quot;JMSService.start is doing blocking I/O&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WFLY-101&quot;&gt;&lt;del&gt;WFLY-101&lt;/del&gt;&lt;/a&gt; JMSService.start to perform blocking I/O&lt;br/&gt;
&amp;gt; asynchronously&quot; I guess only way to verify is to read the code, right?&lt;/p&gt;

&lt;p&gt;That&apos;s correct, there is no observable way to verify this.&lt;br/&gt;
Reading the code, it appears that the JMSService.start/stop methods performs HornetQ-related operations asynchronously in a separate executor: &lt;a href=&quot;https://github.com/jmesnil/jboss-eap/commit/161295de1ae35a10c53dcc8f4fce933b4baadeb2#diff-60f2c56b6f01bb06387cbe9054ddc549R89&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/jmesnil/jboss-eap/commit/161295de1ae35a10c53dcc8f4fce933b4baadeb2#diff-60f2c56b6f01bb06387cbe9054ddc549R89&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12812573" author="jira-bugzilla-migration" created="Wed, 9 Oct 2013 05:08:55 -0400"  >&lt;p&gt;Miroslav Novak &amp;lt;mnovak@redhat.com&amp;gt; made a comment on &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=1003913&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 1003913&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Hi Jeff,&lt;/p&gt;

&lt;p&gt;I tried to use debugger to hold start of HornetQ - line break point was HornetQServerImpl.start line 404. But I didn&apos;t see other services to start when debugger stopped initialization of HornetQ. My understanding is that those services should start when they do not have dependency on messaging. Is it right?&lt;/p&gt;

&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Mirek&lt;/p&gt;</comment>
                            <comment id="12812574" author="jira-bugzilla-migration" created="Wed, 9 Oct 2013 05:15:06 -0400"  >&lt;p&gt;Jeff Mesnil &amp;lt;jmesnil@redhat.com&amp;gt; made a comment on &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=1003913&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 1003913&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Breakpoint should be on org.hornetq.jms.server.impl.JMSServerManagerImpl#start&lt;/p&gt;

&lt;p&gt;That the HornetQ class that is called by WildFly JMSService.&lt;/p&gt;

&lt;p&gt;I&apos;m nto sure what should happen exactly but since the JMS server start is asynchrounous now, other WildFly services will be able to start without being blocked.&lt;br/&gt;
This changes nothing for services &lt;b&gt;depending&lt;/b&gt; on JMSService. They will not be started until the JMSService is started (asynchronously or not).&lt;/p&gt;</comment>
                            <comment id="12812803" author="jira-bugzilla-migration" created="Wed, 9 Oct 2013 12:15:12 -0400"  >&lt;p&gt;Miroslav Novak &amp;lt;mnovak@redhat.com&amp;gt; changed the Status of &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=1003913&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 1003913&lt;/a&gt; from ON_QA to VERIFIED&lt;/p&gt;</comment>
                            <comment id="12812804" author="jira-bugzilla-migration" created="Wed, 9 Oct 2013 12:15:13 -0400"  >&lt;p&gt;Miroslav Novak &amp;lt;mnovak@redhat.com&amp;gt; made a comment on &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=1003913&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 1003913&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I could not verify this BZ using debugger but based on code review (also from D. Loyd) this fix is ok.&lt;/p&gt;

&lt;p&gt;Verified in EAP 6.2.0.ER3.&lt;/p&gt;</comment>
                            <comment id="12931622" author="jira-bugzilla-migration" created="Sun, 15 Dec 2013 11:55:51 -0500"  >&lt;p&gt;mark yarborough &amp;lt;myarboro@redhat.com&amp;gt; changed the Status of &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=1003913&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 1003913&lt;/a&gt; from VERIFIED to CLOSED&lt;/p&gt;</comment>
                            <comment id="12957660" author="jira-bugzilla-migration" created="Mon, 31 Mar 2014 06:10:21 -0400"  >&lt;p&gt;Pavel Jelinek &amp;lt;pjelinek@redhat.com&amp;gt; changed the Status of &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=1082103&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 1082103&lt;/a&gt; from NEW to POST&lt;/p&gt;</comment>
                            <comment id="12976900" author="jira-bugzilla-migration" created="Tue, 17 Jun 2014 05:26:16 -0400"  >&lt;p&gt;Carlo de Wolf &amp;lt;cdewolf@redhat.com&amp;gt; changed the Status of &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=1082103&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 1082103&lt;/a&gt; from POST to MODIFIED&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310440" key="org.jboss.labs.jira.plugin.jboss-custom-field-types-plugin:multiurl">
                        <customfieldname>Bugzilla References</customfieldname>
                        <customfieldvalues>
                            https://bugzilla.redhat.com/show_bug.cgi?id=1003913, https://bugzilla.redhat.com/show_bug.cgi?id=1082103
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310341" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bugzilla Update</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10250"><![CDATA[Perform]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="org.jboss.labs.jira.plugin.jboss-custom-field-types-plugin:multiurl">
                        <customfieldname>Git Pull Request</customfieldname>
                        <customfieldvalues>
                            https://github.com/jbossas/jboss-as/pull/4369
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310641" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Number of attachments</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310640" key="com.atlassian.jira.toolkit:comments">
                        <customfieldname>Number of comments</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>16.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311940" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1|hzgguv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310840" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>156517</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>