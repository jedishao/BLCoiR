<!-- 
RSS generated by JIRA (7.2.3#72005-sha1:73be91d2b96fc29303a7eb6820acf420e5d0ed65) at Mon Dec 12 13:50:51 EST 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.jboss.org/si/jira.issueviews:issue-xml/WFLY-3493/WFLY-3493.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>JBoss Issue Tracker</title>
    <link>https://issues.jboss.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>7.2.3</version>
        <build-number>72005</build-number>
        <build-date>06-10-2016</build-date>
    </build-info>

<item>
            <title>[WFLY-3493] Messaging subsystem allows you to remove a destination even though it has an attached client</title>
                <link>https://issues.jboss.org/browse/WFLY-3493</link>
                <project id="12313721" key="WFLY">WildFly</project>
                    <description>&lt;p&gt;Currently jboss-cli allows a queue to be removed even though there is a MDB attached to it. The command &lt;/p&gt;

&lt;p/&gt;
&lt;div id=&quot;syntaxplugin&quot; class=&quot;syntaxplugin&quot; style=&quot;border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;&quot;&gt;
&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; border=&quot;0&quot; width=&quot;100%&quot; style=&quot;font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;&quot;&gt;
		&lt;tbody &gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;  margin-top: 10px;   margin-bottom: 10px;  width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;/subsystem=messaging/hornetq-server=default/jms-queue=testQueue:remove()&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
			&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;p/&gt;

&lt;p&gt;will remove the queue without a warning. This is not desirable since a warning should be given or a reload should be force.  It may also break the dependency injection. &lt;/p&gt;</description>
                <environment>&lt;p&gt;WildFly 8.1 Final&lt;/p&gt;</environment>
        <key id="12543753">WFLY-3493</key>
            <summary>Messaging subsystem allows you to remove a destination even though it has an attached client</summary>
                <type id="1" iconUrl="https://issues.jboss.org/secure/viewavatar?size=xsmall&amp;avatarId=13263&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.jboss.org/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.jboss.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Done</resolution>
                                        <assignee username="jmesnil">Jeff Mesnil</assignee>
                                    <reporter username="raggz">Tom Ross</reporter>
                        <labels>
                    </labels>
                <created>Fri, 13 Jun 2014 10:18:14 -0400</created>
                <updated>Thu, 4 Sep 2014 09:16:42 -0400</updated>
                            <resolved>Mon, 28 Jul 2014 10:57:26 -0400</resolved>
                                    <version>8.1.0.Final</version>
                                    <fixVersion>9.0.0.Alpha1</fixVersion>
                                    <component>JMS</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="12976222" author="brian.stansberry" created="Fri, 13 Jun 2014 16:32:30 -0400"  >&lt;p&gt;&lt;a href=&quot;https://issues.jboss.org/secure/ViewProfile.jspa?name=jmesnil&quot; class=&quot;user-hover&quot; rel=&quot;jmesnil&quot;&gt;Jeff Mesnil&lt;/a&gt; This is due to how OperationContextImpl.ServiceRemovalVerificationHandler works. The OC tracks what services are removed via the OC removeService API, and in the JMSQueueRemove case that is just the JMSQueueService. The ServiceRemovalVerificationHandler then reports a failure and triggers rollback if one of those services shows up in the containerStateChangeReport.getMissingServices() map.&lt;/p&gt;

&lt;p&gt;But the service that is missing is not the service that is removed, it is a JNDI binding one:&lt;/p&gt;

&lt;p&gt;15:16:04,467 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;org.jboss.as.controller&amp;#93;&lt;/span&gt; (management-handler-thread - 5) JBAS014774: Service status report&lt;br/&gt;
JBAS014775:    New missing/unsatisfied dependencies:&lt;br/&gt;
      service jboss.naming.context.java.queue.demo (missing) dependents: &lt;span class=&quot;error&quot;&gt;&amp;#91;service jboss.naming.context.java.module.luckywinner.luckywinner.env.&amp;quot;org.jboss.as.demos.luckywinner.webapp.LuckyWinnerServlet&amp;quot;.queue&amp;#93;&lt;/span&gt; &lt;/p&gt;

&lt;p&gt;So the JNDI binding is being removed, but the significance of that is unknown to the management layer.&lt;/p&gt;</comment>
                            <comment id="12976226" author="brian.stansberry" created="Fri, 13 Jun 2014 16:47:31 -0400"  >&lt;p&gt;BTW, the &quot;luckywinner&quot; stuff in my last comment comes from an app I use in demos that has a servlet with an @Resource injection of a queue.&lt;/p&gt;

&lt;p&gt;Hmm, there&apos;s also an MDB in a separate deployment that uses the queue, and I&apos;m not seeing anything about that dependency being broken.&lt;/p&gt;</comment>
                            <comment id="12977086" author="jmesnil" created="Tue, 17 Jun 2014 11:25:54 -0400"  >&lt;p&gt;&amp;gt; Hmm, there&apos;s also an MDB in a separate deployment that uses the queue, and I&apos;m not seeing anything about that dependency being broken.&lt;/p&gt;

&lt;p&gt;The dependency between the MDB and the Queue is not the same than when using an @Resource annotation. It goes through the indirection of the activation config property and it looks like the JNDI dependency is not set up at all in that case. I&apos;ll open a separate issue for this use case.&lt;/p&gt;</comment>
                            <comment id="12977749" author="jmesnil" created="Thu, 19 Jun 2014 10:03:45 -0400"  >&lt;p&gt;PR for master branch&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="org.jboss.labs.jira.plugin.jboss-custom-field-types-plugin:multiurl">
                        <customfieldname>Git Pull Request</customfieldname>
                        <customfieldvalues>
                            https://github.com/wildfly/wildfly/pull/6405
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310641" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Number of attachments</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310640" key="com.atlassian.jira.toolkit:comments">
                        <customfieldname>Number of comments</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311940" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1|hzrxdb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310840" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310091" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Workaround Description</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;None&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>