<!-- 
RSS generated by JIRA (7.2.3#72005-sha1:73be91d2b96fc29303a7eb6820acf420e5d0ed65) at Tue Dec 06 11:45:28 EST 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.jboss.org/si/jira.issueviews:issue-xml/WFLY-1595/WFLY-1595.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>JBoss Issue Tracker</title>
    <link>https://issues.jboss.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>7.2.3</version>
        <build-number>72005</build-number>
        <build-date>06-10-2016</build-date>
    </build-info>

<item>
            <title>[WFLY-1595] Possible race in jboss-invocation proxies resulting in NPE in initializer</title>
                <link>https://issues.jboss.org/browse/WFLY-1595</link>
                <project id="12313721" key="WFLY">WildFly</project>
                    <description>&lt;p&gt;jboss-invocation proxies use a thread local to pass information into the initializer, in most cases this works fine as long as only a single thread is attempting to define the class. It is possible for a different thread to load the class that the one that defines it.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12495192">WFLY-1595</key>
            <summary>Possible race in jboss-invocation proxies resulting in NPE in initializer</summary>
                <type id="1" iconUrl="https://issues.jboss.org/secure/viewavatar?size=xsmall&amp;avatarId=13263&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.jboss.org/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.jboss.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Done</resolution>
                                        <assignee username="swd847">Stuart Douglas</assignee>
                                    <reporter username="swd847">Stuart Douglas</reporter>
                        <labels>
                    </labels>
                <created>Wed, 26 Jun 2013 17:57:13 -0400</created>
                <updated>Thu, 4 Sep 2014 09:52:31 -0400</updated>
                            <resolved>Sun, 30 Jun 2013 20:03:05 -0400</resolved>
                                    <version>8.0.0.Alpha2</version>
                                    <fixVersion>8.0.0.Alpha3</fixVersion>
                                    <component>EE</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="12785431" author="jira-bugzilla-migration" created="Wed, 26 Jun 2013 18:27:37 -0400"  >&lt;p&gt;Stuart Douglas &amp;lt;sdouglas@redhat.com&amp;gt; made a comment on &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=978603&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 978603&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;jboss-invocation proxies use a thread local to pass information into the initializer, in most cases this works fine as long as only a single thread is attempting to define the class. It is possible for a different thread to load the class that the one that defines it.&lt;/p&gt;

&lt;p&gt;As far as I can tell this will only affect CMP, as most other proxies are created at deployment time in a single thread.&lt;/p&gt;</comment>
                            <comment id="12785443" author="jira-bugzilla-migration" created="Wed, 26 Jun 2013 20:28:54 -0400"  >&lt;p&gt;Stuart Douglas &amp;lt;sdouglas@redhat.com&amp;gt; made a comment on &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=978603&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 978603&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The patch for this issue is only a few lines of code and is already completed, and has passed CI runs against Wildfly upstream, EAP 6.x and EAP 6.1 repositories.&lt;/p&gt;</comment>
                            <comment id="12785535" author="jira-bugzilla-migration" created="Thu, 27 Jun 2013 05:21:08 -0400"  >&lt;p&gt;Carlo de Wolf &amp;lt;cdewolf@redhat.com&amp;gt; changed the Status of &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=978603&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 978603&lt;/a&gt; from NEW to POST&lt;/p&gt;</comment>
                            <comment id="12786482" author="jira-bugzilla-migration" created="Mon, 1 Jul 2013 09:13:14 -0400"  >&lt;p&gt;Carlo de Wolf &amp;lt;cdewolf@redhat.com&amp;gt; changed the Status of &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=978603&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 978603&lt;/a&gt; from POST to MODIFIED&lt;/p&gt;</comment>
                            <comment id="12790545" author="jira-bugzilla-migration" created="Wed, 17 Jul 2013 19:29:31 -0400"  >&lt;p&gt;Paul Gier &amp;lt;pgier@redhat.com&amp;gt; changed the Status of &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=978603&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 978603&lt;/a&gt; from MODIFIED to ON_QA&lt;/p&gt;</comment>
                            <comment id="12791709" author="jira-bugzilla-migration" created="Tue, 23 Jul 2013 10:23:51 -0400"  >&lt;p&gt;Carlo de Wolf &amp;lt;cdewolf@redhat.com&amp;gt; made a comment on &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=978603&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 978603&lt;/a&gt;&lt;/p&gt;
</comment>
                            <comment id="12795824" author="jira-bugzilla-migration" created="Thu, 8 Aug 2013 10:26:48 -0400"  >&lt;p&gt;Ondrej Chaloupka &amp;lt;ochaloup@redhat.com&amp;gt; made a comment on &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=978603&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 978603&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Verified on EAP 6.1.1.ER4.&lt;br/&gt;
The jboss-invocation is under version 1.1.2.&lt;br/&gt;
Checked the decompiled code as well.&lt;/p&gt;</comment>
                            <comment id="12795825" author="jira-bugzilla-migration" created="Thu, 8 Aug 2013 10:26:51 -0400"  >&lt;p&gt;Ondrej Chaloupka &amp;lt;ochaloup@redhat.com&amp;gt; changed the Status of &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=978603&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 978603&lt;/a&gt; from ON_QA to VERIFIED&lt;/p&gt;</comment>
                            <comment id="12797790" author="jira-bugzilla-migration" created="Tue, 20 Aug 2013 00:35:05 -0400"  >&lt;p&gt;Scott Mumford &amp;lt;smumford@redhat.com&amp;gt; made a comment on &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=978603&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 978603&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Stuart, is it possible to get an outline of this issue for a release note. &lt;br/&gt;
I read that there was a possible race condition, but unfortunately, the details pertaining to the initializer, threads and defining classes is a bit beyond me.&lt;/p&gt;

&lt;p&gt;We ideally need a cause (the underlying problem in the code), the consequence (how this problem manifested in the products behavior), the fix (what what changed in the code) and the result (how the product behaves after the change).&lt;/p&gt;

&lt;p&gt;Any info you can offer will be appreciated and will help to make the Release Notes the best document it can be.&lt;/p&gt;</comment>
                            <comment id="12797808" author="jira-bugzilla-migration" created="Tue, 20 Aug 2013 02:44:11 -0400"  >&lt;p&gt;Stuart Douglas &amp;lt;sdouglas@redhat.com&amp;gt; made a comment on &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=978603&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 978603&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Because jboss-invocation was using a ThreadLocal to pass information into the proxies static initializer, there was a very short window where if a second thread attempted to use the proxy immediately after it had been defined this second thread would call the static initializer, and the ThreadLocal data that the initializer was expecting would not be present, resulting in a NullPointerException.&lt;/p&gt;</comment>
                            <comment id="12804779" author="jira-bugzilla-migration" created="Mon, 16 Sep 2013 16:26:39 -0400"  >&lt;p&gt;mark yarborough &amp;lt;myarboro@redhat.com&amp;gt; changed the Status of &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=978603&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 978603&lt;/a&gt; from VERIFIED to CLOSED&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310440" key="org.jboss.labs.jira.plugin.jboss-custom-field-types-plugin:multiurl">
                        <customfieldname>Bugzilla References</customfieldname>
                        <customfieldvalues>
                            https://bugzilla.redhat.com/show_bug.cgi?id=978603, https://bugzilla.redhat.com/show_bug.cgi?id=981846
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310641" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Number of attachments</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310640" key="com.atlassian.jira.toolkit:comments">
                        <customfieldname>Number of comments</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>11.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311940" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1|hzhhfz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310840" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>162423</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>