<!-- 
RSS generated by JIRA (7.2.3#72005-sha1:73be91d2b96fc29303a7eb6820acf420e5d0ed65) at Tue Dec 06 12:16:16 EST 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.jboss.org/si/jira.issueviews:issue-xml/WFLY-5536/WFLY-5536.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>JBoss Issue Tracker</title>
    <link>https://issues.jboss.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>7.2.3</version>
        <build-number>72005</build-number>
        <build-date>06-10-2016</build-date>
    </build-info>

<item>
            <title>[WFLY-5536] Recovery manager is not able to recover MDB and shows warnings on each run.</title>
                <link>https://issues.jboss.org/browse/WFLY-5536</link>
                <project id="12313721" key="WFLY">WildFly</project>
                    <description>&lt;p&gt;Recovery manager is not able to recover MDB and shows warnings.&lt;br/&gt;
This causes to see the same warning log in server each time recovery is run.&lt;br/&gt;
This happens when server is crashed before transaction state is saved.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12589385">WFLY-5536</key>
            <summary>Recovery manager is not able to recover MDB and shows warnings on each run.</summary>
                <type id="1" iconUrl="https://issues.jboss.org/secure/viewavatar?size=xsmall&amp;avatarId=13263&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.jboss.org/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.jboss.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Done</resolution>
                                        <assignee username="jmesnil">Jeff Mesnil</assignee>
                                    <reporter username="hhovsepy">Hayk Hovsepyan</reporter>
                        <labels>
                    </labels>
                <created>Fri, 16 Oct 2015 03:35:10 -0400</created>
                <updated>Tue, 22 Dec 2015 04:18:31 -0500</updated>
                            <resolved>Tue, 22 Dec 2015 04:18:31 -0500</resolved>
                                    <version>10.0.0.CR2</version>
                                    <fixVersion>10.0.0.CR5</fixVersion>
                                    <component>JMS</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                <comments>
                            <comment id="13118943" author="hhovsepy" created="Fri, 16 Oct 2015 03:39:00 -0400"  >&lt;p&gt;The cause of this issue is still under investigation.&lt;/p&gt;

&lt;p&gt;The issue was discussed with Jeff Mesnil.&lt;/p&gt;</comment>
                            <comment id="13119011" author="hhovsepy" created="Fri, 16 Oct 2015 07:03:05 -0400"  >&lt;p&gt;From debugging the server side code, I can see that &lt;p/&gt;
&lt;div id=&quot;syntaxplugin&quot; class=&quot;syntaxplugin&quot; style=&quot;border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;&quot;&gt;
&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; border=&quot;0&quot; width=&quot;100%&quot; style=&quot;font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;&quot;&gt;
		&lt;tbody &gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;  margin-top: 10px;   margin-bottom: 10px;  width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;org.apache.activemq.artemis.service.extensions.xa.ActiveMQXAResourceWrapperImpl.jndiNameNodeId&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
			&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;p/&gt; variable has &quot;null&quot; NodeId part when message is received in MDB.&lt;/p&gt;</comment>
                            <comment id="13119988" author="jmesnil" created="Tue, 20 Oct 2015 09:52:27 -0400"  >&lt;p&gt;According to the tests, we have:&lt;/p&gt;

&lt;p&gt;8. Crash JVM and undeploy MDB.&lt;br/&gt;
9. Restart the server and start recovery.&lt;br/&gt;
10. TestXA resource is committed&lt;br/&gt;
11. Recovery manager logs warning messages for MDB JMS XA resource each time it is started (txn log record about MDB JMS XA still exist in transaction log store on EAP side)&lt;/p&gt;

&lt;p&gt;When the server is restarted at (9), the MDB is no longer deployed. The recovery manager will never be able to recover as the  XAResource it is trying to recover was bound to the MDB that is undeployed.&lt;/p&gt;</comment>
                            <comment id="13120064" author="hhovsepy" created="Tue, 20 Oct 2015 11:15:13 -0400"  >&lt;p&gt;Hi Jeff,&lt;/p&gt;

&lt;p&gt;We have changed the scenario, so now it does not undeploy MDB after crash.&lt;br/&gt;
I have updated it in reproduce steps as well.&lt;/p&gt;

&lt;p&gt;Now the code can be cloned from mirror git: &quot;git clone -b JMS-MDB-LOG  --single-branch git://git.app.eng.bos.redhat.com/jbossqe-eap-tests-transactions.git tests-transactions&quot;&lt;/p&gt;

&lt;p&gt;/Hayk&lt;/p&gt;</comment>
                            <comment id="13121530" author="jmesnil" created="Fri, 23 Oct 2015 10:15:49 -0400"  >&lt;p&gt;I debug this test case and there looks to be something suspicious. If I print the xaResourceProperties properties at &lt;a href=&quot;https://github.com/apache/activemq-artemis/blob/master/artemis-ra/src/main/java/org/apache/activemq/artemis/ra/inflow/ActiveMQMessageHandler.java#L181&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/activemq-artemis/blob/master/artemis-ra/src/main/java/org/apache/activemq/artemis/ra/inflow/ActiveMQMessageHandler.java#L181&lt;/a&gt;, when the MDB is deployed, it prints:&lt;/p&gt;

&lt;p/&gt;
&lt;div id=&quot;syntaxplugin&quot; class=&quot;syntaxplugin&quot; style=&quot;border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;&quot;&gt;
&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; border=&quot;0&quot; width=&quot;100%&quot; style=&quot;font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;&quot;&gt;
		&lt;tbody &gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;15:55:00,890 INFO  [org.jboss.as.ejb3] (MSC service thread 1-1) WFLYEJB0042: Started message driven bean &apos;JMSCrashMessageDrivenBean&apos; with &apos;activemq-ra.rar&apos; resource adapter&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;15:55:01,353 INFO  [stdout] (default-threads - 1) xaResourceProperties = {ACTIVEMQ_PRODUCT_VERSION=1.1.0.jboss-SNAPSHOT, ACTIVEMQ_PRODUCT_NAME=ActiveMQ Artemis, ACTIVEMQ_JNDI_ID=java:/JmsXA, ACTIVEMQ_NODE_ID=null}&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;15:55:01,367 INFO  [stdout] (default-threads - 1) xaResourceProperties = {ACTIVEMQ_PRODUCT_VERSION=1.1.0.jboss-SNAPSHOT, ACTIVEMQ_PRODUCT_NAME=ActiveMQ Artemis, ACTIVEMQ_JNDI_ID=java:/JmsXA, ACTIVEMQ_NODE_ID=94d9f5e8-798d-11e5-a743-11fedbafb53e}&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;15:55:01,372 INFO  [stdout] (default-threads - 1) xaResourceProperties = {ACTIVEMQ_PRODUCT_VERSION=1.1.0.jboss-SNAPSHOT, ACTIVEMQ_PRODUCT_NAME=ActiveMQ Artemis, ACTIVEMQ_JNDI_ID=java:/JmsXA, ACTIVEMQ_NODE_ID=94d9f5e8-798d-11e5-a743-11fedbafb53e}&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;15:55:01,376 INFO  [stdout] (default-threads - 1) xaResourceProperties = {ACTIVEMQ_PRODUCT_VERSION=1.1.0.jboss-SNAPSHOT, ACTIVEMQ_PRODUCT_NAME=ActiveMQ Artemis, ACTIVEMQ_JNDI_ID=java:/JmsXA, ACTIVEMQ_NODE_ID=94d9f5e8-798d-11e5-a743-11fedbafb53e}&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;15:55:01,381 INFO  [stdout] (default-threads - 1) xaResourceProperties = {ACTIVEMQ_PRODUCT_VERSION=1.1.0.jboss-SNAPSHOT, ACTIVEMQ_PRODUCT_NAME=ActiveMQ Artemis, ACTIVEMQ_JNDI_ID=java:/JmsXA, ACTIVEMQ_NODE_ID=94d9f5e8-798d-11e5-a743-11fedbafb53e}&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;15:55:01,386 INFO  [stdout] (default-threads - 1) xaResourceProperties = {ACTIVEMQ_PRODUCT_VERSION=1.1.0.jboss-SNAPSHOT, ACTIVEMQ_PRODUCT_NAME=ActiveMQ Artemis, ACTIVEMQ_JNDI_ID=java:/JmsXA, ACTIVEMQ_NODE_ID=94d9f5e8-798d-11e5-a743-11fedbafb53e}&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;15:55:01,391 INFO  [stdout] (default-threads - 1) xaResourceProperties = {ACTIVEMQ_PRODUCT_VERSION=1.1.0.jboss-SNAPSHOT, ACTIVEMQ_PRODUCT_NAME=ActiveMQ Artemis, ACTIVEMQ_JNDI_ID=java:/JmsXA, ACTIVEMQ_NODE_ID=94d9f5e8-798d-11e5-a743-11fedbafb53e}&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;15:55:01,397 INFO  [stdout] (default-threads - 1) xaResourceProperties = {ACTIVEMQ_PRODUCT_VERSION=1.1.0.jboss-SNAPSHOT, ACTIVEMQ_PRODUCT_NAME=ActiveMQ Artemis, ACTIVEMQ_JNDI_ID=java:/JmsXA, ACTIVEMQ_NODE_ID=94d9f5e8-798d-11e5-a743-11fedbafb53e}&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;15:55:01,402 INFO  [stdout] (default-threads - 1) xaResourceProperties = {ACTIVEMQ_PRODUCT_VERSION=1.1.0.jboss-SNAPSHOT, ACTIVEMQ_PRODUCT_NAME=ActiveMQ Artemis, ACTIVEMQ_JNDI_ID=java:/JmsXA, ACTIVEMQ_NODE_ID=94d9f5e8-798d-11e5-a743-11fedbafb53e}&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;15:55:01,406 INFO  [stdout] (default-threads - 1) xaResourceProperties = {ACTIVEMQ_PRODUCT_VERSION=1.1.0.jboss-SNAPSHOT, ACTIVEMQ_PRODUCT_NAME=ActiveMQ Artemis, ACTIVEMQ_JNDI_ID=java:/JmsXA, ACTIVEMQ_NODE_ID=94d9f5e8-798d-11e5-a743-11fedbafb53e}&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;15:55:01,410 INFO  [stdout] (default-threads - 1) xaResourceProperties = {ACTIVEMQ_PRODUCT_VERSION=1.1.0.jboss-SNAPSHOT, ACTIVEMQ_PRODUCT_NAME=ActiveMQ Artemis, ACTIVEMQ_JNDI_ID=java:/JmsXA, ACTIVEMQ_NODE_ID=94d9f5e8-798d-11e5-a743-11fedbafb53e}&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;15:55:01,415 INFO  [stdout] (default-threads - 1) xaResourceProperties = {ACTIVEMQ_PRODUCT_VERSION=1.1.0.jboss-SNAPSHOT, ACTIVEMQ_PRODUCT_NAME=ActiveMQ Artemis, ACTIVEMQ_JNDI_ID=java:/JmsXA, ACTIVEMQ_NODE_ID=94d9f5e8-798d-11e5-a743-11fedbafb53e}&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;15:55:01,419 INFO  [stdout] (default-threads - 1) xaResourceProperties = {ACTIVEMQ_PRODUCT_VERSION=1.1.0.jboss-SNAPSHOT, ACTIVEMQ_PRODUCT_NAME=ActiveMQ Artemis, ACTIVEMQ_JNDI_ID=java:/JmsXA, ACTIVEMQ_NODE_ID=94d9f5e8-798d-11e5-a743-11fedbafb53e}&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;15:55:01,423 INFO  [stdout] (default-threads - 1) xaResourceProperties = {ACTIVEMQ_PRODUCT_VERSION=1.1.0.jboss-SNAPSHOT, ACTIVEMQ_PRODUCT_NAME=ActiveMQ Artemis, ACTIVEMQ_JNDI_ID=java:/JmsXA, ACTIVEMQ_NODE_ID=94d9f5e8-798d-11e5-a743-11fedbafb53e}&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;15:55:01,423 INFO  [org.jboss.as.server] (Controller Boot Thread) WFLYSRV0010: Deployed &quot;crashrecovery-jms-with-mdb.jar&quot; (runtime-name : &quot;crashrecovery-jms-with-mdb.jar&quot;)&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;15:55:01,426 INFO  [stdout] (default-threads - 1) xaResourceProperties = {ACTIVEMQ_PRODUCT_VERSION=1.1.0.jboss-SNAPSHOT, ACTIVEMQ_PRODUCT_NAME=ActiveMQ Artemis, ACTIVEMQ_JNDI_ID=java:/JmsXA, ACTIVEMQ_NODE_ID=94d9f5e8-798d-11e5-a743-11fedbafb53e}&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
			&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;p/&gt;

&lt;p&gt;The 1st message handle in the pool as a &quot;null&quot; ACTIVEMQ_NODE_ID while all others have &quot;94d9f5e8-798d-11e5-a743-11fedbafb53e&quot;.&lt;/p&gt;

&lt;p&gt;I think the issue is related to this null value.&lt;br/&gt;
The message handler&apos;s with the null nodeID is the one receiving the message. So its XAResource will have the null value. It looks like that during recovery Artemis will not use this xaresource has it does not match its nodeID...&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.jboss.org/secure/ViewProfile.jspa?name=ataylor&quot; class=&quot;user-hover&quot; rel=&quot;ataylor&quot;&gt;Andy Taylor&lt;/a&gt; does that make sense? I don&apos;t see any reason to have this null value for the first message handler. I suppose there is a race condition between setting up the message handler and setting the liveNodeId on the handler&apos;s clientSessionFactory...&lt;/p&gt;</comment>
                            <comment id="13121599" author="ataylor" created="Fri, 23 Oct 2015 11:19:37 -0400"  >&lt;p&gt;Yes Jeff, the node id is received later however this is only ever used for logging.&lt;/p&gt;

&lt;p&gt;What is happening is the server is crashing after Artemis has commited but before the Transaction Manager has deleted the TX log, therefore you see this message. The TX team usually suggest a manual user step to verify the state of the TX and delete the TX record manually.&lt;/p&gt;</comment>
                            <comment id="13121603" author="jmesnil" created="Fri, 23 Oct 2015 11:22:31 -0400"  >&lt;p&gt;Ok so if I understand you correctly, it is actually correct to have the tx record in the TM when recovery is started. And it&apos;s up to the user to manually remove it.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.jboss.org/secure/ViewProfile.jspa?name=hhovsepy&quot; class=&quot;user-hover&quot; rel=&quot;hhovsepy&quot;&gt;Hayk Hovsepyan&lt;/a&gt; could you liaise with the TD team to confirm that this is the expected behaviour and modify the test accordingly?&lt;/p&gt;</comment>
                            <comment id="13121619" author="hhovsepy" created="Fri, 23 Oct 2015 11:41:31 -0400"  >&lt;p&gt;What is the reason that after MDB is deployed the &quot;null&quot; &quot;nodeId&quot; is seen? Is it in resource adapter design?&lt;/p&gt;

&lt;p&gt;There was a similar issue for ActiveMQ which was fixed: &lt;a href=&quot;https://issues.jboss.org/browse/JBEAP-163&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.jboss.org/browse/JBEAP-163&lt;/a&gt;&lt;br/&gt;
The idea of that this issue was that Recovery Manager should not reach to situation when it can not recover on particular xa resource () and manual intervention is needed.&lt;/p&gt;</comment>
                            <comment id="13121796" author="ataylor" created="Sun, 25 Oct 2015 03:48:11 -0400"  >&lt;p&gt;The Null is seen because the client does not have the information sent to it after the connection is opened, however this isonly used for logging and has no effect what ever.&lt;/p&gt;

&lt;p&gt;The Jira you mentioned has nothing to do with recovering and not needing manual intervention. To re iterate what I said before, there are scenarios where the Recovery Manager can&apos;t recover a particular resource or can not find the outcome of a particular resource, manual intervention is needed in some cases. These are well defined scenarios. In this case if a call to commit never returns but the transaction was commited by the resource manager then its impossible for the Recovery manager to know whether a) the TX was commited or b) there is no current connection to the Resource Manager that still has this TX unhandled.&lt;/p&gt;

&lt;p&gt;You should close this Jira or if you need further a explanation of Transaction semantics transfer it to the TX team.&lt;/p&gt;</comment>
                            <comment id="13121867" author="tomjenkinson" created="Mon, 26 Oct 2015 06:17:30 -0400"  >&lt;p&gt;I think this is one of the cases we expected to be fixed in &lt;a href=&quot;https://issues.jboss.org/browse/JBTM-860&quot; title=&quot;use XAResourceWrapper metadata for assume complete&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JBTM-860&quot;&gt;&lt;del&gt;JBTM-860&lt;/del&gt;&lt;/a&gt;? Maybe &lt;a href=&quot;https://issues.jboss.org/secure/ViewProfile.jspa?name=martyn-taylor&quot; class=&quot;user-hover&quot; rel=&quot;martyn-taylor&quot;&gt;Martyn Taylor&lt;/a&gt; has input? Its not that the resource needs recovering, it prevents the log message being printed and allows the log to be removed.&lt;/p&gt;</comment>
                            <comment id="13122762" author="martyn-taylor" created="Wed, 28 Oct 2015 05:34:52 -0400"  >&lt;p&gt;IIUC the only thing the TM needs from the XAResourceWrapper.getJNDI is a unique string that identifies the resource manager.  In Artemis it is possible to have a single connection factory (with a single JNDI) talk to multiple servers (resource managers) for example in a clustered environment.  This is the reason we append the NodeID to the JNDI name.  It is a bit of a hack imo but this is the solution we agreed on with TX and Artemis guys.   &lt;/p&gt;

&lt;p&gt;The JNDI name is still present in this scenario from what I can see from &lt;a href=&quot;https://issues.jboss.org/secure/ViewProfile.jspa?name=jmesnil&quot; class=&quot;user-hover&quot; rel=&quot;jmesnil&quot;&gt;Jeff Mesnil&lt;/a&gt; post which should be enough information for the TM.  So I can not see any reason why it should fail to remove the log entry.  That said I will replicate this locally and see if there is another underlying issue with Artemis XAResources.&lt;/p&gt;</comment>
                            <comment id="13122924" author="ataylor" created="Wed, 28 Oct 2015 10:20:27 -0400"  >&lt;p&gt;&lt;a href=&quot;https://issues.jboss.org/secure/ViewProfile.jspa?name=hhovsepy&quot; class=&quot;user-hover&quot; rel=&quot;hhovsepy&quot;&gt;Hayk Hovsepyan&lt;/a&gt;  I have managed to run the test however I need to attach a debugger to the server orchestrating the recovery, could you provide details as to how to do this, ive tried updating the arquillian config but this is ignored.&lt;/p&gt;</comment>
                            <comment id="13123110" author="hhovsepy" created="Thu, 29 Oct 2015 02:56:04 -0400"  >&lt;p&gt;&lt;a href=&quot;https://issues.jboss.org/secure/ViewProfile.jspa?name=ataylor&quot; class=&quot;user-hover&quot; rel=&quot;ataylor&quot;&gt;Andy Taylor&lt;/a&gt; for debugging the test and server side running, it requires to provide these two maven options while running the test &quot;-Dmaven.surefire.debug -Ddebug.client&quot;.&lt;/p&gt;

&lt;p&gt;&quot;-Dmaven.surefire.debug&quot; option is for debugging the test, and test run waits for the port &quot;5005&quot; to be connected by IDE.&lt;br/&gt;
&quot;-Ddebug.client&quot; option debugs the server side running, such as recovery manager, and it waits for the port &quot;8787&quot; to be connected by IDE. However it could not log any message that is waiting for connection to port.&lt;/p&gt;
</comment>
                            <comment id="13123928" author="jmesnil" created="Fri, 30 Oct 2015 12:44:20 -0400"  >&lt;p&gt;There was an issue in the WildFly module definitions and the Artemis RA was using the default Artemis XAResourceWrapper instead of the one specific to WildFly.&lt;/p&gt;

&lt;p&gt;Before, the trace was:&lt;/p&gt;

&lt;p/&gt;
&lt;div id=&quot;syntaxplugin&quot; class=&quot;syntaxplugin&quot; style=&quot;border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;&quot;&gt;
&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; border=&quot;0&quot; width=&quot;100%&quot; style=&quot;font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;&quot;&gt;
		&lt;tbody &gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;  margin-top: 10px;   margin-bottom: 10px;  width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;16:58:57,500 TRACE [org.apache.activemq.artemis.ra] (EJB default - 2) XAResource=org.apache.activemq.artemis.service.extensions.xa.ActiveMQXAResourceWrapperImpl@3696bea&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
			&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;p/&gt;

&lt;p&gt;After the change (to import the services defined in the messaging-activemq extension) in &lt;a href=&quot;https://github.com/wildfly/wildfly/compare/master...jmesnil:WFLY-5536_recovery_manager&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/wildfly/wildfly/compare/master...jmesnil:WFLY-5536_recovery_manager&lt;/a&gt;, I now see:&lt;/p&gt;

&lt;p/&gt;
&lt;div id=&quot;syntaxplugin&quot; class=&quot;syntaxplugin&quot; style=&quot;border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;&quot;&gt;
&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; border=&quot;0&quot; width=&quot;100%&quot; style=&quot;font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;&quot;&gt;
		&lt;tbody &gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;  margin-top: 10px;   margin-bottom: 10px;  width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;17:17:26,576 TRACE [org.apache.activemq.artemis.ra] (EJB default - 4) XAResource=org.jboss.activemq.artemis.wildfly.integration.WildFlyActiveMQXAResourceWrapper@7cd8de4e&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
			&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;p/&gt;

&lt;p&gt;This org.jboss.activemq.artemis.wildfly.integration.WildFlyActiveMQXAResourceWrapper class implants org.jboss.tm.XAResourceWrapper while its superclass is not implementing it.&lt;/p&gt;

&lt;p&gt;However even with that change, the test is still failing.&lt;/p&gt;

&lt;p&gt;For one transaction I can see that the Artemis RA start, ends and commits its xares:&lt;/p&gt;

&lt;p/&gt;
&lt;div id=&quot;syntaxplugin&quot; class=&quot;syntaxplugin&quot; style=&quot;border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;&quot;&gt;
&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; border=&quot;0&quot; width=&quot;100%&quot; style=&quot;font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;&quot;&gt;
		&lt;tbody &gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;17:16:03,598 TRACE [org.apache.activemq.artemis.ra] (EJB default - 5) start(&amp;lt; formatId=131077, gtrid_length=29, bqual_length=36, tx_uid=0:ffffc0a80104:2ff694c:563397b2:1d, node_name=1, branch_uid=0:ffffc0a80104:2ff694c:563397b2:22, subordinatenodename=null, eis_name=java:/JmsXA NodeId:7a934c2e-7f21-11e5-83e2-a7afda8ee76d &amp;gt;, 0)&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;...&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;17:16:03,616 TRACE [org.apache.activemq.artemis.ra] (EJB default - 5) end(&amp;lt; formatId=131077, gtrid_length=29, bqual_length=36, tx_uid=0:ffffc0a80104:2ff694c:563397b2:1d, node_name=1, branch_uid=0:ffffc0a80104:2ff694c:563397b2:22, subordinatenodename=null, eis_name=java:/JmsXA NodeId:7a934c2e-7f21-11e5-83e2-a7afda8ee76d &amp;gt;, 67108864)&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;...&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;17:16:03,618 TRACE [org.apache.activemq.artemis.ra] (EJB default - 5) commit(&amp;lt; formatId=131077, gtrid_length=29, bqual_length=36, tx_uid=0:ffffc0a80104:2ff694c:563397b2:1d, node_name=1, branch_uid=0:ffffc0a80104:2ff694c:563397b2:22, subordinatenodename=null, eis_name=java:/JmsXA NodeId:7a934c2e-7f21-11e5-83e2-a7afda8ee76d &amp;gt;, true)&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
			&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;p/&gt;

&lt;p&gt;But for the transaction that&apos;s making the test fail (0:ffffc0a80104:2ff694c:563397b2:25), I see not such start/end/commit logs.&lt;br/&gt;
I only see:&lt;/p&gt;

&lt;p/&gt;
&lt;div id=&quot;syntaxplugin&quot; class=&quot;syntaxplugin&quot; style=&quot;border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;&quot;&gt;
&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; border=&quot;0&quot; width=&quot;100%&quot; style=&quot;font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;&quot;&gt;
		&lt;tbody &gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;  margin-top: 10px;   margin-bottom: 10px;  width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;17:16:36,390 WARN  [com.arjuna.ats.jta] (Periodic Recovery) ARJUNA016037: Could not find new XAResource to use for recovering non-serializable XAResource XAResourceRecord &amp;lt; resource:null, txid:&amp;lt; formatId=131077, gtrid_length=29, bqual_length=36, tx_uid=0:ffffc0a80104:2ff694c:563397b2:25, node_name=1, branch_uid=0:ffffc0a80104:2ff694c:563397b2:28, subordinatenodename=null, eis_name=java:/JmsXA NodeId:null &amp;gt;, heuristic: TwoPhaseOutcome.FINISH_OK, product: ActiveMQ Artemis/1.1.0.wildfly.007, jndiName: java:/JmsXA NodeId:null com.arjuna.ats.internal.jta.resources.arjunacore.XAResourceRecord@eabf2ff &amp;gt;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
			&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;p/&gt; </comment>
                            <comment id="13123929" author="jmesnil" created="Fri, 30 Oct 2015 12:45:06 -0400"  >&lt;p&gt;log for tests related to comment &lt;a href=&quot;https://issues.jboss.org/browse/WFLY-5536?focusedCommentId=13123928&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13123928&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.jboss.org/browse/WFLY-5536?focusedCommentId=13123928&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13123928&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13124201" author="jmesnil" created="Mon, 2 Nov 2015 05:38:34 -0500"  >&lt;p&gt;PR for master branch&lt;/p&gt;</comment>
                            <comment id="13124660" author="ataylor" created="Tue, 3 Nov 2015 05:56:41 -0500"  >&lt;p&gt;&lt;a href=&quot;https://issues.jboss.org/secure/ViewProfile.jspa?name=jmesnil&quot; class=&quot;user-hover&quot; rel=&quot;jmesnil&quot;&gt;Jeff Mesnil&lt;/a&gt; your fix is fine, there was another issue related to &lt;a href=&quot;https://issues.apache.org/jira/browse/ARTEMIS-292&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/ARTEMIS-292&lt;/a&gt; which ive fixed and the test works.&lt;/p&gt;</comment>
                            <comment id="13143585" author="jmesnil" created="Tue, 22 Dec 2015 04:18:31 -0500"  >&lt;p&gt;PR merged in master branch&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310120">
                    <name>Cloners</name>
                                            <outwardlinks description="cloned from">
                                        <issuelink>
            <issuekey id="12589384">JBEAP-1497</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12394008" name="MDB_JMS_XA.log" size="487447" author="hhovsepy" created="Fri, 16 Oct 2015 03:37:30 -0400"/>
                            <attachment id="12394502" name="TEST-org.jboss.as.test.jbossts.crashrec.test.JMSMdbCrashRecoveryTestCase-jta.xml" size="597271" author="jmesnil" created="Fri, 30 Oct 2015 12:44:59 -0400"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="org.jboss.labs.jira.plugin.jboss-custom-field-types-plugin:multiurl">
                        <customfieldname>Git Pull Request</customfieldname>
                        <customfieldvalues>
                            https://github.com/wildfly/wildfly/pull/8366
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310641" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Number of attachments</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310640" key="com.atlassian.jira.toolkit:comments">
                        <customfieldname>Number of comments</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311940" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1|hzz5dz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310840" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310183" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Steps to Reproduce</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;When MDB Inbound connection  enlisted on 2PC, and server crashes before TX save state is called,  Recovery manager is not able to proceed the log about JMS MDB XA  resource and shows warning messages on each time it runs.&lt;/p&gt;

&lt;p&gt;1. Enlist MDB JMS XA resource for Inbound connection.&lt;br/&gt;
2. Enlist TestXA resource.&lt;br/&gt;
3. 2PC starts prepare phase&lt;br/&gt;
4. Prepare MDB JMS XA resource.(txn log created on broker side)&lt;br/&gt;
5. Prepare TestXA resource.&lt;br/&gt;
6. 2PC starts commit phase&lt;br/&gt;
7. MDB JMS XA resource is committed.(txn log erased on broker side)&lt;br/&gt;
8. Crash JVM.&lt;br/&gt;
9. Restart the server and start recovery.&lt;br/&gt;
10. TestXA resource is committed&lt;br/&gt;
11. Recovery manager logs warning messages for MDB JMS XA resource each time it is started (txn log record about MDB JMS XA still exist in transaction log store on EAP side)&lt;/p&gt;
&lt;p/&gt;
&lt;div id=&quot;syntaxplugin&quot; class=&quot;syntaxplugin&quot; style=&quot;border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;&quot;&gt;
&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; border=&quot;0&quot; width=&quot;100%&quot; style=&quot;font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;&quot;&gt;
		&lt;tbody &gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;14:50:04,897 WARN  [com.arjuna.ats.jta] (Periodic Recovery) ARJUNA016037: Could not find new XAResource to use for recovering non-serializable XAResource XAResourceRecord &amp;lt; resource:null, txid:&amp;lt; formatId=131077, gtrid_length=29, bqual_length=36, tx_uid=0:ffff7f000001:718d19b:561fa0a5:25, node_name=1, branch_uid=0:ffff7f000001:718d19b:561fa0a5:26, subordinatenodename=null, eis_name=unknown eis name &amp;gt;, heuristic: TwoPhaseOutcome.FINISH_OK com.arjuna.ats.internal.jta.resources.arjunacore.XAResourceRecord@2a6e6c5 &amp;gt;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;14:50:04,897 WARN  [com.arjuna.ats.jta] (Periodic Recovery) ARJUNA016038: No XAResource to recover &amp;lt; formatId=131077, gtrid_length=29, bqual_length=36, tx_uid=0:ffff7f000001:718d19b:561fa0a5:25, node_name=1, branch_uid=0:ffff7f000001:718d19b:561fa0a5:26, subordinatenodename=null, eis_name=unknown eis name &amp;gt;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
			&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;p/&gt;

&lt;p&gt;Possible cause of issue is because eis_name is unknown, as shown in logs.&lt;/p&gt;

&lt;p&gt;Full log of server is attached.&lt;/p&gt;

&lt;p&gt;The issue can be reproduced via automated test case.&lt;br/&gt;
1. Clone the repo: &quot;git clone -b JMS-MDB-LOG  --single-branch git://git.app.eng.bos.redhat.com/jbossqe-eap-tests-transactions.git tests-transactions&quot;&lt;br/&gt;
2. Change directory: &quot;cd tests-transactions/jbossts/&quot;&lt;br/&gt;
3. Run test: &quot;mvn clean verify -Djboss.dist=$JBOSS_HOME -Dtest=JMSMdbCrashRecoveryTestCase#commitHaltFirst&quot;&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>