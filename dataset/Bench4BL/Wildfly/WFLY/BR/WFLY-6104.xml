<!-- 
RSS generated by JIRA (7.2.3#72005-sha1:73be91d2b96fc29303a7eb6820acf420e5d0ed65) at Tue Dec 06 14:28:22 EST 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.jboss.org/si/jira.issueviews:issue-xml/WFLY-6104/WFLY-6104.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>JBoss Issue Tracker</title>
    <link>https://issues.jboss.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>7.2.3</version>
        <build-number>72005</build-number>
        <build-date>06-10-2016</build-date>
    </build-info>

<item>
            <title>[WFLY-6104] Too many invocations to a remote EJB from multiple threads cause infinite wait</title>
                <link>https://issues.jboss.org/browse/WFLY-6104</link>
                <project id="12313721" key="WFLY">WildFly</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=1302181&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://bugzilla.redhat.com/show_bug.cgi?id=1302181&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  While a thread (1) of EJB client invokes a remote EJB which needs long&lt;br/&gt;
  processing time and wait for the response, if the other threads complete&lt;br/&gt;
  more than 65536 invocations to the remote EJB, EJBCLIENT000011 message like&lt;br/&gt;
  below occurs in EJB client side and the waiting thread (1) falls into&lt;br/&gt;
  infinite wait for the response.&lt;/p&gt;

&lt;p&gt;    INFO: EJBCLIENT000011: Discarding result for invocation id 0 since no&lt;br/&gt;
    waiting context found&lt;/p&gt;

&lt;p&gt;  All invocations should successfully complete regardless of the number of&lt;br/&gt;
  invocations.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12601999">WFLY-6104</key>
            <summary>Too many invocations to a remote EJB from multiple threads cause infinite wait</summary>
                <type id="1" iconUrl="https://issues.jboss.org/secure/viewavatar?size=xsmall&amp;avatarId=13263&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.jboss.org/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.jboss.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Done</resolution>
                                        <assignee username="thofman">Tomas Hofman</assignee>
                                    <reporter username="thofman">Tomas Hofman</reporter>
                        <labels>
                    </labels>
                <created>Mon, 1 Feb 2016 06:39:43 -0500</created>
                <updated>Thu, 5 May 2016 08:02:23 -0400</updated>
                            <resolved>Fri, 4 Mar 2016 07:14:51 -0500</resolved>
                                    <version>10.0.0.Final</version>
                                                    <component>Remoting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13165584" author="jira-bugzilla-migration" created="Fri, 19 Feb 2016 04:41:59 -0500"  >&lt;p&gt;Tomas Hofman &amp;lt;thofman@redhat.com&amp;gt; changed the Status of &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=1302181&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 1302181&lt;/a&gt; from ASSIGNED to POST&lt;/p&gt;</comment>
                            <comment id="13168746" author="jira-bugzilla-migration" created="Fri, 26 Feb 2016 03:26:10 -0500"  >&lt;p&gt;Tomas Hofman &amp;lt;thofman@redhat.com&amp;gt; changed the Status of &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=1302181&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 1302181&lt;/a&gt; from POST to MODIFIED&lt;/p&gt;</comment>
                            <comment id="13196398" author="jira-bugzilla-migration" created="Mon, 25 Apr 2016 06:12:53 -0400"  >&lt;p&gt;Vladimir Dosoudil &amp;lt;dosoudil@redhat.com&amp;gt; changed the Status of &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=1302181&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 1302181&lt;/a&gt; from MODIFIED to ON_QA&lt;/p&gt;</comment>
                            <comment id="13201510" author="jira-bugzilla-migration" created="Thu, 5 May 2016 08:02:23 -0400"  >&lt;p&gt;Peter Mackay &amp;lt;pmackay@redhat.com&amp;gt; changed the Status of &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=1302181&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;bug 1302181&lt;/a&gt; from ON_QA to VERIFIED&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310220">
                    <name>Causality</name>
                                            <outwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="12601814">EJBCLIENT-153</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310120">
                    <name>Cloners</name>
                                            <outwardlinks description="cloned from">
                                        <issuelink>
            <issuekey id="12601812">JBEAP-3097</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310440" key="org.jboss.labs.jira.plugin.jboss-custom-field-types-plugin:multiurl">
                        <customfieldname>Bugzilla References</customfieldname>
                        <customfieldvalues>
                            https://bugzilla.redhat.com/show_bug.cgi?id=1302181, https://bugzilla.redhat.com/show_bug.cgi?id=1316380
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310341" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bugzilla Update</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10250"><![CDATA[Perform]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="org.jboss.labs.jira.plugin.jboss-custom-field-types-plugin:multiurl">
                        <customfieldname>Git Pull Request</customfieldname>
                        <customfieldvalues>
                            https://github.com/jbossas/jboss-ejb-client/pull/135
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310641" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Number of attachments</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310640" key="com.atlassian.jira.toolkit:comments">
                        <customfieldname>Number of comments</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311940" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1|i0163b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310840" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310183" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Steps to Reproduce</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;  Use the reproducer remote-ejb-EJBCLIENT000011.zip attached.&lt;/p&gt;

&lt;p&gt;  The overview of this reproducer:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;The first thread starts and invokes the remote EJB which needs long&lt;br/&gt;
      processing time.  ..... (1)&lt;/li&gt;
	&lt;li&gt;After that, the second thread starts and repeats invocation to the remote&lt;br/&gt;
      EJB more than 65536 times before (1) finishes.  ..... (2)&lt;br/&gt;
      Each invocation to the remote EJB in (2) completes in a short period&lt;br/&gt;
      of time.&lt;/li&gt;
	&lt;li&gt;Once the remote EJB in (1) finishes its work, EJBCLIENT000011 message&lt;br/&gt;
      occurs from the EJB client.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;  Steps to reproduce is as follows:&lt;/p&gt;

&lt;p&gt;    1. Start a standalone EAP server.&lt;br/&gt;
    2. Extract remote-ejb-EJBCLIENT000011.zip.&lt;br/&gt;
    3. Build the reproducer.  ..... (*1)&lt;/p&gt;

&lt;p&gt;        $ cd remote-ejb-EJBCLIENT000011&lt;br/&gt;
        $ mvn package&lt;/p&gt;

&lt;p&gt;    4. Deploy remote-ejb-EJBCLIENT000011-1.0.0.jar.&lt;br/&gt;
    5. Run TestMain.  ..... (*3)&lt;br/&gt;
       2 or 3 minites later after starting TestMain, EJBCLIENT000011 message&lt;br/&gt;
       will occur and TestMain will not end because of the first thread&apos;s&lt;br/&gt;
       infinite wait for response.&lt;/p&gt;

&lt;p&gt;    (*1) Before execute mvn, modify providerIpPort at FIXME in&lt;br/&gt;
         src/test/java/TestMain.java appropriately.&lt;br/&gt;
    (*2) Run add-user.sh to add an application user.&lt;br/&gt;
         (Username &quot;jboss&quot; and password &quot;jbossjboss#2&quot;)&lt;br/&gt;
    (*3) For reference, see run_test.sh in remote-ejb-EJBCLIENT000011 I used&lt;br/&gt;
         for running TestMain. You can use it by making modification&lt;br/&gt;
         appropriately.&lt;/p&gt;


&lt;p&gt;Actual results:&lt;/p&gt;

&lt;p&gt;    The first thread of TestMain waits for the response of the invocation&lt;br/&gt;
    indefinitely and TestMain never ends.&lt;/p&gt;


&lt;p&gt;Expected results:&lt;/p&gt;

&lt;p&gt;    The first thread of TestMain receives the response of the invocation and&lt;br/&gt;
    TestMain successfully ends.&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>