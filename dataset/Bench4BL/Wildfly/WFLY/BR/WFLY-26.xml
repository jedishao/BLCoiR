<!-- 
RSS generated by JIRA (7.2.3#72005-sha1:73be91d2b96fc29303a7eb6820acf420e5d0ed65) at Tue Dec 06 13:51:29 EST 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.jboss.org/si/jira.issueviews:issue-xml/WFLY-26/WFLY-26.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>JBoss Issue Tracker</title>
    <link>https://issues.jboss.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>7.2.3</version>
        <build-number>72005</build-number>
        <build-date>06-10-2016</build-date>
    </build-info>

<item>
            <title>[WFLY-26] Stateful session bean causes NPE when using container interceptor</title>
                <link>https://issues.jboss.org/browse/WFLY-26</link>
                <project id="12313721" key="WFLY">WildFly</project>
                    <description>&lt;p&gt;Add a container interceptor in jboss-ejb3.xml and deploy. The deployment fails with a NPE. &lt;/p&gt;

&lt;p&gt;The issue occurs for a stateful session bean (that contains no timer methods, please see the forum thread)&lt;/p&gt;

&lt;p&gt;11:24:29,490 ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;org.jboss.msc.service.fail&amp;#93;&lt;/span&gt; (MSC service thread 1-3) MSC00001: Failed to start service jboss.deployment.unit.&quot;testtx.war&quot;.INSTALL: org.jboss.msc.service.StartException in service jboss.deployment.unit.&quot;testtx.war&quot;.INSTALL: JBAS018733: Failed to process phase INSTALL of deployment &quot;testtx.war&quot;&lt;br/&gt;
          at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:127) &lt;span class=&quot;error&quot;&gt;&amp;#91;jboss-as-server-7.2.0.Final.jar:7.2.0.Final&amp;#93;&lt;/span&gt;&lt;br/&gt;
          at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) &lt;span class=&quot;error&quot;&gt;&amp;#91;jboss-msc-1.0.4.GA.jar:1.0.4.GA&amp;#93;&lt;/span&gt;&lt;br/&gt;
          at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) &lt;span class=&quot;error&quot;&gt;&amp;#91;jboss-msc-1.0.4.GA.jar:1.0.4.GA&amp;#93;&lt;/span&gt;&lt;br/&gt;
          at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145) &lt;span class=&quot;error&quot;&gt;&amp;#91;rt.jar:1.7.0_17&amp;#93;&lt;/span&gt;&lt;br/&gt;
          at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615) &lt;span class=&quot;error&quot;&gt;&amp;#91;rt.jar:1.7.0_17&amp;#93;&lt;/span&gt;&lt;br/&gt;
          at java.lang.Thread.run(Thread.java:722) &lt;span class=&quot;error&quot;&gt;&amp;#91;rt.jar:1.7.0_17&amp;#93;&lt;/span&gt;&lt;br/&gt;
Caused by: org.jboss.as.server.deployment.DeploymentUnitProcessingException: JBAS011030: Could not configure component sample.RemoteStateful&lt;br/&gt;
          at org.jboss.as.ee.component.deployers.EEModuleConfigurationProcessor.deploy(EEModuleConfigurationProcessor.java:91)&lt;br/&gt;
          at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:120) &lt;span class=&quot;error&quot;&gt;&amp;#91;jboss-as-server-7.2.0.Final.jar:7.2.0.Final&amp;#93;&lt;/span&gt;&lt;br/&gt;
          ... 5 more&lt;br/&gt;
Caused by: java.lang.NullPointerException&lt;br/&gt;
          at org.jboss.as.ejb3.component.EJBContainerInterceptorsViewConfigurator.doConfigure(EJBContainerInterceptorsViewConfigurator.java:143)&lt;br/&gt;
          at org.jboss.as.ejb3.component.EJBContainerInterceptorsViewConfigurator.configure(EJBContainerInterceptorsViewConfigurator.java:104)&lt;br/&gt;
          at org.jboss.as.ee.component.ComponentDescription$DefaultComponentConfigurator.configure(ComponentDescription.java:929)&lt;br/&gt;
          at org.jboss.as.ee.component.deployers.EEModuleConfigurationProcessor.deploy(EEModuleConfigurationProcessor.java:80)&lt;br/&gt;
          ... 6 more&lt;/p&gt;

&lt;p&gt;It seems to happen when I configure the timeout in ejb-jar.xml which looks like this:&lt;/p&gt;

&lt;p&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;&lt;br/&gt;
&amp;lt;ejb-jar version=&quot;3.1&quot; xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot;&lt;br/&gt;
          xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&lt;br/&gt;
          xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee &lt;a href=&quot;http://java.sun.com/xml/ns/javaee/ejb-jar_3_1.xsd&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://java.sun.com/xml/ns/javaee/ejb-jar_3_1.xsd&lt;/a&gt;&quot;&amp;gt;&lt;br/&gt;
          &amp;lt;display-name&amp;gt;Test Server&amp;lt;/display-name&amp;gt;&lt;/p&gt;


&lt;p&gt;          &amp;lt;enterprise-beans&amp;gt;&lt;br/&gt;
                    &amp;lt;session&amp;gt;&lt;br/&gt;
                              &amp;lt;ejb-name&amp;gt;sample.RemoteStateful&amp;lt;/ejb-name&amp;gt;&lt;br/&gt;
                              &amp;lt;ejb-class&amp;gt;sample.StatefulSample&amp;lt;/ejb-class&amp;gt;&lt;br/&gt;
                              &amp;lt;session-type&amp;gt;Stateful&amp;lt;/session-type&amp;gt;&lt;br/&gt;
                              &amp;lt;stateful-timeout&amp;gt;&lt;br/&gt;
                                        &amp;lt;timeout&amp;gt;30&amp;lt;/timeout&amp;gt;&lt;br/&gt;
                                        &amp;lt;unit&amp;gt;Seconds&amp;lt;/unit&amp;gt;&lt;br/&gt;
                              &amp;lt;/stateful-timeout&amp;gt;&lt;br/&gt;
                    &amp;lt;/session&amp;gt;&lt;br/&gt;
          &amp;lt;/enterprise-beans&amp;gt;&lt;br/&gt;
&amp;lt;/ejb-jar&amp;gt;&lt;/p&gt;

&lt;p&gt;My jboss-ejb3.xml looks like this:&lt;/p&gt;

&lt;p&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;&lt;br/&gt;
&amp;lt;jboss:ejb-jar xmlns:jboss=&quot;http://www.jboss.com/xml/ns/javaee&quot;&lt;br/&gt;
    xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot;&lt;br/&gt;
    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&lt;br/&gt;
    xmlns:ci =&quot;urn:container-interceptors:1.0&quot;&lt;br/&gt;
    version=&quot;3.1&quot;&amp;gt;&lt;br/&gt;
    &amp;lt;assembly-descriptor xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot;&amp;gt;&lt;br/&gt;
        &amp;lt;ci:container-interceptors&amp;gt;&lt;br/&gt;
            &amp;lt;!-- Default interceptor --&amp;gt;&lt;br/&gt;
            &amp;lt;interceptor-binding&amp;gt;&lt;br/&gt;
                &amp;lt;ejb-name&amp;gt;*&amp;lt;/ejb-name&amp;gt;&lt;br/&gt;
                &amp;lt;interceptor-class&amp;gt;sample.EjbContainerInterceptor&amp;lt;/interceptor-class&amp;gt;&lt;br/&gt;
            &amp;lt;/interceptor-binding&amp;gt;           &lt;br/&gt;
        &amp;lt;/ci:container-interceptors&amp;gt;&lt;br/&gt;
    &amp;lt;/assembly-descriptor&amp;gt;   &lt;br/&gt;
&amp;lt;/jboss:ejb-jar&amp;gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12488912">WFLY-26</key>
            <summary>Stateful session bean causes NPE when using container interceptor</summary>
                <type id="1" iconUrl="https://issues.jboss.org/secure/viewavatar?size=xsmall&amp;avatarId=13263&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.jboss.org/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.jboss.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Done</resolution>
                                        <assignee username="jaikiran">jaikiran pai</assignee>
                                    <reporter username="raylite3">Kiran Anantha</reporter>
                        <labels>
                    </labels>
                <created>Tue, 9 Apr 2013 16:19:25 -0400</created>
                <updated>Thu, 16 May 2013 08:22:09 -0400</updated>
                            <resolved>Wed, 10 Apr 2013 02:02:05 -0400</resolved>
                                                    <fixVersion>8.0.0.Alpha1</fixVersion>
                                    <component>EJB</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="12765896" author="raylite3" created="Tue, 9 Apr 2013 16:20:49 -0400"  >&lt;p&gt;Attached a Eclipse project with my sample code.&lt;/p&gt;</comment>
                            <comment id="12765948" author="jaikiran" created="Wed, 10 Apr 2013 02:01:45 -0400"  >&lt;p&gt;Looking at the relevant code, this should be fixed in the latest nightly builds. Please give it a try against the latest version &lt;a href=&quot;https://community.jboss.org/thread/167590&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://community.jboss.org/thread/167590&lt;/a&gt; and if it&apos;s still an issue, please reopen the JIRA. I&apos;m closing this for now.&lt;/p&gt;</comment>
                            <comment id="12766297" author="raylite3" created="Wed, 10 Apr 2013 16:59:52 -0400"  >&lt;p&gt;Thanks, I will try it out. Is there a workaround for 7.2.0.Final?&lt;/p&gt;</comment>
                            <comment id="12774753" author="vschafer" created="Thu, 16 May 2013 08:22:09 -0400"  >&lt;p&gt;You can workaround the issue in 7.2.0 using element exclude-default-interceptors on the affected beans, e.g.:&lt;/p&gt;

&lt;p&gt;&amp;lt;ci:container-interceptors&amp;gt;&lt;br/&gt;
    &amp;lt;interceptor-binding&amp;gt;&lt;br/&gt;
        &amp;lt;ejb-name&amp;gt;*&amp;lt;/ejb-name&amp;gt;&lt;br/&gt;
        &amp;lt;interceptor-class&amp;gt;fi.company.SecurityInterceptor&amp;lt;/interceptor-class&amp;gt;&lt;br/&gt;
    &amp;lt;/interceptor-binding&amp;gt;&lt;br/&gt;
    &amp;lt;interceptor-binding&amp;gt;&lt;br/&gt;
        &amp;lt;ejb-name&amp;gt;MyStatefulBean&amp;lt;/ejb-name&amp;gt;&lt;br/&gt;
        &amp;lt;exclude-default-interceptors&amp;gt;true&amp;lt;/exclude-default-interceptors&amp;gt;&lt;br/&gt;
    &amp;lt;/interceptor-binding&amp;gt;&lt;br/&gt;
&amp;lt;/ci:container-interceptors&amp;gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12361786" name="testtx.zip" size="11708" author="raylite3" created="Tue, 9 Apr 2013 16:20:49 -0400"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310010" key="org.jboss.labs.jira.plugin.jboss-custom-field-types-plugin:multiurl">
                        <customfieldname>Forum Reference</customfieldname>
                        <customfieldvalues>
                            https://community.jboss.org/message/806609
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310641" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Number of attachments</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310640" key="com.atlassian.jira.toolkit:comments">
                        <customfieldname>Number of comments</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311940" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1|hzgfx3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310840" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>156365</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>