<?xml version = "1.0" encoding = "UTF-8" ?>
<bugrepository name="WFCORE">
	<bug id="5" opendate="2014-07-16 10:50:23" fixdate="2014-07-16 22:36:06" resolution="Done">
		<buginformation>
			<summary>controller client has a small memory leak as it&amp;apos;s not cleaning up the ThreadGroup object</summary>
			<description>org.jboss.as.controller.client.impl.ClientConfigurationImpl
052     static ExecutorService createDefaultExecutor() {
053         final ThreadGroup group = new ThreadGroup("management-client-thread");
The ThreadGroup is never cleaned up and creates a memory leak</description>
			<version>1.0.0.Alpha2</version>
			<fixedVersion>1.0.0.Alpha4</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.client.impl.ClientConfigurationImpl.java</file>
		</fixedFiles>
	</bug>
	<bug id="7" opendate="2014-07-16 23:37:16" fixdate="2014-07-17 13:34:23" resolution="Done">
		<buginformation>
			<summary>MapAttributeDefinition and ListAttributeDefinition incorrectly assume valid types in convertParameterExpressions</summary>
			<description>The AttributeDefinition.convertParameterExpression method is called before the validator has validated the model node. This is because the conversion is part of doing any configured "cleanup" of the node before validation. (See AS7-6224.)
MapAttributeDefinition and ListAttributeDefinition break this in their overrides of the method by doing unsafe type conversions. When these fail, users get unfriendly failure messages instead of the ones that the validators would provide.
For example, this bogus CLI command:






[standalone@localhost:9990 /] /subsystem=datasources/data-source=ExampleDS:write-attribute(name=valid-connection-checker-properties, value=1)






Produces this in the server log:






15:46:42,167 ERROR [org.jboss.as.controller.management-operation] (management-handler-thread - 4) WFLYCTL0013: Operation ("write-attribute") failed - address: ([




    ("subsystem" =&amp;gt; "datasources"),




    ("data-source" =&amp;gt; "ExampleDS")




]): java.lang.IllegalArgumentException




	at org.jboss.dmr.ModelValue.asPropertyList(ModelValue.java:100) [jboss-dmr-1.2.0.Final.jar:1.2.0.Final]




	at org.jboss.dmr.ModelNode.asPropertyList(ModelNode.java:384) [jboss-dmr-1.2.0.Final.jar:1.2.0.Final]




	at org.jboss.as.controller.MapAttributeDefinition.convertParameterExpressions(MapAttributeDefinition.java:252) [wildfly-controller-1.0.0.Alpha2.jar:1.0.0.Alpha2]




	at org.jboss.as.controller.AttributeDefinition.validateAndSet(AttributeDefinition.java:439) [wildfly-controller-1.0.0.Alpha2.jar:1.0.0.Alpha2]




	at org.jboss.as.controller.AbstractWriteAttributeHandler.execute(AbstractWriteAttributeHandler.java:88) [wildfly-controller-1.0.0.Alpha2.jar:1.0.0.Alpha2]




	at org.jboss.as.controller.operations.global.WriteAttributeHandler.execute(WriteAttributeHandler.java:98) [wildfly-controller-1.0.0.Alpha2.jar:1.0.0.Alpha2]






There should be nothing in the server log at all for that error; the validator should have caught it and generated an appropriate failure response to the client.</description>
			<version>1.0.0.Alpha3</version>
			<fixedVersion>1.0.0.Alpha4</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.MapAttributeDefinition.java</file>
			<file type="M">org.jboss.as.controller.ListAttributeDefinition.java</file>
		</fixedFiles>
	</bug>
	<bug id="8" opendate="2014-07-17 01:39:20" fixdate="2014-07-17 13:34:44" resolution="Done">
		<buginformation>
			<summary>Unhelpful error message when OSH throws an exception with no detail message</summary>
			<description>This shows up a fair amount in issue reports, either in the CLI output or in the server log:
"failure-description" =&amp;gt; "JBAS014749: Operation handler failed: null"
The null happens because the message is getting passed the result of throwable.getLocalizedMessage() and that may be null. See DMR-11 for what&amp;amp;apos;s likely the most common reason it&amp;amp;apos;s null.
If it&amp;amp;apos;s null, the code should use the class name of the error message.</description>
			<version>1.0.0.Alpha3</version>
			<fixedVersion>1.0.0.Alpha4</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.AbstractOperationContext.java</file>
		</fixedFiles>
	</bug>
	<bug id="50" opendate="2014-08-12 14:55:08" fixdate="2014-08-22 05:41:23" resolution="Done">
		<buginformation>
			<summary>CLI tests using non-standard output stream don&amp;apos;t reset the terminal when done</summary>
			<description>The problem appears only when running single tests. If the tests are run using a wildcard, there is no problem.</description>
			<version>1.0.0.Alpha4</version>
			<fixedVersion>1.0.0.Alpha5</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.test.integration.management.util.CLITestUtil.java</file>
		</fixedFiles>
	</bug>
	<bug id="67" opendate="2014-08-22 09:26:14" fixdate="2014-08-27 07:14:41" resolution="Done">
		<buginformation>
			<summary>CLI shutting down a slave disconnects from the master</summary>
			<description>If I issue a shutdown command for a slave HC, the CLI gets disconnected:
[domain@localhost:9999 /] shutdown --host=slave-a
[disconnected /] shutdown --host=slave-b
The command is not available in the current context (e.g. required subsystems or connection to the controller might be unavailable).
[disconnected /] cd /
The command is not available in the current context (e.g. required subsystems or connection to the controller might be unavailable).
[disconnected /] connect
[domain@localhost:9999 /] shutdown --host=slave-b
[disconnected /]</description>
			<version>1.0.0.Alpha4</version>
			<fixedVersion>1.0.0.Alpha6</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.cli.Util.java</file>
			<file type="M">org.jboss.as.cli.handlers.ShutdownHandler.java</file>
		</fixedFiles>
		<links>
			<link type="Duplicate" description="is duplicated by">567</link>
		</links>
	</bug>
	<bug id="69" opendate="2014-08-23 14:27:54" fixdate="2014-08-27 08:34:51" resolution="Done">
		<buginformation>
			<summary>NullPointerException adding KeyStore to realm with {allow-resource-service-restart=true}</summary>
			<description>Executing the following CLI commands: -






CLI Commands






./core-service=management/security-realm=SSLRealm:add




./core-service=management/security-realm=SSLRealm/server-identity=ssl:add(keystore-password=keystore_password, keystore-relative-to=jboss.server.config.dir, keystore-path=server.keystore){allow-resource-service-restart=true}






Results in the following NullPointerException being recorded: -






15:23:28,074 ERROR [org.jboss.as.controller.management-operation] (management-handler-thread - 6) WFLYCTL0013: Operation ("add") failed - address: ([




    ("core-service" =&amp;gt; "management"),




    ("security-realm" =&amp;gt; "SSLRealm"),




    ("server-identity" =&amp;gt; "ssl")




]): java.lang.NullPointerException




	at org.jboss.as.domain.management.security.SecurityRealmAddHandler.addSSLServices(SecurityRealmAddHandler.java:596) [wildfly-domain-management-1.0.0.Alpha6-SNAPSHOT.jar:1.0.0.Alpha6-SNAPSHOT]




	at org.jboss.as.domain.management.security.SecurityRealmAddHandler.installServices(SecurityRealmAddHandler.java:188) [wildfly-domain-management-1.0.0.Alpha6-SNAPSHOT.jar:1.0.0.Alpha6-SNAPSHOT]




	at org.jboss.as.domain.management.security.SecurityRealmParentRestartHandler.recreateParentService(SecurityRealmParentRestartHandler.java:66) [wildfly-domain-management-1.0.0.Alpha6-SNAPSHOT.jar:1.0.0.Alpha6-SNAPSHOT]




	at org.jboss.as.controller.RestartParentResourceHandlerBase$1.execute(RestartParentResourceHandlerBase.java:74) [wildfly-controller-1.0.0.Alpha6-SNAPSHOT.jar:1.0.0.Alpha6-SNAPSHOT]




	at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:664) [wildfly-controller-1.0.0.Alpha6-SNAPSHOT.jar:1.0.0.Alpha6-SNAPSHOT]





</description>
			<version>1.0.0.Alpha4</version>
			<fixedVersion>1.0.0.Alpha6</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.domain.management.security.SecurityRealmParentRestartHandler.java</file>
		</fixedFiles>
	</bug>
	<bug id="58" opendate="2014-08-18 05:18:45" fixdate="2014-09-01 18:26:22" resolution="Done">
		<buginformation>
			<summary>Setting some locales causes missing buttons on console and throws errors.</summary>
			<description>
When WildFly 9 Alpha1 is started with the following system properties in the "standalone.conf" then the admin console behaves abnormally and shows some missing buttons in the console. See attached screenshot "mssing_add_remove_disable_Buttons.png".







JAVA_OPTS="$JAVA_OPTS -Duser.country=TR -Duser.language=tr"







Also it throws following Error while accessing the console URL like [1]
[1] http://localhost:9990/console/App.html#datasources







10:39:39,223 ERROR [org.jboss.as.controller.management-operation] (XNIO-1 task-8) WFLYCTL0013: Operation ("check-resource-access") failed - address: ([




    ("subsystem" =&amp;gt; "datasources"),




    ("data-source" =&amp;gt; "*"),




    ("connection-properties" =&amp;gt; "*")




]): java.lang.IllegalArgumentException: No enum constant org.jboss.as.controller.registry.AttributeAccess.Storage.CONFGURATON




	at java.lang.Enum.valueOf(Enum.java:236) [rt.jar:1.7.0_51]




	at org.jboss.as.controller.registry.AttributeAccess$Storage.valueOf(AttributeAccess.java:91) [wildfly-controller-1.0.0.Alpha3.jar:1.0.0.Alpha3]




	at org.jboss.as.controller.operations.global.ReadResourceDescriptionHandler$CheckResourceAccessHandler.execute(ReadResourceDescriptionHandler.java:431) [wildfly-controller-1.0.0.Alpha3.jar:1.0.0.Alpha3]




	at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:603) [wildfly-controller-1.0.0.Alpha3.jar:1.0.0.Alpha3]




	at org.jboss.as.controller.AbstractOperationContext.doCompleteStep(AbstractOperationContext.java:481) [wildfly-controller-1.0.0.Alpha3.jar:1.0.0.Alpha3]




	at org.jboss.as.controller.AbstractOperationContext.completeStepInternal(AbstractOperationContext.java:282) [wildfly-controller-1.0.0.Alpha3.jar:1.0.0.Alpha3]




	at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:277) [wildfly-controller-1.0.0.Alpha3.jar:1.0.0.Alpha3]




	at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1060) [wildfly-controller-1.0.0.Alpha3.jar:1.0.0.Alpha3]




	at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:296) [wildfly-controller-1.0.0.Alpha3.jar:1.0.0.Alpha3]




	at org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:165) [wildfly-controller-1.0.0.Alpha3.jar:1.0.0.Alpha3]




	at org.jboss.as.domain.http.server.DomainApiHandler.handleRequest(DomainApiHandler.java:179) [wildfly-domain-http-interface-1.0.0.Alpha3.jar:1.0.0.Alpha3]




	at org.jboss.as.domain.http.server.security.SubjectDoAsHandler$1.run(SubjectDoAsHandler.java:72) [wildfly-domain-http-interface-1.0.0.Alpha3.jar:1.0.0.Alpha3]




	at org.jboss.as.domain.http.server.security.SubjectDoAsHandler$1.run(SubjectDoAsHandler.java:68) [wildfly-domain-http-interface-1.0.0.Alpha3.jar:1.0.0.Alpha3]




	at java.security.AccessController.doPrivileged(Native Method) [rt.jar:1.7.0_51]




	at javax.security.auth.Subject.doAs(Subject.java:415) [rt.jar:1.7.0_51]




	at org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:94) [wildfly-controller-1.0.0.Alpha3.jar:1.0.0.Alpha3]




	at org.jboss.as.domain.http.server.security.SubjectDoAsHandler.handleRequest(SubjectDoAsHandler.java:68) [wildfly-domain-http-interface-1.0.0.Alpha3.jar:1.0.0.Alpha3]




	at org.jboss.as.domain.http.server.security.SubjectDoAsHandler.handleRequest(SubjectDoAsHandler.java:63) [wildfly-domain-http-interface-1.0.0.Alpha3.jar:1.0.0.Alpha3]




	at io.undertow.server.handlers.BlockingHandler.handleRequest(BlockingHandler.java:50) [undertow-core-1.1.0.Beta5.jar:1.1.0.Beta5]




	at org.jboss.as.domain.http.server.DomainApiCheckHandler.handleRequest(DomainApiCheckHandler.java:83) [wildfly-domain-http-interface-1.0.0.Alpha3.jar:1.0.0.Alpha3]




	at io.undertow.security.handlers.AuthenticationCallHandler.handleRequest(AuthenticationCallHandler.java:52) [undertow-core-1.1.0.Beta5.jar:1.1.0.Beta5]




	at io.undertow.server.Connectors.executeRootHandler(Connectors.java:197) [undertow-core-1.1.0.Beta5.jar:1.1.0.Beta5]




	at io.undertow.server.HttpServerExchange$1.run(HttpServerExchange.java:737) [undertow-core-1.1.0.Beta5.jar:1.1.0.Beta5]




	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145) [rt.jar:1.7.0_51]




	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615) [rt.jar:1.7.0_51]




	at java.lang.Thread.run(Thread.java:744) [rt.jar:1.7.0_51]





</description>
			<version>1.0.0.Alpha4</version>
			<fixedVersion>1.0.0.Alpha5</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.remoting.Protocol.java</file>
			<file type="M">org.jboss.as.test.integration.management.rbac.PermissionsCoverageTestUtil.java</file>
			<file type="M">org.jboss.as.domain.management.security.password.PasswordCheckUtil.java</file>
			<file type="M">org.jboss.as.host.controller.discovery.S3Util.java</file>
			<file type="M">org.jboss.as.controller.access.rbac.StandardRoleMapper.java</file>
			<file type="M">org.jboss.as.test.integration.management.interfaces.JmxInterfaceStringUtils.java</file>
			<file type="M">org.jboss.as.controller.operations.global.ReadResourceDescriptionHandler.java</file>
			<file type="M">org.jboss.as.threads.ThreadPoolManagementUtils.java</file>
			<file type="M">org.jboss.as.host.controller.DirectoryGrouping.java</file>
		</fixedFiles>
	</bug>
	<bug id="79" opendate="2014-09-01 00:23:30" fixdate="2014-09-03 01:01:23" resolution="Done">
		<buginformation>
			<summary>ExplodedDeploymentMarker is not set for sub deployments</summary>
			<description></description>
			<version>1.0.0.Alpha5</version>
			<fixedVersion>1.0.0.Alpha6</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.server.deployment.module.DeploymentRootMountProcessor.java</file>
			<file type="M">org.jboss.as.server.deployment.SubDeploymentProcessor.java</file>
		</fixedFiles>
		<links>
			<link type="Dependency" description="blocks">3765</link>
		</links>
	</bug>
	<bug id="71" opendate="2014-08-26 19:34:17" fixdate="2014-09-03 16:13:20" resolution="Done">
		<buginformation>
			<summary>ProtocolLogger is used outside org.jboss.as.protocol module but isn&amp;apos;t available</summary>
			<description>The ProtocolLogger class is used in a few places in host-controller and server, but the module.xml for the org.jboss.as.protocol module specifically excludes it from being exported.
The uses aren&amp;amp;apos;t complex enough to justify exporting the class, so I&amp;amp;apos;ll just change them.</description>
			<version>1.0.0.Alpha5</version>
			<fixedVersion>1.0.0.Alpha6</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.server.mgmt.domain.HostControllerConnection.java</file>
			<file type="M">org.jboss.as.host.controller.mgmt.HostControllerRegistrationHandler.java</file>
			<file type="M">org.jboss.as.host.controller.mgmt.ServerToHostProtocolHandler.java</file>
			<file type="M">org.jboss.as.protocol.mgmt.FutureManagementChannel.java</file>
		</fixedFiles>
	</bug>
	<bug id="64" opendate="2014-08-11 15:19:22" fixdate="2014-09-04 06:45:31" resolution="Done">
		<buginformation>
			<summary>Filesystem deployment scanner deployment failure removes unrelated deployments</summary>
			<description>If one&amp;amp;apos;s standalone-full.xml configuration contains something like:
&amp;lt;deployments&amp;gt;
  &amp;lt;deployment name="MyWebApp.war" runtime-name="MyWebApp.war" enabled="true"&amp;gt;
    &amp;lt;fs-exploded path="../../SomeDir/MyWebApp.war" relative-to="jboss.home.dir"/&amp;gt;
  &amp;lt;/deployment&amp;gt;
&amp;lt;/deployments&amp;gt;
whether manually inserted (while the server is not running) or installed via the CLI via
  /deployment=ServiceCenter.war/:add(runtime-name=ServiceCenter.war,content=[
{archive=false,path="../../Windchill/ServiceCenter.war",relative-to="jboss.home.dir"}
])
and a deployment scanner like:
  &amp;lt;subsystem xmlns="urn:jboss:domain:deployment-scanner:2.0"&amp;gt; 
    &amp;lt;deployment-scanner name="1" path="../../../Applications" relative-to="jboss.server.base.dir" scan-interval="5000" auto-deploy-exploded="true"/&amp;gt; 
  &amp;lt;/subsystem&amp;gt; 
a failure by a deployment-scanner to deploy an application (exploded in my case, though I&amp;amp;apos;m not sure this makes a difference) will cause the explicitly listed &amp;lt;deployments&amp;gt; to be removed from the configuration!
This occurs irrespective of the value used for auto-deploy-exploded and to &amp;lt;deployment&amp;gt; elements that had already successfully been deployed and started.</description>
			<version>1.0.0.Alpha5</version>
			<fixedVersion>1.0.0.Alpha6</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.server.deployment.scanner.FileSystemDeploymentService.java</file>
			<file type="M">org.jboss.as.server.deployment.scanner.FileSystemDeploymentServiceUnitTestCase.java</file>
		</fixedFiles>
		<links>
			<link type="Related" description="is related to">4984</link>
			<link type="Related" description="is related to">4985</link>
			<link type="Superset" description="is incorporated by">65</link>
		</links>
	</bug>
	<bug id="88" opendate="2014-09-05 15:28:38" fixdate="2014-09-05 15:53:40" resolution="Duplicate Issue">
		<buginformation>
			<summary>Management interface to track (timestamp) when an application was last deployed.</summary>
			<description>
When an application is Deployed/Undeployed or Enabled/Disabled then there should be some mechanism in order to track the timestamp of these events  using some CLI commands.


This will help in tracking when last time the application was enabled/disabled/deployed/undeployed.

I have some reservations about this as it&amp;amp;apos;s not clear why these management resources should be treated differently from other resources in terms of showing this kind of information about their history. But there&amp;amp;apos;s user demand for it and Claudio Miranda is doing good work on implementing it, so I&amp;amp;apos;m fine with it.</description>
			<version>1.0.0.Alpha5</version>
			<fixedVersion></fixedVersion>
			<type>Feature Request</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.server.deployment.DeploymentReplaceHandler.java</file>
			<file type="M">org.jboss.as.server.deployment.DeploymentUtils.java</file>
			<file type="M">org.jboss.as.server.controller.resources.DeploymentAttributes.java</file>
			<file type="M">org.jboss.as.server.deployment.DeploymentUndeployHandler.java</file>
			<file type="M">org.jboss.as.server.deployment.DeploymentFullReplaceHandler.java</file>
			<file type="M">org.jboss.as.server.deployment.DeploymentDeployHandler.java</file>
			<file type="M">org.jboss.as.controller.descriptions.ModelDescriptionConstants.java</file>
			<file type="M">org.jboss.as.server.deployment.DeploymentAddHandler.java</file>
		</fixedFiles>
		<links>
			<link type="Duplicate" description="duplicates">87</link>
		</links>
	</bug>
	<bug id="82" opendate="2014-09-03 17:18:13" fixdate="2014-09-09 11:09:07" resolution="Done">
		<buginformation>
			<summary>Defining a HTTP management interface with secure-port or https socket binding but not security realm causes NullPointerException</summary>
			<description>There are actually two checks that need to be performed: -
 1 - If a secure port is required then a security realm must be associated with the interface.
 2 - That security realm must supply an SSLContext
For #1 that can at least be validated in the model at the end of stage MODEL.  This will need to be validated for both standalone mode and domain mode - each of these use independent resource definitions.
#2 will have to wait until RUNTIME where we have the opportunity to check that the injected realm does supply a SSLContext.</description>
			<version>1.0.0.Alpha5</version>
			<fixedVersion>1.0.0.Alpha6</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.domain.management.security.LdapAuthorizationResourceDefinition.java</file>
			<file type="M">org.jboss.as.server.logging.ServerLogger.java</file>
			<file type="M">org.jboss.as.host.controller.logging.HostControllerLogger.java</file>
			<file type="M">org.jboss.as.server.operations.HttpManagementAddHandler.java</file>
			<file type="M">org.jboss.as.domain.controller.logging.DomainControllerLogger.java</file>
			<file type="M">org.jboss.as.host.controller.resources.HttpManagementResourceDefinition.java</file>
			<file type="M">org.jboss.as.server.mgmt.HttpManagementResourceDefinition.java</file>
			<file type="M">org.jboss.as.host.controller.operations.HttpManagementAddHandler.java</file>
			<file type="D">org.jboss.as.server.operations.HttpManagementWriteAttributeHandler.java</file>
			<file type="M">org.jboss.as.domain.http.server.logging.HttpServerLogger.java</file>
			<file type="M">org.jboss.as.domain.http.server.ManagementHttpServer.java</file>
		</fixedFiles>
	</bug>
	<bug id="92" opendate="2014-09-09 05:58:42" fixdate="2014-09-11 12:32:49" resolution="Done">
		<buginformation>
			<summary>cli deploy command with unpaired quotation mark causes StringIndexOutOfBoundsException</summary>
			<description>
CLI "deploy" command with open quote and tab for completion results in a "StringIndexOutOfBoundsException" exception


Type &amp;amp;apos;connect&amp;amp;apos; to connect to the server or &amp;amp;apos;help&amp;amp;apos; for the list of supported commands.






[disconnected /] connect




[standalone@localhost:9999 /] deploy "d&amp;lt;Tab&amp;gt;









[standalone@localhost:9990 /] deploy "djava.lang.StringIndexOutOfBoundsException: String index out of range: -1




        at java.lang.String.substring(String.java:1958)




        at org.jboss.as.cli.handlers.WindowsFilenameTabCompleter.complete(WindowsFilenameTabCompleter.java:54)




        at org.jboss.as.cli.operation.OperationRequestCompleter.complete(OperationRequestCompleter.java:229)




        at org.jboss.as.cli.operation.OperationRequestCompleter.complete(OperationRequestCompleter.java:73)




        at org.jboss.as.cli.CommandCompleter.doComplete(CommandCompleter.java:126)




        at org.jboss.as.cli.CommandCompleter.complete(CommandCompleter.java:63)




        at org.jboss.as.cli.impl.Console$Factory$1$1.complete(Console.java:102)




        at org.jboss.aesh.console.Console.complete(Console.java:1155)




        at org.jboss.aesh.console.Console.parseOperation(Console.java:550)




        at org.jboss.aesh.console.Console.read(Console.java:452)




        at org.jboss.aesh.console.Console.read(Console.java:346)




        at org.jboss.as.cli.impl.Console$Factory$1.readLine(Console.java:178)




        at org.jboss.as.cli.impl.CommandContextImpl.interact(CommandContextImpl.java:1283)




        at org.jboss.as.cli.impl.CliLauncher.main(CliLauncher.java:254)




        at org.jboss.as.cli.CommandLineMain.main(CommandLineMain.java:34)




        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)




        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)




        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)




        at java.lang.reflect.Method.invoke(Method.java:601)




        at org.jboss.modules.Module.run(Module.java:312)




        at org.jboss.modules.Main.main(Main.java:460)




Press any key to continue . . .







</description>
			<version>1.0.0.Alpha5</version>
			<fixedVersion>1.0.0.Alpha6</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.cli.handlers.WindowsFilenameTabCompleter.java</file>
		</fixedFiles>
	</bug>
	<bug id="72" opendate="2014-08-27 02:09:20" fixdate="2014-09-18 16:27:07" resolution="Done">
		<buginformation>
			<summary>deploy --force fails in CLI GUI</summary>
			<description>The --force flag is not working with the deploy command in CLI GUI.  The CLI CommandContextImpl is generating the wrong DMR request.</description>
			<version>1.0.0.Alpha5</version>
			<fixedVersion>1.0.0.Alpha6</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.cli.impl.CliLauncher.java</file>
		</fixedFiles>
	</bug>
	<bug id="95" opendate="2014-09-11 11:57:52" fixdate="2014-09-19 06:37:09" resolution="Done">
		<buginformation>
			<summary>PrimitiveListAttributeDefinition.Builder copy constructor does not copy the listValidator</summary>
			<description></description>
			<version>1.0.0.Alpha5</version>
			<fixedVersion>1.0.0.Alpha9</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.PrimitiveListAttributeDefinitionUnitTestCase.java</file>
			<file type="M">org.jboss.as.controller.SimpleListAttributeDefinition.java</file>
			<file type="M">org.jboss.as.controller.PrimitiveListAttributeDefinition.java</file>
			<file type="M">org.jboss.as.controller.SimpleListAttributeDefinitionUnitTestCase.java</file>
		</fixedFiles>
	</bug>
	<bug id="46" opendate="2014-08-07 03:54:50" fixdate="2014-09-21 22:22:48" resolution="Done">
		<buginformation>
			<summary>Fix intermittent failures in DeploymentOverlayCLITestCase</summary>
			<description></description>
			<version>1.0.0.Alpha4</version>
			<fixedVersion>1.0.0.Alpha9</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="D">org.jboss.as.server.deploymentoverlay.DeploymentOverlayRemove.java</file>
			<file type="M">org.jboss.as.server.deployment.SubDeploymentUnitService.java</file>
			<file type="D">org.jboss.as.server.deploymentoverlay.service.ContentService.java</file>
			<file type="M">org.jboss.as.server.deploymentoverlay.DeploymentOverlayDeploymentAdd.java</file>
			<file type="M">org.jboss.as.server.deploymentoverlay.DeploymentOverlayDefinition.java</file>
			<file type="D">org.jboss.as.server.deploymentoverlay.service.DeploymentOverlayService.java</file>
			<file type="D">org.jboss.as.server.deploymentoverlay.service.DeploymentOverlayLinkService.java</file>
			<file type="M">org.jboss.as.server.deployment.DeploymentOverlayDeploymentUnitProcessor.java</file>
			<file type="M">org.jboss.as.server.deploymentoverlay.DeploymentOverlayAdd.java</file>
			<file type="D">org.jboss.as.server.deploymentoverlay.ContentRemove.java</file>
			<file type="D">org.jboss.as.server.deploymentoverlay.ContentDefinition.java</file>
			<file type="D">org.jboss.as.server.deploymentoverlay.DeploymentOverlayDeploymentRemove.java</file>
			<file type="M">org.jboss.as.server.controller.resources.ServerRootResourceDefinition.java</file>
			<file type="M">org.jboss.as.server.deploymentoverlay.DeploymentOverlayDeploymentDefinition.java</file>
			<file type="M">org.jboss.as.server.deployment.RootDeploymentUnitService.java</file>
			<file type="M">org.jboss.as.server.deployment.DeploymentHandlerUtil.java</file>
			<file type="M">org.jboss.as.server.deploymentoverlay.DeploymentOverlayModel.java</file>
			<file type="D">org.jboss.as.server.deploymentoverlay.service.DeploymentOverlayPriority.java</file>
			<file type="M">org.jboss.as.domain.controller.resources.DomainRootDefinition.java</file>
			<file type="M">org.jboss.as.server.ServerService.java</file>
			<file type="D">org.jboss.as.server.deploymentoverlay.ContentAdd.java</file>
			<file type="M">org.jboss.as.domain.controller.resources.ServerGroupResourceDefinition.java</file>
			<file type="M">org.jboss.as.server.deployment.Attachments.java</file>
			<file type="D">org.jboss.as.server.deploymentoverlay.service.DeploymentOverlayIndexService.java</file>
		</fixedFiles>
	</bug>
	<bug id="117" opendate="2014-09-22 11:08:59" fixdate="2014-09-25 06:34:22" resolution="Done">
		<buginformation>
			<summary>Typo in add-user help text</summary>
			<description>There is a typo in help message of add-user tool.
Version-Release number of selected component (if applicable):
 EAP 6.4.0.DR1.1
How reproducible:
 Always
Steps to Reproduce:
1. ./add-user.sh --help
Actual results:
...
    -sc &amp;lt;value&amp;gt;                         Define the location the server config 
                                        directory.
...
Expected results:
...
    -sc &amp;lt;value&amp;gt;                         Define the location of the server config 
                                        directory.
...</description>
			<version>1.0.0.Alpha8</version>
			<fixedVersion>1.0.0.Alpha9</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.domain.management.logging.DomainManagementLogger.java</file>
		</fixedFiles>
	</bug>
	<bug id="125" opendate="2014-09-25 10:07:59" fixdate="2014-09-29 14:14:45" resolution="Done">
		<buginformation>
			<summary>Security realm cache definitions not possible for LDAP prinicipal to group group loading.</summary>
			<description>
It&amp;amp;apos;s not possible to configure LDAP cache in security realms under "authorization=ldap/group-search=principal-to-group"
Possible reason:
The LdapCacheResourceDefinition is not registered under the org.jboss.as.domain.management.security.PrincipalToGroupResourceDefinition
When I try to add the cache configuration manually to standalone.xml, server doesn&amp;amp;apos;t start and reports:
15:23:44,619 ERROR [org.jboss.as.controller] (Controller Boot Thread) JBAS014629: No resource definition is registered for address [
    ("core-service" =&amp;gt; "management"),
    ("security-realm" =&amp;gt; "JBossTest"),
    ("authorization" =&amp;gt; "ldap"),
    ("group-search" =&amp;gt; "principal-to-group"),
    ("cache" =&amp;gt; "by-search-time")
]
15:23:44,621 FATAL [org.jboss.as.server] (Controller Boot Thread) JBAS015957: Server boot has failed in an unrecoverable manner; exiting. See previous messages for details.</description>
			<version>1.0.0.Alpha8</version>
			<fixedVersion>1.0.0.Alpha9</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.domain.management.security.PrincipalToGroupResourceDefinition.java</file>
		</fixedFiles>
		<links>
			<link type="Related" description="is related to">126</link>
		</links>
	</bug>
	<bug id="128" opendate="2014-06-06 17:47:19" fixdate="2014-09-30 11:53:36" resolution="Done">
		<buginformation>
			<summary>Nonexistent ldap group causes authentication to fail in security-realm </summary>
			<description>The LdapGroupSearcher code will fail if it tries to lookup a group that 
does not exist on the local ldap server.
This can happen when the ldap systems are configured as trusted domains.  
Even though the security-realm is not configured to use the trusted domain
(it is configured to only look at a single ldap server), the 
user&amp;amp;apos;s entry on one ldap server could point at a group that exists on 
the other (trusted) ldap server.
The LdapGroupSearcher code attempts to lookup this role and it fails.  This 
failure is sent back to the http server which results in an HTTP 500 error
and leaves the user with no way to authenticate/login.
There is currently not a way to tell the group searcher code to ignore the 
group/role that cannot be found.
2014-06-06 12:44:39,819 TRACE [org.jboss.as.domain.management.security] (XNIO-1 task-1) Group found with distinguishedName=cn=TestManagedRole,ou=People,dc=my-ds-domain,dc=com
2014-06-06 12:44:39,821 TRACE [org.jboss.as.domain.management.security] (XNIO-1 task-1) Failure supplementing Subject: javax.naming.NameNotFoundException: [LDAP: error code 32 - No Such Object]; remaining name &amp;amp;apos;cn=TestManagedRole,ou=People,dc=my-ds-domain,dc=com&amp;amp;apos;
        at com.sun.jndi.ldap.LdapCtx.mapErrorCode(LdapCtx.java:3112) [rt.jar:1.7.0_45]
        at com.sun.jndi.ldap.LdapCtx.processReturnCode(LdapCtx.java:3033) [rt.jar:1.7.0_45]
        at com.sun.jndi.ldap.LdapCtx.processReturnCode(LdapCtx.java:2840) [rt.jar:1.7.0_45]
        at com.sun.jndi.ldap.LdapCtx.c_getAttributes(LdapCtx.java:1332) [rt.jar:1.7.0_45]
        at com.sun.jndi.toolkit.ctx.ComponentDirContext.p_getAttributes(ComponentDirContext.java:231) [rt.jar:1.7.0_45]
        at com.sun.jndi.toolkit.ctx.PartialCompositeDirContext.getAttributes(PartialCompositeDirContext.java:139) [rt.jar:1.7.0_45]
        at com.sun.jndi.toolkit.ctx.PartialCompositeDirContext.getAttributes(PartialCompositeDirContext.java:127) [rt.jar:1.7.0_45]
        at javax.naming.directory.InitialDirContext.getAttributes(InitialDirContext.java:142) [rt.jar:1.7.0_45]
        at javax.naming.directory.InitialDirContext.getAttributes(InitialDirContext.java:142) [rt.jar:1.7.0_45]
        at org.jboss.as.domain.management.security.LdapGroupSearcherFactory$PrincipalToGroupSearcher.search(LdapGroupSearcherFactory.java:256) [wildfly-domain-management-8.1.0.Final.jar:8.1.0.Final]
        at org.jboss.as.domain.management.security.LdapGroupSearcherFactory$PrincipalToGroupSearcher.search(LdapGroupSearcherFactory.java:191) [wildfly-domain-management-8.1.0.Final.jar:8.1.0.Final]
        at org.jboss.as.domain.management.security.LdapCacheService$NoCacheCache.search(LdapCacheService.java:223) [wildfly-domain-management-8.1.0.Final.jar:8.1.0.Final]
        at org.jboss.as.domain.management.security.LdapSubjectSupplementalService$LdapSubjectSupplemental.loadGroupEntries(LdapSubjectSupplementalService.java:218) [wildfly-domain-management-8.1.0.Final.jar:8.1.0.Final]
        at org.jboss.as.domain.management.security.LdapSubjectSupplementalService$LdapSubjectSupplemental.loadGroups(LdapSubjectSupplementalService.java:195) [wildfly-domain-management-8.1.0.Final.jar:8.1.0.Final]
        at org.jboss.as.domain.management.security.LdapSubjectSupplementalService$LdapSubjectSupplemental.loadGroups(LdapSubjectSupplementalService.java:188) [wildfly-domain-management-8.1.0.Final.jar:8.1.0.Final]
        at org.jboss.as.domain.management.security.LdapSubjectSupplementalService$LdapSubjectSupplemental.supplementSubject(LdapSubjectSupplementalService.java:163) [wildfly-domain-management-8.1.0.Final.jar:8.1.0.Final]
        at org.jboss.as.domain.management.security.SecurityRealmService$1.createSubjectUserInfo(SecurityRealmService.java:200) [wildfly-domain-management-8.1.0.Final.jar:8.1.0.Final]
        at org.jboss.as.domain.http.server.security.RealmIdentityManager.verify(RealmIdentityManager.java:155) [wildfly-domain-http-interface-8.1.0.Final.jar:8.1.0.Final]
        at org.jboss.as.domain.http.server.security.RealmIdentityManager.verify(RealmIdentityManager.java:120) [wildfly-domain-http-interface-8.1.0.Final.jar:8.1.0.Final]
        at io.undertow.security.impl.BasicAuthenticationMechanism.authenticate(BasicAuthenticationMechanism.java:110) [undertow-core-1.0.15.Final.jar:1.0.15.Final]
        at org.jboss.as.domain.http.server.security.AuthenticationMechanismWrapper.authenticate(AuthenticationMechanismWrapper.java:57) [wildfly-domain-http-interface-8.1.0.Final.jar:8.1.0.Final]
        at io.undertow.security.impl.SecurityContextImpl$AuthAttempter.transition(SecurityContextImpl.java:281) [undertow-core-1.0.15.Final.jar:1.0.15.Final]
        at io.undertow.security.impl.SecurityContextImpl$AuthAttempter.transition(SecurityContextImpl.java:298) [undertow-core-1.0.15.Final.jar:1.0.15.Final]
        at io.undertow.security.impl.SecurityContextImpl$AuthAttempter.access$100(SecurityContextImpl.java:268) [undertow-core-1.0.15.Final.jar:1.0.15.Final]
        at io.undertow.security.impl.SecurityContextImpl.attemptAuthentication(SecurityContextImpl.java:131) [undertow-core-1.0.15.Final.jar:1.0.15.Final]
        at io.undertow.security.impl.SecurityContextImpl.authTransition(SecurityContextImpl.java:106) [undertow-core-1.0.15.Final.jar:1.0.15.Final]
        at io.undertow.security.impl.SecurityContextImpl.authenticate(SecurityContextImpl.java:99) [undertow-core-1.0.15.Final.jar:1.0.15.Final]
        at io.undertow.security.handlers.AuthenticationCallHandler.handleRequest(AuthenticationCallHandler.java:50) [undertow-core-1.0.15.Final.jar:1.0.15.Final]
        at io.undertow.server.Connectors.executeRootHandler(Connectors.java:177) [undertow-core-1.0.15.Final.jar:1.0.15.Final]
        at io.undertow.server.HttpServerExchange$1.run(HttpServerExchange.java:727) [undertow-core-1.0.15.Final.jar:1.0.15.Final]
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145) [rt.jar:1.7.0_45]
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615) [rt.jar:1.7.0_45]
        at java.lang.Thread.run(Thread.java:744) [rt.jar:1.7.0_45]
</description>
			<version>1.0.0.Alpha8</version>
			<fixedVersion>1.0.0.Alpha9</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.domain.management.parsing.ManagementXml.java</file>
			<file type="M">org.jboss.as.domain.management.security.PrincipalToGroupResourceDefinition.java</file>
			<file type="M">org.jboss.as.domain.management.security.operations.PrincipalToGroupBuilder.java</file>
			<file type="M">org.jboss.as.domain.management.security.realms.PrincipalToGroupLdapSuiteTest.java</file>
			<file type="M">org.jboss.as.domain.management.security.SecurityRealmAddHandler.java</file>
			<file type="M">org.jboss.as.controller.parsing.Attribute.java</file>
			<file type="M">org.jboss.as.controller.descriptions.ModelDescriptionConstants.java</file>
			<file type="M">org.jboss.as.domain.management.security.LdapGroupSearcherFactory.java</file>
		</fixedFiles>
	</bug>
	<bug id="87" opendate="2014-09-05 14:38:26" fixdate="2014-09-30 20:19:15" resolution="Done">
		<buginformation>
			<summary>Display deployment timestamp</summary>
			<description>Display the deployment timestamp, that is the date of last modified deployment. It is useful for users to see the date and time of deployments.</description>
			<version>1.0.0.Alpha5</version>
			<fixedVersion>1.0.0.Alpha9</fixedVersion>
			<type>Enhancement</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.server.deployment.DeploymentReplaceHandler.java</file>
			<file type="M">org.jboss.as.server.deployment.DeploymentUtils.java</file>
			<file type="M">org.jboss.as.server.controller.resources.DeploymentAttributes.java</file>
			<file type="M">org.jboss.as.server.deployment.DeploymentUndeployHandler.java</file>
			<file type="M">org.jboss.as.server.deployment.DeploymentFullReplaceHandler.java</file>
			<file type="M">org.jboss.as.server.deployment.DeploymentDeployHandler.java</file>
			<file type="M">org.jboss.as.controller.descriptions.ModelDescriptionConstants.java</file>
			<file type="M">org.jboss.as.server.deployment.DeploymentAddHandler.java</file>
		</fixedFiles>
		<links>
			<link type="Dependency" description="blocks">391</link>
			<link type="Duplicate" description="is duplicated by">88</link>
		</links>
	</bug>
	<bug id="132" opendate="2014-09-30 00:58:27" fixdate="2014-10-01 20:18:20" resolution="Done">
		<buginformation>
			<summary>BoundedQueueThreadPoolWriteAttributeHandler does not deal with undefined core-threads correctly</summary>
			<description>BoundedQueueThreadPoolWriteAttributeHandler doesn&amp;amp;apos;t deal with undefined values for core-threads correctly. It assumes the attribute will be defined, and that&amp;amp;apos;s not required.
The attribute doesn&amp;amp;apos;t have a fixed default value. Instead, the behavior in add is to set the runtime value to match max-threads of core-threads is undefined. BoundedQueueThreadPoolWriteAttributeHandler should do the same.</description>
			<version>1.0.0.Alpha8</version>
			<fixedVersion>1.0.0.Alpha9</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.threads.BoundedQueueThreadPoolWriteAttributeHandler.java</file>
		</fixedFiles>
	</bug>
	<bug id="140" opendate="2014-10-01 17:21:28" fixdate="2014-10-08 15:17:55" resolution="Done">
		<buginformation>
			<summary>The Resource for a deployment whose &amp;apos;persistent&amp;apos; attribute is &amp;apos;false&amp;apos; does not return &amp;apos;true&amp;apos; from isRuntime()</summary>
			<description>Scanner managed deployments have the deployment resource&amp;amp;apos;s &amp;amp;apos;persistent&amp;amp;apos; attribute set to &amp;amp;apos;false&amp;amp;apos;. This results in the StandaloneXml not persisting the resource to XML, but that depends on custom logic in StandaloneXml that reads the attribute.
The Resource for these deployments should return &amp;amp;apos;true&amp;amp;apos; from isRuntime() so callers can decided about this without needing internal knowledge of the resource attributes.</description>
			<version>1.0.0.Alpha8</version>
			<fixedVersion>1.0.0.Alpha10</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.server.deployment.DeploymentAddHandlerTestCase.java</file>
			<file type="M">org.jboss.as.server.parsing.StandaloneXml.java</file>
			<file type="M">org.jboss.as.server.deployment.DeploymentAddHandler.java</file>
		</fixedFiles>
	</bug>
	<bug id="154" opendate="2014-10-08 05:08:10" fixdate="2014-10-15 11:11:29" resolution="Done">
		<buginformation>
			<summary>Patching does not process subdirectories</summary>
			<description>If patched resource is in subdirectory of moduleRoot, it is not included as part of patch, even though it is present in patch zip.</description>
			<version>1.0.0.Alpha9</version>
			<fixedVersion>1.0.0.Alpha10</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.patching.runner.IdentityPatchContext.java</file>
		</fixedFiles>
	</bug>
	<bug id="205" opendate="2014-10-27 23:01:11" fixdate="2014-10-28 15:07:54" resolution="Done">
		<buginformation>
			<summary>ManagedDMRContentTypeResource does not use a map with consistent ordering for storing content</summary>
			<description>ManagedDMRContentTypeResource.content is used for generating an overall hash for the stored content, but it does not use consistent ordering (i.e. it needs to be a LinkedHashMap or perhaps a TreeMap.) The result is when another node in the domain receives an update it may calculate a different overall hash.
This is surfacing as failures in https://bugzilla.redhat.com/show_bug.cgi?id=1078062 when the master and slave are running on different JVM releases. Different VM releases often have different ordering behavior when iterating over the unordered collections.
I believe this is unlikely to result in real-world problems since any backup will persist its own version of the hash to its local copy of domain.xml, so there won&amp;amp;apos;t be any mismatch. The importance of the overall hash is that it allows the process to find the content in the repo when it is added.</description>
			<version>1.0.0.Alpha10</version>
			<fixedVersion>1.0.0.Alpha11</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.management.client.content.ManagedDMRContentTypeResource.java</file>
		</fixedFiles>
	</bug>
	<bug id="191" opendate="2014-10-21 17:14:46" fixdate="2014-10-28 15:40:36" resolution="Done">
		<buginformation>
			<summary>Syslog reconnect timeout does not take effect at runtime</summary>
			<description></description>
			<version>1.0.0.Alpha10</version>
			<fixedVersion>1.0.0.Alpha11</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.domain.management.audit.SyslogAuditLogHandlerResourceDefinition.java</file>
			<file type="M">org.jboss.as.controller.audit.AuditLogger.java</file>
			<file type="M">org.jboss.as.controller.audit.ManagedAuditLogger.java</file>
			<file type="M">org.jboss.as.controller.audit.ManagedAuditLoggerImpl.java</file>
		</fixedFiles>
	</bug>
	<bug id="190" opendate="2014-10-21 16:23:32" fixdate="2014-10-28 15:40:51" resolution="Done">
		<buginformation>
			<summary>TLS syslog uses plain connection if no truststore or client-cert-store is configured</summary>
			<description></description>
			<version>1.0.0.Alpha10</version>
			<fixedVersion>1.0.0.Alpha11</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.audit.SyslogAuditLogHandler.java</file>
		</fixedFiles>
		<links>
			<link type="Dependency" description="blocks">215</link>
		</links>
	</bug>
	<bug id="196" opendate="2014-10-23 21:01:44" fixdate="2014-11-01 02:06:10" resolution="Done">
		<buginformation>
			<summary>Hang in HostController shutdown when CTRL-C is used</summary>
			<description>It is fairly easy to produce a hang in domain mode shutdown by launching domain.sh and then soft killing the process with CTRL-C.
If this hang happens, a thread dump will show this






[Host Controller] "Remoting "localhost:MANAGEMENT" task-16" prio=5 tid=0x00007fa07423b800 nid=0x3b0b waiting for monitor entry [0x000000010bce6000]




[Host Controller]    java.lang.Thread.State: BLOCKED (on object monitor)




[Host Controller] 	at org.jboss.as.host.controller.ManagedServer.callbackUnregistered(ManagedServer.java:417)




[Host Controller] 	- waiting to lock &amp;lt;0x00000007f7946a30&amp;gt; (a org.jboss.as.host.controller.ManagedServer)




[Host Controller] 	at org.jboss.as.host.controller.ServerInventoryImpl$1.handleClose(ServerInventoryImpl.java:461)




[Host Controller] 	at org.jboss.as.host.controller.ServerInventoryImpl$1.handleClose(ServerInventoryImpl.java:456)




[Host Controller] 	at org.jboss.remoting3.spi.SpiUtils.safeHandleClose(SpiUtils.java:54)




[Host Controller] 	at org.jboss.remoting3.spi.AbstractHandleableCloseable$CloseHandlerTask.run(AbstractHandleableCloseable.java:501)




[Host Controller] 	at org.jboss.remoting3.spi.AbstractHandleableCloseable.runCloseTask(AbstractHandleableCloseable.java:406)




[Host Controller] 	at org.jboss.remoting3.spi.AbstractHandleableCloseable.closeComplete(AbstractHandleableCloseable.java:277)




[Host Controller] 	at org.jboss.remoting3.remote.RemoteConnectionChannel.closeAction(RemoteConnectionChannel.java:532)




[Host Controller] 	at org.jboss.remoting3.spi.AbstractHandleableCloseable.close(AbstractHandleableCloseable.java:153)




[Host Controller] 	at org.jboss.as.protocol.mgmt.ManagementChannelReceiver.handleEnd(ManagementChannelReceiver.java:127)




[Host Controller] 	at org.jboss.remoting3.remote.RemoteConnectionChannel$2.run(RemoteConnectionChannel.java:282)




[Host Controller] 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)




[Host Controller] 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)




[Host Controller] 	at java.lang.Thread.run(Thread.java:744)














[Host Controller] "Host Controller Service Threads - 13" prio=5 tid=0x00007fa072cbc800 nid=0xa903 waiting on condition [0x000000010d93a000]




[Host Controller]    java.lang.Thread.State: WAITING (parking)




[Host Controller] 	at sun.misc.Unsafe.park(Native Method)




[Host Controller] 	- parking to wait for  &amp;lt;0x00000007f61e5480&amp;gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)




[Host Controller] 	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:186)




[Host Controller] 	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2043)




[Host Controller] 	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)




[Host Controller] 	at org.jboss.as.controller.remote.BlockingQueueOperationListener.retrievePreparedOperation(BlockingQueueOperationListener.java:88)




[Host Controller] 	at org.jboss.as.controller.remote.TransactionalProtocolHandlers.executeBlocking(TransactionalProtocolHandlers.java:76)




[Host Controller] 	at org.jboss.as.host.controller.ManagedServer$ServerStopTask.execute(ManagedServer.java:846)




[Host Controller] 	at org.jboss.as.host.controller.ManagedServer.internalSetState(ManagedServer.java:531)




[Host Controller] 	at org.jboss.as.host.controller.ManagedServer.stop(ManagedServer.java:259)




[Host Controller] 	- locked &amp;lt;0x00000007f7946a30&amp;gt; (a org.jboss.as.host.controller.ManagedServer)




[Host Controller] 	at org.jboss.as.host.controller.ServerInventoryImpl.stopServers(ServerInventoryImpl.java:339)




[Host Controller] 	at org.jboss.as.host.controller.ServerInventoryImpl.shutdown(ServerInventoryImpl.java:437)




[Host Controller] 	at org.jboss.as.host.controller.ServerInventoryService$1.run(ServerInventoryService.java:124)




[Host Controller] 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)




[Host Controller] 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)




[Host Controller] 	at java.lang.Thread.run(Thread.java:744)




[Host Controller] 	at org.jboss.threads.JBossThread.run(JBossThread.java:320)






The 2nd thread is blocking waiting for a prepared response from one of the servers. The first thread is trying to send a notification that the channel connecting to the server has been closed. The first thread will never unblock because the 2nd thread can&amp;amp;apos;t proceed and deliver the information that the channel is closed.
This happens because all the processes (PC, HC, servers) respond to the CTRL-C. So the server is shutting down in parallel and has closed the channel.
In theory this could happen for other reasons too, though. Anything that results in closing the channel while the ManagedServer lock is held.</description>
			<version>1.0.0.Alpha10</version>
			<fixedVersion>1.0.0.Alpha11</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.host.controller.ManagedServerProxy.java</file>
			<file type="M">org.jboss.as.test.integration.domain.management.util.DomainTestConnection.java</file>
			<file type="M">org.jboss.as.host.controller.mgmt.ServerToHostOperationHandlerFactoryService.java</file>
			<file type="M">org.jboss.as.host.controller.ManagedServer.java</file>
		</fixedFiles>
	</bug>
	<bug id="207" opendate="2014-10-30 15:24:36" fixdate="2014-11-05 21:13:39" resolution="Done">
		<buginformation>
			<summary>write- and undefine-attribute operations are registered as runtime-only</summary>
			<description>The write-attribute and undefine-attribute operation are registered as runtime-only, which is not correct and was probably done unintentionally.</description>
			<version>1.0.0.Alpha10</version>
			<fixedVersion>1.0.0.Alpha12</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.operations.global.UndefineAttributeHandler.java</file>
			<file type="M">org.jboss.as.controller.operations.global.WriteAttributeHandler.java</file>
		</fixedFiles>
	</bug>
	<bug id="233" opendate="2014-11-09 13:46:25" fixdate="2014-11-09 20:11:39" resolution="Done">
		<buginformation>
			<summary>Subsystem ordering is lost during marshalling</summary>
			<description>When standalone.xml gets persisted following some post-boot change, the original ordering of subsystems is lost. We don&amp;amp;apos;t want to change config files in this way.
I don&amp;amp;apos;t recall how we retained the original subsystem ordering with parallel boot, but something there has broken.</description>
			<version>1.0.0.Alpha11</version>
			<fixedVersion>1.0.0.Alpha12</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.OperationContextImpl.java</file>
		</fixedFiles>
		<links>
			<link type="Related" description="is related to">2561</link>
		</links>
	</bug>
	<bug id="226" opendate="2014-11-07 01:43:51" fixdate="2014-11-09 23:30:45" resolution="Done">
		<buginformation>
			<summary>DeploymentStatusHandler reads the model incorrectly</summary>
			<description>DeploymentStatusHandler is calling Resource.Tools.readModel() to get the mode instead of the simple Resource.getModel().
This fails because the resource is runtime-only and Resource.Tools.readModel() ignore runtime-only.</description>
			<version>1.0.0.Alpha11</version>
			<fixedVersion>1.0.0.Alpha12</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.server.deployment.DeploymentStatusHandler.java</file>
		</fixedFiles>
	</bug>
	<bug id="221" opendate="2014-11-06 03:03:59" fixdate="2014-11-09 23:32:31" resolution="Done">
		<buginformation>
			<summary>Scanner deployments are getting persisted to standalone.xml</summary>
			<description>Shouldn&amp;amp;apos;t happen.</description>
			<version>1.0.0.Alpha11</version>
			<fixedVersion>1.0.0.Alpha12</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.registry.BasicResource.java</file>
		</fixedFiles>
	</bug>
	<bug id="243" opendate="2014-11-11 15:59:49" fixdate="2014-11-12 18:21:50" resolution="Done">
		<buginformation>
			<summary>Not started servers need a placeholder resource when added</summary>
			<description>In ServerAddHandler where the server resource is created, a placeholder should be added. I.e. instead of context.createResource(...) below
        context.addStep(runningServerAdd, new OperationStepHandler() {
            @Override
            public void execute(final OperationContext context, final ModelNode operation) throws OperationFailedException 
{
                context.createResource(PathAddress.EMPTY_ADDRESS);
                context.stepCompleted();
            }
        }, OperationContext.Stage.MODEL, true);
context.addResource(PathAddress.EMPTY_ADDRESS, PlaceholderResource.INSTANCE) should be used instead. Otherwise, servers that are not started at boot will be missing runtime proxies and will be considered as parts of the persistent model.</description>
			<version>1.0.0.Alpha12</version>
			<fixedVersion>1.0.0.Alpha13</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.host.controller.operations.ServerAddHandler.java</file>
		</fixedFiles>
	</bug>
	<bug id="202" opendate="2014-10-24 09:33:34" fixdate="2014-11-17 12:38:29" resolution="Done">
		<buginformation>
			<summary>Deadlock when shutdown Wildfly server during CLI client connection</summary>
			<description>Creating upstream issue as the same deadlock can be found in WFLY.
Descirption as comment 5 in BZ1142538






The following deadlock still exists.









Steps to Reproduce:




1. Prepare a running EAP instance with secured management port - optionally in VM




2. Execute export JAVA_OPTS="-agentlib:jdwp=transport=dt_socket,address=8787,server=y,suspend=y"




3. In the same terminal, execute "bin/jboss-cli.sh --connect --controller=$EAP_IP --user=admin --password=password &amp;amp;apos;:read-resource&amp;amp;apos;"




4. From yet another terminal, execute "jdb -attach localhost:8787"




5. In JDB: 




5.a. Create breakpoint: "stop in org.xnio.channels.FramedMessageChannel.receive(java.nio.ByteBuffer)"




5.b. Resume all threads: "resume"




5.c. [Execute five times] Wait until breakpoint is hit and execute "resume". Either set timeout or be fast so that timeout does not occur first




6. Execute "kill -9 $EAP_PID" - optionally in VM




7. In JDB:




8.a. Remove breakpoint: "clear org.xnio.channels.FramedMessageChannel.receive(java.nio.ByteBuffer)"




8.b. Resume all threads: "resume"




9. Now dump the stack trace of jboss-cli.sh: "kill -3 $JBOSS_CLI_PID"
























Found one Java-level deadlock:




=============================




"Remoting "cli-client" read-1":




  waiting to lock monitor 0x00007ff9c829b558 (object 0x0000000783433408, a java.lang.String),




  which is held by "main"




"main":




  waiting to lock monitor 0x00007ff9c8333c48 (object 0x00000007851ae6e0, a java.util.ArrayDeque),




  which is held by "Remoting "cli-client" read-1"









Java stack information for the threads listed above:




===================================================




"Remoting "cli-client" read-1":




        at org.jboss.as.cli.impl.CLIModelControllerClient$ChannelCloseHandler.handleClose(CLIModelControllerClient.java:286)




        - waiting to lock &amp;lt;0x0000000783433408&amp;gt; (a java.lang.String)




        at org.jboss.as.cli.impl.CLIModelControllerClient$ChannelCloseHandler.handleClose(CLIModelControllerClient.java:269)




        at org.jboss.remoting3.spi.SpiUtils.safeHandleClose(SpiUtils.java:54)




        at org.jboss.remoting3.spi.AbstractHandleableCloseable$CloseHandlerTask.run(AbstractHandleableCloseable.java:501)




        at org.jboss.remoting3.spi.AbstractHandleableCloseable.runCloseTask(AbstractHandleableCloseable.java:406)




        at org.jboss.remoting3.spi.AbstractHandleableCloseable.closeComplete(AbstractHandleableCloseable.java:277)




        at org.jboss.remoting3.remote.RemoteConnectionChannel.closeAction(RemoteConnectionChannel.java:532)




        at org.jboss.remoting3.spi.AbstractHandleableCloseable.closeAsync(AbstractHandleableCloseable.java:359)




        at org.jboss.remoting3.remote.RemoteConnectionHandler.closeAllChannels(RemoteConnectionHandler.java:392)




        - locked &amp;lt;0x00000007851ae6e0&amp;gt; (a java.util.ArrayDeque)




        at org.jboss.remoting3.remote.RemoteConnectionHandler.handleConnectionClose(RemoteConnectionHandler.java:109)




        at org.jboss.remoting3.remote.RemoteReadListener.handleEvent(RemoteReadListener.java:81)




        - locked &amp;lt;0x00000007851ae6e0&amp;gt; (a java.util.ArrayDeque)




        at org.jboss.remoting3.remote.RemoteReadListener.handleEvent(RemoteReadListener.java:45)




        at org.xnio.ChannelListeners.invokeChannelListener(ChannelListeners.java:72)




        at org.xnio.channels.TranslatingSuspendableChannel.handleReadable(TranslatingSuspendableChannel.java:189)




        at org.xnio.channels.TranslatingSuspendableChannel$1.handleEvent(TranslatingSuspendableChannel.java:103)




        at org.xnio.ChannelListeners.invokeChannelListener(ChannelListeners.java:72)




        at org.xnio.channels.TranslatingSuspendableChannel.handleReadable(TranslatingSuspendableChannel.java:189)




        at org.xnio.ssl.JsseConnectedSslStreamChannel.handleReadable(JsseConnectedSslStreamChannel.java:183)




        at org.xnio.channels.TranslatingSuspendableChannel$1.handleEvent(TranslatingSuspendableChannel.java:103)




        at org.xnio.ChannelListeners.invokeChannelListener(ChannelListeners.java:72)




        at org.xnio.nio.NioHandle.run(NioHandle.java:90)




        at org.xnio.nio.WorkerThread.run(WorkerThread.java:198)




"main":




        at org.jboss.remoting3.remote.RemoteConnectionChannel.receiveMessage(RemoteConnectionChannel.java:361)




        - waiting to lock &amp;lt;0x00000007851ae6e0&amp;gt; (a java.util.ArrayDeque)




        at org.jboss.as.protocol.mgmt.FutureManagementChannel$Establishing.connectionOpened(FutureManagementChannel.java:217)




        at org.jboss.as.protocol.ProtocolConnectionManager.connect(ProtocolConnectionManager.java:78)




        - locked &amp;lt;0x0000000784978a00&amp;gt; (a org.jboss.as.protocol.ProtocolConnectionManager)




        at org.jboss.as.protocol.mgmt.FutureManagementChannel$Establishing.getChannel(FutureManagementChannel.java:204)




        at org.jboss.as.cli.impl.CLIModelControllerClient.getOrCreateChannel(CLIModelControllerClient.java:160)




        - locked &amp;lt;0x0000000783433408&amp;gt; (a java.lang.String)




        at org.jboss.as.cli.impl.CLIModelControllerClient$2.getChannel(CLIModelControllerClient.java:120)




        at org.jboss.as.protocol.mgmt.ManagementChannelHandler.executeRequest(ManagementChannelHandler.java:123)




        at org.jboss.as.protocol.mgmt.ManagementChannelHandler.executeRequest(ManagementChannelHandler.java:98)




        at org.jboss.as.controller.client.impl.AbstractModelControllerClient.executeRequest(AbstractModelControllerClient.java:236)




        at org.jboss.as.controller.client.impl.AbstractModelControllerClient.execute(AbstractModelControllerClient.java:141)




        at org.jboss.as.controller.client.impl.AbstractModelControllerClient.executeForResult(AbstractModelControllerClient.java:127)




        at org.jboss.as.controller.client.impl.AbstractModelControllerClient.execute(AbstractModelControllerClient.java:71)




        at org.jboss.as.cli.impl.CommandContextImpl.tryConnection(CommandContextImpl.java:980)




        at org.jboss.as.cli.impl.CommandContextImpl.connectController(CommandContextImpl.java:841)




        at org.jboss.as.cli.impl.CommandContextImpl.connectController(CommandContextImpl.java:817)




        at org.jboss.as.cli.impl.CliLauncher.initCommandContext(CliLauncher.java:282)




        at org.jboss.as.cli.impl.CliLauncher.main(CliLauncher.java:250)




        at org.jboss.as.cli.CommandLineMain.main(CommandLineMain.java:34)




        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)




        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)




        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)




        at java.lang.reflect.Method.invoke(Method.java:483)




        at org.jboss.modules.Module.run(Module.java:312)




        at org.jboss.modules.Main.main(Main.java:460)






It can be easily reproduce with Eclipse as:






1 start Wildfly




2 uncomment "JAVA_OPTS="$JAVA_OPTS -agentlib:jdwp=transport=dt_socket,address=8787,server=y,suspend=y" in jboss-cli.sh and connect to server




3 add two break points at




    CLIModelControllerClient$ChannelCloseHandler [line: 285] - handleClose(Channel, IOException)




    RemoteConnectionChannel [line: 360] - receiveMessage(Receiver)




4 connect to 8787 from eclipse debug




5 shutdown Wildfly









A deadlock between "main" and "cli-client" is in Eclipse debug stack.





</description>
			<version>1.0.0.Alpha10</version>
			<fixedVersion>1.0.0.Alpha13</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.cli.handlers.ConnectionInfoHandler.java</file>
			<file type="M">org.jboss.as.cli.impl.CLIModelControllerClient.java</file>
			<file type="M">org.jboss.as.cli.impl.CommandContextImpl.java</file>
		</fixedFiles>
	</bug>
	<bug id="268" opendate="2014-11-19 19:55:59" fixdate="2014-11-20 17:41:51" resolution="Done">
		<buginformation>
			<summary>CLI GUI fails if connecting to AS7 or EAP6</summary>
			<description>If you try to use a WildFly version CLI GUI to connect to AS7 or EAP6, you will get a failure.  The reason is because CLI GUI tries to do a list-log-files operation, which does not exist in those older AS versions.</description>
			<version>1.0.0.Alpha13</version>
			<fixedVersion>1.0.0.Alpha14</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.cli.gui.ServerLogsPanel.java</file>
			<file type="M">org.jboss.as.cli.gui.GuiMain.java</file>
		</fixedFiles>
	</bug>
	<bug id="210" opendate="2014-11-03 05:07:50" fixdate="2014-11-20 22:54:13" resolution="Done">
		<buginformation>
			<summary>IO error during deployment scanning triggers undeployment</summary>
			<description>If an IO error such as reaching the file descriptor limit occurs during deployment scanning, the scanner continues with an empty deployment list causing it to undeploy applications.
This occurs because FileSystemDeploymentService.scanDirectory() treats File.listFiles() returning null as an empty list rather than an error. http://docs.oracle.com/javase/7/docs/api/java/io/File.html#listFiles%28%29 notes that it returns an empty array if the directory is empty, and null if it is not a directory or an IO error occurs.
It should instead respond to a null return value by aborting the scanner run, with a log message, and not proceed to undeploy applications.</description>
			<version>1.0.0.Alpha10</version>
			<fixedVersion>1.0.0.Alpha14</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.server.deployment.scanner.FileSystemDeploymentService.java</file>
			<file type="M">org.jboss.as.server.deployment.scanner.FileSystemDeploymentServiceUnitTestCase.java</file>
		</fixedFiles>
	</bug>
	<bug id="213" opendate="2013-03-26 14:22:57" fixdate="2014-11-21 07:51:17" resolution="Done">
		<buginformation>
			<summary>Clean unreferenced items from the content repository</summary>
			<description>The algorithm for removing unused deployments from the content repository is based on doing this as part of undeploy operation execution. This doesn&amp;amp;apos;t cover cases where the content is never explicitly undeployed. For example:
1) Scanner content that is updated when the server is offline; the old content will not have been "undeployed" during shutdown, and on startup the new content will be installed.
2) Similar issues with deployments generated from module resources (see "A Mixed Approach on https://community.jboss.org/wiki/ExtendingAS7). When the server shuts down, there is no "subsystem remove" as part of shutdown, so the content added during start will not be removed.
Note that the content repository can include things other than deployments. Currently it also includes management-client-content (specifically rollout plans) and can potentially include anything. This is why it&amp;amp;apos;s a "content repository" and not a "deployment repository." The solution for this needs to deal with all cases.</description>
			<version>1.0.0.Alpha19</version>
			<fixedVersion>1.0.0.Alpha14</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.domain.controller.operations.deployment.DeploymentAddHandler.java</file>
			<file type="M">org.jboss.as.host.controller.mgmt.ServerToHostProtocolHandler.java</file>
			<file type="M">org.jboss.as.domain.controller.operations.ApplyRemoteMasterDomainModelHandler.java</file>
			<file type="M">org.jboss.as.host.controller.model.host.HostResourceDefinition.java</file>
			<file type="M">org.jboss.as.repository.LocalDeploymentFileRepository.java</file>
			<file type="M">org.jboss.as.domain.controller.operations.deployment.DeploymentFullReplaceHandler.java</file>
			<file type="M">org.jboss.as.host.controller.DomainModelControllerService.java</file>
			<file type="M">org.jboss.as.domain.controller.operations.deployment.DeploymentRemoveHandler.java</file>
			<file type="M">org.jboss.as.server.deploymentoverlay.DeploymentOverlayContentAdd.java</file>
			<file type="M">org.jboss.as.domain.controller.operations.deployment.ServerGroupDeploymentReplaceHandler.java</file>
			<file type="M">org.jboss.as.host.controller.RemoteDomainConnectionService.java</file>
			<file type="M">org.jboss.as.server.logging.ServerLogger.java</file>
			<file type="M">org.jboss.as.core.model.test.TestModelControllerService.java</file>
			<file type="M">org.jboss.as.server.deployment.DeploymentFullReplaceHandler.java</file>
			<file type="M">org.jboss.as.server.deployment.DeploymentAddHandlerTestCase.java</file>
			<file type="M">org.jboss.as.repository.logging.DeploymentRepositoryLogger.java</file>
			<file type="M">org.jboss.as.management.client.content.ManagedDMRContentTypeResource.java</file>
			<file type="M">org.jboss.as.core.model.test.LegacyKernelServicesImpl.java</file>
			<file type="M">org.jboss.as.domain.controller.operations.deployment.ServerGroupDeploymentAddHandler.java</file>
			<file type="M">org.jboss.as.subsystem.test.TestModelControllerService.java</file>
			<file type="M">org.jboss.as.server.controller.resources.ServerRootResourceDefinition.java</file>
			<file type="M">org.jboss.as.server.deploymentoverlay.DeploymentOverlayContentDefinition.java</file>
			<file type="M">org.jboss.as.repository.DeploymentFileRepository.java</file>
			<file type="M">org.jboss.as.server.test.InterfaceManagementUnitTestCase.java</file>
			<file type="M">org.jboss.as.host.controller.mgmt.MasterDomainControllerOperationHandlerImpl.java</file>
			<file type="M">org.jboss.as.host.controller.HostControllerService.java</file>
			<file type="M">org.jboss.as.domain.controller.operations.deployment.ServerGroupDeploymentRemoveHandler.java</file>
			<file type="M">org.jboss.as.management.client.content.ManagedDMRContentTypeAddHandler.java</file>
			<file type="M">org.jboss.as.repository.LocalFileRepository.java</file>
			<file type="M">org.jboss.as.server.ApplicationServerService.java</file>
			<file type="M">org.jboss.as.test.shared.ModelParserUtils.java</file>
			<file type="M">org.jboss.as.host.controller.ManagedServerOperationsFactory.java</file>
			<file type="M">org.jboss.as.domain.controller.resources.DomainRootDefinition.java</file>
			<file type="M">org.jboss.as.server.deployment.DeploymentRemoveHandler.java</file>
			<file type="M">org.jboss.as.domain.controller.resources.ServerGroupResourceDefinition.java</file>
			<file type="M">org.jboss.as.repository.ContentRepository.java</file>
			<file type="M">org.jboss.as.domain.controller.resources.DomainDeploymentResourceDefinition.java</file>
			<file type="M">org.jboss.as.server.mgmt.domain.RemoteFileRepositoryService.java</file>
			<file type="M">org.jboss.as.server.deployment.DeploymentReplaceHandler.java</file>
			<file type="M">org.jboss.as.server.deployment.DeploymentAddHandler.java</file>
		</fixedFiles>
		<links>
			<link type="Dependency" description="blocks">2606</link>
			<link type="Duplicate" description="is duplicated by">604</link>
			<link type="Superset" description="incorporates">211</link>
		</links>
	</bug>
	<bug id="145" opendate="2014-10-02 13:28:22" fixdate="2014-11-26 13:02:59" resolution="Done">
		<buginformation>
			<summary>CLI run-batch command cannot process files with comments or blank lines</summary>
			<description>In the JBoss CLI tool, the "run-batch --file=script.cli" command cannot
successfully process lines that start with "#" or blank lines. Comments and
blank lines help readability when creating cli batch scripts.
However, running the batch file containing comments/blank lines as a parameter
to jboss-cli.sh works just fine (./jboss-cli.sh -c --file=script.cli). This
difference in accepted syntax creates some confusion for users who are new to
the CLI tool.</description>
			<version>1.0.0.Alpha8</version>
			<fixedVersion>1.0.0.Alpha14</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.cli.handlers.batch.BatchRunHandler.java</file>
			<file type="M">org.jboss.as.test.integration.management.cli.BatchFileTestCase.java</file>
			<file type="M">org.jboss.as.cli.handlers.BaseOperationCommand.java</file>
		</fixedFiles>
		<links>
			<link type="Dependency" description="is blocked by">146</link>
		</links>
	</bug>
	<bug id="283" opendate="2014-11-26 13:14:24" fixdate="2014-11-27 10:48:15" resolution="Done">
		<buginformation>
			<summary>SASL_SERVER and SASL_PROTOCOL options not being passed all the way to Remoting</summary>
			<description></description>
			<version>1.0.0.Alpha13</version>
			<fixedVersion>1.0.0.Alpha14</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.host.controller.operations.HttpManagementAddHandler.java</file>
			<file type="M">org.jboss.as.host.controller.operations.NativeManagementAddHandler.java</file>
			<file type="M">org.jboss.as.server.operations.HttpManagementAddHandler.java</file>
			<file type="M">org.jboss.as.host.controller.operations.HttpManagementRemoveHandler.java</file>
			<file type="M">org.jboss.as.server.operations.NativeManagementAddHandler.java</file>
		</fixedFiles>
	</bug>
	<bug id="286" opendate="2014-11-26 18:06:16" fixdate="2014-11-27 14:27:32" resolution="Done">
		<buginformation>
			<summary>The SecurityRealmService should only perform a generic mapping to RealmUser if really required.</summary>
			<description>If there is a more accurate way to calculate the RealmUser then use it.</description>
			<version>1.0.0.Alpha13</version>
			<fixedVersion>1.0.0.Alpha14</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.domain.management.security.SecurityRealmService.java</file>
		</fixedFiles>
	</bug>
	<bug id="285" opendate="2014-11-14 14:25:02" fixdate="2014-12-03 19:09:09" resolution="Done">
		<buginformation>
			<summary>cli tab completion gets confused by double slash</summary>
			<description>Using two slashes in a CLI path and hitting TAB confuses the auto-completion</description>
			<version>1.0.0.Alpha13</version>
			<fixedVersion>1.0.0.Alpha14</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.cli.parsing.test.AddressOnlyParsingTestCase.java</file>
			<file type="M">org.jboss.as.cli.operation.impl.DefaultOperationRequestParser.java</file>
			<file type="M">org.jboss.as.cli.operation.CommandLineParser.java</file>
			<file type="M">org.jboss.as.cli.operation.impl.DefaultCallbackHandler.java</file>
		</fixedFiles>
	</bug>
	<bug id="439" opendate="2014-12-02 14:51:55" fixdate="2014-12-05 16:51:31" resolution="Done">
		<buginformation>
			<summary>Wrong format of IPv6 addresses in log entries</summary>
			<description>IPv6 addresses in log files are in a wrong format, the [ ] are missing:






09:18:44,203 INFO  [org.jboss.as] (Controller Boot Thread) JBAS015951: Admin console listening on http://2620:52:0:105f::ffff:2:9990






It should be:






http://[2620:52:0:105f::ffff:2]:9990 





</description>
			<version>1.0.0.Alpha13</version>
			<fixedVersion>1.0.0.Alpha14</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.network.NetworkUtilsTestCase.java</file>
			<file type="M">org.jboss.as.network.NetworkUtils.java</file>
			<file type="M">org.jboss.as.server.BootstrapListener.java</file>
		</fixedFiles>
	</bug>
	<bug id="449" opendate="2014-12-05 16:00:19" fixdate="2014-12-05 23:16:06" resolution="Done">
		<buginformation>
			<summary>MBeanRegistrationService throws NameNotFoundException "java:comp/BeanManager" when starting/stoping the MBean</summary>
			<description>This issue happens if you create an MBean in your EJB and deploy the EJB. The steps to reproduce the issue is the following:






git clone https://github.com/zhfeng/test_jmx_ejb




cd test_jmx_ejb




mvn clean install






After starting the wildfly server, copy the test_jmx_ejb-1.0.jar to the deployment directory of the wildfly and you will see the exception 






11:39:30,064 ERROR [org.jboss.as.weld] (MSC service thread 1-8) WFLYWELD0002: Failed to tear down Weld contexts: javax.naming.NameNotFoundException: java:comp/BeanManager




	at org.jboss.as.naming.InitialContext$DefaultInitialContext.findContext(InitialContext.java:187)




	at org.jboss.as.naming.InitialContext$DefaultInitialContext.lookup(InitialContext.java:231)




	at org.jboss.as.naming.NamingContext.lookup(NamingContext.java:188)




	at org.jboss.as.naming.NamingContext.lookup(NamingContext.java:184)




	at javax.naming.InitialContext.lookup(InitialContext.java:411) [rt.jar:1.7.0_21]




	at javax.naming.InitialContext.lookup(InitialContext.java:411) [rt.jar:1.7.0_21]




	at org.jboss.as.weld.arquillian.WeldContextSetup.teardown(WeldContextSetup.java:108)




	at org.jboss.as.jmx.MBeanRegistrationService.start(MBeanRegistrationService.java:106) [wildfly-jmx-1.0.0.Alpha9.jar:1.0.0.Alpha9]




	at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1948) [jboss-msc-1.2.2.Final.jar:1.2.2.Final]




	at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1881) [jboss-msc-1.2.2.Final.jar:1.2.2.Final]




	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145) [rt.jar:1.7.0_21]




	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615) [rt.jar:1.7.0_21]




	at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_21]






It looks like the JavaNamespaceSetup teardown happens before the WeldContextSetup so it throws NameNotFoundException in the WeldContextSetup teardown.
The possible fix is to reverse calling the setupActions.</description>
			<version>1.0.0.Alpha13</version>
			<fixedVersion>1.0.0.Alpha14</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.jmx.MBeanRegistrationService.java</file>
		</fixedFiles>
		<links>
			<link type="Causality" description="causes">4008</link>
		</links>
	</bug>
	<bug id="267" opendate="2014-11-19 19:47:31" fixdate="2014-12-05 23:16:30" resolution="Done">
		<buginformation>
			<summary>CLI prints output twice if using cli client jar</summary>
			<description>If you are using the CLI client jar, all output is printed twice.  This is because JBoss logging is not set up and by default CommandContextImpl is printing log messages to standard out.  The output will look something like this:






[standalone@localhost:9999 /] :read-children-types




Nov 19, 2014 8:57:19 AM org.jboss.as.cli.impl.CommandContextImpl printLine




INFO: {




    "outcome" =&amp;gt; "success",




    "result" =&amp;gt; [




        "core-service",




        "deployment",




        "deployment-overlay",




        "extension",




        "interface",




        "path",




        "socket-binding-group",




        "subsystem",




        "system-property"




    ]




}




{




    "outcome" =&amp;gt; "success",




    "result" =&amp;gt; [




        "core-service",




        "deployment",




        "deployment-overlay",




        "extension",




        "interface",




        "path",




        "socket-binding-group",




        "subsystem",




        "system-property"




    ]




}





</description>
			<version>1.0.0.Alpha13</version>
			<fixedVersion>1.0.0.Alpha14</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.cli.CommandLineMain.java</file>
		</fixedFiles>
	</bug>
	<bug id="438" opendate="2014-12-02 14:36:19" fixdate="2014-12-09 14:07:17" resolution="Done">
		<buginformation>
			<summary>The CLI freezes in phase of requesting username/password</summary>
			<description>CLI doesn&amp;amp;apos;t terminate </description>
			<version>1.0.0.Alpha13</version>
			<fixedVersion>1.0.0.Alpha15</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.cli.impl.CLIModelControllerClient.java</file>
		</fixedFiles>
		<links>
			<link type="Superset" description="is incorporated by">440</link>
		</links>
	</bug>
	<bug id="451" opendate="2014-12-08 16:16:20" fixdate="2014-12-09 20:54:02" resolution="Done">
		<buginformation>
			<summary>ResolveExpressionHandler is overly simplistic in expression resolution</summary>
			<description>ResolveExpressionHandler deliberately does not make use of the full range of expression resolutions sources, because by design the intent is not to support vault resolution.
However, the way it implements that limitation is by simply calling ModelNode.resolve(). That is overly restrictive, as DMR alone does not support other valid resolution features, i.e. nested expressions and recursive resolution.
Fix is to switch the handler to use an ExpressionResolver impl, just one that doesn&amp;amp;apos;t plug in the vault resolver.</description>
			<version>1.0.0.Alpha14</version>
			<fixedVersion>1.0.0.Alpha15</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.ExpressionResolver.java</file>
			<file type="M">org.jboss.as.controller.operations.common.ResolveExpressionHandler.java</file>
			<file type="M">org.wildfly.core.test.standalone.mgmt.api.core.ResolveExpressionTestCase.java</file>
		</fixedFiles>
	</bug>
	<bug id="229" opendate="2014-11-07 15:20:11" fixdate="2014-12-16 15:37:45" resolution="Done">
		<buginformation>
			<summary>server-config operations "leaks" to server&amp;apos;s resources</summary>
			<description>Start a regular domain
Any operations on server children with the same names that server-config operations (:start, :stop, :restart, :kill) are executed instead of being rejected because the actual resources at the operation address does not define them.
Examples:






[domain@localhost:9990 /] /host=master/server=server-one/subsystem=undertow:start




{




    "outcome" =&amp;gt; "failed",




    "failure-description" =&amp;gt; "WFLYCTL0158: Operation handler failed: java.util.NoSuchElementException: No child &amp;amp;apos;undertow&amp;amp;apos; exists",




    "rolled-back" =&amp;gt; true




}









=&amp;gt;









[Host Controller] 16:15:30,231 ERROR [org.jboss.as.controller.management-operation] (management-handler-thread - 15) WFLYCTL0013: Operation ("restart") failed - address: ([




[Host Controller]     ("host" =&amp;gt; "master"),




[Host Controller]     ("server" =&amp;gt; "server-one"),




[Host Controller]     ("subsystem" =&amp;gt; "undertow")




[Host Controller] ]) - failure description: "WFLYHC0047: Cannot restart server undertow as it is not currently started; it is STOPPED"




[Host Controller] 16:18:43,764 ERROR [org.jboss.as.controller.management-operation] (management-handler-thread - 18) WFLYCTL0013: Operation ("start") failed - address: ([




[Host Controller]     ("host" =&amp;gt; "master"),




[Host Controller]     ("server" =&amp;gt; "server-one"),




[Host Controller]     ("subsystem" =&amp;gt; "undertow")




[Host Controller] ]): java.util.NoSuchElementException: No child &amp;amp;apos;undertow&amp;amp;apos; exists




[Host Controller]       at org.jboss.dmr.ModelValue.requireChild(ModelValue.java:369)




[Host Controller]       at org.jboss.dmr.ObjectModelValue.requireChild(ObjectModelValue.java:299)




[Host Controller]       at org.jboss.dmr.ModelNode.require(ModelNode.java:870)




[Host Controller]       at org.jboss.as.host.controller.ManagedServerBootCmdFactory.&amp;lt;init&amp;gt;(ManagedServerBootCmdFactory.java:93)




[Host Controller]       at org.jboss.as.host.controller.ServerInventoryImpl.createBootFactory(ServerInventoryImpl.java:629)




[Host Controller]       at org.jboss.as.host.controller.ServerInventoryImpl.startServer(ServerInventoryImpl.java:200)




[Host Controller]       at org.jboss.as.host.controller.operations.ServerStartHandler$1.execute(ServerStartHandler.java:110)




[Host Controller]       at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:728)




[Host Controller]       at org.jboss.as.controller.AbstractOperationContext.doCompleteStep(AbstractOperationContext.java:563)




[Host Controller]       at org.jboss.as.controller.AbstractOperationContext.completeStepInternal(AbstractOperationContext.java:336)




[Host Controller]       at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:312)




[Host Controller]       at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1160)




[Host Controller]       at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:356)




[Host Controller]       at org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:215)




[Host Controller]       at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.doExecute(ModelControllerClientOperationHandler.java:220)




[Host Controller]       at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.access$300(ModelControllerClientOperationHandler.java:147)




[Host Controller]       at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:169)




[Host Controller]       at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:165)




[Host Controller]       at java.security.AccessController.doPrivileged(Native Method)




[Host Controller]       at javax.security.auth.Subject.doAs(Subject.java:422)




[Host Controller]       at org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:94)




[Host Controller]       at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1.execute(ModelControllerClientOperationHandler.java:165)




[Host Controller]       at org.jboss.as.protocol.mgmt.AbstractMessageHandler$2$1.doExecute(AbstractMessageHandler.java:298)




[Host Controller]       at org.jboss.as.protocol.mgmt.AbstractMessageHandler$AsyncTaskRunner.run(AbstractMessageHandler.java:518)




[Host Controller]       at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)




[Host Controller]       at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)




[Host Controller]       at java.lang.Thread.run(Thread.java:745)




[Host Controller]       at org.jboss.threads.JBossThread.run(JBossThread.java:320)









[domain@localhost:9990 /] /host=master/server=server-one/subsystem=undertow:stop




{




    "outcome" =&amp;gt; "success",




    "result" =&amp;gt; "STOPPED"




}









[domain@localhost:9990 /] /host=master/server=server-one/subsystem=undertow:kill




{"outcome" =&amp;gt; "success"}






If the corresponding server-config resource is actually stopped, the operations fail because there is no resource at the operation&amp;amp;apos;s address.</description>
			<version>1.0.0.Alpha11</version>
			<fixedVersion>1.0.0.Alpha15</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.registry.ProxyControllerRegistration.java</file>
			<file type="M">org.jboss.as.controller.registry.DelegatingImmutableManagementResourceRegistration.java</file>
			<file type="M">org.jboss.as.subsystem.test.SubsystemTestDelegate.java</file>
			<file type="M">org.jboss.as.controller.registry.NodeSubregistry.java</file>
			<file type="M">org.jboss.as.controller.registry.ImmutableManagementResourceRegistration.java</file>
			<file type="M">org.jboss.as.controller.registry.ConcreteResourceRegistration.java</file>
			<file type="M">org.jboss.as.controller.registry.AbstractResourceRegistration.java</file>
			<file type="M">org.jboss.as.controller.registry.DelegatingManagementResourceRegistration.java</file>
			<file type="M">org.jboss.as.domain.controller.operations.AbstractOperationTestCase.java</file>
			<file type="M">org.jboss.as.controller.extension.ExtensionRegistry.java</file>
			<file type="M">org.jboss.as.controller.registry.AliasResourceRegistration.java</file>
		</fixedFiles>
	</bug>
	<bug id="484" opendate="2014-12-16 23:11:07" fixdate="2014-12-23 00:18:03" resolution="Done">
		<buginformation>
			<summary>OperationContext.getResourceRegistrationForUpdate().registerAlias(...) throws AssertionError</summary>
			<description>OperationContext.getResourceRegistrationForUpdate().registerAlias(...) throws the following:






java.lang.AssertionError: Unknown alias type




	at org.jboss.as.controller.registry.AbstractResourceRegistration.registerAlias(AbstractResourceRegistration.java:503)




	at org.jboss.as.controller.registry.DelegatingManagementResourceRegistration.registerAlias(DelegatingManagementResourceRegistration.java:310)




	at org.jboss.as.clustering.jgroups.subsystem.TransportResourceDefinition$5$1.execute(TransportResourceDefinition.java:360)




	at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:728)




	at org.jboss.as.controller.AbstractOperationContext.doCompleteStep(AbstractOperationContext.java:563)




	at org.jboss.as.controller.AbstractOperationContext.completeStepInternal(AbstractOperationContext.java:336)




	at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:312)




	at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1163)




	at org.jboss.as.controller.ModelControllerImpl.boot(ModelControllerImpl.java:421)




	at org.jboss.as.controller.AbstractControllerService.boot(AbstractControllerService.java:304)




	at org.jboss.as.model.test.ModelTestModelControllerService.boot(ModelTestModelControllerService.java:256)




	at org.jboss.as.controller.AbstractControllerService.boot(AbstractControllerService.java:299)




	at org.jboss.as.controller.AbstractControllerService$1.run(AbstractControllerService.java:266)




	at java.lang.Thread.run(Thread.java:745)






This is because OperationContext.getResourceRegistrationForUpdate() returns a DelegatingManagementResourceRegistration, which does not extend AbstractResourceRegistration - so the assertion fails.
Is there a technical reason why this should not work?</description>
			<version>1.0.0.Alpha14</version>
			<fixedVersion>1.0.0.Alpha15</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.registry.AbstractResourceRegistration.java</file>
		</fixedFiles>
	</bug>
	<bug id="492" opendate="2015-01-06 16:46:38" fixdate="2015-01-06 22:17:22" resolution="Done">
		<buginformation>
			<summary>fix JMX ObjectNameAddressUtil#toPathAddress</summary>
			<description>The code in ObjectNameAddressUtil#toPathAddress is wrong: it must look for the childAddress&amp;amp;apos;s submodel, not the address of the registry itself.
The current code fails with the exception:
org.jboss.as.controller._private.OperationFailedRuntimeException: WFLYCTL0071: Duplicate path element &amp;amp;apos;subsystem&amp;amp;apos; found [ "WFLYCTL0071: Duplicate path element &amp;amp;apos;subsystem&amp;amp;apos; found" ]</description>
			<version>1.0.0.Alpha15</version>
			<fixedVersion>1.0.0.Alpha16</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.jmx.model.ObjectNameAddressUtilTestCase.java</file>
			<file type="M">org.jboss.as.jmx.model.ObjectNameAddressUtil.java</file>
		</fixedFiles>
	</bug>
	<bug id="497" opendate="2015-01-12 16:35:08" fixdate="2015-01-14 17:35:39" resolution="Done">
		<buginformation>
			<summary>OperationStepHandlers for audit log handler add ops prematurely validate</summary>
			<description>SyslogAuditLogHandlerAddHandler and FileAuditLogHandlerAddHandler are doing reference validation directly in populateModel. This should instead be done in a separate step, removing the requirement to have the add op for the formatter occur before the add op for the handler, so long as both ops occur within the set of ops handled by the same OperationContext.
This will simplify booting from a filesystem tree instead of xml, removing the need to persist ordering information about formatter/handler in the FS.</description>
			<version>1.0.0.Alpha15</version>
			<fixedVersion>1.0.0.Alpha16</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.domain.management.audit.FileAuditLogHandlerResourceDefinition.java</file>
			<file type="M">org.jboss.as.domain.management.audit.SyslogAuditLogHandlerResourceDefinition.java</file>
			<file type="M">org.jboss.as.domain.management.audit.HandlerUtil.java</file>
		</fixedFiles>
	</bug>
	<bug id="501" opendate="2015-01-13 16:52:12" fixdate="2015-01-16 15:44:58" resolution="Done">
		<buginformation>
			<summary>ServerGroupAddHandler should add a separate step to validate profile and socket-binding-group refs</summary>
			<description>Validating references directly will imply specific ordering, in this case profile and socket-binding-group will have to be added before this handler executes. Postponing the validation to the next step will remove such a requirement.</description>
			<version>1.0.0.Alpha15</version>
			<fixedVersion>1.0.0.Alpha16</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.domain.controller.operations.ServerGroupAddHandler.java</file>
			<file type="M">org.jboss.as.domain.controller.operations.ServerGroupAffectedResourceServerGroupOperationsTestCase.java</file>
		</fixedFiles>
	</bug>
	<bug id="507" opendate="2015-01-16 14:01:08" fixdate="2015-01-20 10:16:26" resolution="Done">
		<buginformation>
			<summary> Unit test FileSystemDeploymentServiceUnitTestCase fails on IBM JDK </summary>
			<description>Always on IBM JDK org.jboss.as.server.deployment.scanner.FileSystemDeploymentServiceUnitTestCase.testNoUndeployment fails with:

java.net.ConnectException: Connection refused
java.lang.UnsupportedOperationException: cannot get the capability, performing dispose of the retransforming environment

</description>
			<version>1.0.0.Alpha15</version>
			<fixedVersion>1.0.0.Alpha16</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.patching.tests.PatchModuleInvalidationWithRenamingFailureTestCase.java</file>
		</fixedFiles>
	</bug>
	<bug id="500" opendate="2015-01-13 13:10:50" fixdate="2015-01-22 01:53:22" resolution="Done">
		<buginformation>
			<summary>domain mode: remove a path entry from a server instance fails</summary>
			<description>Adding a "path" to a "server-config" in domain mode (works fine) and then remove it again results in a NullPointerException</description>
			<version>1.0.0.Alpha15</version>
			<fixedVersion>1.0.0.Alpha16</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.services.path.PathRemoveHandler.java</file>
		</fixedFiles>
	</bug>
	<bug id="504" opendate="2015-01-15 04:59:38" fixdate="2015-01-22 01:55:37" resolution="Done">
		<buginformation>
			<summary>RBAC does not let server-group scoped roles read all hosts</summary>
			<description>The RBAC implementation is not allowing a server-group scoped role to read resources in the host=* tree unless one of these is true:
1) the host only contains a server mapped to the server group
2) the host doesn&amp;amp;apos;t contain any servers.
This is consistent with handling of other "mappable" things but is contrary to the docs, which declare
"In addition to these privileges, users in a server-group scoped role will have non-sensitive read privileges (equivalent to the Monitor role) for resources other than those listed above."
but don&amp;amp;apos;t list these host resources.
It&amp;amp;apos;s also unintuitive, as the s-g-s-r is actually allowed to add a server on the host, but can&amp;amp;apos;t read the other host resources before doing so.
Also, asking the DC for the list of host names will include the host, but trying to read its root resource will result in a NoSuchResourceException.
The issue dates back to 8.0, but recent changes to the console have resulted in this breaking console behavior.</description>
			<version>1.0.0.Alpha15</version>
			<fixedVersion>1.0.0.Alpha16</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.test.integration.domain.rbac.AbstractServerGroupScopedRolesTestCase.java</file>
			<file type="M">org.jboss.as.controller.access.constraint.ServerGroupEffectConstraint.java</file>
			<file type="M">org.jboss.as.controller.access.HostEffect.java</file>
			<file type="M">org.jboss.as.controller.HostServerGroupTracker.java</file>
		</fixedFiles>
	</bug>
	<bug id="503" opendate="2015-01-15 01:24:47" fixdate="2015-01-23 03:25:45" resolution="Done">
		<buginformation>
			<summary>Child resources under the deployment=XXX resource should be marked as runtime-only</summary>
			<description>Underneath a deployment resource there can be a large tree of runtime-only resources. Those resources are not getting the correct value for their isRuntime() property.
DeploymentModelUtils.getOrCreate() should call Resource.Factory.create(true) instead of just Resource.Factory.create().
Note this may break the console if it is doing a recursive read of deployment resources and not including the include-runtime=true param.</description>
			<version>1.0.0.Alpha15</version>
			<fixedVersion>1.0.0.Alpha16</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.subsystem.test.SubsystemTestDelegate.java</file>
			<file type="M">org.jboss.as.controller.registry.ManagementResourceRegistration.java</file>
			<file type="M">org.jboss.as.controller.logging.ControllerLogger.java</file>
			<file type="M">org.jboss.as.controller.registry.AbstractResourceRegistration.java</file>
			<file type="M">org.jboss.as.controller.registry.DelegatingManagementResourceRegistration.java</file>
			<file type="M">org.jboss.as.controller.extension.ExtensionRegistry.java</file>
			<file type="M">org.jboss.as.server.deployment.DeploymentModelUtils.java</file>
		</fixedFiles>
	</bug>
	<bug id="513" opendate="2015-01-21 01:58:02" fixdate="2015-01-23 03:26:42" resolution="Done">
		<buginformation>
			<summary>ConfigurationFile does invalid reload when special config file names are specified</summary>
			<description>ConfigurationFile records the value passed by -c or --[server|host|domain]-config and uses it to determine the boot file to use whenever it needs to boot. This is ok during initial boot, but it reuses it during reloads.
This breaks down when specials values like "initial", "boot", "v1" or some snapshot are used. The reload ends up reading from the original file again, not from the latest persisted one, and any changes made are lost.</description>
			<version>1.0.0.Alpha15</version>
			<fixedVersion>1.0.0.Alpha16</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.persistence.ConfigurationFile.java</file>
		</fixedFiles>
	</bug>
	<bug id="514" opendate="2015-01-21 02:04:14" fixdate="2015-01-23 03:27:04" resolution="Done">
		<buginformation>
			<summary>ConfigurationFile.snapshot() stores the wrong file when config persistence is disabled</summary>
			<description>ConfigurationFile.snapshot() always uses mainFile as the source of the snapshot, but when --read-only-server-config and the domain equivalents are used, that file isn&amp;amp;apos;t updated as config changes are made. In this case lastFile should be used.</description>
			<version>1.0.0.Alpha15</version>
			<fixedVersion>1.0.0.Alpha16</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.persistence.ConfigurationFile.java</file>
		</fixedFiles>
	</bug>
	<bug id="505" opendate="2015-01-15 08:07:22" fixdate="2015-01-23 22:23:36" resolution="Done">
		<buginformation>
			<summary>Fix double redeployment due to .failed file and a artifact with newer timestamp.</summary>
			<description>Issue found and described in https://bugzilla.redhat.com/show_bug.cgi?id=1169239
steps to reproduce:
1. deploy a "Test.war"
2. Change something in "Test.war" to fail it.
3. "Test.war.failed" file will be created.
4. stop JBoss EAP.
5. Revert the changes done in "Test.war" so that it will deploy successfully. 
6. Now there are two files ("Test.war.failed" and "Test.war", due to correction, Test.war must have a newer timestamp than Test.war.failed)in deployment directory. 
7. Restart JBoss EAP, it will fail with below Error :
The problem happens as a result of redundant redeployment in next reboot. During servert reboot, it will try to redeploy the application due to found .failed file, it also will try to redeploy same application because Test.war has a newer timestamp to see the problem. This will cause server startup failure as:






ERROR [org.jboss.as.controller.management-operation] (ServerService Thread Pool -- 18) JBAS014613: Operation ("add") failed - address: ([("deployment" =&amp;gt; "Test.war")]) - failure description: "JBAS014803: Duplicate resource [(\"deployment\" =&amp;gt; \"Test.war\")]





</description>
			<version>1.0.0.Alpha15</version>
			<fixedVersion>1.0.0.Beta5</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.server.deployment.scanner.FileSystemDeploymentService.java</file>
		</fixedFiles>
	</bug>
	<bug id="495" opendate="2015-01-12 08:48:29" fixdate="2015-01-23 22:27:07" resolution="Done">
		<buginformation>
			<summary>WFLY won&amp;apos;t startup due to "WFLYCTL0212: Duplicate resource [(\"deployment\" =&gt; \"xxx.war\")]"</summary>
			<description>WFLY won&amp;amp;apos;t startup due to "WFLYCTL0212: Duplicate resource [(\"deployment\" =&amp;gt; \"xxx.war\")]"
If you firstly deploy a .war application by CLI command, then deploy 2nd time same .war application by copying it to /depolyment directory. After server restart, it shows:






15:26:26,913 INFO  [org.jboss.as] (MSC service thread 1-8) WFLYSRV0049: WildFly Full 9.0.0.Alpha2-SNAPSHOT (WildFly Core 1.0.0.Alpha15) starting




15:26:27,133 ERROR [org.jboss.as.controller.management-operation] (Controller Boot Thread) WFLYCTL0013: Operation ("add") failed - address: ([("deployment" =&amp;gt; "xxx.war")]) - failure description: "WFLYCTL0212: Duplicate resource [(\"deployment\" =&amp;gt; \"xxx.war\")]"




15:26:27,136 FATAL [org.jboss.as.server] (Controller Boot Thread) WFLYSRV0056: Server boot has failed in an unrecoverable manner; exiting. See previous messages for details.




15:26:27,138 INFO  [org.jboss.as.server] (Thread-2) WFLYSRV0220: Server shutdown has been requested.




15:26:27,153 INFO  [org.jboss.as] (MSC service thread 1-1) WFLYSRV0050: WildFly Full 9.0.0.Alpha2-SNAPSHOT (WildFly Core 1.0.0.Alpha15) stopped in 4ms






steps to reproduce:
1. start wildfly and deploy a .war application by CLI.
2. copy same .war application to /deployment directory
3. restart wildfly to see the error message. 
This happens because step 2 does a "full-replace-deployment" operation which does not remove content from standalone/data/content/aa/2d0425dd53572294d591b56efdee2680539eaf/content and deployment info from configuration file(standalone.xml). Therefore, you will have xxx.war in standalone/data/content and configuration file(standalone.xml), also a xxx.war and xxx.war.deployed file inside /standalone/deployments. A second time server restart will cause a duplicate resource error.</description>
			<version>1.0.0.Alpha15</version>
			<fixedVersion>1.0.0.Alpha16</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.server.deployment.DeploymentFullReplaceHandler.java</file>
		</fixedFiles>
		<links>
			<link type="Causality" description="causes">1577</link>
			<link type="Causality" description="causes">1569</link>
		</links>
	</bug>
	<bug id="499" opendate="2015-01-13 01:54:46" fixdate="2015-02-06 23:21:02" resolution="Done">
		<buginformation>
			<summary>System properties are broken in domain mode</summary>
			<description>There seems to be some weirdness in how system properties are being propagated to domain mode servers, and in many cases they are not being applied. 
This appears to be an issue with the boot time handling of system properties.
The only way I could get the property to be applied was to start the server first, then add the property using boot-time=false, although even in this case the property will disappear if the domain is restarted or the server is reloaded. 
</description>
			<version>1.0.0.Alpha15</version>
			<fixedVersion>1.0.0.Alpha17</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.test.integration.domain.suites.CoreResourceManagementTestCase.java</file>
			<file type="M">org.jboss.as.server.operations.SystemPropertyAddHandler.java</file>
			<file type="M">org.jboss.as.server.controller.resources.SystemPropertyResourceDefinition.java</file>
			<file type="M">org.jboss.as.host.controller.ManagedServerBootCmdFactory.java</file>
		</fixedFiles>
		<links>
			<link type="Causality" description="causes">4299</link>
		</links>
	</bug>
	<bug id="534" opendate="2015-02-08 01:39:32" fixdate="2015-02-08 23:40:38" resolution="Done">
		<buginformation>
			<summary>Deployment scanner runtime-failure-causes-rollback attribute is not stored to the model</summary>
			<description>The runtime-failure-causes-rollback is never stored to the model in the add op.</description>
			<version>1.0.0.Alpha16</version>
			<fixedVersion>1.0.0.Alpha17</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.server.deployment.scanner.DeploymentScannerDefinition.java</file>
			<file type="M">org.jboss.as.server.deployment.scanner.DeploymentScannerParsingTestCase.java</file>
		</fixedFiles>
	</bug>
	<bug id="522" opendate="2015-01-24 00:39:15" fixdate="2015-02-12 22:59:47" resolution="Done">
		<buginformation>
			<summary>BlockingNotificationMBeanServer will NPE if resolvedDomain or expressionsDomain are not configured</summary>
			<description>If the jmx subsystem &amp;lt;expose-resolved-model/&amp;gt; and/or  &amp;lt;expose-expression-model/&amp;gt; settings are not configured, but &amp;lt;remoting-connector/&amp;gt; is BlockingNotificationMBeanServer will throw NPEs in isInExposedModelControllerDomains due to passing null into java.util.regex.Pattern.matcher(...).
Simply null checks will fix the problem.</description>
			<version>1.0.0.Alpha16</version>
			<fixedVersion>1.0.0.Alpha16</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.jmx.BlockingNotificationMBeanServer.java</file>
		</fixedFiles>
	</bug>
	<bug id="540" opendate="2015-02-12 17:43:23" fixdate="2015-02-13 00:22:02" resolution="Done">
		<buginformation>
			<summary>CVE-2014-7849 WildFly Domain Management: Limited RBAC authorization bypass</summary>
			<description>It was discovered that the Role Based Access Control (RBAC) implementation did not sufficiently verify all authorization conditions that are required by the Maintainer role to perform certain administrative actions. An authenticated user with the Maintainer role could use this flaw to add, modify, or undefine a limited set of attributes and their values, which otherwise cannot be written to.</description>
			<version>1.0.0.Alpha1</version>
			<fixedVersion>1.0.0.Alpha18</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.OperationContextImpl.java</file>
			<file type="M">org.jboss.as.host.controller.resources.NativeManagementResourceDefinition.java</file>
			<file type="M">org.jboss.as.model.test.ModelTestModelDescriptionValidator.java</file>
			<file type="M">org.jboss.as.host.controller.resources.HttpManagementResourceDefinition.java</file>
			<file type="M">org.jboss.as.server.mgmt.HttpManagementResourceDefinition.java</file>
			<file type="M">org.jboss.as.server.mgmt.NativeManagementResourceDefinition.java</file>
			<file type="M">org.jboss.as.remoting.ConnectorResource.java</file>
			<file type="M">org.jboss.as.controller.test.AbstractControllerTestBase.java</file>
			<file type="M">org.jboss.as.test.integration.mgmt.access.ReadResourceDescriptionVsActualOperationTestCase.java</file>
			<file type="M">org.jboss.as.controller.access.rbac.AddResourceTestCase.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned to">4945</link>
		</links>
	</bug>
	<bug id="541" opendate="2015-02-12 23:40:36" fixdate="2015-02-13 17:40:36" resolution="Done">
		<buginformation>
			<summary>Bad equals test in WFLY-3306 fix</summary>
			<description>GlobalOperationHandler L458 has this:






if ((validChildType == null || validChildType.equals(validChildType))






The second test is silly; should be using var &amp;amp;apos;type&amp;amp;apos;.</description>
			<version>1.0.0.Alpha17</version>
			<fixedVersion>1.0.0.Alpha18</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.operations.global.GlobalOperationHandlers.java</file>
		</fixedFiles>
		<links>
			<link type="Causality" description="is caused by">3306</link>
		</links>
	</bug>
	<bug id="520" opendate="2015-01-23 16:22:05" fixdate="2015-02-20 18:20:17" resolution="Done">
		<buginformation>
			<summary>Random NPE in org.jboss.as.controller.OperationContextImpl.createTargetAttribute</summary>
			<description>A NullPointerException randomly occurs in org.jboss.as.controller.OperationContextImpl.createTargetAttribute(OperationContextImpl.java:1172) when getMBeanCount is called over and over.
See attached server.log and reproducer






00:16:01,315 ERROR [org.jboss.as.controller.management-operation] (pool-2-thread-2) WFLYCTL0013: Operation ("check-default-resource-access") failed - address: ([




    ("core-service" =&amp;gt; "management"),




    ("service" =&amp;gt; "management-operations"),




    ("active-operation" =&amp;gt; "-1652526387")




]): java.lang.NullPointerException




	at org.jboss.as.controller.OperationContextImpl.createTargetAttribute(OperationContextImpl.java:1172) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]




	at org.jboss.as.controller.OperationContextImpl.authorizeResource(OperationContextImpl.java:1136) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]




	at org.jboss.as.controller.OperationContextImpl.authorizeResource(OperationContextImpl.java:130) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]




	at org.jboss.as.controller.operations.global.ReadResourceDescriptionHandler$CheckResourceAccessHandler.execute(ReadResourceDescriptionHandler.java:467) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]




	at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:700) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]




	at org.jboss.as.controller.AbstractOperationContext.doCompleteStep(AbstractOperationContext.java:535) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]




	at org.jboss.as.controller.AbstractOperationContext.completeStepInternal(AbstractOperationContext.java:308) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]




	at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:303) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]




	at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1158) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]




	at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:328) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]




	at org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:197) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]




	at org.jboss.as.jmx.model.ResourceAccessControlUtil.getResourceAccess(ResourceAccessControlUtil.java:85) [wildfly-jmx-1.0.0.Alpha9.jar:1.0.0.Alpha9]




	at org.jboss.as.jmx.model.RootResourceIterator.doIterate(RootResourceIterator.java:51) [wildfly-jmx-1.0.0.Alpha9.jar:1.0.0.Alpha9]




	at org.jboss.as.jmx.model.RootResourceIterator.doIterate(RootResourceIterator.java:61) [wildfly-jmx-1.0.0.Alpha9.jar:1.0.0.Alpha9]




	at org.jboss.as.jmx.model.RootResourceIterator.doIterate(RootResourceIterator.java:61) [wildfly-jmx-1.0.0.Alpha9.jar:1.0.0.Alpha9]




	at org.jboss.as.jmx.model.RootResourceIterator.doIterate(RootResourceIterator.java:61) [wildfly-jmx-1.0.0.Alpha9.jar:1.0.0.Alpha9]




	at org.jboss.as.jmx.model.RootResourceIterator.iterate(RootResourceIterator.java:43) [wildfly-jmx-1.0.0.Alpha9.jar:1.0.0.Alpha9]




	at org.jboss.as.jmx.model.ModelControllerMBeanHelper.getMBeanCount(ModelControllerMBeanHelper.java:105) [wildfly-jmx-1.0.0.Alpha9.jar:1.0.0.Alpha9]




	at org.jboss.as.jmx.model.ModelControllerMBeanServerPlugin.getMBeanCount(ModelControllerMBeanServerPlugin.java:154) [wildfly-jmx-1.0.0.Alpha9.jar:1.0.0.Alpha9]




	at org.jboss.as.jmx.PluggableMBeanServerImpl.getMBeanCount(PluggableMBeanServerImpl.java:561) [wildfly-jmx-1.0.0.Alpha9.jar:1.0.0.Alpha9]




	at org.jboss.as.jmx.BlockingNotificationMBeanServer.getMBeanCount(BlockingNotificationMBeanServer.java:143) [wildfly-jmx-1.0.0.Alpha9.jar:1.0.0.Alpha9]




	at org.jboss.remotingjmx.protocol.v2.ServerProxy$GetMBeanCountHandler.handle(ServerProxy.java:655)




	at org.jboss.remotingjmx.protocol.v2.ServerCommon$MessageReciever$1$1.run(ServerCommon.java:153)




	at org.jboss.as.jmx.ServerInterceptorFactory$Interceptor$1.run(ServerInterceptorFactory.java:75) [wildfly-jmx-1.0.0.Alpha9.jar:1.0.0.Alpha9]




	at org.jboss.as.jmx.ServerInterceptorFactory$Interceptor$1.run(ServerInterceptorFactory.java:70) [wildfly-jmx-1.0.0.Alpha9.jar:1.0.0.Alpha9]




	at java.security.AccessController.doPrivileged(Native Method) [rt.jar:1.7.0_51]




	at javax.security.auth.Subject.doAs(Subject.java:415) [rt.jar:1.7.0_51]




	at org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:94) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]




	at org.jboss.as.jmx.ServerInterceptorFactory$Interceptor.handleEvent(ServerInterceptorFactory.java:70) [wildfly-jmx-1.0.0.Alpha9.jar:1.0.0.Alpha9]




	at org.jboss.remotingjmx.protocol.v2.ServerCommon$MessageReciever$1.run(ServerCommon.java:149)




	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145) [rt.jar:1.7.0_51]




	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615) [rt.jar:1.7.0_51]




	at java.lang.Thread.run(Thread.java:744) [rt.jar:1.7.0_51]





</description>
			<version>1.0.0.Alpha9</version>
			<fixedVersion>1.0.0.Alpha19</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.OperationContextImpl.java</file>
		</fixedFiles>
	</bug>
	<bug id="545" opendate="2015-02-16 17:13:33" fixdate="2015-02-22 17:29:08" resolution="Done">
		<buginformation>
			<summary>Inconsistent stage for adding/updating/removing system properties</summary>
			<description>SystemPropertyAddHandler and SystemPropertyValueWriteAttributeHandler both update the VM property map during Stage.MODEL, while SystemPropertyRemoveHandler waits until Stage.RUNTIME.
This can lead to unintuitive behavior in a composite op, e.g. if a user does a remove and then an add in a batch to change the value. The remove will actually update the runtime after the add, resulting in the prop being unset.
The SystemPropertyAddHandler and SystemPropertyValueWriteAttributeHandler behavior is non-standard as they change non-model information in Stage.MODEL, but that was done deliberately (I forget exactly why.) So the fix should be to adapt SystemPropertyRemoveHandler.
This is minor because the remove + add in a composite workflow is a harder-to-use alternative to using a single write-attribute op.</description>
			<version>1.0.0.Alpha18</version>
			<fixedVersion>1.0.0.Alpha19</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.server.operations.SystemPropertyRemoveHandler.java</file>
			<file type="M">org.wildfly.core.test.standalone.mgmt.BasicOperationsUnitTestCase.java</file>
		</fixedFiles>
		<links>
			<link type="Superset" description="is incorporated by">99</link>
		</links>
	</bug>
	<bug id="536" opendate="2015-02-10 17:06:00" fixdate="2015-02-24 01:40:47" resolution="Done">
		<buginformation>
			<summary>Sanitize origins  ports in CORS</summary>
			<description>When checking the origins we should remove the port if the port is the default one so that we ensure we have a correct matching</description>
			<version>1.0.0.Alpha17</version>
			<fixedVersion>1.0.0.Alpha19</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.domain.http.server.cors.CorsHttpHandler.java</file>
			<file type="M">org.jboss.as.domain.http.server.cors.CorsUtil.java</file>
			<file type="M">org.jboss.as.domain.http.server.DomainApiCheckHandler.java</file>
		</fixedFiles>
		<links>
			<link type="Dependency" description="blocks">535</link>
		</links>
	</bug>
	<bug id="566" opendate="2015-02-25 18:04:04" fixdate="2015-02-26 14:02:56" resolution="Done">
		<buginformation>
			<summary>space- and comma-separated attribute marshaller are broken</summary>
			<description>The AttributeMarshaller&amp;amp;apos;s STRING_LIST and COMMA_STRING_LIST are broken as they override marshallAsElement while it&amp;amp;apos;s their marshallAsAttribute method (inherited from DefaultAttributeMarshaller) that is called.</description>
			<version>1.0.0.Alpha19</version>
			<fixedVersion>1.0.0.Beta1</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.domain.management.parsing.ManagementXml.java</file>
			<file type="M">org.jboss.as.controller.SimpleListAttributeDefinitionUnitTestCase.java</file>
			<file type="M">org.jboss.as.server.parsing.StandaloneXml.java</file>
			<file type="M">org.jboss.as.controller.AttributeMarshaller.java</file>
			<file type="M">org.jboss.as.host.controller.parsing.HostXml.java</file>
			<file type="M">org.jboss.as.domain.management.security.KeytabResourceDefinition.java</file>
		</fixedFiles>
	</bug>
	<bug id="567" opendate="2015-02-25 21:02:52" fixdate="2015-02-28 06:42:59" resolution="Done">
		<buginformation>
			<summary>Invoking shutdown command for slave HC results in CLI disconnecting</summary>
			<description>Connect the CLI to the master in a domain with a slave HC and shut down the slave. CLI disconnects:






[domain@localhost:9990 /] shutdown --host=slave




[disconnected /]





</description>
			<version>1.0.0.Alpha19</version>
			<fixedVersion>1.0.0.Beta1</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.cli.handlers.ShutdownHandler.java</file>
		</fixedFiles>
		<links>
			<link type="Duplicate" description="duplicates">67</link>
		</links>
	</bug>
	<bug id="568" opendate="2015-02-19 19:54:30" fixdate="2015-03-04 02:13:39" resolution="Done">
		<buginformation>
			<summary>"jboss-deployment-structure.xml" with schema location fails to deploy</summary>
			<description>A "jboss-deployment-structure.xml" with a schemaLocation attribute will fail to deploy.
This is a sample file:
&amp;lt;jboss-deployment-structure xmlns="urn:jboss:deployment-structure:1.1"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="urn:jboss:deployment-structure:1.1 http://www.jboss.org/schema/jbossas/jboss-deployment-structure-1_1.xsd"&amp;gt;
...
&amp;lt;/jboss-deployment-structure&amp;gt;
And this is the deployment error:
And this is the parse exception:
Caused by: javax.xml.stream.XMLStreamException: ParseError at [row,col]:[3,129]
Message: JBAS018754: Unexpected content of type &amp;amp;apos;element start&amp;amp;apos;, name is &amp;amp;apos;
{urn:jboss:deployment-structure:1.1}
jboss-deployment-structure&amp;amp;apos;, text is: &amp;amp;apos;null&amp;amp;apos;
    at org.jboss.as.server.deployment.module.descriptor.JBossDeploymentStructureParser11.unexpectedContent(JBossDeploymentStructureParser11.java:1129) [wildfly-server-8.2.0.Final.jar:8.2.0.Final]
    at org.jboss.as.server.deployment.module.descriptor.JBossDeploymentStructureParser11.readElement(JBossDeploymentStructureParser11.java:211) [wildfly-server-8.2.0.Final.jar:8.2.0.Final]
    at org.jboss.as.server.deployment.module.descriptor.JBossDeploymentStructureParser11.readElement(JBossDeploymentStructureParser11.java:69) [wildfly-server-8.2.0.Final.jar:8.2.0.Final]
    at org.jboss.staxmapper.XMLMapperImpl.processNested(XMLMapperImpl.java:110)
    at org.jboss.staxmapper.XMLMapperImpl.parseDocument(XMLMapperImpl.java:69)
    at org.jboss.as.server.deployment.module.descriptor.DeploymentStructureDescriptorParser.parse(DeploymentStructureDescriptorParser.java:316) [wildfly-server-8.2.0.Final.jar:8.2.0.Final]
    ... 8 more
The schemaLocation attribute makes sense, because Eclipse will be able to validate the file,and you have code completion. With the JBossTools plugin, the "xmlns" attribute is enough to get all this, because JBossTools adds this file to the xml catalog.</description>
			<version>1.0.0.Alpha19</version>
			<fixedVersion>1.0.0.Beta1</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.server.deployment.module.descriptor.JBossDeploymentStructureParser11.java</file>
			<file type="M">org.jboss.as.server.deployment.module.descriptor.JBossDeploymentStructureParser12.java</file>
			<file type="M">org.jboss.as.server.deployment.module.descriptor.JBossDeploymentStructureParser10.java</file>
		</fixedFiles>
	</bug>
	<bug id="564" opendate="2015-02-24 13:09:43" fixdate="2015-03-05 22:40:36" resolution="Done">
		<buginformation>
			<summary>setXmlWrapperElement() doesn&amp;apos;t work properly with multiple resource children</summary>
			<description>





Jeff Mesnil 12:13 @ctomc hi tomaz. The setXmlWrapperElement() method in persistent xml builder API is supposed to add a XML wrapper around all the resource&amp;amp;apos;s XML elements, right? and not around each resource element.




ie it looks like &amp;lt;wrapper&amp;gt;&amp;lt;res /&amp;gt;&amp;lt;res /&amp;gt;&amp;lt;/wrapper&amp;gt; and not &amp;lt;wrapper&amp;gt;&amp;lt;res /&amp;gt;&amp;lt;/wrapper&amp;gt;&amp;lt;wrapper&amp;gt;&amp;lt;res /&amp;gt;&amp;lt;/wrapper&amp;gt;




Tomaz Cerar 12:17 hmm, you are right also around resources




it would be &amp;lt;wrapper&amp;gt; &amp;lt;res /&amp;gt; &amp;lt;res/&amp;gt; &amp;lt;/wrapper&amp;gt;




just remembered i had that in 1.0 xsd of undertow subsystem




Jeff Mesnil 12:20 yes, I want to wrap some resources (eg queue) in a wrapper (&amp;lt;queues&amp;gt;). But the persistent XM parser is broken (it wants one wrapper around each resource)




the XML persister is working as expected though




Tomaz Cerar @jmesnil you are right it is broken, i can reproduce it also on undertow-1.0.xml test case




i just had one resource under it so it passed





</description>
			<version>1.0.0.Alpha19</version>
			<fixedVersion>1.0.0.Beta1</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.persistence.PersistentResourceXMLParserTestCase.java</file>
			<file type="M">org.jboss.as.controller.PersistentResourceXMLDescription.java</file>
		</fixedFiles>
	</bug>
	<bug id="553" opendate="2015-02-18 23:23:50" fixdate="2015-03-06 12:29:58" resolution="Done">
		<buginformation>
			<summary>ModelControllerClientOperationHandler doesn&amp;apos;t manage the clientRequestExecutor properly </summary>
			<description>ModelControllerClientOperationHandler&amp;amp;apos;s constructor creates a ThreadPoolExecutor for handling client requests and then the class doesn&amp;amp;apos;t clean it up.
In addition, an instance of ModelControllerClientOperationHandler is created per channel, not one per ModelControllerClientOperationHandlerFactoryService. I know I at least thought of the thread pool as being per remote management interface, not per channel.
Making it be per ModelControllerClientOperationHandlerFactoryService and cleaning it up in that service&amp;amp;apos;s stop would be the easiest fix, but the pool settings may not be appropriate if we do that, so tread carefully.</description>
			<version>1.0.0.Alpha1</version>
			<fixedVersion>1.0.0.Beta1</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.remote.ModelControllerClientOperationHandler.java</file>
			<file type="M">org.jboss.as.controller.ModelControllerClientTestCase.java</file>
			<file type="M">org.jboss.as.controller.remote.AbstractModelControllerOperationHandlerFactoryService.java</file>
			<file type="M">org.jboss.as.host.controller.mgmt.MasterDomainControllerOperationHandlerService.java</file>
			<file type="M">org.jboss.as.controller.remote.ModelControllerClientOperationHandlerFactoryService.java</file>
		</fixedFiles>
		<links>
			<link type="Causality" description="is caused by">3225</link>
		</links>
	</bug>
	<bug id="552" opendate="2015-02-18 21:26:27" fixdate="2015-03-07 13:26:17" resolution="Done">
		<buginformation>
			<summary>SaslResource and SaslPolicyResource don&amp;apos;t deal with the parent resource correctly</summary>
			<description>SaslResource and SaslPolicyResource represent child configuration under a parent connector or http-connector resource. But their handlers (particularly add and remove) do not reflect this. They simply store config changes to the model and return without making runtime changes. So only if they are executed at boot or in a composite with the connector add op is their configuration data properly included in the runtime.
PropertyResource is a similar child of the connector resources, but it uses RestartParentResourceAddHandler, RestartParentWriteAttributeHandler and RestartParentResourceRemoveHandler.</description>
			<version>1.0.0.Alpha1</version>
			<fixedVersion>1.0.0.Beta1</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.remoting.PropertyResource.java</file>
			<file type="D">org.jboss.as.remoting.SaslAdd.java</file>
			<file type="D">org.jboss.as.remoting.SaslRemove.java</file>
			<file type="M">org.jboss.as.remoting.SaslResource.java</file>
			<file type="D">org.jboss.as.remoting.SaslPolicyAdd.java</file>
			<file type="M">org.jboss.as.remoting.SaslPolicyResource.java</file>
			<file type="D">org.jboss.as.remoting.SaslPolicyRemove.java</file>
			<file type="M">org.jboss.as.remoting.RemotingExtension.java</file>
		</fixedFiles>
	</bug>
	<bug id="581" opendate="2015-03-05 13:17:56" fixdate="2015-03-11 22:33:09" resolution="Done">
		<buginformation>
			<summary>CLI accepts operation requests with addresses ending on resource types</summary>
			<description>It doesn&amp;amp;apos;t concern the tab-completion. But if the address is entered manually and ends on a resource type, the generated operation request will target the parent resource.
[standalone@localhost:9999 /] echo-dmr /subsystem=logging/file-handler=:remove
{
    "address" =&amp;gt; [("subsystem" =&amp;gt; "logging")],
    "operation" =&amp;gt; "remove"
}</description>
			<version>1.0.0.Alpha19</version>
			<fixedVersion>1.0.0.Beta1</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.cli.parsing.test.OperationParsingTestCase.java</file>
			<file type="M">org.jboss.as.cli.operation.CommandLineParser.java</file>
			<file type="M">org.jboss.as.cli.operation.impl.DefaultCallbackHandler.java</file>
		</fixedFiles>
	</bug>
	<bug id="547" opendate="2015-02-17 10:10:30" fixdate="2015-03-13 01:18:40" resolution="Done">
		<buginformation>
			<summary>Unable to overlay resource in subunit/zip/jar file</summary>
			<description>It is possible to overlay resource directly in deployed jar, however, same resource can not be properly overlayed if said jar is deployed as part of ear ( possibly war as well ).
Example:
jar (xxx.jar):
/org/test/ejb/EJBImpl.class
/org/test/ejb/resourceToOverlya.txt
ear(yyy.ear) - war seems to be the subject of this as well
/xxx.jar
Overlay #1( over jar)
overlay target: xxx.jar/org/test/ejb/resourceToOverlya.txt
Result: proper deployment(EJB is deployed), resource has been overlayed
Overlay #2( over jar inside ear )
overlay target: org/test/ejb/resourceToOverlya.txt
Result: bad deployment, no EJB deployed, overlay target has been overlayed
Reason of such outcome is that VFS.exists() does not recognize JavaZipFileSystem$ZipNode/Entry as zipped archive and does not dive into children.
So what happens in here is as follows. When EAR is deployed OverlayProcessor kicks in at:
https://github.com/wildfly/wildfly-core/blob/master/server/src/main/java/org/jboss/as/server/deployment/DeploymentOverlayDeploymentUnitProcessor.java#L107
For this example ear/jar pair, first pair of values:
mountPoint: /content/yyy.ear/xxx.jar/org/test/ejb/resourceToOverlya.txt
parent:  /content/yyy.ear/xxx.jar/org/test/ejb
Outcome of exists() call == false, should be true.
this will iterate up to parent == /content/yyy.ear/xxx.jar
At this point, &amp;amp;apos;createParents&amp;amp;apos; contain some entries and 
https://github.com/wildfly/wildfly-core/blob/master/server/src/main/java/org/jboss/as/server/deployment/DeploymentOverlayDeploymentUnitProcessor.java#L114
will create tmp/virtual mounts for:

/content/yyy.ear/xxx.jar/org/test/ejb
/content/yyy.ear/xxx.jar/org/test
/content/yyy.ear/xxx.jar/org

What it will essentially do is create overlay for whole &amp;amp;apos;org&amp;amp;apos; package! The VirtualFile.getChildren() will return tmp mounted VirtualFile for &amp;amp;apos;org&amp;amp;apos; entry: https://github.com/jbossas/jboss-vfs/blob/master/src/main/java/org/jboss/vfs/VirtualFile.java#L335
There is part of code which should remove &amp;amp;apos;submount&amp;amp;apos; if there is directory entry: https://github.com/jbossas/jboss-vfs/blob/master/src/main/java/org/jboss/vfs/VirtualFile.java#L345 however ( if I remember correctly) &amp;amp;apos;org&amp;amp;apos; tmp mount ends up twice in &amp;amp;apos;submounts&amp;amp;apos;
When VirtualFile.getChildren is called for &amp;amp;apos;this&amp;amp;apos; == /content/yyy.ear/xxx.jar ( in this case it is properly removed) and when &amp;amp;apos;this&amp;amp;apos; ==  /content/yyy.ear/xxx.jar/org - in which case it derails getChildren and diverts into tmp mount.
Now about https://github.com/jbossas/jboss-vfs/blob/master/src/main/java/org/jboss/vfs/spi/JavaZipFileSystem.java#L355
What happens here, for ear deployment - it dives recursively into &amp;amp;apos;find&amp;amp;apos; until &amp;amp;apos;target&amp;amp;apos; is equal to &amp;amp;apos;/content/yyy.ear/xxx.jar&amp;amp;apos; at this target.getParent() == &amp;amp;apos;mountPoint&amp;amp;apos; == &amp;amp;apos;/content/yyy.ear&amp;amp;apos;.
At this point &amp;amp;apos;find&amp;amp;apos; will get result ZipNode == /content/yyy.ear and fetch child &amp;amp;apos;xxx.jar&amp;amp;apos; and pop back up one notch in the call stack. However the &amp;amp;apos;xxx.jar&amp;amp;apos; entry does not have any children, hence there is no way to fetch next child in line &amp;amp;apos;org&amp;amp;apos;.</description>
			<version>1.0.0.Alpha18</version>
			<fixedVersion>1.0.0.Beta1</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.server.deployment.Phase.java</file>
			<file type="M">org.jboss.as.server.deployment.DeploymentOverlayDeploymentUnitProcessor.java</file>
			<file type="M">org.jboss.as.server.logging.ServerLogger.java</file>
			<file type="M">org.jboss.as.server.ServerService.java</file>
		</fixedFiles>
		<links>
			<link type="Superset" description="incorporates">129</link>
		</links>
	</bug>
	<bug id="591" opendate="2015-03-12 14:57:45" fixdate="2015-03-13 09:01:55" resolution="Done">
		<buginformation>
			<summary>revertReloadRequired() throws a NPE is reloadRequired has not been called</summary>
			<description>If an operation step handler calls org.jboss.as.controller.OperationContext#revertReloadRequired() when org.jboss.as.controller.OperationContext#reloadRequired() has not been called, it throws a NPE:






java.lang.NullPointerException




	at org.jboss.as.controller.ControlledProcessState.revertReloadRequired(ControlledProcessState.java:181)




	at org.jboss.as.controller.AbstractOperationContext.revertReloadRequired(AbstractOperationContext.java:1037)




	at org.jboss.as.controller.test.RevertReloadRequiredTestCase$TestResourceAddHandler.rollbackRuntime(RevertReloadRequiredTestCase.java:98)




	at org.jboss.as.controller.AbstractAddStepHandler$1$1.handleRollback(AbstractAddStepHandler.java:133)




	at org.jboss.as.controller.AbstractOperationContext$RollbackDelegatingResultHandler.handleResult(AbstractOperationContext.java:1419)




	at org.jboss.as.controller.AbstractOperationContext$Step.invokeResultHandler(AbstractOperationContext.java:1385)




	at org.jboss.as.controller.AbstractOperationContext$Step.handleResult(AbstractOperationContext.java:1367)




	at org.jboss.as.controller.AbstractOperationContext$Step.finalizeInternal(AbstractOperationContext.java:1323)




	at org.jboss.as.controller.AbstractOperationContext$Step.finalizeStep(AbstractOperationContext.java:1283)




	at org.jboss.as.controller.AbstractOperationContext$Step.access$300(AbstractOperationContext.java:1172)




	at org.jboss.as.controller.AbstractOperationContext.finishStep(AbstractOperationContext.java:929)




	at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:877)




	at org.jboss.as.controller.AbstractOperationContext.doCompleteStep(AbstractOperationContext.java:601)




	at org.jboss.as.controller.AbstractOperationContext.completeStepInternal(AbstractOperationContext.java:354)




	at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:330)




	at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1182)




	at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:362)




	at org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:205)






The NPE is caused by this.activeStep.restartStamp field which is set only when reloadRequired() (or restartRequired()) is called.
My OSH may call reloadRequired() or not depending on some runtime state and I could add some logic to make sure I call 
I can fix my handle to check that I call context.revertReloadRequired() only I had previously called reloadRequired () first.
However, in order to make the OperationContext more robust, I think that the revertReloadRequired() method should instead be a no-op if there is no reload required. </description>
			<version>1.0.0.Alpha19</version>
			<fixedVersion>1.0.0.Beta1</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.AbstractOperationContext.java</file>
		</fixedFiles>
	</bug>
	<bug id="587" opendate="2015-03-09 14:16:03" fixdate="2015-03-13 09:46:40" resolution="Done">
		<buginformation>
			<summary>Wildfly does not log stack trace of an exception</summary>
			<description>Copied from BZ 1198186:
AbstractOperationContext.java line 1159 seems to be "swallowing" exceptions. It&amp;amp;apos;s possible to get NullPointerException without a stack trace. This makes it impossible to trace the cause of the NPE. 
https://github.com/jbossas/jboss-eap/blob/2292b0a8763683d0fab03efc3de6a29b974c09eb/controller/src/main/java/org/jboss/as/controller/AbstractOperationContext.java#L1159
2015-02-27 12:53:26,587 TRACE [|] [org.jboss.modules] (MSC service thread 1-11) Finding class org.jboss.logging.DelegatingBasicLogger from Module "org.picketbox:main" from local module loader @416a8198 (finder: local module finder @376243b5 (roots: /usr/share/jbossas/modules,/usr/share/jbossas/modules/system/layers/base))
2015-02-27 12:53:26,586 ERROR [|] [org.jboss.as.controller.client] (ServerService Thread Pool  29) JBAS014781: Step handler org.jboss.as.controller.AbstractAddStepHandler$1@1e6a7c88 for operation 
{"operation" =&amp;gt; "add","factory-class" =&amp;gt; "org.hornetq.core.remoting.impl.netty.NettyConnectorFactory","param" =&amp;gt; [("host" =&amp;gt; "tp4.app.paypoint.net"),("port" =&amp;gt; "6495"),("use-nio" =&amp;gt; "true")],"address" =&amp;gt; [("subsystem" =&amp;gt; "messaging"),("hornetq-server" =&amp;gt; "default"),("connector" =&amp;gt; "tp4")],"socket-binding" =&amp;gt; undefined}
 at address [
    ("subsystem" =&amp;gt; "messaging"),
    ("hornetq-server" =&amp;gt; "default"),
    ("connector" =&amp;gt; "tp4")
] failed handling operation rollback  java.lang.NullPointerException
2015-02-27 12:53:26,587 TRACE [|] [org.jboss.modules] (MSC service thread 1-4) Finding class org.jboss.remoting3.UnlockedReadHashMap$EntryIterator from Module "org.jboss.remoting3:main" from local module loader @416a8198 (finder: local module finder @376243b5 (roots: /usr/share/jbossas/modules,/usr/share/jbossas/modules/system/layers/base))</description>
			<version>1.0.0.Alpha19</version>
			<fixedVersion></fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.AbstractOperationContext.java</file>
		</fixedFiles>
	</bug>
	<bug id="604" opendate="2015-03-18 09:19:35" fixdate="2015-03-25 18:39:26" resolution="Duplicate Issue">
		<buginformation>
			<summary> After failed to deploy, remain deployment information in JBOSS_HOME/{standalone|domaine}/data/content directory</summary>
			<description>





Description of problem:




===









- After failed to deploy, remain deployment information in JBOSS_HOME/{standalone|domaine}/data/content directory 




- Please see following reproduce steps.









How reproducible:




===









Steps to Reproduce:




1. Fail to deploy application via jboss-cli




2. Find deployment info in JBOSS_HOME/{standalone|domaine}/data/content, but there are no standalone.xml in &amp;lt;deployments&amp;gt; tag.




3. Fix deployment and success to deploy.




4. Find "new" deployment info in JBOSS_HOME/{standalone|domaine}/data/content, and the old deployment info will be still there.









- I know that as we changed application in step-3, its hash value was changed. And then, old info is remained in JBOSS_HOME/{standalone|domaine}/data/content. But I think it always happens and should be fixed.









Actual results:









- The deployment information which created when deploy was failed remains in JBOSS_HOME/{standalone|domaine}/data/content.









Expected results:









- The deployment information which created when deploy was failed should be removed if the deploy is failed.





</description>
			<version>1.0.0.Alpha19</version>
			<fixedVersion></fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.domain.controller.operations.deployment.DeploymentAddHandler.java</file>
			<file type="M">org.jboss.as.host.controller.mgmt.ServerToHostProtocolHandler.java</file>
			<file type="M">org.jboss.as.domain.controller.operations.ApplyRemoteMasterDomainModelHandler.java</file>
			<file type="M">org.jboss.as.host.controller.model.host.HostResourceDefinition.java</file>
			<file type="M">org.jboss.as.repository.LocalDeploymentFileRepository.java</file>
			<file type="M">org.jboss.as.domain.controller.operations.deployment.DeploymentFullReplaceHandler.java</file>
			<file type="M">org.jboss.as.host.controller.DomainModelControllerService.java</file>
			<file type="M">org.jboss.as.domain.controller.operations.deployment.DeploymentRemoveHandler.java</file>
			<file type="M">org.jboss.as.server.deploymentoverlay.DeploymentOverlayContentAdd.java</file>
			<file type="M">org.jboss.as.domain.controller.operations.deployment.ServerGroupDeploymentReplaceHandler.java</file>
			<file type="M">org.jboss.as.host.controller.RemoteDomainConnectionService.java</file>
			<file type="M">org.jboss.as.server.logging.ServerLogger.java</file>
			<file type="M">org.jboss.as.core.model.test.TestModelControllerService.java</file>
			<file type="M">org.jboss.as.server.deployment.DeploymentFullReplaceHandler.java</file>
			<file type="M">org.jboss.as.server.deployment.DeploymentAddHandlerTestCase.java</file>
			<file type="M">org.jboss.as.repository.logging.DeploymentRepositoryLogger.java</file>
			<file type="M">org.jboss.as.management.client.content.ManagedDMRContentTypeResource.java</file>
			<file type="M">org.jboss.as.core.model.test.LegacyKernelServicesImpl.java</file>
			<file type="M">org.jboss.as.domain.controller.operations.deployment.ServerGroupDeploymentAddHandler.java</file>
			<file type="M">org.jboss.as.subsystem.test.TestModelControllerService.java</file>
			<file type="M">org.jboss.as.server.controller.resources.ServerRootResourceDefinition.java</file>
			<file type="M">org.jboss.as.server.deploymentoverlay.DeploymentOverlayContentDefinition.java</file>
			<file type="M">org.jboss.as.repository.DeploymentFileRepository.java</file>
			<file type="M">org.jboss.as.server.test.InterfaceManagementUnitTestCase.java</file>
			<file type="M">org.jboss.as.host.controller.mgmt.MasterDomainControllerOperationHandlerImpl.java</file>
			<file type="M">org.jboss.as.host.controller.HostControllerService.java</file>
			<file type="M">org.jboss.as.domain.controller.operations.deployment.ServerGroupDeploymentRemoveHandler.java</file>
			<file type="M">org.jboss.as.management.client.content.ManagedDMRContentTypeAddHandler.java</file>
			<file type="M">org.jboss.as.repository.LocalFileRepository.java</file>
			<file type="M">org.jboss.as.server.ApplicationServerService.java</file>
			<file type="M">org.jboss.as.test.shared.ModelParserUtils.java</file>
			<file type="M">org.jboss.as.host.controller.ManagedServerOperationsFactory.java</file>
			<file type="M">org.jboss.as.domain.controller.resources.DomainRootDefinition.java</file>
			<file type="M">org.jboss.as.server.deployment.DeploymentRemoveHandler.java</file>
			<file type="M">org.jboss.as.domain.controller.resources.ServerGroupResourceDefinition.java</file>
			<file type="M">org.jboss.as.repository.ContentRepository.java</file>
			<file type="M">org.jboss.as.domain.controller.resources.DomainDeploymentResourceDefinition.java</file>
			<file type="M">org.jboss.as.server.mgmt.domain.RemoteFileRepositoryService.java</file>
			<file type="M">org.jboss.as.server.deployment.DeploymentReplaceHandler.java</file>
			<file type="M">org.jboss.as.server.deployment.DeploymentAddHandler.java</file>
		</fixedFiles>
		<links>
			<link type="Duplicate" description="duplicates">213</link>
		</links>
	</bug>
	<bug id="623" opendate="2015-04-03 13:15:14" fixdate="2015-04-08 20:55:29" resolution="Done">
		<buginformation>
			<summary>ModelControllerClient.Factory lacks some variants</summary>
			<description>In the ModelControllerClient.Factory class, each factory method in fact has two varians: with a protocol as a first parameter, and without it. There are two exceptions  two methods are lacking a protocol-less variant:

ModelControllerClient create(final String protocol, final String hostName, final int port, final CallbackHandler handler, final SSLContext sslContext, final int connectionTimeout, final Map&amp;lt;String, String&amp;gt; saslOptions)
ModelControllerClient create(final String protocol, final String hostName, final int port, final CallbackHandler handler, final SSLContext sslContext, final int connectionTimeout, final Map&amp;lt;String, String&amp;gt; saslOptions, final String clientBindAddress)

</description>
			<version>1.0.0.Beta2</version>
			<fixedVersion>1.0.0.Beta4</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.client.ModelControllerClient.java</file>
		</fixedFiles>
	</bug>
	<bug id="65" opendate="2014-08-21 16:40:26" fixdate="2015-04-10 19:47:15" resolution="Done">
		<buginformation>
			<summary>Filesystem deployment scanner deployment failure removes other scanners &amp;apos; deployments</summary>
			<description>There is no way to associate a deployment to a specific scanner thus if one deployment fails for a scanner during startup all deployments not persistent will be removed </description>
			<version>1.0.0.Alpha5</version>
			<fixedVersion>1.0.0.Beta4</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.server.deployment.scanner.DeploymentScannerService.java</file>
			<file type="M">org.jboss.as.server.controller.resources.DeploymentAttributes.java</file>
			<file type="M">org.jboss.as.server.deployment.scanner.api.DeploymentOperations.java</file>
			<file type="M">org.jboss.as.server.deployment.scanner.ShutdownFileSystemDeploymentServiceUnitTestCase.java</file>
			<file type="M">org.jboss.as.server.deployment.scanner.DeploymentScannerAdd.java</file>
			<file type="M">org.jboss.as.server.deployment.scanner.DefaultDeploymentOperations.java</file>
			<file type="M">org.jboss.as.server.deployment.scanner.FileSystemDeploymentServiceUnitTestCase.java</file>
			<file type="M">org.jboss.as.server.deployment.DeploymentFullReplaceHandler.java</file>
			<file type="M">org.jboss.as.server.deployment.scanner.FileSystemDeploymentService.java</file>
			<file type="M">org.jboss.as.controller.descriptions.ModelDescriptionConstants.java</file>
			<file type="M">org.jboss.as.server.deployment.DeploymentAddHandler.java</file>
			<file type="M">org.jboss.as.server.deployment.scanner.api.DeploymentScanner.java</file>
			<file type="D">org.jboss.as.server.deployment.scanner.DeploymentOperations.java</file>
		</fixedFiles>
		<links>
			<link type="Related" description="relates to">632</link>
			<link type="Related" description="is related to">3708</link>
			<link type="Superset" description="incorporates">64</link>
		</links>
	</bug>
	<bug id="632" opendate="2015-04-08 17:40:49" fixdate="2015-04-10 19:47:29" resolution="Done">
		<buginformation>
			<summary>Subsystem deployment undeployed at startup</summary>
			<description>





@BrianStansberry The "mixed approach" doesn&amp;amp;apos;t seem to work any more. https://developer.jboss.org/wiki/ExtendingAS7




@BrianStansberry I&amp;amp;apos;m using this to deploy keycloak WAR from the subsystem.




@BrianStansberry As soon as the server is started, something is calling stopService() on the Keycloak WAR.




Tomaz Cerar




1:15 PM




@StanSilvert are you still working on AS7? https://docs.jboss.org/author/display/WFLY8/Extending+WildFly+8




Stan Silvert




1:16 PM




@ctomc No. this is WildFly 9. It still works on WildFly 8.




Tomaz Cerar




1:16 PM




ah the war deployment, that could be regression




Brian Stansberry




1:17 PM




@ctomc how so?




Stan Silvert




1:17 PM




FYI. I did a Thread.dumpStack() and got this:




13:11:35,173 ERROR [stderr] (MSC service thread 1-3) java.lang.Exception: Stack trace




13:11:35,173 ERROR [stderr] (MSC service thread 1-3) at java.lang.Thread.dumpStack(Thread.java:1329)




13:11:35,174 ERROR [stderr] (MSC service thread 1-3) at org.wildfly.extension.undertow.Host.unregisterDeployment(Host.java:168)




13:11:35,176 ERROR [stderr] (MSC service thread 1-3) at org.wildfly.extension.undertow.deployment.UndertowDeploymentService.stopContext(UndertowDeploymentService.java:




113)




13:11:35,179 ERROR [stderr] (MSC service thread 1-3) at org.wildfly.extension.undertow.deployment.UndertowDeploymentService.stop(UndertowDeploymentService.java:100)




13:11:35,181 ERROR [stderr] (MSC service thread 1-3) at org.jboss.msc.service.Serv




iceControllerImpl$StopTask.stopService(ServiceControllerImpl.java:2056)




13:11:35,184 ERROR [stderr] (MSC service thread 1-3)    at org.jboss.msc.service.ServiceControllerImpl$StopTask.run(ServiceControllerImpl.java:2017)




13:11:35,186 ERROR [stderr] (MSC service thread 1-3)    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)




13:11:35,188 ERROR [stderr] (MSC service thread 1-3)    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)




13:11:35,190 ERROR [stderr] (MSC service thread 1-3)    at java.lang.Thread.run(Thread.java:745)




Hide full text




Tomaz Cerar




1:18 PM




@BrianStansberry just reffering that war deployment from subsystem should still work




1:19 PM




Jason Greene joined the room.




Tomaz Cerar




1:19 PM




@StanSilvert what happens? as that thread dump makes no sense




Stan Silvert




1:21 PM




http://pastebin.com/xQ2DNzEe




The WAR is simply undeployed as soon as WildFly finishes startup.




Brian Stansberry




1:22 PM




@StanSilvert can you give me a link to your code that&amp;amp;apos;s doing the deploy stuff?




Stan Silvert




1:22 PM




just a sec




Stan Silvert




1:24 PM




https://github.com/keycloak/keycloak/tree/master/integration




The code that creates the operation is https://github.com/keycloak/keycloak/blob/master/integration




AuthServerUtil ^^^




click on the second link




1:27 PM




Darran Lofthouse left the room.




Brian Stansberry




1:27 PM




@StanSilvert are you doing overlay stuff? I see some code there re: overlays




Stan Silvert




1:28 PM




Yes, but not in this instance.




Brian Stansberry




1:28 PM




ok. I&amp;amp;apos;m asking just because that would add more complexity, better scope for some service dependency going missing, triggering stop




Stan Silvert




1:29 PM




For this simple case there are no overlays.




Brian Stansberry




1:29 PM




@StanSilvert interesting, your log looks like it&amp;amp;apos;s a true undeploy op, not just a service stop




Tomaz Cerar




1:30 PM




@BrianStansberry should we use 6.x.0 or 6.x.latest for tranformers testing?




Tomaz Cerar goes get some diner




Stan Silvert




1:30 PM




@BrianStansberry If that&amp;amp;apos;s the case then maybe some condition is triggering my own undeploy operation.




@BrianStansberry I&amp;amp;apos;ll look into that and see what I find.




Brian Stansberry




1:31 PM




@ctomc 6.x.0 is ok by me; chasing CPs is too much hassle




@StanSilvert note this:




13:11:35,294 INFO [org.jboss.as.server] (DeploymentScanner-threads - 1) WFLYSRV0009: Undeployed "main-auth-server.war" (runtime-name: "main-auth-server.war")




the thread -- DeploymentScanner-threads - 1




looks like your deployment is exposed to the scanner?




oh, here&amp;amp;apos;s a guess!




the scanner sees "persistent" =&amp;gt; false and treats it as under scanner control





</description>
			<version>1.0.0.Beta3</version>
			<fixedVersion>1.0.0.Beta4</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.server.deployment.scanner.DeploymentScannerService.java</file>
			<file type="M">org.jboss.as.server.controller.resources.DeploymentAttributes.java</file>
			<file type="M">org.jboss.as.server.deployment.scanner.api.DeploymentOperations.java</file>
			<file type="M">org.jboss.as.server.deployment.scanner.ShutdownFileSystemDeploymentServiceUnitTestCase.java</file>
			<file type="M">org.jboss.as.server.deployment.scanner.DeploymentScannerAdd.java</file>
			<file type="M">org.jboss.as.server.deployment.scanner.DefaultDeploymentOperations.java</file>
			<file type="M">org.jboss.as.server.deployment.scanner.FileSystemDeploymentServiceUnitTestCase.java</file>
			<file type="M">org.jboss.as.server.deployment.DeploymentFullReplaceHandler.java</file>
			<file type="M">org.jboss.as.server.deployment.scanner.FileSystemDeploymentService.java</file>
			<file type="M">org.jboss.as.controller.descriptions.ModelDescriptionConstants.java</file>
			<file type="M">org.jboss.as.server.deployment.DeploymentAddHandler.java</file>
			<file type="M">org.jboss.as.server.deployment.scanner.api.DeploymentScanner.java</file>
			<file type="D">org.jboss.as.server.deployment.scanner.DeploymentOperations.java</file>
		</fixedFiles>
		<links>
			<link type="Related" description="is related to">65</link>
		</links>
	</bug>
	<bug id="489" opendate="2014-12-24 13:42:56" fixdate="2015-04-10 19:48:06" resolution="Done">
		<buginformation>
			<summary>The "access-mechanism" field in the active-operation resources is always undefined</summary>
			<description>The "access-mechanism" field in core-service=management/service=active-operations/active-operation=* is always undefined. The code that sets it is using the wrong var:






ModelNode accessMechanismNode = model.get(ACCESS_MECHANISM);




if (accessMechanism != null) {




    accessMechanismNode.set(accessMechanismNode.toString());




}






It should be accessMechanism.toString()</description>
			<version>1.0.0.Alpha15</version>
			<fixedVersion>1.0.0.Beta4</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.OperationContextImpl.java</file>
		</fixedFiles>
	</bug>
	<bug id="638" opendate="2015-03-31 16:49:09" fixdate="2015-04-10 19:48:42" resolution="Done">
		<buginformation>
			<summary>deployment runtime-name mismatch between content repo and server-group and logs</summary>
			<description>We are continuously deploying web applications (wars) into our wildfly domain as part of our continuous deployment driven by Bamboo.
Each time an application build succeeds it will trigger a deployment to our wildfly domain.
If this is the first deployment we run this command.






jboss-cli.sh --connect --controller=somehost:9990 --user=admin --password=admin --command="deploy app-0.1-SNAPSHOT.war --name=app.war --runtime-name=app-0.1-SNAP\




SHOT-b1.war --server-groups=A






For subsequent deployments we force a redeploy over existing deployment.






jboss-cli.sh --connect --controller=somehost:9990 --user=admin --password=admin --command="deploy app-0.1-SNAPSHOT.war --name=app.war --runtime-name=app-0.1-SNAP\




SHOT-b2.war --force




jboss-cli.sh --connect --controller=somehost:9990 --user=admin --password=admin --command="deploy app-0.1-SNAPSHOT.war --name=app.war --runtime-name=app-0.1-SNAP\




SHOT-b3.war --force




jboss-cli.sh --connect --controller=somehost:9990 --user=admin --password=admin --command="deploy app-0.1-SNAPSHOT.war --name=app.war --runtime-name=app-0.1-SNAP\




SHOT-b4.war --force




etc....






Since upgrading to WildFly 8.2.0 we see a strange behaviour in the domain management web console (http://somehost:9990/console/App.html#domain-deployments).
The application runtime name in content repository is not the same as what is shown in the server group.
I will attach screenshots for an app named apollo.war. You will see from the screenshots that the content repository shows runtime name=apollo-0.1.12-SNAPSHOT-11\
03.war, but the
server group shows runtime-name=apollo-0.1.12-SNAPSHOT-1045.war. (The last number in runtime-name is the build number from bamboo)
The server.logs from wildfly show "Deployed "apollo.war" (runtime-name : "apollo-0.1.12-SNAPSHOT-1045.war")"
However, we can tell by app capabilities that what is really deployed is apollo-0.1.12-SNAPSHOT-1103.war.
We are totally confused by this discrepency.</description>
			<version>1.0.0.Beta3</version>
			<fixedVersion>1.0.0.Beta4</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.domain.controller.operations.deployment.DeploymentFullReplaceHandler.java</file>
		</fixedFiles>
	</bug>
	<bug id="232" opendate="2014-11-07 21:27:26" fixdate="2015-04-10 20:19:53" resolution="Done">
		<buginformation>
			<summary>Unclean shutdown of deployment scanner</summary>
			<description>I happened to see this in a testsuite log file:






2014-11-07 02:59:41,808 ERROR [org.jboss.as.server.deployment.scanner] (DeploymentScanner-threads - 1) WFLYDS0012: Scan of /opt/buildAgent/work/8feb0abb503148fe/testsuite/manualmode/target/deployment-test-bc636b67-df54-462d-9a13-3618a1755d3f threw Exception: java.util.concurrent.RejectedExecutionException: Task java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask@146a4b2 rejected from java.util.concurrent.ScheduledThreadPoolExecutor@e6cbcd[Shutting down, pool size = 1, active threads = 1, queued tasks = 0, completed tasks = 3]




	at java.util.concurrent.ThreadPoolExecutor$AbortPolicy.rejectedExecution(ThreadPoolExecutor.java:2048)




	at java.util.concurrent.ThreadPoolExecutor.reject(ThreadPoolExecutor.java:821)




	at java.util.concurrent.ScheduledThreadPoolExecutor.delayedExecute(ScheduledThreadPoolExecutor.java:325)




	at java.util.concurrent.ScheduledThreadPoolExecutor.schedule(ScheduledThreadPoolExecutor.java:530)




	at java.util.concurrent.ScheduledThreadPoolExecutor.execute(ScheduledThreadPoolExecutor.java:619)




	at org.jboss.as.controller.ModelControllerImpl$3.executeAsync(ModelControllerImpl.java:669)




	at org.jboss.as.controller.ModelControllerImpl$3.executeAsync(ModelControllerImpl.java:605)




	at org.jboss.as.server.deployment.scanner.DefaultDeploymentOperations.deploy(DefaultDeploymentOperations.java:61)




	at org.jboss.as.server.deployment.scanner.FileSystemDeploymentService.scan(FileSystemDeploymentService.java:449)




	at org.jboss.as.server.deployment.scanner.FileSystemDeploymentService$UndeployScanRunnable.run(FileSystemDeploymentService.java:538)




	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)




	at java.util.concurrent.FutureTask.run(FutureTask.java:262)




	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:178)




	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:292)




	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)




	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)




	at java.lang.Thread.run(Thread.java:744)




	at org.jboss.threads.JBossThread.run(JBossThread.java:320)






DeploymentScannerService is calling stopScanner() on the scanner and then is shutting down the executor. But stopScanner does not wait for in progress tasks to complete, nor do the in-progress tasks recognize that shutdown is occurring and handle any problems differently (e.g. don&amp;amp;apos;t toss the above in the log.)
Waiting for tasks to complete could be tricky, e.g. imagine this race:
1) Admin submits op to shutdown/reload, which has the controller lock and is now stopping services.
2) Scan job kicks off, finds changes and wants to modify the model, so the task is blocking waiting for the controller lock.
Deadlock.
Now, this may not be a problem, as server reload tells MSC to remove the root service on the way out (i.e. after the bit where it blocks for stability) and then MSC threads take over, allowing the op thread to continue and release the lock. The shutdown handler spawns a thread to call System.exit.
But ^^^ is just a quick look, so be cautious! </description>
			<version>1.0.0.Alpha11</version>
			<fixedVersion>1.0.0.Beta4</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.server.deployment.scanner.FileSystemDeploymentService.java</file>
			<file type="M">org.jboss.as.test.deployment.trivial.ServiceActivatorDeployment.java</file>
			<file type="M">org.jboss.as.server.deployment.scanner.DeploymentScannerService.java</file>
			<file type="M">org.jboss.as.server.deployment.scanner.FileSystemDeploymentServiceUnitTestCase.java</file>
			<file type="M">org.wildfly.core.testrunner.Server.java</file>
		</fixedFiles>
	</bug>
	<bug id="619" opendate="2015-04-02 12:08:34" fixdate="2015-04-10 20:21:42" resolution="Done">
		<buginformation>
			<summary>HostControllerExecutionSupport.MultiStepOpExecutionSupport doesn&amp;apos;t format nested composites correctly</summary>
			<description>The getFormattedDomainResult isn&amp;amp;apos;t processing nested composites correctly. It takes the response for the top level step and passes it into the HostControllerExecutionSupport for that step. That&amp;amp;apos;s fine for the simple response variants of HostControllerExecutionSupport, which just return the passed in node. But it fails if the support for that step is in turn MultiStepOpExecutionSupport, as it is expecting a response node&amp;amp;apos;s &amp;amp;apos;result&amp;amp;apos; child, not the outer response node itself.
Solution is to detect this, clone the outer response node, and pass it&amp;amp;apos;s &amp;amp;apos;result&amp;amp;apos; child into the child MultiStepOpExecutionSupport, replacing the outer response node&amp;amp;apos;s &amp;amp;apos;result&amp;amp;apos; with the return value.</description>
			<version>1.0.0.Beta2</version>
			<fixedVersion>1.0.0.Beta4</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.domain.controller.operations.coordination.HostControllerExecutionSupport.java</file>
		</fixedFiles>
	</bug>
	<bug id="627" opendate="2015-04-06 17:55:45" fixdate="2015-04-10 20:22:06" resolution="Done">
		<buginformation>
			<summary>Response headers do not propagate through the domain</summary>
			<description>There&amp;amp;apos;s no access-control response header here:






[domain@localhost:9999 /] /host=master/server=server-one/subsystem=datasources/data-source=ExampleDS:read-resource{roles=Monitor}




{




    "outcome" =&amp;gt; "success",




    "result" =&amp;gt; {




        ....




    }




}






ProxyStepHandler needs to pass through response-header data.</description>
			<version>1.0.0.Beta2</version>
			<fixedVersion>1.0.0.Beta4</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.ProxyStepHandler.java</file>
		</fixedFiles>
	</bug>
	<bug id="626" opendate="2015-04-06 15:53:19" fixdate="2015-04-15 13:17:29" resolution="Done">
		<buginformation>
			<summary>Global list-get operation can inadvertently create list elements</summary>
			<description>Consider the following sequence of operations:

:list-clear(name=attribute)
:list-get(name=attribute, index=0)
:list-add(name=attribute, value=test)
:list-get(name=attribute, index=0)

#2 will return &amp;lt;undefined&amp;gt; as expected.  The expected result of #4 is "test".  However, it returns &amp;lt;undefined&amp;gt;.  This is because #2 will create the missing element at index 0 causing #3 to operate on index 1.</description>
			<version>1.0.0.Beta2</version>
			<fixedVersion>1.0.0.Beta6</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.operations.global.MapOperations.java</file>
			<file type="M">org.jboss.as.controller.operations.global.ListOperations.java</file>
		</fixedFiles>
		<links>
			<link type="Dependency" description="blocks">4488</link>
		</links>
	</bug>
	<bug id="580" opendate="2015-03-05 09:50:59" fixdate="2015-04-21 14:35:55" resolution="Done">
		<buginformation>
			<summary>Recursive read-resource with include-runtime=true assumes all runtime singleton resources will be present.</summary>
			<description>Take the following hierarchy: -






keystore=xxx




    alias=yyy




        certificate-chain=default




        certificate-chain=x509






keystore is a regular resource with storage=configuration.
alias is a regular resource with storage=runtime
certificate-chain=default and certificate-chain=x509 are regular resources with storage=runtime.
So alias represents a single alias from a Java KeyStore, this may or may not have a certificate chain and it may be a default chain or it may be an x509 chain.
The recursive read-resource is fine with regular resources such as alias as it has to rely on the underlying resource implementation to identify the instances that actually exist.
For the singleton resources however the following method is called: -






org.jboss.as.controller.operations.global.GlobalOperationHandlers.getChildAddresses(OperationContext, PathAddress, ImmutableManagementResourceRegistration, Resource, String)






Within this method the following check takes place: -






                if (resource != null &amp;amp;&amp;amp; resource.hasChildren(childType)) {




                    Set&amp;lt;String&amp;gt; childNames = resource.getChildrenNames(childType);




                    if (element.isWildcard()) {




                        set.addAll(childNames);




                    } else if (childNames.contains(element.getValue())) {




                        set.add(element.getValue());




                    }






Up to this point all is fine, the children the resource claims are available are the only ones added.
But further down this happens: -






            if (!element.isWildcard()) {




                ImmutableManagementResourceRegistration childReg = registry.getSubModel(PathAddress.pathAddress(element));




                if (childReg != null &amp;amp;&amp;amp; childReg.isRuntimeOnly()) {




                    set.add(element.getValue());




                }




            }






So even though the resource was previously checked and missing children excluded they are now added back.
The end result in this example is that the recursive read resource attempts to read for certificate-chain=default when it should only be reading for certificate-chain=x509 as already reported by the resource implementation.
From a discussion in HipChat yesterday there was general agreement this behaviour seems to be wrong, however support for Proxied resources may be (incorrectly) dependent on this.</description>
			<version>1.0.0.Alpha19</version>
			<fixedVersion>1.0.0.Beta5</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.test.ReadResourceWithRuntimeResourceTestCase.java</file>
			<file type="M">org.jboss.as.controller.operations.global.GlobalOperationHandlers.java</file>
		</fixedFiles>
		<links>
			<link type="Related" description="relates to">17</link>
			<link type="Related" description="relates to">635</link>
		</links>
	</bug>
	<bug id="625" opendate="2015-04-03 14:46:11" fixdate="2015-04-21 15:21:16" resolution="Done">
		<buginformation>
			<summary>Error message in CLI if extension existing on the server is not present in the CLI instalaltion</summary>
			<description>When using the jboss-cli from a WildFly-Core installation to manage a WildFly Full server you get error messages about missing extensions :
Errors caught while loading extensions:
1) Failed to load module org.jboss.as.clustering.infinispan for extension org.jboss.as.clustering.infinispan: org.jboss.as.clustering.infinispan:main
2) Failed to load module org.jboss.as.connector for extension org.jboss.as.connector: org.jboss.as.connector:main
3) Failed to load module org.jboss.as.ee for extension org.jboss.as.ee: org.jboss.as.ee:main
4) Failed to load module org.jboss.as.ejb3 for extension org.jboss.as.ejb3: org.jboss.as.ejb3:main
5) Failed to load module org.jboss.as.jaxrs for extension org.jboss.as.jaxrs: org.jboss.as.jaxrs:main
6) Failed to load module org.jboss.as.jdr for extension org.jboss.as.jdr: org.jboss.as.jdr:main
7) Failed to load module org.jboss.as.jpa for extension org.jboss.as.jpa: org.jboss.as.jpa:main
8) Failed to load module org.jboss.as.jsf for extension org.jboss.as.jsf: org.jboss.as.jsf:main
9) Failed to load module org.jboss.as.mail for extension org.jboss.as.mail: org.jboss.as.mail:main
10) Failed to load module org.jboss.as.naming for extension org.jboss.as.naming: org.jboss.as.naming:main
11) Failed to load module org.jboss.as.pojo for extension org.jboss.as.pojo: org.jboss.as.pojo:main
12) Failed to load module org.jboss.as.sar for extension org.jboss.as.sar: org.jboss.as.sar:main
13) Failed to load module org.jboss.as.security for extension org.jboss.as.security: org.jboss.as.security:main
14) Failed to load module org.jboss.as.transactions for extension org.jboss.as.transactions: org.jboss.as.transactions:main
15) Failed to load module org.jboss.as.webservices for extension org.jboss.as.webservices: org.jboss.as.webservices:main
16) Failed to load module org.jboss.as.weld for extension org.jboss.as.weld: org.jboss.as.weld:main
17) Failed to load module org.wildfly.extension.batch for extension org.wildfly.extension.batch: org.wildfly.extension.batch:main
18) Failed to load module org.wildfly.extension.bean-validation for extension org.wildfly.extension.bean-validation: org.wildfly.extension.bean-validation:main
19) Failed to load module org.wildfly.extension.security.manager for extension org.wildfly.extension.security.manager: org.wildfly.extension.security.manager:main
20) Failed to load module org.wildfly.extension.undertow for extension org.wildfly.extension.undertow: org.wildfly.extension.undertow:main</description>
			<version>1.0.0.Beta2</version>
			<fixedVersion>1.0.0.Beta5</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.cli.embedded.EmbedServerHandler.java</file>
			<file type="M">org.jboss.as.cli.impl.CommandContextImpl.java</file>
			<file type="M">org.jboss.as.cli.impl.ExtensionsLoader.java</file>
		</fixedFiles>
	</bug>
	<bug id="230" opendate="2014-11-07 17:46:38" fixdate="2015-05-01 15:02:55" resolution="Done">
		<buginformation>
			<summary>Failure by ProcessController to launch a server vm is not logged</summary>
			<description>In a domain configuration, if a server is associated with an incorrectly configurated jvm java-home (e.g. domain.xml -&amp;gt; server-groups -&amp;gt; jvm), it will fail silently (no error shown in logs). For example:
```
&amp;lt;server-group name="mySrvrGrp" profile="full"&amp;gt;
  &amp;lt;jvm name="my-default" java-home="/usr/java/wrongPath"&amp;gt;
    &amp;lt;heap size="1024m" max-size="4096m"/&amp;gt;
    &amp;lt;permgen size="256m" max-size="256m"/&amp;gt;
    &amp;lt;stack size="256k"/&amp;gt;
```</description>
			<version>1.0.0.Alpha11</version>
			<fixedVersion>1.0.0.CR1</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.test.integration.domain.management.ServerAutoStartTestCase.java</file>
			<file type="M">org.jboss.as.host.controller.ServerInventoryImpl.java</file>
			<file type="M">org.jboss.as.test.integration.domain.ServerManagementTestCase.java</file>
			<file type="M">org.jboss.as.host.controller.ManagedServer.java</file>
		</fixedFiles>
	</bug>
	<bug id="114" opendate="2014-09-18 19:54:20" fixdate="2015-05-08 18:20:45" resolution="Done">
		<buginformation>
			<summary>Get RuntimeVaultReader into WildFly Core</summary>
			<description>The only real implementation of AbstractVaultReader isn&amp;amp;apos;t in wildfly-core; it&amp;amp;apos;s in the wildfly-full security subsystem module.
This means WildFly Core currently doesn&amp;amp;apos;t really support vault expressions.</description>
			<version>1.0.0.Alpha8</version>
			<fixedVersion>1.0.0.CR2</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.host.controller.DomainModelControllerService.java</file>
			<file type="M">org.jboss.as.server.ApplicationServerService.java</file>
			<file type="M">org.jboss.as.server.logging.ServerLogger.java</file>
		</fixedFiles>
	</bug>
	<bug id="677" opendate="2015-05-06 16:01:48" fixdate="2015-05-08 18:21:17" resolution="Done">
		<buginformation>
			<summary>Remove the "bundle" notion from WildFly Core embedded module</summary>
			<description>The EmbeddedServerFactory create API includes the bundle path notion copied over from AS7. I don&amp;amp;apos;t want this in the WildFly Core API as we have no real support for the concept.</description>
			<version>1.0.0.CR1</version>
			<fixedVersion>1.0.0.CR2</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.wildfly.core.embedded.EmbeddedStandAloneServerFactory.java</file>
			<file type="M">org.wildfly.core.embedded.EmbeddedServerFactory.java</file>
			<file type="M">org.jboss.as.cli.embedded.EmbedServerHandler.java</file>
		</fixedFiles>
	</bug>
	<bug id="681" opendate="2015-05-07 09:09:09" fixdate="2015-05-08 18:22:49" resolution="Done">
		<buginformation>
			<summary>Incorrectly timeout values in ControllerLogger method timeoutCompletingOperation and ControllerMessages method serviceInstallTimedOut</summary>
			<description>Incorrectly scaled timeout value passed to org.jboss.as.controller.ControllerLogger method timeoutCompletingOperation and org.jboss.as.controller.ControllerMessages method serviceInstallTimedOut
parameter value is ms, second is expected. </description>
			<version>1.0.0.CR1</version>
			<fixedVersion>1.0.0.CR2</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.OperationContextImpl.java</file>
		</fixedFiles>
	</bug>
	<bug id="676" opendate="2015-04-22 08:24:07" fixdate="2015-05-08 19:09:09" resolution="Done">
		<buginformation>
			<summary>data-source ..  --new-connection-sql  does not allow double qoutes in the SQL</summary>
			<description>Setting an SQL statement with double quotes in it from the CLI is not possible:
data-source --name=ExampleDS --new-connection-sql="set role test identified by \"password\""</description>
			<version>1.0.0.CR1</version>
			<fixedVersion>1.0.0.CR2</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.cli.parsing.command.ArgumentValueState.java</file>
			<file type="M">org.jboss.as.cli.parsing.test.CommandTestCase.java</file>
		</fixedFiles>
	</bug>
	<bug id="657" opendate="2015-04-20 16:38:33" fixdate="2015-05-08 20:26:27" resolution="Done">
		<buginformation>
			<summary>CLI embedded server does not always clean up properly</summary>
			<description>While looking at some other test issues I noticed test logging that indicates that the server embedded in the CLI seems to not always be cleaning up properly, resulting in MSC leaving mbeans installed and subsequent mbean registration errors when the next attempt to launch happens.
Here&amp;amp;apos;s an example from a server.log; my impression is one test method attempts to create a server with an invalid --empty-config param, and when that fails the appropriate cleanup doesn&amp;amp;apos;t happen.






2015-04-20 11:27:44,020 ERROR [org.jboss.msc.service.fail] (MSC service thread 17-1) MSC000001: Failed to start service jboss.as.server-controller: org.jboss.msc.service.StartException in service jboss.as.server-controller: Failed to start service




	at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1904)




	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)




	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)




	at java.lang.Thread.run(Thread.java:744)




Caused by: java.lang.IllegalStateException: WFLYCTL0389: Could not create an empty configuration at file /Users/bstansberry/dev/wildfly/wildfly-core/testsuite/manualmode/target/wildfly-core/standalone/configuration/standalone-cli.xml as there is an existing non-empty configuration there




	at org.jboss.as.controller.persistence.ConfigurationFile.getBootFile(ConfigurationFile.java:242)




	at org.jboss.as.controller.persistence.BackupXmlConfigurationPersister.&amp;lt;init&amp;gt;(BackupXmlConfigurationPersister.java:70)




	at org.jboss.as.server.Bootstrap$Configuration$1.createConfigurationPersister(Bootstrap.java:178)




	at org.jboss.as.server.ServerService.start(ServerService.java:241)




	at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1948)




	at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1881)




	... 3 more









2015-04-20 11:27:44,031 INFO  [org.jboss.modules] (main) JBoss Modules version 1.4.2.Final




2015-04-20 11:27:44,032 ERROR [org.jboss.msc] (main) MSC000010: Failed to register MBean with MBeanServer: javax.management.InstanceAlreadyExistsException: jboss.msc:type=container,name=jboss-as




	at com.sun.jmx.mbeanserver.Repository.addMBean(Repository.java:437)




	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerWithRepository(DefaultMBeanServerInterceptor.java:1898)




	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:966)




	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)




	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)




	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)




	at org.jboss.msc.service.ServiceContainerImpl.&amp;lt;init&amp;gt;(ServiceContainerImpl.java:372)




	at org.jboss.msc.service.ServiceContainer$Factory.create(ServiceContainer.java:266)




	at org.jboss.as.server.BootstrapImpl$ShutdownHook.register(BootstrapImpl.java:198)




	at org.jboss.as.server.BootstrapImpl$ShutdownHook.access$100(BootstrapImpl.java:188)




	at org.jboss.as.server.BootstrapImpl.&amp;lt;init&amp;gt;(BootstrapImpl.java:62)




	at org.jboss.as.server.Bootstrap$Factory.newInstance(Bootstrap.java:243)




	at org.wildfly.core.embedded.EmbeddedStandAloneServerFactory$StandaloneServerImpl.start(EmbeddedStandAloneServerFactory.java:280)




	at sun.reflect.GeneratedMethodAccessor11.invoke(Unknown Source)




	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)




	at java.lang.reflect.Method.invoke(Method.java:606)




	at org.wildfly.core.embedded.StandaloneServerIndirection.invokeOnServer(StandaloneServerIndirection.java:70)




	at org.wildfly.core.embedded.StandaloneServerIndirection.start(StandaloneServerIndirection.java:55)




	at org.jboss.as.cli.embedded.EmbedServerHandler.doHandle(EmbedServerHandler.java:201)




	at org.jboss.as.cli.handlers.CommandHandlerWithHelp.handle(CommandHandlerWithHelp.java:88)




	at org.jboss.as.cli.impl.CommandContextImpl.handle(CommandContextImpl.java:676)




	at org.jboss.as.test.integration.management.util.CLIWrapper.sendLine(CLIWrapper.java:163)




	at org.jboss.as.test.integration.management.util.CLIWrapper.sendLine(CLIWrapper.java:177)




	at org.jboss.as.test.manualmode.management.cli.CLIEmbedServerTestCase.stdoutTest(CLIEmbedServerTestCase.java:219)




	at org.jboss.as.test.manualmode.management.cli.CLIEmbedServerTestCase.testStdOutEcho(CLIEmbedServerTestCase.java:199)





</description>
			<version>1.0.0.Beta1</version>
			<fixedVersion>1.0.0.CR2</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.server.BootstrapImpl.java</file>
		</fixedFiles>
	</bug>
	<bug id="684" opendate="2015-05-09 00:05:26" fixdate="2015-05-12 20:27:16" resolution="Done">
		<buginformation>
			<summary>CompositeIndexProcessor uses wrong module loader to load external annotation indexes</summary>
			<description></description>
			<version>1.0.0.CR2</version>
			<fixedVersion>1.0.0.CR3</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.server.deployment.annotation.CompositeIndexProcessor.java</file>
		</fixedFiles>
	</bug>
	<bug id="687" opendate="2015-05-11 12:39:25" fixdate="2015-05-13 21:01:15" resolution="Done">
		<buginformation>
			<summary>patches with duplicate element patch-id values should be rejected</summary>
			<description>Patches that contain duplicate patch-id attribute values in &amp;amp;apos;element&amp;amp;apos; elements in patch.xml can be applied but can&amp;amp;apos;t be rolled back.  An attempt to rollback such a patch will result in an error "Content loader already registered for patch " + patchID, thrown from IdentityPatchContext.recordContentLoader(patchID, contentLoader).
Current implementation should reject patches with duplicate element patch-id values (unless the value is &amp;amp;apos;base&amp;amp;apos;).
Adding support for duplicate element patch-id values is a more difficult task at this point. If we decide to support it after all, it&amp;amp;apos;ll be implemented under a different issue.</description>
			<version>1.0.0.CR2</version>
			<fixedVersion>1.0.0.CR4, 2.0.0.Alpha1</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.patching.installation.LayerTestCase.java</file>
			<file type="M">org.jboss.as.patching.metadata.PatchXmlUnitTestCase.java</file>
			<file type="M">org.jboss.as.patching.metadata.PatchXml.java</file>
			<file type="M">org.jboss.as.patching.metadata.PatchBuilder.java</file>
			<file type="M">org.jboss.as.patching.logging.PatchLogger.java</file>
			<file type="M">org.jboss.as.patching.metadata.PatchXmlUtils.java</file>
		</fixedFiles>
	</bug>
	<bug id="694" opendate="2015-05-14 15:40:44" fixdate="2015-05-14 20:38:20" resolution="Done">
		<buginformation>
			<summary>Redeploy operation fails on deployments from the deployment scanner</summary>
			<description>An application is deployed via deployment scanner.
On an attempt to redeploy it via jboss-cli the following error is displayed:






[standalone@localhost:9990 deployment=sample.war] :redeploy




{




    "outcome" =&amp;gt; "failed",




    "failure-description" =&amp;gt; "WFLYCTL0155: runtime-name may not be null",




    "rolled-back" =&amp;gt; true




}





</description>
			<version>1.0.0.CR4</version>
			<fixedVersion>1.0.0.CR5, 2.0.0.Alpha1</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.server.deployment.DeploymentRedeployHandler.java</file>
		</fixedFiles>
	</bug>
	<bug id="692" opendate="2015-05-13 13:27:56" fixdate="2015-05-15 21:04:41" resolution="Done">
		<buginformation>
			<summary>read-children-names(include-aliases=true) can return phantom results</summary>
			<description>If another resource exists with the same key as the target address of a resource alias, the read-children-names(include-aliases=true) operation can return phantom results.
Here&amp;amp;apos;s an example:
I have a alias registered that translates:






/subsystem=infinispan/cache-container=*/local-cache=*/file-store=FILE_STORE






to:






/subsystem=infinispan/cache-container=*/local-cache=*/store=file






Additionally, I have a resource named:






/subsystem=infinispan/cache-container=*/local-cache=*/store=none






If I create a cache that uses store=none, the results of a read-children-names(child-type=file-store, include-aliases=true) operation includes the FILE_STORE resource, even though the target resource (i.e. file=store) does not exist.
This additionally causes the /subsystem=infinispan:read-resource(include-aliases=true, recursive=true) operation to fail.</description>
			<version>1.0.0.CR3</version>
			<fixedVersion>1.0.0.CR5, 2.0.0.Alpha1</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.test.AliasResourceTestCase.java</file>
			<file type="M">org.jboss.as.controller.operations.global.GlobalOperationHandlers.java</file>
		</fixedFiles>
	</bug>
	<bug id="697" opendate="2015-05-18 23:21:51" fixdate="2015-05-21 10:30:59" resolution="Done">
		<buginformation>
			<summary>CLI does not handle paths with a value of &amp;apos;/&amp;apos;</summary>
			<description>It does not appear to be possible to address nodes with a name of &amp;amp;apos;/&amp;amp;apos; in the CLI. This is used in the default undertow subsystem to serve the welcome content.






[standalone@localhost:9990 /] /subsystem=undertow/server=default-server/host=default-host/location=*:read-resource




{




    "outcome" =&amp;gt; "success",




    "result" =&amp;gt; [{




        "address" =&amp;gt; [




            ("subsystem" =&amp;gt; "undertow"),




            ("server" =&amp;gt; "default-server"),




            ("host" =&amp;gt; "default-host"),




            ("location" =&amp;gt; "/")




        ],




        "outcome" =&amp;gt; "success",




        "result" =&amp;gt; {




            "handler" =&amp;gt; "welcome-content",




            "filter-ref" =&amp;gt; undefined




        }




    }]




}









[standalone@localhost:9990 /] /subsystem=undertow/server=default-server/host=default-host/location=\/:read-resource




Node type is not complete at index 71





</description>
			<version>2.0.0.Alpha2</version>
			<fixedVersion>1.0.0.CR5, 2.0.0.Alpha3</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.cli.parsing.operation.OperationRequestState.java</file>
			<file type="M">org.jboss.as.cli.parsing.test.AddressOnlyParsingTestCase.java</file>
		</fixedFiles>
	</bug>
	<bug id="172" opendate="2014-10-15 08:27:13" fixdate="2015-05-21 13:09:58" resolution="Done">
		<buginformation>
			<summary>Wrong application name used for Syslog logging</summary>
			<description>The auditlog code uses "WildFly Full" value as an application name (APP-NAME header field) for syslog logging. 
It&amp;amp;apos;s not allowed to use space in the value, because the space is a header field separator in syslog messages. Look at syslog message format - http://tools.ietf.org/html/rfc5424#section-6</description>
			<version>3.0.0.Alpha3</version>
			<fixedVersion>1.0.0.CR4</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.audit.SyslogAuditLogHandler.java</file>
		</fixedFiles>
		<links>
			<link type="Dependency" description="blocks">434</link>
			<link type="Duplicate" description="is duplicated by">1647</link>
		</links>
	</bug>
	<bug id="702" opendate="2015-05-19 18:15:41" fixdate="2015-05-22 17:03:25" resolution="Done">
		<buginformation>
			<summary>periodic-size-rotating-file-handler is missing from logging profiles</summary>
			<description>The periodic-size-rotating-file-handler was introduced in WildFly Core 1.x, but is missing from logging profiles.</description>
			<version>1.0.0.CR4</version>
			<fixedVersion>1.0.0.CR5, 2.0.0.Alpha3</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.logging.LoggingSubsystemTestCase.java</file>
			<file type="M">org.jboss.as.logging.LoggingSubsystemParser.java</file>
		</fixedFiles>
	</bug>
	<bug id="706" opendate="2015-05-20 22:37:34" fixdate="2015-05-22 17:04:45" resolution="Done">
		<buginformation>
			<summary>Non exploded deployments are incorrectly marked as exploded</summary>
			<description></description>
			<version>1.0.0.CR4</version>
			<fixedVersion>1.0.0.CR5, 2.0.0.Alpha3</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.server.deployment.SubDeploymentProcessor.java</file>
		</fixedFiles>
	</bug>
	<bug id="442" opendate="2014-12-02 19:15:13" fixdate="2015-05-28 21:46:55" resolution="Done">
		<buginformation>
			<summary>AbstractMultiTargetHandler-based handlers do not propagate failures to the top level failure-description</summary>
			<description>An example is worth a thousand words:






[standalone@localhost:9990 /] /path=*:query(where={read-only=1})




{




    "outcome" =&amp;gt; "failed",




    "result" =&amp;gt; [




        {




            "address" =&amp;gt; [("path" =&amp;gt; "jboss.server.temp.dir")],




            "outcome" =&amp;gt; "failed",




            "result" =&amp;gt; {




                "name" =&amp;gt; "jboss.server.temp.dir",




                "path" =&amp;gt; "/Users/hbraun/dev/prj/wildfly-core/core-build/target/wildfly-core-1.0.0.Alpha14-SNAPSHOT/standalone/tmp",




                "read-only" =&amp;gt; true,




                "relative-to" =&amp;gt; undefined




            },




            "rolled-back" =&amp;gt; true




        },




        {




            "address" =&amp;gt; [("path" =&amp;gt; "user.home")],




            "outcome" =&amp;gt; "failed",




            "result" =&amp;gt; {




                "name" =&amp;gt; "user.home",




                "path" =&amp;gt; "/Users/hbraun",




                "read-only" =&amp;gt; true,




                "relative-to" =&amp;gt; undefined




            },




            "rolled-back" =&amp;gt; true




        },




        {




            "address" =&amp;gt; [("path" =&amp;gt; "jboss.server.base.dir")],




            "outcome" =&amp;gt; "failed",




            "result" =&amp;gt; {




                "name" =&amp;gt; "jboss.server.base.dir",




                "path" =&amp;gt; "/Users/hbraun/dev/prj/wildfly-core/core-build/target/wildfly-core-1.0.0.Alpha14-SNAPSHOT/standalone",




                "read-only" =&amp;gt; true,




                "relative-to" =&amp;gt; undefined




            },




            "rolled-back" =&amp;gt; true




        },




        {




            "address" =&amp;gt; [("path" =&amp;gt; "java.home")],




            "outcome" =&amp;gt; "failed",




            "result" =&amp;gt; {




                "name" =&amp;gt; "java.home",




                "path" =&amp;gt; "/Library/Java/JavaVirtualMachines/jdk1.7.0_67.jdk/Contents/Home/jre",




                "read-only" =&amp;gt; true,




                "relative-to" =&amp;gt; undefined




            },




            "rolled-back" =&amp;gt; true




        },




        {




            "address" =&amp;gt; [("path" =&amp;gt; "user.dir")],




            "outcome" =&amp;gt; "failed",




            "result" =&amp;gt; {




                "name" =&amp;gt; "user.dir",




                "path" =&amp;gt; "/Users/hbraun/dev/prj/wildfly-core/core-build/target/wildfly-core-1.0.0.Alpha14-SNAPSHOT",




                "read-only" =&amp;gt; true,




                "relative-to" =&amp;gt; undefined




            },




            "rolled-back" =&amp;gt; true




        },




        {




            "address" =&amp;gt; [("path" =&amp;gt; "jboss.server.data.dir")],




            "outcome" =&amp;gt; "failed",




            "result" =&amp;gt; {




                "name" =&amp;gt; "jboss.server.data.dir",




                "path" =&amp;gt; "/Users/hbraun/dev/prj/wildfly-core/core-build/target/wildfly-core-1.0.0.Alpha14-SNAPSHOT/standalone/data",




                "read-only" =&amp;gt; true,




                "relative-to" =&amp;gt; undefined




            },




            "rolled-back" =&amp;gt; true




        },




        {




            "address" =&amp;gt; [("path" =&amp;gt; "jboss.home.dir")],




            "outcome" =&amp;gt; "failed",




            "result" =&amp;gt; {




                "name" =&amp;gt; "jboss.home.dir",




                "path" =&amp;gt; "/Users/hbraun/dev/prj/wildfly-core/core-build/target/wildfly-core-1.0.0.Alpha14-SNAPSHOT",




                "read-only" =&amp;gt; true,




                "relative-to" =&amp;gt; undefined




            },




            "rolled-back" =&amp;gt; true




        },




        {




            "address" =&amp;gt; [("path" =&amp;gt; "jboss.server.log.dir")],




            "outcome" =&amp;gt; "failed",




            "result" =&amp;gt; {




                "name" =&amp;gt; "jboss.server.log.dir",




                "path" =&amp;gt; "/Users/hbraun/dev/prj/wildfly-core/core-build/target/wildfly-core-1.0.0.Alpha14-SNAPSHOT/standalone/log",




                "read-only" =&amp;gt; true,




                "relative-to" =&amp;gt; undefined




            },




            "rolled-back" =&amp;gt; true




        },




        {




            "address" =&amp;gt; [("path" =&amp;gt; "jboss.server.config.dir")],




            "outcome" =&amp;gt; "failed",




            "result" =&amp;gt; {




                "name" =&amp;gt; "jboss.server.config.dir",




                "path" =&amp;gt; "/Users/hbraun/dev/prj/wildfly-core/core-build/target/wildfly-core-1.0.0.Alpha14-SNAPSHOT/standalone/configuration",




                "read-only" =&amp;gt; true,




                "relative-to" =&amp;gt; undefined




            },




            "rolled-back" =&amp;gt; true




        },




        {




            "address" =&amp;gt; [("path" =&amp;gt; "jboss.controller.temp.dir")],




            "outcome" =&amp;gt; "failed",




            "result" =&amp;gt; {




                "name" =&amp;gt; "jboss.controller.temp.dir",




                "path" =&amp;gt; "/Users/hbraun/dev/prj/wildfly-core/core-build/target/wildfly-core-1.0.0.Alpha14-SNAPSHOT/standalone/tmp",




                "read-only" =&amp;gt; true,




                "relative-to" =&amp;gt; undefined




            },




            "failure-description" =&amp;gt; "Illegal argument for attribute &amp;amp;apos;read-only&amp;amp;apos;. Expected type BOOLEAN",




            "rolled-back" =&amp;gt; true




        }




    ],




    "rolled-back" =&amp;gt; true




}






One item in the set has a failure description but the overall response does not.
ReadResourceDescriptionHandler handles similar things but has logic for creating an overall failure-description.</description>
			<version>1.0.0.Alpha13</version>
			<fixedVersion>2.0.0.Alpha3</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.operations.global.GlobalOperationHandlers.java</file>
		</fixedFiles>
	</bug>
	<bug id="731" opendate="2015-06-03 23:38:46" fixdate="2015-06-05 08:17:24" resolution="Done">
		<buginformation>
			<summary>TransformerAttachmentGrabber always returns null with map operations</summary>
			<description>Kabir, this thing seems a bit fragile. IIUC this was deviced primarily to address the issue with map operations not being transformable, but org.jboss.as.subsystem.test.TransformerAttachmentGrabber doesn&amp;amp;apos;t work with map operations, the attachment is always null.
I think the problem is with the step order, in org.jboss.as.subsystem.test.TransformerAttachmentGrabber#execute because the real op being a map operation which does attach(...) happens after the attachment is grabbed, that map ops are runtime only org.jboss.as.controller.operations.global.MapOperations#MAP_CLEAR_DEFINITION</description>
			<version>2.0.0.Alpha3</version>
			<fixedVersion>2.0.0.Alpha4</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.subsystem.test.TransformerAttachmentGrabber.java</file>
		</fixedFiles>
	</bug>
	<bug id="724" opendate="2015-06-01 12:03:10" fixdate="2015-06-10 10:08:34" resolution="Done">
		<buginformation>
			<summary>CLI throws IAE on tab completion</summary>
			<description>CLI throws IAE on tab completion. 
https://issues.jboss.org/browse/WFCORE-672 - CLI tab-completion for attribute name path syntax






[standalone@localhost:9990 /]  /subsystem=jgroups/stack=udp/transport=UDP:write-attribute(name=properties.java.lang.IllegalArgumentException




	at org.jboss.dmr.ModelValue.getKeys(ModelValue.java:136)




	at org.jboss.dmr.ModelNode.keys(ModelNode.java:1373)




	at org.jboss.as.cli.impl.AttributeNamePathCompleter$AttributeNamePathCallbackHandler.getCandidates(AttributeNamePathCompleter.java:165)




	at org.jboss.as.cli.impl.AttributeNamePathCompleter.complete(AttributeNamePathCompleter.java:112)




	at org.jboss.as.cli.impl.AttributeNamePathCompleter.complete(AttributeNamePathCompleter.java:96)




	at org.jboss.as.cli.operation.OperationRequestCompleter.complete(OperationRequestCompleter.java:229)




	at org.jboss.as.cli.operation.OperationRequestCompleter.complete(OperationRequestCompleter.java:73)




	at org.jboss.as.cli.CommandCompleter.doComplete(CommandCompleter.java:126)




	at org.jboss.as.cli.CommandCompleter.complete(CommandCompleter.java:63)




	at org.jboss.as.cli.impl.Console$Factory$1$1.complete(Console.java:122)




	at org.jboss.aesh.console.Console.complete(Console.java:1227)




	at org.jboss.aesh.console.Console.parseOperation(Console.java:551)




	at org.jboss.aesh.console.Console.read(Console.java:453)




	at org.jboss.aesh.console.Console.read(Console.java:347)




	at org.jboss.as.cli.impl.Console$Factory$1.readLine(Console.java:198)




	at org.jboss.as.cli.impl.CommandContextImpl.interact(CommandContextImpl.java:1327)




	at org.jboss.as.cli.impl.CliLauncher.main(CliLauncher.java:272)




	at org.jboss.as.cli.CommandLineMain.main(CommandLineMain.java:45)




	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)




	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)




	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)




	at java.lang.reflect.Method.invoke(Method.java:497)




	at org.jboss.modules.Module.run(Module.java:308)




	at org.jboss.modules.Main.main(Main.java:487)





</description>
			<version>2.0.0.Alpha3</version>
			<fixedVersion>2.0.0.Alpha5</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.cli.impl.AttributeNamePathCompleter.java</file>
			<file type="M">org.jboss.as.cli.parsing.test.AttributeNamePathCompletionTestCase.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">228</link>
		</links>
	</bug>
	<bug id="727" opendate="2015-06-02 06:44:33" fixdate="2015-06-10 10:10:11" resolution="Done">
		<buginformation>
			<summary>Some commands throws NPE on tab completion once disconnected</summary>
			<description>Some commands throws NullPointerException when CLI is disconnected from controller and user tries to use tab completion (so far I found these: ls, read-attribute, read-operation).
No exception is thrown with 6.4.0.GA</description>
			<version>2.0.0.Alpha3</version>
			<fixedVersion>1.0.0.CR6, 2.0.0.Alpha5</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.cli.impl.CommandCandidatesProvider.java</file>
			<file type="M">org.jboss.as.cli.handlers.ReadAttributeHandler.java</file>
			<file type="M">org.jboss.as.cli.handlers.LsHandler.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">232</link>
		</links>
	</bug>
	<bug id="716" opendate="2015-05-27 10:21:36" fixdate="2015-06-10 13:09:19" resolution="Done">
		<buginformation>
			<summary>Once server in reload-required state capabilities no longer checked at stage Model.</summary>
			<description>Once a server is in the state reload-required capabilities and requirements are no longer checked e.g.: -






[standalone@localhost:9990 /] ./core-service=management/management-interface=http-interface:undefine-attribute(name=security-realm)




{




    "outcome" =&amp;gt; "success",




    "response-headers" =&amp;gt; {




        "operation-requires-reload" =&amp;gt; true,




        "process-state" =&amp;gt; "reload-required"




    }




}






The following command is referencing a non-existent capability: -






[standalone@localhost:9990 /] ./core-service=management/management-interface=http-interface:write-attribute(name=security-domain, value=MgMtDom)




{




    "outcome" =&amp;gt; "success",




    "response-headers" =&amp;gt; {




        "operation-requires-reload" =&amp;gt; true,




        "process-state" =&amp;gt; "reload-required"




    }




}






When I execute :reload it will fail: -






11:21:18,567 ERROR [org.jboss.as.controller.management-operation] (Controller Boot Thread) WFLYCTL0013: Operation ("add") failed - address: ([




    ("core-service" =&amp;gt; "management"),




    ("management-interface" =&amp;gt; "http-interface")




]): java.lang.IllegalStateException: WFLYCTL0364: Capability &amp;amp;apos;org.wildfly.security.security-domain.MgMtDom&amp;amp;apos; is unknown.




	at org.jboss.as.controller.ModelControllerImpl$CapabilityRegistryImpl.getCapabilityRegistration(ModelControllerImpl.java:1388)





</description>
			<version>2.0.0.Alpha2</version>
			<fixedVersion>2.0.0.Alpha5</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.CapabilityReferenceRecorder.java</file>
		</fixedFiles>
	</bug>
	<bug id="752" opendate="2015-06-09 14:36:24" fixdate="2015-06-10 13:12:50" resolution="Done">
		<buginformation>
			<summary>Only one deployment overlay can be created for each deployment</summary>
			<description></description>
			<version>1.0.0.CR5</version>
			<fixedVersion>1.0.0.CR6, 2.0.0.Alpha5</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.server.deploymentoverlay.DeploymentOverlayIndex.java</file>
		</fixedFiles>
	</bug>
	<bug id="763" opendate="2015-06-16 14:59:39" fixdate="2015-06-18 20:36:00" resolution="Done">
		<buginformation>
			<summary>Persisting an empty list [] gets read as a list with empty string [""] resulting in IllegalArgumentException</summary>
			<description>In short, the default AttributeParser/AttributeMarshaller for list attributes do not handle empty lists in a symmetric fashion.
e.g. if I persist an empty list to xml, and read it back again, using the default parser/marshaller, I should get back an empty list.  Instead I get back a list of size 1 containing an empty string.
Affects at least infinispan aliases and modcluster proxies...
(20:09:22) rhusar: pferraro: https://gist.github.com/rhusar/5eef22d7a6479f042a5d#file-gistfile1-txt-L23
(20:09:34) rhusar: pferraro: if i write an empy list, read it back -&amp;gt; empty list
(20:09:57) rhusar: pferraro: if i use the default writeAttribute, reload, read it back and i have a list of size 1 containing empty String..
(20:23:23) rhusar: pferraro: alright, this is also "broken" in the infiinispan subsystem aliases
(20:23:24) rhusar: pferraro: 20:22:55,775 ERROR [org.jboss.as.controller.management-operation] (ServerService Thread Pool  40) WFLYCTL0013: Operation ("add") failed - address: ([
(20:23:24) rhusar:     ("subsystem" =&amp;gt; "infinispan"),
(20:23:24) rhusar:     ("cache-container" =&amp;gt; "hibernate")
(20:23:24) rhusar: ]): java.lang.IllegalArgumentException: Empty name segment is not allowed for infinispan
(20:23:24) rhusar: 	at org.jboss.msc.service.ServiceName.of(ServiceName.java:90)
(20:23:24) rhusar: 	at org.jboss.msc.service.ServiceName.append(ServiceName.java:117)
(20:23:24) rhusar: 	at org.wildfly.clustering.infinispan.spi.service.CacheContainerServiceName$1.getServiceName(CacheContainerServiceName.java:35)
(20:23:24) rhusar: 	at org.jboss.as.clustering.infinispan.subsystem.CacheContainerBuilder.build(CacheContainerBuilder.java:79)
(20:23:24) rhusar: 	at org.jboss.as.clustering.infinispan.subsystem.CacheContainerAddHandler.installRuntimeServices(CacheContainerAddHandler.java:165)
(20:23:24) rhusar: 	at org.jboss.as.clustering.infinispan.subsystem.CacheContainerAddHandler.performRuntime(CacheContainerAddHandler.java:82)
(20:23:24) rhusar: 	at org.jboss.as.controller.AbstractAddStepHandler.performRuntime(AbstractAddStepHandler.java:309)
(20:23:24) rhusar: 	at org.jboss.as.controller.AbstractAddStepHandler$1.execute(AbstractAddStepHandler.java:130)
(20:23:24) rhusar: 	at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:822)
(20:23:24) rhusar: 	at org.jboss.as.controller.AbstractOperationContext.doCompleteStep(AbstractOperationContext.java:620)
(20:23:24) rhusar: 	at org.jboss.as.controller.AbstractOperationContext.completeStepInternal(AbstractOperationContext.java:373)
(20:23:24) rhusar: 	at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:349)
(20:23:24) rhusar: 	at org.jboss.as.controller.ParallelBootOperationStepHandler$ParallelBootTask.run(ParallelBootOperationStepHandler.java:359)
(20:23:24) rhusar: 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
(20:23:24) rhusar: 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
(20:23:24) rhusar: 	at java.lang.Thread.run(Thread.java:745)
(20:23:24) rhusar: 	at org.jboss.threads.JBossThread.run(JBossThread.java:320)</description>
			<version>1.0.0.CR6</version>
			<fixedVersion>1.0.0.CR7, 2.0.0.Alpha5</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.AttributeParser.java</file>
			<file type="M">org.jboss.as.controller.SimpleListAttributeDefinitionUnitTestCase.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">4779</link>
		</links>
	</bug>
	<bug id="765" opendate="2015-06-16 11:16:33" fixdate="2015-06-18 20:36:51" resolution="Done">
		<buginformation>
			<summary>Shutdown error in domain mode</summary>
			<description>Scenario

Download and unpack wildfly-dist-9.0.0.CR2.zip.
Run bin/domain.sh and wait for servers to start.
Hit Ctrl-C.

Problem
The following error message appears for each configured server:






[Server:server-one] 13:10:34,966 ERROR [org.jboss.as.controller.management-operation] (ServerService Thread Pool -- 30) WFLYCTL0190: Step handler org.jboss.as.server.operations.ServerDomainProcessShutdownHandler$1@25f7734b for operation {"operation" =&amp;gt; "shutdown","address" =&amp;gt; [],"operation-id" =&amp;gt; -1,"timeout" =&amp;gt; -1} at address [] failed handling operation rollback -- org.jboss.msc.service.ServiceNotFoundException: Service service jboss.server.graceful-shutdown-service not found: org.jboss.msc.service.ServiceNotFoundException: Service service jboss.server.graceful-shutdown-service not found                                                                                                                                                            




[Server:server-one]     at org.jboss.msc.service.ServiceContainerImpl.getRequiredService(ServiceContainerImpl.java:669)




[Server:server-one]     at org.jboss.as.controller.OperationContextImpl$OperationContextServiceRegistry.getRequiredService(OperationContextImpl.java:2013)




[Server:server-one]     at org.jboss.as.server.operations.ServerDomainProcessShutdownHandler$1$1.handleResult(ServerDomainProcessShutdownHandler.java:102)




[Server:server-one]     at org.jboss.as.controller.AbstractOperationContext$Step.invokeResultHandler(AbstractOperationContext.java:1401)




[Server:server-one]     at org.jboss.as.controller.AbstractOperationContext$Step.handleResult(AbstractOperationContext.java:1381)




[Server:server-one]     at org.jboss.as.controller.AbstractOperationContext$Step.finalizeInternal(AbstractOperationContext.java:1332)




[Server:server-one]     at org.jboss.as.controller.AbstractOperationContext$Step.finalizeStep(AbstractOperationContext.java:1292)




[Server:server-one]     at org.jboss.as.controller.AbstractOperationContext$Step.access$300(AbstractOperationContext.java:1180)




[Server:server-one]     at org.jboss.as.controller.AbstractOperationContext.finishStep(AbstractOperationContext.java:937)




[Server:server-one]     at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:885)




[Server:server-one]     at org.jboss.as.controller.AbstractOperationContext.doCompleteStep(AbstractOperationContext.java:601)




[Server:server-one]     at org.jboss.as.controller.AbstractOperationContext.completeStepInternal(AbstractOperationContext.java:354)




[Server:server-one]     at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:330)




[Server:server-one]     at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1183)




[Server:server-one]     at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:362)




[Server:server-one]     at org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:218)




[Server:server-one]     at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler.internalExecute(TransactionalProtocolOperationHandler.java:234)




[Server:server-one]     at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler.doExecute(TransactionalProtocolOperationHandler.java:174)




[Server:server-one]     at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler$1.run(TransactionalProtocolOperationHandler.java:137)




[Server:server-one]     at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler$1.run(TransactionalProtocolOperationHandler.java:133)




[Server:server-one]     at java.security.AccessController.doPrivileged(Native Method)




[Server:server-one]     at javax.security.auth.Subject.doAs(Subject.java:360)




[Server:server-one]     at org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:81)




[Server:server-one]     at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler$2$1.run(TransactionalProtocolOperationHandler.java:153)




[Server:server-one]     at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler$2$1.run(TransactionalProtocolOperationHandler.java:149)




[Server:server-one]     at java.security.AccessController.doPrivileged(Native Method)




[Server:server-one]     at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler$2.execute(TransactionalProtocolOperationHandler.java:149)




[Server:server-one]     at org.jboss.as.protocol.mgmt.AbstractMessageHandler$2$1.doExecute(AbstractMessageHandler.java:298)




[Server:server-one]     at org.jboss.as.protocol.mgmt.AbstractMessageHandler$AsyncTaskRunner.run(AbstractMessageHandler.java:518)




[Server:server-one]     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)




[Server:server-one]     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)




[Server:server-one]     at java.lang.Thread.run(Thread.java:745)




[Server:server-one]     at org.jboss.threads.JBossThread.run(JBossThread.java:320)






Tried on two different machines, both with Java 7 and Java 8. Also occurs with 9.0.0.CR1. Does not occur with 8.2.0.Final.</description>
			<version>1.0.0.CR6</version>
			<fixedVersion>1.0.0.CR7, 2.0.0.Alpha5</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.server.operations.ServerDomainProcessShutdownHandler.java</file>
		</fixedFiles>
	</bug>
	<bug id="754" opendate="2015-06-02 11:17:26" fixdate="2015-06-18 20:37:41" resolution="Done">
		<buginformation>
			<summary>EAP fails to start with -bmanagement= option and with specific IP settings</summary>
			<description>Description of problem:

EAP fails to start with -bmanagement= option. IPv4 address is used in this option.
Host Controller starts to listening on IPv4:9999
Server:server-one probably resolve IPv4 address to host name. Server-one tries to connect to this host name. Hostname is resolved by ping ($ ping dev98) to IPv6 address, where host controller is not listening.
This error doesn&amp;amp;apos;t occur, if hostname is resolved to IPv4 address by ping on machine.
This error doesn&amp;amp;apos;t occur on EAP 6.4.0

How reproducible:

windows

Steps to Reproduce:
Example on dev98 machine:

ssh dev98
ping dev98






Pinging dev98 [fe80::699a:d857:e5cc:e3b7%14] with 32 bytes of data:




Reply from fe80::699a:d857:e5cc:e3b7%14: time&amp;lt;1ms 




Reply from fe80::699a:d857:e5cc:e3b7%14: time&amp;lt;1ms 




Reply from fe80::699a:d857:e5cc:e3b7%14: time&amp;lt;1ms 




Reply from fe80::699a:d857:e5cc:e3b7%14: time&amp;lt;1ms 









Ping statistics for fe80::699a:d857:e5cc:e3b7%14:




    Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),




Approximate round trip times in milli-seconds:




    Minimum = 0ms, Maximum = 0ms, Average = 0ms






ping -a 10.16.92.7






Pinging dev98 [10.16.92.7] with 32 bytes of data:




Reply from 10.16.92.7: bytes=32 time&amp;lt;1ms TTL=128




Reply from 10.16.92.7: bytes=32 time&amp;lt;1ms TTL=128




Reply from 10.16.92.7: bytes=32 time&amp;lt;1ms TTL=128




Reply from 10.16.92.7: bytes=32 time&amp;lt;1ms TTL=128









Ping statistics for 10.16.92.7:




    Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),




Approximate round trip times in milli-seconds:




    Minimum = 0ms, Maximum = 0ms, Average = 0ms






domain.bat -bmanagement=10.16.92.7

Actual results:






.....




[Host Controller] 06:49:07,673 INFO  [org.jboss.as.remoting] (MSC service thread 1-3) WFLYRMT0001: Listening on 10.16.92.7:9999




.....




[Server:server-one] 06:49:16,251 ERROR [org.jboss.msc.service.fail] (ServerService Thread Pool -- 2) MSC000001: Failed to start service jboss.server-boot-operations: org.jboss.msc.service.StartException in service jboss.server-boot-operations: java.net.ConnectException: WFLYPRT0053: Could not connect to remote://dev98:9999. The connection failed




[Server:server-one] 	at org.jboss.as.server.mgmt.domain.ServerBootOperationsService$1.run(ServerBootOperationsService.java:72)




[Server:server-one] 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)




[Server:server-one] 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)




[Server:server-one] 	at java.lang.Thread.run(Thread.java:745)




[Server:server-one] 	at org.jboss.threads.JBossThread.run(JBossThread.java:320)




[Server:server-one] Caused by: java.net.ConnectException: WFLYPRT0053: Could not connect to remote://dev98:9999. The connection failed




[Server:server-one] 	at org.jboss.as.protocol.ProtocolConnectionUtils.connectSync(ProtocolConnectionUtils.java:122)




[Server:server-one] 	at org.jboss.as.protocol.ProtocolConnectionManager$EstablishingConnection.connect(ProtocolConnectionManager.java:257)




[Server:server-one] 	at org.jboss.as.protocol.ProtocolConnectionManager.connect(ProtocolConnectionManager.java:71)




[Server:server-one] 	at org.jboss.as.server.mgmt.domain.HostControllerConnection.openConnection(HostControllerConnection.java:130)




[Server:server-one] 	at org.jboss.as.server.mgmt.domain.HostControllerClient.resolveBootUpdates(HostControllerClient.java:85)




[Server:server-one] 	at org.jboss.as.server.mgmt.domain.ServerBootOperationsService$1.run(ServerBootOperationsService.java:68)




[Server:server-one] 	... 4 more






Expected results:
  No errors</description>
			<version>1.0.0.CR5</version>
			<fixedVersion>1.0.0.CR7, 2.0.0.Alpha5</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.host.controller.ServerInventoryService.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">237</link>
		</links>
	</bug>
	<bug id="769" opendate="2015-06-17 14:18:03" fixdate="2015-06-27 00:12:06" resolution="Done">
		<buginformation>
			<summary>Boot errors should hide the failure description if the failing operation is not accessible</summary>
			<description>The boot error collector reports whatever failure-description it was passed. Those can include pretty random info, and there&amp;amp;apos;s no good way to know what,so it could leak some sensitive information.</description>
			<version>2.0.0.Alpha4</version>
			<fixedVersion>2.0.0.Alpha5</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.AbstractOperationContext.java</file>
			<file type="M">org.jboss.as.controller.BootErrorCollector.java</file>
		</fixedFiles>
	</bug>
	<bug id="787" opendate="2015-07-01 17:01:44" fixdate="2015-07-03 01:04:09" resolution="Done">
		<buginformation>
			<summary>OSHs that remove capabilities cannot access the removed capability to restore runtime services during rollback</summary>
			<description>If an OSH removes a capability in Stage.MODEL, then removes services associated with the capability, and then the operation rolls back, the OSH can&amp;amp;apos;t use the capability to figure out how to restore services.
This is a somewhat more difficult problem than what I addressed for actually removing the runtime services in [1]. That solution relied on making it easy for the remove step handler to use the capability it itself removed. But restoring services typically involves the remove handler calling out to utility code, often part of an add handler. Modifying that utility code to let the remove handler provide service names would be painful.
Instead I propose simply discarding the modified management model at the beginning of rollback, with the result that rollback handlers will see the capabilities as they existed before the op began.
See http://lists.jboss.org/pipermail/wildfly-dev/2015-July/004170.html for details.
[1]</description>
			<version>2.0.0.Alpha5</version>
			<fixedVersion>2.0.0.Alpha6</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.ModelControllerImpl.java</file>
			<file type="M">org.jboss.as.controller.ReadOnlyContext.java</file>
			<file type="M">org.jboss.as.controller.ParallelBootOperationContext.java</file>
			<file type="M">org.jboss.as.controller.OperationContextImpl.java</file>
			<file type="M">org.jboss.as.controller.AbstractOperationContext.java</file>
		</fixedFiles>
		<links>
			<link type="Dependency" description="is blocked by">792</link>
		</links>
	</bug>
	<bug id="779" opendate="2015-06-25 19:02:10" fixdate="2015-07-08 23:05:30" resolution="Done">
		<buginformation>
			<summary>AbstractAddStepHandler doesn&amp;apos;t let AttributeDefinitions record default capability requirements</summary>
			<description>AbstractAddStepHandler.recordCapabilitiesAndRequirements(...) has this:






        ModelNode model = resource.getModel();




        for (AttributeDefinition ad : attributes) {




            if (model.hasDefined(ad.getName())) {




                ad.addCapabilityRequirements(context, model.get(ad.getName()));




            }




        }






That &amp;amp;apos;if&amp;amp;apos; check removes the opportunity for an AD to register a requirement based on the default value of the attribute.
SimpleAttributeDefinition includes logic for doing that, so not giving it a chance to execute is inconsistent. AbstractWriteAttributeHandler also doesn&amp;amp;apos;t include any such limitation.</description>
			<version>2.0.0.Alpha4</version>
			<fixedVersion>2.0.0.Alpha8</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.SimpleListAttributeDefinition.java</file>
			<file type="M">org.jboss.as.controller.AttributeDefinition.java</file>
			<file type="M">org.jboss.as.controller.StringListAttributeDefinition.java</file>
			<file type="M">org.jboss.as.controller.SimpleAttributeDefinition.java</file>
			<file type="M">org.jboss.as.controller.AbstractAddStepHandler.java</file>
		</fixedFiles>
	</bug>
	<bug id="774" opendate="2015-06-17 11:49:33" fixdate="2015-07-09 06:50:32" resolution="Done">
		<buginformation>
			<summary>Memory leak in JBoss CLI</summary>
			<description>The JBoss CLI contains a memory leak related to CLI Kerberos authentication.
The org.jboss.as.cli.impl.CommandContextImpl class calls the initJaasConfig() in its constructor, 
which adds a new JaasConfigurationWrapper instance to javax.security.auth.login.Configuration.
It&amp;amp;apos;s done for every new CommandContext instance, so it consumes more and more memory. There is no cleanup for the registered 
configurations.
Moreover, the searches for appropriate 
login config take more and more time because they have to go through all the wrapped objects.</description>
			<version>1.0.0.CR6</version>
			<fixedVersion>2.0.0.Alpha8</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.cli.impl.CommandContextImpl.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">340</link>
		</links>
	</bug>
	<bug id="810" opendate="2015-07-10 15:54:41" fixdate="2015-07-15 13:27:20" resolution="Done">
		<buginformation>
			<summary>Audit log handler sub-resources cannot be removed in same op as the handler</summary>
			<description>The various child resources under the management audit log syslog handler resources implement the runtime part of  "remove" by trying to read the resource tree starting at the parent and then constructing and registering a new audit log handler.
This will fail if the child resource and the parent audit log handler resource are both removed in separate steps in the same composite op. The read of the parent will fail as it will be gone by Stage.RUNTIME.
The composite thing is kind of an edge case (since just the parent can be removed) but it also interferes with WFCORE-808.</description>
			<version>2.0.0.Alpha6</version>
			<fixedVersion>2.0.0.Alpha10</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.domain.management.audit.SyslogAuditLogHandlerResourceDefinition.java</file>
			<file type="M">org.jboss.as.domain.management.audit.SyslogAuditLogProtocolResourceDefinition.java</file>
		</fixedFiles>
		<links>
			<link type="Related" description="relates to">808</link>
		</links>
	</bug>
	<bug id="813" opendate="2015-07-10 22:38:57" fixdate="2015-07-15 13:27:49" resolution="Done">
		<buginformation>
			<summary>AbstractRemoveStepHandler doesn&amp;apos;t let AttributeDefinitions record default capability requirements</summary>
			<description>Similar to WFCORE-779, but for the remove handler.</description>
			<version>2.0.0.Alpha8</version>
			<fixedVersion>2.0.0.Alpha10</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.AbstractRemoveStepHandler.java</file>
		</fixedFiles>
	</bug>
	<bug id="815" opendate="2015-07-13 07:57:45" fixdate="2015-07-15 13:34:32" resolution="Done">
		<buginformation>
			<summary>One profile can have more ancestors with same submodules</summary>
			<description>Description of problem:
One profile can have more ancestors with same submodules. It leads to WFLYCTL0212: Duplicate resource [("subsystem" =&amp;gt; "subsystem_name")] . Hierarchical composition of profiles was added to AS with EAP7-281 and WFCORE-382
How reproducible:
Always
Steps to Reproduce:

get fresh EAP
./domain.sh
./jboss-cli.sh -c
/profile=mail-01:add
/profile=mail-02:add
/profile=mail-01/subsystem=mail:add
/profile=mail-02/subsystem=mail:add
/profile=default-new:add
/profile=default-new:list-add(name=includes, value=mail-01)
/profile=default-new:list-add(name=includes, value=mail-02)

Actual results:
No errors.
Expected results:






{




    "outcome" =&amp;gt; "failed",




    "failure-description" =&amp;gt; {"domain-failure-description" =&amp;gt; "WFLYCTL0401: Profile &amp;amp;apos;mail-01&amp;amp;apos; defines subsystem &amp;amp;apos;mail&amp;amp;apos; which is also defined in its ancestor profile &amp;amp;apos;mail-02&amp;amp;apos;. Overriding subsystems is not supported"},




    "rolled-back" =&amp;gt; true




}






Workaround:
Add any subsystem to default-new profile:

/profile=mail-01:add
/profile=mail-02:add
/profile=mail-01/subsystem=mail:add
/profile=mail-02/subsystem=mail:add
/profile=default-new:add
/profile=default-new/subsystem=jdr:add
/profile=default-new:list-add(name=includes, value=mail-01)
/profile=default-new:list-add(name=includes, value=mail-02)

</description>
			<version>2.0.0.Alpha9</version>
			<fixedVersion>2.0.0.Alpha10</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.host.controller.logging.HostControllerLogger.java</file>
			<file type="M">org.jboss.as.domain.controller.operations.SocketBindingGroupIncludesHandlerTestCase.java</file>
			<file type="M">org.jboss.as.domain.controller.operations.DomainModelReferenceValidator.java</file>
			<file type="M">org.jboss.as.domain.controller.operations.ProfileIncludesHandlerTestCase.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">401</link>
		</links>
	</bug>
	<bug id="755" opendate="2015-06-11 08:55:24" fixdate="2015-07-16 18:45:30" resolution="Done">
		<buginformation>
			<summary>bootTimeout for embedded server uses milis instead of nanos</summary>
			<description>Value for --timeout argument needs to be set in microseconds instead of seconds.






// boot time is transformed into milis




Long bootTimeout = null;




String timeoutString = timeout.getValue(parsedCmd);




if (timeoutString != null) {




   bootTimeout = TimeUnit.SECONDS.toMillis(Long.parseLong(timeoutString));




}




...




// but expired is transformed into nanos




long expired = bootTimeout == null ? Long.MAX_VALUE : System.nanoTime() + bootTimeout;






Could be fixed by converting parsed timeoutString into nanos.</description>
			<version>2.0.0.Alpha4</version>
			<fixedVersion>2.0.0.Alpha10</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.cli.embedded.EmbedServerHandler.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">304</link>
		</links>
	</bug>
	<bug id="816" opendate="2015-07-13 11:31:15" fixdate="2015-07-16 18:46:00" resolution="Done">
		<buginformation>
			<summary>Error messages for profile and socket-binding-group includes should be in host-controller, not controller</summary>
			<description></description>
			<version>2.0.0.Alpha9</version>
			<fixedVersion>2.0.0.Alpha10</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.host.controller.logging.HostControllerLogger.java</file>
			<file type="M">org.jboss.as.controller.logging.ControllerLogger.java</file>
			<file type="M">org.jboss.as.controller.SocketCapabilityResolutionUnitTestCase.java</file>
			<file type="M">org.jboss.as.domain.controller.operations.DomainModelReferenceValidator.java</file>
		</fixedFiles>
	</bug>
	<bug id="691" opendate="2015-05-13 13:07:28" fixdate="2015-07-23 22:46:51" resolution="Done">
		<buginformation>
			<summary>Can not parse a wrapped properties attribute inside a group</summary>
			<description>Attribute definition is: 






        static final PropertiesAttributeDefinition WRAPPED_PROPERTIES_IN_GROUP = new PropertiesAttributeDefinition.Builder(




                "wrapped-properties-in-group", true)




                .setWrapXmlElement(true)




                .setWrapperElement("wrapped-properties")




                .setXmlName("property")




                .setAttributeGroup("mygroup")




                .setAllowExpression(true)




                .build();






Corresponding XML representation is:






        &amp;lt;mygroup other-attribute-in-group="foo"&amp;gt;




            &amp;lt;wrapped-properties&amp;gt;




                &amp;lt;property name="prop1" value="val1"/&amp;gt;




                &amp;lt;property name="prop2" value="val2"/&amp;gt;




            &amp;lt;/wrapped-properties&amp;gt;




        &amp;lt;/mygroup&amp;gt;






XML parsing fails with:






Message: WFLYCTL0198: Unexpected element &amp;amp;apos;{urn:jboss:domain:test:1.0}mygroup&amp;amp;apos; encountered




        at org.jboss.as.controller.parsing.ParseUtils.unexpectedElement(ParseUtils.java:89)




        at org.jboss.as.controller.PersistentResourceXMLDescription.parseChildren(PersistentResourceXMLDescription.java:240)




        at org.jboss.as.controller.PersistentResourceXMLDescription.parse(PersistentResourceXMLDescription.java:159)




        at org.jboss.as.controller.PersistentResourceXMLDescription.parseChildren(PersistentResourceXMLDescription.java:259)




        at org.jboss.as.controller.PersistentResourceXMLDescription.parse(PersistentResourceXMLDescription.java:159)




        at org.jboss.as.controller.PersistentResourceXMLParser.readElement(PersistentResourceXMLParser.java:41)




        at org.jboss.as.controller.PersistentResourceXMLParser.readElement(PersistentResourceXMLParser.java:35)




        at org.jboss.staxmapper.XMLMapperImpl.processNested(XMLMapperImpl.java:110)




        at org.jboss.staxmapper.XMLMapperImpl.parseDocument(XMLMapperImpl.java:69)




        at org.jboss.as.controller.persistence.PersistentResourceXMLParserTestCase.testGroups(PersistentResourceXMLParserTestCas




e.java:147)





</description>
			<version>1.0.0.CR3</version>
			<fixedVersion>2.0.0.Alpha11</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.AttributeParser.java</file>
			<file type="M">org.jboss.as.controller.persistence.PersistentResourceXMLParserTestCase.java</file>
			<file type="M">org.jboss.as.controller.PropertiesAttributeDefinition.java</file>
			<file type="M">org.jboss.as.controller.PersistentResourceXMLDescription.java</file>
			<file type="M">org.jboss.as.remoting.RemotingSubsystemXMLPersister.java</file>
		</fixedFiles>
		<links>
			<link type="Causality" description="causes">5014</link>
			<link type="Related" description="relates to">4584</link>
		</links>
	</bug>
	<bug id="809" opendate="2015-07-10 12:39:07" fixdate="2015-07-23 22:48:26" resolution="Done">
		<buginformation>
			<summary>Can not parse an ObjectListAttributeDefinition of a PersistentResourceDefinition</summary>
			<description>My server resource defines an "interceptors" attribute:






        public static final ObjectTypeAttributeDefinition CLASS = ObjectTypeAttributeDefinition.Builder.of("class",




                create("name", ModelType.STRING, false)




                        .setAllowExpression(false)




                        .build(),




                create("module", ModelType.STRING, false)




                        .setAllowExpression(false)




                        .build())




                .build();









        public static final ObjectListAttributeDefinition INTERCEPTORS = ObjectListAttributeDefinition.Builder.of("interceptors", CLASS)




                .setAllowNull(true)




                .setAllowExpression(false)




                .setMinSize(1)




                .setMaxSize(Integer.MAX_VALUE)




                .build();






The "interceptors" is a LIST of "class" attribute which is an OBJECT composed of a "name" and "module" attribute.
I&amp;amp;apos;m not sure what is the corresponding XML format for this attribute.
Ideally, I&amp;amp;apos;d like to have this XML format:






    &amp;lt;server name="default" &amp;gt;




            ...




            &amp;lt;interceptors&amp;gt;




                &amp;lt;class name="org.bar.MyInterceptor"




                       module="org.bar" /&amp;gt;




                &amp;lt;class name="org.baz.MyOtherInterceptor"




                       module="org.baz" /&amp;gt;




            &amp;lt;/interceptors&amp;gt;




            ...




      &amp;lt;/server&amp;gt;






This XML can not be parsed and I have not found which XML representation can be parsed given my INTERCEPTORS definition.
The XML parsing fails with:






javax.xml.stream.XMLStreamException: ParseError at [row,col]:[23,27]




Message: WFLYCTL0377: Unexpected element &amp;amp;apos;{urn:jboss:domain:test:1.0}interceptors&amp;amp;apos; encountered. Valid elements are: &amp;amp;apos;buffer-cache&amp;amp;apos;




	at org.jboss.as.controller.parsing.ParseUtils.unexpectedElement(ParseUtils.java:98)




	at org.jboss.as.controller.PersistentResourceXMLDescription.parseChildren(PersistentResourceXMLDescription.java:270)




	at org.jboss.as.controller.PersistentResourceXMLDescription.parse(PersistentResourceXMLDescription.java:166)




	at org.jboss.as.controller.PersistentResourceXMLDescription.parseChildren(PersistentResourceXMLDescription.java:266)




	at org.jboss.as.controller.PersistentResourceXMLDescription.parse(PersistentResourceXMLDescription.java:166)




	at org.jboss.as.controller.PersistentResourceXMLParser.readElement(PersistentResourceXMLParser.java:41)




	at org.jboss.as.controller.PersistentResourceXMLParser.readElement(PersistentResourceXMLParser.java:35)






Corresponding test case in wildly-core is in my branch at https://github.com/jmesnil/wildfly-core/tree/parse_ObjectListAttributeDefinition
</description>
			<version>2.0.0.Alpha6</version>
			<fixedVersion>2.0.0.Alpha11</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.AttributeParser.java</file>
			<file type="M">org.jboss.as.controller.ObjectTypeAttributeDefinition.java</file>
			<file type="M">org.jboss.as.controller.persistence.PersistentResourceXMLParserTestCase.java</file>
			<file type="M">org.jboss.as.controller.AttributeMarshaller.java</file>
			<file type="M">org.jboss.as.controller.PersistentResourceXMLDescription.java</file>
			<file type="M">org.jboss.as.controller.ObjectListAttributeDefinition.java</file>
			<file type="M">org.jboss.as.controller.DefaultAttributeMarshaller.java</file>
		</fixedFiles>
		<links>
			<link type="Dependency" description="blocks">4867</link>
		</links>
	</bug>
	<bug id="834" opendate="2015-07-21 19:12:42" fixdate="2015-07-30 22:18:30" resolution="Done">
		<buginformation>
			<summary>Capability resolution does not properly deal with &amp;apos;included&amp;apos; profiles and socket-binding-groups</summary>
			<description>Resolution of capabilities declared in the domain &amp;amp;apos;profile&amp;amp;apos; and &amp;amp;apos;socket-binding-group&amp;amp;apos; resource tree works properly when the resources don&amp;amp;apos;t include others. But once &amp;amp;apos;includes&amp;amp;apos; are declared, the capability resolution won&amp;amp;apos;t understand the relationship between the including resource and the included ones, and capabilities declared in the included ones will not be resolvable.</description>
			<version>2.0.0.Alpha10</version>
			<fixedVersion>2.0.0.Alpha12</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.CompositeOperationHandler.java</file>
			<file type="M">org.jboss.as.controller.OperationContextImpl.java</file>
			<file type="M">org.jboss.as.controller.capability.registry.HostCapabilityContext.java</file>
			<file type="M">org.jboss.as.controller.capability.registry.CapabilityContext.java</file>
			<file type="M">org.jboss.as.controller.SocketCapabilityResolutionUnitTestCase.java</file>
			<file type="M">org.jboss.as.controller.capability.registry.CapabilityResolutionContext.java</file>
			<file type="M">org.jboss.as.controller.ModelControllerImpl.java</file>
			<file type="D">org.jboss.as.controller.capability.registry.DomainCapabilityContext.java</file>
			<file type="M">org.jboss.as.controller.AbstractOperationContext.java</file>
			<file type="M">org.jboss.as.controller.capability.registry.DelegatingRuntimeCapabilityRegistry.java</file>
			<file type="M">org.jboss.as.controller.capability.registry.CapabilityRegistry.java</file>
			<file type="M">org.jboss.as.controller.capability.registry.CapabilityId.java</file>
		</fixedFiles>
		<links>
			<link type="Related" description="is related to">750</link>
		</links>
	</bug>
	<bug id="849" opendate="2015-07-29 10:32:08" fixdate="2015-08-06 16:50:14" resolution="Done">
		<buginformation>
			<summary>XmlCompletionScannerTest fails with IBM JDK 8</summary>
			<description>Description of problem:
org.jboss.as.server.deployment.scanner.XmlCompletionScannerTest#testIncompleteDocument fails on IBM JDK 8
How reproducible:
100% on RHEL7 &amp;amp;&amp;amp; IBM JDK 8
60% on RHEL6 &amp;amp;&amp;amp; 64-bit &amp;amp;&amp;amp; IBM JDK 8
Steps to Reproduce:

get fresh wildfly-core
cd deployment-scanner
mvn test   -fae -Dmaven.test.failure.ignore=true -Dnode0=$MYTESTIP_1  -DfailIfNoTests=false -Dtest=XmlCompletionScannerTest

Actual results:






Running org.jboss.as.server.deployment.scanner.XmlCompletionScannerTest




Tests run: 2, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 0.254 sec &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.jboss.as.server.deployment.scanner.XmlCompletionScannerTest




testIncompleteDocument(org.jboss.as.server.deployment.scanner.XmlCompletionScannerTest)  Time elapsed: 0.214 sec  &amp;lt;&amp;lt;&amp;lt; FAILURE!




java.lang.AssertionError: 




Expected: is &amp;lt;1&amp;gt;




     but: was &amp;lt;0&amp;gt;




	at org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)




	at org.junit.Assert.assertThat(Assert.java:865)




	at org.junit.Assert.assertThat(Assert.java:832)




	at org.jboss.as.server.deployment.scanner.XmlCompletionScannerTest.testIncompleteDocument(XmlCompletionScannerTest.java:65)






Expected results:
No errors in output</description>
			<version>2.0.0.Alpha11</version>
			<fixedVersion>2.0.0.Alpha13</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.server.deployment.scanner.XmlCompletionScannerTest.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">532</link>
		</links>
	</bug>
	<bug id="870" opendate="2015-08-06 12:09:25" fixdate="2015-08-06 16:50:54" resolution="Done">
		<buginformation>
			<summary>Seeing frequent "java.lang.UnsupportedOperationException: &amp;apos;acl:acl&amp;apos; not supported as initial attribute" on Solaris arch</summary>
			<description>I see the exception during e.g CDI TCK execution (but also during another tests execution as well) and it manifests as:






2015-08-03 07:14:38,692 ERROR [org.jboss.as.controller.management-operation] (management-handler-thread - 2) WFLYCTL0009: Failed to store configuration to standalone-full.xml: java.lang.UnsupportedOperationException: &amp;amp;apos;acl:acl&amp;amp;apos; not supported as initial attribute




	at sun.nio.fs.UnixFileModeAttribute.toUnixMode(UnixFileModeAttribute.java:74)




	at sun.nio.fs.UnixFileSystemProvider.newByteChannel(UnixFileSystemProvider.java:210)




	at java.nio.file.Files.newByteChannel(Files.java:361)




	at java.nio.file.Files.createFile(Files.java:632)




	at org.jboss.as.controller.persistence.FilePersistenceUtils.createTempFileWithAttributes(FilePersistenceUtils.java:124)




	at org.jboss.as.controller.persistence.FilePersistenceUtils.writeToTempFile(FilePersistenceUtils.java:106)




	at org.jboss.as.controller.persistence.ConfigurationFilePersistenceResource.doCommit(ConfigurationFilePersistenceResource.java:55)




	at org.jboss.as.controller.persistence.AbstractFilePersistenceResource.commit(AbstractFilePersistenceResource.java:58)




	at org.jboss.as.controller.ModelControllerImpl$4.commit(ModelControllerImpl.java:779)




	at org.jboss.as.controller.AbstractOperationContext.executeDoneStage(AbstractOperationContext.java:702)




	at org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:653)




	at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:357)




	at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1235)




	at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:392)




	at org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:223)




	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.doExecute(ModelControllerClientOperationHandler.java:207)




	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.access$300(ModelControllerClientOperationHandler.java:129)




	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:151)




	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:147)




	at java.security.AccessController.doPrivileged(Native Method)




	at javax.security.auth.Subject.doAs(Subject.java:422)




	at org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:92)




	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1.execute(ModelControllerClientOperationHandler.java:147)




	at org.jboss.as.protocol.mgmt.AbstractMessageHandler$2$1.doExecute(AbstractMessageHandler.java:298)




	at org.jboss.as.protocol.mgmt.AbstractMessageHandler$AsyncTaskRunner.run(AbstractMessageHandler.java:518)




	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)




	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)




	at java.lang.Thread.run(Thread.java:745)




	at org.jboss.threads.JBossThread.run(JBossThread.java:320)





</description>
			<version>2.0.0.Alpha12</version>
			<fixedVersion>2.0.0.Alpha13</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.persistence.FilePersistenceUtils.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">588</link>
		</links>
	</bug>
	<bug id="858" opendate="2015-08-03 06:16:16" fixdate="2015-08-06 20:44:08" resolution="Done">
		<buginformation>
			<summary>CLI ends with NullPointerException after "ls" command and "tab" key</summary>
			<description>Description of problem:
CLI ends with java.lang.NullPointerException after "ls" command and "tab" key
How reproducible:
100 %
Steps to Reproduce:

./standalone.sh
./jboss-cli.sh -c
ls / -l
	
don&amp;amp;apos;t press "enter" key


press "tab" key

Actual results:






java.lang.NullPointerException




	at org.jboss.as.cli.handlers.LsHandler.getOperationRequestAddress(LsHandler.java:402)




	at org.jboss.as.cli.handlers.LsHandler.access$000(LsHandler.java:52)




	at org.jboss.as.cli.handlers.LsHandler$1.canAppearNext(LsHandler.java:75)




	at org.jboss.as.cli.operation.OperationRequestCompleter.complete(OperationRequestCompleter.java:257)




	at org.jboss.as.cli.operation.OperationRequestCompleter.complete(OperationRequestCompleter.java:73)




	at org.jboss.as.cli.CommandCompleter.doComplete(CommandCompleter.java:126)




	at org.jboss.as.cli.CommandCompleter.complete(CommandCompleter.java:63)




	at org.jboss.as.cli.impl.Console$Factory$1$1.complete(Console.java:122)




	at org.jboss.aesh.console.Console.complete(Console.java:1227)




	at org.jboss.aesh.console.Console.parseOperation(Console.java:551)




	at org.jboss.aesh.console.Console.read(Console.java:453)




	at org.jboss.aesh.console.Console.read(Console.java:347)




	at org.jboss.as.cli.impl.Console$Factory$1.readLine(Console.java:198)




	at org.jboss.as.cli.impl.CommandContextImpl.interact(CommandContextImpl.java:1322)




	at org.jboss.as.cli.impl.CliLauncher.main(CliLauncher.java:272)




	at org.jboss.as.cli.CommandLineMain.main(CommandLineMain.java:45)




	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)




	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)




	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)




	at java.lang.reflect.Method.invoke(Method.java:483)




	at org.jboss.modules.Module.run(Module.java:308)




	at org.jboss.modules.Main.main(Main.java:487)






Expected results:
No errors on output</description>
			<version>2.0.0.Alpha11</version>
			<fixedVersion>2.0.0.Alpha13</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.cli.impl.CommandContextImpl.java</file>
			<file type="M">org.jboss.as.cli.handlers.LsHandler.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">560</link>
		</links>
	</bug>
	<bug id="894" opendate="2015-08-20 08:12:07" fixdate="2015-08-21 19:54:07" resolution="Done">
		<buginformation>
			<summary>Empty properties list parsing leads to an error</summary>
			<description>PropertiesAttribute parser does not allow empty properties list which is redundant but valid.  What is more removing last property using map-remove operation leads to a configuration with empty properties tags.</description>
			<version>2.0.0.Beta2</version>
			<fixedVersion>2.0.0.Beta3</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.AttributeParsers.java</file>
			<file type="M">org.jboss.as.controller.operations.global.MapOperations.java</file>
		</fixedFiles>
		<links>
			<link type="Dependency" description="blocks">5112</link>
		</links>
	</bug>
	<bug id="881" opendate="2015-08-13 09:21:14" fixdate="2015-08-21 21:08:11" resolution="Done">
		<buginformation>
			<summary>Embedded server gets broken after operation on embedded host controller</summary>
			<description>I am unable to use standalone embedded server once I invoke some operation on embedded host controller.
Quick steps to reproduce:






$ ./jboss-cli.sh 




[disconnected /] embed-host-controller




[domain@embedded /] /host=master:read-resource




[domain@embedded /] stop-embedded-host-controller 




[disconnected /] embed-server




[standalone@embedded /] stop-embedded-server 




Failed to handle &amp;amp;apos;stop-embedded-server&amp;amp;apos;: org.wildfly.core.embedded.EmbeddedStandAloneServerFactory$StandaloneServerImpl cannot be cast to org.wildfly.core.embedded.HostController






Reproducible with wf-core 2.0.0.Beta1 build</description>
			<version>2.0.0.Beta1</version>
			<fixedVersion>2.0.0.Beta3</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.cli.embedded.StopEmbeddedHostControllerHandler.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">683</link>
		</links>
	</bug>
	<bug id="861" opendate="2015-08-03 07:21:54" fixdate="2015-08-21 21:09:10" resolution="Done">
		<buginformation>
			<summary>Wrong installation date in product info report</summary>
			<description>Description of problem:
Product info report shows wrong installation date in wildfly. Reported installation date is date of wildfly building.
How reproducible:
Always on EAP from zip installation
Steps to Reproduce:

get fresh wildfly from git
build wildfly
./standalone.sh
./jboss-cli.sh -c
:product-info

Actual results:
installation-date is a date of wildfly building
Expected results:
If Product Install Date is not available, wildfly do not report it.
Additional info:
Installation date is reported correctly, when installer is used.</description>
			<version>2.0.0.Alpha11</version>
			<fixedVersion>2.0.0.Beta3</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.server.operations.AbstractInstallationReporter.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">571</link>
		</links>
	</bug>
	<bug id="866" opendate="2015-08-04 12:21:25" fixdate="2015-08-21 21:09:31" resolution="Done">
		<buginformation>
			<summary>Schema for JBoss Product Installation Report does not contain information about its version</summary>
			<description>Description of problem:
Schema for JBoss Product Installation Report ( EAP7-250 ) does not contain information about its version. Schema version is in generated report, but not in schema.
How reproducible:
Always
Steps to Reproduce:

get fresh EAP
./domain.sh
./jboss-cli.sh -c
:read-operation-description(name=product-info)

Actual results:
Schema version is not in schema:






{




    "outcome" =&amp;gt; "success",




    "result" =&amp;gt; {




        "operation-name" =&amp;gt; "product-info",




        "description" =&amp;gt; "Get product info report",




        "request-properties" =&amp;gt; {},




        "reply-properties" =&amp;gt; {




            "type" =&amp;gt; LIST,




            "value-type" =&amp;gt; {"summary" =&amp;gt; {




                "type" =&amp;gt; OBJECT,




                "description" =&amp;gt; "Summary of the current server installation.",




                "expressions-allowed" =&amp;gt; false,




                "required" =&amp;gt; false,




                "nillable" =&amp;gt; true,




                "value-type" =&amp;gt; {




                    "report-version" =&amp;gt; {




                        "type" =&amp;gt; STRING,




                        "description" =&amp;gt; "Version of the summary of the current server installation.",




                        "expressions-allowed" =&amp;gt; false,




                        "nillable" =&amp;gt; false,




                        "min-length" =&amp;gt; 1L,




                        "max-length" =&amp;gt; 2147483647L




                    },




                    "node-name" =&amp;gt; {




                        "type" =&amp;gt; STRING,




                        "description" =&amp;gt; "The name of the instance node.",




                        "expressions-allowed" =&amp;gt; false,




                        "nillable" =&amp;gt; true,




                        "min-length" =&amp;gt; 1L,




                        "max-length" =&amp;gt; 2147483647L




                    },




                    "host-name" =&amp;gt; {




                        "type" =&amp;gt; STRING,




                        "description" =&amp;gt; "The name to use for this host&amp;amp;apos;s host controller. Must be unique across the domain. If not set, defaults to the runtime value of InetAddress.getLocalHost().getHostName().",




                        "expressions-allowed" =&amp;gt; false,




                        "nillable" =&amp;gt; true,




                        "min-length" =&amp;gt; 1L,




                        "max-length" =&amp;gt; 2147483647L




                    },




                    "instance-identifier" =&amp;gt; {




                        "type" =&amp;gt; STRING,




                        "description" =&amp;gt; "Unique Id of the server instance.",




                        "expressions-allowed" =&amp;gt; false,




                        "nillable" =&amp;gt; true,




                        "min-length" =&amp;gt; 1L,




                        "max-length" =&amp;gt; 2147483647L




                    },




                    "product-name" =&amp;gt; {




                        "type" =&amp;gt; STRING,




                        "description" =&amp;gt; "The name of the product that is being run by this server.",




                        "expressions-allowed" =&amp;gt; false,




                        "nillable" =&amp;gt; true,




                        "min-length" =&amp;gt; 1L,




                        "max-length" =&amp;gt; 2147483647L




                    },




                    "product-community-identifier" =&amp;gt; {




                        "type" =&amp;gt; STRING,




                        "description" =&amp;gt; "Indicates the type of distribution, if it is a Product or a Project.",




                        "expressions-allowed" =&amp;gt; false,




                        "nillable" =&amp;gt; false,




                        "default" =&amp;gt; "Project",




                        "min-length" =&amp;gt; 1L,




                        "max-length" =&amp;gt; 2147483647L




                    },




                    "product-version" =&amp;gt; {




                        "type" =&amp;gt; STRING,




                        "description" =&amp;gt; "The version of the product release that is being run by this server.",




                        "expressions-allowed" =&amp;gt; false,




                        "nillable" =&amp;gt; true,




                        "min-length" =&amp;gt; 1L,




                        "max-length" =&amp;gt; 2147483647L




                    },




                    "product-home" =&amp;gt; {




                        "type" =&amp;gt; STRING,




                        "description" =&amp;gt; "Installation directory of the current server instance.",




                        "expressions-allowed" =&amp;gt; false,




                        "nillable" =&amp;gt; true,




                        "min-length" =&amp;gt; 1L,




                        "max-length" =&amp;gt; 2147483647L




                    },




                    "installation-date" =&amp;gt; {




                        "type" =&amp;gt; STRING,




                        "description" =&amp;gt; "Installation date of the current server instance.",




                        "expressions-allowed" =&amp;gt; false,




                        "nillable" =&amp;gt; true,




                        "min-length" =&amp;gt; 1L,




                        "max-length" =&amp;gt; 2147483647L




                    },




                    "last-update-date" =&amp;gt; {




                        "type" =&amp;gt; STRING,




                        "description" =&amp;gt; "Date of the last update of the current product.",




                        "expressions-allowed" =&amp;gt; false,




                        "nillable" =&amp;gt; true,




                        "min-length" =&amp;gt; 1L,




                        "max-length" =&amp;gt; 2147483647L




                    },




                    "host-operating-system" =&amp;gt; {




                        "type" =&amp;gt; STRING,




                        "description" =&amp;gt; "The name of the Operating System.",




                        "expressions-allowed" =&amp;gt; false,




                        "nillable" =&amp;gt; false,




                        "min-length" =&amp;gt; 1L,




                        "max-length" =&amp;gt; 2147483647L




                    },




                    "jvm" =&amp;gt; {




                        "type" =&amp;gt; OBJECT,




                        "description" =&amp;gt; "The JVM configuration for the server.",




                        "expressions-allowed" =&amp;gt; false,




                        "nillable" =&amp;gt; false,




                        "value-type" =&amp;gt; {




                            "java-version" =&amp;gt; {




                                "type" =&amp;gt; STRING,




                                "description" =&amp;gt; "The Java language version.",




                                "expressions-allowed" =&amp;gt; false,




                                "nillable" =&amp;gt; true,




                                "min-length" =&amp;gt; 1L,




                                "max-length" =&amp;gt; 2147483647L




                            },




                            "jvm-version" =&amp;gt; {




                                "type" =&amp;gt; STRING,




                                "description" =&amp;gt; "The complete build version of the JVM.",




                                "expressions-allowed" =&amp;gt; false,




                                "nillable" =&amp;gt; true,




                                "min-length" =&amp;gt; 1L,




                                "max-length" =&amp;gt; 2147483647L




                            },




                            "jvm-vendor" =&amp;gt; {




                                "type" =&amp;gt; STRING,




                                "description" =&amp;gt; "The vendor of the JVM.",




                                "expressions-allowed" =&amp;gt; false,




                                "nillable" =&amp;gt; true,




                                "min-length" =&amp;gt; 1L,




                                "max-length" =&amp;gt; 2147483647L




                            },




                            "java-home" =&amp;gt; {




                                "type" =&amp;gt; STRING,




                                "description" =&amp;gt; "Thepath to the JVM used by the server instance.",




                                "expressions-allowed" =&amp;gt; false,




                                "nillable" =&amp;gt; true,




                                "min-length" =&amp;gt; 1L,




                                "max-length" =&amp;gt; 2147483647L




                            }




                        }




                    },




                    "host-cpu" =&amp;gt; {




                        "type" =&amp;gt; OBJECT,




                        "description" =&amp;gt; "The description of the host CPU.",




                        "expressions-allowed" =&amp;gt; false,




                        "nillable" =&amp;gt; false,




                        "value-type" =&amp;gt; {




                            "host-cpu-arch" =&amp;gt; {




                                "type" =&amp;gt; STRING,




                                "description" =&amp;gt; "The CPU architecture of the host.",




                                "expressions-allowed" =&amp;gt; false,




                                "nillable" =&amp;gt; true,




                                "min-length" =&amp;gt; 1L,




                                "max-length" =&amp;gt; 2147483647L




                            },




                            "host-core-count" =&amp;gt; {




                                "type" =&amp;gt; INT,




                                "description" =&amp;gt; "The number of cores available on the host.global.summary.java-home=The Java home.",




                                "expressions-allowed" =&amp;gt; false,




                                "nillable" =&amp;gt; true,




                                "default" =&amp;gt; 1




                            }




                        }




                    }




                }




            }}




        },




        "read-only" =&amp;gt; true,




        "runtime-only" =&amp;gt; true




    }




}






Expected results:
Schema version should be in schema.</description>
			<version>2.0.0.Alpha11</version>
			<fixedVersion>2.0.0.Beta3</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.server.operations.AbstractInstallationReporter.java</file>
			<file type="M">org.wildfly.core.test.standalone.mgmt.api.core.ProductInfoUnitTestCase.java</file>
			<file type="M">org.jboss.as.controller.operations.global.GlobalInstallationReportHandler.java</file>
			<file type="M">org.jboss.as.test.integration.domain.ProductInfoUnitTestCase.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">584</link>
		</links>
	</bug>
	<bug id="839" opendate="2015-07-24 09:44:39" fixdate="2015-08-21 21:09:57" resolution="Done">
		<buginformation>
			<summary>Don&amp;apos;t store state in InMemoryAuditLogHandlerResourceDefinition</summary>
			<description>https://github.com/wildfly/wildfly-core/pull/890#discussion_r35354989
 private static final Map&amp;lt;String, InMemoryAuditLogHander&amp;gt; histories = Collections.synchronizedMap(new HashMap&amp;lt;String, InMemoryAuditLogHander&amp;gt;());
We don&amp;amp;apos;t want to delay merging this PR for this, but once it&amp;amp;apos;s merged please send up a PR to make this a non-static field and have the InMemoryAuditLogHandlerResourceDefinition pass a ref to it to the handlers when it constructs them.
Having this be static is no big deal in this case, but I don&amp;amp;apos;t want anyone looking at kernel code and thinking that using static fields to store state is a good practice.</description>
			<version>2.0.0.Alpha11</version>
			<fixedVersion>2.0.0.Beta3</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.audit.AuditLogHandler.java</file>
			<file type="M">org.jboss.as.controller.audit.ManagedAuditLogger.java</file>
			<file type="M">org.jboss.as.controller.audit.InMemoryAuditLogHander.java</file>
			<file type="M">org.jboss.as.domain.management.audit.InMemoryAuditLogHandlerResourceDefinition.java</file>
			<file type="M">org.jboss.as.controller.audit.AuditLogger.java</file>
			<file type="M">org.jboss.as.controller.audit.ManagedAuditLoggerImpl.java</file>
		</fixedFiles>
		<links>
			<link type="Related" description="is related to">671</link>
		</links>
	</bug>
	<bug id="798" opendate="2015-07-07 19:42:47" fixdate="2015-08-26 13:27:09" resolution="Done">
		<buginformation>
			<summary>Parser support missing for EAP 6.3 version of &amp;apos;skip-group-loading&amp;apos;</summary>
			<description>Trying to run WildFly full&amp;amp;apos;s ParseAndMarshalModelsTestCase against the EAP 6.3 configs results in failures like this:






Caused by: javax.xml.stream.XMLStreamException: ParseError at [row,col]:[37,21]




Message: WFLYCTL0197: Unexpected attribute &amp;amp;apos;skip-group-loading&amp;amp;apos; encountered




	at org.jboss.as.controller.parsing.ParseUtils.unexpectedAttribute(ParseUtils.java:117)




	at org.jboss.as.domain.management.parsing.ManagementXml_Legacy.parseLocalAuthentication_1_3(ManagementXml_Legacy.java:2105)




	at org.jboss.as.domain.management.parsing.ManagementXml_Legacy.parseAuthentication_1_3(ManagementXml_Legacy.java:1486)




	at org.jboss.as.domain.management.parsing.ManagementXml_Legacy.parseSecurityRealm_1_3(ManagementXml_Legacy.java:779)




	at org.jboss.as.domain.management.parsing.ManagementXml_Legacy.parseSecurityRealms(ManagementXml_Legacy.java:649)




	at org.jboss.as.domain.management.parsing.ManagementXml_Legacy.parseManagement_1_5(ManagementXml_Legacy.java:224)




	at org.jboss.as.domain.management.parsing.ManagementXml_Legacy.parseManagement(ManagementXml_Legacy.java:151)




	at org.jboss.as.server.parsing.StandaloneXml_Legacy.readServerElement_1_4(StandaloneXml_Legacy.java:444)




	at org.jboss.as.server.parsing.StandaloneXml_Legacy.readElement(StandaloneXml_Legacy.java:136)




	at org.jboss.as.server.parsing.StandaloneXml.readElement(StandaloneXml.java:66)




	at org.jboss.as.server.parsing.StandaloneXml.readElement(StandaloneXml.java:47)




	at org.jboss.staxmapper.XMLMapperImpl.processNested(XMLMapperImpl.java:110)




	at org.jboss.staxmapper.XMLMapperImpl.parseDocument(XMLMapperImpl.java:69)




	at org.jboss.as.controller.persistence.XmlConfigurationPersister.load(XmlConfigurationPersister.java:123)




	... 136 more






The EAP 6.4 configs have this attribute but don&amp;amp;apos;t fail, so it seems the problem is isolated to the 6.3 schema parsing; i.e. urn:jboss:domain:1.6.</description>
			<version>2.0.0.Alpha6</version>
			<fixedVersion>2.0.0.Beta6</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.domain.management.parsing.ManagementXml_Legacy.java</file>
		</fixedFiles>
	</bug>
	<bug id="921" opendate="2015-08-26 18:52:12" fixdate="2015-08-28 22:36:31" resolution="Done">
		<buginformation>
			<summary>Remove n2 model node cloning in ServerOperationResolver</summary>
			<description>ServerOperationResolver gets called for each operation in a composite.
For each call it clones the configuration model.
It then calls node.asPropertyList() in various spots, which in turn results in a clone of the value of each Property. In particular it does this over the profiles, which means each profile gets cloned.
For very large configurations, this is extremely inefficient. One user was experimenting with adding 1000s of data sources and found it would take over an hour to complete the work. I was able to do it in 30 seconds by correcting these problems.
There are other areas where we may be incurring unneeded expense via calls to node.asPropertyList().</description>
			<version>2.0.0.Beta4</version>
			<fixedVersion>2.0.0.Beta5</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.domain.controller.operations.coordination.ServerOperationResolver.java</file>
			<file type="M">org.jboss.as.domain.controller.operations.coordination.DomainServerUtils.java</file>
		</fixedFiles>
		<links>
			<link type="Sequence" description="is followed up by">922</link>
			<link type="Sequence" description="is followed up by">5234</link>
			<link type="Sequence" description="is followed up by">936</link>
		</links>
	</bug>
	<bug id="922" opendate="2015-08-26 21:07:03" fixdate="2015-08-28 22:36:44" resolution="Done">
		<buginformation>
			<summary>Remove unneeded cloning of model nodes when persisting the kernel configs</summary>
			<description>In the kernel part of domain.xml, host.xml and standalone.xml marshaling look to eliminate use of ModelNode.asPropertyList(), at least from spots where the ModelNode may be a large data structure. The asPropertyList() call results in a potentially expensive clone of data.</description>
			<version>2.0.0.Beta4</version>
			<fixedVersion>2.0.0.Beta5</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.server.parsing.StandaloneXml_5.java</file>
			<file type="M">org.jboss.as.host.controller.parsing.HostXml_5.java</file>
			<file type="M">org.jboss.as.host.controller.parsing.HostXml_4.java</file>
			<file type="M">org.jboss.as.host.controller.parsing.DomainXml_4.java</file>
			<file type="M">org.jboss.as.domain.management.parsing.ManagementXml_4.java</file>
			<file type="M">org.jboss.as.server.parsing.StandaloneXml_4.java</file>
		</fixedFiles>
		<links>
			<link type="Sequence" description="follows up on">921</link>
		</links>
	</bug>
	<bug id="907" opendate="2015-08-25 01:46:11" fixdate="2015-08-28 23:06:54" resolution="Done">
		<buginformation>
			<summary>CLI&amp;apos;s embed-host-controller command does not work in a non-modular CLI</summary>
			<description>EmbedHostControllerHandler assumes that ModuleLoader.forClass(getClass()) will return a classloader, but it only will if the CLI process is running in a modular environment. If it isn&amp;amp;apos;t, EmbedHostControllerHandler must take responsibility for setting up the modular classloading environment.</description>
			<version>2.0.0.Beta4</version>
			<fixedVersion>2.0.0.Beta5</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.wildfly.core.embedded.EmbeddedServerFactory.java</file>
			<file type="M">org.jboss.as.cli.embedded.EmbedHostControllerHandler.java</file>
		</fixedFiles>
		<links>
			<link type="Dependency" description="blocks">901</link>
		</links>
	</bug>
	<bug id="904" opendate="2015-08-23 19:20:51" fixdate="2015-08-28 23:21:41" resolution="Done">
		<buginformation>
			<summary>Future returned from Bootstrap.startup(...0) and ServerService.getValue() may never complete</summary>
			<description>A test I&amp;amp;apos;m writing that uses the CLI embed-server command hung forever:






"main" #1 prio=5 os_prio=31 tid=0x00007fd461007800 nid=0x1303 in Object.wait() [0x0000000102c67000]




   java.lang.Thread.State: WAITING (on object monitor)




	at java.lang.Object.wait(Native Method)




	at java.lang.Object.wait(Object.java:502)




	at org.jboss.threads.AsyncFutureTask.await(AsyncFutureTask.java:192)




	- locked &amp;lt;0x00000007b8d69eb0&amp;gt; (a org.jboss.as.server.FutureServiceContainer)




	at org.jboss.threads.AsyncFutureTask.get(AsyncFutureTask.java:266)




	- locked &amp;lt;0x00000007b8d69eb0&amp;gt; (a org.jboss.as.server.FutureServiceContainer)




	at org.wildfly.core.embedded.EmbeddedStandAloneServerFactory$StandaloneServerImpl.start(EmbeddedStandAloneServerFactory.java:306)






The boot.log showed boot did not complete:











2015-08-23 12:04:37,572 ERROR [org.jboss.as.controller.management-operation] (Controller Boot Thread) WFLYCTL0013: Operation ("internal-model-validation") failed - address: ([("subsystem" =&amp;gt; "xts")]) - failure description: "WFLYCTL0172: host is required"




2015-08-23 12:04:37,573 FATAL [org.jboss.as.server] (Controller Boot Thread) WFLYSRV0056: Server boot has failed in an unrecoverable manner; exiting. See previous messages for details.






The problem is the failure never results in operationFailed(...) being called on the AsyncFutureTask returned by ServerService.getValue().
This probably only affects the embedded CLI and WildFly Swarm; other code does not block on this future.
I would not be surprised if a similar problem exists with the Host Controller and the CLI&amp;amp;apos;s embed-host-controller command.</description>
			<version>2.0.0.Beta4</version>
			<fixedVersion>2.0.0.Beta5</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.server.logging.ServerLogger.java</file>
			<file type="M">org.jboss.as.server.BootstrapListener.java</file>
			<file type="M">org.jboss.as.host.controller.logging.HostControllerLogger.java</file>
			<file type="M">org.jboss.as.server.ServerService.java</file>
			<file type="M">org.jboss.as.host.controller.DomainModelControllerService.java</file>
			<file type="M">org.jboss.as.server.FutureServiceContainer.java</file>
		</fixedFiles>
	</bug>
	<bug id="942" opendate="2015-09-01 20:48:03" fixdate="2015-09-02 11:19:46" resolution="Done">
		<buginformation>
			<summary>Parameter completion for :read-resource and :read-children-resources is broken</summary>
			<description>When I try to use tab completion to add parameters to "read-resource" and "read-children-resources" operations, it does not suggest any params but instead just closes the parameter list.</description>
			<version>2.0.0.Beta5</version>
			<fixedVersion>2.0.0.Beta6</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.cli.operation.impl.DefaultOperationCandidatesProvider.java</file>
		</fixedFiles>
		<links>
			<link type="Related" description="is related to">977</link>
		</links>
	</bug>
	<bug id="896" opendate="2015-08-20 11:24:44" fixdate="2015-09-03 15:53:21" resolution="Done">
		<buginformation>
			<summary>Cannot patch EAP once Docs are excluded from installation</summary>
			<description>EAP installer allows user to exclude some packs from installation. Docs directory is one of them. If user choose to do so, $JBOSS_HOME/docs directory is not present in distribution.
Trying to apply a patch (contains changes with docs files) on such a distribution gives me:






java.io.FileNotFoundException: /home/pkremens/workspace/jboss-eap-7.0/docs/schema/saml-schema-authn-context-xmldsig-2.0.xsd (No such file or directory)






This could block customers, who are using installer to get EAP, from consuming the patches for CP releases in future.
Patch was generated using:
https://github.com/jbossas/patch-gen
dr8_to_dr8x.zip patch.xml:






&amp;lt;?xml version="1.0" ?&amp;gt;









&amp;lt;patch xmlns="urn:jboss:patch:1.0" id="dr8_to_dr8x"&amp;gt;




    &amp;lt;description&amp;gt;




        No description available




    &amp;lt;/description&amp;gt;




    &amp;lt;upgrade name="EAP" version="7.0.0.Alpha1" to-version="7.0.0.Alpha1"/&amp;gt;




    &amp;lt;element id="layer-base-dr8_to_dr8x"&amp;gt;




        &amp;lt;description&amp;gt;




            No description available




        &amp;lt;/description&amp;gt;




        &amp;lt;upgrade name="base"/&amp;gt;




    &amp;lt;/element&amp;gt;




    &amp;lt;misc-files&amp;gt;




        &amp;lt;added path="docs/schema/saml-schema-authn-context-xmldsig-2.1.xsd" hash="25d2e47a02d248101af86cff07daf9d51d8da379"/&amp;gt;




        &amp;lt;updated path="docs/schema/saml-schema-ecp-2.0.xsd" hash="97984434c30816939c0f64b9388dc75d977a3b17" new-hash="fa7e234444b3c5d9ede81b4799dfaff8632d987a"/&amp;gt;




        &amp;lt;removed path="docs/schema/saml-schema-authn-context-xmldsig-2.0.xsd" hash="25d2e47a02d248101af86cff07daf9d51d8da379"/&amp;gt;




    &amp;lt;/misc-files&amp;gt;




&amp;lt;/patch&amp;gt;





</description>
			<version>2.0.0.Beta1</version>
			<fixedVersion>2.0.0.Beta6</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.patching.runner.BundlePatchingTask.java</file>
			<file type="M">org.jboss.as.patching.runner.PatchingTaskDescription.java</file>
			<file type="M">org.jboss.as.patching.runner.AbstractPatchingTask.java</file>
			<file type="M">org.jboss.as.patching.metadata.ModificationBuilderTarget.java</file>
			<file type="M">org.jboss.as.patching.runner.PatchingTask.java</file>
			<file type="M">org.jboss.as.patching.runner.IdentityPatchRunner.java</file>
			<file type="M">org.jboss.as.patching.runner.FileRemoveTask.java</file>
			<file type="M">org.jboss.as.patching.tests.AbstractPatchTestBuilder.java</file>
			<file type="M">org.jboss.as.patching.metadata.PatchXml_1_0.java</file>
			<file type="M">org.jboss.as.patching.runner.FileUpdateTask.java</file>
			<file type="M">org.jboss.as.patching.tests.PatchStepAssertions.java</file>
			<file type="M">org.jboss.as.patching.metadata.PatchXml.java</file>
			<file type="M">org.jboss.as.patching.metadata.ContentModification.java</file>
			<file type="M">org.jboss.as.patching.runner.ModuleUpdateTask.java</file>
			<file type="M">org.jboss.as.patching.logging.PatchLogger.java</file>
			<file type="M">org.jboss.as.patching.metadata.PatchXmlUtils.java</file>
			<file type="M">org.jboss.as.patching.runner.ModuleRemoveTask.java</file>
			<file type="M">org.jboss.as.patching.runner.ContentModificationUtils.java</file>
			<file type="M">org.jboss.as.patching.metadata.RollbackPatchXml_1_0.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">775</link>
		</links>
	</bug>
	<bug id="955" opendate="2015-08-27 14:34:07" fixdate="2015-09-04 13:33:34" resolution="Done">
		<buginformation>
			<summary>Server is not responding after attempt to set parent of profile to non-existent profile</summary>
			<description>Description of problem:
Server is not responding after attempt to set parent of profile to non-existent profile. 
Server is not responding also after attempt to set parent of socket-binding-group to non-existent socket-binding-group.
This works correctly on wildfly-core (2.0.0.Beta4). But this occurs on wildfly (master branch) and on EAP 7.0.0.DR9. It may be some integration issue.
Priority of this jira tends to be critical.
How reproducible:
Always
Steps to Reproduce (profile):

Get fresh EAP
./domain.sh
./jboss-cli.sh
	
/profile=new:add()
/profile=new:write-attribute(name=includes,value=[nonsence])
/profile=new:remove



Actual results:






[domain@localhost:9990 /] /profile=new:write-attribute(name=includes,value=[nonsence])




{




    "outcome" =&amp;gt; "failed",




    "failure-description" =&amp;gt; "java.lang.NullPointerException:null"




}




[domain@localhost:9990 /] /profile=new:remove












server needs to be restarted

Expected results:






[domain@localhost:9990 /] /profile=new:write-attribute(name=includes,value=[nonsence])




{




    "outcome" =&amp;gt; "failed",




    "failure-description" =&amp;gt; {"domain-failure-description" =&amp;gt; "WFLYCTL0369: Required capabilities are not available:




    org.wildfly.domain.profile.nonsence in context &amp;amp;apos;profiles&amp;amp;apos;"},




    "rolled-back" =&amp;gt; true




}




[domain@localhost:9990 /] /profile=new:remove




{




    "outcome" =&amp;gt; "success",




    "result" =&amp;gt; undefined,




    "server-groups" =&amp;gt; undefined




}






Steps to reproduce (socket-binding-group):

Get fresh EAP
./domain.sh
./jboss-cli.sh
	
/profile=new:add()
/socket-binding-group=testt:add(default-interface=public,includes=[nonsence])
/profile=new:remove



</description>
			<version>2.0.0.Beta5</version>
			<fixedVersion>2.0.0.Beta6</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.logging.ControllerLogger.java</file>
			<file type="M">org.jboss.as.controller.OperationContextImpl.java</file>
			<file type="M">org.jboss.as.controller.AbstractOperationContext.java</file>
			<file type="M">org.jboss.as.controller.capability.registry.IncludingResourceCapabilityScope.java</file>
			<file type="M">org.jboss.as.controller.SocketCapabilityResolutionUnitTestCase.java</file>
			<file type="M">org.jboss.as.controller.AbstractCapabilityResolutionTestCase.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">904</link>
			<link type="Cloners" description="cloned to">954</link>
		</links>
	</bug>
	<bug id="885" opendate="2015-08-17 12:24:22" fixdate="2015-09-04 15:05:27" resolution="Done">
		<buginformation>
			<summary>World readable audit.log file</summary>
			<description>Server logs sensitive information into a world readable audit.log file. This information could be used by a local attacker to gain otherwise protected information about user sessions etc.
This issue was originally reported as CVE in https://bugzilla.redhat.com/show_bug.cgi?id=1063642. EAP 6.x branches are fixed but same issue occurs in EAP 7 again.</description>
			<version>2.0.0.Beta2</version>
			<fixedVersion>2.0.0.Beta6</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.audit.SizeRotatingFileAuditLogHandler.java</file>
			<file type="M">org.jboss.as.controller.audit.AbstractFileAuditLogHandler.java</file>
			<file type="M">org.jboss.as.controller.audit.PeriodicRotatingFileAuditLogHandler.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">721</link>
		</links>
	</bug>
	<bug id="961" opendate="2015-09-04 22:16:39" fixdate="2015-09-08 23:25:53" resolution="Done">
		<buginformation>
			<summary>CapabilityRegistryResourceDefinition provides inconsistent ordering of output</summary>
			<description>The output from CapabilityRegistryResourceDefinition is inconsistently ordered. We want consistent output between reads.
The RegistrationPoints are stored in CapabilityRegistration in a LinkedHashSet, but when they are provided to CapabilityRegistryResourceDefinition they get put in a plain HashSet.
The capabilities themselves are not stored in any order, but when provided to CapabilityRegistryResourceDefinition they could be ordered.</description>
			<version>2.0.0.Beta6</version>
			<fixedVersion>2.0.0.Beta7</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.capability.registry.CapabilityId.java</file>
			<file type="M">org.jboss.as.controller.capability.registry.CapabilityRegistration.java</file>
			<file type="M">org.jboss.as.controller.CapabilityRegistry.java</file>
		</fixedFiles>
	</bug>
	<bug id="967" opendate="2015-09-08 19:50:10" fixdate="2015-09-08 23:27:23" resolution="Done">
		<buginformation>
			<summary>list-xxx and map-xxx do not work in a composite</summary>
			<description>When running e.g. a series of map-add operations in a composite, only the last step takes effect. e.g.:






Model Before: {




    "deployment" =&amp;gt; undefined,




    "subsystem" =&amp;gt; {"test-subsystem" =&amp;gt; {




        "properties" =&amp;gt; {




            "one" =&amp;gt; "A",




            "two" =&amp;gt; "B",




            "three" =&amp;gt; "C"




        },




        "test" =&amp;gt; "Hello"




    }}




}




{




    "operation" =&amp;gt; "composite",




    "address" =&amp;gt; [],




    "steps" =&amp;gt; [




        {




            "operation" =&amp;gt; "map-remove",




            "address" =&amp;gt; [("subsystem" =&amp;gt; "test-subsystem")],




            "name" =&amp;gt; "properties",




            "key" =&amp;gt; "one"




        },




        {




            "operation" =&amp;gt; "map-remove",




            "address" =&amp;gt; [("subsystem" =&amp;gt; "test-subsystem")],




            "name" =&amp;gt; "properties",




            "key" =&amp;gt; "two"




        },




        {




            "operation" =&amp;gt; "map-remove",




            "address" =&amp;gt; [("subsystem" =&amp;gt; "test-subsystem")],




            "name" =&amp;gt; "properties",




            "key" =&amp;gt; "three"




        }




    ]




}




Model After: {




    "deployment" =&amp;gt; undefined,




    "subsystem" =&amp;gt; {"test-subsystem" =&amp;gt; {




        "properties" =&amp;gt; {




            "one" =&amp;gt; "A",




            "two" =&amp;gt; "B"




        },




        "test" =&amp;gt; "Hello"




    }}




}






The same happens with map-put, map-remove, list-add and list-remove when used in a composite. I have added some more tests to https://github.com/kabir/wildfly-core/blob/map-operation-composite/controller/src/test/java/org/jboss/as/controller/operation/global/CollectionOperationsTestCase.java to demonstrate the problem. These tests should be expanded to cover more of the map operations when used in a composite.</description>
			<version>2.0.0.Beta6</version>
			<fixedVersion>2.0.0.Beta7</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.operations.global.AbstractCollectionHandler.java</file>
			<file type="M">org.jboss.as.controller.operation.global.CollectionOperationsTestCase.java</file>
		</fixedFiles>
	</bug>
	<bug id="968" opendate="2015-09-08 21:24:50" fixdate="2015-09-08 23:27:40" resolution="Done">
		<buginformation>
			<summary>WriteAttributeHandler needs to add steps to the top of the queue</summary>
			<description>WriteAttributeHandler is adding a bunch of steps that make up elements of its Stage.MODEL execution, but it isn&amp;amp;apos;t adding them with the &amp;amp;apos;addFirst&amp;amp;apos; param set to true. This means the effective order of model changes within a composite op is not going to match the logical order of the steps in the op, and step 2 might not execute with the expected starting state.</description>
			<version>2.0.0.Beta6</version>
			<fixedVersion>2.0.0.Beta7</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.operations.global.WriteAttributeHandler.java</file>
		</fixedFiles>
	</bug>
	<bug id="959" opendate="2015-09-04 21:55:01" fixdate="2015-09-09 21:10:11" resolution="Done">
		<buginformation>
			<summary>Handling of ManagementResourceRegistration runtimeOnly is broken</summary>
			<description>NodeSubregistry is always passing &amp;amp;apos;false&amp;amp;apos; as the runtimeOnly param for ConcreteResourceRegistrations it creates.
The param isn&amp;amp;apos;t actually needed, since the ResourceDefinition is also a param, and the value can be pulled from it.
Also, since we now have proper facilities for setting up a runtimeOnly ResourceDefinition, the MRR.setRuntimeOnly() method should be deprecated and all core uses of it converted.</description>
			<version>2.0.0.Beta6</version>
			<fixedVersion>2.0.0.Beta7</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.platform.mbean.OperatingSystemResourceDefinition.java</file>
			<file type="M">org.jboss.as.logging.deployments.resources.LoggerResourceDefinition.java</file>
			<file type="M">org.jboss.as.controller.registry.ManagementResourceRegistration.java</file>
			<file type="M">org.jboss.as.controller.test.ReadResourceWithRuntimeResourceTestCase.java</file>
			<file type="M">org.jboss.as.platform.mbean.BufferPoolRootResourceDefinition.java</file>
			<file type="M">org.jboss.as.platform.mbean.MemoryResourceDefinition.java</file>
			<file type="M">org.jboss.as.platform.mbean.MemoryPoolResourceDefinition.java</file>
			<file type="M">org.jboss.as.logging.deployments.resources.HandlerResourceDefinition.java</file>
			<file type="M">org.jboss.as.platform.mbean.ClassLoadingResourceDefinition.java</file>
			<file type="M">org.jboss.as.platform.mbean.MemoryPoolRootResourceDefinition.java</file>
			<file type="M">org.jboss.as.logging.LogFileResourceDefinition.java</file>
			<file type="M">org.jboss.as.domain.management.controller.ActiveOperationResourceDefinition.java</file>
			<file type="M">org.jboss.as.platform.mbean.RuntimeResourceDefinition.java</file>
			<file type="M">org.jboss.as.platform.mbean.BufferPoolResourceDefinition.java</file>
			<file type="M">org.jboss.as.controller.test.DisappearingResourceTestCase.java</file>
			<file type="M">org.jboss.as.controller.registry.DelegatingManagementResourceRegistration.java</file>
			<file type="M">org.jboss.as.platform.mbean.CompilationResourceDefinition.java</file>
			<file type="M">org.jboss.as.controller.registry.ConcreteResourceRegistration.java</file>
			<file type="M">org.jboss.as.logging.deployments.resources.LoggingDeploymentResources.java</file>
			<file type="M">org.jboss.as.controller.extension.ExtensionRegistry.java</file>
			<file type="M">org.jboss.as.controller.extension.ExtensionSubsystemResourceDefinition.java</file>
			<file type="M">org.jboss.as.platform.mbean.GarbageCollectorResourceDefinition.java</file>
			<file type="M">org.jboss.as.platform.mbean.PlatformMBeanResourceDefinition.java</file>
			<file type="M">org.jboss.as.platform.mbean.MemoryManagerRootResourceDefinition.java</file>
			<file type="M">org.jboss.as.domain.management.controller.ManagementControllerResourceDefinition.java</file>
			<file type="M">org.jboss.as.domain.management.access.AccessConstraintAppliesToResourceDefinition.java</file>
			<file type="M">org.jboss.as.logging.LoggingExtension.java</file>
			<file type="M">org.jboss.as.controller.registry.NodeSubregistry.java</file>
			<file type="M">org.jboss.as.platform.mbean.ThreadResourceDefinition.java</file>
			<file type="M">org.jboss.as.platform.mbean.MemoryManagerResourceDefinition.java</file>
			<file type="M">org.jboss.as.platform.mbean.GarbageCollectorRootResourceDefinition.java</file>
		</fixedFiles>
	</bug>
	<bug id="868" opendate="2015-08-05 08:12:55" fixdate="2015-09-10 21:35:00" resolution="Done">
		<buginformation>
			<summary>CLI if/else is not handling special characters strings with parenthesis</summary>
			<description>When using CLI if-else scripting that uses a string that contains parenthesis it fails with the following message:
Failed to handle &amp;amp;apos;if (outcome == success &amp;amp;&amp;amp; result.value != "a64180c0)e7187af86b435229de904104") of /system-property=test:read-resource&amp;amp;apos;: Unexpected operation at 49 in &amp;amp;apos;(outcome == success &amp;amp;&amp;amp; result.value != "a64180c0)e7187af86b435229de904104")&amp;amp;apos;</description>
			<version>2.0.0.Alpha12</version>
			<fixedVersion>2.0.0.Beta7</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.cli.handlers.ifelse.NotEqualsOperation.java</file>
			<file type="M">org.jboss.as.cli.handlers.ifelse.NotGreaterThanOperation.java</file>
			<file type="M">org.jboss.as.cli.handlers.ifelse.LesserThanOperation.java</file>
			<file type="M">org.jboss.as.cli.impl.ArgumentWithValue.java</file>
			<file type="M">org.jboss.as.cli.handlers.ifelse.IfHandler.java</file>
			<file type="D">org.jboss.as.cli.handlers.ifelse.ExpressionParser.java</file>
			<file type="M">org.jboss.as.cli.parsing.ifelse.test.IfExpressionParsingTestCase.java</file>
			<file type="M">org.jboss.as.cli.handlers.ifelse.BaseOperation.java</file>
			<file type="M">org.jboss.as.cli.handlers.ifelse.IfElseControlFlow.java</file>
			<file type="M">org.jboss.as.cli.handlers.ifelse.EqualsOperation.java</file>
			<file type="M">org.jboss.as.cli.parsing.DefaultStateWithEndCharacter.java</file>
			<file type="M">org.jboss.as.cli.parsing.ifelse.test.ComparisonTestBase.java</file>
			<file type="M">org.jboss.as.cli.handlers.ifelse.AndOperation.java</file>
			<file type="M">org.jboss.as.cli.handlers.ifelse.OrOperation.java</file>
			<file type="M">org.jboss.as.cli.handlers.ifelse.GreaterThanOperation.java</file>
			<file type="M">org.jboss.as.cli.handlers.ifelse.NotLesserThanOperation.java</file>
		</fixedFiles>
	</bug>
	<bug id="977" opendate="2015-09-10 18:39:55" fixdate="2015-09-10 21:36:42" resolution="Done">
		<buginformation>
			<summary>Parameter completion for  :write-attribute is broken</summary>
			<description>When I try to use tab completion to add parameters to "write-attribute" , it does not suggest any param values but instead just closes the parameter list.
For example:
:write-attribute(name=n)</description>
			<version>2.0.0.Beta7</version>
			<fixedVersion>2.0.0.Beta7</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.cli.operation.impl.DefaultOperationCandidatesProvider.java</file>
			<file type="D">org.jboss.as.cli.operation.impl.SimpleDependentValueCompleter.java</file>
		</fixedFiles>
		<links>
			<link type="Related" description="relates to">942</link>
		</links>
	</bug>
	<bug id="980" opendate="2015-09-15 18:30:52" fixdate="2015-09-16 16:37:15" resolution="Done">
		<buginformation>
			<summary>The capability registry fails to rollback properly</summary>
			<description>If we register an already registered capability at a new RegistrationPoint and the operation rollbacks the registry still has the new RegistrationPoint.
The publishedFullRegistry should be a deep copy of the registry:
Reproducer working with the WFCORE-949 pr:






/socket-binding-group=standard-sockets/socket-binding=management-native:add(port=9999, interface=management)




/core-service=management/management-interface=native-interface:add(socket-binding=native-management, security-realm=ManagementRealm) 




/core-service=management/management-interface=native-interface:add(socket-binding=management-native, security-realm=ManagementRealm)





</description>
			<version>2.0.0.Beta7</version>
			<fixedVersion>2.0.0.CR2</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.CapabilityRegistryTestCase.java</file>
			<file type="M">org.jboss.as.controller.CapabilityRegistry.java</file>
		</fixedFiles>
	</bug>
	<bug id="579" opendate="2015-03-05 09:21:45" fixdate="2015-09-16 19:40:32" resolution="Done">
		<buginformation>
			<summary>ProxyMetadataSource does not return JDK8 &amp;apos;default&amp;apos; methods from interfaces</summary>
			<description></description>
			<version>1.0.0.Alpha19</version>
			<fixedVersion>2.0.0.CR1</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.server.deployment.reflect.ProxyMetadataSource.java</file>
		</fixedFiles>
		<links>
			<link type="Causality" description="causes">4404</link>
			<link type="Causality" description="causes">3873</link>
			<link type="Dependency" description="blocks">4407</link>
			<link type="Superset" description="is incorporated by">725</link>
			<link type="Superset" description="is incorporated by">4835</link>
		</links>
	</bug>
	<bug id="876" opendate="2015-08-12 07:52:43" fixdate="2015-09-18 13:23:39" resolution="Done">
		<buginformation>
			<summary>Reload or Shutdown inside IF statement is performed before the if/else block batch is executed</summary>
			<description>Executing a reload or shutdown inside an if/else block results in the reload or restart occurring before the other commands in the batch are executed.






if (outcome == success) of /subsystem=logging/logger=org.jboss.as.cli:read-resource()




   /subsystem=logging:write-attribute(name=use-deployment-logging-config




   shutdown --restart=true




end-if






This command will actually leave the server in a reload-required state. The shutdown, or reload, will occur before the write-attribute is executed.</description>
			<version>2.0.0.Beta1</version>
			<fixedVersion>2.0.0.CR2</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.cli.handlers.ifelse.IfElseControlFlow.java</file>
			<file type="M">org.jboss.as.cli.handlers.trycatch.TryCatchFinallyControlFlow.java</file>
			<file type="M">org.jboss.as.test.integration.management.cli.TryCatchFinallyTestCase.java</file>
			<file type="M">org.jboss.as.test.integration.management.cli.ifelse.NonExistingPathComparisonTestCase.java</file>
			<file type="M">org.jboss.as.test.integration.management.cli.ifelse.BasicIfElseTestCase.java</file>
		</fixedFiles>
		<links>
			<link type="Related" description="relates to">533</link>
		</links>
	</bug>
	<bug id="939" opendate="2015-08-31 11:54:41" fixdate="2015-09-19 00:29:11" resolution="Done">
		<buginformation>
			<summary>Embedded host controller should set launch type attribute to EMBEDDED</summary>
			<description>DomainRootDefinition.java always set launch type to 





new LaunchTypeHandler(ServerEnvironment.LaunchType.DOMAIN)





 even if the host controller process is embedded. 
Looking into the LaunchType class, I believe that EMBEDDED value should be used.






    /** The manner in which a server can be launched */




    public static enum LaunchType {




        /** Launched by a Host Controller in a managed domain */




        DOMAIN(ProcessType.DOMAIN_SERVER),




        /** Launched from the command line */




        STANDALONE(ProcessType.STANDALONE_SERVER),




        /** Launched by another process in which the server is embedded */




        EMBEDDED(ProcessType.EMBEDDED_SERVER),




...







Additional info:






./standalone.sh




launch-type              STANDALONE












./domain.sh




launch-type              DOMAIN












[disconnected /] embed-server 




launch-type              EMBEDDED












[disconnected /] embed-host-controller




launch-type              DOMAIN





</description>
			<version>2.0.0.Beta4</version>
			<fixedVersion>2.0.0.CR2</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.host.controller.HostControllerBootstrap.java</file>
			<file type="M">org.wildfly.core.embedded.EmbeddedHostControllerFactory.java</file>
			<file type="M">org.jboss.as.host.controller.HostControllerEnvironment.java</file>
			<file type="M">org.jboss.as.domain.controller.resources.DomainRootDefinition.java</file>
			<file type="M">org.jboss.as.host.controller.DomainModelControllerService.java</file>
			<file type="M">org.jboss.as.host.controller.HostControllerService.java</file>
			<file type="M">org.jboss.as.host.controller.Main.java</file>
			<file type="M">org.wildfly.core.embedded.EmbeddedHostControllerBootstrap.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">950</link>
		</links>
	</bug>
	<bug id="981" opendate="2015-09-16 01:02:10" fixdate="2015-09-21 18:56:43" resolution="Done">
		<buginformation>
			<summary>RemoteDomainConnectionService uses out of date HostInfo data when reconnecting</summary>
			<description>When RemoteDomainConnectionService starts, it calculates a "hostInfo" ModelNode that among other things includes data about what addresses the host is ignoring, and what server groups and socket binding groups are relevant to it if it is ignoring resources unrelated to its servers.
Problem is, this data is never updated if the host&amp;amp;apos;s config changes, so if the host needs to reconnect to the master, it sends out-of-date data to the master, and also uses out of date data to process the info that comes back from the master.
We need to figure out how to refresh that data for each connection to the master.</description>
			<version>2.0.0.Beta7</version>
			<fixedVersion>2.0.0.CR2</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.host.controller.RemoteDomainConnectionService.java</file>
			<file type="M">org.jboss.as.core.model.test.LegacyKernelServicesImpl.java</file>
			<file type="M">org.jboss.as.host.controller.RemoteDomainConnection.java</file>
			<file type="M">org.jboss.as.test.integration.domain.suites.IgnoredResourcesTestCase.java</file>
			<file type="M">org.jboss.as.host.controller.IgnoredNonAffectedServerGroupsUtil.java</file>
			<file type="M">org.jboss.as.host.controller.operations.LocalHostControllerInfoImpl.java</file>
			<file type="M">org.jboss.as.host.controller.operations.RemoteDomainControllerAddHandler.java</file>
			<file type="M">org.jboss.as.domain.controller.operations.AbstractOperationTestCase.java</file>
			<file type="M">org.jboss.as.domain.controller.LocalHostControllerInfo.java</file>
			<file type="M">org.jboss.as.domain.controller.operations.ServerGroupAffectedResourceServerConfigOperationsTestCase.java</file>
			<file type="M">org.jboss.as.test.integration.domain.suites.DomainTestSuite.java</file>
		</fixedFiles>
		<links>
			<link type="Dependency" description="blocks">310</link>
		</links>
	</bug>
	<bug id="992" opendate="2015-09-21 10:41:17" fixdate="2015-09-21 18:58:18" resolution="Done">
		<buginformation>
			<summary>Memory leak in host controller</summary>
			<description>The ManagedServerProxy class in the host-controller module contains a memory leak, which can be easily reproduced using the RBAC soak test, like so:






cd wildfly-core # checkout WildFly Core 2.0.0.CR1, which is in WildFly 10.0.0.CR1, or current master




mvn clean install -DskipTests




cd testsuite/domain




mvn clean test -Dts.noSmoke -Dts.domain -Prbac-soak -Djboss.test.rbac.soak.clients=100 -Djboss.test.rbac.soak.iterations=50






After acquiring a heap dump (-XX:+HeapDumpOnOutOfMemoryError), it&amp;amp;apos;s clear that out of the 512 MB of heap space a host controller has, more than 400 MB is taken by a single instance of the ManagedServerProxy class, specifically by its activeRequests field. This Map has a single entry whose value is a Set of "pending" futures. I added a couple of debug prints to the places where this Set is modified, only to see this:






2015-09-21 12:32:00,704 INFO  [stdout] (management-handler-thread - 4) !!! added org.jboss.as.controller.remote.TransactionalProtocolClientImpl$1@142a1c24




2015-09-21 12:32:00,707 INFO  [stdout] (Remoting "master:MANAGEMENT" task-3) !!! removed org.jboss.as.protocol.mgmt.ActiveOperationSupport$ActiveOperationImpl@5bfbf423




2015-09-21 12:32:00,707 INFO  [stdout] (management-handler-thread - 4) !!! added org.jboss.as.controller.remote.TransactionalProtocolClientImpl$1@27e2e96c




2015-09-21 12:32:00,708 INFO  [stdout] (Remoting "master:MANAGEMENT" task-2) !!! removed org.jboss.as.protocol.mgmt.ActiveOperationSupport$ActiveOperationImpl@72817a0d




2015-09-21 12:32:00,713 INFO  [stdout] (management-handler-thread - 2) !!! added org.jboss.as.controller.remote.TransactionalProtocolClientImpl$1@73d373a7




2015-09-21 12:32:00,718 INFO  [stdout] (Remoting "master:MANAGEMENT" task-9) !!! removed org.jboss.as.protocol.mgmt.ActiveOperationSupport$ActiveOperationImpl@20bd6db1






Skipping a few intermediate steps, the root cause is that AbstractDelegatingAsyncFuture delegates addListener directly to an underlying future, so the callbacks don&amp;amp;apos;t get the original instance, but the underlying one.</description>
			<version>2.0.0.CR1</version>
			<fixedVersion>2.0.0.CR2</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.host.controller.ManagedServerProxy.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">1119</link>
		</links>
	</bug>
	<bug id="949" opendate="2015-09-03 05:08:35" fixdate="2015-09-21 18:59:23" resolution="Done">
		<buginformation>
			<summary>Removing http-interface autocompletes but fails</summary>
			<description>Executing /core-service=management/management-interface=http-interface:remove() autocompletes but does not succeed. 
This is a link to a paste of the server stacktrace.
http://pastebin.test.redhat.com/310136</description>
			<version>2.0.0.Beta5</version>
			<fixedVersion>2.0.0.CR2</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.subsystem.test.AdditionalInitialization.java</file>
			<file type="M">org.wildfly.core.test.standalone.mgmt.HTTPSManagementInterfaceTestCase.java</file>
			<file type="M">org.jboss.as.jmx.RemotingConnectorResource.java</file>
			<file type="M">org.jboss.as.server.operations.HttpManagementRemoveHandler.java</file>
			<file type="M">org.jboss.as.host.controller.resources.NativeManagementResourceDefinition.java</file>
			<file type="M">org.jboss.as.test.integration.domain.HTTPSManagementInterfaceTestCase.java</file>
			<file type="M">org.jboss.as.server.operations.NativeRemotingManagementRemoveHandler.java</file>
			<file type="M">org.jboss.as.server.operations.NativeManagementRemoveHandler.java</file>
			<file type="M">org.jboss.as.host.controller.resources.HttpManagementResourceDefinition.java</file>
			<file type="M">org.wildfly.core.test.standalone.mgmt.HTTPSConnectionWithCLITestCase.java</file>
			<file type="M">org.jboss.as.remoting.management.ManagementRemotingServices.java</file>
			<file type="M">org.jboss.as.remoting.logging.RemotingLogger.java</file>
			<file type="M">org.jboss.as.server.mgmt.NativeManagementResourceDefinition.java</file>
			<file type="M">org.jboss.as.host.controller.operations.HttpManagementRemoveHandler.java</file>
			<file type="M">org.jboss.as.server.mgmt.HttpManagementResourceDefinition.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">980</link>
			<link type="Sequence" description="is followed up by">890</link>
			<link type="Sequence" description="is followed up by">924</link>
		</links>
	</bug>
	<bug id="933" opendate="2015-08-28 12:54:19" fixdate="2015-09-21 18:59:47" resolution="Done">
		<buginformation>
			<summary>Embedded server start commands are lacking argument validation</summary>
			<description>Commands for starting embedded instances are lacking argument validation.






[disconnected /] embed-server foo




[standalone@embedded /]









[disconnected /] embed-server foo -foo




[standalone@embedded /]









[disconnected /] embed-server foo --foo




[standalone@embedded /]









[standalone@embedded /] stop-embedded-server foo




The command accepts 0 unnamed argument(s) but received: [foo]









[standalone@embedded /] stop-embedded-server -foo




Unrecognized arguments: [-foo]









[standalone@embedded /] stop-embedded-server --foo




Unrecognized arguments: [--foo]






Same case for embedded host controller.</description>
			<version>2.0.0.Beta4</version>
			<fixedVersion>2.0.0.CR2</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.cli.embedded.EmbedHostControllerHandler.java</file>
			<file type="M">org.jboss.as.cli.embedded.EmbedServerHandler.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">931</link>
		</links>
	</bug>
	<bug id="940" opendate="2015-08-31 12:20:01" fixdate="2015-09-22 11:59:51" resolution="Done">
		<buginformation>
			<summary>CLI gets fooled by early connection</summary>
			<description>CLI in confused by early connection to domain which is booting. CLI acts as I was connected to the standalone instance, some high level commands are not executable.






[pkremens@dhcp-10-40-5-149 bin]$ ./domain.sh




...




# run while domain is booting




[pkremens@dhcp-10-40-5-149 bin]$ ./jboss-cli.sh -c 




[standalone@localhost:9999 /]









# domain has fully booted









[standalone@localhost:9999 /] ls -l




ATTRIBUTE                VALUE                 TYPE   




launch-type              DOMAIN                STRING




...




[standalone@localhost:9999 /] shutdown --host=master




--host is not allowed in the standalone mode.





</description>
			<version>2.0.0.Beta4</version>
			<fixedVersion>2.0.0.CR4</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.cli.impl.CommandContextImpl.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">952</link>
		</links>
	</bug>
	<bug id="931" opendate="2015-08-28 12:00:07" fixdate="2015-09-23 00:44:31" resolution="Done">
		<buginformation>
			<summary>Embedded host-controller throws NPE on regular shutdown</summary>
			<description>Invoking the /host=master:shutdown operation on embedded host-controller gives me NPE.
Standalone






[standalone@embedded /] shutdown




The command is not available in the current context (e.g. required subsystems or connection to the controller might be unavailable).




[standalone@embedded /] :shutdown




{




    "outcome" =&amp;gt; "failed",




    "failure-description" =&amp;gt; "WFLYCTL0031: No operation named &amp;amp;apos;shutdown&amp;amp;apos; exists at address []",




    "rolled-back" =&amp;gt; true




}







Domain
Using operation style :shutdown throws NPE. Tab completion for this operation works, which could be a little bit misleading in this case.






[domain@embedded /] shutdown --host=master




The command is not available in the current context (e.g. required subsystems or connection to the controller might be unavailable).




[domain@embedded /] /host=master:shutdown




13:34:57,512 ERROR [org.jboss.as.controller.management-operation] (AeshProcess: 3) WFLYCTL0013: Operation ("shutdown") failed - address: ([("host" =&amp;gt; "master")]): java.lang.NullPointerException




	at org.jboss.as.host.controller.DomainModelControllerService.stopLocalHost(DomainModelControllerService.java:911)




	at org.jboss.as.host.controller.DomainModelControllerService.stopLocalHost(DomainModelControllerService.java:903)




	at org.jboss.as.host.controller.operations.HostShutdownHandler$1.execute(HostShutdownHandler.java:89)




	at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:846)




	at org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:637)




	at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:362)




	at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1296)




	at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:395)




	at org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:212)




	at org.jboss.as.controller.ModelControllerImpl$3.execute(ModelControllerImpl.java:661)




	at org.jboss.as.controller.ModelControllerImpl$3.execute(ModelControllerImpl.java:651)




	at org.jboss.as.controller.client.helpers.DelegatingModelControllerClient.execute(DelegatingModelControllerClient.java:63)




	at org.jboss.as.cli.embedded.ThreadContextsModelControllerClient.execute(ThreadContextsModelControllerClient.java:59)




	at org.jboss.as.cli.handlers.OperationRequestHandler.handle(OperationRequestHandler.java:85)




	at org.jboss.as.cli.impl.CommandContextImpl.handle(CommandContextImpl.java:728)




	at org.jboss.as.cli.impl.CommandContextImpl.handleSafe(CommandContextImpl.java:774)




	at org.jboss.as.cli.impl.CommandContextImpl$2.execute(CommandContextImpl.java:389)




	at org.jboss.aesh.console.AeshProcess.run(AeshProcess.java:53)




	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)




	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)




	at java.lang.Thread.run(Thread.java:745)









{




    "outcome" =&amp;gt; "failed",




    "failure-description" =&amp;gt; "WFLYCTL0158: Operation handler failed: java.lang.NullPointerException",




    "rolled-back" =&amp;gt; true




}




[domain@embedded /] :read-resource




Failed to execute operation.: WFLYEMB0023: The embedded server is stopping and invocations on the ModelControllerClient are not available




[domain@embedded /] stop-embedded-host-controller 




13:35:19,252 ERROR [org.jboss.as.protocol] (AeshProcess: 5) WFLYPRT0003: Failed to close resource org.jboss.as.cli.embedded.ThreadContextsModelControllerClient@626966ee: java.lang.IllegalStateException: WFLYEMB0023: The embedded server is stopping and invocations on the ModelControllerClient are not available




	at org.wildfly.core.embedded.EmbeddedHostControllerFactory$HostControllerImpl.getActiveModelControllerClient(EmbeddedHostControllerFactory.java:331)




	at org.wildfly.core.embedded.EmbeddedHostControllerFactory$HostControllerImpl.access$200(EmbeddedHostControllerFactory.java:225)




	at org.wildfly.core.embedded.EmbeddedHostControllerFactory$HostControllerImpl$3.getDelegate(EmbeddedHostControllerFactory.java:309)




	at org.jboss.as.controller.client.helpers.DelegatingModelControllerClient.close(DelegatingModelControllerClient.java:103)




	at org.jboss.as.cli.embedded.ThreadContextsModelControllerClient.close(ThreadContextsModelControllerClient.java:139)




	at org.jboss.as.protocol.StreamUtils.safeClose(StreamUtils.java:66)




	at org.jboss.as.cli.impl.CommandContextImpl.disconnectController(CommandContextImpl.java:1165)




	at org.jboss.as.cli.embedded.StopEmbeddedHostControllerHandler.doHandle(StopEmbeddedHostControllerHandler.java:56)




	at org.jboss.as.cli.handlers.CommandHandlerWithHelp.handle(CommandHandlerWithHelp.java:88)




	at org.jboss.as.cli.impl.CommandContextImpl.handle(CommandContextImpl.java:751)




	at org.jboss.as.cli.impl.CommandContextImpl.handleSafe(CommandContextImpl.java:774)




	at org.jboss.as.cli.impl.CommandContextImpl$2.execute(CommandContextImpl.java:389)




	at org.jboss.aesh.console.AeshProcess.run(AeshProcess.java:53)




	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)




	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)




	at java.lang.Thread.run(Thread.java:745)





</description>
			<version>2.0.0.Beta4</version>
			<fixedVersion>2.0.0.CR4</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.host.controller.model.host.HostResourceDefinition.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">926</link>
		</links>
	</bug>
	<bug id="932" opendate="2015-08-28 12:32:09" fixdate="2015-09-24 00:56:07" resolution="Done">
		<buginformation>
			<summary>stop-embedded-server stops the embedded host controller and vice versa</summary>
			<description>We have four new commands for controlling the lifecycle of embedded instances:

embed-server - launch embedded standalone
stop-embedded-server - stop embedded standalone
embed-host-controller - launch embedded host
stop-embedded-host-controller - stop embedded host


I am able stop embedded standalone by stop-embedded-host-controller and embedded host controller by stop-embedded-server.






[disconnected /] embed-server 




[standalone@embedded /] stop-embedded-host-controller 




[disconnected /] embed-host-controller 




14:22:18,781 INFO  [org.jboss.modules] (AeshProcess: 15) JBoss Modules version 1.4.3.Final




[domain@embedded /] stop-embedded-server 




[disconnected /]







A question comes to my mind, do we need two commands for stopping the embedded instance?</description>
			<version>2.0.0.Beta4</version>
			<fixedVersion>2.0.0.CR5</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.cli.embedded.EmbeddedServerLaunch.java</file>
			<file type="M">org.jboss.as.cli.embedded.StopEmbeddedServerHandler.java</file>
			<file type="M">org.jboss.as.cli.embedded.StopEmbeddedHostControllerHandler.java</file>
			<file type="M">org.jboss.as.cli.handlers.ShutdownHandler.java</file>
			<file type="M">org.wildfly.core.embedded.EmbeddedServerReference.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">929</link>
		</links>
	</bug>
	<bug id="1007" opendate="2015-09-24 06:45:11" fixdate="2015-09-25 15:39:44" resolution="Done">
		<buginformation>
			<summary>Warnings about missing notification descriptions when an operation removes an extension</summary>
			<description>When I use migration operation the console log is filled with warning messages of type
WARN  [org.jboss.as.controller] (management-handler-thread - 1) WFLYCTL0357: Notification of type resource-removed is not described for the resource at the address [("subsystem" =&amp;gt; "jacorb")]
This is the same either for jacorb or web or messaging subsystem. If I do the sequence of operation






[standalone@localhost:9999 /] /subsystem=jacorb:migrate()




{




    "outcome" =&amp;gt; "success",




    "result" =&amp;gt; {"migration-warnings" =&amp;gt; []}




}




[standalone@localhost:9999 /] /subsystem=messaging:migrate()




{




    "outcome" =&amp;gt; "success",




    "result" =&amp;gt; {"migration-warnings" =&amp;gt; []}




}




[standalone@localhost:9999 /] /subsystem=we




web  webservices  weld  




[standalone@localhost:9999 /] /subsystem=web




web  webservices  




[standalone@localhost:9999 /] /subsystem=web:migrate()




{




    "outcome" =&amp;gt; "success",




    "result" =&amp;gt; {"migration-warnings" =&amp;gt; []}




}






then I the log looks like






2015-09-24 08:41:09,729 WARN  [org.jboss.as.controller] (management-handler-thread - 1) WFLYCTL0357: Notification of type resource-removed is not described for the resource at the address [("subsystem" =&amp;gt; "jacorb")]




2015-09-24 08:43:13,229 WARN  [org.jboss.as.controller] (management-handler-thread - 7) WFLYCTL0357: Notification of type resource-removed is not described for the resource at the address [




    ("subsystem" =&amp;gt; "messaging"),




    ("hornetq-server" =&amp;gt; "default"),




    ("jms-queue" =&amp;gt; "DLQ")




]




2015-09-24 08:43:13,230 WARN  [org.jboss.as.controller] (management-handler-thread - 7) WFLYCTL0357: Notification of type resource-removed is not described for the resource at the address [




    ("subsystem" =&amp;gt; "messaging"),




    ("hornetq-server" =&amp;gt; "default"),




    ("jms-queue" =&amp;gt; "ExpiryQueue")




]




2015-09-24 08:43:13,230 WARN  [org.jboss.as.controller] (management-handler-thread - 7) WFLYCTL0357: Notification of type resource-removed is not described for the resource at the address [




    ("subsystem" =&amp;gt; "messaging"),




    ("hornetq-server" =&amp;gt; "default"),




    ("pooled-connection-factory" =&amp;gt; "hornetq-ra")




]




2015-09-24 08:43:13,230 WARN  [org.jboss.as.controller] (management-handler-thread - 7) WFLYCTL0357: Notification of type resource-removed is not described for the resource at the address [




    ("subsystem" =&amp;gt; "messaging"),




    ("hornetq-server" =&amp;gt; "default"),




    ("connection-factory" =&amp;gt; "RemoteConnectionFactory")




]




2015-09-24 08:43:13,231 WARN  [org.jboss.as.controller] (management-handler-thread - 7) WFLYCTL0357: Notification of type resource-removed is not described for the resource at the address [




    ("subsystem" =&amp;gt; "messaging"),




    ("hornetq-server" =&amp;gt; "default"),




    ("connection-factory" =&amp;gt; "InVmConnectionFactory")




]




2015-09-24 08:43:13,231 WARN  [org.jboss.as.controller] (management-handler-thread - 7) WFLYCTL0357: Notification of type resource-removed is not described for the resource at the address [




    ("subsystem" =&amp;gt; "messaging"),




    ("hornetq-server" =&amp;gt; "default"),




    ("address-setting" =&amp;gt; "#")




]




2015-09-24 08:43:13,231 WARN  [org.jboss.as.controller] (management-handler-thread - 7) WFLYCTL0357: Notification of type resource-removed is not described for the resource at the address [




    ("subsystem" =&amp;gt; "messaging"),




    ("hornetq-server" =&amp;gt; "default"),




    ("security-setting" =&amp;gt; "#"),




    ("role" =&amp;gt; "guest")




]




2015-09-24 08:43:13,232 WARN  [org.jboss.as.controller] (management-handler-thread - 7) WFLYCTL0357: Notification of type resource-removed is not described for the resource at the address [




    ("subsystem" =&amp;gt; "messaging"),




    ("hornetq-server" =&amp;gt; "default"),




    ("security-setting" =&amp;gt; "#")




]




2015-09-24 08:43:13,232 WARN  [org.jboss.as.controller] (management-handler-thread - 7) WFLYCTL0357: Notification of type resource-removed is not described for the resource at the address [




    ("subsystem" =&amp;gt; "messaging"),




    ("hornetq-server" =&amp;gt; "default"),




    ("in-vm-acceptor" =&amp;gt; "in-vm")




]




2015-09-24 08:43:13,232 WARN  [org.jboss.as.controller] (management-handler-thread - 7) WFLYCTL0357: Notification of type resource-removed is not described for the resource at the address [




    ("subsystem" =&amp;gt; "messaging"),




    ("hornetq-server" =&amp;gt; "default"),




    ("remote-acceptor" =&amp;gt; "netty-throughput"),




    ("param" =&amp;gt; "direct-deliver")




]




2015-09-24 08:43:13,233 WARN  [org.jboss.as.controller] (management-handler-thread - 7) WFLYCTL0357: Notification of type resource-removed is not described for the resource at the address [




    ("subsystem" =&amp;gt; "messaging"),




    ("hornetq-server" =&amp;gt; "default"),




    ("remote-acceptor" =&amp;gt; "netty-throughput"),




    ("param" =&amp;gt; "batch-delay")




]




2015-09-24 08:43:13,233 WARN  [org.jboss.as.controller] (management-handler-thread - 7) WFLYCTL0357: Notification of type resource-removed is not described for the resource at the address [




    ("subsystem" =&amp;gt; "messaging"),




    ("hornetq-server" =&amp;gt; "default"),




    ("remote-acceptor" =&amp;gt; "netty-throughput")




]




2015-09-24 08:43:13,233 WARN  [org.jboss.as.controller] (management-handler-thread - 7) WFLYCTL0357: Notification of type resource-removed is not described for the resource at the address [




    ("subsystem" =&amp;gt; "messaging"),




    ("hornetq-server" =&amp;gt; "default"),




    ("remote-acceptor" =&amp;gt; "netty")




]




2015-09-24 08:43:13,234 WARN  [org.jboss.as.controller] (management-handler-thread - 7) WFLYCTL0357: Notification of type resource-removed is not described for the resource at the address [




    ("subsystem" =&amp;gt; "messaging"),




    ("hornetq-server" =&amp;gt; "default"),




    ("in-vm-connector" =&amp;gt; "in-vm")




]




2015-09-24 08:43:13,234 WARN  [org.jboss.as.controller] (management-handler-thread - 7) WFLYCTL0357: Notification of type resource-removed is not described for the resource at the address [




    ("subsystem" =&amp;gt; "messaging"),




    ("hornetq-server" =&amp;gt; "default"),




    ("remote-connector" =&amp;gt; "netty-throughput"),




    ("param" =&amp;gt; "batch-delay")




]




2015-09-24 08:43:13,234 WARN  [org.jboss.as.controller] (management-handler-thread - 7) WFLYCTL0357: Notification of type resource-removed is not described for the resource at the address [




    ("subsystem" =&amp;gt; "messaging"),




    ("hornetq-server" =&amp;gt; "default"),




    ("remote-connector" =&amp;gt; "netty-throughput")




]




2015-09-24 08:43:13,235 WARN  [org.jboss.as.controller] (management-handler-thread - 7) WFLYCTL0357: Notification of type resource-removed is not described for the resource at the address [




    ("subsystem" =&amp;gt; "messaging"),




    ("hornetq-server" =&amp;gt; "default"),




    ("remote-connector" =&amp;gt; "netty")




]




2015-09-24 08:43:13,235 WARN  [org.jboss.as.controller] (management-handler-thread - 7) WFLYCTL0357: Notification of type resource-removed is not described for the resource at the address [




    ("subsystem" =&amp;gt; "messaging"),




    ("hornetq-server" =&amp;gt; "default")




]




2015-09-24 08:43:13,235 WARN  [org.jboss.as.controller] (management-handler-thread - 7) WFLYCTL0357: Notification of type resource-removed is not described for the resource at the address [("subsystem" =&amp;gt; "messaging")]




2015-09-24 08:43:20,957 WARN  [org.jboss.as.controller] (management-handler-thread - 7) WFLYCTL0357: Notification of type resource-removed is not described for the resource at the address [




    ("subsystem" =&amp;gt; "web"),




    ("configuration" =&amp;gt; "jsp-configuration")




]




2015-09-24 08:43:20,957 WARN  [org.jboss.as.controller] (management-handler-thread - 7) WFLYCTL0357: Notification of type resource-removed is not described for the resource at the address [




    ("subsystem" =&amp;gt; "web"),




    ("configuration" =&amp;gt; "static-resources")




]




2015-09-24 08:43:20,958 WARN  [org.jboss.as.controller] (management-handler-thread - 7) WFLYCTL0357: Notification of type resource-removed is not described for the resource at the address [




    ("subsystem" =&amp;gt; "web"),




    ("configuration" =&amp;gt; "container")




]




2015-09-24 08:43:20,958 WARN  [org.jboss.as.controller] (management-handler-thread - 7) WFLYCTL0357: Notification of type resource-removed is not described for the resource at the address [




    ("subsystem" =&amp;gt; "web"),




    ("virtual-server" =&amp;gt; "default-host")




]




2015-09-24 08:43:20,958 WARN  [org.jboss.as.controller] (management-handler-thread - 7) WFLYCTL0357: Notification of type resource-removed is not described for the resource at the address [




    ("subsystem" =&amp;gt; "web"),




    ("connector" =&amp;gt; "http")




]




2015-09-24 08:43:20,959 WARN  [org.jboss.as.controller] (management-handler-thread - 7) WFLYCTL0357: Notification of type resource-removed is not described for the resource at the address [("subsystem" =&amp;gt; "web")]






I think that the migration operation should not show those warnings.</description>
			<version>2.0.0.CR4</version>
			<fixedVersion>2.0.0.CR6</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.logging.ControllerLogger.java</file>
			<file type="M">org.jboss.as.controller.AbstractOperationContext.java</file>
		</fixedFiles>
		<links>
			<link type="Causality" description="is caused by">5306</link>
			<link type="Cloners" description="cloned from">1140</link>
		</links>
	</bug>
	<bug id="1014" opendate="2015-09-25 20:19:04" fixdate="2015-09-26 02:12:05" resolution="Done">
		<buginformation>
			<summary>DefaultDeploymentOperations.getDeploymentsStatus doesn&amp;apos;t consider model operation result outcome</summary>
			<description>The deployment scanner doesn&amp;amp;apos;t properly consider the  result outcome of its read child operation during getDeploymentsStatus().  This has bad consequences if the operation fails, for instance due to an OOME or possibly some other unexpected exception.
The operation catches the exception and returns an empty result.  The deployment scanner misinterprets that empty result to mean there are no applications deployed and sets .undeployed marker files for all of them.  The deployment scanner should confirm if the operation was a success or not so we can avoid potential side effects of undeployed applications from an OOME.</description>
			<version>2.0.0.CR6</version>
			<fixedVersion>2.0.0.CR6</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.server.deployment.scanner.DefaultDeploymentOperations.java</file>
			<file type="M">org.jboss.as.server.deployment.scanner.logging.DeploymentScannerLogger.java</file>
		</fixedFiles>
	</bug>
	<bug id="987" opendate="2015-09-17 19:14:19" fixdate="2015-10-02 15:46:27" resolution="Done">
		<buginformation>
			<summary>java.lang.StringIndexOutOfBoundsException when empty string is used in a resource address value</summary>
			<description>Following copied from WFCORE-212 shows a StringIndexOutOfBounds being thrown when the empty string is the &amp;amp;apos;value&amp;amp;apos; passed to PathElement.pathElement(key, value). The point of this JIRA is not to correct the reason for that empty string, but rather to fail cleanly (probably with the same logic used for the value == null case.)
Following steps to reproduce section you will encounter this exception:






15:25:04,304 ERROR [org.jboss.as.server] (Controller Boot Thread) WFLYSRV0055: Caught exception during boot: java.lang.StringIndexOutOfBoundsException: String index out of range: 0




	at java.lang.String.charAt(String.java:646) [rt.jar:1.8.0_20]




	at org.jboss.as.controller.PathElement.&amp;lt;init&amp;gt;(PathElement.java:102) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]




	at org.jboss.as.controller.PathElement.pathElement(PathElement.java:67) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]




	at org.jboss.as.controller.registry.PlaceholderResource$PlaceholderResourceEntry.&amp;lt;init&amp;gt;(PlaceholderResource.java:141) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]




	at org.jboss.as.messaging.HornetQServerResource.getChildren(HornetQServerResource.java:184)




	at org.jboss.as.controller.registry.AbstractModelResource$DelegateResource.getChildren(AbstractModelResource.java:280) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]




	at org.jboss.as.controller.registry.Resource$Tools.readModel(Resource.java:252) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]




	at org.jboss.as.controller.registry.Resource$Tools.readModel(Resource.java:239) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]




	at org.jboss.as.controller.registry.Resource$Tools.readModel(Resource.java:225) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]




	at org.jboss.as.controller.registry.Resource$Tools.readModel(Resource.java:254) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]




	at org.jboss.as.controller.registry.Resource$Tools.readModel(Resource.java:239) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]




	at org.jboss.as.controller.registry.Resource$Tools.readModel(Resource.java:225) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]




	at org.jboss.as.controller.registry.Resource$Tools.readModel(Resource.java:254) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]




	at org.jboss.as.controller.registry.Resource$Tools.readModel(Resource.java:239) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]




	at org.jboss.as.controller.registry.Resource$Tools.readModel(Resource.java:225) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]




	at org.jboss.as.controller.registry.Resource$Tools.readModel(Resource.java:213) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]




	at org.jboss.as.controller.ModelControllerImpl.writeModel(ModelControllerImpl.java:640) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]




	at org.jboss.as.controller.OperationContextImpl.createPersistenceResource(OperationContextImpl.java:381) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]




	at org.jboss.as.controller.AbstractOperationContext.doCompleteStep(AbstractOperationContext.java:577) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]




	at org.jboss.as.controller.AbstractOperationContext.completeStepInternal(AbstractOperationContext.java:308) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]




	at org.jboss.as.controller.AbstractOperationContext.finishStep(AbstractOperationContext.java:803) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]




	at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:778) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]




	at org.jboss.as.controller.AbstractOperationContext.doCompleteStep(AbstractOperationContext.java:535) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]




	at org.jboss.as.controller.AbstractOperationContext.completeStepInternal(AbstractOperationContext.java:308) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]




	at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:303) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]




	at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1158) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]




	at org.jboss.as.controller.ModelControllerImpl.boot(ModelControllerImpl.java:404) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]




	at org.jboss.as.controller.AbstractControllerService.boot(AbstractControllerService.java:301) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]




	at org.jboss.as.server.ServerService.boot(ServerService.java:364) [wildfly-server-1.0.0.Alpha9.jar:1.0.0.Alpha9]




	at org.jboss.as.server.ServerService.boot(ServerService.java:339) [wildfly-server-1.0.0.Alpha9.jar:1.0.0.Alpha9]




	at org.jboss.as.controller.AbstractControllerService$1.run(AbstractControllerService.java:263) [wildfly-controller-1.0.0.Alpha9.jar:1.0.0.Alpha9]




	at java.lang.Thread.run(Thread.java:745) [rt.jar:1.8.0_20]





</description>
			<version>1.0.0.Alpha9</version>
			<fixedVersion>2.0.0.CR6</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.PathElementTestCase.java</file>
			<file type="M">org.jboss.as.controller.PathElement.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">5357</link>
		</links>
	</bug>
	<bug id="1020" opendate="2015-09-29 20:36:30" fixdate="2015-10-02 15:49:40" resolution="Done">
		<buginformation>
			<summary>NPE in GlobalAddressHandlers</summary>
			<description>I&amp;amp;apos;ve seen stack traces like the following pop up in testsuite logs:






2015-09-29 08:11:50,515 ERROR [org.jboss.as.controller.management-operation] (Host Controller Service Threads - 88) WFLYCTL0190: Step handler org.jboss.as.controller.operations.global.GlobalOperationHandlers$ModelAddressResolver$4@b4ea88 for operation {"operation" =&amp;gt; "read-resource","address" =&amp;gt; [("host" =&amp;gt; "slave"),("server" =&amp;gt; "main-three")],"operation-headers" =&amp;gt; {"caller-type" =&amp;gt; "user","access-mechanism" =&amp;gt; "NATIVE","domain-uuid" =&amp;gt; "5352863e-b467-4d70-b0b1-fa640cc022a1"}} at address [




    ("host" =&amp;gt; "slave"),




    ("server" =&amp;gt; "main-three")




] failed handling operation rollback -- java.lang.NullPointerException: java.lang.NullPointerException




	at org.jboss.as.controller.operations.global.GlobalOperationHandlers$ModelAddressResolver$4$1.handleResult(GlobalOperationHandlers.java:708)




	at org.jboss.as.controller.AbstractOperationContext$Step.invokeResultHandler(AbstractOperationContext.java:1384)




	at org.jboss.as.controller.AbstractOperationContext$Step.handleResult(AbstractOperationContext.java:1366)




	at org.jboss.as.controller.AbstractOperationContext$Step.finalizeInternal(AbstractOperationContext.java:1328)




	at org.jboss.as.controller.AbstractOperationContext$Step.finalizeStep(AbstractOperationContext.java:1311)




	at org.jboss.as.controller.AbstractOperationContext$Step.access$300(AbstractOperationContext.java:1185)




	at org.jboss.as.controller.AbstractOperationContext.executeResultHandlerPhase(AbstractOperationContext.java:767)




	at org.jboss.as.controller.AbstractOperationContext.executeDoneStage(AbstractOperationContext.java:753)




	at org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:680)




	at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:370)




	at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1336)




	at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:391)




	at org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:217)




	at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler.internalExecute(TransactionalProtocolOperationHandler.java:233)




	at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler.doExecute(TransactionalProtocolOperationHandler.java:173)




	at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler$1.run(TransactionalProtocolOperationHandler.java:136)




	at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler$1.run(TransactionalProtocolOperationHandler.java:132)




	at java.security.AccessController.doPrivileged(Native Method)




	at javax.security.auth.Subject.doAs(Subject.java:360)




	at org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:81)




	at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler$2$1.run(TransactionalProtocolOperationHandler.java:152)




	at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler$2$1.run(TransactionalProtocolOperationHandler.java:148)




	at java.security.AccessController.doPrivileged(Native Method)




	at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler$2.execute(TransactionalProtocolOperationHandler.java:148)




	at org.jboss.as.protocol.mgmt.AbstractMessageHandler$2$1.doExecute(AbstractMessageHandler.java:299)




	at org.jboss.as.protocol.mgmt.AbstractMessageHandler$AsyncTaskRunner.run(AbstractMessageHandler.java:519)




	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)




	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)




	at java.lang.Thread.run(Thread.java:745)




	at org.jboss.threads.JBossThread.run(JBossThread.java:320)






There&amp;amp;apos;s a call to ModelNode.remove("access-control") and then the return value is dereferenced without a null check. The "remove" method may return null.</description>
			<version>1.0.0.Final</version>
			<fixedVersion>2.0.0.CR6</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.operations.global.GlobalOperationHandlers.java</file>
		</fixedFiles>
		<links>
			<link type="Causality" description="is caused by">282</link>
		</links>
	</bug>
	<bug id="1025" opendate="2015-10-01 15:37:07" fixdate="2015-10-04 15:33:28" resolution="Done">
		<buginformation>
			<summary>ManagementRequestContext executeAsync hides RejectedExecutionException</summary>
			<description>The impl of ManagementRequestContext executeAsync catches RejectedExecutionException and doesn&amp;amp;apos;t notify the calling thread. The handling itself seems ok (call failed on the result handler and send a failure response to the client), but not notifying the caller is problematic. There are a number of cases where the caller thread waits for a latch to be tripped, with the async task tripping. If the latch never trips, the caller thread will block forever. The testsuite hang at http://brontes.lab.eng.brq.redhat.com/viewLog.html?buildId=71233&amp;amp;buildTypeId=WildFlyCore_MasterLinux&amp;amp;tab=buildLog#_focus=13620 looks to be a case of this, with a server not stopping due to this:











"Remoting "master:main-one:MANAGEMENT" task-13" #55 prio=5 os_prio=0 tid=0xc6c3bc00 nid=0x19d9 waiting on condition [0xc215c000]




   java.lang.Thread.State: WAITING (parking)




	at sun.misc.Unsafe.park(Native Method)




	- parking to wait for  &amp;lt;0xddbb4aa0&amp;gt; (a java.util.concurrent.CountDownLatch$Sync)




	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)




	at java.util.concurrent.locks.AbstractQueuedSynchronizer.parkAndCheckInterrupt(AbstractQueuedSynchronizer.java:836)




	at java.util.concurrent.locks.AbstractQueuedSynchronizer.doAcquireSharedInterruptibly(AbstractQueuedSynchronizer.java:997)




	at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireSharedInterruptibly(AbstractQueuedSynchronizer.java:1304)




	at java.util.concurrent.CountDownLatch.await(CountDownLatch.java:231)




	at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler.sendResponse(TransactionalProtocolOperationHandler.java:540)




	at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestContext.failed(TransactionalProtocolOperationHandler.java:377)




	- locked &amp;lt;0xddbb2300&amp;gt; (a org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestContext)




	at org.jboss.as.protocol.mgmt.ActiveOperationSupport$ActiveOperationImpl$2.handleFailed(ActiveOperationSupport.java:350)




	at org.jboss.threads.AsyncFutureTask$Reg.run(AsyncFutureTask.java:60)




	at org.jboss.as.protocol.mgmt.ActiveOperationSupport$1.execute(ActiveOperationSupport.java:55)




	at org.jboss.threads.AsyncFutureTask.safeExecute(AsyncFutureTask.java:169)




	at org.jboss.threads.AsyncFutureTask.setFailed(AsyncFutureTask.java:162)




	at org.jboss.as.protocol.mgmt.ActiveOperationSupport$ActiveOperationImpl.access$400(ActiveOperationSupport.java:295)




	at org.jboss.as.protocol.mgmt.ActiveOperationSupport$ActiveOperationImpl$1.failed(ActiveOperationSupport.java:315)




	at org.jboss.as.protocol.mgmt.AbstractMessageHandler$2.executeAsync(AbstractMessageHandler.java:333)




	at org.jboss.as.protocol.mgmt.AbstractMessageHandler$2.executeAsync(AbstractMessageHandler.java:315)




	at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler.handleRequest(TransactionalProtocolOperationHandler.java:144)




	at org.jboss.as.protocol.mgmt.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:270)




	at org.jboss.as.protocol.mgmt.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:252)




	at org.jboss.as.protocol.mgmt.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:123)




	at org.jboss.as.protocol.mgmt.ManagementChannelReceiver$1.handleMessage(ManagementChannelReceiver.java:56)




	at org.jboss.as.protocol.mgmt.ManagementChannelReceiver.handleMessage(ManagementChannelReceiver.java:85)




	at org.jboss.remoting3.remote.RemoteConnectionChannel$5.run(RemoteConnectionChannel.java:463)




	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)




	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)




	at java.lang.Thread.run(Thread.java:745)






The RejectedExecutionException indicates a thread pool has been shutdown before the response has gone out. Ideally we would prevent that (for which I&amp;amp;apos;ve recently filed a JIRA) but in any case we should make this more robust.
I think having executeAsync return a boolean should suffice.</description>
			<version>2.0.0.CR5</version>
			<fixedVersion>2.0.0.CR6</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.remote.ModelControllerClientOperationHandler.java</file>
			<file type="M">org.jboss.as.protocol.mgmt.ManagementRequestContext.java</file>
			<file type="M">org.jboss.as.protocol.mgmt.AbstractMessageHandler.java</file>
			<file type="M">org.jboss.as.controller.remote.TransactionalProtocolOperationHandler.java</file>
			<file type="M">org.jboss.as.controller.remote.ResponseAttachmentInputStreamSupportTestCase.java</file>
		</fixedFiles>
	</bug>
	<bug id="948" opendate="2015-09-03 01:43:12" fixdate="2015-10-06 15:59:42" resolution="Done">
		<buginformation>
			<summary>Multiprocess wildcard read-resource-description does not work</summary>
			<description>





[domain@localhost:9990 /] /host=master/server=*/interface=public:read-resource-description




{




    "outcome" =&amp;gt; "failed",




    "result" =&amp;gt; [




        {




            "address" =&amp;gt; [




                ("host" =&amp;gt; "master"),




                ("server" =&amp;gt; "*"),




                ("interface" =&amp;gt; "public")




            ],




            "outcome" =&amp;gt; "failed",




            "failure-description" =&amp;gt; "WFLYCTL0158: Operation handler failed: java.lang.NullPointerException",




            "rolled-back" =&amp;gt; true




        },




        {




            "address" =&amp;gt; [




                ("host" =&amp;gt; "master"),




                ("server" =&amp;gt; "server-one"),




                ("interface" =&amp;gt; "public")




            ],




            "outcome" =&amp;gt; "failed",




            "result" =&amp;gt; undefined,




            "rolled-back" =&amp;gt; true




        },




        {




            "address" =&amp;gt; [




                ("host" =&amp;gt; "master"),




                ("server" =&amp;gt; "server-two"),




                ("interface" =&amp;gt; "public")




            ],




            "outcome" =&amp;gt; "failed",




            "result" =&amp;gt; undefined,




            "rolled-back" =&amp;gt; true




        }




    ],




    "failure-description" =&amp;gt; "WFLYCTL0285: Operation read-resource-description invoked against multiple target addresses failed at address [




    (\"host\" =&amp;gt; \"master\"),




    (\"server\" =&amp;gt; \"*\"),




    (\"interface\" =&amp;gt; \"public\")




] with failure description WFLYCTL0158: Operation handler failed: java.lang.NullPointerException",




    "rolled-back" =&amp;gt; true




}






In the HC log:






[Host Controller] 20:37:28,277 ERROR [org.jboss.as.controller.management-operation] (management-handler-thread - 3) WFLYCTL0013: Operation ("read-resource-description") failed - address: ([




[Host Controller]     ("host" =&amp;gt; "master"),




[Host Controller]     ("server" =&amp;gt; "*"),




[Host Controller]     ("interface" =&amp;gt; "public")




[Host Controller] ]): java.lang.NullPointerException




[Host Controller] 	at org.jboss.as.controller.operations.global.ReadResourceDescriptionHandler.getResourceRegistrationCheckForAlias(ReadResourceDescriptionHandler.java:391)




[Host Controller] 	at org.jboss.as.controller.operations.global.ReadResourceDescriptionHandler.doExecuteInternal(ReadResourceDescriptionHandler.java:189)




[Host Controller] 	at org.jboss.as.controller.operations.global.ReadResourceDescriptionHandler.doExecute(ReadResourceDescriptionHandler.java:161)




[Host Controller] 	at org.jboss.as.controller.operations.global.ReadResourceDescriptionHandler.access$300(ReadResourceDescriptionHandler.java:97)




[Host Controller] 	at org.jboss.as.controller.operations.global.ReadResourceDescriptionHandler$2.execute(ReadResourceDescriptionHandler.java:411)




[Host Controller] 	at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:854)






The handling for this doesn&amp;amp;apos;t have the stuff I did for WFCORE-282.</description>
			<version>2.0.0.Beta5</version>
			<fixedVersion>2.0.0.CR7</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.test.integration.domain.suites.WildcardOperationsTestCase.java</file>
			<file type="M">org.jboss.as.controller.ProxyStepHandler.java</file>
			<file type="M">org.jboss.as.controller.operations.global.GlobalOperationHandlers.java</file>
		</fixedFiles>
		<links>
			<link type="Related" description="relates to">2022</link>
		</links>
	</bug>
	<bug id="1027" opendate="2015-10-01 18:16:10" fixdate="2015-10-06 16:00:01" resolution="Done">
		<buginformation>
			<summary>Inconsistent read-resource results with host scoped roles</summary>
			<description>Setting up host scoped roles as follows https://gist.github.com/heiko-braun/0dc810ed04db8739defd there are inconsistent results in the filtering. When using a role which only selects the master there is no access-control response header showing the filtered resources, and the slave wrongly appears in the results:






[domain@localhost:9990 /] /host=*:read-resource{roles=master-monitor}




{




    "outcome" =&amp;gt; "success",




    "result" =&amp;gt; [




        {




            "address" =&amp;gt; [("host" =&amp;gt; "master")],




            "outcome" =&amp;gt; "success",




            "result" =&amp;gt; {




                "directory-grouping" =&amp;gt; "by-server",




                "domain-controller" =&amp;gt; {"local" =&amp;gt; {}},




                "management-major-version" =&amp;gt; 4,




                "management-micro-version" =&amp;gt; 0,




                "management-minor-version" =&amp;gt; 0,




                "master" =&amp;gt; true,




                "name" =&amp;gt; "master",




                "namespaces" =&amp;gt; [],




                "organization" =&amp;gt; undefined,




                "product-name" =&amp;gt; "WildFly Core",




                "product-version" =&amp;gt; "2.0.0.CR6-SNAPSHOT",




                "release-codename" =&amp;gt; "Kenny",




                "release-version" =&amp;gt; "2.0.0.CR6-SNAPSHOT",




                "schema-locations" =&amp;gt; [],




                "core-service" =&amp;gt; {




                    "host-environment" =&amp;gt; undefined,




                    "platform-mbean" =&amp;gt; undefined,




                    "management" =&amp;gt; undefined,




                    "discovery-options" =&amp;gt; undefined,




                    "ignored-resources" =&amp;gt; undefined,




                    "patching" =&amp;gt; undefined,




                    "module-loading" =&amp;gt; undefined




                },




                "extension" =&amp;gt; {"org.jboss.as.jmx" =&amp;gt; undefined},




                "interface" =&amp;gt; {




                    "management" =&amp;gt; undefined,




                    "public" =&amp;gt; undefined,




                    "unsecure" =&amp;gt; undefined




                },




                "jvm" =&amp;gt; {"default" =&amp;gt; undefined},




                "path" =&amp;gt; undefined,




                "server" =&amp;gt; {




                    "server-one" =&amp;gt; undefined,




                    "server-two" =&amp;gt; undefined,




                    "server-three" =&amp;gt; undefined




                },




                "server-config" =&amp;gt; {




                    "server-one" =&amp;gt; undefined,




                    "server-two" =&amp;gt; undefined,




                    "server-three" =&amp;gt; undefined




                },




                "socket-binding-group" =&amp;gt; undefined,




                "subsystem" =&amp;gt; {"jmx" =&amp;gt; undefined},




                "system-property" =&amp;gt; undefined




            }




        },




        {




            "address" =&amp;gt; [("host" =&amp;gt; "localhost")],




            "outcome" =&amp;gt; "success",




            "result" =&amp;gt; undefined




        }




    ]




}






When using a role that only selects the slave we get a proper access-control header






[domain@localhost:9990 /] /host=*:read-resource{roles=slave-maintainer}




{




    "outcome" =&amp;gt; "success",




    "result" =&amp;gt; [{




        "address" =&amp;gt; [("host" =&amp;gt; "localhost")],




        "outcome" =&amp;gt; "success",




        "result" =&amp;gt; undefined




    }],




    "response-headers" =&amp;gt; {"access-control" =&amp;gt; [{




        "absolute-address" =&amp;gt; [],




        "relative-address" =&amp;gt; [],




        "filtered-children-types" =&amp;gt; ["host"]




    }]}






The same output on master with WFCORE-994 applied:






[domain@localhost:9990 /] /host=*:read-resource{roles=slave-maintainer}




{




    "outcome" =&amp;gt; "success",




    "result" =&amp;gt; [{




        "address" =&amp;gt; [("host" =&amp;gt; "slave")],




        "outcome" =&amp;gt; "success",




        "result" =&amp;gt; {




            "directory-grouping" =&amp;gt; "by-server",




            "domain-controller" =&amp;gt; {"remote" =&amp;gt; {




                "protocol" =&amp;gt; undefined,




                "port" =&amp;gt; undefined,




                "host" =&amp;gt; undefined,




                "username" =&amp;gt; undefined,




                "ignore-unused-configuration" =&amp;gt; undefined,




                "admin-only-policy" =&amp;gt; undefined,




                "security-realm" =&amp;gt; "ManagementRealm"




            }},




            "management-major-version" =&amp;gt; 4,




            "management-micro-version" =&amp;gt; 0,




            "management-minor-version" =&amp;gt; 0,




            "master" =&amp;gt; false,




            "name" =&amp;gt; "slave",




            "namespaces" =&amp;gt; [],




            "organization" =&amp;gt; undefined,




            "product-name" =&amp;gt; undefined,




            "product-version" =&amp;gt; undefined,




            "release-codename" =&amp;gt; "Kenny",




            "release-version" =&amp;gt; "2.0.0.CR6-SNAPSHOT",




            "schema-locations" =&amp;gt; [],




            "core-service" =&amp;gt; {




                "host-environment" =&amp;gt; undefined,




                "platform-mbean" =&amp;gt; undefined,




                "management" =&amp;gt; undefined,




                "discovery-options" =&amp;gt; undefined,




                "ignored-resources" =&amp;gt; undefined,




                "patching" =&amp;gt; undefined,




                "module-loading" =&amp;gt; undefined




            },




            "extension" =&amp;gt; {"org.jboss.as.jmx" =&amp;gt; undefined},




            "interface" =&amp;gt; {




                "management" =&amp;gt; undefined,




                "public" =&amp;gt; undefined,




                "unsecure" =&amp;gt; undefined




            },




            "jvm" =&amp;gt; {"default" =&amp;gt; undefined},




            "path" =&amp;gt; undefined,




            "server" =&amp;gt; {




                "server-one" =&amp;gt; undefined,




                "server-two" =&amp;gt; undefined




            },




            "server-config" =&amp;gt; {




                "server-one" =&amp;gt; undefined,




                "server-two" =&amp;gt; undefined




            },




            "socket-binding-group" =&amp;gt; undefined,




            "subsystem" =&amp;gt; {"jmx" =&amp;gt; undefined},




            "system-property" =&amp;gt; undefined




        }




    }],




    "response-headers" =&amp;gt; {"access-control" =&amp;gt; [{




        "absolute-address" =&amp;gt; [],




        "relative-address" =&amp;gt; [],




        "filtered-children-types" =&amp;gt; ["host"]




    }]}




}






master-monitor should behave the same as slave-maintainer.</description>
			<version>2.0.0.CR5</version>
			<fixedVersion>2.0.0.CR7</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.test.integration.domain.rbac.ListRoleNamesTestCase.java</file>
			<file type="M">org.jboss.as.test.integration.domain.rbac.WildcardReadsTestCase.java</file>
			<file type="M">org.jboss.as.test.integration.domain.rbac.JmxRBACProviderHostScopedRolesTestCase.java</file>
			<file type="M">org.jboss.as.test.integration.domain.rbac.RBACProviderHostScopedRolesTestCase.java</file>
			<file type="M">org.jboss.as.test.integration.domain.rbac.AbstractHostScopedRolesTestCase.java</file>
			<file type="M">org.jboss.as.controller.operations.global.GlobalOperationHandlers.java</file>
		</fixedFiles>
	</bug>
	<bug id="1034" opendate="2015-10-06 11:06:06" fixdate="2015-10-06 16:01:04" resolution="Done">
		<buginformation>
			<summary>2 step domain operations do not resolve aliases properly</summary>
			<description>For WFLY-5290, WFCORE-1022 was done to provide more context, however we still have some problems when doing:






/profile=full-ha/subsystem=jgroups/stack=tcp/transport=TRANSPORT/thread-pool=default:write-attribute(name=keepalive-time,value=100)






This is an alias which should resolve to






/profile=full-ha/subsystem=jgroups/stack=tcp/transport=TCP/thread-pool=default:write-attribute(name=keepalive-time,value=100)






The equivalent works fine in a standalone. Debugging using CLI commands, the initial read-operation-description ends up in PrepareStepHandler.executeDirectOperation()
which does the right thing.
However the write-attribute call ends up in 






	OperationCoordinatorStepHandler.execute() -&amp;gt;




	OperationSlaveStepHandler.addSteps() -&amp;gt;




	HostControllerExecutionSupport returns a domainOp -&amp;gt;




	OperationSlaveStepHandler.addBasicStep()






and 	OperationSlaveStepHandler.addBasicStep() resolves the OperationEntry differently from the standard/standalone prepare step handler, and from how PrepareStepHandler.executeDirectOperation() resolves it.</description>
			<version>2.0.0.CR6</version>
			<fixedVersion>2.0.0.CR7</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.domain.controller.operations.coordination.OperationSlaveStepHandler.java</file>
		</fixedFiles>
		<links>
			<link type="Dependency" description="blocks">5290</link>
		</links>
	</bug>
	<bug id="916" opendate="2015-08-18 05:52:06" fixdate="2015-10-08 09:51:45" resolution="Done">
		<buginformation>
			<summary> Kerberos authentication into Management Console does not fallback correctly</summary>
			<description>Fallback management realm is not taken into account for Kerberos authentication into Management Console. In cases when Kerberos authentication to Management Console is configured also with fallback mechanism (properties, security-domain...) and one of:

realm in principal is not set correctly
path to keytab is not set correctly

is set in EAP configuration and when user with valid kerberos ticket tries to access Management Console then fallback is not taken into account and user cant access management console.</description>
			<version>2.0.0.Beta1</version>
			<fixedVersion>2.0.0.CR7</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.domain.management.logging.DomainManagementLogger.java</file>
			<file type="M">org.jboss.as.domain.management.security.KeytabService.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">730</link>
		</links>
	</bug>
	<bug id="997" opendate="2015-09-22 03:53:31" fixdate="2015-10-08 12:06:14" resolution="Done">
		<buginformation>
			<summary>Security realm using ldaps hangs forever during SSL handshake, when ldap server is killed</summary>
			<description>During failover testing we hit the problem of stuck thread. When ldap server is killed in particular time of ssl handshake EAP hangs and waits forever on response, which will never come. Causing thread to block forever. Same problem can be seen in LdapLoginModule using ldaps without specifying com.sun.jndi.ldap.connect.timeout value.
Possible solution is to add option to declare com.sun.jndi.ldap.connect.timeout for security realm and provide some default non-empty value, e.g. 15 seconds.</description>
			<version>2.0.0.CR3</version>
			<fixedVersion>2.0.0.CR7</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.domain.management.connections.ldap.ThreadLocalSSLSocketFactory.java</file>
			<file type="M">org.jboss.as.domain.management.security.WrapperSSLContext.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">1126</link>
			<link type="Related" description="is related to">290</link>
			<link type="Related" description="is related to">2214</link>
		</links>
	</bug>
	<bug id="1033" opendate="2015-10-03 19:19:28" fixdate="2015-10-08 13:48:26" resolution="Done">
		<buginformation>
			<summary>ManagedDatagramSocketBinding and ManagedMulticastSocketBinding throw NPE if created with bind address</summary>
			<description>





&amp;amp;amp#27;[0m&amp;amp;amp#27;[31m14:51:47,114 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-2) MSC000001: Failed to start service jboss.jgroups.channel.ee.connector: org.jboss.msc.service.StartException in service jboss.jgroups.channel.ee.connector: java.lang.NullPointerException




	at org.wildfly.clustering.jgroups.spi.service.ChannelConnectorBuilder.start(ChannelConnectorBuilder.java:96)




	at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1948)




	at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1881)




	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)




	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)




	at java.lang.Thread.run(Thread.java:745)




Caused by: java.lang.NullPointerException




	at org.jboss.as.network.ManagedMulticastSocketBinding.bind(ManagedMulticastSocketBinding.java:78)




	at java.net.MulticastSocket.&amp;lt;init&amp;gt;(MulticastSocket.java:172)




	at org.jboss.as.network.ManagedMulticastSocketBinding.&amp;lt;init&amp;gt;(ManagedMulticastSocketBinding.java:54)




	at org.jboss.as.network.ManagedMulticastSocketBinding.create(ManagedMulticastSocketBinding.java:40)




	at org.jboss.as.network.SocketBindingManagerImpl.createMulticastSocket(SocketBindingManagerImpl.java:82)




	at org.jboss.as.clustering.jgroups.ManagedSocketFactoryNew.createMulticastSocket(ManagedSocketFactoryNew.java:127)




	at org.jgroups.util.Util.createMulticastSocket(Util.java:3089)




	at org.jgroups.protocols.MPING.start(MPING.java:190)




	at org.jgroups.stack.ProtocolStack.startStack(ProtocolStack.java:965)




	at org.jgroups.JChannel.startStack(JChannel.java:890)




	at org.jgroups.JChannel._preConnect(JChannel.java:553)




	at org.jgroups.JChannel.connect(JChannel.java:288)




	at org.jgroups.JChannel.connect(JChannel.java:279)




	at org.wildfly.clustering.jgroups.spi.service.ChannelConnectorBuilder.start(ChannelConnectorBuilder.java:94)






This is because the MulticastSocket and DatagramSocket constructors call bind(...), but the ManagedBindingRegistry is not yet set.</description>
			<version>2.0.0.CR6</version>
			<fixedVersion>2.0.0.CR7</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.network.ManagedDatagramSocketBinding.java</file>
			<file type="M">org.jboss.as.network.ManagedMulticastSocketBinding.java</file>
		</fixedFiles>
		<links>
			<link type="Dependency" description="blocks">5449</link>
		</links>
	</bug>
	<bug id="1046" opendate="2015-10-09 13:39:35" fixdate="2015-10-09 13:45:50" resolution="Duplicate Issue">
		<buginformation>
			<summary>Show error message when accessing http management console of a slave host controller</summary>
			<description>WFCORE-678 removed the selection of the ConsoleMode.SLAVE_HC console, to show the message: "You may not access the admin console on this node, all access must come via the master host controller" when you tried to access a slave host controller console.
That was the default behavior when you enabled the http management interface on a slave host controller (to access it using JON for monitoring, for example).</description>
			<version>2.0.0.CR6</version>
			<fixedVersion>2.0.0.CR7</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.host.controller.operations.HttpManagementAddHandler.java</file>
		</fixedFiles>
		<links>
			<link type="Duplicate" description="duplicates">1043</link>
		</links>
	</bug>
	<bug id="1041" opendate="2015-10-07 22:21:34" fixdate="2015-10-15 11:10:19" resolution="Done">
		<buginformation>
			<summary>Domain controller does not prevent removing extensions with subsystems still registered</summary>
			<description>The main ExtensionRegistry (not the one for HC extensions) on a Host Controller does not detect if the user attempts to remove an extension that still has subsystems installed in the domain profiles.
Trying to do this will fail in domain rollout if the domain has any servers running that use the subsystems, but if there are no such servers (e.g. the DC is running in --admin-only), the remove op will incorrectly succeed. If the DC is then reloaded/restarted boot will fail when the parser encounters the subsystem.
The problem is at L328 of the ExtensionRegistry, 2nd line in the block below:






                for (String subsystem : subsystemNames) {




                    if (rootResource.getChild(PathElement.pathElement(ModelDescriptionConstants.SUBSYSTEM, subsystem)) != null) {




                        // Restore the data




                        extensions.put(moduleName, extension);




                        throw ControllerLogger.ROOT_LOGGER.removingExtensionWithRegisteredSubsystem(moduleName, subsystem);




                    }




                }






That path is only valid on a server or for a host extension.
The removeExtension method should be able to figure out if it is for the domain extension by checking 1) the processType field (to see if its an HC) and 2) the rootRegistration param passed to the method. If rootRegistration.getPathAddress().size() == 0, then its not a host extension registry.
Once that is known the scan for the subsystem can check through the profiles instead instead of assuming the subsystems are direct children of the rootResource param.</description>
			<version>1.0.2.Final</version>
			<fixedVersion></fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.extension.ExtensionRegistry.java</file>
		</fixedFiles>
		<links>
			<link type="Related" description="relates to">1042</link>
		</links>
	</bug>
	<bug id="1035" opendate="2015-10-01 12:24:37" fixdate="2015-10-16 08:47:34" resolution="Done">
		<buginformation>
			<summary>stop-embedded-host-controller command is not available in non-modular environment</summary>
			<description>stop-embedded-host-controller command for stopping the embed host controller instance is not available once the CLI is running in non-modular environment.






[pkremens@dhcp-10-40-5-17 client] $ java -jar jboss-cli-client.jar 




WARN: can&amp;amp;apos;t find jboss-cli.xml. Using default configuration values.




You are disconnected at the moment. Type &amp;amp;apos;connect&amp;amp;apos; to connect to the server or &amp;amp;apos;help&amp;amp;apos; for the list of supported commands.









[disconnected /] embed-host-controller --jboss-home=~/workspace/jboss-eap-7.0/           




Warning! The CLI is running in a non-modular environment and cannot load commands from management extensions.









[domain@embedded /] stop-embedded-host-controller




The command is not available in the current context (e.g. required subsystems or connection to the controller might be unavailable).









# only stop-embedded-server is available




[domain@embedded /] s




set  stop-embedded-server  









# stop-embedded-host-controller command should be used for this




[domain@embedded /] stop-embedded-server 




[disconnected /]





</description>
			<version>2.0.0.CR5</version>
			<fixedVersion>2.0.0.CR7</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.wildfly.core.embedded.EmbeddedServerReference.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">1198</link>
		</links>
	</bug>
	<bug id="1047" opendate="2015-10-09 22:33:16" fixdate="2015-10-16 08:50:46" resolution="Done">
		<buginformation>
			<summary>Rollback of undeploy and deployment remove will fail</summary>
			<description>This looks like a problem that&amp;amp;apos;s been around since Sept 2012.
The rollback handling in DeploymentHandlerUtil.undeploy and in DeploymentRemoveHandler both try to read the deployment&amp;amp;apos;s management name from the deployment resource, but since [1] it hasn&amp;amp;apos;t been stored there. So rollback will fail with something like this:






[Server:main-one] 15:58:54,894 ERROR [org.jboss.as.controller.management-operation] (ServerService Thread Pool -- 2) WFLYCTL0190: Step handler org.jboss.as.server.deployment.DeploymentHandlerUtil$5@2a0a9f3f for operation {"operation" =&amp;gt; "undeploy","address" =&amp;gt; [("deployment" =&amp;gt; "broken.jar")],"operation-headers" =&amp;gt; {}} at address [("deployment" =&amp;gt; "broken.jar")] failed handling operation rollback -- java.util.NoSuchElementException: No child &amp;amp;apos;name&amp;amp;apos; exists: java.util.NoSuchElementException: No child &amp;amp;apos;name&amp;amp;apos; exists




[Server:main-one] 	at org.jboss.dmr.ModelValue.requireChild(ModelValue.java:377) [jboss-dmr-1.3.0.Final.jar:1.3.0.Final]




[Server:main-one] 	at org.jboss.dmr.ObjectModelValue.requireChild(ObjectModelValue.java:299) [jboss-dmr-1.3.0.Final.jar:1.3.0.Final]




[Server:main-one] 	at org.jboss.dmr.ModelNode.require(ModelNode.java:870) [jboss-dmr-1.3.0.Final.jar:1.3.0.Final]




[Server:main-one] 	at org.jboss.as.server.deployment.DeploymentHandlerUtil$5$1.handleResult(DeploymentHandlerUtil.java:331) [wildfly-server-2.0.0.CR7-SNAPSHOT.jar:2.0.0.CR7-SNAPSHOT]




[Server:main-one] 	at org.jboss.as.controller.AbstractOperationContext$Step.invokeResultHandler(AbstractOperationContext.java:1384) [wildfly-controller-2.0.0.CR7-SNAPSHOT.jar:2.0.0.CR7-SNAPSHOT]




[Server:main-one] 	at org.jboss.as.controller.AbstractOperationContext$Step.handleResult(AbstractOperationContext.java:1366) [wildfly-controller-2.0.0.CR7-SNAPSHOT.jar:2.0.0.CR7-SNAPSHOT]




[Server:main-one] 	at org.jboss.as.controller.AbstractOperationContext$Step.finalizeInternal(AbstractOperationContext.java:1328) [wildfly-controller-2.0.0.CR7-SNAPSHOT.jar:2.0.0.CR7-SNAPSHOT]




[Server:main-one] 	at org.jboss.as.controller.AbstractOperationContext$Step.finalizeStep(AbstractOperationContext.java:1311) [wildfly-controller-2.0.0.CR7-SNAPSHOT.jar:2.0.0.CR7-SNAPSHOT]




[Server:main-one] 	at org.jboss.as.controller.AbstractOperationContext$Step.access$300(AbstractOperationContext.java:1185) [wildfly-controller-2.0.0.CR7-SNAPSHOT.jar:2.0.0.CR7-SNAPSHOT]




[Server:main-one] 	at org.jboss.as.controller.AbstractOperationContext.executeResultHandlerPhase(AbstractOperationContext.java:767) [wildfly-controller-2.0.0.CR7-SNAPSHOT.jar:2.0.0.CR7-SNAPSHOT]




[Server:main-one] 	at org.jboss.as.controller.AbstractOperationContext.executeDoneStage(AbstractOperationContext.java:753) [wildfly-controller-2.0.0.CR7-SNAPSHOT.jar:2.0.0.CR7-SNAPSHOT]




[Server:main-one] 	at org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:680) [wildfly-controller-2.0.0.CR7-SNAPSHOT.jar:2.0.0.CR7-SNAPSHOT]




[Server:main-one] 	at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:370) [wildfly-controller-2.0.0.CR7-SNAPSHOT.jar:2.0.0.CR7-SNAPSHOT]




[Server:main-one] 	at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1336) [wildfly-controller-2.0.0.CR7-SNAPSHOT.jar:2.0.0.CR7-SNAPSHOT]




[Server:main-one] 	at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:392) [wildfly-controller-2.0.0.CR7-SNAPSHOT.jar:2.0.0.CR7-SNAPSHOT]




[Server:main-one] 	at org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:217) [wildfly-controller-2.0.0.CR7-SNAPSHOT.jar:2.0.0.CR7-SNAPSHOT]




[Server:main-one] 	at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler.internalExecute(TransactionalProtocolOperationHandler.java:234) [wildfly-controller-2.0.0.CR7-SNAPSHOT.jar:2.0.0.CR7-SNAPSHOT]




[Server:main-one] 	at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler.doExecute(TransactionalProtocolOperationHandler.java:173) [wildfly-controller-2.0.0.CR7-SNAPSHOT.jar:2.0.0.CR7-SNAPSHOT]




[Server:main-one] 	at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler$1.run(TransactionalProtocolOperationHandler.java:136) [wildfly-controller-2.0.0.CR7-SNAPSHOT.jar:2.0.0.CR7-SNAPSHOT]




[Server:main-one] 	at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler$1.run(TransactionalProtocolOperationHandler.java:132) [wildfly-controller-2.0.0.CR7-SNAPSHOT.jar:2.0.0.CR7-SNAPSHOT]




[Server:main-one] 	at java.security.AccessController.doPrivileged(Native Method) [rt.jar:1.8.0_45]




[Server:main-one] 	at javax.security.auth.Subject.doAs(Subject.java:360) [rt.jar:1.8.0_45]




[Server:main-one] 	at org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:81) [wildfly-controller-2.0.0.CR7-SNAPSHOT.jar:2.0.0.CR7-SNAPSHOT]




[Server:main-one] 	at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler$2$1.run(TransactionalProtocolOperationHandler.java:152) [wildfly-controller-2.0.0.CR7-SNAPSHOT.jar:2.0.0.CR7-SNAPSHOT]




[Server:main-one] 	at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler$2$1.run(TransactionalProtocolOperationHandler.java:148) [wildfly-controller-2.0.0.CR7-SNAPSHOT.jar:2.0.0.CR7-SNAPSHOT]




[Server:main-one] 	at java.security.AccessController.doPrivileged(Native Method) [rt.jar:1.8.0_45]




[Server:main-one] 	at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler$2.execute(TransactionalProtocolOperationHandler.java:148) [wildfly-controller-2.0.0.CR7-SNAPSHOT.jar:2.0.0.CR7-SNAPSHOT]




[Server:main-one] 	at org.jboss.as.protocol.mgmt.AbstractMessageHandler$ManagementRequestContextImpl$1.doExecute(AbstractMessageHandler.java:364) [wildfly-protocol-2.0.0.CR7-SNAPSHOT.jar:2.0.0.CR7-SNAPSHOT]




[Server:main-one] 	at org.jboss.as.protocol.mgmt.AbstractMessageHandler$AsyncTaskRunner.run(AbstractMessageHandler.java:466) [wildfly-protocol-2.0.0.CR7-SNAPSHOT.jar:2.0.0.CR7-SNAPSHOT]




[Server:main-one] 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [rt.jar:1.8.0_45]




[Server:main-one] 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [rt.jar:1.8.0_45]




[Server:main-one] 	at java.lang.Thread.run(Thread.java:745) [rt.jar:1.8.0_45]




[Server:main-one] 	at org.jboss.threads.JBossThread.run(JBossThread.java:320) [jboss-threads-2.2.1.Final.jar:2.2.1.Final]






[1] https://github.com/wildfly/wildfly-core/commit/f38b37#diff-2dbd1fc9261de7a938948b642aa8d47dL153</description>
			<version>1.0.0.Final</version>
			<fixedVersion>2.0.0.CR7</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.server.deployment.DeploymentHandlerUtil.java</file>
			<file type="M">org.jboss.as.server.deployment.DeploymentUndeployHandler.java</file>
			<file type="M">org.jboss.as.server.deployment.DeploymentRemoveHandler.java</file>
		</fixedFiles>
	</bug>
	<bug id="1039" opendate="2015-10-07 17:13:27" fixdate="2015-10-19 18:48:35" resolution="Done">
		<buginformation>
			<summary>Intermittent failure in notification listener testing in org.jboss.as.jmx.rbac.JmxRbacEnabledTestCase</summary>
			<description>For a while we&amp;amp;apos;ve seen rare failures of JMX tests that look like this:






java.lang.RuntimeException: java.security.PrivilegedActionException: javax.management.ListenerNotFoundException: Unknown listener




    at org.jboss.as.jmx.rbac.JmxRbacTestCase.checkMBeanAccess(JmxRbacTestCase.java:484)




    at org.jboss.as.jmx.rbac.JmxRbacTestCase.testMonitorNonSensitiveMBeans(JmxRbacTestCase.java:219)




   ...




Caused by: java.security.PrivilegedActionException: null




    at java.security.AccessController.doPrivileged(Native Method)




    at javax.security.auth.Subject.doAs(Subject.java:422)




    at org.jboss.as.jmx.rbac.JmxRbacTestCase.checkMBeanAccess(JmxRbacTestCase.java:254)




    at org.jboss.as.jmx.rbac.JmxRbacTestCase.testMonitorNonSensitiveMBeans(JmxRbacTestCase.java:219)




   ...




Caused by: javax.management.ListenerNotFoundException: Unknown listener




    at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.removeNotificationListener(DefaultMBeanServerInterceptor.java:1339)




    at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.removeNotificationListener(DefaultMBeanServerInterceptor.java:1242)




    at com.sun.jmx.mbeanserver.JmxMBeanServer.removeNotificationListener(JmxMBeanServer.java:870)




    at org.jboss.as.jmx.PluggableMBeanServerImpl$TcclMBeanServer.removeNotificationListener(PluggableMBeanServerImpl.java:1544)




    at org.jboss.as.jmx.PluggableMBeanServerImpl.removeNotificationListener(PluggableMBeanServerImpl.java:969)




    at org.jboss.as.jmx.rbac.JmxRbacTestCase$1.run(JmxRbacTestCase.java:368)




    at org.jboss.as.jmx.rbac.JmxRbacTestCase$1.run(JmxRbacTestCase.java:254)




    at java.security.AccessController.doPrivileged(Native Method)




    at javax.security.auth.Subject.doAs(Subject.java:422)




    at org.jboss.as.jmx.rbac.JmxRbacTestCase.checkMBeanAccess(JmxRbacTestCase.java:254)




    at org.jboss.as.jmx.rbac.JmxRbacTestCase.testMonitorNonSensitiveMBeans(JmxRbacTestCase.java:219)






The problem is the TestModelMBean used by the test is not holding a ref to the "listenerWrapper" that the JVM MBeanServer passes into its addNotificationListener method. That allows that listenerWrapper to be gc&amp;amp;apos;d, resulting in the failure of the removeNotificationListener call on the next line of the test.
The test holding a ref to the listener doesn&amp;amp;apos;t matter, as it&amp;amp;apos;s a "listenerWrapper" object that matters.</description>
			<version>2.0.0.CR6</version>
			<fixedVersion>2.0.0.CR7</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.jmx.rbac.Bean.java</file>
			<file type="M">org.jboss.as.jmx.rbac.TestModelMBean.java</file>
		</fixedFiles>
	</bug>
	<bug id="1043" opendate="2015-10-08 05:05:51" fixdate="2015-10-19 18:49:33" resolution="Done">
		<buginformation>
			<summary>Show error message when accessing http management console of a slave host controller</summary>
			<description>WFCORE-678 removed the selection of the ConsoleMode.SLAVE_HC console, to show the message: "You may not access the admin console on this node, all access must come via the master host controller" when you tried to access a slave host controller console.
That was the default behavior when you enabled the http management interface on a slave host controller (to access it using JON for monitoring, for example).</description>
			<version>2.0.0.CR6</version>
			<fixedVersion>2.0.0.CR7</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.host.controller.operations.HttpManagementAddHandler.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned to">1362</link>
			<link type="Duplicate" description="is duplicated by">1046</link>
		</links>
	</bug>
	<bug id="1063" opendate="2015-10-20 10:48:47" fixdate="2015-10-20 20:22:24" resolution="Done">
		<buginformation>
			<summary>Creating named datagram socket throws ISE</summary>
			<description>The DatagramSocket createDatagramSocket(String name, SocketAddress address) method of org.jboss.as.network.SocketBindingManagerImpl creates a ManagedDatagramSocketBinding with a null name, yet registers the socket using the NamedManagedBindingRegistry.</description>
			<version>2.0.0.CR7</version>
			<fixedVersion>2.0.0.CR8</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.network.SocketBindingManager.java</file>
			<file type="M">org.jboss.as.network.SocketBindingManagerImpl.java</file>
		</fixedFiles>
		<links>
			<link type="Sequence" description="follows up on">5449</link>
		</links>
	</bug>
	<bug id="1064" opendate="2015-10-20 10:52:06" fixdate="2015-10-20 20:22:47" resolution="Done">
		<buginformation>
			<summary>Creating named multicast socket doesn&amp;apos;t properly register socket using name</summary>
			<description>I&amp;amp;apos;m not sure why this is, but the socket binding manager ignores the name of the multicast socket and registers the socket using the unnamed registry.</description>
			<version>2.0.0.CR7</version>
			<fixedVersion>2.0.0.CR8</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.network.SocketBindingManager.java</file>
			<file type="M">org.jboss.as.network.SocketBindingManagerImpl.java</file>
		</fixedFiles>
		<links>
			<link type="Sequence" description="follows up on">5449</link>
		</links>
	</bug>
	<bug id="1048" opendate="2015-10-12 07:29:13" fixdate="2015-10-20 20:37:16" resolution="Done">
		<buginformation>
			<summary>IOException from EmbeddedServerFactorySetupUnitTestCase on Windows</summary>
			<description>org.wildfly.core.embedded.EmbeddedServerFactorySetupUnitTestCase fails on Windows with






java.lang.IllegalStateException: WFLYEMB0020: Cannot setup embedded server




	at sun.nio.fs.WindowsException.translateToIOException(WindowsException.java:81)




	at sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:97)




	at sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:102)




	at sun.nio.fs.WindowsFileSystemProvider.createDirectory(WindowsFileSystemProvider.java:504)




	at java.nio.file.Files.createDirectory(Files.java:674)




	at org.wildfly.core.embedded.EmbeddedStandaloneServerFactory.getTempRoot(EmbeddedStandaloneServerFactory.java:178)




	at org.wildfly.core.embedded.EmbeddedStandaloneServerFactory.setupCleanDirectories(EmbeddedStandaloneServerFactory.java:107)




	at org.wildfly.core.embedded.EmbeddedServerFactorySetupUnitTestCase.testServerOverrideAndDataAndConfigOverride(EmbeddedServerFactorySetupUnitTestCase.java:112)






Reproducer job running against the latest core bits https://jenkins.mw.lab.eng.bos.redhat.com/hudson/job/eap-7x-core-embedded-windows-reproducer/
I am able to reproduce locally on my VM host, however test doesn&amp;amp;apos;t seem to throw the exception on regular basis (see #4, where build on w2k12 passed (same slave for w2k12 as for #3))</description>
			<version>2.0.0.CR6</version>
			<fixedVersion>2.0.0.CR8</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.wildfly.core.embedded.EmbeddedStandaloneServerFactory.java</file>
			<file type="M">org.wildfly.core.embedded.EmbeddedServerFactorySetupUnitTestCase.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">1364</link>
		</links>
	</bug>
	<bug id="1062" opendate="2015-10-20 09:33:46" fixdate="2015-10-22 13:43:41" resolution="Done">
		<buginformation>
			<summary>Deployments from the domain/data/content folder goes missing after few minutes if the Host controller is started with --backup option.</summary>
			<description>Host controller started with --backup option deletes the deployments from the domain/data/content folder after approximately 10 mins. 
The deployment is restored or recreated if the HostController is started. 
Version-Release number of selected component (if applicable): 6.4.x
How reproducible:
Steps to Reproduce:
1. Setup domaincontroller 
2. Setup hostcontroller 
3. Start domaincontroller 
4. Start hostcontroller with --backup option.
5. deploy an application using cli or admin console
./jboss-cli.sh --connect --controller=x.x.x.x:9999 --command=&amp;amp;apos;deploy /PathToApp/App.war --server-groups=main-server-group&amp;amp;apos;
6. deployments are available under $JBOSS_HOME/domain/data/content
7. Wait for approximately 10 minutes
8. Cached deployments are deleted on hostcontroller (domain/data/content is empty). Following is the logging seen on the console :
++++++++++++++
[Host Controller] 14:20:40,439 INFO  [org.jboss.as.repository] (Host Controller Service Threads - 4) JBAS014903: Content /NotBackedUp/JAR-Folder/EAPs/EAP6/jboss-eap-6.4.3-Patched/domain/data/content/47/1108a27fa1b82e6a92fb56ee25bc76f2625249 is obsolete and will be removed
[Host Controller] 14:20:40,440 INFO  [org.jboss.as.repository] (Host Controller Service Threads - 4) JBAS014901: Content removed from location /NotBackedUp/JAR-Folder/EAPs/EAP6/jboss-eap-6.4.3-Patched/domain/data/content/47/1108a27fa1b82e6a92fb56ee25bc76f2625249/content
++++++++++++++
9. After restarting the Host Controller, the deployment is restored and the cached deployment can now be seen under the Host Controller&amp;amp;apos;s domain/data/content folder.
Actual results: Deployment folder form domain/data/content folder gets deleted after approx 10 mins and are restored if the Host Controller is restarted
Expected results: The cached deplpyments folder should never be removed from the HostController&amp;amp;apos;s domain/data/content folder.  
Additional info: This does not affect the availability of the application since the applications are also availbale with the assigned server&amp;amp;apos;s under their data/content folder.</description>
			<version>2.0.0.CR7</version>
			<fixedVersion>2.0.0.CR8</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.domain.controller.resources.DomainDeploymentResourceDefinition.java</file>
			<file type="M">org.jboss.as.domain.controller.operations.deployment.DeploymentAddHandler.java</file>
			<file type="M">org.jboss.as.controller.persistence.FilePersistenceUtils.java</file>
			<file type="M">org.jboss.as.server.deployment.ContentCleanerService.java</file>
			<file type="M">org.jboss.as.repository.ContentRepository.java</file>
		</fixedFiles>
		<links>
			<link type="Causality" description="causes">1561</link>
		</links>
	</bug>
	<bug id="989" opendate="2015-09-19 03:11:07" fixdate="2015-10-23 17:03:25" resolution="Done">
		<buginformation>
			<summary>Premature registration of reconnecting server</summary>
			<description>ServerInventoryImpl.reconnectServer is registering the ProxyController for the reconnecting server with the DomainModelControllerService. The problem is that ProxyController is not yet in a state where it can forward requests to the server. That won&amp;amp;apos;t happen until the server calls back with a DomainServerProtocol.SERVER_RECONNECT_REQUEST and the ServerToHostProtocolHandler.ServerReconnectRequestHandler handles it. The effect is if a request for the server comes in during this window, it will fail. If that request is part of a domain operation rollout (because during the window the HC regarded the server as &amp;amp;apos;live&amp;amp;apos; and instructed the DC to send rollout ops to it), then the domain rollout will be affected. This happened in the testsuite failure I just saw. Most significant logging is as follows:






2015-09-18 17:59:32,229 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0025: WildFly Core 2.0.0.CR2-SNAPSHOT "Kenny" (Host Controller) started in 93ms - Started 48 of 51 services (15 services are lazy, passive or on-demand)




2015-09-18 17:59:32,247 INFO  [org.jboss.as.controller.management-operation] (Remoting "slave:MANAGEMENT" task-16) Initialized for 1849055188




2015-09-18 17:59:32,247 INFO  [org.jboss.as.host.controller] (Remoting "slave:MANAGEMENT" task-14) WFLYHC0021: Server [Server:main-three] connected using connection [Channel ID 08aa200b (inbound) of Remoting connection 27e3d90d to /127.0.0.1:49272]




2015-09-18 17:59:32,247 INFO  [org.jboss.as.host.controller] (Remoting "slave:MANAGEMENT" task-15) WFLYHC0021: Server [Server:other-two] connected using connection [Channel ID 02bd2646 (inbound) of Remoting connection 64a8b7f2 to /127.0.0.1:49273]




2015-09-18 17:59:32,247 INFO  [org.jboss.as.controller.management-operation] (Host Controller Service Threads - 34) Initialized for 1849055188




2015-09-18 17:59:32,252 INFO  [org.jboss.as.controller.management-operation] (Host Controller Service Threads - 34) sending prepared response for 1849055188  --- interrupted: false




2015-09-18 17:59:32,254 INFO  [org.jboss.as.controller.management-operation] (Remoting "slave:MANAGEMENT" task-1) Initialized for 1933145457




2015-09-18 17:59:32,254 INFO  [org.jboss.as.controller.management-operation] (Remoting "slave:MANAGEMENT" task-1) Initialized for 481103151




2015-09-18 17:59:32,254 INFO  [org.jboss.as.controller.management-operation] (Host Controller Service Threads - 36) Initialized for 1933145457




2015-09-18 17:59:32,254 INFO  [org.jboss.as.controller.management-operation] (Host Controller Service Threads - 37) Initialized for 481103151




2015-09-18 17:59:32,255 INFO  [org.jboss.as.controller.management-operation] (Host Controller Service Threads - 36) sending pre-prepare failed response for 1933145457  --- interrupted: false




2015-09-18 17:59:32,256 INFO  [org.jboss.as.controller.management-operation] (Host Controller Service Threads - 37) sending pre-prepare failed response for 481103151  --- interrupted: false






The HC completes boot. Then servers main-three and other-two register. The HC sends a prepared response to a request. This is the host rollout request to the slave from the DC with the response being the ops to invoke on the servers. The HC reports sending a "pre-prepare failed response" to two requests. These are the requests the DC has asked it to proxy to the servers.
The result of all this for the client is the following failure of a management op:






Failed operation:




{




    "operation" =&amp;gt; "add",




    "address" =&amp;gt; [("extension" =&amp;gt; "org.jboss.as.test.hc.extension")]




}




Response:




{




    "outcome" =&amp;gt; "failed",




    "result" =&amp;gt; undefined,




    "failure-description" =&amp;gt; {"WFLYDC0074: Operation failed or was rolled back on all servers. Server failures:" =&amp;gt; {"server-group" =&amp;gt; {




        "main-server-group" =&amp;gt; {"host" =&amp;gt; {"slave" =&amp;gt; {"main-three" =&amp;gt; "WFLYHC0153: Channel closed"}}},




        "other-server-group" =&amp;gt; {"host" =&amp;gt; {"slave" =&amp;gt; {"other-two" =&amp;gt; "WFLYHC0153: Channel closed"}}}




    }}},




    "rolled-back" =&amp;gt; true,




    "server-groups" =&amp;gt; {




        "main-server-group" =&amp;gt; {"host" =&amp;gt; {




            "master" =&amp;gt; {"main-one" =&amp;gt; {"response" =&amp;gt; {




                "outcome" =&amp;gt; "failed",




                "result" =&amp;gt; [("HC" =&amp;gt; "1.1.1")],




                "rolled-back" =&amp;gt; true




            }}},




            "slave" =&amp;gt; {"main-three" =&amp;gt; {"response" =&amp;gt; {




                "outcome" =&amp;gt; "failed",




                "result" =&amp;gt; undefined,




                "failure-description" =&amp;gt; "WFLYHC0153: Channel closed",




                "rolled-back" =&amp;gt; true




            }}}




        }},




        "other-server-group" =&amp;gt; {"host" =&amp;gt; {"slave" =&amp;gt; {"other-two" =&amp;gt; {"response" =&amp;gt; {




            "outcome" =&amp;gt; "failed",




            "result" =&amp;gt; undefined,




            "failure-description" =&amp;gt; "WFLYHC0153: Channel closed",




            "rolled-back" =&amp;gt; true




        }}}}}




    }




}






The "WFLYHC0153: Channel closed" failure is what is produced when an attempt is made to invoke on a disconnected proxy controller.</description>
			<version>2.0.0.CR1</version>
			<fixedVersion>2.0.0.CR8</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.host.controller.ServerInventoryImpl.java</file>
			<file type="M">org.jboss.as.host.controller.mgmt.ServerToHostProtocolHandler.java</file>
		</fixedFiles>
	</bug>
	<bug id="1002" opendate="2015-09-22 21:22:02" fixdate="2015-10-23 17:04:01" resolution="Done">
		<buginformation>
			<summary>TransactionalProtocolOperationHandler.AbortOperationHandler must initialize the ExecuteRequestContext before responding</summary>
			<description>If in a race a COMPLETE_TX_REQUEST cancelling an op is processed by a server/slave HC before the original EXECUTE_TX_REQUEST is processed, when the EXECUTE_TX_REQUEST comes in the AbortOperationHandler attempts to respond with a "outcome"=&amp;gt;"cancelled" response. This will fail because the ExecutionRequestContext will not be initialized.
In this situation the AbortOperationHandler should initialize the ERC.
With assertions enabled, this appears in the log:






20:58:47,947 ERROR [stderr] (Remoting "slave:main-three:MANAGEMENT" task-6) Exception in thread "Remoting "slave:main-three:MANAGEMENT" task-6" java.lang.AssertionError









20:58:47,947 ERROR [stderr] (Remoting "slave:main-three:MANAGEMENT" task-6) 	at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestContext.failed(TransactionalProtocolOperationHandler.java:458)









20:58:47,948 ERROR [stderr] (Remoting "slave:main-three:MANAGEMENT" task-6) 	at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$AbortOperationHandler.handleRequest(TransactionalProtocolOperationHandler.java:275)









20:58:47,948 ERROR [stderr] (Remoting "slave:main-three:MANAGEMENT" task-6) 	at org.jboss.as.protocol.mgmt.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:270)









20:58:47,948 ERROR [stderr] (Remoting "slave:main-three:MANAGEMENT" task-6) 	at org.jboss.as.protocol.mgmt.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:252)









20:58:47,948 ERROR [stderr] (Remoting "slave:main-three:MANAGEMENT" task-6) 	at org.jboss.as.protocol.mgmt.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:123)









20:58:47,949 ERROR [stderr] (Remoting "slave:main-three:MANAGEMENT" task-6) 	at org.jboss.as.protocol.mgmt.ManagementChannelReceiver$1.handleMessage(ManagementChannelReceiver.java:56)









20:58:47,949 ERROR [stderr] (Remoting "slave:main-three:MANAGEMENT" task-6) 	at org.jboss.as.protocol.mgmt.ManagementChannelReceiver.handleMessage(ManagementChannelReceiver.java:85)









20:58:47,949 ERROR [stderr] (Remoting "slave:main-three:MANAGEMENT" task-6) 	at org.jboss.remoting3.remote.RemoteConnectionChannel$5.run(RemoteConnectionChannel.java:451)









20:58:47,949 ERROR [stderr] (Remoting "slave:main-three:MANAGEMENT" task-6) 	at org.jboss.remoting3.EndpointImpl$TrackingExecutor$1.run(EndpointImpl.java:705)









20:58:47,950 ERROR [stderr] (Remoting "slave:main-three:MANAGEMENT" task-6) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)









20:58:47,950 ERROR [stderr] (Remoting "slave:main-three:MANAGEMENT" task-6) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)









20:58:47,950 ERROR [stderr] (Remoting "slave:main-three:MANAGEMENT" task-6) 	at java.lang.Thread.run(Thread.java:745)






Without assertions, a few lines later a call to sendResponse will result in an NPE.</description>
			<version>2.0.0.CR3</version>
			<fixedVersion>2.0.0.CR8</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.remote.TransactionalProtocolOperationHandler.java</file>
		</fixedFiles>
	</bug>
	<bug id="1016" opendate="2015-09-27 21:35:18" fixdate="2015-10-23 17:05:02" resolution="Done">
		<buginformation>
			<summary>NPE or AssertionError if op is cancelled on slave between sending prepare and receiving commit/rollback</summary>
			<description>OperationCancellationTestCase showed this failure:






2015-09-23 06:43:40,147 INFO  [org.jboss.as.test.integration.management.extension.blocker.BlockerExtension] (Host Controller Service Threads - 82) block requested by testSlaveBlockCompletionCancelSlave for slave/undefined(COMMIT)




2015-09-23 06:43:40,147 INFO  [org.jboss.as.test.integration.management.extension.blocker.BlockerExtension] (Host Controller Service Threads - 82) will block at COMMIT for 20000




2015-09-23 06:43:40,164 INFO  [org.jboss.as.controller.management-operation] (Host Controller Service Threads - 71) WFLYCTL0352: Cancelling operation &amp;amp;apos;block&amp;amp;apos; with id &amp;amp;apos;1900489784&amp;amp;apos; running on thread &amp;amp;apos;Host Controller Service Threads - 82&amp;amp;apos;




2015-09-23 06:43:40,185 ERROR [stderr] (Host Controller Service Threads - 82) Exception in thread "Host Controller Service Threads - 82" java.lang.AssertionError




2015-09-23 06:43:40,185 ERROR [stderr] (Host Controller Service Threads - 82) 	at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestContext.completed(TransactionalProtocolOperationHandler.java:475)




2015-09-23 06:43:40,186 ERROR [stderr] (Host Controller Service Threads - 82) 	at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler.doExecute(TransactionalProtocolOperationHandler.java:190)




2015-09-23 06:43:40,186 ERROR [stderr] (Host Controller Service Threads - 82) 	at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler$1.run(TransactionalProtocolOperationHandler.java:136)




2015-09-23 06:43:40,186 ERROR [stderr] (Host Controller Service Threads - 82) 	at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler$1.run(TransactionalProtocolOperationHandler.java:132)




2015-09-23 06:43:40,186 ERROR [stderr] (Host Controller Service Threads - 82) 	at java.security.AccessController.doPrivileged(Native Method)




2015-09-23 06:43:40,186 ERROR [stderr] (Host Controller Service Threads - 82) 	at javax.security.auth.Subject.doAs(Subject.java:360)




2015-09-23 06:43:40,186 ERROR [stderr] (Host Controller Service Threads - 82) 	at org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:81)




2015-09-23 06:43:40,186 ERROR [stderr] (Host Controller Service Threads - 82) 	at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler$2$1.run(TransactionalProtocolOperationHandler.java:152)




2015-09-23 06:43:40,186 ERROR [stderr] (Host Controller Service Threads - 82) 	at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler$2$1.run(TransactionalProtocolOperationHandler.java:148)




2015-09-23 06:43:40,187 ERROR [stderr] (Host Controller Service Threads - 82) 	at java.security.AccessController.doPrivileged(Native Method)




2015-09-23 06:43:40,187 ERROR [stderr] (Host Controller Service Threads - 82) 	at org.jboss.as.controller.remote.TransactionalProtocolOperationHandler$ExecuteRequestHandler$2.execute(TransactionalProtocolOperationHandler.java:148)




2015-09-23 06:43:40,187 ERROR [stderr] (Host Controller Service Threads - 82) 	at org.jboss.as.protocol.mgmt.AbstractMessageHandler$2$1.doExecute(AbstractMessageHandler.java:299)




2015-09-23 06:43:40,187 ERROR [stderr] (Host Controller Service Threads - 82) 	at org.jboss.as.protocol.mgmt.AbstractMessageHandler$AsyncTaskRunner.run(AbstractMessageHandler.java:519)




2015-09-23 06:43:40,187 ERROR [stderr] (Host Controller Service Threads - 82) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)




2015-09-23 06:43:40,187 ERROR [stderr] (Host Controller Service Threads - 82) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)




2015-09-23 06:43:40,187 ERROR [stderr] (Host Controller Service Threads - 82) 	at java.lang.Thread.run(Thread.java:745)




2015-09-23 06:43:40,187 ERROR [stderr] (Host Controller Service Threads - 82) 	at org.jboss.threads.JBossThread.run(JBossThread.java:320)






What happens here is the slave HC executing the &amp;amp;apos;block&amp;amp;apos; op has sent a prepare message to the master, and then when the commit has not come back yet the test driver triggers a cancel on the slave. At this point the thread running the &amp;amp;apos;block&amp;amp;apos; op returns and tries to send the final result to the master. But it fails because the prepare logic has nulled out the responseChannel field, and the commit message has not arrived yet to restore a new one.
If assertions weren&amp;amp;apos;t enabled, the result would be an NPE when the null responseChannel is used.
I don&amp;amp;apos;t see any reason for null out the responseChannel.</description>
			<version>2.0.0.CR5</version>
			<fixedVersion>2.0.0.CR8</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.remote.TransactionalProtocolOperationHandler.java</file>
		</fixedFiles>
	</bug>
	<bug id="1081" opendate="2015-10-27 12:43:45" fixdate="2015-10-29 00:18:35" resolution="Done">
		<buginformation>
			<summary>IllegalStateException when shutting down the server started with default standalone-full-ha.xml</summary>
			<description>When I start WildFly 10.0.0.CR4 with default standalone-full-ha.xml configuration and then shut it down, I&amp;amp;apos;ll get following ERROR in the server log:






09:18:19,143 ERROR [org.jgroups.JChannel] (MSC service thread 1-2) JGRP000020: failed destroying the protocol stack: java.lang.IllegalStateException




	at org.jboss.as.network.SocketBindingManagerImpl$UnnamedRegistryImpl.unregisterBinding(SocketBindingManagerImpl.java:501)




	at org.jboss.as.network.ManagedDatagramSocketBinding.close(ManagedDatagramSocketBinding.java:73)




	at org.jboss.as.clustering.jgroups.ManagedSocketFactory.close(ManagedSocketFactory.java:148)




	at org.jgroups.protocols.UDP.closeUnicastSocket(UDP.java:577)




	at org.jgroups.protocols.UDP.destroySockets(UDP.java:429)




	at org.jgroups.protocols.UDP.destroy(UDP.java:294)




	at org.jgroups.stack.ProtocolStack.destroy(ProtocolStack.java:887)




	at org.jgroups.JChannel.stopStack(JChannel.java:1005)




	at org.jgroups.JChannel._close(JChannel.java:990)




	at org.jgroups.JChannel.close(JChannel.java:385)




	at org.wildfly.clustering.jgroups.spi.service.ChannelBuilder.stop(ChannelBuilder.java:91)




	at org.jboss.msc.service.ServiceControllerImpl$StopTask.stopService(ServiceControllerImpl.java:2056)




	at org.jboss.msc.service.ServiceControllerImpl$StopTask.run(ServiceControllerImpl.java:2017)




	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)




	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)




	at java.lang.Thread.run(Thread.java:745)






This is regression from CR3 build and might be related to fix for https://issues.jboss.org/browse/WFCORE-1033</description>
			<version>2.0.0.CR8</version>
			<fixedVersion>2.0.0.CR9</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.network.ManagedDatagramSocketBinding.java</file>
			<file type="M">org.jboss.as.network.ManagedMulticastSocketBinding.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">1657</link>
		</links>
	</bug>
	<bug id="993" opendate="2015-09-21 11:29:38" fixdate="2015-10-29 04:17:22" resolution="Done">
		<buginformation>
			<summary>Reload command on embed-host-controller fails</summary>
			<description>Reload operation on embed-host-controller gives me an error.






[disconnected /] embed-host-controller 




[domain@embedded /] reload --host=master




13:25:30,019 INFO  [org.jboss.as] (MSC service thread 1-1) WFLYSRV0050: EAP 7.0.0.Alpha1 (WildFly Core 2.0.0.CR1) stopped in 6ms




13:25:30,020 INFO  [org.jboss.as] (MSC service thread 1-4) WFLYSRV0049: EAP 7.0.0.Alpha1 (WildFly Core 2.0.0.CR1) starting




13:25:30,115 ERROR [org.jboss.as.controller] (AeshProcess: 2) WFLYCTL0369: Required capabilities are not available:




    org.wildfly.domain.server-group.main-server-group in context &amp;amp;apos;server-config&amp;amp;apos;; There are no known registration points which can provide this capability.




    org.wildfly.domain.server-group.main-server-group in context &amp;amp;apos;server-config&amp;amp;apos;; There are no known registration points which can provide this capability.




    org.wildfly.domain.server-group.other-server-group in context &amp;amp;apos;server-config&amp;amp;apos;; There are no known registration points which can provide this capability.




13:25:30,138 INFO  [org.jboss.as.controller.management-deprecated] (Controller Boot Thread) WFLYCTL0028: Attribute &amp;amp;apos;enabled&amp;amp;apos; in the resource at address &amp;amp;apos;/profile=default/subsystem=datasources/data-source=ExampleDS&amp;amp;apos; is deprecated, and may be removed in future version. See the attribute description in the output of the read-resource-description operation to learn more about the deprecation.




13:25:30,150 INFO  [org.jboss.as.controller.management-deprecated] (Controller Boot Thread) WFLYCTL0028: Attribute &amp;amp;apos;enabled&amp;amp;apos; in the resource at address &amp;amp;apos;/profile=ha/subsystem=datasources/data-source=ExampleDS&amp;amp;apos; is deprecated, and may be removed in future version. See the attribute description in the output of the read-resource-description operation to learn more about the deprecation.




13:25:30,166 INFO  [org.jboss.as.controller.management-deprecated] (Controller Boot Thread) WFLYCTL0028: Attribute &amp;amp;apos;enabled&amp;amp;apos; in the resource at address &amp;amp;apos;/profile=full/subsystem=datasources/data-source=ExampleDS&amp;amp;apos; is deprecated, and may be removed in future version. See the attribute description in the output of the read-resource-description operation to learn more about the deprecation.




13:25:30,167 ERROR [org.jboss.as.controller] (AeshProcess: 2) WFLYCTL0369: Required capabilities are not available:




    org.wildfly.domain.server-group.main-server-group in context &amp;amp;apos;server-config&amp;amp;apos;; There are no known registration points which can provide this capability.




    org.wildfly.domain.server-group.main-server-group in context &amp;amp;apos;server-config&amp;amp;apos;; There are no known registration points which can provide this capability.




    org.wildfly.network.socket-binding.jgroups-mping in context &amp;amp;apos;profile=ha&amp;amp;apos;; There are no known registration points which can provide this capability.




    org.wildfly.network.socket-binding.jgroups-udp-fd in context &amp;amp;apos;profile=ha&amp;amp;apos;; There are no known registration points which can provide this capability.




    org.wildfly.network.socket-binding.http in context &amp;amp;apos;profile=ha&amp;amp;apos;; There are no known registration points which can provide this capability.




    org.wildfly.network.socket-binding.jgroups-tcp in context &amp;amp;apos;profile=ha&amp;amp;apos;; There are no known registration points which can provide this capability.




    org.wildfly.network.socket-binding.jgroups-tcp-fd in context &amp;amp;apos;profile=ha&amp;amp;apos;; There are no known registration points which can provide this capability.




    org.wildfly.network.socket-binding.http in context &amp;amp;apos;profile=default&amp;amp;apos;; There are no known registration points which can provide this capability.




    org.wildfly.network.socket-binding.ajp in context &amp;amp;apos;profile=ha&amp;amp;apos;; There are no known registration points which can provide this capability.




    org.wildfly.network.socket-binding.jgroups-udp in context &amp;amp;apos;profile=ha&amp;amp;apos;; There are no known registration points which can provide this capability.




    org.wildfly.domain.server-group.other-server-group in context &amp;amp;apos;server-config&amp;amp;apos;; There are no known registration points which can provide this capability.




13:25:30,178 INFO  [org.jboss.as.controller.management-deprecated] (Controller Boot Thread) WFLYCTL0028: Attribute &amp;amp;apos;enabled&amp;amp;apos; in the resource at address &amp;amp;apos;/profile=full-ha/subsystem=datasources/data-source=ExampleDS&amp;amp;apos; is deprecated, and may be removed in future version. See the attribute description in the output of the read-resource-description operation to learn more about the deprecation.




13:25:30,196 ERROR [org.jboss.as.controller] (Controller Boot Thread) WFLYCTL0362: Capabilities required by resource &amp;amp;apos;/server-group=main-server-group&amp;amp;apos; are not available:




    org.wildfly.domain.profile.full in context &amp;amp;apos;server-groups&amp;amp;apos;; There are no known registration points which can provide this capability.




13:25:30,198 FATAL [org.jboss.as.host.controller] (Controller Boot Thread) WFLYHC0034: Host Controller boot has failed in an unrecoverable manner; exiting. See previous messages for details.




13:25:30,204 ERROR [org.jboss.as.protocol] (Thread-2) WFLYPRT0003: Failed to close resource org.jboss.as.cli.embedded.ThreadContextsModelControllerClient@713124ae: java.lang.IllegalStateException: WFLYEMB0023: The embedded server is stopping and invocations on the ModelControllerClient are not available




	at org.wildfly.core.embedded.EmbeddedHostControllerFactory$HostControllerImpl.getActiveModelControllerClient(EmbeddedHostControllerFactory.java:331)




	at org.wildfly.core.embedded.EmbeddedHostControllerFactory$HostControllerImpl.access$200(EmbeddedHostControllerFactory.java:225)




	at org.wildfly.core.embedded.EmbeddedHostControllerFactory$HostControllerImpl$3.getDelegate(EmbeddedHostControllerFactory.java:309)




	at org.jboss.as.controller.client.helpers.DelegatingModelControllerClient.close(DelegatingModelControllerClient.java:103)




	at org.jboss.as.cli.embedded.ThreadContextsModelControllerClient.close(ThreadContextsModelControllerClient.java:139)




	at org.jboss.as.protocol.StreamUtils.safeClose(StreamUtils.java:66)




	at org.jboss.as.cli.impl.CommandContextImpl.disconnectController(CommandContextImpl.java:1181)




	at org.jboss.as.cli.impl.CommandContextImpl.terminateSession(CommandContextImpl.java:812)




	at org.jboss.as.cli.impl.CommandContextImpl$1.shutdown(CommandContextImpl.java:370)




	at org.jboss.as.cli.impl.CliShutdownHook$1.run(CliShutdownHook.java:50)




	at java.lang.Thread.run(Thread.java:745)









13:25:30,215 INFO  [org.jboss.as] (MSC service thread 1-1) WFLYSRV0050: EAP 7.0.0.Alpha1 (WildFly Core 2.0.0.CR1) stopped in 11ms





</description>
			<version>2.0.0.CR1</version>
			<fixedVersion>2.0.0.CR9</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.cli.handlers.ReloadHandler.java</file>
			<file type="M">org.wildfly.core.embedded.EmbeddedHostControllerFactory.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">1120</link>
		</links>
	</bug>
	<bug id="1075" opendate="2015-10-25 22:12:03" fixdate="2015-10-30 00:32:01" resolution="Done">
		<buginformation>
			<summary>Deploying a file results in HC logging "WFLYCTL0019: Graceful shutdown" warn on shutdown or reload</summary>
			<description>Host Controllers frequently take 15 seconds to shutdown and reload, logging the following after a 15s pause:






WFLYCTL0019: Graceful shutdown of the handler used for native management requests did not complete within [15000] ms but shutdown of the underlying communication channel is proceeding






This is because MasterDomainControllerOperationHandlerImpl and ServerToHostProtocolHandler both handle a GET_FILE_REQUEST by registering an ActiveOperation with ActiveOperationSupport, but then the GetFileOperation handlers for the request never call "done" or "failed" on the ActiveOperation.ResultHandler. The activeRequests map in the ActiveOperationSupport therefore ends up with extraneous data resulting in the shutdown delay.
This is also a minor memory leak.</description>
			<version>2.0.0.CR8</version>
			<fixedVersion>2.0.0.Final</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.host.controller.mgmt.MasterDomainControllerOperationHandlerImpl.java</file>
			<file type="M">org.jboss.as.domain.http.server.ManagementHttpRequestProcessor.java</file>
			<file type="M">org.jboss.as.protocol.mgmt.ActiveOperationSupport.java</file>
			<file type="M">org.jboss.as.host.controller.mgmt.ServerToHostProtocolHandler.java</file>
			<file type="M">org.jboss.as.repository.RemoteFileRequestAndHandler.java</file>
		</fixedFiles>
	</bug>
	<bug id="1086" opendate="2015-10-29 17:10:41" fixdate="2015-10-30 00:33:10" resolution="Done">
		<buginformation>
			<summary>ManagementResourceRegistration.getCapabilities() does not account for override models</summary>
			<description>ManagementResourceRegistration.getCapabilities() is implemented by simply reading the local state of ConcreteResourceRegistration. It needs to work like getAttributeNames(), by delegating to the root node which in turn uses NodeSubregistry to combine data from any singleton override registration and the corresponding wildcard registration.</description>
			<version>2.0.0.CR9</version>
			<fixedVersion>2.0.0.Final</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.registry.NodeSubregistry.java</file>
			<file type="M">org.jboss.as.controller.registry.ConcreteResourceRegistration.java</file>
			<file type="M">org.jboss.as.controller.registry.AliasResourceRegistration.java</file>
			<file type="M">org.jboss.as.controller.registry.AbstractResourceRegistration.java</file>
			<file type="M">org.jboss.as.controller.registry.ProxyControllerRegistration.java</file>
		</fixedFiles>
		<links>
			<link type="Causality" description="causes">5601</link>
			<link type="Cloners" description="cloned to">1087</link>
		</links>
	</bug>
	<bug id="1087" opendate="2015-10-29 17:23:13" fixdate="2015-10-30 00:33:28" resolution="Done">
		<buginformation>
			<summary>ManagementResourceRegistration.getOrderedChildTypes() does not account for override models</summary>
			<description>ManagementResourceRegistration.getOrderedChildTypes() is implemented by simply reading the local state of ConcreteResourceRegistration. It needs to work like getAttributeNames(), by delegating to the root node which in turn uses NodeSubregistry to combine data from any singleton override registration and the corresponding wildcard registration.
Same kind of problem as WFCORE-1086.</description>
			<version>2.0.0.CR9</version>
			<fixedVersion>2.0.0.Final</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.registry.NodeSubregistry.java</file>
			<file type="M">org.jboss.as.controller.registry.ConcreteResourceRegistration.java</file>
			<file type="M">org.jboss.as.controller.registry.AliasResourceRegistration.java</file>
			<file type="M">org.jboss.as.controller.registry.AbstractResourceRegistration.java</file>
			<file type="M">org.jboss.as.controller.registry.ProxyControllerRegistration.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">1086</link>
		</links>
	</bug>
	<bug id="1120" opendate="2015-11-10 12:21:50" fixdate="2015-11-17 16:48:53" resolution="Done">
		<buginformation>
			<summary>Launcher sets "-Djava.net.preferIPv4Stack=true" also with IPv6 profile</summary>
			<description>Description of problem:
Domain tests "-Djava.net.preferIPv4Stack=true" also with IPv6 profile. This property is set in AbstractCommandBuilder of WildFly-Core:
https://github.com/wildfly/wildfly-core/blob/master/launcher/src/main/java/org/wildfly/core/launcher/AbstractCommandBuilder.java#L50
There should be option for disable of this option in arquillian.xml file. And testsuite should use this option with IPv6 profile.
How reproducible:
Always
Steps to Reproduce:

./integration-tests.sh -fae -Dmaven.test.failure.ignore=true -Dnode0=$MYTESTIPV6_1 -Dnode1=$MYTESTIPV6_2 -Dipv6 -Dts.manualmode -Dtest=OutboundLdapConnectionTestCase -DtestLogToFile=false -Djboss.dist=$JBOSS_DIST -Dts.noSmoke

Actual results:






07:04:26,054 INFO  [org.jboss.as.arquillian.container.managed.ManagedDeployableContainer] (main) Starting container with: [/qa/tools/opt/jdk1.8.0_last/bin/java,




...




-Djava.net.preferIPv4Stack=true, -Djava.net.preferIPv4Stack=false




...






Expected results:
EAP is not started with "-Djava.net.preferIPv4Stack=true" property with IPv6 profile
Additional info:
Jenkins reproducer job: https://jenkins.mw.lab.eng.bos.redhat.com/hudson/view/EAP7/view/EAP7-AS-Testsuite/view/EAP7-AS-Testsuite-Reproducers/job/eap-7x-as-ts-ipv6-arqillian/jdk=java18_default,label_exp=eap-sustaining&amp;amp;&amp;amp;RHEL6&amp;amp;&amp;amp;x86_64&amp;amp;&amp;amp;ipv6/2/console</description>
			<version>2.0.1.Final</version>
			<fixedVersion>2.0.2.Final</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.wildfly.core.launcher.CommandBuilderTest.java</file>
			<file type="M">org.wildfly.core.launcher.Arguments.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">1861</link>
			<link type="Cloners" description="cloned to">1997</link>
			<link type="Sequence" description="is followed up by">5675</link>
		</links>
	</bug>
	<bug id="1091" opendate="2015-10-21 09:45:52" fixdate="2015-11-19 20:28:44" resolution="Done">
		<buginformation>
			<summary>Kerberos authentication for remoting on hostname which contains uppercase letter</summary>
			<description>When EAP runs on server, which contains upper case in hostname (e.g. localhost.Localdomain), it  is unpossible to make kerberos authentication in remoting to work properly.
JDK constructs TGT-REQ with lower case hostname. But remoting client create connection to EAP with upper case letters,  what cause problems.
RFC4120 "The Kerberos Network Authentication Service"  [1] in chapter "6.2.1.  Name of Server Principals" requires Where the name of the host is not case sensitive (for example, with Internet domain names) the name of the host MUST be lowercase.
Based on information from RFC, IMHO, EAP should handle such scenario. Either remoting client should send lowercase hostname or security realm should map principal case insensitively and look for lower-case keytab record, e.g. remote/localhost.localdomain.
[1] https://www.ietf.org/rfc/rfc4120.txt</description>
			<version>2.0.0.CR9</version>
			<fixedVersion>2.0.2.Final</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.domain.management.security.KeytabIdentityFactoryService.java</file>
			<file type="M">org.jboss.as.domain.management.security.KeytabIdentityFactoryServiceTestCase.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">1580</link>
		</links>
	</bug>
	<bug id="1077" opendate="2015-10-27 10:31:09" fixdate="2015-11-19 20:32:25" resolution="Done">
		<buginformation>
			<summary>Properties authentication in Security Realms does not work with equals sign in password</summary>
			<description>Security realm doesnt start in case when password contains "\=" e.g. 





user5=Pass\=word1





.
Thrown exception is 






^[[0m^[[31m07:00:10,342 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-6) MSC000001: Failed to start service jboss.server.controller.management.security_realm.DelimitersRealm.properties_authentication: org.jboss.msc.service.StartException in service jboss.server.controller.management.security_realm.DelimitersRealm.properties_authentication: Failed to start service




        at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1904)




        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)




        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)




        at java.lang.Thread.run(Thread.java:745)




Caused by: java.lang.ArrayIndexOutOfBoundsException: 11




        at org.jboss.as.domain.management.security.PropertiesFileLoader.cleanKey(PropertiesFileLoader.java:236)




        at org.jboss.as.domain.management.security.UserPropertiesFileLoader.load(UserPropertiesFileLoader.java:106)




        at org.jboss.as.domain.management.security.PropertiesFileLoader.loadAsRequired(PropertiesFileLoader.java:164)




        at org.jboss.as.domain.management.security.PropertiesFileLoader.getProperties(PropertiesFileLoader.java:144)




        at org.jboss.as.domain.management.security.PropertiesFileLoader.start(PropertiesFileLoader.java:131)




        at org.jboss.as.domain.management.security.PropertiesCallbackHandler.start(PropertiesCallbackHandler.java:128)




        at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1948)




        at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1881)




        ... 3 more





</description>
			<version>2.0.0.CR8</version>
			<fixedVersion>2.0.2.Final</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.domain.management.security.PropertiesFileLoader.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">1648</link>
		</links>
	</bug>
	<bug id="1056" opendate="2015-10-14 08:32:38" fixdate="2015-11-19 20:34:35" resolution="Done">
		<buginformation>
			<summary>InstanceAlreadyExistsException in logs while starting embed-server after failure</summary>
			<description>IAEE can be seen in the logs of embed server on the second startup if the first one fails.


Starting the embed server with --emty-config using default configuration fails as expected.






[disconnected /] embed-server --std-out=echo --empty-config




10:12:35,251 INFO  [org.jboss.modules] (AeshProcess: 1) JBoss Modules version 1.4.4.Final




10:12:35,323 INFO  [org.jboss.msc] (AeshProcess: 1) JBoss MSC version 1.2.6.Final




10:12:35,384 INFO  [org.jboss.as] (MSC service thread 1-6) WFLYSRV0049: WildFly Core 2.0.0.CR7-SNAPSHOT (WildFly Core 2.0.0.CR7-SNAPSHOT) starting




10:12:35,454 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-5) MSC000001: Failed to start service jboss.as.server-controller: org.jboss.msc.service.StartException in service jboss.as.server-controller: Failed to start service




	at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1904)




	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)




	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)




	at java.lang.Thread.run(Thread.java:745)




Caused by: java.lang.IllegalStateException: WFLYCTL0389: Could not create an empty configuration at file /home/pkremens/devel/wildfly-core/dist/target/wildfly-core-2.0.0.CR7-SNAPSHOT/standalone/configuration/standalone.xml as there is an existing non-empty configuration there




	at org.jboss.as.controller.persistence.ConfigurationFile.getBootFile(ConfigurationFile.java:242)




	at org.jboss.as.controller.persistence.BackupXmlConfigurationPersister.&amp;lt;init&amp;gt;(BackupXmlConfigurationPersister.java:70)




	at org.jboss.as.server.Bootstrap$Configuration$1.createConfigurationPersister(Bootstrap.java:192)




	at org.jboss.as.server.ServerService.start(ServerService.java:249)




	at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1948)




	at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1881)




	... 3 more









Cannot start embedded server: WFLYEMB0022: Cannot invoke &amp;amp;apos;start&amp;amp;apos; on standalone server: WFLYSRV0141: Cannot start server: Operation failed: Failed to start service: WFLYCTL0389: Could not create an empty configuration at file /home/pkremens/devel/wildfly-core/dist/target/wildfly-core-2.0.0.CR7-SNAPSHOT/standalone/configuration/standalone.xml as there is an existing non-empty configuration there






InstanceAlreadyExistsException can be seen in the logs during the boot of the embed server now.






[disconnected /] embed-server --std-out=echo




10:12:40,211 INFO  [org.jboss.modules] (AeshProcess: 2) JBoss Modules version 1.4.4.Final




10:12:40,217 ERROR [org.jboss.msc] (AeshProcess: 2) MSC000010: Failed to register MBean with MBeanServer: javax.management.InstanceAlreadyExistsException: jboss.msc:type=container,name=jboss-as




	at com.sun.jmx.mbeanserver.Repository.addMBean(Repository.java:437)




	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerWithRepository(DefaultMBeanServerInterceptor.java:1898)




	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:966)




	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)




	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)




	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)




	at org.jboss.msc.service.ServiceContainerImpl.&amp;lt;init&amp;gt;(ServiceContainerImpl.java:372)




	at org.jboss.msc.service.ServiceContainer$Factory.create(ServiceContainer.java:258)




	at org.jboss.as.server.BootstrapImpl$ShutdownHook.register(BootstrapImpl.java:208)




	at org.jboss.as.server.BootstrapImpl$ShutdownHook.access$100(BootstrapImpl.java:198)




	at org.jboss.as.server.BootstrapImpl.&amp;lt;init&amp;gt;(BootstrapImpl.java:62)




	at org.jboss.as.server.Bootstrap$Factory.newInstance(Bootstrap.java:256)




	at org.wildfly.core.embedded.EmbeddedStandaloneServerFactory$StandaloneServerImpl.start(EmbeddedStandaloneServerFactory.java:275)




	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)




	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)




	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)




	at java.lang.reflect.Method.invoke(Method.java:497)




	at org.wildfly.core.embedded.EmbeddedServerReference.invokeOnServer(EmbeddedServerReference.java:85)




	at org.wildfly.core.embedded.EmbeddedServerReference.start(EmbeddedServerReference.java:56)




	at org.jboss.as.cli.embedded.EmbedServerHandler.doHandle(EmbedServerHandler.java:205)




	at org.jboss.as.cli.handlers.CommandHandlerWithHelp.handle(CommandHandlerWithHelp.java:88)




	at org.jboss.as.cli.impl.CommandContextImpl.handle(CommandContextImpl.java:773)




	at org.jboss.as.cli.impl.CommandContextImpl.handleSafe(CommandContextImpl.java:796)




	at org.jboss.as.cli.impl.CommandContextImpl$2.execute(CommandContextImpl.java:410)




	at org.jboss.aesh.console.AeshProcess.run(AeshProcess.java:53)




	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)




	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)




	at java.lang.Thread.run(Thread.java:745)









10:12:40,227 INFO  [org.jboss.as] (MSC service thread 2-8) WFLYSRV0049: WildFly Core 2.0.0.CR7-SNAPSHOT (WildFly Core 2.0.0.CR7-SNAPSHOT) starting




10:12:40,678 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0025: WildFly Core 2.0.0.CR7-SNAPSHOT (WildFly Core 2.0.0.CR7-SNAPSHOT) started in 465ms - Started 35 of 42 services (13 services are lazy, passive or on-demand)




[standalone@embedded /]






Embed server functionality doesn&amp;amp;apos;t seem to be affected by the exception - is operable.</description>
			<version>2.0.0.CR6</version>
			<fixedVersion>2.0.2.Final</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.wildfly.core.embedded.EmbeddedStandaloneServerFactory.java</file>
			<file type="M">org.jboss.as.server.Bootstrap.java</file>
			<file type="M">org.jboss.as.server.BootstrapImpl.java</file>
			<file type="M">org.jboss.as.host.controller.DomainModelControllerService.java</file>
			<file type="M">org.wildfly.core.embedded.EmbeddedHostControllerFactory.java</file>
			<file type="M">org.wildfly.core.embedded.EmbeddedHostControllerBootstrap.java</file>
			<file type="M">org.jboss.as.cli.embedded.EmbedServerHandler.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">1450</link>
		</links>
	</bug>
	<bug id="1092" opendate="2015-11-03 20:11:33" fixdate="2015-11-19 20:38:45" resolution="Done">
		<buginformation>
			<summary>ConfigurationChangeResourceRemoveHandler makes its changes in the constructor not in execute</summary>
			<description>ConfigurationChangeResourceRemoveHandler is calling ConfigurationChangesCollector.deactivate() in its constructor. So deactivate gets called at early boot when the ConfigurationChangeResourceDefinition class gets loaded and the maxHistory is still 0, but never thereafter.
A reload won&amp;amp;apos;t cause it to get called again either, as ConfigurationChangeResourceDefinition is only constructed when the static INSTANCE member is initialized.</description>
			<version>2.0.0.Final</version>
			<fixedVersion>2.0.2.Final</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.domain.management.ConfigurationChangeResourceDefinition.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned to">1748</link>
		</links>
	</bug>
	<bug id="1115" opendate="2015-11-09 11:29:41" fixdate="2015-11-19 20:41:55" resolution="Done">
		<buginformation>
			<summary>Intermittent failures of CompositeOperationTestCase &amp; CoreResourceManagementTestCase</summary>
			<description>org.jboss.as.test.integration.domain.suites.CompositeOperationTestCase and org.jboss.as.test.integration.domain.suites.CoreResourceManagementTestCase from wildfly-core testsuite domain module starts to intermittently fail since 7.0.0.DR13 (2.0.0.CR8).
Tests fails only once I run the whole Domain Mode Integration Tests module, running only these two tests in isolation never fails. 
Reproducer job which starts the tests in testsuite/domain module:
 - 2.0.0.CR6 - intermittent failures of HcExtensionAndSubsystemManagementTestCase JBEAP-1598
 - 2.0.0.CR7 - intermittent failures of HcExtensionAndSubsystemManagementTestCase JBEAP-1598
 - 2.0.0.CR8 - no more HcExtensionAndSubsystemManagementTestCase failures, CompositeOperationTestCase and CoreResourceManagementTestCase starts failing
- 3.0.0.Alpha1-SNAPSHOT - CompositeOperationTestCase and CoreResourceManagementTestCase intermittent fails
Attaching surefire reports.</description>
			<version>3.0.0.Alpha1</version>
			<fixedVersion>2.0.2.Final</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.test.integration.domain.suites.IgnoredResourcesProfileCloneTestCase.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">1793</link>
			<link type="Related" description="relates to">1089</link>
		</links>
	</bug>
	<bug id="1119" opendate="2015-11-09 23:48:57" fixdate="2015-11-19 20:42:17" resolution="Done">
		<buginformation>
			<summary>ManagedDatagramSocketBinding throw NPE</summary>
			<description>i think i have found the same bug as in WFCORE-1033 but in another method.
in the previous bug the bind method was the problem, here i have the same NPE in the close method. there is no null check to registry as in the bind method.






[Server:mgmt-1-prod] 2015-11-10 00:37:15,454 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-1) MSC000001: Failed to start service jboss.jgroups.channel.ee.connector: org.jboss.msc.service.StartException in service jboss.jgroups.channel.ee.connector:




java.lang.NullPointerException




[Server:mgmt-1-prod]    at org.wildfly.clustering.jgroups.spi.service.ChannelConnectorBuilder.start(ChannelConnectorBuilder.java:9




6)




[Server:mgmt-1-prod]    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1948)




[Server:mgmt-1-prod]    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1881)




[Server:mgmt-1-prod]    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)




[Server:mgmt-1-prod]    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)




[Server:mgmt-1-prod]    at java.lang.Thread.run(Thread.java:745)




[Server:mgmt-1-prod] Caused by: java.lang.NullPointerException




[Server:mgmt-1-prod]    at org.jboss.as.network.ManagedDatagramSocketBinding.close(ManagedDatagramSocketBinding.java:73)




[Server:mgmt-1-prod]    at java.net.DatagramSocket.&amp;lt;init&amp;gt;(DatagramSocket.java:245)




[Server:mgmt-1-prod]    at org.jboss.as.network.ManagedDatagramSocketBinding.&amp;lt;init&amp;gt;(ManagedDatagramSocketBinding.java:41)




[Server:mgmt-1-prod]    at org.jboss.as.network.SocketBindingManagerImpl.createDatagramSocket(SocketBindingManagerImpl.java:87)




[Server:mgmt-1-prod]    at org.jboss.as.clustering.jgroups.ManagedSocketFactory.createDatagramSocket(ManagedSocketFactory.java:103)




[Server:mgmt-1-prod]    at org.jboss.as.clustering.jgroups.ManagedSocketFactory.createDatagramSocket(ManagedSocketFactory.java:113)




[Server:mgmt-1-prod]    at org.jgroups.protocols.UDP.createDatagramSocketWithBindPort(UDP.java:487)




[Server:mgmt-1-prod]    at org.jgroups.protocols.UDP.createSockets(UDP.java:361)




[Server:mgmt-1-prod]    at org.jgroups.protocols.UDP.start(UDP.java:270)




[Server:mgmt-1-prod]    at org.jgroups.stack.ProtocolStack.startStack(ProtocolStack.java:965)




[Server:mgmt-1-prod]    at org.jgroups.JChannel.startStack(JChannel.java:890)




[Server:mgmt-1-prod]    at org.jgroups.JChannel._preConnect(JChannel.java:553)




[Server:mgmt-1-prod]    at org.jgroups.JChannel.connect(JChannel.java:288)




[Server:mgmt-1-prod]    at org.jgroups.JChannel.connect(JChannel.java:279)




[Server:mgmt-1-prod]    at org.wildfly.clustering.jgroups.spi.service.ChannelConnectorBuilder.start(ChannelConnectorBuilder.java:94)




[Server:mgmt-1-prod]    ... 5 more





</description>
			<version>2.0.0.CR8</version>
			<fixedVersion>2.0.2.Final</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.network.ManagedDatagramSocketBinding.java</file>
			<file type="M">org.jboss.as.network.ManagedMulticastSocketBinding.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned to">1870</link>
		</links>
	</bug>
	<bug id="1127" opendate="2015-11-10 23:06:02" fixdate="2015-11-19 20:42:57" resolution="Done">
		<buginformation>
			<summary>SocketBindingManagerImpl$UnnamedRegistryImpl is overly picky about unbound sockets</summary>
			<description>A failure like this isn&amp;amp;apos;t necessary:






08:02:23,475 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-2) MSC000001: Failed to start service jboss.jgroups.channel.ee.connector: org.jboss.msc.service.StartException in service jboss.jgroups.channel.ee.connector: java.lang.IllegalStateException




    at org.wildfly.clustering.jgroups.spi.service.ChannelConnectorBuilder.start(ChannelConnectorBuilder.java:96)




    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1948)




    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1881)




    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)




    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)




    at java.lang.Thread.run(Thread.java:745)




Caused by: java.lang.IllegalStateException




    at org.jboss.as.network.SocketBindingManagerImpl$UnnamedRegistryImpl.unregisterBinding(SocketBindingManagerImpl.java:501)




    at org.jboss.as.network.ManagedDatagramSocketBinding.close(ManagedDatagramSocketBinding.java:73)




    at org.jboss.as.clustering.jgroups.ManagedSocketFactory.close(ManagedSocketFactory.java:148)




    at org.jgroups.protocols.UDP.closeUnicastSocket(UDP.java:577)




    at org.jgroups.protocols.UDP.destroySockets(UDP.java:429)




    at org.jgroups.protocols.UDP.start(UDP.java:274)




    at org.jgroups.stack.ProtocolStack.startStack(ProtocolStack.java:965)




    at org.jgroups.JChannel.startStack(JChannel.java:890)




    at org.jgroups.JChannel._preConnect(JChannel.java:553)




    at org.jgroups.JChannel.connect(JChannel.java:288)




    at org.jgroups.JChannel.connect(JChannel.java:279)




    at org.wildfly.clustering.jgroups.spi.service.ChannelConnectorBuilder.start(ChannelConnectorBuilder.java:94)




    ... 5 more






If there&amp;amp;apos;s no socket address, it should just move on.</description>
			<version>2.0.1.Final</version>
			<fixedVersion>2.0.2.Final</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.network.ManagedMulticastSocketBinding.java</file>
			<file type="M">org.jboss.as.network.ManagedSocketBinding.java</file>
			<file type="M">org.jboss.as.network.SocketBindingManager.java</file>
			<file type="M">org.jboss.as.network.ManagedServerSocketBinding.java</file>
			<file type="M">org.jboss.as.network.SocketBindingManagerImpl.java</file>
			<file type="M">org.jboss.as.network.ManagedDatagramSocketBinding.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned to">1882</link>
			<link type="Related" description="relates to">1767</link>
		</links>
	</bug>
	<bug id="1138" opendate="2015-11-18 18:31:59" fixdate="2015-11-19 20:43:37" resolution="Done">
		<buginformation>
			<summary>Operation ("clean-obsolete-content") failed NPE</summary>
			<description>NPE happens randomly knocking the instance off line and has to be restarted.
[Server:server-one] 13:03:37,900 ERROR [org.jboss.as.controller.management-operation] (ServerService Thread Pool  1) WFLYCTL0013: Operation ("clean-obsolete-content") failed - address: ([]): java.lang.NullPointerException
[Server:server-one] 	at org.jboss.as.repository.ContentRepository$Factory$ContentRepositoryImpl.listLocalContents(ContentRepository.java:428)
[Server:server-one] 	at org.jboss.as.repository.ContentRepository$Factory$ContentRepositoryImpl.cleanObsoleteContent(ContentRepository.java:390)
[Server:server-one] 	at org.jboss.as.server.mgmt.domain.RemoteFileRepositoryService.cleanObsoleteContent(RemoteFileRepositoryService.java:160)
[Server:server-one] 	at org.jboss.as.server.operations.CleanObsoleteContentHandler.execute(CleanObsoleteContentHandler.java:76)
[Server:server-one] 	at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:803)
[Server:server-one] 	at org.jboss.as.controller.AbstractOperationContext.doCompleteStep(AbstractOperationContext.java:601)
[Server:server-one] 	at org.jboss.as.controller.AbstractOperationContext.completeStepInternal(AbstractOperationContext.java:354)
[Server:server-one] 	at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:330)
[Server:server-one] 	at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1183)
[Server:server-one] 	at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:362)
[Server:server-one] 	at org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:205)
[Server:server-one] 	at org.jboss.as.controller.ModelControllerImpl$3.execute(ModelControllerImpl.java:626)
[Server:server-one] 	at org.jboss.as.controller.ModelControllerImpl$3.execute(ModelControllerImpl.java:616)
[Server:server-one] 	at org.jboss.as.server.deployment.ContentRepositoryCleaner.cleanObsoleteContent(ContentRepositoryCleaner.java:132)
[Server:server-one] 	at org.jboss.as.server.deployment.ContentRepositoryCleaner$ContentRepositoryCleanerTask.run(ContentRepositoryCleaner.java:67)
[Server:server-one] 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
[Server:server-one] 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:304)
[Server:server-one] 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:178)
[Server:server-one] 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
[Server:server-one] 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
[Server:server-one] 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
[Server:server-one] 	at java.lang.Thread.run(Thread.java:745)
[Server:server-one] 	at org.jboss.threads.JBossThread.run(JBossThread.java:320)
[Server:server-one] 
[Server:server-one] 13:03:37,931 ERROR [org.jboss.as.server] (ServerService Thread Pool  1) WFLYSRV0216: Error cleaning obsolete content WFLYCTL0158: Operation handler failed: java.lang.NullPointerException </description>
			<version>1.0.2.Final</version>
			<fixedVersion>2.0.2.Final</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.repository.logging.DeploymentRepositoryLogger.java</file>
			<file type="M">org.jboss.as.repository.ContentRepository.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned to">1953</link>
		</links>
	</bug>
	<bug id="1158" opendate="2015-11-24 06:09:23" fixdate="2015-11-24 08:50:48" resolution="Duplicate Issue">
		<buginformation>
			<summary>Expose the file system space availability</summary>
			<description>Implements a service to expose the file system space availability, run-time metric for known server locations(data, tmp, logs).</description>
			<version>2.0.2.Final</version>
			<fixedVersion></fixedVersion>
			<type>Feature Request</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.logging.LoggingExtension.java</file>
			<file type="M">org.jboss.as.logging.PeriodicSizeRotatingHandlerResourceDefinition.java</file>
			<file type="M">org.wildfly.core.test.standalone.mgmt.BasicOperationsUnitTestCase.java</file>
			<file type="M">org.jboss.as.logging.AbstractFileHandlerDefinition.java</file>
			<file type="M">org.jboss.as.controller.services.path.PathResourceDefinition.java</file>
			<file type="M">org.jboss.as.server.deployment.DeploymentAddHandlerTestCase.java</file>
			<file type="M">org.jboss.as.server.deployment.scanner.DeploymentScannerDefinition.java</file>
			<file type="M">org.jboss.as.logging.FileHandlerResourceDefinition.java</file>
			<file type="M">org.jboss.as.logging.PeriodicHandlerResourceDefinition.java</file>
			<file type="M">org.jboss.as.server.ServerEnvironmentResourceDescription.java</file>
			<file type="M">org.jboss.as.host.controller.descriptions.HostEnvironmentResourceDefinition.java</file>
			<file type="M">org.jboss.as.logging.SizeRotatingHandlerResourceDefinition.java</file>
		</fixedFiles>
		<links>
			<link type="Duplicate" description="is duplicated by">1159</link>
		</links>
	</bug>
	<bug id="1143" opendate="2015-11-09 15:56:44" fixdate="2015-11-25 19:11:58" resolution="Done">
		<buginformation>
			<summary>Cancel button in JConsole do nothing</summary>
			<description>Description of problem:
Cancel button in JConsole do nothing. It should be removed from JConsole
How reproducible:
Always
Steps to Reproduce:

cd EAP_HOME
./bin/standalone.sh &amp;amp;
./bin/jconsole.sh
Click to CLI tab
Click to "Cancel" button

</description>
			<version>2.0.0.Final</version>
			<fixedVersion>2.0.3.Final</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.cli.gui.ConnectDialog.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">1801</link>
		</links>
	</bug>
	<bug id="892" opendate="2015-08-19 15:20:34" fixdate="2015-11-25 19:13:59" resolution="Done">
		<buginformation>
			<summary>Cli output of some tests contains only "0: " (instead of correct result)</summary>
			<description>Description of problem:
Cli output of some tests in wildfly core contains only "0: " (instead of correct result)
How reproducible:
66% on RHEL &amp;amp;&amp;amp; IBM JDK 8
Affected tests found so far:

org.jboss.as.test.manualmode.vault.VaultPasswordsInCLITestCase#testWrongVaultPassword
	






java.lang.AssertionError: Password should be wrong




Expected: a string containing "Keystore was tampered with, or password was incorrect"




     but: was "0: "




	at org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)




	at org.junit.Assert.assertThat(Assert.java:865)




	at org.jboss.as.test.manualmode.vault.VaultPasswordsInCLITestCase.testWrongVaultPassword(VaultPasswordsInCLITestCase.java:135)








org.jboss.as.test.manualmode.vault.VaultPasswordsInCLITestCase#testRightVaultPassword
	






java.lang.AssertionError: Password should be right and authentication successful




Expected: a string containing "\"outcome\" =&amp;gt; \"success\""




     but: was "0: "




	at org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)




	at org.junit.Assert.assertThat(Assert.java:865)




	at org.jboss.as.test.manualmode.vault.VaultPasswordsInCLITestCase.testRightVaultPassword(VaultPasswordsInCLITestCase.java:148)








org.wildfly.core.test.standalone.mgmt.HTTPSConnectionWithCLITestCase#testTrustedCLICertificate
org.jboss.as.test.manualmode.management.cli.CustomVaultInCLITestCase#testWrongVaultPassword

Steps to Reproduce:

mvn install -Dts.manualmode -fae -Dmaven.test.failure.ignore=true -Dnode0=$MYTESTIP_1 -DfailIfNoTests=false -Dtest=VaultPasswordsInCLITestCase

</description>
			<version>2.0.0.Beta2</version>
			<fixedVersion>2.0.3.Final</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.test.integration.management.util.CustomCLIExecutor.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">764</link>
		</links>
	</bug>
	<bug id="1067" opendate="2015-10-21 12:22:10" fixdate="2015-12-04 17:40:21" resolution="Done">
		<buginformation>
			<summary> CVE-2015-5304 Missing authorization check for Monitor/Deployer/Auditor role when shutting down server or canceling op</summary>
			<description>It was found that the server or host controller did not properly authorize a user performing a shut down. A user with the role Monitor, Deployer, or Auditor could use this flaw to shut down the EAP server, which is an action restricted to users in other roles.
The following commit introduced this issue:
https://github.com/wildfly/wildfly-core/commit/6e5611b4c6
The context.getServiceRegistry(true) call, which throws an exception when write authorization fails, was replaced with a call to context.authorize, which only returns an authorization result. Nothing was then done with the authorization result.
The same flaw exists in the handling of the cancel-active-operation op, although there this only means the admin could cancel an in-progress operation, perhaps initiated by a different admin. It also lets the admin cancel his own operation, which is arguably a benefit. But losing that benefit is an acceptable price to having a consistent RBAC scheme. (Note: CLI users whose own operations are hanging can always cancel them by doing a soft kill of the CLI process. Users of custom clients that use ModelControllerClient can cancel their own ops by using the ModelControllerClient executeAsync API and cancelling the Future returned thereby.)</description>
			<version>1.0.0.Final</version>
			<fixedVersion>2.0.4.Final</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.test.integration.domain.rbac.AbstractStandardRolesTestCase.java</file>
			<file type="M">org.jboss.as.test.integration.mgmt.access.StandardRolesBasicTestCase.java</file>
			<file type="M">org.jboss.as.domain.management.controller.CancelActiveOperationHandler.java</file>
			<file type="M">org.jboss.as.server.operations.ServerShutdownHandler.java</file>
			<file type="M">org.jboss.as.host.controller.operations.HostShutdownHandler.java</file>
		</fixedFiles>
	</bug>
	<bug id="1168" opendate="2015-11-30 14:16:22" fixdate="2015-12-04 17:40:40" resolution="Done">
		<buginformation>
			<summary>Incorrect null check in SimpleResourceDefinition.Parameter.setDeprecatedSince</summary>
			<description>The null check checks the field being assigned instead of the param passed in:






        public Parameters setDeprecatedSince(ModelVersion deprecatedSince) {




            if (deprecationData == null) { // &amp;lt;-- OOPS!




                throw ControllerLogger.ROOT_LOGGER.nullVar("deprecatedSince");




            }









            this.deprecationData = new DeprecationData(deprecatedSince);






The field will always be null, making this method useless.</description>
			<version>2.0.3.Final</version>
			<fixedVersion>2.0.4.Final</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.SimpleResourceDefinition.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned to">2069</link>
		</links>
	</bug>
	<bug id="1166" opendate="2015-11-27 14:21:30" fixdate="2015-12-04 19:03:47" resolution="Done">
		<buginformation>
			<summary>CompositeTransformer does not transform addresses</summary>
			<description>If /some=where has a child redirection for the child=* child resource to new-child=*, then






{




    "operation" =&amp;gt; "add",




    "address" =&amp;gt; [




        ("some" =&amp;gt; "where"),




        ("child" =&amp;gt; "*")




    ]




}






gets correctly transformed to 






{




    "operation" =&amp;gt; "add",




    "address" =&amp;gt; [




        ("some" =&amp;gt; "where"),




        ("new-child" =&amp;gt; "*")




    ]




}






But if wrapped in a composite, e.g.:






{




    "operation" =&amp;gt; "composite",




    "address" =&amp;gt; [],




    "steps" =&amp;gt; [




        {




            "operation" =&amp;gt; "add",




            "address" =&amp;gt; [




                ("some" =&amp;gt; "where"),




                ("child" =&amp;gt; "*")




            ]




        }




    ]




}






the redirection does not happen in the transformed composite, so we have the original






{




    "operation" =&amp;gt; "composite",




    "address" =&amp;gt; [],




    "steps" =&amp;gt; [




        {




            "operation" =&amp;gt; "add",




            "address" =&amp;gt; [




                ("some" =&amp;gt; "where"),




                ("child" =&amp;gt; "*")




            ]




        }




    ]




}






rather than the expected






{




    "operation" =&amp;gt; "composite",




    "address" =&amp;gt; [],




    "steps" =&amp;gt; [




        {




            "operation" =&amp;gt; "add",




            "address" =&amp;gt; [




                ("some" =&amp;gt; "where"),




                ("new-child" =&amp;gt; "*")




            ]




        }




    ]




}





</description>
			<version>2.0.3.Final</version>
			<fixedVersion>2.0.4.Final</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.transform.description.ChildRedirectTestCase.java</file>
			<file type="M">org.jboss.as.controller.transform.CompositeOperationTransformer.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">2029</link>
		</links>
	</bug>
	<bug id="1136" opendate="2015-11-17 16:00:10" fixdate="2015-12-04 19:15:01" resolution="Done">
		<buginformation>
			<summary>Subsystem parser tests fail when woodstox parser is on classpath</summary>
			<description>When subsystem is testing remove resources and subsystem model is empty.
Marshaling fails inside subsystem harness with






Caused by: javax.xml.stream.XMLStreamException: Trying to write END_DOCUMENT when document has no root (ie. trying to output empty document).




	at com.ctc.wstx.sw.BaseStreamWriter.throwOutputError(BaseStreamWriter.java:1522)




	at com.ctc.wstx.sw.BaseStreamWriter.reportNwfStructure(BaseStreamWriter.java:1551)




	at com.ctc.wstx.sw.BaseStreamWriter._finishDocument(BaseStreamWriter.java:1377)




	at com.ctc.wstx.sw.BaseStreamWriter.writeEndDocument(BaseStreamWriter.java:536)




	at org.jboss.staxmapper.FormattingXMLStreamWriter.writeEndDocument(FormattingXMLStreamWriter.java:215)




	at org.jboss.as.subsystem.test.TestParser.writeContent(TestParser.java:80)




	at org.jboss.as.subsystem.test.TestParser.writeContent(TestParser.java:51)




	at org.jboss.staxmapper.XMLMapperImpl.doDeparse(XMLMapperImpl.java:88)




	at org.jboss.staxmapper.XMLMapperImpl.deparseDocument(XMLMapperImpl.java:83)




	at org.jboss.as.controller.persistence.AbstractConfigurationPersister.marshallAsXml(AbstractConfigurationPersister.java:117)




	... 51 more










</description>
			<version>2.0.1.Final</version>
			<fixedVersion>2.0.4.Final</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.subsystem.test.transformers.subsystem.map_to_child_resource.TransformerAttachmentAndInspectModelSubsystemTestCase.java</file>
			<file type="M">org.jboss.as.subsystem.test.TestParser.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned to">2098</link>
		</links>
	</bug>
	<bug id="1095" opendate="2015-11-04 19:01:18" fixdate="2015-12-16 22:34:29" resolution="Done">
		<buginformation>
			<summary>Remove dependency on bouncycastle</summary>
			<description>Core has a dependency on bouncycastle that AFAICT is not used. It was brought into core when a class from full&amp;amp;apos;s testsuite/shared was ported, but the core usage of the class has no need for the bouncycastle-related logic.</description>
			<version>2.0.0.Final</version>
			<fixedVersion>2.0.5.CR1</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.test.syslogserver.TLSSyslogServer.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned to">1760</link>
		</links>
	</bug>
	<bug id="950" opendate="2015-09-03 09:05:34" fixdate="2015-12-16 22:39:32" resolution="Done">
		<buginformation>
			<summary>Embedded server started non-modular use first passed --jboss-home value only</summary>
			<description>First value passed as --jboss-home to embed server instance (must be an existing directory) is always used for modules lookup and server standard paths setup within single CLI session.

Use wrong directory on first try, use correct directory on second try, embedded instance still tries to boot from wrong directory






$ pwd




/home/pkremens/workspace/jboss-eap-7.0/bin/client




$ java -jar jboss-cli-client.jar 









[disconnected /] embed-server --jboss-home=/home/pkremens/workspace/jboss-eap-7.0/bin




Cannot start embedded server: WFLYEMB0014: Cannot load module org.jboss.vfs from: local module loader @500e80c2 (finder: local module finder @75670fc4 (roots: /home/pkremens/workspace/jboss-eap-7.0/bin/modules)): org.jboss.vfs:main









# server still tries to use /home/pkremens/workspace/jboss-eap-7.0/bin




[disconnected /] embed-server --jboss-home=/home/pkremens/workspace/jboss-eap-7.0    




Cannot start embedded server: WFLYEMB0014: Cannot load module org.jboss.vfs from: local module loader @500e80c2 (finder: local module finder @75670fc4 (roots: /home/pkremens/workspace/jboss-eap-7.0/bin/modules)): org.jboss.vfs:main






Try to manage multiple EAP distros






/home/pkremens/workspace2




 eap1




  jboss-eap-7.0




 eap2




     jboss-eap-7.0









$ java -jar jboss-cli-client.jar 









[disconnected /] embed-server --jboss-home=/home/pkremens/workspace2/eap1/jboss-eap-7.0 --server-config=eap1.xml --empty-config




[standalone@embedded /] stop-embedded-server 









[disconnected /] embed-server --jboss-home=/home/pkremens/workspace2/eap2/jboss-eap-7.0 --server-config=eap2.xml --empty-config









# jboss.server.*.dir point to eap1, but should point to eap2




[standalone@embedded /] /path=*:read-attribute(name=path)




...




            "address" =&amp;gt; [("path" =&amp;gt; "jboss.server.log.dir")],




            "result" =&amp;gt; "/home/pkremens/workspace2/eap1/jboss-eap-7.0









            "address" =&amp;gt; [("path" =&amp;gt; "jboss.server.data.dir")],




            "result" =&amp;gt; "/home/pkremens/workspace2/eap1/jboss-eap-7.0/standalone/data"









            "address" =&amp;gt; [("path" =&amp;gt; "jboss.server.base.dir")],




            "result" =&amp;gt; "/home/pkremens/workspace2/eap1/jboss-eap-7.0/standalone"









            "address" =&amp;gt; [("path" =&amp;gt; "jboss.server.config.dir")],




            "result" =&amp;gt; "/home/pkremens/workspace2/eap1/jboss-eap-7.0/standalone/configuration"









            "address" =&amp;gt; [("path" =&amp;gt; "jboss.server.temp.dir")],




            "result" =&amp;gt; "/home/pkremens/workspace2/eap1/jboss-eap-7.0/standalone/tmp"









            "address" =&amp;gt; [("path" =&amp;gt; "jboss.controller.temp.dir")],




            "result" =&amp;gt; "/home/pkremens/workspace2/eap1/jboss-eap-7.0/standalone/tmp"









            "address" =&amp;gt; [("path" =&amp;gt; "jboss.home.dir")],




            "result" =&amp;gt; "/home/pkremens/workspace2/eap2/jboss-eap-7.0"




...




# Both configuration files were created in eap1 directory




$ find /home/pkremens/workspace2 | grep eap[12].xml




/home/pkremens/workspace2/eap1/jboss-eap-7.0/standalone/configuration/eap2.xml




/home/pkremens/workspace2/eap1/jboss-eap-7.0/standalone/configuration/eap1.xml







</description>
			<version>2.0.0.Beta4</version>
			<fixedVersion>2.0.5.CR1</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.wildfly.core.embedded.EmbeddedStandaloneServerFactory.java</file>
			<file type="M">org.wildfly.core.embedded.EmbeddedServerFactory.java</file>
			<file type="M">org.wildfly.core.embedded.EmbeddedHostControllerFactory.java</file>
			<file type="M">org.wildfly.core.embedded.logging.EmbeddedLogger.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">985</link>
		</links>
	</bug>
	<bug id="1188" opendate="2015-12-04 23:12:51" fixdate="2015-12-16 22:46:12" resolution="Done">
		<buginformation>
			<summary>Exiting CLI requires stty sane command to be issued on Linux</summary>
			<description>The PR https://github.com/wildfly/wildfly-core/pull/1268/ seemed to have introduced a regression where some times (seems to be most in my case) stty sane is required to get a shell back to normal. My guess is it&amp;amp;apos;s the aesh upgrade, but I&amp;amp;apos;m not certain on that so I&amp;amp;apos;ll start the JIRA here and it can be moved to AESH if necessary.</description>
			<version>2.0.4.Final</version>
			<fixedVersion>2.0.5.CR1</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.cli.impl.CommandContextImpl.java</file>
			<file type="M">org.jboss.as.cli.impl.Console.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">2206</link>
		</links>
	</bug>
	<bug id="1214" opendate="2015-12-11 23:17:45" fixdate="2015-12-16 22:48:39" resolution="Done">
		<buginformation>
			<summary>Operation headers not propagated to domain servers when &amp;apos;composite&amp;apos; op is used</summary>
			<description>When the user adds request headers to an op, they are not propagated to the servers during domain rollout if the &amp;amp;apos;composite&amp;amp;apos; op is involved.
For example, if I add some stdout printing of what the headers are on the various processes and invoke this:






[domain@localhost:9990 /] deploy ~/tmp/helloworld.war --headers={blocking-timeout=5;rollback-on-runtime-failure=false} --all-server-groups






Then on a HC with two servers, this is logged:
[Host Controller] 10:53:40,697 INFO  [stdout] (management-handler-thread - 3) "composite" headers: 
{
[Host Controller] 10:53:40,697 INFO  [stdout] (management-handler-thread - 3)     "blocking-timeout" =&amp;gt; "5",
[Host Controller] 10:53:40,698 INFO  [stdout] (management-handler-thread - 3)     "rollback-on-runtime-failure" =&amp;gt; "false",
[Host Controller] 10:53:40,698 INFO  [stdout] (management-handler-thread - 3)     "caller-type" =&amp;gt; "user",
[Host Controller] 10:53:40,698 INFO  [stdout] (management-handler-thread - 3)     "access-mechanism" =&amp;gt; "NATIVE"
[Host Controller] 10:53:40,698 INFO  [stdout] (management-handler-thread - 3) }
[Host Controller] 10:53:40,727 INFO  [org.jboss.as.repository] (management-handler-thread - 3) WFLYDR0001: Content added at location /Users/bstansberry/dev/wildfly/wildfly-core/dist/target/wildfly-core-2.0.5.Final-SNAPSHOT/domain/data/content/6f/cd9eae343ed6d5aa9fffa83012d155b1ef911c/content
[Server:server-one] 10:53:40,772 INFO  [stdout] (ServerService Thread Pool  11) "composite" headers: null
[Server:server-two] 10:53:40,772 INFO  [stdout] (ServerService Thread Pool  11) "composite" headers: null
The HC logs, then the servers report. The user-specified headers are not included.
Invoke the same op without the batch and this is logged:






[Host Controller] 10:43:50,400 INFO  [stdout] (management-handler-thread - 4) "composite" headers: {




[Host Controller] 10:43:50,401 INFO  [stdout] (management-handler-thread - 4)     "blocking-timeout" =&amp;gt; "5",




[Host Controller] 10:43:50,401 INFO  [stdout] (management-handler-thread - 4)     "rollback-on-runtime-failure" =&amp;gt; "false",




[Host Controller] 10:43:50,401 INFO  [stdout] (management-handler-thread - 4)     "caller-type" =&amp;gt; "user",




[Host Controller] 10:43:50,401 INFO  [stdout] (management-handler-thread - 4)     "access-mechanism" =&amp;gt; "NATIVE"




[Host Controller] 10:43:50,401 INFO  [stdout] (management-handler-thread - 4) }




[Host Controller] 10:43:50,425 INFO  [org.jboss.as.repository] (management-handler-thread - 4) WFLYDR0001: Content added at location /Users/bstansberry/dev/wildfly/wildfly-core/dist/target/wildfly-core-2.0.5.Final-SNAPSHOT/domain/data/content/6f/cd9eae343ed6d5aa9fffa83012d155b1ef911c/content




[Server:server-two] 10:43:50,464 INFO  [stdout] (ServerService Thread Pool -- 11) "composite" headers: {




[Server:server-two] 10:43:50,464 INFO  [stdout] (ServerService Thread Pool -- 11)     "blocking-timeout" =&amp;gt; "5",




[Server:server-two] 10:43:50,464 INFO  [stdout] (ServerService Thread Pool -- 11)     "rollback-on-runtime-failure" =&amp;gt; "false",




[Server:server-one] 10:43:50,464 INFO  [stdout] (ServerService Thread Pool -- 11) "composite" headers: {




[Server:server-two] 10:43:50,464 INFO  [stdout] (ServerService Thread Pool -- 11)     "access-mechanism" =&amp;gt; "NATIVE",




[Server:server-one] 10:43:50,465 INFO  [stdout] (ServerService Thread Pool -- 11)     "blocking-timeout" =&amp;gt; "5",




[Server:server-two] 10:43:50,465 INFO  [stdout] (ServerService Thread Pool -- 11)     "domain-uuid" =&amp;gt; "216d2e99-dba5-4c89-8020-b0c16bd553c5"




[Server:server-one] 10:43:50,465 INFO  [stdout] (ServerService Thread Pool -- 11)     "rollback-on-runtime-failure" =&amp;gt; "false",




[Server:server-two] 10:43:50,465 INFO  [stdout] (ServerService Thread Pool -- 11) }




[Server:server-one] 10:43:50,465 INFO  [stdout] (ServerService Thread Pool -- 11)     "access-mechanism" =&amp;gt; "NATIVE",




[Server:server-one] 10:43:50,465 INFO  [stdout] (ServerService Thread Pool -- 11)     "domain-uuid" =&amp;gt; "216d2e99-dba5-4c89-8020-b0c16bd553c5"




[Server:server-one] 10:43:50,465 INFO  [stdout] (ServerService Thread Pool -- 11) }






Expected headers are present.
Note the CLI &amp;amp;apos;deploy&amp;amp;apos; is far from the only time the &amp;amp;apos;composite&amp;amp;apos; op is used. Among other places, the high level CLI &amp;amp;apos;batch&amp;amp;apos; command in a domain involves use of &amp;amp;apos;composite&amp;amp;apos;.</description>
			<version>2.0.4.Final</version>
			<fixedVersion>2.0.5.CR1</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.domain.controller.operations.coordination.OperationCoordinatorStepHandler.java</file>
			<file type="M">org.jboss.as.domain.controller.operations.coordination.DomainRolloutStepHandler.java</file>
		</fixedFiles>
		<links>
			<link type="Causality" description="causes">2055</link>
			<link type="Cloners" description="cloned to">2397</link>
		</links>
	</bug>
	<bug id="1134" opendate="2015-11-16 21:40:20" fixdate="2015-12-16 22:49:00" resolution="Done">
		<buginformation>
			<summary>A java.lang.Error in Stage.DONE can lead to hangs</summary>
			<description>As part of investigating https://bugzilla.redhat.com/show_bug.cgi?id=1259767 I&amp;amp;apos;ve looked into general handling of situations when java.lang.Error is thrown during management operation execution.
Handling prior to Stage.DONE looks ok, with the error caught, logged and the failure-description on the response set. But if the error happens after commit or during rollback, it isn&amp;amp;apos;t always properly triggering a response. In the intra-domain case the remote node that has the problem tries to send a failure response to the calling HC, but uses the wrong request id, resulting in that response being dropped and the calling HC continuing to wait.
A post-commit Error seems pretty unlikely. A rollback error seems more possible, as a rollback may involve installing significant numbers of services.</description>
			<version>2.0.1.Final</version>
			<fixedVersion>2.0.5.CR1</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.remote.ModelControllerClientOperationHandler.java</file>
			<file type="M">org.jboss.as.protocol.mgmt.ActiveOperationSupport.java</file>
			<file type="M">org.jboss.as.test.integration.domain.suites.DomainTestSuite.java</file>
			<file type="M">org.jboss.as.domain.controller.operations.coordination.DomainFinalResultHandler.java</file>
			<file type="M">org.jboss.as.protocol.mgmt.ManagementRequestContext.java</file>
			<file type="M">org.jboss.as.controller.remote.OperationAttachmentsProxy.java</file>
			<file type="M">org.jboss.as.controller.remote.TransactionalProtocolOperationHandler.java</file>
			<file type="M">org.jboss.as.protocol.mgmt.ActiveOperation.java</file>
			<file type="M">org.jboss.as.controller.logging.ControllerLogger.java</file>
			<file type="M">org.jboss.as.protocol.mgmt.ManagementResponseHeader.java</file>
			<file type="M">org.jboss.as.controller.remote.ResponseAttachmentInputStreamSupportTestCase.java</file>
			<file type="M">org.jboss.as.test.integration.domain.extension.ExtensionSetup.java</file>
			<file type="M">org.jboss.as.protocol.mgmt.AbstractMessageHandler.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned to">2399</link>
		</links>
	</bug>
	<bug id="1212" opendate="2015-12-11 18:04:50" fixdate="2015-12-16 22:55:15" resolution="Done">
		<buginformation>
			<summary>TestModule does not clean up after itself properly</summary>
			<description>TestModule.create() calls mkdirs() to create its filesystem structure, but remove() only removes the dir above &amp;amp;apos;main&amp;amp;apos; and below, leaving behind intermediate dirs.
The result of this is if you run the full testsuite with -Dts.basic, the dist/target/wildflyxxx/modules dir ends up with child dir &amp;amp;apos;test&amp;amp;apos; in addition to the proper &amp;amp;apos;system&amp;amp;apos;.
I&amp;amp;apos;m not sure why this spurious dir doesn&amp;amp;apos;t end up in the final dists we publish. Perhaps its just luck due to the release process not running the testsuite when the final build with the &amp;amp;apos;deploy&amp;amp;apos; target is invoked. I know my process for releasing WildFly Core doesn&amp;amp;apos;t re-run tests in that step.
Once remove() does its current work it should walk up the filesystem tree until it gets to the file returned by getModulesDir(). For each level in the tree it should check if that file is a dir with no children and if it is it should remove the dir. 
https://issues.jboss.org/browse/JBEAP-2374</description>
			<version>2.0.4.Final</version>
			<fixedVersion>2.0.5.CR1</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.test.module.util.TestModule.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned to">2374</link>
			<link type="Related" description="is related to">5423</link>
		</links>
	</bug>
	<bug id="1213" opendate="2015-12-11 22:27:53" fixdate="2015-12-16 22:56:19" resolution="Done">
		<buginformation>
			<summary>Graceful shutdown is interfering with the &amp;apos;kill&amp;apos; and &amp;apos;destroy&amp;apos; operations</summary>
			<description>The &amp;amp;apos;kill&amp;amp;apos; and &amp;amp;apos;destroy&amp;amp;apos; operations on the HC are meant to force shutdown of misbehaving servers. But the graceful shutdown work ([1]) has introduced a management op into the mix. I believe that should be removed, as its not the intent of these operations to try and be graceful; the regular &amp;amp;apos;stop&amp;amp;apos; ops are for that.
When experimenting with how domains react to OOME servers as part of my WFCORE-378 work I&amp;amp;apos;m seeing &amp;amp;apos;kill&amp;amp;apos; and &amp;amp;apos;destroy&amp;amp;apos; no longer function because the OOME on the server means the graceful shutdown management op hangs.
[1] https://github.com/wildfly/wildfly-core/commit/6e95b5#diff-ecdfa997cd57af67393e4962b54ead64</description>
			<version>2.0.4.Final</version>
			<fixedVersion>2.0.5.CR1</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.host.controller.ServerInventoryImpl.java</file>
			<file type="M">org.jboss.as.host.controller.ManagedServer.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned to">2398</link>
		</links>
	</bug>
	<bug id="1210" opendate="2015-12-11 14:47:25" fixdate="2015-12-16 22:57:43" resolution="Done">
		<buginformation>
			<summary>Transformations are not triggered for aliases</summary>
			<description>Currently only operations passed in to the controller by the client are passed over to the transformers. So if you have an alias /an=alias mapping to /some=resource, and a transformer mapped for /some=resource:
    /some=resource:add gets transformed
   /an=alias:add does not get transformed.
Behind the scenes /an=alias:add ends up in AliasStepHandler, which adds the step to invoke the real /some=resource:add. Unfortunately the /some=resource:add does not get passed to the transformers.
The transformer framework should use the same logic as AliasStepHandler to map the alias to the real address and the transform that.</description>
			<version>2.0.4.Final</version>
			<fixedVersion>2.0.5.CR1</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.registry.AliasEntry.java</file>
			<file type="M">org.jboss.as.controller.transform.TransformersImpl.java</file>
			<file type="M">org.jboss.as.controller.transform.CompositeOperationTransformer.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned to">2363</link>
			<link type="Dependency" description="blocks">5927</link>
			<link type="Dependency" description="blocks">5494</link>
		</links>
	</bug>
	<bug id="1240" opendate="2015-12-18 18:47:32" fixdate="2015-12-21 18:02:36" resolution="Done">
		<buginformation>
			<summary>RestartParentWriteAttributeHandler.revertUpdateToRuntime is calling deprecated recreateParentService variant</summary>
			<description>Calling the deprecated variant forces the user to override the deprecated one.</description>
			<version>2.0.5.CR1</version>
			<fixedVersion>2.0.5.Final</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.RestartParentWriteAttributeHandler.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned to">2490</link>
		</links>
	</bug>
	<bug id="1239" opendate="2015-12-18 17:53:24" fixdate="2015-12-21 18:02:45" resolution="Done">
		<buginformation>
			<summary>Embedded API is confusing re process types</summary>
			<description>The embedded API has gotten a bit confusing with respect to names and types, primarily the use of the word "server" in a number of placing where the relevant thing could either be an embedded standalone server or an embedded host controller. 
Originally I saw this module as just being an internal implementation detail for the CLI, used by the offline CLI feature, but now we&amp;amp;apos;ve opened it up for use by things like Arquillian&amp;amp;apos;s WildFly integration, so I want to clean this API up a bit.
I see two minor breaking changes needed:
1) The HostController interface has an odd "public HostController getHostController()" method that logically would only return &amp;amp;apos;this&amp;amp;apos;. I could keep this but it&amp;amp;apos;s not needed and I&amp;amp;apos;d rather get rid of it.
2) The HostController interface&amp;amp;apos;s start() method does not throw a checked exception, while the equivalent start() on StandaloneServer does. To do anything coherent I need to unify the exception handling. HostController is extremely unlikely to be used outside wf core, while StandaloneServer is used, and removing a checked exception from StandaloneServer would be a breaking change or any user that catches it, so instead I will add the exception to HostController.start().</description>
			<version>2.0.4.Final</version>
			<fixedVersion>2.0.5.Final</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="D">org.wildfly.core.embedded.InitialModuleLoaderFactory.java</file>
			<file type="M">org.wildfly.core.embedded.ServerEnvironment.java</file>
			<file type="M">org.jboss.as.cli.handlers.ReloadHandler.java</file>
			<file type="M">org.wildfly.core.embedded.EmbeddedHostControllerFactory.java</file>
			<file type="D">org.jboss.as.cli.embedded.EmbeddedServerLaunch.java</file>
			<file type="M">org.jboss.as.cli.impl.CommandContextImpl.java</file>
			<file type="M">org.wildfly.core.embedded.ServerStartException.java</file>
			<file type="M">org.wildfly.core.embedded.HostController.java</file>
			<file type="M">org.wildfly.core.embedded.EmbeddedServerReference.java</file>
			<file type="M">org.wildfly.core.embedded.logging.EmbeddedLogger.java</file>
			<file type="M">org.jboss.as.cli.embedded.StopEmbeddedServerHandler.java</file>
			<file type="M">org.wildfly.core.embedded.EmbeddedStandaloneServerFactory.java</file>
			<file type="M">org.wildfly.core.embedded.EmbeddedServerFactory.java</file>
			<file type="M">org.jboss.as.cli.handlers.ShutdownHandler.java</file>
			<file type="M">org.jboss.as.cli.embedded.EmbedHostControllerHandler.java</file>
			<file type="M">org.jboss.as.cli.embedded.StopEmbeddedHostControllerHandler.java</file>
			<file type="M">org.jboss.as.cli.embedded.EmbeddedControllerHandlerRegistrar.java</file>
			<file type="M">org.jboss.as.cli.embedded.EmbedServerHandler.java</file>
			<file type="M">org.wildfly.core.embedded.StandaloneServer.java</file>
		</fixedFiles>
		<links>
			<link type="Dependency" description="blocks">2505</link>
		</links>
	</bug>
	<bug id="1209" opendate="2015-12-10 05:28:33" fixdate="2015-12-23 05:02:22" resolution="Done">
		<buginformation>
			<summary>jboss-cli.sh ignoring invalid attribute when used in batch mode</summary>
			<description>CLI did not throw any error message and just ignored the invalid attribute while using in batch mode.If we use same CLI command in non-batch mode it throws exception.</description>
			<version>2.0.4.Final</version>
			<fixedVersion>2.0.5.Final</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.cli.Util.java</file>
			<file type="M">org.jboss.as.cli.handlers.OperationRequestHandler.java</file>
			<file type="M">org.jboss.as.cli.handlers.batch.BatchRunHandler.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned to">2377</link>
		</links>
	</bug>
	<bug id="1198" opendate="2015-12-09 09:30:00" fixdate="2015-12-23 05:08:33" resolution="Done">
		<buginformation>
			<summary>CLI does not resolve multiple properties if one property is undefined</summary>
			<description>https://bugzilla.redhat.com/show_bug.cgi?id=1289316 description:






Multiple property substitution is working with EAP 6.4.3+, however, if a variable amongst the multiple variables is empty or has no value, then the subsequent property in the CLI command is not substituted. 









For example : 




cat props.properties 




-----------------------------------------




PROFILE-NAME=TestProfile




SERVER-INSTANCE-NUMBER=TestInstance




APP-VERSION=




VAR=test




-----------------------------------------









cat test.cli :




---------------------------------------




/host=master/server-config=${PROFILE-NAME}${APP-VERSION}${SERVER-INSTANCE-NUMBER}${VAR}:add(auto-start=true, group="${PROFILE-NAME}${APP-VERSION}-server-group")




---------------------------------------









and if I execute "./jboss-cli.sh --connect --file=test.cli --properties=props.properties" then I have the following in the host.xml ": 









----------




...




&amp;lt;server name="TestProfile${SERVER-INSTANCE-NUMBER}test" group="TestProfile-server-group" auto-start="true"/&amp;gt;




...




-----------









Note APP-VERSION had no value, and so the subsequent SERVER-INSTANCE-NUMBER was not properly resolved





</description>
			<version>2.0.4.Final</version>
			<fixedVersion>2.0.5.Final</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.cli.parsing.ExpressionBaseState.java</file>
			<file type="M">org.jboss.as.cli.parsing.test.PropertyReplacementTestCase.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned to">2379</link>
		</links>
	</bug>
	<bug id="1226" opendate="2015-12-15 08:35:28" fixdate="2016-01-08 05:54:36" resolution="Done">
		<buginformation>
			<summary>undeploying disabled deployment stops service for same runtime-name in DeploymentUndeployHandler </summary>
			<description>





1. Start EAP 6.4.4 in domain mode and deploy application using following CLI command:




~~




[domain@localhost:9999 /] deploy /Applications/WebApp-1.war --server-groups=main-server-group --name=WebApp-1.war --runtime-name=WebApp-1.war




~~~




2. Deploy next version of application in "disabled" state with same "runtime-name"  




~~~




[domain@localhost:9999 /] deploy /Applications/WebApp-2.war --disabled --name=WebApp-2.war --runtime-name=WebApp-1.war 




~~~









3. Now use replace-deployment command to access latest version of application:




~~~




[domain@localhost:9999 /] /server-group=main-server-group:replace-deployment(name=WebApp-2.war,to-replace=WebApp-1.war)




~~~




its working fine,laest version of application is accessable.









4. Now try to undeploy old version of application




~~~




/server-group=main-server-group/deployment=WebApp-1.war:undeploy()




~~~




After undploying older version, we are not able to access(404) latest version of application(WebApp-2.war) as well.To access it we have to redeploy it. 




Same steps are working fine in Standalone mode.





</description>
			<version>2.0.4.Final</version>
			<fixedVersion>2.0.6.Final</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.server.deployment.DeploymentUndeployHandler.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned to">2564</link>
			<link type="Dependency" description="blocks">5993</link>
			<link type="Related" description="is related to">5993</link>
		</links>
	</bug>
	<bug id="1296" opendate="2016-01-13 14:10:23" fixdate="2016-01-14 04:37:17" resolution="Done">
		<buginformation>
			<summary>Rejecting the SSL certificate while connecting via CLI block indefinately </summary>
			<description>Connection to the CLI secured by SSL blocks indefinitely once I refuse to accept the server certificate.
reproduce
start standalone server and secure ManagementRealm with ssl
6.4.0 behaviour






./jboss-cli.sh -c &amp;amp;apos;/core-service=management/security-realm=ManagementRealm/server-identity=ssl:add(keystore-path=$PATH_TO_KEYSTORE, keystore-password=$PASSWORD), reload&amp;amp;apos;




./jboss-cli.sh -c 127.0.0.1:9443




...




Accept certificate? [N]o, [T]emporarily, [P]ermenantly : N




org.jboss.as.cli.CliInitializationException: Failed to connect to the controller




	at org.jboss.as.cli.impl.CliLauncher.initCommandContext(CliLauncher.java:299)




	at org.jboss.as.cli.impl.CliLauncher.main(CliLauncher.java:265)




	at org.jboss.as.cli.CommandLineMain.main(CommandLineMain.java:45)




	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)




	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)




	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)




	at java.lang.reflect.Method.invoke(Method.java:497)




	at org.jboss.modules.Module.run(Module.java:312)




	at org.jboss.modules.Main.main(Main.java:473)




Caused by: org.jboss.as.cli.CommandLineException: Unable to negotiate SSL connection with controller at localhost:9999




	at org.jboss.as.cli.impl.CommandContextImpl.tryConnection(CommandContextImpl.java:1048)




	at org.jboss.as.cli.impl.CommandContextImpl.connectController(CommandContextImpl.java:887)




	at org.jboss.as.cli.impl.CommandContextImpl.connectController(CommandContextImpl.java:863)




	at org.jboss.as.cli.impl.CliLauncher.initCommandContext(CliLauncher.java:297)




	... 8 more




$






7.0.0.ER3 behaviour






./jboss-cli.sh -c




/core-service=management/security-realm=ManagementRealm/server-identity=ssl:add(keystore-path=/path/to/keystore, keystore-password=password)




/core-service=management/management-interface=http-interface:undefine-attribute(name=socket-binding




/core-service=management/management-interface=http-interface:write-attribute(name=secure-socket-binding,value=management-https)




reload






Connect to the CLI and reject the certificate






$ ./jboss-cli.sh --controller=https-remoting://localhost:9993 -c




...




Accept certificate? [N]o, [T]emporarily, [P]ermenantly : N






You are stuck at this point, all you can do is to interrupt (Ctrl+C)






java.lang.InterruptedException




	at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireInterruptibly(AbstractQueuedSynchronizer.java:1220)




	at java.util.concurrent.locks.ReentrantLock.lockInterruptibly(ReentrantLock.java:335)




	at java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:400)




	at org.jboss.aesh.console.Console.getInput(Console.java:484)




	at org.jboss.aesh.console.Console.getInputLine(Console.java:528)




	at org.jboss.as.cli.impl.Console$Factory$1.read(Console.java:222)




	at org.jboss.as.cli.impl.Console$Factory$1.readLine(Console.java:197)




	at org.jboss.as.cli.impl.CommandContextImpl.readLine(CommandContextImpl.java:899)




	at org.jboss.as.cli.impl.CommandContextImpl.handleSSLFailure(CommandContextImpl.java:1137)




	at org.jboss.as.cli.impl.CommandContextImpl.access$1200(CommandContextImpl.java:183)




	at org.jboss.as.cli.impl.CommandContextImpl$LazyDelagatingTrustManager$1.run(CommandContextImpl.java:1897)




	at org.jboss.as.protocol.GeneralTimeoutHandler.suspendAndExecute(GeneralTimeoutHandler.java:45)




	at org.jboss.as.cli.impl.CommandContextImpl$LazyDelagatingTrustManager.checkServerTrusted(CommandContextImpl.java:1892)




	at sun.security.ssl.AbstractTrustManagerWrapper.checkServerTrusted(SSLContextImpl.java:936)




	at sun.security.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1493)




	at sun.security.ssl.ClientHandshaker.processMessage(ClientHandshaker.java:216)




	at sun.security.ssl.Handshaker.processLoop(Handshaker.java:979)




	at sun.security.ssl.Handshaker$1.run(Handshaker.java:919)




	at sun.security.ssl.Handshaker$1.run(Handshaker.java:916)




	at java.security.AccessController.doPrivileged(Native Method)




	at sun.security.ssl.Handshaker$DelegatedTask.run(Handshaker.java:1369)




	at org.xnio.ssl.JsseSslConduitEngine.handleHandshake(JsseSslConduitEngine.java:543)




	at org.xnio.ssl.JsseSslConduitEngine.wrap(JsseSslConduitEngine.java:314)




	at org.xnio.ssl.JsseSslConduitEngine.wrap(JsseSslConduitEngine.java:204)




	at org.xnio.ssl.JsseSslStreamSinkConduit.write(JsseSslStreamSinkConduit.java:98)




	at org.xnio.ssl.JsseSslStreamSinkConduit.write(JsseSslStreamSinkConduit.java:72)




	at org.xnio.conduits.ConduitStreamSinkChannel.write(ConduitStreamSinkChannel.java:150)




	at org.xnio.http.HttpUpgrade$HttpUpgradeState$StringWriteListener.handleEvent(HttpUpgrade.java:385)




	at org.xnio.http.HttpUpgrade$HttpUpgradeState$StringWriteListener.handleEvent(HttpUpgrade.java:372)




	at org.xnio.ChannelListeners.invokeChannelListener(ChannelListeners.java:92)




	at org.xnio.conduits.WriteReadyHandler$ChannelListenerHandler.writeReady(WriteReadyHandler.java:65)




	at org.xnio.nio.NioSocketConduit.handleReady(NioSocketConduit.java:93)




	at org.xnio.nio.WorkerThread.run(WorkerThread.java:559)




Failed to connect to the controller: Unable to negotiate SSL connection with controller at localhost:9993





</description>
			<version>2.0.5.Final</version>
			<fixedVersion>2.0.6.Final</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.cli.impl.CommandContextImpl.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">2568</link>
		</links>
	</bug>
	<bug id="1266" opendate="2016-01-05 00:53:59" fixdate="2016-01-14 04:38:48" resolution="Done">
		<buginformation>
			<summary>Incorreclty bypass the SecurityManager and call AccessControl.checkPermission() directly</summary>
			<description>If we modify jboss-modules to remove the allPermissions by default, then change the WildflySecurityManager to avoid throwing exceptions, we get this error when starting Wildfly:






 org.jboss.msc.service.StartException in service jboss.as: Failed to start service




         at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1904)




         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)




         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)




         at java.lang.Thread.run(Thread.java:745)




 Caused by: java.security.AccessControlException: access denied ("org.jboss.as.server.security.ServerPermission" "setCurrentServiceContainer")




         at java.security.AccessControlContext.checkPermission(AccessControlContext.java:472)




         at java.security.AccessController.checkPermission(AccessController.java:884)




         at org.jboss.as.server.CurrentServiceContainer.checkPermission(CurrentServiceContainer.java:63)




         at org.jboss.as.server.CurrentServiceContainer.setServiceContainer(CurrentServiceContainer.java:56)




         at org.jboss.as.server.ApplicationServerService.start(ApplicationServerService.java:137)




         at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1948)




         at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1881)




         ... 3 more





</description>
			<version>2.0.5.Final</version>
			<fixedVersion>2.0.6.Final</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.server.deployment.service.SecuredServiceRegistry.java</file>
			<file type="M">org.jboss.as.server.CurrentServiceContainer.java</file>
		</fixedFiles>
		<links>
			<link type="Dependency" description="blocks">2543</link>
		</links>
	</bug>
	<bug id="1261" opendate="2016-01-04 17:37:05" fixdate="2016-01-14 04:39:08" resolution="Done">
		<buginformation>
			<summary>Changing the max-history attribute value for configuration-changes fails</summary>
			<description>[standalone@localhost:9990 /] /core-service=management/service=configuration-changes:write-attribute(name=max-history,value=20)
{
"outcome" =&amp;gt; "failed",
"failure-description" =&amp;gt; "WFLYCTL0158: Operation handler failed: java.lang.IllegalStateException: WFLYCTL0188: Stage MODEL is already complete",
"rolled-back" =&amp;gt; true
}</description>
			<version>2.0.5.Final</version>
			<fixedVersion>2.0.6.Final</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.domain.management.ConfigurationChangeResourceDefinition.java</file>
			<file type="M">org.wildfly.core.test.standalone.mgmt.api.core.ConfigurationChangesHistoryTestCase.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned to">2546</link>
		</links>
	</bug>
	<bug id="1292" opendate="2016-01-12 17:39:49" fixdate="2016-01-22 16:36:46" resolution="Done">
		<buginformation>
			<summary>SocketBindingManager.createMulticast/DatagramSocket(...) variants needed for unbound sockets</summary>
			<description>In order to modify the SO_REUSEADDR option of a multicast or datagram socket, the socket must be unbound - otherwise the behavior is undefined.  See:
http://docs.oracle.com/javase/8/docs/api/java/net/DatagramSocket.html#setReuseAddress-boolean-
To support this (as required for JGroups 3.6.7.Final), SocketBindingManager needs methods to create unbound datagram/multicast sockets.  The current methods that accept a SocketAddress throw an ISE when a null address is used.
Setting priority to blocker to encourage inclusion into 2.0.x.</description>
			<version>2.0.5.Final</version>
			<fixedVersion>2.0.8.Final</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.network.SocketBindingManager.java</file>
			<file type="M">org.jboss.as.network.SocketBindingManagerImpl.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned to">2747</link>
			<link type="Dependency" description="blocks">5981</link>
		</links>
	</bug>
	<bug id="1232" opendate="2015-12-16 08:34:12" fixdate="2016-01-23 00:39:02" resolution="Done">
		<buginformation>
			<summary>Adjust patching tests to use merged patches</summary>
			<description>WFCORE-838 introduced a new way of joining multiple patches together - merging them into one. This needs some test coverage in patching TS.</description>
			<version>2.0.4.Final</version>
			<fixedVersion>2.0.8.Final</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.test.integration.management.util.CLIWrapper.java</file>
			<file type="M">org.jboss.as.test.patching.CliUtilsForPatching.java</file>
			<file type="M">org.jboss.as.test.patching.PatchingTestUtil.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">2429</link>
		</links>
	</bug>
	<bug id="1257" opendate="2015-12-31 04:51:13" fixdate="2016-01-23 00:40:33" resolution="Done">
		<buginformation>
			<summary>support query filter implementation in MBeanServerConnection</summary>
			<description>There is no implementation for query filter in MBeanServerConnection, marked as TODO






ModelControllerMBeanHelper.java






    Set&amp;lt;ObjectName&amp;gt; queryNames(final ObjectName name, final QueryExp query) {




        return new RootResourceIterator&amp;lt;Set&amp;lt;ObjectName&amp;gt;&amp;gt;(accessControlUtil, getRootResourceAndRegistration().getResource(),




                new ObjectNameMatchResourceAction&amp;lt;Set&amp;lt;ObjectName&amp;gt;&amp;gt;(name) {









            Set&amp;lt;ObjectName&amp;gt; set = new HashSet&amp;lt;ObjectName&amp;gt;();









            @Override




            public boolean onResource(ObjectName resourceName) {




                if (name == null || name.apply(resourceName)) {




                    //TODO check query




                    set.add(resourceName);




                }




                return true;




            }









            @Override




            public Set&amp;lt;ObjectName&amp;gt; getResult() {




                if (set.size() == 1 &amp;amp;&amp;amp; set.contains(ModelControllerMBeanHelper.createRootObjectName(domain))) {




                  return Collections.emptySet();




                }




                return set;




            }




        }).iterate();




    }





</description>
			<version>2.0.5.Final</version>
			<fixedVersion>2.0.8.Final</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.jmx.model.ModelControllerMBeanHelper.java</file>
			<file type="M">org.jboss.as.jmx.ModelControllerMBeanTestCase.java</file>
			<file type="M">org.jboss.as.jmx.model.ModelControllerMBeanServerPlugin.java</file>
			<file type="M">org.jboss.as.jmx.MBeanServerService.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned to">2542</link>
		</links>
	</bug>
	<bug id="1331" opendate="2016-01-25 18:50:37" fixdate="2016-01-25 23:22:13" resolution="Done">
		<buginformation>
			<summary>CLI input redirection regression</summary>
			<description>The original issue WFCORE-877 was fixed but later re-introduced with the fix for WFCORE-1218.</description>
			<version>2.0.7.Final</version>
			<fixedVersion>2.0.8.Final</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.cli.impl.CommandContextImpl.java</file>
			<file type="M">org.jboss.as.cli.impl.Console.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">2890</link>
		</links>
	</bug>
	<bug id="1281" opendate="2016-01-08 08:54:33" fixdate="2016-01-26 08:41:58" resolution="Done">
		<buginformation>
			<summary>NPE in principal-to-group group searching</summary>
			<description>In case when ldap authorization with principal-to-group group searching is used in security realm and LDAP entry found by value of &amp;amp;apos;group-attribute&amp;amp;apos; does not include attribute mentioned in &amp;amp;apos;group-name-attribute&amp;amp;apos; then it causes authentication fail. It is caused by missing null check for groupNameAttr and hidden NPE thrown from [1].
[1] https://github.com/wildfly/wildfly-core/blob/18393273a1c9e464fb0cc959795118fd5a453904/domain-management/src/main/java/org/jboss/as/domain/management/security/LdapGroupSearcherFactory.java#L301</description>
			<version>2.0.5.Final</version>
			<fixedVersion></fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.domain.management.logging.DomainManagementLogger.java</file>
			<file type="M">org.jboss.as.domain.management.security.SecurityRealmAddHandler.java</file>
			<file type="M">org.jboss.as.domain.management.security.realms.LdapTestSuite.java</file>
			<file type="M">org.jboss.as.domain.management.security.LdapGroupSearcherFactory.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">2608</link>
		</links>
	</bug>
	<bug id="1288" opendate="2016-01-11 18:27:07" fixdate="2016-01-26 12:21:44" resolution="Done">
		<buginformation>
			<summary>installing CP over one-off fails if the modules patched by the one-off are not patched in the CP</summary>
			<description>If a CP is installed over active one-off patches, the patch application may fail if the CP does not contain updates for the modules that were patched by the one-offs.
Normally, CP patches accumulate the one-off patches released since the previous CP which is, probably, why this bug has not been discovered for a long time.</description>
			<version>1.0.1.Final</version>
			<fixedVersion>2.0.8.Final</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.patching.installation.MutableTargetImpl.java</file>
			<file type="M">org.jboss.as.patching.runner.IdentityPatchContext.java</file>
			<file type="M">org.jboss.as.patching.installation.InstallationManager.java</file>
			<file type="M">org.jboss.as.patching.runner.IdentityPatchRunner.java</file>
			<file type="M">org.jboss.as.patching.runner.PatchingTask.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned to">2669</link>
			<link type="Superset" description="is incorporated by">2669</link>
		</links>
	</bug>
	<bug id="1297" opendate="2016-01-13 14:14:01" fixdate="2016-01-26 12:22:59" resolution="Done">
		<buginformation>
			<summary>deploy --url command creates invalid deployment</summary>
			<description>Command deploy --url=http://localhost/test/simple-servlet.war
creates invalid deployment
According to logs everything seems to be fine






15:03:57,505 INFO  [org.jboss.as.repository] (management-handler-thread - 2) WFLYDR0001: Content added at location /tmp/jboss-eap-7.0/standalone/data/content/5e/5e5709be9a06a9ed7bcb2100a4143400fea887/content




15:03:57,531 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-4) WFLYSRV0027: Starting deployment of "/test/simple-servlet.war" (runtime-name: "/test/simple-servlet.war")




15:03:58,238 INFO  [org.wildfly.extension.undertow] (ServerService Thread Pool -- 62) WFLYUT0021: Registered web context: //test/simple-servlet




15:03:58,320 INFO  [org.jboss.as.server] (management-handler-thread - 2) WFLYSRV0010: Deployed "/test/simple-servlet.war" (runtime-name : "/test/simple-servlet.war")






but web context http://localhost:8080//test/simple-servlet isn&amp;amp;apos;t accessible, it returns 404 - Not Found. 
(simple-servlet.war doesn&amp;amp;apos;t contain jboss-web.xml, so no context root is defined there)
</description>
			<version>2.0.6.Final</version>
			<fixedVersion>2.0.8.Final</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.cli.handlers.DeployHandler.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">2768</link>
			<link type="Related" description="relates to">367</link>
		</links>
	</bug>
	<bug id="1311" opendate="2016-01-19 22:40:20" fixdate="2016-01-27 19:40:41" resolution="Done">
		<buginformation>
			<summary>WFCORE-893 Fix breaks mixed-domain</summary>
			<description>The WFCORE-893 fix breaks mixed-domain use cases by adding subsystem=io if its not present. That&amp;amp;apos;s ok for standalone, but in a domain it means a subsystem not understood by legacy slaves will get added into profiles used by those slaves. Which will fail.
I&amp;amp;apos;ve considered doing some sort of transformer trick to discard this subsystem if its config is default, but I suspect it&amp;amp;apos;s better to just not do the WFCORE-893 thing on the DC.
Discarding might be ok if we just do a resource transformer discard but reject all ops thereafter. Idea being that if the io config is default, matching what legacy slaves did, then we let the slave boot. Then any subsequent op must be either pointless or moving away from default, and must be rejected.
But still, just not doing the WFCORE-893 thing on the DC is probably better. Or at least simpler right now.</description>
			<version>2.0.7.Final</version>
			<fixedVersion>2.0.8.Final</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.remoting.RemotingExtension.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned to">2898</link>
		</links>
	</bug>
	<bug id="1229" opendate="2015-12-15 22:24:13" fixdate="2016-01-29 22:35:27" resolution="Done">
		<buginformation>
			<summary>Reloading the embed host controller logs ERROR messages</summary>
			<description>Embed host controller sometime logs ERROR message while booting up after the reload (&amp;amp;apos;reload --host=master --admin-only=true&amp;amp;apos;).






ERROR [org.jboss.as.controller.management-operation] (main) WFLYCTL0013: Operation ("read-attribute") failed - address: ([("host" =&amp;gt; "master")]) - failure description: "WFLYCTL0030: No resource definition is registered for address [(\"host\" =&amp;gt; \"master\")]"






My initial thought on this was that issue is reproducible only on virtualized systems as I saw the error only a few times on my local machine, but I tried some bare-metal servers in MWQE lab and the error poped-up quite often there.
Reproducer job (#6 and #7 ran with 7.0.0.ER2 bits) :
 - https://jenkins.mw.lab.eng.bos.redhat.com/hudson/job/eap-7x-cli-embed-host-reload/
In extreme cases, error can appear after every other reload operation (46 out of 99)
 - https://jenkins.mw.lab.eng.bos.redhat.com/hudson/job/eap-7x-cli-embed-host-reload/7/jdk=java1.8,label_exp=eap-sustaining&amp;amp;&amp;amp;EAP-RHEL7/console</description>
			<version>2.0.2.Final</version>
			<fixedVersion>2.0.8.Final</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.domain.controller.operations.coordination.PrepareStepHandler.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">2166</link>
		</links>
	</bug>
	<bug id="1309" opendate="2016-01-19 13:43:54" fixdate="2016-02-03 08:13:21" resolution="Done">
		<buginformation>
			<summary>Applying patch - "no space available" not specific enough</summary>
			<description>Copy of https://bugzilla.redhat.com/show_bug.cgi?id=1299160:
Patch apply can fail if there is not enough free space, however the message does not indicate what device does not have any free space.  Users assume there is not enough free space on the drive where the JBoss install they are applying the patch to, however it appears this may or may not be the case.
Patch apply uses tmp space and if there is not enough tmp space it will fail with this message as well.  The message should be more explicit as to where there is no space so that the user knows which drive to check.
[disconnected /] patch apply /path/to/jboss-eap-6.2.4-patch.zip
java.io.IOException: No space left on device</description>
			<version>2.0.7.Final</version>
			<fixedVersion></fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.patching.runner.PatchToolImpl.java</file>
			<file type="M">org.jboss.as.patching.IoUtils.java</file>
			<file type="M">org.jboss.as.patching.logging.PatchLogger.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">2881</link>
		</links>
	</bug>
	<bug id="1353" opendate="2016-02-02 22:58:33" fixdate="2016-02-15 20:05:37" resolution="Done">
		<buginformation>
			<summary>Cannot clone or ad-hoc describe legacy extensions</summary>
			<description>Trying to clone a profile that includes legacy extensions results in this failure (which is buried and not properly reported, but that&amp;amp;apos;s a different problem):
WFLYCTL0309: Legacy extension &amp;amp;apos;org.jboss.as.web&amp;amp;apos; is not supported on servers running this version. The extension is only supported for use by hosts running a previous release in a mixed-version managed domain
It&amp;amp;apos;s created by UnsupportedSubsystemDescribeHandler.
That failure made some sense when the only use of the &amp;amp;apos;describe&amp;amp;apos; op was by an HC launching a domain server, but now &amp;amp;apos;describe&amp;amp;apos; is also an impl detail of the &amp;amp;apos;clone&amp;amp;apos; op, and describe may also be executed independently by users.
We need to distinguish the server launch case from other uses and only fail in the former.</description>
			<version>2.0.10.Final</version>
			<fixedVersion>2.1.0.CR2</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.domain.controller.operations.ProfileDescribeHandler.java</file>
			<file type="M">org.jboss.as.controller.operations.common.GenericSubsystemDescribeHandler.java</file>
			<file type="M">org.jboss.as.threads.ThreadsSubsystemTestCase.java</file>
			<file type="M">org.jboss.as.controller.extension.UnsupportedSubsystemDescribeHandler.java</file>
			<file type="M">org.jboss.as.host.controller.DomainModelControllerService.java</file>
			<file type="M">org.jboss.as.threads.ThreadsSubsystem11TestCase.java</file>
			<file type="M">org.jboss.as.controller.descriptions.ModelDescriptionConstants.java</file>
		</fixedFiles>
		<links>
			<link type="Dependency" description="blocks">1340</link>
		</links>
	</bug>
	<bug id="1354" opendate="2016-02-03 00:19:08" fixdate="2016-02-15 20:05:47" resolution="Done">
		<buginformation>
			<summary>Cannot clone a profile with a remoting subsystem but no io subsystem</summary>
			<description>The remoting subsystem added a requirement for the new io subsystem&amp;amp;apos;s worker capability, but it has special logic such that the requirement is only added if an endpoint resource is configured. So, legacy configs (pre-io) won&amp;amp;apos;t have that resource, so there is no requirement.
This breaks down in the case of the profile &amp;amp;apos;clone&amp;amp;apos; op, as a placeholder resource we add for the endpoint (to allow reads of the default endpoint config data) ends up getting &amp;amp;apos;described&amp;amp;apos; and added by the cloning process. So that added resource triggers an unmet requirement for the io worker:






[domain@localhost:9990 /] /profile=default:clone(to-profile=test)




{




    "outcome" =&amp;gt; "failed",




    "failure-description" =&amp;gt; {"domain-failure-description" =&amp;gt; "WFLYCTL0369: Required capabilities are not available:




    org.wildfly.io.worker.default in context &amp;amp;apos;profile=test&amp;amp;apos;; There are no known registration points which can provide this capability."},




    "rolled-back" =&amp;gt; true




}






I&amp;amp;apos;m not sure how to deal with this; some sort of marker is needed to disable &amp;amp;apos;describing&amp;amp;apos; that placeholder resource.</description>
			<version>2.0.10.Final</version>
			<fixedVersion>2.1.0.CR2</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.subsystem.test.AbstractSubsystemBaseTest.java</file>
			<file type="M">org.jboss.as.remoting.RemotingExtension.java</file>
		</fixedFiles>
		<links>
			<link type="Dependency" description="blocks">1340</link>
		</links>
	</bug>
	<bug id="1369" opendate="2016-02-15 08:52:37" fixdate="2016-02-22 17:01:44" resolution="Done">
		<buginformation>
			<summary>Audit logging to TCP syslog is stopped after syslog restart</summary>
			<description>In case when audit logging to TCP syslog is enabled and syslog server is restarted then audit logging to syslog is stopped. UDP works correctly. It can be related to issue [1].
[1] https://issues.jboss.org/browse/LOGMGR-123</description>
			<version>2.0.10.Final</version>
			<fixedVersion>2.1.0.Final</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.audit.SyslogAuditLogHandler.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">3404</link>
		</links>
	</bug>
	<bug id="1406" opendate="2016-02-22 20:01:10" fixdate="2016-02-26 16:55:38" resolution="Done">
		<buginformation>
			<summary>CLI client freezes for undefined security realm</summary>
			<description>During work, CLI freezes randomly. See attached thread dump which was taken on Fedora 23.</description>
			<version>2.1.0.CR1</version>
			<fixedVersion>2.1.0.Final</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.cli.impl.CommandContextImpl.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">3509</link>
		</links>
	</bug>
	<bug id="1418" opendate="2016-03-01 16:56:03" fixdate="2016-03-04 21:12:30" resolution="Done">
		<buginformation>
			<summary>Reloading host-controller via http-api puts the HC into unresponsive state</summary>
			<description>Reloading host-controller via http-api puts the HC into unresponsive state.
reproduce
 - create an administrative user admin:asdasd@2
 - start a domain
 - reload a server via http api






curl --digest -L -D - http://localhost:9990/management --header "Content-Type: application/json" -d &amp;amp;apos;{"operation":"reload","name":"", "address":{"host" : "master"},"json.pretty":1}&amp;amp;apos; -u admin:asdasd@2






actual
Default server instances are stopped, HC is left in unresponsive state.
Keeping the domain alive, following message will appear in 5 minutes, domain will become responsive again after that.






[Host  Controller] 04:47:23,966 ERROR  [org.jboss.as.controller.management-operation] (management task-7)  WFLYCTL0349: Timeout after [300] seconds waiting for service container  stability while finalizing an operation. Process must be restarted. Step  that first updated the service container was &amp;amp;apos;reload&amp;amp;apos; at address  &amp;amp;apos;[("host" =&amp;gt; "master")]&amp;amp;apos;






expected
Domain is reloaded
additional info
The issue was introduced by fix for JBEAP-2751 - https://github.com/jbossas/wildfly-core-eap/commit/4986773a51fbf43ad911aecc403f7eb90e72a8c2
thread dump of unresponsive HC
http://pastebin.test.redhat.com/348732
I am unable to reproduce locally, but issue can be easily reproduced on slower servers in MWQE lab. SSLMasterSlave*WayTestCase using reload via http-api cousing failures in domain modules of wf-core testsuite (e.g. eap-7x-as-testsuite-test-core-rhel )
Regression against 7.0.0.ER4. I was able to reproduce with the latest wildfly-core bits as well (1be598e)
</description>
			<version>2.0.10.Final</version>
			<fixedVersion>2.1.0.Final</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.server.operations.HttpManagementAddHandler.java</file>
			<file type="M">org.jboss.as.host.controller.operations.HttpManagementAddHandler.java</file>
			<file type="M">org.jboss.as.domain.http.server.DomainApiHandler.java</file>
			<file type="M">org.jboss.as.server.mgmt.UndertowHttpManagementService.java</file>
			<file type="M">org.jboss.as.domain.http.server.ManagementHttpServer.java</file>
		</fixedFiles>
		<links>
			<link type="Causality" description="causes">1528</link>
			<link type="Cloners" description="cloned from">3407</link>
		</links>
	</bug>
	<bug id="1432" opendate="2016-03-10 22:59:08" fixdate="2016-03-12 14:04:57" resolution="Done">
		<buginformation>
			<summary>PersistentResourceXMLDescription#marshallAttributes does not marshall defined values if they match default values</summary>
			<description></description>
			<version>2.1.0.CR1</version>
			<fixedVersion>2.1.0.Final</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.PersistentResourceXMLDescription.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned to">3792</link>
			<link type="Dependency" description="blocks">6350</link>
			<link type="Dependency" description="blocks">3773</link>
		</links>
	</bug>
	<bug id="1394" opendate="2016-02-17 11:58:11" fixdate="2016-03-14 16:38:01" resolution="Done">
		<buginformation>
			<summary>default maxPermgen is added when jvm isn&amp;apos;t configured </summary>
			<description>Default maxPermgen size is added when jvm element isn&amp;amp;apos;t specified in domain.xml/host.xml and warning is logged. 






&amp;lt;server-group name="main-server-group" profile="default"&amp;gt;




&amp;lt;!--            




    &amp;lt;jvm name="default"&amp;gt;




        &amp;lt;heap size="64m" max-size="512m"/&amp;gt;




    &amp;lt;/jvm&amp;gt;




--&amp;gt;




    &amp;lt;socket-binding-group ref="standard-sockets"/&amp;gt;




&amp;lt;/server-group&amp;gt;












WFLYHC0011: Ignoring &amp;lt;permgen&amp;gt; for jvm &amp;amp;apos;SUN&amp;amp;apos; type jvm: null






It happens because default is defined in JvmElement.java#L76
</description>
			<version>2.1.0.CR1</version>
			<fixedVersion>2.1.0.Final</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.host.controller.model.jvm.JvmElement.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">3457</link>
		</links>
	</bug>
	<bug id="1114" opendate="2015-11-06 02:08:35" fixdate="2016-03-18 17:45:32" resolution="Done">
		<buginformation>
			<summary>NPE in DeploymentStatusHandler</summary>
			<description>Saw an NPE in a test run. This is because AbstractDeploymentUnitService.getStatus() references the possibly null &amp;amp;apos;monitor&amp;amp;apos; field.






org.jboss.as.test.manualmode.deployment.DeploymentScannerOperationTestCase.testStartup: java.lang.AssertionError: null




    at org.jboss.as.test.manualmode.deployment.DeploymentScannerOperationTestCase.testStartup(DeploymentScannerOperationTestCase.java:92)




------- Stdout: -------




23:55:18,131 INFO  [org.wildfly.core.testrunner.Server] (main) Starting container with: /usr/java/jdk1.8.0_65/jre/bin/java -D[Standalone] -javaagent:/store/repository/org/jboss/byteman/byteman/2.2.1/byteman-2.2.1.jar=port:9091,boot:/store/repository/org/jboss/byteman/byteman/2.2.1/byteman-2.2.1.jar,sys:/opt/buildAgent/work/8d74ae55e497982e/testsuite/shared/target/wildfly-core-testsuite-shared-3.0.0.Alpha1-SNAPSHOT.jar -Dorg.jboss.byteman.transform.all -Dorg.jboss.byteman.verbose=true -Dmaven.repo.local=/store/repository -Xmx512m -Djboss.dist=/opt/buildAgent/work/8d74ae55e497982e/testsuite/manualmode/target/wildfly-core -Djava.net.preferIPv4Stack=false -Djava.net.preferIPv6Addresses=true -server -Dts.timeout.factor=100 -Djbossas.ts.dir=/opt/buildAgent/work/8d74ae55e497982e/testsuite/manualmode -ea -Dorg.jboss.boot.log.file=/opt/buildAgent/work/8d74ae55e497982e/testsuite/manualmode/target/wildfly-core/standalone/log/server.log -Dlogging.configuration=file:/opt/buildAgent/work/8d74ae55e497982e/testsuite/manualmode/target/wildfly-core/standalone/configuration/logging.properties -jar /opt/buildAgent/work/8d74ae55e497982e/testsuite/manualmode/target/wildfly-core/jboss-modules.jar -mp /opt/buildAgent/work/8d74ae55e497982e/testsuite/manualmode/target/wildfly-core/modules org.jboss.as.standalone -Djboss.home.dir=/opt/buildAgent/work/8d74ae55e497982e/testsuite/manualmode/target/wildfly-core -Djboss.server.base.dir=/opt/buildAgent/work/8d74ae55e497982e/testsuite/manualmode/target/wildfly-core/standalone -Djboss.server.log.dir=/opt/buildAgent/work/8d74ae55e497982e/testsuite/manualmode/target/wildfly-core/standalone/log -Djboss.server.config.dir=/opt/buildAgent/work/8d74ae55e497982e/testsuite/manualmode/target/wildfly-core/standalone/configuration -c=standalone.xml -bmanagement=::1 -Djboss.http.port=8080 -Djboss.bind.address=::1 




23:55:18,299 INFO  [org.xnio] (main) XNIO version 3.3.2.Final




TransformListener() : accepting requests on localhost:9091




23:55:18,427 INFO  [org.xnio.nio] (main) XNIO NIO Implementation Version 3.3.2.Final




23:55:18,469 INFO  [org.jboss.remoting] (main) JBoss Remoting version 4.0.14.Final




 [0m23:55:18,781 INFO  [org.jboss.modules] (main) JBoss Modules version 1.4.4.Final




 [0m [0m23:55:19,059 INFO  [org.jboss.msc] (main) JBoss MSC version 1.2.6.Final




 [0m [0m23:55:19,150 INFO  [org.jboss.as] (MSC service thread 1-4) WFLYSRV0049: WildFly Core 3.0.0.Alpha1-SNAPSHOT "Kenny" starting




 [0m [0m23:55:19,716 INFO  [org.jboss.as.server] (Controller Boot Thread) WFLYSRV0039: Creating http management service using socket-binding (management-http)




 [0m [0m23:55:19,739 INFO  [org.xnio] (MSC service thread 1-2) XNIO version 3.3.2.Final




 [0m [0m23:55:19,747 INFO  [org.xnio.nio] (MSC service thread 1-2) XNIO NIO Implementation Version 3.3.2.Final




 [0m [0m23:55:19,799 INFO  [org.jboss.remoting] (MSC service thread 1-2) JBoss Remoting version 4.0.14.Final




 [0m [33m23:55:19,896 WARN  [org.jboss.as.domain.http.api.undertow] (MSC service thread 1-4) WFLYDMHTTP0003: Unable to load console module for slot main, disabling console




 [0m [0m23:55:20,084 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0060: Http management interface listening on http://[::1]:9990/management




 [0m [0m23:55:20,084 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0051: Admin console listening on http://[::1]:9990




 [0m [0m23:55:20,084 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0025: WildFly Core 3.0.0.Alpha1-SNAPSHOT "Kenny" started in 1710ms - Started 55 of 57 services (15 services are lazy, passive or on-demand)




 [0m [0m23:55:20,610 INFO  [org.jboss.as.repository] (DeploymentScanner-threads - 2) WFLYDR0001: Content added at location /opt/buildAgent/work/8d74ae55e497982e/testsuite/manualmode/target/wildfly-core/standalone/data/content/21/5cf647697bfbd1ed32b458a4568c01fb6e8dd6/content




 [0m [0m23:55:20,628 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-4) WFLYSRV0027: Starting deployment of "deployment-one.jar" (runtime-name: "deployment-one.jar")




 [0m [0m23:55:20,669 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) WFLYSRV0010: Deployed "deployment-one.jar" (runtime-name : "deployment-one.jar")




 [0m [0m23:55:21,399 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-4) WFLYSRV0028: Stopped deployment deployment-one.jar (runtime-name: deployment-one.jar) in 6ms




 [0m [31m23:55:21,403 ERROR [org.jboss.as.controller.management-operation] (management-handler-thread - 2) WFLYCTL0013: Operation ("read-attribute") failed - address: ([("deployment" =&amp;gt; "deployment-one.jar")]): java.lang.NullPointerException




    at org.jboss.as.server.deployment.AbstractDeploymentUnitService.getStatus(AbstractDeploymentUnitService.java:111)




    at org.jboss.as.server.deployment.DeploymentStatusHandler$1.execute(DeploymentStatusHandler.java:61)




    at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:890)




    at org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:659)




    at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:370)




    at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1341)




    at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:392)




    at org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:217)




    at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.doExecute(ModelControllerClientOperationHandler.java:207)




    at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.access$300(ModelControllerClientOperationHandler.java:129)




    at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:151)




    at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:147)




    at java.security.AccessController.doPrivileged(Native Method)




    at javax.security.auth.Subject.doAs(Subject.java:422)




    at org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:92)




    at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1.execute(ModelControllerClientOperationHandler.java:147)




    at org.jboss.as.protocol.mgmt.AbstractMessageHandler$ManagementRequestContextImpl$1.doExecute(AbstractMessageHandler.java:363)




    at org.jboss.as.protocol.mgmt.AbstractMessageHandler$AsyncTaskRunner.run(AbstractMessageHandler.java:465)




    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)




    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)




    at java.lang.Thread.run(Thread.java:745)




    at org.jboss.threads.JBossThread.run(JBossThread.java:320)





</description>
			<version>2.0.0.Final</version>
			<fixedVersion>2.2.0.CR1, 3.0.0.Alpha1</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.server.deployment.AbstractDeploymentUnitService.java</file>
		</fixedFiles>
	</bug>
	<bug id="1029" opendate="2015-10-02 03:29:23" fixdate="2016-03-18 17:49:50" resolution="Done">
		<buginformation>
			<summary>ManagedSocketFactory doesn&amp;apos;t work for client sockets</summary>
			<description>SocketBindingManagerImpl does not work with client sockets.
It adds sockets to a map based on local address.  Client sockets that have not been bound yet do not have a local address.
This breaks the JGroups subsystem&amp;amp;apos;s ManagedSocketFactory, which uses SocketBindingManagerImpl for both server and client sockets.</description>
			<version>2.0.0.CR5</version>
			<fixedVersion>3.0.0.Alpha1</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.network.ManagedMulticastSocketBinding.java</file>
			<file type="M">org.jboss.as.network.ManagedSocketBinding.java</file>
			<file type="M">org.jboss.as.network.SocketBindingManager.java</file>
			<file type="M">org.jboss.as.network.ManagedServerSocketBinding.java</file>
			<file type="M">org.jboss.as.network.SocketBindingManagerImpl.java</file>
			<file type="M">org.jboss.as.network.ManagedDatagramSocketBinding.java</file>
		</fixedFiles>
	</bug>
	<bug id="1263" opendate="2016-01-04 20:13:11" fixdate="2016-03-18 19:27:52" resolution="Done">
		<buginformation>
			<summary>MBeanServer.queryMBeans will include the ObjectInstance for the root mbean for the jboss.as[.expr] JMX domains</summary>
			<description>ModelControllerMBeanHelper.queryMBeans is incorrectly checking for the presence of the root mbean by seeing if a Set&amp;lt;ObjectInstance&amp;gt; contains an ObjectName. Wrong type.</description>
			<version>2.0.5.Final</version>
			<fixedVersion>3.0.0.Alpha1</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.jmx.model.ModelControllerMBeanHelper.java</file>
		</fixedFiles>
	</bug>
	<bug id="1042" opendate="2015-10-07 22:27:16" fixdate="2016-03-18 20:00:22" resolution="Done">
		<buginformation>
			<summary>ExtensionRemoveHandler logs client mistakes</summary>
			<description>If a user tries to remove an extension when there are still subsystems present that come from that extension, a stack trace appears in the log:






01:02:23,542 ERROR [org.jboss.as.controller.management-operation] (ServerService Thread Pool -- 2) WFLYCTL0013: Operation ("remove") failed - address: ([("extension" =&amp;gt; "org.jboss.as.test.hc.extension")]): java.lang.IllegalStateException: WFLYCTL0219: An attempt was made to unregister extension org.jboss.as.test.hc.extension which still has subsystem HC registered




	at org.jboss.as.controller.extension.ExtensionRegistry.removeExtension(ExtensionRegistry.java:331) [wildfly-controller-2.0.0.CR7-SNAPSHOT.jar:2.0.0.CR7-SNAPSHOT]




	at org.jboss.as.controller.extension.ExtensionRemoveHandler.execute(ExtensionRemoveHandler.java:68) [wildfly-controller-2.0.0.CR7-SNAPSHOT.jar:2.0.0.CR7-SNAPSHOT]




	at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:890) [wildfly-controller-2.0.0.CR7-SNAPSHOT.jar:2.0.0.CR7-SNAPSHOT]




	at org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:659) [wildfly-controller-2.0.0.CR7-SNAPSHOT.jar:2.0.0.CR7-SNAPSHOT]




	at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:370) [wildfly-controller-2.0.0.CR7-SNAPSHOT.jar:2.0.0.CR7-SNAPSHOT]




	at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1336) [wildfly-controller-2.0.0.CR7-SNAPSHOT.jar:2.0.0.CR7-SNAPSHOT]




	at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:392) [wildfly-controller-2.0.0.CR7-SNAPSHOT.jar:2.0.0.CR7-SNAPSHOT]




	at org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:217) [wildfly-controller-2.0.0.CR7-SNAPSHOT.jar:2.0.0.CR7-SNAPSHOT]






That&amp;amp;apos;s really just a client mistake and there&amp;amp;apos;s no reason to log it in the server. ExtensionRemoveHandler can catch the ISE thrown by ExtensionRegistry.removeExtension and convert it to an OperationFailedException.</description>
			<version>2.0.0.CR6</version>
			<fixedVersion>2.2.0.CR1, 3.0.0.Alpha1</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.extension.ExtensionRemoveHandler.java</file>
		</fixedFiles>
		<links>
			<link type="Related" description="is related to">1041</link>
		</links>
	</bug>
	<bug id="1306" opendate="2016-01-18 12:39:39" fixdate="2016-03-18 20:00:58" resolution="Done">
		<buginformation>
			<summary>SlaveReconnectTestCase fails on slow systems</summary>
			<description>Description of problem:
SlaveReconnectTestCase from wildfly-core fails intermittently with IBM JDK:

org.jboss.as.test.integration.domain.slavereconnect.SlaveReconnectTestCase#test01_OrderedExtensionsAndDeployments
org.jboss.as.test.integration.domain.slavereconnect.SlaveReconnectTestCase#test02_DeploymentOverlays

How reproducible:

10% if you run single test from TS on IBM JDK
always if you run all tests from testsuite on IBM JDK

Steps to Reproduce:

mvn install -Dmaven.repo.local=$MAVEN_REPO_LOCAL -fae -Dnode0=$MYTESTIP_1 -Dmcast=$MCAST_ADDR -DfailIfNoTests=false -Dts.domain -Dtest=SlaveReconnectTestCase

test01_OrderedExtensionsAndDeployments results:






Stacktrace:




org.jboss.as.test.integration.management.util.MgmtOperationException: Management operation failed.




	at org.jboss.as.test.integration.domain.management.util.DomainTestUtils.executeForResult(DomainTestUtils.java:160)




	at org.jboss.as.test.integration.domain.slavereconnect.DeploymentScenario.undeploy(DeploymentScenario.java:261)




	at org.jboss.as.test.integration.domain.slavereconnect.DeploymentScenario.tearDownDomain(DeploymentScenario.java:123)




	at org.jboss.as.test.integration.domain.slavereconnect.SlaveReconnectTestCase.testReconnect(SlaveReconnectTestCase.java:156)




	at org.jboss.as.test.integration.domain.slavereconnect.SlaveReconnectTestCase.test01_OrderedExtensionsAndDeployments(SlaveReconnectTestCase.java:93)














Standard Output




INFO  [org.xnio] XNIO version 3.3.4.Final-redhat-1




INFO  [org.xnio.nio] XNIO NIO Implementation Version 3.3.4.Final-redhat-1




INFO  [org.jboss.remoting] JBoss Remoting version 4.0.18.Final-redhat-1




&amp;amp;amp#27;[0m06:48:48,668 INFO  [org.jboss.modules] (main) JBoss Modules version 1.5.0.Final-redhat-1




&amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:48:49,375 INFO  [org.jboss.as.process.Host Controller.status] (main) WFLYPC0018: Starting process &amp;amp;apos;Host Controller&amp;amp;apos;




&amp;amp;amp#27;[0m[Host Controller] &amp;amp;amp#27;[0m06:48:54,053 INFO  [org.jboss.modules] (main) JBoss Modules version 1.5.0.Final-redhat-1&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:48:54,686 INFO  [org.jboss.msc] (main) JBoss MSC version 1.2.6.Final-redhat-1&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:48:54,927 INFO  [org.jboss.as] (MSC service thread 1-6) WFLYSRV0049: WildFly Core 2.0.6.Final-redhat-SNAPSHOT "Kenny" starting&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:48:57,111 INFO  [org.jboss.as.host.controller] (Controller Boot Thread) WFLYHC0003: Creating http management service using network interface (management) port (9990) securePort (-1)&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:48:57,126 INFO  [org.xnio] (MSC service thread 1-4) XNIO version 3.3.4.Final-redhat-1&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:48:57,158 INFO  [org.xnio.nio] (MSC service thread 1-4) XNIO NIO Implementation Version 3.3.4.Final-redhat-1&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:48:57,354 INFO  [org.jboss.remoting] (MSC service thread 1-4) JBoss Remoting version 4.0.18.Final-redhat-1&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:48:57,471 INFO  [org.jboss.as.remoting] (MSC service thread 1-1) WFLYRMT0001: Listening on 10.16.95.146:9999&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[33m06:48:57,558 WARN  [org.jboss.as.domain.http.api.undertow] (MSC service thread 1-3) WFLYDMHTTP0003: Unable to load console module for slot main, disabling console&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[33m&amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:49:00,017 INFO  [org.jboss.as.host.controller] (Controller Boot Thread) WFLYHC0023: Starting server main-one&amp;amp;amp#27;[0m




&amp;amp;amp#27;[0m06:49:00,168 INFO  [org.jboss.as.process.Server:main-one.status] (ProcessController-threads - 3) WFLYPC0018: Starting process &amp;amp;apos;Server:main-one&amp;amp;apos;




&amp;amp;amp#27;[0m[Server:main-one] 06:49:06,140 INFO  [org.jboss.modules] (main) JBoss Modules version 1.5.0.Final-redhat-1




[Server:main-one] 06:49:07,555 INFO  [org.jboss.msc] (main) JBoss MSC version 1.2.6.Final-redhat-1




[Server:main-one] 06:49:08,037 INFO  [org.jboss.as] (MSC service thread 1-7) WFLYSRV0049: WildFly Core 2.0.6.Final-redhat-SNAPSHOT "Kenny" starting




[Server:main-one] 06:49:08,358 INFO  [org.xnio] (MSC service thread 1-8) XNIO version 3.3.4.Final-redhat-1




[Server:main-one] 06:49:08,398 INFO  [org.xnio.nio] (MSC service thread 1-8) XNIO NIO Implementation Version 3.3.4.Final-redhat-1




[Server:main-one] 06:49:08,492 INFO  [org.jboss.remoting] (MSC service thread 1-8) JBoss Remoting version 4.0.18.Final-redhat-1




[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:49:11,745 INFO  [org.jboss.as.host.controller] (Remoting "master:MANAGEMENT" task-3) WFLYHC0021: Server [Server:main-one] connected using connection [Channel ID 32521e75 (inbound) of Remoting connection 2868ecda to /10.16.95.146:54380]&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:49:11,876 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0060: Http management interface listening on http://10.16.95.146:9990/management&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:49:11,878 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0051: Admin console listening on http://10.16.95.146:9990&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:49:11,880 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0025: WildFly Core 2.0.6.Final-redhat-SNAPSHOT "Kenny" (Host Controller) started in 21516ms - Started 49 of 49 services (11 services are lazy, passive or on-demand)&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:49:11,895 INFO  [org.jboss.as.host.controller] (server-registration-threads - 1) WFLYHC0020: Registering server main-one&amp;amp;amp#27;[0m




INFO  [org.jboss.as.test.integration.domain.management.util.DomainLifecycleUtil] ServerIdentity{name=main-one, host=master, server-group=main-server-group} status is starting




INFO  [org.jboss.as.test.integration.domain.management.util.DomainLifecycleUtil] ServerIdentity{name=main-one, host=master, server-group=main-server-group} status is starting




INFO  [org.jboss.as.test.integration.domain.management.util.DomainLifecycleUtil] ServerIdentity{name=main-one, host=master, server-group=main-server-group} status is starting




[Server:main-one] 06:49:13,162 INFO  [org.wildfly.extension.io] (ServerService Thread Pool -- 11) WFLYIO001: Worker &amp;amp;apos;default&amp;amp;apos; has auto-configured to 8 core threads with 64 task threads based on your 4 available processors




INFO  [org.jboss.as.test.integration.domain.management.util.DomainLifecycleUtil] ServerIdentity{name=main-one, host=master, server-group=main-server-group} status is starting




INFO  [org.jboss.as.test.integration.domain.management.util.DomainLifecycleUtil] ServerIdentity{name=main-one, host=master, server-group=main-server-group} status is starting




INFO  [org.jboss.as.test.integration.domain.management.util.DomainLifecycleUtil] ServerIdentity{name=main-one, host=master, server-group=main-server-group} status is starting




[Server:main-one] 06:49:14,145 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0025: WildFly Core 2.0.6.Final-redhat-SNAPSHOT "Kenny" started in 13171ms - Started 49 of 65 services (22 services are lazy, passive or on-demand)




INFO  [org.jboss.as.test.integration.domain.management.util.DomainLifecycleUtil] All servers started in 28034 ms




INFO  [org.jboss.as.test.integration.domain.management.util.DomainLifecycleUtil] HostController started in 28294 ms




&amp;amp;amp#27;[0m06:49:19,902 INFO  [org.jboss.modules] (main) JBoss Modules version 1.5.0.Final-redhat-1




&amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:49:21,161 INFO  [org.jboss.as.process.Host Controller.status] (main) WFLYPC0018: Starting process &amp;amp;apos;Host Controller&amp;amp;apos;




&amp;amp;amp#27;[0m[Host Controller] &amp;amp;amp#27;[0m06:49:25,502 INFO  [org.jboss.modules] (main) JBoss Modules version 1.5.0.Final-redhat-1&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:49:25,956 INFO  [org.jboss.msc] (main) JBoss MSC version 1.2.6.Final-redhat-1&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:49:26,154 INFO  [org.jboss.as] (MSC service thread 1-5) WFLYSRV0049: WildFly Core 2.0.6.Final-redhat-SNAPSHOT "Kenny" starting&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:49:28,070 INFO  [org.xnio] (MSC service thread 1-6) XNIO version 3.3.4.Final-redhat-1&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:49:28,078 INFO  [org.jboss.as.host.controller] (Controller Boot Thread) WFLYHC0003: Creating http management service using network interface (management) port (19990) securePort (-1)&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:49:28,128 INFO  [org.xnio.nio] (MSC service thread 1-6) XNIO NIO Implementation Version 3.3.4.Final-redhat-1&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:49:28,292 INFO  [org.jboss.remoting] (MSC service thread 1-6) JBoss Remoting version 4.0.18.Final-redhat-1&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:49:28,418 INFO  [org.jboss.as.remoting] (MSC service thread 1-1) WFLYRMT0001: Listening on 10.16.95.146:19999&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:49:32,479 INFO  [org.jboss.as.domain.controller] (Host Controller Service Threads - 12) WFLYHC0019: Registered remote slave host "slave", WildFly 2.0.6.Final-redhat-SNAPSHOT "Kenny"&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:49:32,485 INFO  [org.jboss.as.host.controller] (Controller Boot Thread) WFLYHC0148: Connected to master host controller at remote://10.16.95.146:9999&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:49:32,645 INFO  [org.jboss.as.host.controller] (Controller Boot Thread) WFLYHC0023: Starting server main-three&amp;amp;amp#27;[0m




&amp;amp;amp#27;[0m06:49:32,769 INFO  [org.jboss.as.process.Server:main-three.status] (ProcessController-threads - 3) WFLYPC0018: Starting process &amp;amp;apos;Server:main-three&amp;amp;apos;




&amp;amp;amp#27;[0m[Server:main-three] 06:49:39,023 INFO  [org.jboss.modules] (main) JBoss Modules version 1.5.0.Final-redhat-1




[Server:main-three] 06:49:40,512 INFO  [org.jboss.msc] (main) JBoss MSC version 1.2.6.Final-redhat-1




[Server:main-three] 06:49:41,031 INFO  [org.jboss.as] (MSC service thread 1-7) WFLYSRV0049: WildFly Core 2.0.6.Final-redhat-SNAPSHOT "Kenny" starting




[Server:main-three] 06:49:41,410 INFO  [org.xnio] (MSC service thread 1-1) XNIO version 3.3.4.Final-redhat-1




[Server:main-three] 06:49:41,460 INFO  [org.xnio.nio] (MSC service thread 1-1) XNIO NIO Implementation Version 3.3.4.Final-redhat-1




[Server:main-three] 06:49:41,618 INFO  [org.jboss.remoting] (MSC service thread 1-1) JBoss Remoting version 4.0.18.Final-redhat-1




[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:49:44,879 INFO  [org.jboss.as.host.controller] (Remoting "slave:MANAGEMENT" task-6) WFLYHC0021: Server [Server:main-three] connected using connection [Channel ID 67c682e1 (inbound) of Remoting connection a80dd256 to /10.16.95.146:45011]&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:49:44,942 INFO  [org.jboss.as.host.controller] (Controller Boot Thread) WFLYHC0023: Starting server other-two&amp;amp;amp#27;[0m




&amp;amp;amp#27;[0m06:49:45,011 INFO  [org.jboss.as.process.Server:other-two.status] (ProcessController-threads - 3) WFLYPC0018: Starting process &amp;amp;apos;Server:other-two&amp;amp;apos;




&amp;amp;amp#27;[0m[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:49:45,011 INFO  [org.jboss.as.host.controller] (server-registration-threads - 1) WFLYHC0020: Registering server main-three&amp;amp;amp#27;[0m




[Server:main-three] 06:49:46,080 INFO  [org.wildfly.extension.io] (ServerService Thread Pool -- 8) WFLYIO001: Worker &amp;amp;apos;default&amp;amp;apos; has auto-configured to 8 core threads with 64 task threads based on your 4 available processors




[Server:main-three] 06:49:47,688 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0025: WildFly Core 2.0.6.Final-redhat-SNAPSHOT "Kenny" started in 14325ms - Started 50 of 66 services (23 services are lazy, passive or on-demand)




[Server:other-two] 06:49:52,242 INFO  [org.jboss.modules] (main) JBoss Modules version 1.5.0.Final-redhat-1




[Server:other-two] 06:49:53,954 INFO  [org.jboss.msc] (main) JBoss MSC version 1.2.6.Final-redhat-1




[Server:other-two] 06:49:54,394 INFO  [org.jboss.as] (MSC service thread 1-7) WFLYSRV0049: WildFly Core 2.0.6.Final-redhat-SNAPSHOT "Kenny" starting




[Server:other-two] 06:49:54,872 INFO  [org.xnio] (MSC service thread 1-1) XNIO version 3.3.4.Final-redhat-1




[Server:other-two] 06:49:54,909 INFO  [org.xnio.nio] (MSC service thread 1-1) XNIO NIO Implementation Version 3.3.4.Final-redhat-1




[Server:other-two] 06:49:55,016 INFO  [org.jboss.remoting] (MSC service thread 1-1) JBoss Remoting version 4.0.18.Final-redhat-1




[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:49:57,542 INFO  [org.jboss.as.host.controller] (Remoting "slave:MANAGEMENT" task-12) WFLYHC0021: Server [Server:other-two] connected using connection [Channel ID 4265a37a (inbound) of Remoting connection f85d1a6d to /10.16.95.146:60116]&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:49:57,626 INFO  [org.jboss.as.host.controller] (server-registration-threads - 1) WFLYHC0020: Registering server other-two&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:49:57,634 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0060: Http management interface listening on http://10.16.95.146:19990/management&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:49:57,645 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0054: Admin console is not enabled&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:49:57,646 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0025: WildFly Core 2.0.6.Final-redhat-SNAPSHOT "Kenny" (Host Controller) started in 35462ms - Started 48 of 49 services (13 services are lazy, passive or on-demand)&amp;amp;amp#27;[0m




INFO  [org.jboss.as.test.integration.domain.management.util.DomainLifecycleUtil] ServerIdentity{name=other-two, host=slave, server-group=other-server-group} status is starting




[Server:other-two] 06:49:58,512 INFO  [org.wildfly.extension.io] (ServerService Thread Pool -- 8) WFLYIO001: Worker &amp;amp;apos;default&amp;amp;apos; has auto-configured to 8 core threads with 64 task threads based on your 4 available processors




INFO  [org.jboss.as.test.integration.domain.management.util.DomainLifecycleUtil] ServerIdentity{name=other-two, host=slave, server-group=other-server-group} status is starting




INFO  [org.jboss.as.test.integration.domain.management.util.DomainLifecycleUtil] ServerIdentity{name=other-two, host=slave, server-group=other-server-group} status is starting




INFO  [org.jboss.as.test.integration.domain.management.util.DomainLifecycleUtil] ServerIdentity{name=other-two, host=slave, server-group=other-server-group} status is starting




[Server:other-two] 06:49:59,648 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0025: WildFly Core 2.0.6.Final-redhat-SNAPSHOT "Kenny" started in 13735ms - Started 50 of 66 services (23 services are lazy, passive or on-demand)




INFO  [org.jboss.as.test.integration.domain.management.util.DomainLifecycleUtil] All servers started in 44891 ms




INFO  [org.jboss.as.test.integration.domain.management.util.DomainLifecycleUtil] HostController started in 45148 ms




[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:50:03,186 INFO  [org.jboss.as.host.controller] (management-handler-thread - 1) WFLYHC0023: Starting server server-unaffected&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[33m06:50:03,189 WARN  [org.jboss.as.host.controller] (management-handler-thread - 1) WFLYHC0011: Ignoring &amp;lt;permgen&amp;gt; for jvm &amp;amp;apos;SUN&amp;amp;apos; type jvm: null&amp;amp;amp#27;[0m




&amp;amp;amp#27;[0m06:50:03,314 INFO  [org.jboss.as.process.Server:server-unaffected.status] (ProcessController-threads - 3) WFLYPC0018: Starting process &amp;amp;apos;Server:server-unaffected&amp;amp;apos;




&amp;amp;amp#27;[0m[Host Controller] &amp;amp;amp#27;[33m&amp;amp;amp#27;[0m&amp;amp;amp#27;[33m06:50:03,377 WARN  [org.jboss.as.host.controller] (ProcessControllerConnection-thread - 2) WFLYHC0011: Ignoring &amp;lt;permgen&amp;gt; for jvm &amp;amp;apos;SUN&amp;amp;apos; type jvm: null&amp;amp;amp#27;[0m




[Server:server-unaffected] 06:50:09,434 INFO  [org.jboss.modules] (main) JBoss Modules version 1.5.0.Final-redhat-1




[Server:server-unaffected] 06:50:10,574 INFO  [org.jboss.msc] (main) JBoss MSC version 1.2.6.Final-redhat-1




[Server:server-unaffected] 06:50:11,215 INFO  [org.jboss.as] (MSC service thread 1-7) WFLYSRV0049: WildFly Core 2.0.6.Final-redhat-SNAPSHOT "Kenny" starting




[Server:server-unaffected] 06:50:11,575 INFO  [org.xnio] (MSC service thread 1-1) XNIO version 3.3.4.Final-redhat-1




[Server:server-unaffected] 06:50:11,624 INFO  [org.xnio.nio] (MSC service thread 1-1) XNIO NIO Implementation Version 3.3.4.Final-redhat-1




[Server:server-unaffected] 06:50:11,738 INFO  [org.jboss.remoting] (MSC service thread 1-1) JBoss Remoting version 4.0.18.Final-redhat-1




[Host Controller] &amp;amp;amp#27;[33m&amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:50:15,128 INFO  [org.jboss.as.host.controller] (Remoting "slave:MANAGEMENT" task-3) WFLYHC0021: Server [Server:server-unaffected] connected using connection [Channel ID 7b99b49d (inbound) of Remoting connection 24f20b4a to /10.16.95.146:54148]&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:50:15,224 INFO  [org.jboss.as.host.controller] (server-registration-threads - 1) WFLYHC0020: Registering server server-unaffected&amp;amp;amp#27;[0m




[Server:server-unaffected] 06:50:17,179 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0025: WildFly Core 2.0.6.Final-redhat-SNAPSHOT "Kenny" started in 12876ms - Started 41 of 57 services (21 services are lazy, passive or on-demand)




[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:50:19,297 INFO  [org.jboss.as.host.controller] (management-handler-thread - 3) WFLYHC0023: Starting server server-affected&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[33m06:50:19,306 WARN  [org.jboss.as.host.controller] (management-handler-thread - 3) WFLYHC0011: Ignoring &amp;lt;permgen&amp;gt; for jvm &amp;amp;apos;SUN&amp;amp;apos; type jvm: null&amp;amp;amp#27;[0m




&amp;amp;amp#27;[0m06:50:19,409 INFO  [org.jboss.as.process.Server:server-affected.status] (ProcessController-threads - 3) WFLYPC0018: Starting process &amp;amp;apos;Server:server-affected&amp;amp;apos;




&amp;amp;amp#27;[0m[Host Controller] &amp;amp;amp#27;[33m&amp;amp;amp#27;[0m&amp;amp;amp#27;[33m06:50:19,466 WARN  [org.jboss.as.host.controller] (ProcessControllerConnection-thread - 2) WFLYHC0011: Ignoring &amp;lt;permgen&amp;gt; for jvm &amp;amp;apos;SUN&amp;amp;apos; type jvm: null&amp;amp;amp#27;[0m




[Server:server-affected] 06:50:24,637 INFO  [org.jboss.modules] (main) JBoss Modules version 1.5.0.Final-redhat-1




[Server:server-affected] 06:50:25,812 INFO  [org.jboss.msc] (main) JBoss MSC version 1.2.6.Final-redhat-1




[Server:server-affected] 06:50:26,126 INFO  [org.jboss.as] (MSC service thread 1-7) WFLYSRV0049: WildFly Core 2.0.6.Final-redhat-SNAPSHOT "Kenny" starting




[Server:server-affected] 06:50:26,338 INFO  [org.xnio] (MSC service thread 1-5) XNIO version 3.3.4.Final-redhat-1




[Server:server-affected] 06:50:26,366 INFO  [org.xnio.nio] (MSC service thread 1-5) XNIO NIO Implementation Version 3.3.4.Final-redhat-1




[Server:server-affected] 06:50:26,450 INFO  [org.jboss.remoting] (MSC service thread 1-5) JBoss Remoting version 4.0.18.Final-redhat-1




[Host Controller] &amp;amp;amp#27;[33m&amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:50:28,660 INFO  [org.jboss.as.host.controller] (Remoting "slave:MANAGEMENT" task-4) WFLYHC0021: Server [Server:server-affected] connected using connection [Channel ID 0b33ef0a (inbound) of Remoting connection 41562de1 to /10.16.95.146:37200]&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:50:28,858 INFO  [org.jboss.as.host.controller] (server-registration-threads - 1) WFLYHC0020: Registering server server-affected&amp;amp;amp#27;[0m




[Server:server-affected] 06:50:30,584 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0025: WildFly Core 2.0.6.Final-redhat-SNAPSHOT "Kenny" started in 10442ms - Started 41 of 57 services (21 services are lazy, passive or on-demand)




[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:50:32,698 INFO  [org.jboss.as.repository] (management-handler-thread - 6) WFLYDR0001: Content added at location /mnt/hudson_workspace/workspace/eap-7x-as-testsuite-test-core-rhel-basic-reconnect/19de6045/testsuite/domain/target/domains/SlaveReconnectTestCase/master/data/content/09/d3f8807790439e696b8317b611b3dcd3b73357/content&amp;amp;amp#27;[0m




[Server:server-affected] 06:50:33,005 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-2) WFLYSRV0027: Starting deployment of "reconnect-slave-depone.jar" (runtime-name: "reconnect-slave-depone.jar")




[Server:server-affected] 06:50:33,167 INFO  [stdout] (MSC service thread 1-5) ===&amp;gt; class org.jboss.as.test.integration.domain.slavereconnect.deployment.ServiceActivatorDeploymentOne setting property test.deployment.prop.one=one




[Server:server-affected] 06:50:33,236 INFO  [org.jboss.as.server] (ServerService Thread Pool -- 4) WFLYSRV0010: Deployed "reconnect-slave-depone.jar" (runtime-name : "reconnect-slave-depone.jar")




[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:50:33,347 INFO  [org.jboss.as.repository] (management-handler-thread - 2) WFLYDR0001: Content added at location /mnt/hudson_workspace/workspace/eap-7x-as-testsuite-test-core-rhel-basic-reconnect/19de6045/testsuite/domain/target/domains/SlaveReconnectTestCase/master/data/content/6b/bc9ff93840d04e654599ba2bfd2d8ca6dc8300/content&amp;amp;amp#27;[0m




[Server:server-affected] 06:50:33,585 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-4) WFLYSRV0027: Starting deployment of "reconnect-slave-deptwo.jar" (runtime-name: "reconnect-slave-deptwo.jar")




[Server:server-affected] 06:50:33,634 INFO  [stdout] (MSC service thread 1-1) ===&amp;gt; class org.jboss.as.test.integration.domain.slavereconnect.deployment.ServiceActivatorDeploymentTwo setting property test.deployment.prop.two=two




[Server:server-affected] 06:50:33,741 INFO  [org.jboss.as.server] (ServerService Thread Pool -- 4) WFLYSRV0010: Deployed "reconnect-slave-deptwo.jar" (runtime-name : "reconnect-slave-deptwo.jar")




[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:50:34,161 INFO  [org.jboss.as.host.controller] (Host Controller Service Threads - 23) WFLYHC0024: Stopping server main-one&amp;amp;amp#27;[0m




&amp;amp;amp#27;[0m06:50:34,174 INFO  [org.jboss.as.process.Server:main-one.status] (ProcessController-threads - 4) WFLYPC0019: Stopping process &amp;amp;apos;Server:main-one&amp;amp;apos;




&amp;amp;amp#27;[0m[Server:main-one] 06:50:34,180 INFO  [org.jboss.as.server] (Thread-9) WFLYSRV0220: Server shutdown has been requested.




[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:50:34,298 INFO  [org.jboss.as.host.controller] (Remoting "master:MANAGEMENT" task-11) WFLYHC0027: Unregistering server main-one&amp;amp;amp#27;[0m




[Server:main-one] 06:50:34,359 INFO  [org.jboss.as] (MSC service thread 1-4) WFLYSRV0050: WildFly Core 2.0.6.Final-redhat-SNAPSHOT "Kenny" stopped in 129ms




&amp;amp;amp#27;[0m06:50:34,398 INFO  [org.jboss.as.process.Server:main-one.status] (reaper for Server:main-one) WFLYPC0011: Process &amp;amp;apos;Server:main-one&amp;amp;apos; finished with an exit status of 0




&amp;amp;amp#27;[0m[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:50:34,402 INFO  [org.jboss.as.host.controller] (ProcessControllerConnection-thread - 2) WFLYHC0027: Unregistering server main-one&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[33m06:50:34,455 WARN  [org.jboss.as.domain.controller] (MSC service thread 1-3) WFLYHC0030: Connection to remote host "slave" closed unexpectedly&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[33m06:50:34,521 WARN  [org.jboss.as.host.controller] (Remoting "slave:MANAGEMENT" task-8) WFLYHC0015: Connection to remote host-controller closed. Trying to reconnect.&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[33m&amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:50:34,545 INFO  [org.jboss.as.host.controller] (Host Controller Service Threads - 14) WFLYHC0150: Trying to reconnect to master host controller.&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[33m&amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:50:34,566 INFO  [org.jboss.as] (MSC service thread 1-5) WFLYSRV0050: WildFly Core 2.0.6.Final-redhat-SNAPSHOT "Kenny" stopped in 422ms&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:50:34,573 INFO  [org.jboss.as] (MSC service thread 1-5) WFLYSRV0049: WildFly Core 2.0.6.Final-redhat-SNAPSHOT "Kenny" starting&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:50:34,914 INFO  [org.jboss.as.host.controller] (Controller Boot Thread) WFLYHC0003: Creating http management service using network interface (management) port (9990) securePort (-1)&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:50:35,021 INFO  [org.jboss.as.remoting] (MSC service thread 1-4) WFLYRMT0001: Listening on 10.16.95.146:9999&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:50:35,558 INFO  [org.jboss.as.host.controller] (Host Controller Service Threads - 14) WFLYHC0150: Trying to reconnect to master host controller.&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:50:36,112 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0060: Http management interface listening on http://10.16.95.146:9990/management&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:50:36,114 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0054: Admin console is not enabled&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:50:36,115 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0025: WildFly Core 2.0.6.Final-redhat-SNAPSHOT "Kenny" (Host Controller) started in 1539ms - Started 49 of 49 services (11 services are lazy, passive or on-demand)&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:50:36,558 INFO  [org.jboss.as.repository] (management-handler-thread - 3) WFLYDR0002: Content removed from location /mnt/hudson_workspace/workspace/eap-7x-as-testsuite-test-core-rhel-basic-reconnect/19de6045/testsuite/domain/target/domains/SlaveReconnectTestCase/master/data/content/09/d3f8807790439e696b8317b611b3dcd3b73357/content&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:50:36,650 INFO  [org.jboss.as.repository] (management-handler-thread - 4) WFLYDR0001: Content added at location /mnt/hudson_workspace/workspace/eap-7x-as-testsuite-test-core-rhel-basic-reconnect/19de6045/testsuite/domain/target/domains/SlaveReconnectTestCase/master/data/content/ab/7255f2406ac895cc3e9c8edadc609af88bf636/content&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:50:36,932 INFO  [org.jboss.as.repository] (management-handler-thread - 1) WFLYDR0002: Content removed from location /mnt/hudson_workspace/workspace/eap-7x-as-testsuite-test-core-rhel-basic-reconnect/19de6045/testsuite/domain/target/domains/SlaveReconnectTestCase/master/data/content/6b/bc9ff93840d04e654599ba2bfd2d8ca6dc8300/content&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:50:36,996 INFO  [org.jboss.as.repository] (management-handler-thread - 2) WFLYDR0001: Content added at location /mnt/hudson_workspace/workspace/eap-7x-as-testsuite-test-core-rhel-basic-reconnect/19de6045/testsuite/domain/target/domains/SlaveReconnectTestCase/master/data/content/a2/f1854f72e5888fed7ab9b24794f221f37ac757/content&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:50:37,135 INFO  [org.jboss.as.repository] (management-handler-thread - 3) WFLYDR0001: Content added at location /mnt/hudson_workspace/workspace/eap-7x-as-testsuite-test-core-rhel-basic-reconnect/19de6045/testsuite/domain/target/domains/SlaveReconnectTestCase/master/data/content/c4/0aaecf59ae8bb17142bf35da9865286082c9e5/content&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:50:37,298 INFO  [org.jboss.as] (MSC service thread 1-8) WFLYSRV0050: WildFly Core 2.0.6.Final-redhat-SNAPSHOT "Kenny" stopped in 55ms&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:50:37,307 INFO  [org.jboss.as] (MSC service thread 1-3) WFLYSRV0049: WildFly Core 2.0.6.Final-redhat-SNAPSHOT "Kenny" starting&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:50:37,622 INFO  [org.jboss.as.host.controller] (Controller Boot Thread) WFLYHC0003: Creating http management service using network interface (management) port (9990) securePort (-1)&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[33m06:50:37,692 WARN  [org.jboss.as.domain.http.api.undertow] (MSC service thread 1-1) WFLYDMHTTP0003: Unable to load console module for slot main, disabling console&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[33m&amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:50:37,705 INFO  [org.jboss.as.remoting] (MSC service thread 1-3) WFLYRMT0001: Listening on 10.16.95.146:9999&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:50:38,503 INFO  [org.jboss.as.host.controller] (Controller Boot Thread) WFLYHC0023: Starting server main-one&amp;amp;amp#27;[0m




&amp;amp;amp#27;[0m06:50:38,563 INFO  [org.jboss.as.process.Server:main-one.status] (ProcessController-threads - 4) WFLYPC0018: Starting process &amp;amp;apos;Server:main-one&amp;amp;apos;




&amp;amp;amp#27;[0m[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:50:39,654 INFO  [org.jboss.as.host.controller] (Host Controller Service Threads - 14) WFLYHC0150: Trying to reconnect to master host controller.&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[31m06:50:39,751 ERROR [org.jboss.as.controller.management-operation] (Host Controller Service Threads - 15) WFLYCTL0013: Operation ("resolve-subsystems") failed - address: ([]): java.lang.IllegalArgumentException: WFLYCTL0218: A node is already registered at &amp;amp;apos;/profile=*/subsystem=ordered-children&amp;amp;apos;&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[31m	at org.jboss.as.controller.registry.ConcreteResourceRegistration.registerSubModel(ConcreteResourceRegistration.java:215)&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[31m	at org.jboss.as.controller.extension.ExtensionRegistry$SubsystemRegistrationImpl.registerSubsystemModel(ExtensionRegistry.java:702)&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[31m	at org.jboss.as.test.integration.domain.extension.OrderedChildResourceExtension.initialize(OrderedChildResourceExtension.java:83)&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[31m	at org.jboss.as.domain.controller.operations.ApplyExtensionsHandler.initializeExtension(ApplyExtensionsHandler.java:221)&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[31m	at org.jboss.as.domain.controller.operations.ApplyExtensionsHandler.execute(ApplyExtensionsHandler.java:137)&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[31m	at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:890)&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[31m	at org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:659)&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[31m	at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:370)&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[31m	at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1344)&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[31m	at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:392)&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[31m	at org.jboss.as.controller.AbstractControllerService.internalExecute(AbstractControllerService.java:418)&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[31m	at org.jboss.as.host.controller.DomainModelControllerService.access$1100(DomainModelControllerService.java:176)&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[31m	at org.jboss.as.host.controller.DomainModelControllerService$InternalExecutor.installSlaveExtensions(DomainModelControllerService.java:1237)&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[31m	at org.jboss.as.host.controller.RemoteDomainConnectionService.resolveSubsystems(RemoteDomainConnectionService.java:544)&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[31m	at org.jboss.as.host.controller.RemoteDomainConnectionService.access$1000(RemoteDomainConnectionService.java:131)&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[31m	at org.jboss.as.host.controller.RemoteDomainConnectionService$2.resolveSubsystemVersions(RemoteDomainConnectionService.java:508)&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[31m	at org.jboss.as.host.controller.RemoteDomainConnection.resolveSubsystemVersions(RemoteDomainConnection.java:297)&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[31m	at org.jboss.as.host.controller.RemoteDomainConnection$HostControllerConnectRequest$1.execute(RemoteDomainConnection.java:389)&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[31m	at org.jboss.as.protocol.mgmt.AbstractMessageHandler$ManagementRequestContextImpl$1.doExecute(AbstractMessageHandler.java:363)&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[31m	at org.jboss.as.protocol.mgmt.AbstractMessageHandler$AsyncTaskRunner.run(AbstractMessageHandler.java:472)&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[31m	at java.util.concurr[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:50:39,772 INFO  [org.jboss.as.protocol] (Remoting "master:MANAGEMENT" I/O-1) WFLYPRT0057:  cancelled task by interrupting thread Thread[Host Controller Service Threads - 42,5,Host Controller Service Threads]&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[31m06:50:39,774 ERROR [org.jboss.as.controller.management-operation] (Host Controller Service Threads - 42) WFLYCTL0013: Operation ("read-master-domain-model") failed - address: ([]): java.lang.IllegalStateException: java.lang.InterruptedException&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[31m	at org.jboss.as.host.controller.mgmt.HostControllerRegistrationHandler$RegistrationContext.executeBlocking(HostControllerRegistrationHandler.java:617)&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[31m	at org.jboss.as.host.controller.mgmt.HostControllerRegistrationHandler$RegistrationContext.processSubsystems(HostControllerRegistrationHandler.java:456)&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[31m	at org.jboss.as.host.controller.mgmt.HostControllerRegistrationHandler$RegistrationContext.access$900(HostControllerRegistrationHandler.java:334)&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[31m	at org.jboss.as.host.controller.mgmt.HostControllerRegistrationHandler$HostRegistrationStepHandler.execute(HostControllerRegistrationHandler.java:327)&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[31m	at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:890)&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[31m	at org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:659)&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[31m	at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:370)&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[31m	at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1344)&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[31m	at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:392)&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[31m	at org.jboss.as.controller.AbstractControllerService.internalExecute(AbstractControllerService.java:408)&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[31m	at org.jboss.as.host.controller.DomainModelControllerService.access$900(DomainModelControllerService.java:176)&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[31m	at org.jboss.as.host.controller.DomainModelControllerService$InternalExecutor.execute(DomainModelControllerService.java:1230)&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[31m	at org.jboss.as.host.controller.mgmt.HostControllerRegistrationHandler$RegistrationContext.processRegistration(HostControllerRegistrationHandler.java:424)&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[31m	at org.jboss.as.host.controller.mgmt.HostControllerRegistrationHandler$RegistrationContext.access$400(HostControllerRegistrationHandler.java:334)&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[31m	at org.jboss.as.host.controller.mgmt.HostControllerRegistrationHandler$InitiateRegistrationHandler$1.execute(HostControllerRegistrationHandler.java:230)&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[31m	at org.jboss.as.protocol.mgmt.AbstractMessageHandler$ManagementRequestContextImpl$1.doExecute(AbstractMessageHandler.java:363)&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[31m	at org.jboss.as.protocol.mgmt.AbstractMessageHandler$AsyncTaskRunner.run(AbstractMessageHandler.java:472)&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[31m	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1153)&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[31m	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[31m	at java.lang.Thread.run(Thread.java:785)&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[31m	at org.jboss.threads.JBossThread.run(JBossThread.java:320)&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[31mCaused by: java.lang.InterruptedException&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[31m	at java.lang.Object.wait(Native Method)&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[31m	at java.lang.Object.wait(Object.java:172)&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[31m	at org.jboss.threads.AsyncFutureTask.await(AsyncFutureTask.java:192)&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[31m	at org.jboss.threads.AsyncFutureTask.get(AsyncFutureTask.java:266)&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[31m	at org.jboss.as.host.controller.mgmt.HostControllerRegistrationHandler$RegistrationContext.executeBlocking(HostControllerRegistrationHandler.java:614)&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[31m	... 20 more&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[31m&amp;amp;amp#27;[0m




ent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1153)&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[31m	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[31m	at java.lang.Thread.run(Thread.java:785)&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[31m	at org.jboss.threads.JBossThread.run(JBossThread.java:320)&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[31m&amp;amp;amp#27;[0m




[Server:main-one] 06:50:43,912 INFO  [org.jboss.modules] (main) JBoss Modules version 1.5.0.Final-redhat-1




[Server:main-one] 06:50:44,982 INFO  [org.jboss.msc] (main) JBoss MSC version 1.2.6.Final-redhat-1




[Server:main-one] 06:50:45,418 INFO  [org.jboss.as] (MSC service thread 1-7) WFLYSRV0049: WildFly Core 2.0.6.Final-redhat-SNAPSHOT "Kenny" starting




[Server:main-one] 06:50:45,668 INFO  [org.xnio] (MSC service thread 1-2) XNIO version 3.3.4.Final-redhat-1




[Server:main-one] 06:50:45,729 INFO  [org.xnio.nio] (MSC service thread 1-2) XNIO NIO Implementation Version 3.3.4.Final-redhat-1




[Server:main-one] 06:50:45,880 INFO  [org.jboss.remoting] (MSC service thread 1-2) JBoss Remoting version 4.0.18.Final-redhat-1




[Host Controller] &amp;amp;amp#27;[31m&amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:50:48,783 INFO  [org.jboss.as.host.controller] (Host Controller Service Threads - 14) WFLYHC0150: Trying to reconnect to master host controller.&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[31m&amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:50:49,461 INFO  [org.jboss.as.host.controller] (Remoting "master:MANAGEMENT" task-16) WFLYHC0021: Server [Server:main-one] connected using connection [Channel ID 65fce631 (inbound) of Remoting connection 33bba145 to /10.16.95.146:43301]&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[33m06:50:49,862 WARN  [org.jboss.as.host.controller] (Host Controller Service Threads - 17) WFLYHC0011: Ignoring &amp;lt;permgen&amp;gt; for jvm &amp;amp;apos;SUN&amp;amp;apos; type jvm: null&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[33m&amp;amp;amp#27;[0m&amp;amp;amp#27;[33m06:50:49,870 WARN  [org.jboss.as.host.controller] (Host Controller Service Threads - 17) WFLYHC0011: Ignoring &amp;lt;permgen&amp;gt; for jvm &amp;amp;apos;SUN&amp;amp;apos; type jvm: null&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[33m&amp;amp;amp#27;[0m&amp;amp;amp#27;[33m06:50:49,877 WARN  [org.jboss.as.host.controller] (Host Controller Service Threads - 17) WFLYHC0011: Ignoring &amp;lt;permgen&amp;gt; for jvm &amp;amp;apos;SUN&amp;amp;apos; type jvm: null&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[33m&amp;amp;amp#27;[0m&amp;amp;amp#27;[33m06:50:49,884 WARN  [org.jboss.as.host.controller] (Host Controller Service Threads - 17) WFLYHC0011: Ignoring &amp;lt;permgen&amp;gt; for jvm &amp;amp;apos;SUN&amp;amp;apos; type jvm: null&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[33m&amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:50:50,020 INFO  [org.jboss.as.repository] (Host Controller Service Threads - 17) WFLYDR0002: Content removed from location /mnt/hudson_workspace/workspace/eap-7x-as-testsuite-test-core-rhel-basic-reconnect/19de6045/testsuite/domain/target/domains/SlaveReconnectTestCase/slave/data/content/6b/bc9ff93840d04e654599ba2bfd2d8ca6dc8300/content&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:50:50,030 INFO  [org.jboss.as.host.controller] (Host Controller Service Threads - 14) WFLYHC0148: Connected to master host controller at remote://10.16.95.146:9999&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:50:50,027 INFO  [org.jboss.as.domain.controller] (Host Controller Service Threads - 42) WFLYHC0019: Registered remote slave host "slave", WildFly 2.0.6.Final-redhat-SNAPSHOT "Kenny"&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:50:50,075 INFO  [org.jboss.as.host.controller] (server-registration-threads - 1) WFLYHC0020: Registering server main-one&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:50:50,081 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0060: Http management interface listening on http://10.16.95.146:9990/management&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:50:50,091 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0051: Admin console listening on http://10.16.95.146:9990&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:50:50,093 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0025: WildFly Core 2.0.6.Final-redhat-SNAPSHOT "Kenny" (Host Controller) started in 12771ms - Started 49 of 49 services (11 services are lazy, passive or on-demand)&amp;amp;amp#27;[0m




[Server:main-one] 06:50:51,002 INFO  [org.wildfly.extension.io] (ServerService Thread Pool -- 13) WFLYIO001: Worker &amp;amp;apos;default&amp;amp;apos; has auto-configured to 8 core threads with 64 task threads based on your 4 available processors




Failed operation:




{




    "operation" =&amp;gt; "read-resource",




    "address" =&amp;gt; [




        ("host" =&amp;gt; "master"),




        ("server" =&amp;gt; "main-one"),




        ("subsystem" =&amp;gt; "ordered-children")




    ],




    "recursive" =&amp;gt; true




}




Response:




{




    "outcome" =&amp;gt; "failed",




    "result" =&amp;gt; undefined,




    "failure-description" =&amp;gt; "WFLYCTL0379: System boot is in process; execution of remote management operations is not currently available",




    "rolled-back" =&amp;gt; true




}




[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:50:51,289 INFO  [org.jboss.as.repository] (management-handler-thread - 3) WFLYDR0002: Content removed from location /mnt/hudson_workspace/workspace/eap-7x-as-testsuite-test-core-rhel-basic-reconnect/19de6045/testsuite/domain/target/domains/SlaveReconnectTestCase/master/data/content/c4/0aaecf59ae8bb17142bf35da9865286082c9e5/content&amp;amp;amp#27;[0m




[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[0m06:50:51,317 INFO  [org.jboss.as.repository] (Host Controller Service Threads - 14) WFLYDR0002: Content removed from location /mnt/hudson_workspace/workspace/eap-7x-as-testsuite-test-core-rhel-basic-reconnect/19de6045/testsuite/domain/target/domains/SlaveReconnectTestCase/slave/data/content/c4/0aaecf59ae8bb17142bf35da9865286082c9e5/content&amp;amp;amp#27;[0m




Failed operation:




{




    "operation" =&amp;gt; "composite",




    "address" =&amp;gt; [],




    "steps" =&amp;gt; [




        {




            "operation" =&amp;gt; "remove",




            "address" =&amp;gt; [




                ("server-group" =&amp;gt; "deployment-group-affected"),




                ("deployment" =&amp;gt; "reconnect-slave-depfour.jar")




            ]




        },




        {




            "operation" =&amp;gt; "remove",




            "address" =&amp;gt; [("deployment" =&amp;gt; "reconnect-slave-depfour.jar")]




        }




    ]




}




Response:




{




    "outcome" =&amp;gt; "failed",




    "result" =&amp;gt; {




        "step-1" =&amp;gt; {




            "outcome" =&amp;gt; "failed",




            "rolled-back" =&amp;gt; true




        },




        "step-2" =&amp;gt; {




            "outcome" =&amp;gt; "failed",




            "rolled-back" =&amp;gt; true




        }




    },




    "failure-description" =&amp;gt; {"WFLYDC0074: Operation failed or was rolled back on all servers. Server failures:" =&amp;gt; {"server-group" =&amp;gt; {"deployment-group-affected" =&amp;gt; {"host" =&amp;gt; {"slave" =&amp;gt; {"server-affected" =&amp;gt; {"WFLYCTL0062: Composite operation failed and was rolled back. Steps that failed:" =&amp;gt; {"Operation step-1" =&amp;gt; "WFLYCTL0216: Management resource &amp;amp;apos;[(\"deployment\" =&amp;gt; \"reconnect-slave-depfour.jar\")]&amp;amp;apos; not found"}}}}}}}},




    "rolled-back" =&amp;gt; true,




    "server-groups" =&amp;gt; {"deployment-group-affected" =&amp;gt; {"host" =&amp;gt; {"slave" =&amp;gt; {"server-affected" =&amp;gt; {"response" =&amp;gt; {




        "outcome" =&amp;gt; "failed",




        "result" =&amp;gt; {"step-1" =&amp;gt; {




            "outcome" =&amp;gt; "failed",




            "failure-description" =&amp;gt; "WFLYCTL0216: Management resource &amp;amp;apos;[(\"deployment\" =&amp;gt; \"reconnect-slave-depfour.jar\")]&amp;amp;apos; not found",




            "rolled-back" =&amp;gt; true




        }},




        "failure-description" =&amp;gt; {"WFLYCTL0062: Composite operation failed and was rolled back. Steps that failed:" =&amp;gt; {"Operation step-1" =&amp;gt; "WFLYCTL0216: Management resource &amp;amp;apos;[(\"deployment\" =&amp;gt; \"reconnect-slave-depfour.jar\")]&amp;amp;apos; not found"}},




        "response-headers" =&amp;gt; {"process-state" =&amp;gt; "reload-required"},




        "rolled-back" =&amp;gt; true




    }}}}}}




}






test02_DeploymentOverlays results:






Stacktrace:




org.jboss.as.test.integration.management.util.MgmtOperationException: Management operation failed.




	at org.jboss.as.test.integration.domain.management.util.DomainTestUtils.executeForResult(DomainTestUtils.java:160)




	at org.jboss.as.test.integration.domain.slavereconnect.SlaveReconnectTestCase.cloneProfile(SlaveReconnectTestCase.java:183)














Standard Output:




Failed operation:




{




    "operation" =&amp;gt; "clone",




    "address" =&amp;gt; [("profile" =&amp;gt; "minimal")],




    "to-profile" =&amp;gt; "unaffacted"




}




Response:




{




    "outcome" =&amp;gt; "failed",




    "failure-description" =&amp;gt; {"domain-failure-description" =&amp;gt; "WFLYCTL0212: Duplicate resource [(\"profile\" =&amp;gt; \"unaffacted\")]"},




    "rolled-back" =&amp;gt; true




}






Expected results:
No errors
Additional info:
Jenkins reproducer job: https://jenkins.mw.lab.eng.bos.redhat.com/hudson/view/EAP7/view/EAP7-AS-Testsuite/view/EAP7-AS-Testsuite-Reproducers/job/eap-7x-as-testsuite-test-core-rhel-basic-reconnect/</description>
			<version>2.0.6.Final</version>
			<fixedVersion>3.0.0.Alpha1</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.test.integration.domain.slavereconnect.SlaveReconnectTestCase.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">2841</link>
		</links>
	</bug>
	<bug id="794" opendate="2015-07-03 11:31:01" fixdate="2016-03-18 20:04:22" resolution="Done">
		<buginformation>
			<summary>IPv6ScopeIdMatchUnitTestCase fails if some IPv6 subinterface exists</summary>
			<description>The test (org.jboss.as.controller.interfacesIPv6ScopeIdMatchUnitTestCase) keeps failing on one of our Solaris boxes with following interfaces:






/usr/sbin/ifconfig -a




...




lo0: flags=2002000849&amp;lt;UP,LOOPBACK,RUNNING,MULTICAST,IPv6,VIRTUAL&amp;gt; mtu 8252 index 1




        inet6 ::1/128 




net0: flags=120002000841&amp;lt;UP,RUNNING,MULTICAST,IPv6,PHYSRUNNING&amp;gt; mtu 1500 index 2




        inet6 fe80::221:28ff:feb3:20f2/10 




net0:1: flags=120002080841&amp;lt;UP,RUNNING,MULTICAST,ADDRCONF,IPv6,PHYSRUNNING&amp;gt; mtu 1500 index 2




        inet6 2620:52:0:105f:221:28ff:feb3:20f2/64 




net4: flags=120002000840&amp;lt;RUNNING,MULTICAST,IPv6,PHYSRUNNING&amp;gt; mtu 1500 index 3




        inet6 ::/0






Error Message






expected:&amp;lt;/2620:52:0:105f:221:28ff:feb3:20f2%2&amp;gt; but was:&amp;lt;null&amp;gt;






Stacktrace






java.lang.AssertionError: expected:&amp;lt;/2620:52:0:105f:221:28ff:feb3:20f2%2&amp;gt; but was:&amp;lt;null&amp;gt;




	at org.junit.Assert.fail(Assert.java:88)




	at org.junit.Assert.failNotEquals(Assert.java:743)




	at org.junit.Assert.assertEquals(Assert.java:118)




	at org.junit.Assert.assertEquals(Assert.java:144)




	at org.jboss.as.controller.interfaces.IPv6ScopeIdMatchUnitTestCase.testNonLoopback(IPv6ScopeIdMatchUnitTestCase.java:129)






Promlem is, that getByName returns null when resolving NetworkInterface by its subinterface name (net0:1 in this case). See following example.






Enumeration&amp;lt;NetworkInterface&amp;gt; interfaces = NetworkInterface.getNetworkInterfaces();




while (interfaces.hasMoreElements()) {




    NetworkInterface nic = interfaces.nextElement();




    Enumeration&amp;lt;NetworkInterface&amp;gt; subInterfaces = nic.getSubInterfaces();




    while (subInterfaces.hasMoreElements()) {




        NetworkInterface subInterface = subInterfaces.nextElement();




        System.out.println(subInterface.getName());




        System.out.println(NetworkInterface.getByName(subInterface.getName()));




    }




}













em1:0




null





</description>
			<version>2.0.0.Alpha5</version>
			<fixedVersion>3.0.0.Alpha1</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.interfaces.IPv6ScopeIdMatchUnitTestCase.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">397</link>
			<link type="Related" description="is related to">934</link>
		</links>
	</bug>
	<bug id="1370" opendate="2016-02-15 08:59:28" fixdate="2016-03-18 20:07:15" resolution="Done">
		<buginformation>
			<summary>All configuration changes have the same operation date</summary>
			<description> When I list the changes, the operation date for all of the changes are the same, and seem to be the date/time when the `list-changes` operation is performed.  I tried this just now with ER5:</description>
			<version>2.1.0.CR1</version>
			<fixedVersion>2.2.0.CR1, 3.0.0.Alpha1</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.ConfigurationChangesCollector.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned to">3406</link>
		</links>
	</bug>
	<bug id="1397" opendate="2016-02-17 21:48:41" fixdate="2016-03-18 20:09:16" resolution="Done">
		<buginformation>
			<summary>Boot errors and unmanageable server if http-interface resource&amp;apos;s http-upgrade-enabled attribute != true</summary>
			<description>The https://github.com/wildfly/wildfly-core/pull/1360 work added a new XnioWorker service that the HTTP interface depends on, but for a standalone server it isn&amp;amp;apos;t installed unless http-upgrade-enabled == true. Otherwise you see this during boot:






 15:43:25,005 ERROR [org.jboss.as.controller.management-operation] (Controller Boot Thread) WFLYCTL0013: Operation ("add") failed - address: ([




    ("core-service" =&amp;gt; "management"),




    ("management-interface" =&amp;gt; "http-interface")




]) - failure description: {"WFLYCTL0180: Services with missing/unavailable dependencies" =&amp;gt; [




    "jboss.serverManagement.controller.management.http is missing [jboss.serverManagement.controller.management.worker]",




    "jboss.serverManagement.controller.management.http.shutdown is missing [jboss.remoting.management.channel.registry]"




]}




15:43:25,006 ERROR [org.jboss.as.controller.management-operation] (Controller Boot Thread) WFLYCTL0013: Operation ("add") failed - address: ([




    ("subsystem" =&amp;gt; "jmx"),




    ("remoting-connector" =&amp;gt; "jmx")




]) - failure description: {"WFLYCTL0180: Services with missing/unavailable dependencies" =&amp;gt; ["jboss.jmx.remoting-connector-ref is missing [jboss.remoting.endpoint.management]"]}




15:43:25,031 INFO  [org.jboss.as.controller] (Controller Boot Thread) WFLYCTL0183: Service status report




WFLYCTL0184:    New missing/unsatisfied dependencies:




      service jboss.remoting.endpoint.management (missing) dependents: [service jboss.jmx.remoting-connector-ref] 




      service jboss.remoting.management.channel.registry (missing) dependents: [service jboss.serverManagement.controller.management.http.shutdown] 




      service jboss.serverManagement.controller.management.worker (missing) dependents: [service jboss.serverManagement.controller.management.http] 









15:43:25,127 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0063: Http management interface is not enabled




15:43:25,128 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0054: Admin console is not enabled




15:43:25,128 ERROR [org.jboss.as] (Controller Boot Thread) WFLYSRV0026: JBoss EAP 7.0.0.GA (WildFly Core 2.0.12.Final-redhat-1) started (with errors) in 3493ms - Started 254 of 544 services (3 services failed or missing dependencies, 369 services are lazy, passive or on-demand)






The problem is org.jboss.as.server.operations.HttpManagementAddHandler doesn&amp;amp;apos;t install the service. The HC variant of HttpManagementAddHandler does.</description>
			<version>2.1.0.CR1</version>
			<fixedVersion>2.2.0.CR1, 3.0.0.Alpha1</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.server.operations.NativeManagementServices.java</file>
			<file type="M">org.jboss.as.server.operations.HttpManagementAddHandler.java</file>
			<file type="M">org.jboss.as.server.operations.NativeManagementAddHandler.java</file>
		</fixedFiles>
	</bug>
	<bug id="1426" opendate="2016-03-03 22:22:30" fixdate="2016-03-18 20:11:51" resolution="Done">
		<buginformation>
			<summary>NPE in GlobalOperationHandlers.getChildAddresses</summary>
			<description>Second line is a potential NPE if the MRR tree has changed since &amp;amp;apos;element&amp;amp;apos; was found:
            final ImmutableManagementResourceRegistration childRegistration = registry.getSubModel(PathAddress.pathAddress(element));
            final AliasEntry aliasEntry = childRegistration.getAliasEntry();
Failed here:
http://brontes.lab.eng.brq.redhat.com/viewLog.html?buildId=92710&amp;amp;buildTypeId=WildFlyCore_PullRequest_WildFlyCoreFullIntegration
======= Failed test run #1 ==========
org.jboss.as.test.integration.management.util.MgmtOperationException: Management operation failed.
    at org.jboss.as.test.integration.domain.management.util.DomainTestUtils.executeForResult(DomainTestUtils.java:160)
    at org.jboss.as.test.integration.domain.mixed.DomainHostExcludesTest.readChildrenNames(DomainHostExcludesTest.java:302)
    at org.jboss.as.test.integration.domain.mixed.DomainHostExcludesTest.stopSlave(DomainHostExcludesTest.java:111)
    at org.jboss.as.test.integration.domain.mixed.DomainHostExcludesTest.setup(DomainHostExcludesTest.java:93)
    at org.jboss.as.test.integration.domain.mixed.eap630.DomainHostExcludes630TestCase.beforeClass(DomainHostExcludes630TestCase.java:40)
------- Stdout: -------
...
&amp;amp;amp#27;[0m[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[0m22:06:43,569 INFO  [org.jboss.as.domain.controller] (management task-5) WFLYHC0026: Unregistered remote slave host "slave"&amp;amp;amp#27;[0m
[Host Controller] &amp;amp;amp#27;[0m&amp;amp;amp#27;[31m22:06:43,569 ERROR [org.jboss.as.controller.management-operation] (management-handler-thread - 3) WFLYCTL0013: Operation ("read-children-names") failed - address: ([]): java.lang.NullPointerException&amp;amp;amp#27;[0m
[Host Controller] &amp;amp;amp#27;[31m    at org.jboss.as.controller.operations.global.GlobalOperationHandlers.getChildAddresses(GlobalOperationHandlers.java:960)&amp;amp;amp#27;[0m
[Host Controller] &amp;amp;amp#27;[31m    at org.jboss.as.controller.operations.global.ReadChildrenNamesHandler.execute(ReadChildrenNamesHandler.java:78)&amp;amp;amp#27;[0m
[Host Controller] &amp;amp;amp#27;[31m    at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:890)&amp;amp;amp#27;[0m
[Host Controller] &amp;amp;amp#27;[31m    at org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:659)&amp;amp;amp#27;[0m
[Host Controller] &amp;amp;amp#27;[31m    at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:370)&amp;amp;amp#27;[0m
[Host Controller] &amp;amp;amp#27;[31m    at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1344)&amp;amp;amp#27;[0m
[Host Controller] &amp;amp;amp#27;[31m    at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:392)&amp;amp;amp#27;[0m
[Host Controller] &amp;amp;amp#27;[31m    at org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:217)&amp;amp;amp#27;[0m
[Host Controller] &amp;amp;amp#27;
...
The test stops host slave and then starts reading children names of type &amp;amp;apos;host&amp;amp;apos; to see when &amp;amp;apos;slave&amp;amp;apos; is gone. The registration disappears in the middle of the getChildAddresses logic resulting in NPE.</description>
			<version>2.1.0.CR1</version>
			<fixedVersion>2.2.0.CR1, 3.0.0.Alpha1</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.operations.global.GlobalOperationHandlers.java</file>
		</fixedFiles>
	</bug>
	<bug id="1398" opendate="2016-02-17 23:22:49" fixdate="2016-03-18 22:15:49" resolution="Done">
		<buginformation>
			<summary>RemotingHttpUpgradeService.SERVICE_NAME has a superfluous space</summary>
			<description>public static final ServiceName UPGRADE_SERVICE_NAME = ServiceName.JBOSS.append("remoting ", "remoting-http-upgrade-service");
Note the space in "remoting "</description>
			<version>2.1.0.CR1</version>
			<fixedVersion>2.2.0.CR1, 3.0.0.Alpha1</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.remoting.RemotingHttpUpgradeService.java</file>
		</fixedFiles>
	</bug>
	<bug id="683" opendate="2015-05-08 16:57:37" fixdate="2016-03-18 22:16:17" resolution="Done">
		<buginformation>
			<summary>ListModuleRootsHandler and ModuleLocationHandler don&amp;apos;t handle PrivilegedActionException properly</summary>
			<description>The two inner class OSHs in ModuleLoadingResourceDefinition don&amp;amp;apos;t deal with exceptions properly. They invoke AccessController.doPrivileged and then deal with any PrivilegedActionException by rethrowing as OperationFailedException.
OperationFailedException represents a client mistake and is handled as such (e.g. isn&amp;amp;apos;t logged in the server log.) It shouldn&amp;amp;apos;t be thrown here unless the PrivilegedActionException.getCause() value is itself an OFE. Otherwise, the OSHs should throw a RuntimeException. </description>
			<version>1.0.0.CR1</version>
			<fixedVersion>2.2.0.CR1, 3.0.0.Alpha1</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.server.controller.resources.ModuleLoadingResourceDefinition.java</file>
			<file type="M">org.jboss.as.server.controller.resources.ModuleInfoHandler.java</file>
		</fixedFiles>
	</bug>
	<bug id="1260" opendate="2016-01-04 17:21:43" fixdate="2016-03-18 22:17:24" resolution="Done">
		<buginformation>
			<summary>Capability resolution complaints on admin-only slave HCs not connected to the master</summary>
			<description>If you start a slave HC in admin-only with no master to connect to, boot is fine but then any modifications made to the config result in capability resolution ERROR messages in the host-controller.log
Starting a slave HC in admin-only with no master to connect to is meant to work, allowing you to use CLI to manipulate the slave&amp;amp;apos;s host config:






bin/domain.sh --host-config=host-slave.xml --admin-only -Djboss.domain.master.address=127.0.0.1






The boot is fine:






[Host Controller] 11:06:10,639 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0025: WildFly Full 10.0.0.Final-SNAPSHOT (WildFly Core 2.0.5.Final) (Host Controller) started in 1152ms - Started 41 of 42 services (12 services are lazy, passive or on-demand)






However, subsequent changes made via management tools (e.g. CLI) succeed but result in ERROR logging by the HC:






[domain@127.0.0.1:9999 /] /host=localhost/system-property=foo:add(value=bar)




{




    "outcome" =&amp;gt; "success",




    "result" =&amp;gt; undefined,




    "server-groups" =&amp;gt; undefined




}






The HC&amp;amp;apos;s log:






[Host Controller] 11:07:37,744 ERROR [org.jboss.as.controller] (management-handler-thread - 4) WFLYCTL0369: Required capabilities are not available:




[Host Controller]     org.wildfly.domain.server-group.other-server-group in context &amp;amp;apos;server-config&amp;amp;apos;; There are no known registration points which can provide this capability.




[Host Controller]     org.wildfly.domain.server-group.main-server-group in context &amp;amp;apos;server-config&amp;amp;apos;; There are no known registration points which can provide this capability.






The boot works without logging because of the enhancement Stuart added such that capability reference failures won&amp;amp;apos;t fail an admin-only boot, thus letting the user use admin-only to fix the config. But then with subsequent changes, the user gets ERRORs notifying them of the unfixed references.
But in this case, the references will never be available, so long as there is no connection to a master to provide the domain-wide config.
This is a general case that needs to be accounted for in the capability resolution logic.</description>
			<version>2.0.5.Final</version>
			<fixedVersion>2.2.0.CR1, 3.0.0.Alpha1</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.AbstractControllerService.java</file>
			<file type="M">org.jboss.as.controller.ModelControllerImpl.java</file>
			<file type="M">org.jboss.as.host.controller.DomainModelControllerService.java</file>
			<file type="M">org.jboss.as.host.controller.RemoteDomainConnectionService.java</file>
			<file type="M">org.jboss.as.controller.OperationContextImpl.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned to">2603</link>
		</links>
	</bug>
	<bug id="1428" opendate="2016-03-04 14:45:35" fixdate="2016-03-18 22:17:52" resolution="Done">
		<buginformation>
			<summary>log-file.stream attribute is of type LONG but contains a string</summary>
			<description>The stream attribute of the log-file resource is of type LONG, but contains a UUID (string). This leads to an error in the console where I rely on proper attribute data types.  
/subsystem=logging/log-file=*:read-resource-description
/subsystem=logging/log-file=*:read-resource(include-runtime=true)</description>
			<version>2.1.0.CR1</version>
			<fixedVersion>3.0.0.Alpha1</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.logging.LogFileResourceDefinition.java</file>
		</fixedFiles>
	</bug>
	<bug id="1430" opendate="2016-03-07 11:52:40" fixdate="2016-03-18 22:18:16" resolution="Done">
		<buginformation>
			<summary>Deployment scanner logs ERROR when server is shutting down</summary>
			<description>It happens time to time that deployment scanner can throw and log error [1] when server is shutting down.
It&amp;amp;apos;s in case of clean startup and clean shutdown when error messages should not be shown. I can hit it when unbounding a datasource takes a bit longer and scan of deployment scanner hits that time.
[1]






ERROR [org.jboss.as.server.deployment.scanner] (DeploymentScanner-threads - 1) WFLYDS0012: Scan of /mnt/hudson_workspace/workspace/eap-70-jbossts-crashrec-tests-mssql2014/90fac01f/eap-tests-transactions/jbossts/target/jbossas-jbossts/standalone/deployments threw Exception: java.lang.RuntimeException: WFLYDS0036: Deployment model operation failed. WFLYCTL0271: Operation cancelled




	at org.jboss.as.server.deployment.scanner.DefaultDeploymentOperations.getDeploymentsStatus(DefaultDeploymentOperations.java:83)




	at org.jboss.as.server.deployment.scanner.FileSystemDeploymentService$ScanContext.&amp;lt;init&amp;gt;(FileSystemDeploymentService.java:1614)




	at org.jboss.as.server.deployment.scanner.FileSystemDeploymentService$ScanContext.&amp;lt;init&amp;gt;(FileSystemDeploymentService.java:1563)




	at org.jboss.as.server.deployment.scanner.FileSystemDeploymentService.scan(FileSystemDeploymentService.java:568)




	at org.jboss.as.server.deployment.scanner.FileSystemDeploymentService.scan(FileSystemDeploymentService.java:489)




	at org.jboss.as.server.deployment.scanner.FileSystemDeploymentService$DeploymentScanRunnable.run(FileSystemDeploymentService.java:250)




	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)




	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308)




	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180)




	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294)




	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)




	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)




	at java.lang.Thread.run(Thread.java:745)




	at org.jboss.threads.JBossThread.run(JBossThread.java:320)





</description>
			<version>2.1.0.CR1</version>
			<fixedVersion>2.2.0.CR1, 3.0.0.Alpha1</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.server.deployment.scanner.FileSystemDeploymentService.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">3697</link>
		</links>
	</bug>
	<bug id="1439" opendate="2016-03-17 15:20:26" fixdate="2016-03-18 22:18:45" resolution="Done">
		<buginformation>
			<summary>Allow for testsuite to pass on French OS</summary>
			<description>Some tests are checking failure message or exception message as if the Locale is always English. Fixing those</description>
			<version>2.1.0.CR1</version>
			<fixedVersion>2.2.0.CR1, 3.0.0.Alpha1</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.test.manualmode.management.cli.ManagementOpTimeoutTestCase.java</file>
			<file type="M">org.jboss.as.server.deployment.scanner.XmlCompletionScannerTest.java</file>
			<file type="M">org.jboss.as.server.deployment.scanner.XmlCompletionScanner.java</file>
			<file type="M">org.jboss.as.test.integration.mgmt.access.ConfigurationChangesHistoryTestCase.java</file>
			<file type="M">org.jboss.as.server.deployment.scanner.logging.DeploymentScannerLogger.java</file>
			<file type="M">org.jboss.as.test.integration.mgmt.access.ValidateAddressOrOperationTestCase.java</file>
			<file type="M">org.jboss.as.test.integration.domain.suites.ResponseStreamTestCase.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">3856</link>
			<link type="Dependency" description="blocks">5333</link>
		</links>
	</bug>
	<bug id="1171" opendate="2015-11-30 19:15:48" fixdate="2016-03-19 00:14:01" resolution="Done">
		<buginformation>
			<summary>Host Controller HttpManagementResourceDefinition doesn&amp;apos;t register "org.wildfly.management.http-interface" capability</summary>
			<description>The add/remove handlers register the capability, but it got missed with the MRR.</description>
			<version>2.0.3.Final</version>
			<fixedVersion>3.0.0.Alpha1</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.host.controller.operations.HttpManagementAddHandler.java</file>
			<file type="M">org.jboss.as.host.controller.resources.HttpManagementResourceDefinition.java</file>
			<file type="M">org.jboss.as.host.controller.operations.HttpManagementRemoveHandler.java</file>
		</fixedFiles>
	</bug>
	<bug id="1170" opendate="2015-11-30 19:14:12" fixdate="2016-03-19 00:14:23" resolution="Done">
		<buginformation>
			<summary>GenericOutboundConnectionResourceDefinition doesn&amp;apos;t register the "org.wildfly.remoting.outbound-connection" capability</summary>
			<description>Title says it all. This variant of the outbound-connection resources was missed when I added capabilities.
AbstractOutboundConnectionResourceDefinition can take care of this for all the variants and we can remove the registration from the various add/remove handlers.</description>
			<version>2.0.3.Final</version>
			<fixedVersion>3.0.0.Alpha1</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.remoting.AbstractOutboundConnectionResourceDefinition.java</file>
			<file type="M">org.jboss.as.remoting.LocalOutboundConnectionResourceDefinition.java</file>
			<file type="M">org.jboss.as.remoting.RemoteOutboundConnectionAdd.java</file>
			<file type="M">org.jboss.as.remoting.ConnectorRemove.java</file>
			<file type="M">org.jboss.as.remoting.RemoteOutboundConnectionResourceDefinition.java</file>
			<file type="M">org.jboss.as.remoting.ConnectorAdd.java</file>
			<file type="M">org.jboss.as.remoting.ConnectorResource.java</file>
			<file type="M">org.jboss.as.remoting.LocalOutboundConnectionAdd.java</file>
		</fixedFiles>
	</bug>
	<bug id="1347" opendate="2016-02-02 10:25:03" fixdate="2016-03-19 00:38:51" resolution="Done">
		<buginformation>
			<summary>StringListAttributeDefinition.unwrap doesn&amp;apos;t take default value into account</summary>
			<description>unwrap method should first call resolveMethodAttribute to get value of attribute and than do unwrapping.</description>
			<version>2.0.10.Final</version>
			<fixedVersion>2.1.0.Final</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.StringListAttributeDefinition.java</file>
			<file type="M">org.jboss.as.controller.PropertiesAttributeDefinition.java</file>
			<file type="M">org.jboss.as.controller.PropertiesAttributeDefinitionUnitTestCase.java</file>
			<file type="M">org.jboss.as.controller.StringListAttributeDefinitionUnitTestCase.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned to">3177</link>
			<link type="Sequence" description="is followed up by">6440</link>
		</links>
	</bug>
	<bug id="1420" opendate="2016-03-02 15:03:25" fixdate="2016-03-19 00:41:46" resolution="Done">
		<buginformation>
			<summary>CLI shutdown command doesn&amp;apos;t support graceful shutdown</summary>
			<description>The shutdown command needs to support a timeout param so users can have a graceful shutdown.
I&amp;amp;apos;m calling this a bug because the low level :shutdown op is not reliable for CLI users due to the issues with handling of connection closing that the shutdown command takes care of.</description>
			<version>2.1.0.CR1</version>
			<fixedVersion>2.1.0.Final</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.cli.Util.java</file>
			<file type="M">org.jboss.as.cli.handlers.ShutdownHandler.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned to">3652</link>
		</links>
	</bug>
	<bug id="1435" opendate="2016-03-15 17:49:55" fixdate="2016-03-19 00:42:43" resolution="Done">
		<buginformation>
			<summary>Users with low privileges can see logged operations they shouldn&amp;apos;t be able to see</summary>
			<description>If a SuperUser performs for example this:






/core-service=management/access=audit/in-memory-handler=y:add   




/core-service=management/access=audit/in-memory-handler=y:write-attribute(name=max-history,value=50)






then a Monitor user shouldn&amp;amp;apos;t be able to see this in the configuration change log (as decided in EAP7-89), because he doesn&amp;amp;apos;t even have the permission to "read" the manipulated resource.. But actually he can see it:






/core-service=management/service=configuration-changes:list-changes




{




    "outcome" =&amp;gt; "success",




    "result" =&amp;gt; [




        {




            "operation-date" =&amp;gt; "2016-03-15T08:40:25.807Z",




            "access-mechanism" =&amp;gt; "NATIVE",




            "remote-address" =&amp;gt; "127.0.0.1/127.0.0.1",




            "outcome" =&amp;gt; "success",




            "operations" =&amp;gt; [{




                "operation" =&amp;gt; "write-attribute",




                "address" =&amp;gt; [




                    ("core-service" =&amp;gt; "management"),




                    ("access" =&amp;gt; "audit"),




                    ("in-memory-handler" =&amp;gt; "y")




                ]




            }]




        },




        {




            "operation-date" =&amp;gt; "2016-03-15T08:40:25.809Z",




            "access-mechanism" =&amp;gt; "NATIVE",




            "remote-address" =&amp;gt; "127.0.0.1/127.0.0.1",




            "outcome" =&amp;gt; "success",




            "operations" =&amp;gt; [{




                "operation" =&amp;gt; "add",




                "address" =&amp;gt; [




                    ("core-service" =&amp;gt; "management"),




                    ("access" =&amp;gt; "audit"),




                    ("in-memory-handler" =&amp;gt; "y")




                ]




            }]




        }




    ]




}






</description>
			<version>2.1.0.CR1</version>
			<fixedVersion>2.1.0.Final</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.domain.management.ConfigurationChangeResourceDefinition.java</file>
			<file type="M">org.jboss.as.test.integration.mgmt.access.ConfigurationChangesHistoryTestCase.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">3817</link>
		</links>
	</bug>
	<bug id="1437" opendate="2016-03-16 17:00:04" fixdate="2016-03-19 00:44:11" resolution="Done">
		<buginformation>
			<summary>Using JKS truststore leads to "FIPS mode: only SunJSSE TrustManagers may be used"</summary>
			<description>User can&amp;amp;apos;t start domain in FIPS mode when JKS truststore is used in master &amp;lt;-&amp;gt; slave host controllers communication. (Using PKCS11 keystore works well)






[Host Controller] ^[[0m^[[31m15:52:23,822 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-8) MSC000001: Failed to start service jboss.server.controller.management.security_realm.SlaveManagementRealm.ssl-context-trust-only: org.jboss.msc.service.StartException in service jboss.server.controller.management.security_realm.SlaveManagementRealm.ssl-context-trust-only: WFLYDM0018: Unable to start service^[[0m




[Host Controller] ^[[31m        at org.jboss.as.domain.management.security.SSLContextService.start(SSLContextService.java:124)^[[0m




[Host Controller] ^[[31m        at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1948)^[[0m




[Host Controller] ^[[31m        at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1881)^[[0m




[Host Controller] ^[[31m        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)^[[0m




[Host Controller] ^[[31m        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)^[[0m




[Host Controller] ^[[31m        at java.lang.Thread.run(Thread.java:745)^[[0m




[Host Controller] ^[[31mCaused by: java.security.KeyManagementException: FIPS mode: only SunJSSE TrustManagers may be used^[[0m




[Host Controller] ^[[31m        at sun.security.ssl.SSLContextImpl.chooseTrustManager(SSLContextImpl.java:124)^[[0m




[Host Controller] ^[[31m        at sun.security.ssl.SSLContextImpl.engineInit(SSLContextImpl.java:87)^[[0m




[Host Controller] ^[[31m        at javax.net.ssl.SSLContext.init(SSLContext.java:282)^[[0m




[Host Controller] ^[[31m        at org.jboss.as.domain.management.security.SSLContextService.start(SSLContextService.java:87)^[[0m




[Host Controller] ^[[31m        ... 5 more^[[0m




[Hos





</description>
			<version>2.1.0.CR1</version>
			<fixedVersion>2.1.0.Final</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.domain.management.security.FileTrustManagerService.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">3788</link>
		</links>
	</bug>
	<bug id="1346" opendate="2016-02-02 07:24:08" fixdate="2016-03-22 01:00:41" resolution="Done">
		<buginformation>
			<summary>extension remove reports sucess even if the extension does not exist</summary>
			<description>e.g.:
[standalone@localhost:9999 /] /extension=garbage:remove
{"outcome" =&amp;gt; "success"}</description>
			<version>2.0.10.Final</version>
			<fixedVersion>2.2.0.CR1, 3.0.0.Alpha1</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.extension.ExtensionRemoveHandler.java</file>
			<file type="M">org.wildfly.core.test.standalone.extension.remove.ExtensionRemoveTestCase.java</file>
		</fixedFiles>
	</bug>
	<bug id="1399" opendate="2016-02-17 14:29:26" fixdate="2016-03-22 02:18:11" resolution="Done">
		<buginformation>
			<summary>Failure when resolving an expression with the default value containing a &amp;apos;$&amp;apos; at the end</summary>
			<description>Can not add a JNDI / naming entry which contains a "$" sign at the end of its default value.
e.g. 





value="${my.sample.property1:entry5-default-value-with-special-char-at-the-end-$}"





</description>
			<version>2.1.0.CR1</version>
			<fixedVersion>2.2.0.CR1, 3.0.0.Alpha1</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.ExpressionResolverImpl.java</file>
			<file type="M">org.jboss.as.controller.ExpressionResolverUnitTestCase.java</file>
		</fixedFiles>
	</bug>
	<bug id="1231" opendate="2015-12-16 08:16:38" fixdate="2016-03-30 14:42:12" resolution="Done">
		<buginformation>
			<summary>Remove OSGi bundle related patching tests</summary>
			<description>OSGi is no longer supported, there&amp;amp;apos;s no point in keeping these tests.
This affects unit tests in the &amp;amp;apos;patching&amp;amp;apos; module and the patching module of integration TS.</description>
			<version>2.0.4.Final</version>
			<fixedVersion>3.0.0.Alpha1</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.patching.cli.PatchInspectUnitTestCase.java</file>
			<file type="M">org.jboss.as.test.patching.PatchingTestUtil.java</file>
			<file type="M">org.jboss.as.test.patching.RemotePatchInfoUnitTestCase.java</file>
			<file type="M">org.jboss.as.test.patching.RemotePatchInfoPatchIdUnitTestCase.java</file>
			<file type="M">org.jboss.as.patching.cli.ContentConflictsUnitTestCase.java</file>
			<file type="M">org.jboss.as.patching.cli.RollbackLastUnitTestCase.java</file>
			<file type="M">org.jboss.as.patching.runner.TestUtils.java</file>
			<file type="M">org.jboss.as.test.patching.RollbackLastUnitTestCase.java</file>
			<file type="M">org.jboss.as.patching.cli.LocalPatchInfoPatchIdUnitTestCase.java</file>
			<file type="M">org.jboss.as.test.patching.ContentModificationUtils.java</file>
			<file type="D">org.jboss.as.patching.runner.BundlePatchingTestCase.java</file>
			<file type="M">org.jboss.as.patching.runner.ContentModificationUtils.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">2428</link>
		</links>
	</bug>
	<bug id="701" opendate="2015-05-19 15:06:17" fixdate="2016-03-30 14:44:00" resolution="Done">
		<buginformation>
			<summary>Inconsistent domain server status reports between server-config resource and server resource</summary>
			<description>When a managed server fails in some way, the server status reporting is inconsistent between the /host=&amp;lt;host&amp;gt;/server-config=&amp;lt;server&amp;gt; resources and the /host=&amp;lt;host&amp;gt;/server=&amp;lt;server&amp;gt; resource.
To reproduce, run domain.sh, find the pid of a server process, and kill -9 &amp;lt;thepid&amp;gt;. Then with the CLI:






[domain@localhost:9990 /] /host=master/server-config=server-two:read-attribute(name=status)




{




    "outcome" =&amp;gt; "success",




    "result" =&amp;gt; "FAILED"




}




[domain@localhost:9990 /] /host=master/server=server-two:read-attribute(name=server-state)




{




    "outcome" =&amp;gt; "success",




    "result" =&amp;gt; "STOPPED"




}





</description>
			<version>1.0.0.CR4</version>
			<fixedVersion>3.0.0.Alpha1</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.host.controller.ManagedServer.java</file>
		</fixedFiles>
	</bug>
	<bug id="1452" opendate="2016-03-28 21:29:48" fixdate="2016-03-30 14:44:25" resolution="Done">
		<buginformation>
			<summary>Socket binding resources do not register a requirement for their interface</summary>
			<description>BindingAddHandler doesn&amp;amp;apos;t pass it&amp;amp;apos;s attributes into the superclass constructor, so the capability references don&amp;amp;apos;t get registered by the default AbstractAddStepHandler.recordCapabilitiesAndRequirements. And BindingAddHandler also doesn&amp;amp;apos;t override recordCapabilitiesAndRequirements to do the registration itself.</description>
			<version>2.1.0.Final</version>
			<fixedVersion>3.0.0.Alpha1</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.server.services.net.SocketBindingAddHandler.java</file>
			<file type="M">org.jboss.as.server.services.net.BindingAddHandler.java</file>
			<file type="M">org.jboss.as.server.services.net.BindingInterfaceHandler.java</file>
		</fixedFiles>
	</bug>
	<bug id="1448" opendate="2016-03-23 09:47:01" fixdate="2016-03-30 17:30:02" resolution="Done">
		<buginformation>
			<summary>AttributeParser for ObjectListAttributeDefinitions doesn&amp;apos;t differentiate between empty and absent object lists</summary>
			<description>Attributes of type ObjectList are left undefined when their enclosing element is empty, which makes it impossible to differentiate an empty object list from an unspecified one.
The ability to distinguish the two scenarios is important in the security manager subsystem. Consider this configuration:






&amp;lt;subsystem xmlns="urn:jboss:domain:security-manager:1.0"&amp;gt;




    &amp;lt;deployment-permissions&amp;gt;




        &amp;lt;mininum-set&amp;gt;




             ....




        &amp;lt;/minimum-set&amp;gt;




    &amp;lt;/deployment-permissions&amp;gt;




&amp;lt;/subsystem&amp;gt;






The maximum-set is absent and this case we want to use a default set with AllPermission. Now consider another configuration:






&amp;lt;subsystem xmlns="urn:jboss:domain:security-manager:1.0"&amp;gt;




    &amp;lt;deployment-permissions&amp;gt;




        &amp;lt;mininum-set/&amp;gt;




        &amp;lt;maximum-set/&amp;gt;




    &amp;lt;/deployment-permissions&amp;gt;




&amp;lt;/subsystem&amp;gt;






In this case, maximum-set has been specified but it is empty, which means the admin/user deliberately wants to use an emtpy set, possibly to enforce that no deployments with special permissions requirements get deployed.
The problem is that both scenarios result in an undefined attribute for the maximum-set, which means that the default AllPermission set ends up being used in both cases. The parser doesn&amp;amp;apos;t initialize the attribute with an empty list when the enclosing element is present but is empty. So in the end, both approaches result in an undefined attribute.</description>
			<version>2.1.0.Final</version>
			<fixedVersion>2.2.0.CR1, 3.0.0.Alpha1</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.AttributeParsers.java</file>
			<file type="M">org.jboss.as.controller.AttributeMarshaller.java</file>
			<file type="M">org.jboss.as.controller.PersistentResourceXMLDescription.java</file>
			<file type="M">org.jboss.as.controller.AttributeMarshallers.java</file>
			<file type="M">org.jboss.as.controller.AttributeParser.java</file>
			<file type="M">org.jboss.as.controller.ExpressionResolverImpl.java</file>
			<file type="M">org.jboss.as.controller.persistence.PersistentResourceXMLParserTestCase.java</file>
			<file type="M">org.jboss.as.controller.ObjectListAttributeDefinition.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">3924</link>
			<link type="Dependency" description="blocks">408</link>
		</links>
	</bug>
	<bug id="1450" opendate="2016-03-23 17:31:36" fixdate="2016-03-30 21:08:34" resolution="Done">
		<buginformation>
			<summary>ResourceBuilderRoot drops data when integrating an externally created child ResourceDefinition</summary>
			<description>ResourceDefinitionRoot&amp;amp;apos;s impl of pushChild(ResourceDefinition child) is doing an incomplete integration of the data from &amp;amp;apos;child&amp;amp;apos;. It drops everything except attributes, operations and children, losing capabilities and other misc data.
I found this will developing tests for WFCORE-1106.</description>
			<version>2.1.0.Final</version>
			<fixedVersion>3.0.0.Alpha1</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.ResourceBuilderRoot.java</file>
		</fixedFiles>
		<links>
			<link type="Dependency" description="blocks">1106</link>
		</links>
	</bug>
	<bug id="1453" opendate="2016-03-29 20:21:07" fixdate="2016-03-31 15:57:24" resolution="Done">
		<buginformation>
			<summary>module patched in a one-off not included in the next cp is not port-forwarded from the prev cp</summary>
			<description>If CP1 patches module M, a one-off patch later patches the same module M and the following CP2 does not include M at all, module M will not be port-forwarded from CP1. M will be loaded from the original base instead.</description>
			<version>2.1.0.Final</version>
			<fixedVersion>2.2.0.CR1, 3.0.0.Alpha1</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.patching.runner.PatchingTasks.java</file>
			<file type="M">org.jboss.as.patching.runner.PatchMergeUnitTestCase.java</file>
			<file type="M">org.jboss.as.patching.runner.PatchingTask.java</file>
			<file type="M">org.jboss.as.patching.runner.PatchingTaskDescription.java</file>
			<file type="M">org.jboss.as.patching.runner.IdentityPatchRunner.java</file>
			<file type="M">org.jboss.as.test.patching.CPRollingbackOneOffTestCase.java</file>
			<file type="M">org.jboss.as.patching.metadata.ModuleItem.java</file>
			<file type="M">org.jboss.as.patching.runner.IdentityPatchContext.java</file>
		</fixedFiles>
	</bug>
	<bug id="1462" opendate="2016-04-04 14:22:42" fixdate="2016-04-05 18:12:16" resolution="Done">
		<buginformation>
			<summary>ssl element not usable in xml cli config</summary>
			<description>Setting a trust store in the cli-config.xml (ssl XML element) has the side effect to load classes from picketBox that is not present in the core feature pack. This makes ssl element not usable in a core configuration. This works well in a fully featured wildly.</description>
			<version>3.0.0.Alpha1</version>
			<fixedVersion>2.2.0.CR1, 3.0.0.Alpha1</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.cli.impl.CliConfigImpl.java</file>
		</fixedFiles>
	</bug>
	<bug id="263" opendate="2014-11-19 06:24:17" fixdate="2016-04-05 20:05:24" resolution="Done">
		<buginformation>
			<summary>Cancelling management op on slave HC tree is broken</summary>
			<description>If you have a DC with a slave HC, and perform a management operation which gets stuck, non-progressing operations will be reported for both the DC and the slave HC via:
/host=master/core-service=management/service=management-operations:find-non-progressing-operation
/host=slave/core-service=management/service=management-operations:find-non-progressing-operation
Cancelling the operation under /host=master works as expected, pushing the cancellation down to the slave and the controllers become responsive again.
If however you attempt to cancel the operation under /host=slave, it goes bad. 
{ "outcome" =&amp;gt; "success", "result" =&amp;gt; undefined }
 is reported in the CLI, but the controllers are still unresponsive.
Running :find-non-progressing-operation against the slave will report the 
{outcome=success,result=undefined}
 rather than that no non-progressing operations were found, and active-operation=*:read-resource() shows it as not cancelled.
Once you attempt to cancel it on a slave, attempting to cancel it under /host=master will report success, but leave the slave op in a weird state, and things requiring the controller lock (such as the web UI) will still not respond.</description>
			<version>1.0.0.Alpha9</version>
			<fixedVersion>2.2.0.CR1, 3.0.0.Alpha1</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.domain.management.logging.DomainManagementLogger.java</file>
			<file type="M">org.jboss.as.controller.OperationContextImpl.java</file>
			<file type="M">org.jboss.as.domain.http.server.DomainApiUploadHandler.java</file>
			<file type="M">org.jboss.as.domain.management.controller.CancelNonProgressingOperationHandler.java</file>
			<file type="M">org.jboss.as.domain.http.server.DomainApiHandler.java</file>
			<file type="M">org.jboss.as.controller.AccessAuditContext.java</file>
			<file type="M">org.jboss.as.test.integration.domain.suites.OperationCancellationTestCase.java</file>
			<file type="M">org.jboss.as.controller.ModelControllerImpl.java</file>
			<file type="M">org.jboss.as.domain.http.server.DomainApiGenericOperationHandler.java</file>
			<file type="M">org.jboss.as.test.integration.management.extension.blocker.BlockerExtension.java</file>
			<file type="M">org.jboss.as.domain.management.controller.ActiveOperationResourceDefinition.java</file>
			<file type="M">org.jboss.as.controller.descriptions.ModelDescriptionConstants.java</file>
			<file type="M">org.jboss.as.domain.management.controller.FindNonProgressingOperationHandler.java</file>
			<file type="D">org.jboss.as.domain.management.controller.FindNonProgressingOpUnitTestCase.java</file>
		</fixedFiles>
	</bug>
	<bug id="1464" opendate="2016-04-05 16:34:51" fixdate="2016-04-05 20:52:05" resolution="Done">
		<buginformation>
			<summary>LogContexts are not removed for ear subdeployments</summary>
			<description>If an ear does not have its own LogContext created, but a subdeployment in it does, the subdeployment never has its LogContext cleaned up upon undeploy, leading to PermGen leaks.</description>
			<version>2.1.0.Final</version>
			<fixedVersion>2.2.0.CR1, 3.0.0.Alpha1</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.logging.deployments.AbstractLoggingDeploymentProcessor.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned to">4101</link>
		</links>
	</bug>
	<bug id="1315" opendate="2016-01-20 16:23:31" fixdate="2016-04-06 14:59:01" resolution="Done">
		<buginformation>
			<summary>Double prompt when connecting to a new HC</summary>
			<description>I observed this with 0.66.3 in a kind of franken-build of EAP 7. The logical equivalent would be 2.0.8.Final once WFCORE-1277 is fixed.






[domain@localhost:9990 core-service=discovery-options] connect 127.0.0.1:29990




[disconnected core-service=discovery-options] [domain@127.0.0.1:29990 core-service=discovery-options] cd /




[domain@127.0.0.1:29990 /]






Before the first line I had killed the HC at localhost:9990, so then I wanted to connect to another HC. Got a double prompt.
Not a big deal, but I wanted to record it.</description>
			<version>2.0.8.Final</version>
			<fixedVersion>2.2.0.CR1, 3.0.0.Alpha1</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.cli.impl.CommandContextImpl.java</file>
			<file type="M">org.jboss.as.cli.impl.Console.java</file>
		</fixedFiles>
		<links>
			<link type="Superset" description="is incorporated by">7040</link>
		</links>
	</bug>
	<bug id="1333" opendate="2016-01-27 03:12:39" fixdate="2016-04-07 00:21:18" resolution="Done">
		<buginformation>
			<summary>Editing of default deployment scanner&amp;apos;s relative-to attribute can cause server crash</summary>
			<description>Setting value of relative-to attribute of default deployment scanner on standalone server to a path which does not exists in file system causes server crash.</description>
			<version>2.0.7.Final</version>
			<fixedVersion>3.0.0.Alpha1</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.server.deployment.scanner.DeploymentScannerDefinition.java</file>
			<file type="M">org.jboss.as.server.deployment.scanner.logging.DeploymentScannerLogger.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">3044</link>
			<link type="Related" description="relates to">1579</link>
			<link type="Related" description="relates to">4874</link>
		</links>
	</bug>
	<bug id="1373" opendate="2016-02-15 11:24:44" fixdate="2016-04-16 11:13:34" resolution="Done">
		<buginformation>
			<summary>Unable to specify custom configuration directory via -Djboss.server.config.dir</summary>
			<description>Broken support for server config files location customization via: jboss.server.config.dir.
Previous Wildfly 10 versions till CR4 it works as expected. Broken since WF10.0.0.CR5
See Steps to reproduce.
Error:
Cannot start embedded server: WFLYEMB0022: Cannot invoke &amp;amp;apos;start&amp;amp;apos; on embedded process: WFLYCTL0214: Could not get main file: config.xml. Specified files must be relative to the configuration dir: /opt/wildfly-10.0.0.Final/standalone/configuration</description>
			<version>2.1.0.CR1</version>
			<fixedVersion>2.2.0.CR1, 3.0.0.Alpha1</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.wildfly.core.embedded.EmbeddedProcessFactory.java</file>
		</fixedFiles>
	</bug>
	<bug id="1028" opendate="2015-10-01 19:12:08" fixdate="2016-04-16 11:14:27" resolution="Done">
		<buginformation>
			<summary>Poor handling of invalid roles</summary>
			<description>A CLI request with an invalid value in the "roles" header results in improper behavior:






[domain@localhost:9990 /] /host=*:read-resource{roles=slave-monitor}




{




    "outcome" =&amp;gt; "failed",




    "result" =&amp;gt; [],




    "rolled-back" =&amp;gt; true




}






The op should fail because the role doesn&amp;amp;apos;t exist, but there is no failure-description.
The following is dumped in the HC log:






[Host Controller] 12:22:12,314 ERROR [org.jboss.as.controller.management-operation] (management-handler-thread - 3) WFLYCTL0013: Operation ("resolve") failed - address: ([]): java.lang.IllegalArgumentException: WFLYCTL0327: Unknown role &amp;amp;apos;slave-monitor&amp;amp;apos;




[Host Controller] 	at org.jboss.as.controller.access.rbac.StandardRoleMapper.canRunAs(StandardRoleMapper.java:95)




[Host Controller] 	at org.jboss.as.controller.access.rbac.RunAsRoleMapper.mapRoles(RunAsRoleMapper.java:143)




[Host Controller] 	at org.jboss.as.controller.access.rbac.RunAsRoleMapper.mapRoles(RunAsRoleMapper.java:71)




[Host Controller] 	at org.jboss.as.controller.access.rbac.DefaultPermissionFactory.getUserPermissions(DefaultPermissionFactory.java:109)




[Host Controller] 	at org.jboss.as.controller.access.permission.ManagementPermissionAuthorizer.authorize(ManagementPermissionAuthorizer.java:91)




[Host Controller] 	at org.jboss.as.controller.access.management.DelegatingConfigurableAuthorizer.authorize(DelegatingConfigurableAuthorizer.java:99)




[Host Controller] 	at org.jboss.as.controller.OperationContextImpl.getBasicAuthorizationResponse(OperationContextImpl.java:1753)




[Host Controller] 	at org.jboss.as.controller.OperationContextImpl.authorize(OperationContextImpl.java:1651)




[Host Controller] 	at org.jboss.as.controller.OperationContextImpl.readResourceFromRoot(OperationContextImpl.java:833)




[Host Controller] 	at org.jboss.as.controller.OperationContextImpl.readResource(OperationContextImpl.java:818)




[Host Controller] 	at org.jboss.as.controller.operations.global.GlobalOperationHandlers$ModelAddressResolver.execute(GlobalOperationHandlers.java:402)




[Host Controller] 	at org.jboss.as.controller.operations.global.GlobalOperationHandlers$ModelAddressResolver.execute(GlobalOperationHandlers.java:306)




[Host Controller] 	at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:890)




[Host Controller] 	at org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:659)




[Host Controller] 	at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:370)




[Host Controller] 	at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1336)




[Host Controller] 	at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:391)




[Host Controller] 	at org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:217)




[Host Controller] 	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.doExecute(ModelControllerClientOperationHandler.java:207)




[Host Controller] 	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.access$300(ModelControllerClientOperationHandler.java:129)




[Host Controller] 	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:151)




[Host Controller] 	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:147)




[Host Controller] 	at java.security.AccessController.doPrivileged(Native Method)




[Host Controller] 	at javax.security.auth.Subject.doAs(Subject.java:422)




[Host Controller] 	at org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:92)




[Host Controller] 	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1.execute(ModelControllerClientOperationHandler.java:147)




[Host Controller] 	at org.jboss.as.protocol.mgmt.AbstractMessageHandler$2$1.doExecute(AbstractMessageHandler.java:299)




[Host Controller] 	at org.jboss.as.protocol.mgmt.AbstractMessageHandler$AsyncTaskRunner.run(AbstractMessageHandler.java:519)




[Host Controller] 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)




[Host Controller] 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)




[Host Controller] 	at java.lang.Thread.run(Thread.java:745)




[Host Controller] 	at org.jboss.threads.JBossThread.run(JBossThread.java:320)





</description>
			<version>2.0.0.CR5</version>
			<fixedVersion>3.0.0.Alpha1</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.logging.ControllerLogger.java</file>
			<file type="M">org.jboss.as.controller.operations.global.GlobalOperationHandlers.java</file>
			<file type="M">org.jboss.as.test.integration.domain.ServerManagementTestCase.java</file>
			<file type="M">org.jboss.as.controller.access.rbac.RoleMapper.java</file>
		</fixedFiles>
	</bug>
	<bug id="1395" opendate="2016-02-17 12:58:32" fixdate="2016-04-16 13:30:44" resolution="Done">
		<buginformation>
			<summary>Remove /host=master/core-service=management/access=authorization</summary>
			<description>The /host=master/core-service=management/access=authorization is odd. It should be removed in WF 11.</description>
			<version>2.1.0.CR1</version>
			<fixedVersion>3.0.0.Alpha1</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.domain.management.access.AccessAuthorizationResourceDefinition.java</file>
			<file type="M">org.jboss.as.domain.management.CoreManagementResourceDefinition.java</file>
		</fixedFiles>
	</bug>
	<bug id="1456" opendate="2016-03-31 01:21:50" fixdate="2016-04-18 20:15:03" resolution="Done">
		<buginformation>
			<summary>org.jboss.as.cli.scriptsupport.CLI prevents use of embed-server and embed-host-controller</summary>
			<description>The org.jboss.as.cli.scriptsupport.CLI will throw an exception if the user invokes the cmd method before invoking one of the connect methods. But the connect/disconnect methods are oriented toward remote connections. The result is you can&amp;amp;apos;t really use this class with the offline CLI.
I&amp;amp;apos;m not sure what the best fix is here. Perhaps new method(s) analogous to connect/disconnect that establish a CommandContext but don&amp;amp;apos;t call connectController(). Or perhaps the checkNotConnected() call in the cmd method should just be dropped, and an unconnected command context created. But then the existing connect/disconnect methods would need to be reworked to deal with the fact that an unconnected command context may be present.</description>
			<version>2.1.0.Final</version>
			<fixedVersion>2.2.0.CR1, 3.0.0.Alpha1</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.cli.completion.mock.MockCommandContext.java</file>
			<file type="M">org.jboss.as.cli.impl.CommandContextImpl.java</file>
			<file type="M">org.jboss.as.cli.scriptsupport.CLI.java</file>
			<file type="M">org.jboss.as.cli.CommandContext.java</file>
			<file type="D">org.jboss.as.test.integration.management.cli.CLITestCase.java</file>
		</fixedFiles>
	</bug>
	<bug id="1471" opendate="2016-04-13 13:26:04" fixdate="2016-04-18 20:15:44" resolution="Done">
		<buginformation>
			<summary>CLI class is mixing commands and operations</summary>
			<description>CLI.cmd method logic is not in sync with the CLI syntax. 
A fallback is implemented in order to route requests to cx.handle only if ctx.buildRequest(cliCommand) is failing. 
For example this doesn&amp;amp;apos;t cope with reload vs :reload. In this case, buildRequest will succeed both for reload and :reload. CLI.cmd("reload") will end to be treated as CLI.cmd(":reload");
Furthermore batch and workflow are not supported by CLI.
I am suggesting to implement the following logic:
1) If batch is enabled or a workflow is enabled, route the command to handle
2) Parse the request.
3) If this is an operation, route to execute
4) Otherwise route to handle
</description>
			<version>3.0.0.Alpha1</version>
			<fixedVersion>2.2.0.CR1, 3.0.0.Alpha1</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.cli.completion.mock.MockCommandContext.java</file>
			<file type="M">org.jboss.as.cli.impl.CommandContextImpl.java</file>
			<file type="M">org.jboss.as.cli.scriptsupport.CLI.java</file>
			<file type="M">org.jboss.as.cli.CommandContext.java</file>
		</fixedFiles>
	</bug>
	<bug id="1486" opendate="2016-04-20 11:24:49" fixdate="2016-04-21 01:39:32" resolution="Done">
		<buginformation>
			<summary>PersistanceResourceTestCase fails on some windows machines</summary>
			<description>Description of problem:
PersistanceResourceTestCase from wildfly-core fails on some windows machines.
Steps to Reproduce:

cd controller
mvn test -Dtest=PersistanceResourceTestCase

Actual results:






java.lang.AssertionError: DEV99\hudson:READ_DATA/WRITE_DATA/APPEND_DATA/READ_NAMED_ATTRS/WRITE_NAMED_ATTRS/EXECUTE/DELETE_CHILD/READ_ATTRIBUTES/WRITE_ATTRIBUTES/READ_ACL/SYNCHRONIZE:ALLOW




Expected: a collection containing &amp;lt;WRITE_OWNER&amp;gt;




     but: was &amp;lt;WRITE_ATTRIBUTES&amp;gt;, was &amp;lt;APPEND_DATA&amp;gt;, was &amp;lt;READ_ACL&amp;gt;, was &amp;lt;SYNCHRONIZE&amp;gt;, was &amp;lt;DELETE_CHILD&amp;gt;, was &amp;lt;READ_ATTRIBUTES&amp;gt;, was &amp;lt;WRITE_DATA&amp;gt;, was &amp;lt;WRITE_NAMED_ATTRS&amp;gt;, was &amp;lt;READ_DATA&amp;gt;, was &amp;lt;READ_NAMED_ATTRS&amp;gt;, was &amp;lt;EXECUTE&amp;gt;




	at org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)




	at org.junit.Assert.assertThat(Assert.java:865)




	at org.jboss.as.controller.persistence.PersistanceResourceTestCase.testAclFilePermissions(PersistanceResourceTestCase.java:701)






Expected results:
No errors on output</description>
			<version>2.1.0.Final</version>
			<fixedVersion>3.0.0.Alpha1</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.persistence.PersistanceResourceTestCase.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">2335</link>
			<link type="Related" description="is related to">1522</link>
		</links>
	</bug>
	<bug id="1470" opendate="2016-04-13 12:01:36" fixdate="2016-04-22 21:10:29" resolution="Done">
		<buginformation>
			<summary>There are unknown project codes in wildfly core</summary>
			<description> we see unknown project codes in wildfly-core:






        &amp;amp;apos;&amp;lt;&amp;lt;none&amp;gt;&amp;gt;&amp;amp;apos; - &amp;amp;apos;version/src/main/java/org/jboss/as/version/UsageMessages.java&amp;amp;apos;




        &amp;amp;apos;N/A&amp;amp;apos; - &amp;amp;apos;core-security/implementation/src/main/java/org/jboss/as/core/security/CoreSecurityMessages.java&amp;amp;apos;






They should be changed to empty string.
https://issues.jboss.org/browse/EAP7-44?focusedCommentId=13170957&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13170957</description>
			<version>2.1.0.Final</version>
			<fixedVersion>2.2.0.CR1, 3.0.0.Alpha1</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.version.UsageMessages.java</file>
			<file type="M">org.jboss.as.core.security.CoreSecurityMessages.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">4198</link>
		</links>
	</bug>
	<bug id="1501" opendate="2016-04-23 11:42:10" fixdate="2016-04-26 02:13:09" resolution="Done">
		<buginformation>
			<summary>Failure to create timestamped config file history fails boot</summary>
			<description>Something like the following shouldn&amp;amp;apos;t be allowed to fail a boot; if it happens an ERROR should be logged but no exception thrown:











2016-04-22 22:10:21,247 ERROR [org.jboss.as.server] (Controller Boot Thread) WFLYSRV0055: Caught exception during boot: java.lang.IllegalStateException: WFLYCTL0056: Could not rename C:\BuildAgent\work\38e1ea00f932992d\full\testsuite\integration\basic\target\jbossas\standalone\configuration\standalone_xml_history\current to C:\BuildAgent\work\38e1ea00f932992d\full\testsuite\integration\basic\target\jbossas\standalone\configuration\standalone_xml_history\20160422-221021244




	at org.jboss.as.controller.persistence.ConfigurationFile.createHistoryDirectory(ConfigurationFile.java:668)




	at org.jboss.as.controller.persistence.ConfigurationFile.successfulBoot(ConfigurationFile.java:500)




	at org.jboss.as.controller.persistence.BackupXmlConfigurationPersister.successfulBoot(BackupXmlConfigurationPersister.java:94)




	at org.jboss.as.controller.AbstractControllerService.finishBoot(AbstractControllerService.java:452)




	at org.jboss.as.server.ServerService.boot(ServerService.java:367)




	at org.jboss.as.controller.AbstractControllerService$1.run(AbstractControllerService.java:299)




	at java.lang.Thread.run(Thread.java:745)






That stack trace indicates file standalone\configuration\standalone_xml_history\20160422-221021144 must already exist but the 2nd attempt renameTo standalone\configuration\standalone_xml_history\20160422-221021244 has failed. It would be good to sort out what happened, but regardless it should not fail boot.</description>
			<version>2.1.0.Final</version>
			<fixedVersion>2.2.0.CR1, 3.0.0.Alpha1</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.logging.ControllerLogger.java</file>
			<file type="M">org.jboss.as.controller.persistence.FilePersistenceUtils.java</file>
			<file type="M">org.jboss.as.controller.persistence.ConfigurationFile.java</file>
		</fixedFiles>
		<links>
			<link type="Related" description="is related to">1078</link>
		</links>
	</bug>
	<bug id="1522" opendate="2016-05-02 06:18:36" fixdate="2016-05-02 22:59:19" resolution="Done">
		<buginformation>
			<summary>PersistanceResourceTestCase fails if defaultPermissions contain only groups</summary>
			<description>PersistanceResourceTestCase fails on Windows 10 (out-of-box configuration) where defaultPermissins list contain only groups, ownerPermissions is empty set thus assertion fail - see discussion on https://github.com/wildfly/wildfly-core/pull/1513.
Test the ownerPermissions for emptiness before making the assertion.</description>
			<version>3.0.0.Alpha1</version>
			<fixedVersion>3.0.0.Alpha1</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.persistence.PersistanceResourceTestCase.java</file>
		</fixedFiles>
		<links>
			<link type="Related" description="relates to">1486</link>
			<link type="Related" description="is related to">2335</link>
		</links>
	</bug>
	<bug id="1525" opendate="2016-04-28 21:41:39" fixdate="2016-05-17 00:00:05" resolution="Done">
		<buginformation>
			<summary> ageout-history does not report failures</summary>
			<description>When ageout-history cannot delete the old CP files, it silently fails and returns "success".
LocalAgeoutHistoryHandler#recursiveDelete does keep track of whether the
delete failed or succeeded, but the return value from this method is ignored
in execute(...).
If recursiveDelete returns false, it should report a failure.</description>
			<version>2.1.0.Final</version>
			<fixedVersion>3.0.0.Alpha1</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.patching.logging.PatchLogger.java</file>
			<file type="M">org.jboss.as.patching.management.LocalAgeoutHistoryHandler.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned to">4542</link>
		</links>
	</bug>
	<bug id="1546" opendate="2016-05-11 07:07:27" fixdate="2016-05-17 21:10:47" resolution="Done">
		<buginformation>
			<summary>Whitespaces in the middle of the value are siletly ignored</summary>
			<description>Whitespace in the middle of value (e.g. adding a system property with a value like "my property") is silently ignored.
Going to the history, this behaviour changed was introduced in EAP 6.0.1
6.0.0






/subsystem=logging/console-handler=CONSOLE:write-attribute(name=level, value=   I   N   F   O)




{




    "outcome" =&amp;gt; "failed",




    "failure-description" =&amp;gt; "JBAS011539: Log level I   N   F   O is invalid.",




    "rolled-back" =&amp;gt; true




}




/system-property=test:add(value=ha ha ha)




/system-property=test:read-attribute(name=value)




{




    "outcome" =&amp;gt; "success",




    "result" =&amp;gt; "ha ha ha"




}






6.0.1 up to 7.0.0






/subsystem=logging/console-handler=CONSOLE:write-attribute(name=level, value=   I   N   F   O)




/subsystem=logging/console-handler=CONSOLE:read-attribute(name=level)




{




    "outcome" =&amp;gt; "success",




    "result" =&amp;gt; "INFO"




}




/system-property=test:add(value=ha ha ha)




/system-property=test:read-attribute(name=value)




{




    "outcome" =&amp;gt; "success",




    "result" =&amp;gt; "hahaha"




}






Main concern here is whether it is a correct behaviour to silently ignore the whitespace in the middle.</description>
			<version>2.2.0.CR2</version>
			<fixedVersion>3.0.0.Alpha1</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.cli.parsing.test.OperationParsingTestCase.java</file>
			<file type="M">org.jboss.as.cli.parsing.operation.PropertyValueState.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">4536</link>
		</links>
	</bug>
	<bug id="1490" opendate="2016-04-20 15:54:12" fixdate="2016-05-18 13:47:45" resolution="Done">
		<buginformation>
			<summary>JDK9 removes support for sun.boot.class.path</summary>
			<description>Cite from: http://openjdk.java.net/jeps/261
_Removed: Bootstrap class-path options
In earlier releases the -Xbootclasspath option allows the default bootstrap class path to be overridden, and the -Xbootclasspath/p option allows a sequence of files and directories to be prepended to the default path. The computed value of this path is reported via the JDK-specific system property sun.boot.class.path.
With the module system in place there is no longer a bootstrap class path as such, so the javac compiler only supports the -Xbootclasspath option in legacy mode, the java launcher no longer supports either option, and the system property sun.boot.class.path will be removed._</description>
			<version>2.1.0.Final</version>
			<fixedVersion>3.0.0.Alpha1</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.test.integration.management.interfaces.JmxManagementInterface.java</file>
		</fixedFiles>
		<links>
			<link type="Related" description="is related to">1374</link>
		</links>
	</bug>
	<bug id="1557" opendate="2016-05-17 21:21:25" fixdate="2016-05-20 03:09:55" resolution="Done">
		<buginformation>
			<summary>PropertiesAttributeDefinition unwrap does not properly handle undefined values</summary>
			<description>The unwrap method resolves the value of the map entries but does not check if they are defined before calling asString(). So an undefined value will store as string "undefined" instead of null.
The class doesn&amp;amp;apos;t any way to configure or check whether null is ok; perhaps I&amp;amp;apos;ll improve that as well. &amp;lt;--- was incorrect</description>
			<version>2.2.0.CR2</version>
			<fixedVersion>3.0.0.Alpha1</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.PropertiesAttributeDefinition.java</file>
		</fixedFiles>
	</bug>
	<bug id="1491" opendate="2016-04-20 16:06:37" fixdate="2016-05-20 03:11:37" resolution="Done">
		<buginformation>
			<summary>WildFly-Core and its build process cannot rely on default JDK JAXP providers</summary>
			<description>In order to ensure consistent WildFly-Core build and runtime behavior on all JDKs it is necessary to explicitly specify which JAXP providers should be used instead of default ones
provided by JDK.</description>
			<version>2.1.0.Final</version>
			<fixedVersion>3.0.0.Alpha1</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.test.patching.CumulativePatchingScenariosTestCase.java</file>
		</fixedFiles>
		<links>
			<link type="Related" description="is related to">1374</link>
		</links>
	</bug>
	<bug id="1493" opendate="2016-04-20 20:05:27" fixdate="2016-05-20 03:11:49" resolution="Done">
		<buginformation>
			<summary>org.jboss.as.host.controller.Main.getHostSystemProperties() doesn&amp;apos;t propagate -Djdk.launcher.addexports.%d=%s value properly</summary>
			<description>JDK9 provides -XaddExports launch option to workaround potential migration problems to modularized JDK.
When modularized JDK forks new process all -XaddExports values are translated into
-Djdk.launcher.addexports.%d=%s JVM options.
But method org.jboss.as.host.controller.Main.getHostSystemProperties()
has problems with its values.
The format of -XaddExports (and thus for -Djdk.launcher.addexports.%d=%s too) is:






-XaddExports:&amp;lt;source-module&amp;gt;/&amp;lt;package&amp;gt;=&amp;lt;target-module&amp;gt;(,&amp;lt;target-module&amp;gt;)*






See http://openjdk.java.net/jeps/261 for more information.</description>
			<version>2.1.0.Final</version>
			<fixedVersion>3.0.0.Alpha1</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.host.controller.Main.java</file>
		</fixedFiles>
		<links>
			<link type="Related" description="is related to">1374</link>
		</links>
	</bug>
	<bug id="1554" opendate="2016-05-15 13:30:17" fixdate="2016-06-12 18:56:12" resolution="Done">
		<buginformation>
			<summary>Building an attribute builder based on another attribute builder does not copy CapabilityReferenceRecorder</summary>
			<description>AbstractAttributeDefinitionBuilder(final AttributeDefinition basis) seems to copy every field from the basis attribute, except the CapabilityReferenceRecorder.  Looks like an oversight.</description>
			<version>2.2.0.CR2</version>
			<fixedVersion>2.2.0.CR3, 3.0.0.Alpha2</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.AbstractAttributeDefinitionBuilder.java</file>
		</fixedFiles>
	</bug>
	<bug id="1572" opendate="2016-05-27 16:20:10" fixdate="2016-06-20 02:04:49" resolution="Done">
		<buginformation>
			<summary>Suggestion list for argument value is not generated if the value contains a whitespace</summary>
			<description>When an argument value contains a space (eg. deploy /path/to/test-application.war --all-server-groups --headers={rollout id=foo}) and if user hits tab after the whitespace, suggestions are generated based on the command, rather than the current argument&amp;amp;apos;s name.</description>
			<version>3.0.0.Alpha1</version>
			<fixedVersion>3.0.0.Alpha2</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.cli.parsing.ParserUtil.java</file>
			<file type="M">org.jboss.as.cli.parsing.test.CommandTestCase.java</file>
			<file type="M">org.jboss.as.cli.parsing.DefaultStateWithEndCharacter.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">4743</link>
			<link type="Dependency" description="blocks">5338</link>
		</links>
	</bug>
	<bug id="1570" opendate="2016-05-27 12:51:56" fixdate="2016-06-20 02:05:22" resolution="Done">
		<buginformation>
			<summary>Saved rollout-plan &amp;apos;name&amp;apos; or &amp;apos;id&amp;apos; attribute discrepancy</summary>
			<description>When using rollout plans for EAP deployment scenarios I can create my own named rollout-plan for ease of use. I can then apply rollout command later on, referring with name of my own rollout plan that should be used. There is minor discrepancy in the way I create and use such rollout plan though.
When I create rollout-plan, I use command like:






rollout-plan add --name=my-rollout-plan --content={rollout main-server-group(rolling-to-servers=false,max-failed-servers=1),other-server-group(rolling-to-servers=true,max-failure-percentage=20) rollback-across-groups=true}







see --name attribute given to name my rollout plan

When I then refer to it I use following command:






deploy /path/to/test-application.war --all-server-groups --headers={rollout id=my-rollout-plan}







see id attribute given to rollout header operation

Yes, this is really minor issue, but I think that these two attributes used in aforementioned commands should be unified (preferably to name instead of id) as user might be confused when using it.
Note: examples are used from our documentation.
Note: I do not know whether I am missing something but I was not able to retrieve more info how to use rollout header operation in deploy command directly in CLI.</description>
			<version>3.0.0.Alpha1</version>
			<fixedVersion>3.0.0.Alpha2</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.cli.parsing.operation.header.RolloutPlanState.java</file>
			<file type="M">org.jboss.as.cli.parsing.operation.header.RolloutPlanHeaderCallbackHandler.java</file>
			<file type="M">org.jboss.as.cli.operation.impl.RolloutPlanCompleter.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">3771</link>
		</links>
	</bug>
	<bug id="1474" opendate="2016-04-15 15:19:39" fixdate="2016-06-24 15:28:01" resolution="Done">
		<buginformation>
			<summary>CLI version command should not use JBoss AS in its output field names</summary>
			<description>An example output of the current version command
[standalone@localhost:9990 /] version 
JBoss Admin Command-line Interface
JBOSS_HOME: /xxx/wildfly-core-3.0.0.Alpha1-SNAPSHOT
JBoss AS release: 3.0.0.Alpha1-SNAPSHOT "Kenny"
JBoss AS product: &amp;lt;product name&amp;gt;
JAVA_HOME: /yyy/java
java.version: 1.8.0_60
java.vm.vendor: Oracle Corporation
java.vm.version: 25.60-b23
os.name: Linux
os.version: 4.4.6-300.fc23.x86_64
&amp;amp;apos;JBoss AS&amp;amp;apos; should not appear in the field names.</description>
			<version>2.1.0.Final</version>
			<fixedVersion>3.0.0.Alpha3</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.cli.handlers.VersionHandler.java</file>
			<file type="M">org.jboss.as.test.integration.management.cli.CliArgumentsTestCase.java</file>
		</fixedFiles>
		<links>
			<link type="Related" description="is related to">1476</link>
		</links>
	</bug>
	<bug id="1595" opendate="2016-06-15 10:10:43" fixdate="2016-06-24 15:28:45" resolution="Done">
		<buginformation>
			<summary>CLI doesn&amp;apos;t autocomplete for unalias command</summary>
			<description>Tab completion for CLI unalias commend doesn&amp;amp;apos;t seem to work. CLI will suggest available option, but doesn&amp;amp;apos;t autocomplete.
actual






[standalone@localhost:9990 /] unalias read_&amp;lt;TAB&amp;gt;




  read_undertow  




[standalone@localhost:9990 /] unalias read_&amp;lt;TAB&amp;gt;




  read_undertow 






expected






[standalone@localhost:9990 /] unalias read_&amp;lt;TAB&amp;gt;




[standalone@localhost:9990 /] unalias read_undertow





</description>
			<version>3.0.0.Alpha1</version>
			<fixedVersion>3.0.0.Alpha3</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.cli.operation.OperationRequestCompleter.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">4939</link>
		</links>
	</bug>
	<bug id="1528" opendate="2016-05-05 17:21:10" fixdate="2016-06-24 21:13:12" resolution="Done">
		<buginformation>
			<summary>EAP 7 with secured management become unavailable after ~8 days</summary>
			<description>Appears there may be an EAP 7.0.0.CR01 2-way ssl issue in domain mode.  
Issue discovered by JON QE after testing for 8 days with SSL.
JON QE did not see the same issue when running identical test against EAP 6. 
Restarting the remote client(JON Agent) did not repair/fix the issue, and only was repaired after EAP instance restarted.
See BZ https://bugzilla.redhat.com/show_bug.cgi?id=1330180#c0 for more details.
JON team would like some evaluation done to determine:
i)if this is EAP 7 issue or
ii)somehow just a JON issue
iii)suggestions on what to do when we try to reproduce properly or ways to shorten reproduce cycle.
This issue could affect GA release schedules.</description>
			<version>2.1.0.Final</version>
			<fixedVersion>2.2.0.CR2, 3.0.0.Alpha3</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.server.ExternalManagementRequestExecutor.java</file>
			<file type="M">org.jboss.as.host.controller.operations.HttpManagementAddHandler.java</file>
			<file type="M">org.jboss.as.host.controller.HostControllerService.java</file>
			<file type="M">org.jboss.as.server.operations.HttpManagementAddHandler.java</file>
			<file type="M">org.jboss.as.server.ServerService.java</file>
		</fixedFiles>
		<links>
			<link type="Causality" description="is caused by">1418</link>
		</links>
	</bug>
	<bug id="1611" opendate="2016-06-22 08:49:33" fixdate="2016-06-28 10:23:55" resolution="Done">
		<buginformation>
			<summary>CLI could stuck if SIGINT is send during authentication dialogue</summary>
			<description>Interruption a CLI session with Ctrl+C during authentication dialogue could get CLI into unresponsive state.
reproduce
Either use a remote server, --no-local-auth cli script arg or remove a local element from ManagementRealm configuration






         &amp;lt;security-realms&amp;gt;




             &amp;lt;security-realm name="ManagementRealm"&amp;gt;




                 &amp;lt;authentication&amp;gt;




-                    &amp;lt;local default-user="$local" skip-group-loading="true"/&amp;gt;






start a standalone server and launch a CLI






[pkremens@localhost] $ ./standalone.sh &amp;amp;




[pkremens@localhost] $ ./jboss-cli.sh




[disconnected /] connect




Authenticating against security realm: ManagementRealm




Username: &amp;lt;Press Ctrl+C here&amp;gt;






Could not connect message is printed, but process is not terminated and stuck at this point.






The controller is not available at localhost:9990: java.net.ConnectException: WFLYPRT0023: Could not connect to http-remoting://localhost:9990. The connection timed out: WFLYPRT0023: Could not connect to http-remoting://localhost:9990. The connection timed out






Only way to recover the terminal is to SIGKILL the CLI process.</description>
			<version>3.0.0.Alpha2</version>
			<fixedVersion>3.0.0.Alpha3</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.cli.impl.CliShutdownHook.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">4954</link>
		</links>
	</bug>
	<bug id="1578" opendate="2016-06-07 05:13:13" fixdate="2016-06-30 22:42:01" resolution="Done">
		<buginformation>
			<summary>Better check of names of existing resources when adding &amp;apos;{local|remote-destination-outbound-socket-binding&amp;apos;</summary>
			<description>Lets have some /socket-binding-group=standard-sockets/socket-binding with particular name. Then when I create some /socket-binding-group=standard-sockets/remote-destination-outbound-socket-binding or /socket-binding-group=standard-sockets/local-destination-outbound-socket-binding using same name as of already existing socket-binding resource, add operation is successful but when I perform server reload, it crashes as it is not able to parse configuration. See:

Start EAP and log to CLI
create your own socket-binding resource and {remote|local}-destination-outbound-socket-binding resource with same names and perform reload






/socket-binding-group=standard-sockets/socket-binding=myBinding:add()




/socket-binding-group=standard-sockets/remote-destination-outbound-socket-binding=myBinding:add(host=localhost,port=8765)




or




/socket-binding-group=standard-sockets/local-destination-outbound-socket-binding=myBinding:add(socket-binding-ref=http)




reload






server crashes with following stacktrace in console log:






17:31:40,447 INFO  [org.jboss.as.connector.deployers.jdbc] (MSC service thread 1-7) WFLYJCA0019: Stopped Driver service with driver-name = h2




17:31:40,453 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-8) WFLYUT0008: Undertow HTTP listener default suspending




17:31:40,454 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-8) WFLYUT0007: Undertow HTTP listener default stopped, was bound to 127.0.0.1:8080




17:31:40,454 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-3) WFLYUT0004: Undertow 1.3.21.Final-redhat-1 stopping




17:31:40,458 INFO  [org.jboss.as.mail.extension] (MSC service thread 1-7) WFLYMAIL0002: Unbound mail session [java:jboss/mail/Default]




17:31:40,461 INFO  [org.jboss.as] (MSC service thread 1-5) WFLYSRV0050: JBoss EAP 7.0.0.GA (WildFly Core 2.1.2.Final-redhat-1) stopped in 22ms




17:31:40,461 INFO  [org.jboss.as] (MSC service thread 1-5) WFLYSRV0049: JBoss EAP 7.0.0.GA (WildFly Core 2.1.2.Final-redhat-1) starting




17:31:40,489 ERROR [org.jboss.as.server] (Controller Boot Thread) WFLYSRV0055: Caught exception during boot: org.jboss.as.controller.persistence.ConfigurationPersistenceException: WFLYCTL0085: Failed to parse configuration




	at org.jboss.as.controller.persistence.XmlConfigurationPersister.load(XmlConfigurationPersister.java:131)




	at org.jboss.as.server.ServerService.boot(ServerService.java:356)




	at org.jboss.as.controller.AbstractControllerService$1.run(AbstractControllerService.java:299)




	at java.lang.Thread.run(Thread.java:745)




Caused by: javax.xml.stream.XMLStreamException: ParseError at [row,col]:[410,9]




Message: WFLYCTL0042: A socket-binding or a outbound-socket-binding myBinding already declared has already been declared in socket-binding-group standard-sockets




	at org.jboss.as.server.parsing.StandaloneXml_4.parseSocketBindingGroup(StandaloneXml_4.java:518)




	at org.jboss.as.server.parsing.StandaloneXml_4.readServerElement(StandaloneXml_4.java:254)




	at org.jboss.as.server.parsing.StandaloneXml_4.readElement(StandaloneXml_4.java:141)




	at org.jboss.as.server.parsing.StandaloneXml.readElement(StandaloneXml.java:103)




	at org.jboss.as.server.parsing.StandaloneXml.readElement(StandaloneXml.java:49)




	at org.jboss.staxmapper.XMLMapperImpl.processNested(XMLMapperImpl.java:110)




	at org.jboss.staxmapper.XMLMapperImpl.parseDocument(XMLMapperImpl.java:69)




	at org.jboss.as.controller.persistence.XmlConfigurationPersister.load(XmlConfigurationPersister.java:123)




	... 3 more









17:31:40,490 FATAL [org.jboss.as.server] (Controller Boot Thread) WFLYSRV0056: Server boot has failed in an unrecoverable manner; exiting. See previous messages for details.




17:31:40,491 INFO  [org.jboss.as.server] (Thread-2) WFLYSRV0220: Server shutdown has been requested.




17:31:40,496 INFO  [org.jboss.as] (MSC service thread 1-2) WFLYSRV0050: JBoss EAP 7.0.0.GA (WildFly Core 2.1.2.Final-redhat-1) stopped in 3ms







After this occurs, one needs to fix ./standalone/configuration/standalone.xml manually by removing duplicate resources.
If there is a problem for those resources to have same names I would welcome that names are checked during the add operation already regarding to all resources in socket-binding and {remote|local}-destination-outbound-socket-binding.
Note: not sure whether CLI component is appropriate, please change if there is better component for this.</description>
			<version>3.0.0.Alpha1</version>
			<fixedVersion>3.0.0.Alpha3</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.server.services.net.SocketBindingAddHandler.java</file>
			<file type="M">org.jboss.as.controller.logging.ControllerLogger.java</file>
			<file type="M">org.jboss.as.server.services.net.RemoteDestinationOutboundSocketBindingAddHandler.java</file>
			<file type="M">org.jboss.as.server.services.net.LocalDestinationOutboundSocketBindingAddHandler.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">4861</link>
		</links>
	</bug>
	<bug id="1625" opendate="2016-06-28 15:52:58" fixdate="2016-06-30 22:43:52" resolution="Done">
		<buginformation>
			<summary>Operation description is not complete in :read-resource-description</summary>
			<description>The ouput of :read-resource-description is missing some metadata for operations compared to :read-operation-description:






[domain@localhost:9990 /] /profile=default:read-resource-description(operations=true)




{




    "outcome" =&amp;gt; "success",




    "result" =&amp;gt; {




        "description" =&amp;gt; "A named set of subsystem configurations.",




        ...




        "operations" =&amp;gt; {




            ...




            "read-attribute-group-names" =&amp;gt; {




                "operation-name" =&amp;gt; "read-attribute-group-names",




                "description" =&amp;gt; "Gets the names of all the attribute groups under the selected resource",




                "request-properties" =&amp;gt; {},




                "reply-properties" =&amp;gt; {




                    "type" =&amp;gt; LIST,




                    "value-type" =&amp;gt; STRING




                }




            },




            ...




}




[domain@localhost:9990 /] /profile=default:read-operation-description(name=read-attribute-group-names)




{




    "outcome" =&amp;gt; "success",




    "result" =&amp;gt; {




        "operation-name" =&amp;gt; "read-attribute-group-names",




        "description" =&amp;gt; "Gets the names of all the attribute groups under the selected resource",




        "request-properties" =&amp;gt; {},




        "reply-properties" =&amp;gt; {




            "type" =&amp;gt; LIST,




            "value-type" =&amp;gt; STRING




        },




        "read-only" =&amp;gt; true,




        "runtime-only" =&amp;gt; true




    }




}






At least read-only and runtime-only metadata are missing (when they are set on the operation).</description>
			<version>3.0.0.Alpha2</version>
			<fixedVersion>3.0.0.Alpha3</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.operations.global.ReadOperationDescriptionHandler.java</file>
			<file type="M">org.jboss.as.model.test.ModelTestModelDescriptionValidator.java</file>
			<file type="M">org.jboss.as.controller.operations.global.ReadResourceDescriptionHandler.java</file>
			<file type="M">org.jboss.as.controller.descriptions.ModelDescriptionConstants.java</file>
		</fixedFiles>
	</bug>
	<bug id="1617" opendate="2016-06-23 07:35:35" fixdate="2016-07-07 01:42:55" resolution="Done">
		<buginformation>
			<summary>Tab completion is doesn&amp;apos;t work for cli variables and properties</summary>
			<description>CLI tab completion doesn&amp;amp;apos;t work for CLI variables.
Add a CLI variable:






set myvar=/subsystem=datasources/data-source=ExampleDS




[standalone@embedded /] $myvar:read-resource




{




    "outcome" =&amp;gt; "success",




    "result" =&amp;gt; {




...






Now try to use tab completion
actual






[standalone@embedded /] $myvar:read&amp;lt;TAB&amp;gt;




[standalone@embedded /] $myvar:readread-&amp;lt;TAB&amp;gt;




[standalone@embedded /] $myvar:readread-




&amp;amp;apos;readread-&amp;amp;apos; is not a valid operation name.






expected






[standalone@embedded /] $myvar:read&amp;lt;TAB&amp;gt;




[standalone@embedded /] $myvar:read-resource






</description>
			<version>3.0.0.Alpha2</version>
			<fixedVersion>3.0.0.Alpha4</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.cli.parsing.test.VariablesTestCase.java</file>
			<file type="M">org.jboss.as.cli.operation.impl.DefaultCallbackHandler.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">4949</link>
		</links>
	</bug>
	<bug id="1607" opendate="2016-06-17 12:23:38" fixdate="2016-07-07 02:45:16" resolution="Done">
		<buginformation>
			<summary>Removing children of security-realm always finishes with {"outcome" =&gt; "success"}</summary>
			<description>Removing children of security-realm (e.g. authentication) always finishes with 
{"outcome" =&amp;gt; "success"}
. This happens even if type of children of security-realm does not exist in server configuration. It should rather finish with failure to indicate that nothing was removed.</description>
			<version>2.0.10.Final</version>
			<fixedVersion>2.2.0.CR6, 3.0.0.Alpha4</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.domain.management.security.SecurityRealmChildRemoveHandler.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">5072</link>
			<link type="Duplicate" description="duplicates">1523</link>
		</links>
	</bug>
	<bug id="1523" opendate="2016-02-01 06:17:23" fixdate="2016-07-08 18:24:41" resolution="Done">
		<buginformation>
			<summary>RestartParentResourceRemoveHandler should fail when removing non-existing resources</summary>
			<description>In case when non-existent policy-module is removed through Management CLI, operation should finish with failure. However it finishes with outcome success and nothing is changed. It can be confusing since wrong command seems same as correct command.</description>
			<version>2.1.0.Final</version>
			<fixedVersion>2.2.0.CR6, 3.0.0.Alpha4</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.domain.management.security.SecurityRealmChildRemoveHandler.java</file>
			<file type="M">org.jboss.as.controller.RestartParentResourceRemoveHandler.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">3112</link>
			<link type="Duplicate" description="is duplicated by">1607</link>
			<link type="Duplicate" description="is duplicated by">6083</link>
			<link type="Superset" description="incorporates">6102</link>
		</links>
	</bug>
	<bug id="1644" opendate="2016-07-08 18:43:01" fixdate="2016-07-08 21:33:18" resolution="Done">
		<buginformation>
			<summary>PersistenceResourceXmlDescription marshals attributes in the reverse order they are added</summary>
			<description>This in marshalAttributes results in iterating over a reversed list:






//we sort attributes to make sure that attributes that marshall to elements are last




for (AttributeDefinition ad : attributes.stream().sorted((o1, o2) -&amp;gt; o1.getParser().isParseAsElement() ? 1 : -1).collect(Collectors.toList())) {




        






The sorter returning -1 for all non-element attributes has that effect.</description>
			<version>2.0.0.Final</version>
			<fixedVersion>2.2.0.CR6, 3.0.0.Alpha4</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.PersistentResourceXMLDescription.java</file>
		</fixedFiles>
	</bug>
	<bug id="1635" opendate="2016-07-05 07:04:51" fixdate="2016-07-08 23:36:17" resolution="Done">
		<buginformation>
			<summary>Write attribute on a new deployment scanner fails in batch</summary>
			<description>Creating a new deployment-scanner and altering it&amp;amp;apos;s attribute fails if done in single batch. Running the commands without batch or running batch on CLI embed-server works fine.
reproduce






batch




/subsystem=deployment-scanner/scanner=scan:add(path=log, relative-to="jboss.server.base.dir", auto-deploy-exploded=false, scan-enabled=false)




/subsystem=deployment-scanner/scanner=scan:write-attribute(name=scan-interval, value=6000)




run-batch






fails with






08:09:19,076 ERROR [org.jboss.as.controller.management-operation] (management-handler-thread - 4) WFLYCTL0013: Operation ("write-attribute") failed - address: ([




    ("subsystem" =&amp;gt; "deployment-scanner"),




    ("scanner" =&amp;gt; "scan")




]): java.lang.IllegalStateException




	at org.jboss.as.server.deployment.scanner.DeploymentScannerService.getValue(DeploymentScannerService.java:234)




	at org.jboss.as.server.deployment.scanner.DeploymentScannerService.getValue(DeploymentScannerService.java:62)




	at org.jboss.msc.service.ServiceControllerImpl.getValue(ServiceControllerImpl.java:1158)




	at org.jboss.as.controller.OperationContextImpl$OperationContextServiceController.getValue(OperationContextImpl.java:2282)




	at org.jboss.as.server.deployment.scanner.AbstractWriteAttributeHandler.applyUpdateToRuntime(AbstractWriteAttributeHandler.java:58)




	at org.jboss.as.controller.AbstractWriteAttributeHandler$1.execute(AbstractWriteAttributeHandler.java:104)




	at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:890)




	at org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:659)




	at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:370)




	at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1344)




	at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:392)




	at org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:217)




	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.doExecute(ModelControllerClientOperationHandler.java:208)




	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.access$300(ModelControllerClientOperationHandler.java:130)




	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:152)




	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:148)




	at java.security.AccessController.doPrivileged(AccessController.java:686)




	at javax.security.auth.Subject.doAs(Subject.java:569)




	at org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:92)




	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1.execute(ModelControllerClientOperationHandler.java:148)




	at org.jboss.as.protocol.mgmt.AbstractMessageHandler$ManagementRequestContextImpl$1.doExecute(AbstractMessageHandler.java:363)




	at org.jboss.as.protocol.mgmt.AbstractMessageHandler$AsyncTaskRunner.run(AbstractMessageHandler.java:472)




	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1153)




	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)




	at java.lang.Thread.run(Thread.java:785)




	at org.jboss.threads.JBossThread.run(JBossThread.java:320)






using the embed server works






embed-server




batch




/subsystem=deployment-scanner/scanner=scan:add(path=log, relative-to="jboss.server.base.dir", auto-deploy-exploded=false, scan-enabled=false)




/subsystem=deployment-scanner/scanner=scan:write-attribute(name=scan-interval, value=6000)




run-batch






Setting only as minor as there is no real use case behind this (scan-interval can be set while adding a new scanner) - run into it quite accidentally. No regression against previous release.</description>
			<version>3.0.0.Alpha3</version>
			<fixedVersion>3.0.0.Alpha4</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.server.deployment.scanner.AbstractWriteAttributeHandler.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">5134</link>
		</links>
	</bug>
	<bug id="1627" opendate="2016-06-29 09:32:52" fixdate="2016-07-13 01:33:24" resolution="Done">
		<buginformation>
			<summary>CLI tab comple should reflect curent position of prompt</summary>
			<description>CLI tab completion cannot be used in the middle of the command. Whole command is taken as a context, ignoring the current position of prompt. Auto-completed string is inserted to the current position of the prompt (no matter it can be placed in the middle of the command).
[] is used to show the current position of the prompt
actual
tab completion in the middle doesn&amp;amp;apos;t work






/subsystem=loggin[]&amp;lt;TAB&amp;gt;/root-logger=ROOT




/subsystem=loggin[]/root-logger=ROOT






tab completion with prompt in the middle






/subsystem=logging/[]&amp;lt;TAB&amp;gt;root-logger=R




/subsystem=logging/ROOT[]root-logger=R






expected
tab completion in the middle works






/subsystem=loggin[]&amp;lt;TAB&amp;gt;/root-logger=ROOT




/subsystem=logging[]/root-logger=ROOT






tab completion with prompt in the middle doesn&amp;amp;apos;t add anything unless it&amp;amp;apos;s a valid part of the command






/subsystem=logging/[]&amp;lt;TAB&amp;gt;root-logger=R




/subsystem=logging/[]root-logger=R





</description>
			<version>3.0.0.Alpha2</version>
			<fixedVersion>3.0.0.Alpha4</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.cli.completion.mock.MockCommandContext.java</file>
			<file type="D">org.jboss.as.cli.completion.operation.test.DeployCompletionTest.java</file>
			<file type="M">org.jboss.as.cli.CommandCompleter.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">4948</link>
		</links>
	</bug>
	<bug id="1647" opendate="2016-07-12 08:53:38" fixdate="2016-07-13 01:35:53" resolution="Done">
		<buginformation>
			<summary>Default app-name value of Syslog handler in Audit Logging violates specification</summary>
			<description>According to syslog specification[1] app-name cannot contain space character (" "). However, the default value in WildFly Core 3.0.0.Alpha3 is WildFly Core. This results in the syslog server is not able to capture Process ID from which the message was sent.
E.g. following piece of information is captured WildFly[Core] (...) instead of WildFlyCore[795]
Suggestions for improvement:
Change default value WildFly Core to one without space character.
Also please consider addition of check whether app-name contains space character.
[1] https://tools.ietf.org/html/rfc5424#page-8</description>
			<version>3.0.0.Alpha3</version>
			<fixedVersion>2.2.0.CR8, 3.0.0.Alpha4</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.audit.SyslogAuditLogHandler.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">5185</link>
			<link type="Cloners" description="cloned to">142</link>
			<link type="Duplicate" description="duplicates">172</link>
		</links>
	</bug>
	<bug id="1159" opendate="2015-11-24 07:43:05" fixdate="2016-07-25 22:58:38" resolution="Done">
		<buginformation>
			<summary>Add a runtime operation which shows filesystem usage and availability for known server locations</summary>
			<description>For management purposes it would be very useful to report runtime metrics for filesystem usage and availability for known server locations (data, tmp, logs, etc).</description>
			<version>2.0.2.Final</version>
			<fixedVersion>3.0.0.Alpha4</fixedVersion>
			<type>Feature Request</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.logging.LoggingExtension.java</file>
			<file type="M">org.jboss.as.logging.PeriodicSizeRotatingHandlerResourceDefinition.java</file>
			<file type="M">org.wildfly.core.test.standalone.mgmt.BasicOperationsUnitTestCase.java</file>
			<file type="M">org.jboss.as.logging.AbstractFileHandlerDefinition.java</file>
			<file type="M">org.jboss.as.controller.services.path.PathResourceDefinition.java</file>
			<file type="M">org.jboss.as.server.deployment.DeploymentAddHandlerTestCase.java</file>
			<file type="M">org.jboss.as.server.deployment.scanner.DeploymentScannerDefinition.java</file>
			<file type="M">org.jboss.as.logging.FileHandlerResourceDefinition.java</file>
			<file type="M">org.jboss.as.logging.PeriodicHandlerResourceDefinition.java</file>
			<file type="M">org.jboss.as.server.ServerEnvironmentResourceDescription.java</file>
			<file type="M">org.jboss.as.host.controller.descriptions.HostEnvironmentResourceDefinition.java</file>
			<file type="M">org.jboss.as.logging.SizeRotatingHandlerResourceDefinition.java</file>
		</fixedFiles>
		<links>
			<link type="Duplicate" description="duplicates">1158</link>
		</links>
	</bug>
	<bug id="1640" opendate="2016-07-07 17:21:08" fixdate="2016-07-25 23:02:48" resolution="Done">
		<buginformation>
			<summary>Intermittent failure in DeploymentScannerUnitTestCase</summary>
			<description>DeploymentScannerUnitTestCase.testStartup() has been failing intermittently since May:
https://ci.wildfly.org/project.html?projectId=WildFlyCore&amp;amp;buildTypeId=&amp;amp;tab=testDetails&amp;amp;testNameId=-2364482317512802563&amp;amp;order=TEST_STATUS_DESC&amp;amp;branch_WildFlyCore=__all_branches__&amp;amp;itemsCount=50
The May 4 failure is the first that was not associated with some large scale failure; i.e. is more likely to be relevant to the test itself.
I&amp;amp;apos;ll send up a PR to @Ignore this test.</description>
			<version>2.2.0.CR5</version>
			<fixedVersion>3.0.0.Alpha4</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.test.manualmode.deployment.AbstractDeploymentUnitTestCase.java</file>
			<file type="M">org.jboss.as.test.manualmode.deployment.DeploymentScannerUnitTestCase.java</file>
		</fixedFiles>
	</bug>
	<bug id="1481" opendate="2016-04-18 14:48:59" fixdate="2016-07-26 02:42:04" resolution="Done">
		<buginformation>
			<summary>list-add operation doesn&amp;apos;t work on login-modules attribute</summary>
			<description>Executing list-add operation on login-modules results in the modules being replaced instead of appending new module.</description>
			<version>2.1.0.Final</version>
			<fixedVersion>3.0.0.Alpha4</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.operations.global.WriteAttributeHandler.java</file>
			<file type="M">org.jboss.as.controller.AbstractWriteAttributeHandler.java</file>
			<file type="M">org.jboss.as.controller.operations.global.AbstractCollectionHandler.java</file>
			<file type="M">org.jboss.as.controller.operations.global.ReadAttributeHandler.java</file>
			<file type="M">org.jboss.as.controller.operation.global.EnhancedSyntaxTestCase.java</file>
			<file type="M">org.jboss.as.controller.operation.global.CollectionOperationsTestCase.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned to">4245</link>
		</links>
	</bug>
	<bug id="1563" opendate="2016-05-20 15:07:06" fixdate="2016-07-27 16:05:05" resolution="Done">
		<buginformation>
			<summary>Failed CLI batch command with "deploy --force" for replace deployment</summary>
			<description>Using &amp;amp;apos;deploy --force&amp;amp;apos; command on CLI batch mode fails and returns an error message: "Request is missing the address part."






Command






 jboss-cli.sh --connect --controller=127.0.0.1:9999 --user=admin --password=xxx --file="deploy.cli"












deploy.cli






batch




deploy --force ./jboss-ejb-in-ear.ear




run-batch






Full Error message
Failed to handle &amp;amp;apos;run-batch&amp;amp;apos;: org.jboss.as.cli.CommandFormatException: Request is missing the address part.: Request is missing the address part.
or
The batch failed with the following error (you are remaining in the batch editing mode to have a chance to correct the error): Request is missing the address part.

Expected message
The batch executed successfully

However, it&amp;amp;apos;s working in "WildFly 10 CLI interactive mode" and "JBoss AS 7 CLI batch" without error.
There is no adding "address" key in buildDeploymentReplace() of DeployHandler like below.
Even though on CLI batch mode it validates existence of "address" key in request with Util.validateRequest(), when &amp;amp;apos;run-batch&amp;amp;apos; command execute in org.jboss.as.cli.handlers.batch.BatchRunHandler.doHandle()
-------------------------------------------------------------------------------------------

First deploy: add by org.jboss.as.cli.handlers.DeployHandler.buildDeploymentAdd()






{




    "operation" =&amp;gt; "add",




    "address" =&amp;gt; {"deployment" =&amp;gt; "jboss-ejb-in-ear.ear"},




    "content" =&amp;gt; [{"bytes" =&amp;gt; bytes {




    ...




    }}]




}






-------------------------------------------------------------------------------------------
After deploy: replace by org.jboss.as.cli.handlers.DeployHandler.buildDeploymentReplace()






{




    "operation" =&amp;gt; "full-replace-deployment",




    "name" =&amp;gt; "jboss-ejb-in-ear.ear",




    "enabled" =&amp;gt; true,




    "content" =&amp;gt; [{"bytes" =&amp;gt; bytes {




    ...




    }}]




}






-------------------------------------------------------------------------------------------
Expected by org.jboss.as.cli.handlers.DeployHandler.buildDeploymentReplace()






{




    "operation" =&amp;gt; "full-replace-deployment",




    "name" =&amp;gt; "jboss-ejb-in-ear.ear",




    "address" =&amp;gt; [],




    "enabled" =&amp;gt; true,




    "content" =&amp;gt; [{"bytes" =&amp;gt; bytes {




    ...




    }}]




}






-------------------------------------------------------------------------------------------

</description>
			<version>2.1.0.Final</version>
			<fixedVersion>3.0.0.Alpha2</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.cli.handlers.DeployHandler.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned to">4651</link>
		</links>
	</bug>
	<bug id="1592" opendate="2016-06-13 18:50:58" fixdate="2016-07-28 16:56:23" resolution="Done">
		<buginformation>
			<summary>PropertiesFileLoader persists entries after deletion</summary>
			<description>There is a bug in PropertiesFileLoader#persistProperties, specifically here. Because of the write call in the else block, properties are persisted to the file even after they have been deleted in memory.
Here is a fixed implementation of persistProperties that we are using as a workaround.</description>
			<version>2.1.0.Final</version>
			<fixedVersion>2.2.0.Final, 3.0.0.Alpha4</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.domain.management.security.PropertiesFileLoader.java</file>
			<file type="M">org.jboss.as.domain.management.security.PropertiesPatternMatchingTestCase.java</file>
		</fixedFiles>
	</bug>
	<bug id="1699" opendate="2016-08-08 12:45:55" fixdate="2016-08-11 15:03:48" resolution="Done">
		<buginformation>
			<summary>Inefficient usage of map iterators</summary>
			<description>Inefficient usage of map iterators






Map&amp;lt;String, CommandArgument&amp;gt; options = getDynamicOptions(ctx);




for (String k : options.keySet()) {




   args.add(options.get(k));




}






can be replaced with args.addAll(getDynamicOptions(ctx).values());</description>
			<version>3.0.0.Alpha4</version>
			<fixedVersion>3.0.0.Alpha5</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.cli.handlers.LsHandler.java</file>
		</fixedFiles>
	</bug>
	<bug id="1590" opendate="2016-06-12 14:18:43" fixdate="2016-08-11 15:17:26" resolution="Done">
		<buginformation>
			<summary>Default parameter length validating ignores setMinSize(0)</summary>
			<description>With the following attribute definition: -






    static final SimpleAttributeDefinition REPLACEMENT = new SimpleAttributeDefinitionBuilder(ElytronDescriptionConstants.REPLACEMENT, ModelType.STRING, false)




        .setAllowExpression(true)




        .setMinSize(0)




        .setFlags(AttributeAccess.Flag.RESTART_RESOURCE_SERVICES)




        .build();






The following error is reported if an empty string is used as a parameter: -











[standalone@localhost:9990 /] ./subsystem=elytron/regex-name-rewriter=strip-realm:add(pattern="@ELYTRON.ORG", replacement="", replace-all=true)




{




    "outcome" =&amp;gt; "failed",




    "failure-description" =&amp;gt; "WFLYCTL0113: &amp;amp;apos;&amp;amp;apos; is an invalid value for parameter replacement. Values must have a minimum length of 1 characters",




    "rolled-back" =&amp;gt; true




}






</description>
			<version>3.0.0.Alpha1</version>
			<fixedVersion>3.0.0.Alpha5</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.AbstractAttributeDefinitionBuilder.java</file>
			<file type="M">org.jboss.as.controller.test.WriteAttributeOperationTestCase.java</file>
			<file type="M">org.jboss.as.controller.AttributeDefinition.java</file>
			<file type="M">org.jboss.as.controller.SimpleAttributeDefinitionUnitTestCase.java</file>
			<file type="M">org.jboss.as.controller.operations.validation.BytesValidator.java</file>
		</fixedFiles>
	</bug>
	<bug id="1706" opendate="2016-08-10 17:01:37" fixdate="2016-08-11 15:40:28" resolution="Done">
		<buginformation>
			<summary>Deploying with force an unmanaged deployment makes it managed</summary>
			<description>For an unmanaged deployment if you replace it using the CLI deploy command it becomes managed.
To reproduce:






deploy /home/ehsavoie/dev/wildfly/quickstart/kitchensink-ear/ear/target/wildfly-kitchensink-ear.ear --unmanaged




deploy /home/ehsavoie/dev/wildfly/quickstart/kitchensink-ear/ear/target/wildfly-kitchensink-ear.ear --unmanaged --force






After the second command the deployment is managed.</description>
			<version>3.0.0.Alpha4</version>
			<fixedVersion>3.0.0.Alpha5</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.cli.handlers.DeployHandler.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned to">5605</link>
		</links>
	</bug>
	<bug id="1710" opendate="2016-08-11 16:39:18" fixdate="2016-08-11 18:29:34" resolution="Done">
		<buginformation>
			<summary>WFCORE-1106 work ignores fact that HostCapabilityScope exists</summary>
			<description>The WFCORE-1106 work for checking the runtime status of a capability assumes that only CapabilityScope.GLOBAL should be relevant when the check is performed. But this omits HostCapabilityScope which comes into play when host controller subsystems are used.</description>
			<version>3.0.0.Alpha4</version>
			<fixedVersion>3.0.0.Alpha5</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.CapabilityRegistry.java</file>
		</fixedFiles>
		<links>
			<link type="Causality" description="is caused by">1106</link>
		</links>
	</bug>
	<bug id="1686" opendate="2016-08-02 13:18:50" fixdate="2016-08-11 23:58:56" resolution="Done">
		<buginformation>
			<summary>Standalone server logs FATAL message on --help</summary>
			<description>





15:07:56,793 FATAL [org.jboss.as.server] (main) WFLYSRV0239: Aborting with exit code 1






appears at the end of help for standalone server.
reproduce






bash standalone.sh --help






The issues is a regression against 7.0.0</description>
			<version>3.0.0.Alpha4</version>
			<fixedVersion>3.0.0.Alpha5</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.host.controller.HostControllerEnvironmentWrapper.java</file>
			<file type="M">org.jboss.as.server.ServerEnvironmentWrapper.java</file>
			<file type="M">org.wildfly.core.embedded.EmbeddedStandaloneServerFactory.java</file>
			<file type="M">org.jboss.as.host.controller.Main.java</file>
			<file type="M">org.jboss.as.server.SystemExiter.java</file>
			<file type="M">org.wildfly.core.embedded.EmbeddedHostControllerFactory.java</file>
			<file type="M">org.jboss.as.server.Main.java</file>
		</fixedFiles>
		<links>
			<link type="Causality" description="is caused by">1498</link>
			<link type="Cloners" description="cloned from">5502</link>
		</links>
	</bug>
	<bug id="1687" opendate="2016-08-02 14:41:35" fixdate="2016-08-15 15:57:03" resolution="Done">
		<buginformation>
			<summary>WFLYCTL0357 warning upon undeploying any deployment</summary>
			<description>EAP produces following warning upon undeployment:






WARN  [org.jboss.as.controller] (management-handler-thread - 4) WFLYCTL0357: Notification of type deployment-undeployed is not described for the resource at the address []






The warning is produced for both managed and unmanaged deployments.</description>
			<version>3.0.0.Alpha4</version>
			<fixedVersion>3.0.0.Alpha6</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.server.deployment.DeploymentHandlerUtil.java</file>
		</fixedFiles>
		<links>
			<link type="Causality" description="is caused by">1577</link>
			<link type="Cloners" description="cloned from">5495</link>
			<link type="Cloners" description="cloned to">1750</link>
		</links>
	</bug>
	<bug id="1579" opendate="2016-06-07 13:31:53" fixdate="2016-08-24 21:50:36" resolution="Done">
		<buginformation>
			<summary>Perform check when changing &amp;apos;path&amp;apos; attribute of &amp;apos;deployment-scanner&amp;apos; instance</summary>
			<description>When creating my own deployment-scanner, I have to provide path attribute where given value is checked whether it is a real directory on current filesystem. Although when I change value of this attribute in existing deployment-scanner instance, such check is not performed and I can provide non-existent directory. This leads to server crash after calling reload operation:

start EAP7 server and connect to CLI
create your own deployment-scanner instance pointing to existing directory






[standalone@localhost:9990 /] /subsystem=deployment-scanner/scanner=mysc:add(path=/home/jstourac/Downloads/jboss-eap-7.0/standalone/deployments)




{"outcome" =&amp;gt; "success"}






change path of deployment-scanner to some nonexisting directory






[standalone@localhost:9990 /] /subsystem=deployment-scanner/scanner=mysc:write-attribute(name=path,value=/nonexistent)




{




    "outcome" =&amp;gt; "success",




    "response-headers" =&amp;gt; {




        "operation-requires-reload" =&amp;gt; true,




        "process-state" =&amp;gt; "reload-required"




    }




}






perform reload operation
server fails with following output in console.log






15:29:08,039 INFO  [org.jboss.as.server.deployment.scanner] (MSC service thread 1-5) WFLYDS0013: Started FileSystemDeploymentService for directory /home/jstourac/Downloads/jboss-eap-7.0/standalone/deployments




15:29:29,068 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-3) WFLYJCA0010: Unbound data source [java:jboss/datasources/ExampleDS]




15:29:29,070 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-8) WFLYUT0019: Host default-host stopping




15:29:29,071 INFO  [org.jboss.as.connector.deployers.jdbc] (MSC service thread 1-5) WFLYJCA0019: Stopped Driver service with driver-name = h2




15:29:29,073 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-4) WFLYUT0008: Undertow HTTP listener default suspending




15:29:29,075 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-4) WFLYUT0007: Undertow HTTP listener default stopped, was bound to 127.0.0.1:8080




15:29:29,076 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-2) WFLYUT0004: Undertow 1.3.21.Final-redhat-1 stopping




15:29:29,081 INFO  [org.jboss.as.mail.extension] (MSC service thread 1-2) WFLYMAIL0002: Unbound mail session [java:jboss/mail/Default]




15:29:29,082 INFO  [org.jboss.as] (MSC service thread 1-8) WFLYSRV0050: JBoss EAP 7.0.0.GA (WildFly Core 2.1.2.Final-redhat-1) stopped in 16ms




15:29:29,083 INFO  [org.jboss.as] (MSC service thread 1-8) WFLYSRV0049: JBoss EAP 7.0.0.GA (WildFly Core 2.1.2.Final-redhat-1) starting




15:29:29,135 ERROR [org.jboss.as.controller.management-operation] (ServerService Thread Pool -- 13) WFLYCTL0013: Operation ("add") failed - address: ([




    ("subsystem" =&amp;gt; "deployment-scanner"),




    ("scanner" =&amp;gt; "mysc")




]): java.lang.IllegalArgumentException: WFLYDS0023: /nonexistent does not exist




	at org.jboss.as.server.deployment.scanner.FileSystemDeploymentService.&amp;lt;init&amp;gt;(FileSystemDeploymentService.java:273)




	at org.jboss.as.server.deployment.scanner.DeploymentScannerAdd.execute(DeploymentScannerAdd.java:124)




	at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:890)




	at org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:659)




	at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:370)




	at org.jboss.as.controller.ParallelBootOperationStepHandler$ParallelBootTask.run(ParallelBootOperationStepHandler.java:359)




	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)




	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)




	at java.lang.Thread.run(Thread.java:745)




	at org.jboss.threads.JBossThread.run(JBossThread.java:320)









15:29:29,139 ERROR [org.jboss.as.controller.management-operation] (Controller Boot Thread) "WFLYCTL0193: Failed executing subsystem deployment-scanner boot operations"




15:29:29,140 ERROR [org.jboss.as.controller.management-operation] (Controller Boot Thread) WFLYCTL0013: Operation ("parallel-subsystem-boot") failed - address: ([]) - failure description: "\"WFLYCTL0193: Failed executing subsystem deployment-scanner boot operations\""




15:29:29,141 FATAL [org.jboss.as.server] (Controller Boot Thread) WFLYSRV0056: Server boot has failed in an unrecoverable manner; exiting. See previous messages for details.




15:29:29,144 INFO  [org.jboss.as.server] (Thread-2) WFLYSRV0220: Server shutdown has been requested.




15:29:29,159 INFO  [org.jboss.as] (MSC service thread 1-8) WFLYSRV0050: JBoss EAP 7.0.0.GA (WildFly Core 2.1.2.Final-redhat-1) stopped in 4ms






one has to manually modify EAP_HOME/standalone/configuration/standalone.xml removing problematic deployment-scanner part to be able to start server again

It would be great if there is same check to path atribute performed when changing it in existing instance of deployment-scanner as what is performed during the adding a new instance of deployment-scanner.</description>
			<version>3.0.0.Alpha1</version>
			<fixedVersion>3.0.0.Alpha6</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.server.deployment.scanner.WritePathAttributeHandler.java</file>
			<file type="M">org.jboss.as.server.deployment.scanner.FileSystemDeploymentService.java</file>
			<file type="M">org.wildfly.core.test.standalone.mgmt.api.DeploymentScannerTestCase.java</file>
			<file type="M">org.jboss.as.server.deployment.scanner.FileSystemDeploymentServiceUnitTestCase.java</file>
			<file type="M">org.jboss.as.server.deployment.scanner.logging.DeploymentScannerLogger.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">4874</link>
			<link type="Related" description="is related to">1333</link>
			<link type="Related" description="is related to">6785</link>
		</links>
	</bug>
	<bug id="1718" opendate="2016-08-16 09:49:11" fixdate="2016-08-31 21:54:29" resolution="Done">
		<buginformation>
			<summary>Handlers within Audit Logger are not removed properly when Audit Logger is removed</summary>
			<description>If Audit Logger is removed, destination handlers (i.e. its child nodes) are not removed properly. They are not present in the config file. They seem to be not removed "internally" though. This leads to a couple of issues:
1. It is not possible to remove referenced File/Syslog handlers. If user tries to remove them the NullPointerException is given as a result. Try following commands:
/core-service=management/access=audit/file-handler=file:remove()
/core-service=management/access=audit/syslog-handler=my-syslog-handler:remove()
Their output is:






{




    "outcome" =&amp;gt; "failed",




    "failure-description" =&amp;gt; "WFLYCTL0158: Operation handler failed: java.lang.NullPointerException",




    "rolled-back" =&amp;gt; true




}






2. AuditLog continues to send auditable events to previously referenced File/Syslog handlers.

Create auditable event (e.g. /subsystem=logging/logger=com.arjuna:write-attribute(name=level,value=DEBUG))
See log in the file (WILDFLY_HOME/standalone/data/audit-log.log)
See log in the syslog (/var/log/messages)

</description>
			<version>3.0.0.Alpha5</version>
			<fixedVersion>3.0.0.Alpha6</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.domain.management.audit.AccessAuditResourceDefinition.java</file>
			<file type="M">org.jboss.as.domain.management.audit.AuditLogLoggerResourceDefinition.java</file>
			<file type="M">org.jboss.as.domain.management.audit.AuditLogHandlerReferenceResourceDefinition.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">5643</link>
		</links>
	</bug>
	<bug id="1715" opendate="2016-08-15 19:04:54" fixdate="2016-08-31 21:55:37" resolution="Done">
		<buginformation>
			<summary>HostProcessReloadHandler does not reset the HostRunningModeControl&amp;apos;s restartMode</summary>
			<description>The ReloadContext created by HostProcessReloadHandler sets the HostRunningModeControl&amp;amp;apos;s restartMode but then it never gets restored to the default value. The doReload() method of the ReloadContext should restore it. This ensures the ServerInventoryService.stop() only uses the value set by HostProcessReloadHandler once, for that one reload.
A concern here is that ServerInventoryService only goes into its "shutdownServers" logic if the restartMode == RestartMode.SERVERS. Which, due to this bug, it will be following any HC reload. But if we restore the default value of restartMode, that is null, and null != RestartMode.SERVERS. So the ""shutdownServers" logic will no longer kick in. But should it? Should the default value of restartMode be "null"? Or should it be RestartMode.SERVERS? If we change the default from null, then the behavior when no reload has happened will change.
Basically we need to decide whether the "shutdownServers" logic should happen by default.</description>
			<version>2.2.0.Final</version>
			<fixedVersion>3.0.0.Alpha6</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.host.controller.operations.StartServersHandler.java</file>
		</fixedFiles>
	</bug>
	<bug id="1743" opendate="2016-08-27 14:23:59" fixdate="2016-08-31 21:57:56" resolution="Done">
		<buginformation>
			<summary>Unable to force CLI to execute a low level command</summary>
			<description>I cannot get this operation to execute, even if I set validate-operation-requests to false in jboss-cli.xml:






[standalone@embedded /] /subsystem=datasources/bogus=*:read-resource-description




Failed to get the list of the operation properties: "WFLYCTL0030: No resource definition is registered for address [




    ("subsystem" =&amp;gt; "datasources"),




    ("bogus" =&amp;gt; "*")




]"






It is important that the CLI allows users to send whatever low level ops they wish to the server if they turn off verification. The server validates requests itself, and in some cases can be coded to be lenient about things (e.g. to let previous &amp;amp;apos;wrong&amp;amp;apos; things work.) We don&amp;amp;apos;t want the CLI to get in the way of that by doing client side validation that cannot be turned off.
Problem seems to be this in the Util class:






    public static ModelNode toOperationRequest(CommandContext ctx,




            ParsedCommandLine parsedLine, Attachments attachments)




            throws CommandFormatException {




        return toOperationRequest(ctx, parsedLine, attachments, true);




    }






That &amp;amp;apos;true&amp;amp;apos; param results in the CLI trying to do a background read-operation-description and failing the op if unsuccessful.</description>
			<version>3.0.0.Alpha5</version>
			<fixedVersion>3.0.0.Alpha6</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.cli.Util.java</file>
		</fixedFiles>
	</bug>
	<bug id="1642" opendate="2016-07-08 15:12:56" fixdate="2016-09-01 01:03:34" resolution="Done">
		<buginformation>
			<summary>Fix domain mode for configuration changes</summary>
			<description>The configuration changes feature is broken in domain mode: the propagation to managed servers / slaves HC doesn&amp;amp;apos;t work properly.  Once set it will fail on restarting the DC. So we need a clean refactoring of the feature to have a usable domain mode.</description>
			<version>3.0.0.Alpha3</version>
			<fixedVersion>3.0.0.Alpha6</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.domain.management.ConfigurationChangeResourceDefinition.java</file>
			<file type="M">org.jboss.as.domain.management.logging.DomainManagementLogger.java</file>
			<file type="M">org.jboss.as.domain.management.CoreManagementResourceDefinition.java</file>
			<file type="M">org.jboss.as.host.controller.ManagedServerOperationsFactory.java</file>
			<file type="M">org.jboss.as.domain.controller.operations.coordination.ServerOperationResolver.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned to">7150</link>
			<link type="Dependency" description="blocks">616</link>
			<link type="Sequence" description="is followed up by">1922</link>
		</links>
	</bug>
	<bug id="1708" opendate="2016-08-11 09:17:09" fixdate="2016-09-01 12:09:32" resolution="Done">
		<buginformation>
			<summary>ReconnectSyslogServerTestCase from wf-core fails intermittently</summary>
			<description>Description of problem:
ReconnectSyslogServerTestCase from wf-core fails intermittently.
How reproducible:
2%
Actual results:
Stacktrace:






java.lang.AssertionError: No message was logged into the TCP syslog after second syslog server restart




	at org.junit.Assert.fail(Assert.java:88)




	at org.junit.Assert.assertTrue(Assert.java:41)




	at org.junit.Assert.assertNotNull(Assert.java:712)




	at org.jboss.as.test.manualmode.logging.ReconnectSyslogServerTestCase.testReconnectSyslogServer(ReconnectSyslogServerTestCase.java:118)






Standard Output:






10:59:13,639 INFO  [org.wildfly.core.testrunner.Server] (main) Starting container with: /qa/tools/opt/x86_64/jdk1.8.0_91/jre/bin/java -D[Standalone] -javaagent:/mnt/hudson_workspace/workspace/eap-7x-as-testsuite-test-core/0728bde1/eap-local-maven-repository/org/jboss/byteman/byteman/3.0.3/byteman-3.0.3.jar=port:9091,boot:/mnt/hudson_workspace/workspace/eap-7x-as-testsuite-test-core/0728bde1/eap-local-maven-repository/org/jboss/byteman/byteman/3.0.3/byteman-3.0.3.jar,sys:/mnt/hudson_workspace/workspace/eap-7x-as-testsuite-test-core/0728bde1/testsuite/shared/target/wildfly-core-testsuite-shared-3.0.0.Alpha4-redhat-1.jar -Dorg.jboss.byteman.transform.all -Dorg.jboss.byteman.verbose=true -Dmaven.repo.local=/mnt/hudson_workspace/workspace/eap-7x-as-testsuite-test-core/0728bde1/eap-local-maven-repository -Xmx512m -XX:MaxMetaspaceSize=256m -Djboss.dist=/mnt/hudson_workspace/workspace/eap-7x-as-testsuite-test-core/0728bde1/testsuite/manualmode/target/wildfly-core -Djava.net.preferIPv4Stack=true -Djava.net.preferIPv6Addresses=false -server -Dts.timeout.factor=100 -Djbossas.ts.dir=/mnt/hudson_workspace/workspace/eap-7x-as-testsuite-test-core/0728bde1/testsuite/manualmode -ea -Dorg.jboss.boot.log.file=/mnt/hudson_workspace/workspace/eap-7x-as-testsuite-test-core/0728bde1/testsuite/manualmode/target/wildfly-core/standalone/log/server.log -Dlogging.configuration=file:/mnt/hudson_workspace/workspace/eap-7x-as-testsuite-test-core/0728bde1/testsuite/manualmode/target/wildfly-core/standalone/configuration/logging.properties -jar /mnt/hudson_workspace/workspace/eap-7x-as-testsuite-test-core/0728bde1/testsuite/manualmode/target/wildfly-core/jboss-modules.jar -mp /mnt/hudson_workspace/workspace/eap-7x-as-testsuite-test-core/0728bde1/testsuite/manualmode/target/wildfly-core/modules org.jboss.as.standalone -Djboss.home.dir=/mnt/hudson_workspace/workspace/eap-7x-as-testsuite-test-core/0728bde1/testsuite/manualmode/target/wildfly-core -Djboss.server.base.dir=/mnt/hudson_workspace/workspace/eap-7x-as-testsuite-test-core/0728bde1/testsuite/manualmode/target/wildfly-core/standalone -Djboss.server.log.dir=/mnt/hudson_workspace/workspace/eap-7x-as-testsuite-test-core/0728bde1/testsuite/manualmode/target/wildfly-core/standalone/log -Djboss.server.config.dir=/mnt/hudson_workspace/workspace/eap-7x-as-testsuite-test-core/0728bde1/testsuite/manualmode/target/wildfly-core/standalone/configuration -c=standalone.xml -bmanagement=10.16.180.146 -Djboss.http.port=8080 -Djboss.bind.address=10.16.180.146 




10:59:13,849 INFO  [org.xnio] (main) XNIO version 3.4.0.Beta2




10:59:13,950 INFO  [org.xnio.nio] (main) XNIO NIO Implementation Version 3.4.0.Beta2




TransformListener() : accepting requests on localhost:9091




10:59:14,238 INFO  [org.jboss.remoting] (main) JBoss Remoting version 4.0.21.Final-redhat-1




&amp;amp;amp#27;[0m10:59:15,448 INFO  [org.jboss.modules] (main) JBoss Modules version 1.5.2.Final-redhat-1




&amp;amp;amp#27;[0m&amp;amp;amp#27;[0m10:59:16,071 INFO  [org.jboss.msc] (main) JBoss MSC version 1.2.6.Final-redhat-1




&amp;amp;amp#27;[0m&amp;amp;amp#27;[0m10:59:16,385 INFO  [org.jboss.as] (MSC service thread 1-2) WFLYSRV0049: WildFly Core 3.0.0.Alpha4-redhat-1 "Kenny" starting




&amp;amp;amp#27;[0m&amp;amp;amp#27;[0m10:59:17,878 INFO  [org.jboss.as.server] (Controller Boot Thread) WFLYSRV0039: Creating http management service using socket-binding (management-http)




&amp;amp;amp#27;[0m&amp;amp;amp#27;[0m10:59:17,983 INFO  [org.xnio] (MSC service thread 1-2) XNIO version 3.4.0.Beta2




&amp;amp;amp#27;[0m&amp;amp;amp#27;[0m10:59:18,004 INFO  [org.xnio.nio] (MSC service thread 1-2) XNIO NIO Implementation Version 3.4.0.Beta2




&amp;amp;amp#27;[0m&amp;amp;amp#27;[0m10:59:18,144 INFO  [org.jboss.as.patching] (MSC service thread 1-1) WFLYPAT0050: WildFly cumulative patch ID is: base, one-off patches include: none




&amp;amp;amp#27;[0m&amp;amp;amp#27;[0m10:59:18,180 INFO  [org.jboss.remoting] (MSC service thread 1-2) JBoss Remoting version 4.0.21.Final-redhat-1




&amp;amp;amp#27;[0m&amp;amp;amp#27;[33m10:59:18,208 WARN  [org.jboss.as.domain.management.security] (MSC service thread 1-1) WFLYDM0111: Keystore /mnt/hudson_workspace/workspace/eap-7x-as-testsuite-test-core/0728bde1/testsuite/manualmode/target/wildfly-core/standalone/configuration/application.keystore not found, it will be auto generated on first use with a self signed certificate for host localhost




&amp;amp;amp#27;[0m&amp;amp;amp#27;[33m10:59:18,352 WARN  [org.jboss.as.domain.http.api.undertow] (MSC service thread 1-1) WFLYDMHTTP0003: Unable to load console module for slot main, disabling console




&amp;amp;amp#27;[0m&amp;amp;amp#27;[0m10:59:18,924 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0060: Http management interface listening on http://10.16.180.146:9990/management




&amp;amp;amp#27;[0m&amp;amp;amp#27;[0m10:59:18,925 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0051: Admin console listening on http://10.16.180.146:9990




&amp;amp;amp#27;[0m&amp;amp;amp#27;[0m10:59:18,925 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0025: WildFly Core 3.0.0.Alpha4-redhat-1 "Kenny" started in 4551ms - Started 59 of 62 services (20 services are lazy, passive or on-demand)




&amp;amp;amp#27;[0m&amp;amp;amp#27;[0m10:59:19,841 INFO  [org.jboss.as.repository] (management-handler-thread - 2) WFLYDR0001: Content added at location /mnt/hudson_workspace/workspace/eap-7x-as-testsuite-test-core/0728bde1/testsuite/manualmode/target/wildfly-core/standalone/data/content/b6/795345f1851ba393f4f56dcd0e08328efcc090/content




&amp;amp;amp#27;[0m&amp;amp;amp#27;[0m10:59:19,880 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-1) WFLYSRV0027: Starting deployment of "logging-test.jar" (runtime-name: "logging-test.jar")




&amp;amp;amp#27;[0m&amp;amp;amp#27;[0m10:59:20,076 INFO  [org.wildfly.test.undertow.UndertowService] (MSC service thread 1-2) Started Undertow on 10.16.180.146:8080




&amp;amp;amp#27;[0m&amp;amp;amp#27;[0m10:59:20,131 INFO  [org.jboss.as.server] (management-handler-thread - 2) WFLYSRV0010: Deployed "logging-test.jar" (runtime-name : "logging-test.jar")




&amp;amp;amp#27;[0m&amp;amp;amp#27;[0m10:59:27,185 INFO  [org.jboss.as.test.manualmode.logging.LoggingServiceActivator] (XNIO-1 I/O-1) someLogMessage




&amp;amp;amp#27;[0m10:59:27,739 WARN  [org.jboss.as.test.syslogserver.UDPSyslogServer] (SyslogServer: udp) SocketException occurred: java.net.SocketException: Socket closed




	at java.net.PlainDatagramSocketImpl.receive0(Native Method)




	at java.net.AbstractPlainDatagramSocketImpl.receive(AbstractPlainDatagramSocketImpl.java:143)




	at java.net.DatagramSocket.receive(DatagramSocket.java:812)




	at org.jboss.as.test.syslogserver.UDPSyslogServer.run(UDPSyslogServer.java:62)




	at java.lang.Thread.run(Thread.java:745)









10:59:28,239 ERROR [org.jboss.as.test.syslogserver.TCPSyslogServer] (SyslogServer: tcp) IOException occurred.: java.net.SocketException: Socket closed




	at java.net.PlainSocketImpl.socketAccept(Native Method)




	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)




	at java.net.ServerSocket.implAccept(ServerSocket.java:545)




	at java.net.ServerSocket.accept(ServerSocket.java:513)




	at org.jboss.as.test.syslogserver.TCPSyslogServer.run(TCPSyslogServer.java:55)




	at java.lang.Thread.run(Thread.java:745)









10:59:28,241 WARN  [org.jboss.as.test.syslogserver.TCPSyslogSocketHandler] (Thread-6) IOException occurred: java.net.SocketException: Socket closed




	at java.net.SocketInputStream.socketRead0(Native Method)




	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)




	at java.net.SocketInputStream.read(SocketInputStream.java:170)




	at java.net.SocketInputStream.read(SocketInputStream.java:141)




	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)




	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)




	at org.jboss.as.test.syslogserver.TCPSyslogSocketHandler.run(TCPSyslogSocketHandler.java:73)




	at java.lang.Thread.run(Thread.java:745)









&amp;amp;amp#27;[0m10:59:28,255 INFO  [org.jboss.as.test.manualmode.logging.LoggingServiceActivator] (XNIO-1 I/O-1) someLogMessage




&amp;amp;amp#27;[0mLogManager error of type WRITE_FAILURE: Error writing to TCP stream




java.net.SocketException: Broken pipe




	at java.net.SocketOutputStream.socketWrite0(Native Method)




	at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:109)




	at java.net.SocketOutputStream.write(SocketOutputStream.java:153)




	at org.jboss.logmanager.handlers.TcpOutputStream.write(TcpOutputStream.java:182)




	at org.jboss.logmanager.handlers.TcpOutputStream.write(TcpOutputStream.java:173)




	at org.jboss.logmanager.handlers.SyslogHandler.sendMessage(SyslogHandler.java:579)




	at org.jboss.logmanager.handlers.SyslogHandler.doPublish(SyslogHandler.java:540)




	at org.jboss.logmanager.ExtHandler.publish(ExtHandler.java:76)




	at org.jboss.logmanager.LoggerNode.publish(LoggerNode.java:314)




	at org.jboss.logmanager.LoggerNode.publish(LoggerNode.java:322)




	at org.jboss.logmanager.Logger.logRaw(Logger.java:850)




	at org.jboss.logmanager.Logger.log(Logger.java:802)




	at org.jboss.logmanager.Logger.log(Logger.java:814)




	at org.jboss.logging.JBossLogManagerLogger.doLog(JBossLogManagerLogger.java:42)




	at org.jboss.logging.Logger.info(Logger.java:955)




	at org.jboss.as.test.manualmode.logging.LoggingServiceActivator$1.handleRequest(LoggingServiceActivator.java:50)




	at io.undertow.server.Connectors.executeRootHandler(Connectors.java:202)




	at io.undertow.server.protocol.http.HttpReadListener.handleEventWithNoRunningRequest(HttpReadListener.java:233)




	at io.undertow.server.protocol.http.HttpReadListener.handleEvent(HttpReadListener.java:131)




	at io.undertow.server.protocol.http.HttpReadListener.handleEvent(HttpReadListener.java:57)




	at org.xnio.ChannelListeners.invokeChannelListener(ChannelListeners.java:92)




	at org.xnio.conduits.ReadReadyHandler$ChannelListenerHandler.readReady(ReadReadyHandler.java:66)




	at org.xnio.nio.NioSocketConduit.handleReady(NioSocketConduit.java:89)




	at org.xnio.nio.WorkerThread.run(WorkerThread.java:565)




&amp;amp;amp#27;[0m10:59:28,263 INFO  [org.jboss.as.test.manualmode.logging.LoggingServiceActivator] (XNIO-1 I/O-2) someLogMessage




&amp;amp;amp#27;[0m&amp;amp;amp#27;[0m10:59:36,291 INFO  [org.jboss.as.test.manualmode.logging.LoggingServiceActivator] (XNIO-1 I/O-1) someLogMessage




&amp;amp;amp#27;[0m10:59:36,794 WARN  [org.jboss.as.test.syslogserver.UDPSyslogServer] (SyslogServer: udp) SocketException occurred: java.net.SocketException: Socket closed




	at java.net.PlainDatagramSocketImpl.receive0(Native Method)




	at java.net.AbstractPlainDatagramSocketImpl.receive(AbstractPlainDatagramSocketImpl.java:143)




	at java.net.DatagramSocket.receive(DatagramSocket.java:812)




	at org.jboss.as.test.syslogserver.UDPSyslogServer.run(UDPSyslogServer.java:62)




	at java.lang.Thread.run(Thread.java:745)









10:59:37,295 ERROR [org.jboss.as.test.syslogserver.TCPSyslogServer] (SyslogServer: tcp) IOException occurred.: java.net.SocketException: Socket closed




	at java.net.PlainSocketImpl.socketAccept(Native Method)




	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)




	at java.net.ServerSocket.implAccept(ServerSocket.java:545)




	at java.net.ServerSocket.accept(ServerSocket.java:513)




	at org.jboss.as.test.syslogserver.TCPSyslogServer.run(TCPSyslogServer.java:55)




	at java.lang.Thread.run(Thread.java:745)









&amp;amp;amp#27;[0m10:59:37,298 INFO  [org.jboss.as.test.manualmode.logging.LoggingServiceActivator] (XNIO-1 I/O-2) someLogMessage




&amp;amp;amp#27;[0m&amp;amp;amp#27;[0m10:59:37,310 INFO  [org.jboss.as.test.manualmode.logging.LoggingServiceActivator] (XNIO-1 I/O-1) someLogMessage




&amp;amp;amp#27;[0m10:59:37,313 ERROR [org.jboss.as.test.syslogserver.Rfc5424SyslogEvent] (Thread-9) Can&amp;amp;apos;t parse priority




10:59:37,313 WARN  [org.jboss.as.test.syslogserver.TCPSyslogSocketHandler] (Thread-9) IOException occurred: java.net.SocketException: Socket closed




	at java.net.SocketInputStream.socketRead0(Native Method)




	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)




	at java.net.SocketInputStream.read(SocketInputStream.java:170)




	at java.net.SocketInputStream.read(SocketInputStream.java:141)




	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)




	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)




	at org.jboss.as.test.syslogserver.TCPSyslogSocketHandler.run(TCPSyslogSocketHandler.java:73)




	at java.lang.Thread.run(Thread.java:745)









&amp;amp;amp#27;[0m10:59:45,316 INFO  [org.jboss.as.test.manualmode.logging.LoggingServiceActivator] (XNIO-1 I/O-2) someLogMessage




&amp;amp;amp#27;[0m10:59:50,955 WARN  [org.jboss.as.test.syslogserver.UDPSyslogServer] (SyslogServer: udp) SocketException occurred: java.net.SocketException: Socket closed




	at java.net.PlainDatagramSocketImpl.receive0(Native Method)




	at java.net.AbstractPlainDatagramSocketImpl.receive(AbstractPlainDatagramSocketImpl.java:143)




	at java.net.DatagramSocket.receive(DatagramSocket.java:812)




	at org.jboss.as.test.syslogserver.UDPSyslogServer.run(UDPSyslogServer.java:62)




	at java.lang.Thread.run(Thread.java:745)









10:59:51,456 ERROR [org.jboss.as.test.syslogserver.TCPSyslogServer] (SyslogServer: tcp) IOException occurred.: java.net.SocketException: Socket closed




	at java.net.PlainSocketImpl.socketAccept(Native Method)




	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)




	at java.net.ServerSocket.implAccept(ServerSocket.java:545)




	at java.net.ServerSocket.accept(ServerSocket.java:513)




	at org.jboss.as.test.syslogserver.TCPSyslogServer.run(TCPSyslogServer.java:55)




	at java.lang.Thread.run(Thread.java:745)









&amp;amp;amp#27;[0m10:59:51,517 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-2) WFLYSRV0028: Stopped deployment logging-test.jar (runtime-name: logging-test.jar) in 17ms




&amp;amp;amp#27;[0m&amp;amp;amp#27;[33m10:59:51,525 WARN  [org.jboss.as.controller] (management-handler-thread - 1) WFLYCTL0357: Notification of type deployment-undeployed is not described for the resource at the address []




&amp;amp;amp#27;[0m&amp;amp;amp#27;[0m10:59:51,527 INFO  [org.jboss.as.repository] (management-handler-thread - 1) WFLYDR0002: Content removed from location /mnt/hudson_workspace/workspace/eap-7x-as-testsuite-test-core/0728bde1/testsuite/manualmode/target/wildfly-core/standalone/data/content/b6/795345f1851ba393f4f56dcd0e08328efcc090/content




&amp;amp;amp#27;[0m&amp;amp;amp#27;[0m10:59:51,528 INFO  [org.jboss.as.server] (management-handler-thread - 1) WFLYSRV0009: Undeployed "logging-test.jar" (runtime-name: "logging-test.jar")




&amp;amp;amp#27;[0m&amp;amp;amp#27;[0m10:59:51,549 INFO  [org.jboss.as.server] (management-handler-thread - 2) WFLYSRV0236: Suspending server with no timeout.




&amp;amp;amp#27;[0m&amp;amp;amp#27;[0m10:59:51,552 INFO  [org.jboss.as.server] (Management Triggered Shutdown) WFLYSRV0241: Shutting down in response to management operation &amp;amp;apos;shutdown&amp;amp;apos;




&amp;amp;amp#27;[0m&amp;amp;amp#27;[0m10:59:51,704 INFO  [org.jboss.as] (MSC service thread 1-2) WFLYSRV0050: WildFly Core 3.0.0.Alpha4-redhat-1 "Kenny" stopped in 97ms




&amp;amp;amp#27;[0m






Standard Error Output:






Exception in thread "Thread-13" java.lang.NullPointerException




	at org.wildfly.core.testrunner.Server.lambda$stop$0(Server.java:184)




	at java.lang.Thread.run(Thread.java:745)






Expected results:
No errors
Additional info:
Links to jenkins reports:

https://jenkins.mw.lab.eng.bos.redhat.com/hudson/view/EAP7/view/EAP7-AS-Testsuite/view/EAP7-AS-Testsuite-Jobs/job/eap-7x-as-testsuite-test-core/40/testReport/
https://jenkins.mw.lab.eng.bos.redhat.com/hudson/job/eap-7x-as-testsuite-test-core-solaris/jdk=java18_default,label_exp=dev139-01-solaris10-sparc&amp;amp;&amp;amp;eap-sustaining&amp;amp;&amp;amp;solaris10&amp;amp;&amp;amp;sparc/41/testReport/

</description>
			<version>3.0.0.Alpha4</version>
			<fixedVersion>3.0.0.Alpha7</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.test.manualmode.logging.AbstractSyslogReconnectionTestCase.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">5564</link>
		</links>
	</bug>
	<bug id="1756" opendate="2016-08-31 14:23:41" fixdate="2016-09-01 12:11:24" resolution="Done">
		<buginformation>
			<summary>Adding content to an exploded deployment with overwrite to false should fail if file already exists</summary>
			<description>If overwrite is set to false then adding the file should fail.</description>
			<version>3.0.0.Alpha5</version>
			<fixedVersion>3.0.0.Alpha7</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.repository.ContentRepositoryTest.java</file>
			<file type="M">org.jboss.as.repository.ContentRepositoryImpl.java</file>
		</fixedFiles>
	</bug>
	<bug id="1714" opendate="2016-08-15 08:26:57" fixdate="2016-09-06 22:14:31" resolution="Done">
		<buginformation>
			<summary>Tab completion doesn&amp;apos;t offer more options once prefix match some value</summary>
			<description>Tab completion for CLI variables doesn&amp;amp;apos;t offer more values once the variable to be completed match some value.
reproduce






set foo=/subsystem=logging




set foobar=/subsystem=logging/console-handler=CONSOLE






actual






$foo&amp;lt;TAB&amp;gt;




/  :






expected






$foo&amp;lt;TAB&amp;gt;




/  :  foo  foobar





</description>
			<version>3.0.0.Alpha5</version>
			<fixedVersion>3.0.0.Alpha8</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.cli.CommandCompleter.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">5624</link>
		</links>
	</bug>
	<bug id="1765" opendate="2016-09-05 16:22:02" fixdate="2016-09-06 22:20:53" resolution="Done">
		<buginformation>
			<summary>unclear NullPointerException if the deployment-scanner element is removed from the configuration</summary>
			<description>If the deployment scanner element is removed from the configuration of the standalone server a NullPointerException is logged which is unclear and difficult to find as the stack does not show any hint.
Config:
{xml}
        &amp;lt;subsystem xmlns="urn:jboss:domain:deployment-scanner:2.0"&amp;gt;
            &amp;lt;!-- deployment-scanner path="deployments" relative-to="jboss.server.base.dir" scan-interval="5000" runtime-failure-causes-rollback="${jboss.deployment.scanner.rollback.on.failure:false}"/ --&amp;gt;
        &amp;lt;/subsystem&amp;gt;{xml}

Log message:
ERROR [org.jboss.as.controller.management-operation] (ServerService Thread Pool  34) WFLYCTL0403: Unexpected failure during execution of the following operation(s): []: java.lang.NullPointerException
	at org.jboss.as.controller.AbstractOperationContext$Step.access$300(AbstractOperationContext.java:1185)
	at org.jboss.as.controller.AbstractOperationContext.executeResultHandlerPhase(AbstractOperationContext.java:767)
	at org.jboss.as.controller.AbstractOperationContext.executeDoneStage(AbstractOperationContext.java:753)
	at org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:680)
	at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:370)
	at org.jboss.as.controller.ParallelBootOperationStepHandler$ParallelBootTask.run(ParallelBootOperationStepHandler.java:359)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
	at org.jboss.threads.JBossThread.run(JBossThread.java:320)</description>
			<version>2.0.10.Final</version>
			<fixedVersion>3.0.0.Alpha8</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.ParallelBootOperationStepHandler.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned to">5868</link>
		</links>
	</bug>
	<bug id="1771" opendate="2016-09-08 12:44:34" fixdate="2016-09-09 13:49:37" resolution="Done">
		<buginformation>
			<summary>CLI - Tab completion in composite operation throws IAE</summary>
			<description>Getting an exception when trying to make a composite operation






[standalone@localhost:9990 /] :composite(steps=[{aException in thread "Aesh Process Loop 1409160703" java.lang.IllegalArgumentException




	at org.jboss.dmr.ModelValue.getKeys(ModelValue.java:139)




	at org.jboss.dmr.ModelNode.keys(ModelNode.java:1378)




	at org.jboss.as.cli.impl.ValueTypeCompleter$ValueTypeCallbackHandler.getCandidates(ValueTypeCompleter.java:502)




	at org.jboss.as.cli.impl.ValueTypeCompleter.complete(ValueTypeCompleter.java:332)




	at org.jboss.as.cli.operation.OperationRequestCompleter.complete(OperationRequestCompleter.java:254)




	at org.jboss.as.cli.operation.OperationRequestCompleter.complete(OperationRequestCompleter.java:74)




	at org.jboss.as.cli.CommandCompleter.doComplete(CommandCompleter.java:134)




	at org.jboss.as.cli.CommandCompleter.complete(CommandCompleter.java:63)




	at org.jboss.as.cli.impl.Console$Factory$1$1.complete(Console.java:143)




	at org.jboss.aesh.console.AeshCompletionHandler.complete(AeshCompletionHandler.java:155)




	at org.jboss.aesh.console.AeshInputProcessor.complete(AeshInputProcessor.java:423)




	at org.jboss.aesh.console.AeshInputProcessor.parseOperation(AeshInputProcessor.java:165)




	at org.jboss.aesh.console.Console.processInternalOperation(Console.java:773)




	at org.jboss.aesh.console.Console.execute(Console.java:733)




	at org.jboss.aesh.console.Console.access$900(Console.java:73)




	at org.jboss.aesh.console.Console$6.run(Console.java:642)




	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)




	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)




	at java.lang.Thread.run(Thread.java:745)






Happens only for certain strings, e.g.

:composite(steps=[{a&amp;lt;TAB&amp;gt; fails
:composite(steps=[a&amp;lt;TAB&amp;gt; doesn&amp;amp;apos;t fail (suggests "," or "]")
:composite(steps=[a=&amp;lt;TAB&amp;gt; fails

</description>
			<version>3.0.0.Alpha7</version>
			<fixedVersion>3.0.0.Alpha8</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.cli.parsing.test.ValueTypeCompletionTestCase.java</file>
			<file type="M">org.jboss.as.cli.impl.ValueTypeCompleter.java</file>
		</fixedFiles>
		<links>
			<link type="Related" description="is related to">6043</link>
		</links>
	</bug>
	<bug id="1785" opendate="2016-09-12 12:57:32" fixdate="2016-09-16 01:48:54" resolution="Done">
		<buginformation>
			<summary>Extension remove is not cleaning out provided capabilities</summary>
			<description>It is not possible to add Elytron extension that was previously removed. Everything works fine if the server is reloaded between steps 5 and 6, hence I assume that there is either &amp;amp;apos;reload required&amp;amp;apos; state missing or Elytron extension is not removed properly.
Actual result:






{




    "outcome" =&amp;gt; "failed",




    "failure-description" =&amp;gt; "WFLYCTL0158: Operation handler failed: java.lang.IllegalStateException: WFLYCTL0363: Capability &amp;amp;apos;org.wildfly.security.providers&amp;amp;apos; is already registered in context &amp;amp;apos;global&amp;amp;apos;.",




    "rolled-back" =&amp;gt; true




}

















ERROR [org.jboss.as.controller.management-operation] (management-handler-thread - 2) WFLYCTL0013: Operation ("add") failed - address: ([("extension" =&amp;gt; "org.wildfly.extension.elytron")]): java.lang.IllegalStateException: WFLYCTL0363: Capability &amp;amp;apos;org.wildfly.security.providers&amp;amp;apos; is already registered in context &amp;amp;apos;global&amp;amp;apos;.




	at org.jboss.as.controller.CapabilityRegistry.lambda$registerPossibleCapability$0(CapabilityRegistry.java:518)




	at java.util.concurrent.ConcurrentHashMap.computeIfPresent(ConcurrentHashMap.java:1769)




	at org.jboss.as.controller.CapabilityRegistry.registerPossibleCapability(CapabilityRegistry.java:512)




	at org.jboss.as.controller.registry.ConcreteResourceRegistration.registerCapability(ConcreteResourceRegistration.java:669)




	at org.jboss.as.controller.SimpleResourceDefinition.registerCapabilities(SimpleResourceDefinition.java:368)




	at org.jboss.as.controller.registry.NodeSubregistry.registerChild(NodeSubregistry.java:108)




	at org.jboss.as.controller.registry.ConcreteResourceRegistration.registerSubModel(ConcreteResourceRegistration.java:226)




	at org.wildfly.extension.elytron.ElytronDefinition.registerChildren(ElytronDefinition.java:83)




	at org.jboss.as.controller.registry.NodeSubregistry.registerChild(NodeSubregistry.java:107)




	at org.jboss.as.controller.registry.ConcreteResourceRegistration.registerSubModel(ConcreteResourceRegistration.java:226)




	at org.jboss.as.controller.extension.ExtensionRegistry$SubsystemRegistrationImpl.registerSubsystemModel(ExtensionRegistry.java:694)




	at org.wildfly.extension.elytron.ElytronExtension.initialize(ElytronExtension.java:99)




	at org.jboss.as.controller.extension.ExtensionAddHandler.initializeExtension(ExtensionAddHandler.java:131)




	at org.jboss.as.controller.extension.ExtensionAddHandler.execute(ExtensionAddHandler.java:83)




	at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:951)




	at org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:694)




	at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:389)




	at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1363)




	at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:410)




	at org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:232)




	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.doExecute(ModelControllerClientOperationHandler.java:213)




	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.access$300(ModelControllerClientOperationHandler.java:136)




	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:157)




	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:153)




	at java.security.AccessController.doPrivileged(Native Method)




	at javax.security.auth.Subject.doAs(Subject.java:422)




	at org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:149)




	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1.execute(ModelControllerClientOperationHandler.java:153)




	at org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$1.doExecute(ManagementRequestContextImpl.java:70)




	at org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$AsyncTaskRunner.run(ManagementRequestContextImpl.java:160)




	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)




	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)




	at java.lang.Thread.run(Thread.java:745)




	at org.jboss.threads.JBossThread.run(JBossThread.java:320)






Expected result:
It is possible to add Elytron subsystem after its removal.</description>
			<version>3.0.0.Alpha7</version>
			<fixedVersion>3.0.0.Alpha8</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.registry.NodeSubregistry.java</file>
			<file type="M">org.jboss.as.controller.CapabilityRegistryTestCase.java</file>
			<file type="M">org.jboss.as.controller.registry.ConcreteResourceRegistration.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">5955</link>
		</links>
	</bug>
	<bug id="1761" opendate="2016-09-02 19:22:25" fixdate="2016-09-16 20:27:55" resolution="Done">
		<buginformation>
			<summary>Bogus "alternative" in server NativeManagementResourceDefinition.SOCKET_BINDING attribute definition</summary>
			<description>SOCKET_BINDING declares that INTERFACE is an alternative. There is no INTERFACE attribute allowed on this resource. Perhaps this is leftover cruft.</description>
			<version>3.0.0.Alpha7</version>
			<fixedVersion>3.0.0.Alpha8</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.server.mgmt.NativeManagementResourceDefinition.java</file>
		</fixedFiles>
		<links>
			<link type="Dependency" description="blocks">1556</link>
		</links>
	</bug>
	<bug id="1807" opendate="2016-09-19 06:56:44" fixdate="2016-09-19 13:34:12" resolution="Done">
		<buginformation>
			<summary>CLI config (jboss-cli.xml) is trimming vault-options when it should pass them on as is</summary>
			<description>Vault option is calling trim which is causing issues with custom vault implementation.  
The implementation of the vault config parser in the normal EAP config (i.e. in standalone.xml) does not do this.
To provide more details why this is an issue, the custom impl is prepending a string to an executable command.  By trimming the command is being mangled:
        &amp;lt;vault code="com.example.CommandVault" module="com.example"&amp;gt;
            &amp;lt;vault-option name="prependToValue" value="perform_encryption.sh -value "/&amp;gt;
            &amp;lt;vault-option name="allowEmptyPassword" value="false"/&amp;gt;
        &amp;lt;/vault&amp;gt;
</description>
			<version>3.0.0.Alpha8</version>
			<fixedVersion>3.0.0.Alpha9</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.cli.impl.VaultConfig.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">5690</link>
		</links>
	</bug>
	<bug id="1657" opendate="2016-07-15 11:51:17" fixdate="2016-09-19 17:13:58" resolution="Done">
		<buginformation>
			<summary>Confusing tab completion for adding a module dependencies</summary>
			<description>Using tab completion for adding a module dependencies with module add command could lead to invalid module.xml as CLI prompt user to use module name with "system.layers.base" prefix, which is not a part of module name.
reproduce
Add a new module via module add command, use tab-completion for dependencies






module add --name=&amp;lt;name&amp;gt; --resources=&amp;lt;path_to_jar&amp;gt; --dependencies=&amp;lt;TAB&amp;gt;




module add --name=&amp;lt;name&amp;gt; --resources=&amp;lt;path_to_jar&amp;gt; --dependencies=system.&amp;lt;TAB&amp;gt;




module add --name=&amp;lt;name&amp;gt; --resources=&amp;lt;path_to_jar&amp;gt; --dependencies=system.layers.&amp;lt;TAB&amp;gt;




module add --name=&amp;lt;name&amp;gt; --resources=&amp;lt;path_to_jar&amp;gt; --dependencies=system.layers.base.&amp;lt;TAB&amp;gt;




asm  ch  com  gnu  ibm  io  javaee  javax  net  nu  org  sun 






this way something like following is generated in module.xml file






&amp;lt;dependencies&amp;gt;




    &amp;lt;module name="system.layers.base.org.jboss.as.controller"/&amp;gt;




&amp;lt;/dependencies&amp;gt;






however correct module name is org.jboss.as.controller
</description>
			<version>2.2.0.CR7</version>
			<fixedVersion>3.0.0.Alpha9</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.cli.handlers.module.ASModuleHandler.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">5163</link>
			<link type="Related" description="relates to">262</link>
		</links>
	</bug>
	<bug id="1793" opendate="2016-09-14 08:08:21" fixdate="2016-09-20 21:22:42" resolution="Done">
		<buginformation>
			<summary>add-content operation fails to overwrite existing content with overwrite=true set when passing content by file path</summary>
			<description>Upon overwriting content in managed exploded deployments on wildfly-core, the following errors are produced:
CLI






[standalone@localhost:9990 /] deploy /home/mjurc/testing/eap7-204/jboss-kitchensink-ear.ear




[standalone@localhost:9990 /] /deployment=jboss-kitchensink-ear.ear:undeploy




{"outcome" =&amp;gt; "success"}




[standalone@localhost:9990 /] /deployment=jboss-kitchensink-ear.ear:explode




{"outcome" =&amp;gt; "success"}




[standalone@localhost:9990 /] /deployment=jboss-kitchensink-ear.ear:deploy




{"outcome" =&amp;gt; "success"}




[standalone@localhost:9990 /] /deployment=jboss-kitchensink-ear.ear:add-content(content=[{path=/home/mjurc/testing/eap7-204/test.txt, target-path=test.txt}], overwrite=true)




{




    "outcome" =&amp;gt; "failed",




    "failure-description" =&amp;gt; "org.jboss.as.repository.ExplodedContentException: WFLYDR0021: Error updating content of exploded deployment",




    "rolled-back" =&amp;gt; true




}




[standalone@localhost:9990 /] /deployment=jboss-kitchensink-ear.ear:add-content(content=[{path=/home/mjurc/testing/eap7-204/test.txt, target-path=test.txt}], overwrite=false)




{




    "outcome" =&amp;gt; "failed",




    "failure-description" =&amp;gt; "org.jboss.as.repository.ExplodedContentException: WFLYDR0021: Error updating content of exploded deployment",




    "rolled-back" =&amp;gt; true




}




[standalone@localhost:9990 /] /deployment=jboss-kitchensink-ear.ear:add-content(content=[{path=/home/mjurc/testing/eap7-204/test.txt, target-path=test.txt}])




{




    "outcome" =&amp;gt; "failed",




    "failure-description" =&amp;gt; "org.jboss.as.repository.ExplodedContentException: WFLYDR0021: Error updating content of exploded deployment",




    "rolled-back" =&amp;gt; true




}






Server






09:41:36,029 WARN  [org.jboss.as.repository] (management-handler-thread - 5) java.nio.file.FileAlreadyExistsException: /home/mjurc/testing/wildfly-core/build/target/wildfly-core-3.0.0.Alpha8-SNAPSHOT/standalone/data/content/content7797527203290314566/content/test.txt




09:45:27,505 WARN  [org.jboss.as.repository] (management-handler-thread - 12) java.nio.file.FileAlreadyExistsException: /home/mjurc/testing/wildfly-core/build/target/wildfly-core-3.0.0.Alpha8-SNAPSHOT/standalone/data/content/content721393778736298367/content/test.txt




09:45:36,352 WARN  [org.jboss.as.repository] (management-handler-thread - 10) java.nio.file.FileAlreadyExistsException: /home/mjurc/testing/wildfly-core/build/target/wildfly-core-3.0.0.Alpha8-SNAPSHOT/standalone/data/content/content344811471223714239/content/test.txt






This issue does not seem to arise when the content is passed to the server by input stream index.</description>
			<version>3.0.0.Alpha8</version>
			<fixedVersion>3.0.0.Alpha9</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.server.deployment.ExplodedDeploymentAddContentHandler.java</file>
			<file type="M">org.jboss.as.server.controller.resources.DeploymentAttributes.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">6001</link>
		</links>
	</bug>
	<bug id="1799" opendate="2016-09-15 14:07:53" fixdate="2016-09-23 22:40:57" resolution="Done">
		<buginformation>
			<summary>Property separator not appended after argument value if argument completer uses non-zero offset</summary>
			<description>For example:
module add --name=foo --dependencies=sun.scripting ==&amp;gt; space character is added at the end.
module add --name=foo --dependencies=sun.scripting,sun.jdk ==&amp;gt; Nothing happens, no space character added.
deployment-overlay add --name=foo --contents=foo=/some/file&amp;lt;TAB&amp;gt; ==&amp;gt; Nothing happens, no space character added.
This seems to be caused by a condition in  OperationRequestCompleter - if a suggested value is the same as current user input, ORC replaces the suggestion with a separator.
This only works if the offset returned by argument completer is 0 - if the completer provides only part of the value, this condition will never be triggered.</description>
			<version>3.0.0.Alpha7</version>
			<fixedVersion>3.0.0.Alpha9</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.cli.operation.OperationRequestCompleter.java</file>
		</fixedFiles>
	</bug>
	<bug id="1812" opendate="2016-09-21 17:00:01" fixdate="2016-09-26 17:34:21" resolution="Done">
		<buginformation>
			<summary>Makes ModuleOpsCompletionTestCase more resilient</summary>
			<description>Intermittent failure if the modules directory has some leftovers.</description>
			<version>3.0.0.Alpha8</version>
			<fixedVersion>3.0.0.Alpha9</fixedVersion>
			<type>Feature Request</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.test.integration.management.cli.ModuleOpsCompletionTestCase.java</file>
		</fixedFiles>
		<links>
			<link type="Duplicate" description="is duplicated by">1821</link>
		</links>
	</bug>
	<bug id="1821" opendate="2016-09-23 20:07:40" fixdate="2016-09-26 17:34:41" resolution="Duplicate Issue">
		<buginformation>
			<summary>Failures in ModuleOpsCompletionTestCase</summary>
			<description>Failed tests: 
  ModuleOpsCompletionTestCase.testModuleAddCompletionSuggestions:56-&amp;gt;testSuggestion:146-&amp;gt;testSuggestion:153 expected:&amp;lt;[org, ibm, io, javax, org, sun]&amp;gt; but was:&amp;lt;[ibm, io, javax, org, sun]&amp;gt;
There&amp;amp;apos;s already a PR that&amp;amp;apos;s probably meant to fix this but it isn&amp;amp;apos;t passing CI. I&amp;amp;apos;m going to @Ignore this test.</description>
			<version>3.0.0.Alpha8</version>
			<fixedVersion></fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.test.integration.management.cli.ModuleOpsCompletionTestCase.java</file>
		</fixedFiles>
		<links>
			<link type="Duplicate" description="duplicates">1812</link>
		</links>
	</bug>
	<bug id="1824" opendate="2016-09-26 12:30:47" fixdate="2016-09-28 18:30:07" resolution="Done">
		<buginformation>
			<summary>Can not parse object list attributes that contains a complex attribute</summary>
			<description>My resource defines an attribute which is a LIST of OBJECT that corresponds to a class (class name + module) and Properties that are passed to the created instance:






    private static final String CLASS = "class";




    private static final String MODULE = "module";




    public static final PropertiesAttributeDefinition PROPERTIES = new PropertiesAttributeDefinition.Builder("properties", true)




            .setAllowExpression(true)




            .build();









    public static final ObjectTypeAttributeDefinition PROCESS_STATE_LISTENER = ObjectTypeAttributeDefinition.Builder.of("process-state-listener",




            SimpleAttributeDefinitionBuilder.create(CLASS, ModelType.STRING, false)




                    .setAllowExpression(false)




                    .build(),




            SimpleAttributeDefinitionBuilder.create(MODULE, ModelType.STRING, false)




                    .setAllowExpression(false)




                    .build(),




            PROPERTIES)




            .setRestartAllServices()




            .setAllowNull(true)




            .build();




    public static final AttributeDefinition PROCESS_STATE_LISTENERS = ObjectListAttributeDefinition.Builder.of("listeners", PROCESS_STATE_LISTENER)




            .setAllowNull(false)




            .setRuntimeServiceNotRequired()




            .build();






I can create the resource from the CLI:






 /subsystem=core-management/service=process-state-listeners:add(listeners=[{class=org.foo.Listener, module=org.foo,, properties = {foo  = true, bar  = ${bar.prop:2}}}])




{"outcome" =&amp;gt; "success"}






And the resource and its attribute is properly marshalled to the XML configuration:






            &amp;lt;process-state-listeners&amp;gt;




                &amp;lt;listeners&amp;gt;




                    &amp;lt;process-state-listener class="org.foo.Listener" module="org.foo"&amp;gt;




                        &amp;lt;properties&amp;gt;




                            &amp;lt;property name="foo" value="true"/&amp;gt;




                            &amp;lt;property name="bar" value="${bar.prop:2}"/&amp;gt;




                        &amp;lt;/properties&amp;gt;




                    &amp;lt;/process-state-listener&amp;gt;




                &amp;lt;/listeners&amp;gt;




            &amp;lt;/process-state-listeners&amp;gt;






However the resource can not be parsed and it fails with the exception:






2016-09-27 14:57:35,285 ERROR [org.jboss.as.server] (Controller Boot Thread) WFLYSRV0055: Caught exception during boot: org.jboss.as.controller.persistence.ConfigurationPersistenceException: WFLYCTL0085: Failed to parse configuration




	at org.jboss.as.controller.persistence.XmlConfigurationPersister.load(XmlConfigurationPersister.java:131)




	at org.jboss.as.server.ServerService.boot(ServerService.java:355)




	at org.jboss.as.controller.AbstractControllerService$1.run(AbstractControllerService.java:303)




	at java.lang.Thread.run(Thread.java:745)




Caused by: javax.xml.stream.XMLStreamException: ParseError at [row,col]:[118,25]




Message: WFLYCTL0198: Unexpected element &amp;amp;apos;{urn:jboss:domain:core-management:1.0}properties&amp;amp;apos; encountered




	at org.jboss.as.controller.parsing.ParseUtils.unexpectedElement(ParseUtils.java:89)




	at org.jboss.as.controller.parsing.ParseUtils.requireNoContent(ParseUtils.java:244)




	at org.jboss.as.controller.AttributeParser$5.parseElement(AttributeParser.java:197)




	at org.jboss.as.controller.PersistentResourceXMLDescription.parseAttributes(PersistentResourceXMLDescription.java:208)




	at org.jboss.as.controller.PersistentResourceXMLDescription.parseAttributeGroups(PersistentResourceXMLDescription.java:140)




	at org.jboss.as.controller.PersistentResourceXMLDescription.parse(PersistentResourceXMLDescription.java:117)




	at org.jboss.as.controller.PersistentResourceXMLDescription.parseChildren(PersistentResourceXMLDescription.java:258)




	at org.jboss.as.controller.PersistentResourceXMLDescription.parse(PersistentResourceXMLDescription.java:135)




	at org.wildfly.extension.management.CoreManagementSubsystemParser_1_0.readElement(CoreManagementSubsystemParser_1_0.java:77)




	at org.wildfly.extension.management.CoreManagementSubsystemParser_1_0.readElement(CoreManagementSubsystemParser_1_0.java:50)




	at org.jboss.staxmapper.XMLMapperImpl.processNested(XMLMapperImpl.java:110)




	at org.jboss.staxmapper.XMLExtendedStreamReaderImpl.handleAny(XMLExtendedStreamReaderImpl.java:69)




	at org.jboss.as.server.parsing.StandaloneXml_5.parseServerProfile(StandaloneXml_5.java:591)




	at org.jboss.as.server.parsing.StandaloneXml_5.readServerElement(StandaloneXml_5.java:245)




	at org.jboss.as.server.parsing.StandaloneXml_5.readElement(StandaloneXml_5.java:144)




	at org.jboss.as.server.parsing.StandaloneXml.readElement(StandaloneXml.java:107)




	at org.jboss.as.server.parsing.StandaloneXml.readElement(StandaloneXml.java:49)




	at org.jboss.staxmapper.XMLMapperImpl.processNested(XMLMapperImpl.java:110)




	at org.jboss.staxmapper.XMLMapperImpl.parseDocument(XMLMapperImpl.java:69)




	at org.jboss.as.controller.persistence.XmlConfigurationPersister.load(XmlConfigurationPersister.java:123)




	... 3 more






The code in org.jboss.as.controller.AttributeParser#parseElement:197 to parse a list of objects assumes that the object&amp;amp;apos;s value are all represented by XML attributes. In my case, that&amp;amp;apos;s not correct as the "properties" attribute is represented by XML elements.</description>
			<version>3.0.0.Alpha8</version>
			<fixedVersion>3.0.0.Alpha9</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.AttributeParser.java</file>
			<file type="M">org.jboss.as.controller.AttributeParsers.java</file>
			<file type="M">org.jboss.as.controller.PersistentResourceXMLDescription.java</file>
			<file type="M">org.jboss.as.controller.persistence.PersistentResourceXMLParserTestCase.java</file>
		</fixedFiles>
	</bug>
	<bug id="1815" opendate="2016-09-23 11:56:00" fixdate="2016-09-28 18:34:44" resolution="Done">
		<buginformation>
			<summary>It&amp;apos;s not possible to re-add extension </summary>
			<description>





[standalone@localhost:9990 /] /subsystem=ejb3:remove




{




    "outcome" =&amp;gt; "success",




    "response-headers" =&amp;gt; {




        "operation-requires-reload" =&amp;gt; true,




        "process-state" =&amp;gt; "reload-required"




    }




}




[standalone@localhost:9990 /] reload




[standalone@localhost:9990 /] /extension=org.jboss.as.ejb3:remove




{"outcome" =&amp;gt; "success"}




[standalone@localhost:9990 /] /extension=org.jboss.as.ejb3:add   




{




    "outcome" =&amp;gt; "failed",




    "failure-description" =&amp;gt; "WFLYCTL0158: Operation handler failed: java.lang.IllegalArgumentException: WFLYCTL0218: A node is already registered at &amp;amp;apos;/deployment=*/subdeployment=*/subsystem=ejb3&amp;amp;apos;",




    "rolled-back" =&amp;gt; true




}












13:46:48,278 ERROR [org.jboss.as.controller.management-operation] (management-handler-thread - 2) WFLYCTL0013: Operation ("add") failed - address: ([("extension" =&amp;gt; "org.jboss.as.ejb3")]): java.lang.IllegalArgumentException: WFLYCTL0218: A node is already registered at &amp;amp;apos;/deployment=*/subdeployment=*/subsystem=ejb3&amp;amp;apos;




        at org.jboss.as.controller.registry.ConcreteResourceRegistration.registerSubModel(ConcreteResourceRegistration.java:222)




        at org.jboss.as.controller.extension.ExtensionRegistry$DeploymentManagementResourceRegistration.registerSubModel(ExtensionRegistry.java:922)




        at org.jboss.as.controller.extension.ExtensionRegistry$SubsystemRegistrationImpl.registerDeploymentModel(ExtensionRegistry.java:700)




        at org.jboss.as.ejb3.subsystem.EJB3Extension.initialize(EJB3Extension.java:91)




        at org.jboss.as.controller.extension.ExtensionAddHandler.initializeExtension(ExtensionAddHandler.java:131)




        at org.jboss.as.controller.extension.ExtensionAddHandler.execute(ExtensionAddHandler.java:83)




        at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:940)




        at org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:683)




        at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:382)




        at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1363)




        at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:410)




        at org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:232)




        at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.doExecute(ModelControllerClientOperationHandler.java:213)




        at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.access$300(ModelControllerClientOperationHandler.java:136)




        at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:157)




        at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:153)




        at java.security.AccessController.doPrivileged(Native Method)




        at javax.security.auth.Subject.doAs(Subject.java:422)




        at org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:149)




        at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1.execute(ModelControllerClientOperationHandler.java:153)




        at org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$1.doExecute(ManagementRequestContextImpl.java:70)




        at org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$AsyncTaskRunner.run(ManagementRequestContextImpl.java:160)




        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)




        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)




        at java.lang.Thread.run(Thread.java:745)




        at org.jboss.threads.JBossThread.run(JBossThread.java:320)






the error with logging subsystem, I didn&amp;amp;apos;t try other subsystems
reload after extension:remove helps</description>
			<version>3.0.0.Alpha8</version>
			<fixedVersion>3.0.0.Alpha9</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.extension.ExtensionRegistry.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned to">6181</link>
		</links>
	</bug>
	<bug id="1805" opendate="2016-09-16 18:36:07" fixdate="2016-09-30 02:14:50" resolution="Done">
		<buginformation>
			<summary>Intermittent failure in BasicOperationsUnitTestCase.testPathInfo</summary>
			<description>This test is failing intermittently. I&amp;amp;apos;m going to @Ignore it.
This one should be a bit higher priority than the typical intermittent test failure as the stuff being tested is pretty new, so there&amp;amp;apos;s a higher chance this is a bug in the code instead of just a test issue.</description>
			<version>3.0.0.Alpha7</version>
			<fixedVersion>3.0.0.Alpha10</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.wildfly.core.test.standalone.mgmt.BasicOperationsUnitTestCase.java</file>
		</fixedFiles>
	</bug>
	<bug id="1479" opendate="2016-04-18 13:45:05" fixdate="2016-10-03 18:54:49" resolution="Done">
		<buginformation>
			<summary>Jar sub deployment has as first dependency parent ear</summary>
			<description>Jar file included in ear main directory is resolved as sub deployment with parent ear as first dependency.
Therefore jar files contained in ear/lib directory have priority before implicit modules when class is created inside jar file.</description>
			<version>3.0.0.Alpha1</version>
			<fixedVersion>3.0.0.Alpha10</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.server.deployment.module.SubDeploymentDependencyProcessor.java</file>
		</fixedFiles>
		<links>
			<link type="Related" description="is related to">6629</link>
			<link type="Related" description="is related to">4241</link>
			<link type="Related" description="is related to">5267</link>
		</links>
	</bug>
	<bug id="1846" opendate="2016-10-03 08:28:56" fixdate="2016-10-03 18:55:21" resolution="Done">
		<buginformation>
			<summary>WFLYSRV0153 error after attempting to explode archived subdeployments of archived deployments</summary>
			<description>In archived deployments with archived subdeployments, the explode operation with path parameter defined to point at archived subdeployment causes the removal of whole deployment from the content repository. 
This operation is illegal, but the server should produce formed warning message with operation failing gracefully instead of throwing stack trace in this case.
server.log:






09:05:07,664 INFO  [org.wildfly.extension.undertow] (ServerService Thread Pool -- 29) WFLYUT0022: Unregistered web context: /subdeployment-test-web




09:05:07,701 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 2) WFLYCLINF0003: Stopped client-mappings cache from ejb container




09:05:07,719 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-7) WFLYSRV0208: Stopped subdeployment (runtime-name: subdeployment-test-ejb.jar) in 65ms




09:05:07,719 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-6) WFLYSRV0208: Stopped subdeployment (runtime-name: subdeployment-test-web.war) in 66ms




09:05:07,722 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-1) WFLYSRV0028: Stopped deployment subdeployment-test.ear (runtime-name: subdeployment-test.ear) in 69ms




09:05:07,732 INFO  [org.jboss.as.server] (management-handler-thread - 1) WFLYSRV0009: Undeployed "subdeployment-test.ear" (runtime-name: "subdeployment-test.ear")




09:05:07,754 INFO  [org.jboss.as.repository] (management-handler-thread - 2) WFLYDR0002: Content removed from location /home/mjurc/testing/wildfly/testsuite/integration/basic/target/jbossas/standalone/data/content/13/5a0425d908539149b62eb99b63710c67b13466/content




09:05:07,762 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-5) WFLYSRV0027: Starting deployment of "subdeployment-test.ear" (runtime-name: "subdeployment-test.ear")




[0m[31m09:05:07,763 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-5) MSC000001: Failed to start service jboss.deployment.unit."subdeployment-test.ear".STRUCTURE: org.jboss.msc.service.StartException in service jboss.deployment.unit."subdeployment-test.ear".STRUCTURE: WFLYSRV0153: Failed to process phase STRUCTURE of deployment "subdeployment-test.ear"




	at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:154)




	at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1963)




	at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1896)




	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)




	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)




	at java.lang.Thread.run(Thread.java:745)




Caused by: org.jboss.as.server.deployment.DeploymentUnitProcessingException: WFLYSRV0160: Failed to mount deployment content




	at org.jboss.as.server.deployment.module.DeploymentRootMountProcessor.deploy(DeploymentRootMountProcessor.java:95)




	at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:147)




	... 5 more




Caused by: java.io.FileNotFoundException: /home/mjurc/testing/wildfly/testsuite/integration/basic/target/jbossas/standalone/data/managed-exploded/subdeployment-test.ear (No such file or directory)




	at java.io.FileInputStream.open0(Native Method)




	at java.io.FileInputStream.open(FileInputStream.java:195)




	at java.io.FileInputStream.&amp;lt;init&amp;gt;(FileInputStream.java:138)




	at org.jboss.vfs.spi.RootFileSystem.openInputStream(RootFileSystem.java:51)




	at org.jboss.vfs.VirtualFile.openStream(VirtualFile.java:318)




	at org.jboss.vfs.VFS.mountZipExpanded(VFS.java:533)




	at org.jboss.as.server.deployment.DeploymentMountProvider$Factory$ServerDeploymentRepositoryImpl.mountDeploymentContent(DeploymentMountProvider.java:108)




	at org.jboss.as.server.deployment.module.DeploymentRootMountProcessor.deploy(DeploymentRootMountProcessor.java:91)




	... 6 more









[0m[31m09:05:07,765 ERROR [org.jboss.as.controller.management-operation] (management-handler-thread - 3) WFLYCTL0013: Operation ("deploy") failed - address: (("deployment" =&amp;gt; "subdeployment-test.ear")) - failure description: {




    "WFLYCTL0080: Failed services" =&amp;gt; {"jboss.deployment.unit.\"subdeployment-test.ear\".STRUCTURE" =&amp;gt; "org.jboss.msc.service.StartException in service jboss.deployment.unit.\"subdeployment-test.ear\".STRUCTURE: WFLYSRV0153: Failed to process phase STRUCTURE of deployment \"subdeployment-test.ear\"




    Caused by: org.jboss.as.server.deployment.DeploymentUnitProcessingException: WFLYSRV0160: Failed to mount deployment content




    Caused by: java.io.FileNotFoundException: /home/mjurc/testing/wildfly/testsuite/integration/basic/target/jbossas/standalone/data/managed-exploded/subdeployment-test.ear (No such file or directory)"},




    "WFLYCTL0412: Required services that are not installed:" =&amp;gt; ["jboss.deployment.unit.\"subdeployment-test.ear\".STRUCTURE"],




    "WFLYCTL0180: Services with missing/unavailable dependencies" =&amp;gt; undefined




}




09:05:07,767 ERROR [org.jboss.as.server] (management-handler-thread - 3) WFLYSRV0021: Deploy of deployment "subdeployment-test.ear" was rolled back with the following failure message: 




{




    "WFLYCTL0080: Failed services" =&amp;gt; {"jboss.deployment.unit.\"subdeployment-test.ear\".STRUCTURE" =&amp;gt; "org.jboss.msc.service.StartException in service jboss.deployment.unit.\"subdeployment-test.ear\".STRUCTURE: WFLYSRV0153: Failed to process phase STRUCTURE of deployment \"subdeployment-test.ear\"




    Caused by: org.jboss.as.server.deployment.DeploymentUnitProcessingException: WFLYSRV0160: Failed to mount deployment content




    Caused by: java.io.FileNotFoundException: /home/mjurc/testing/wildfly/testsuite/integration/basic/target/jbossas/standalone/data/managed-exploded/subdeployment-test.ear (No such file or directory)"},




    "WFLYCTL0412: Required services that are not installed:" =&amp;gt; ["jboss.deployment.unit.\"subdeployment-test.ear\".STRUCTURE"],




    "WFLYCTL0180: Services with missing/unavailable dependencies" =&amp;gt; undefined




}




09:05:07,768 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-8) WFLYSRV0028: Stopped deployment subdeployment-test.ear (runtime-name: subdeployment-test.ear) in 1ms




09:05:07,770 INFO  [org.jboss.as.controller] (management-handler-thread - 3) WFLYCTL0183: Service status report




WFLYCTL0186:   Services which failed to start:      service jboss.deployment.unit."subdeployment-test.ear".STRUCTURE





</description>
			<version>3.0.0.Alpha9</version>
			<fixedVersion>3.0.0.Alpha10</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.server.logging.ServerLogger.java</file>
			<file type="M">org.jboss.as.domain.controller.operations.deployment.DeploymentExplodeHandler.java</file>
			<file type="M">org.jboss.as.domain.controller.logging.DomainControllerLogger.java</file>
			<file type="M">org.jboss.as.repository.ContentRepositoryTest.java</file>
			<file type="M">org.jboss.as.repository.ContentRepositoryImpl.java</file>
			<file type="M">org.jboss.as.server.deployment.DeploymentExplodeHandler.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">6273</link>
		</links>
	</bug>
	<bug id="1847" opendate="2016-10-03 14:23:48" fixdate="2016-10-03 18:57:06" resolution="Done">
		<buginformation>
			<summary>PatchMerger overrides submodule&amp;apos;s content merging the outer module</summary>
			<description>PatchMerger merges two CPs into one. In case the first CP includes updates for modules like org.outermodule and org.outermodule.innermodule. And the second CP including an update for org.outermodule.innermodule only, the merge may not happen correctly in case the modification for the innermodule will appear before the modification for the outermodule in the first CP.
The merger will copy the innermodule&amp;amp;apos;s content first and then override it copying the outermodule&amp;amp;apos;s content (including the previous version of the innermodule).</description>
			<version>3.0.0.Alpha9</version>
			<fixedVersion>3.0.0.Alpha10</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.test.patching.CPRollingbackOneOffTestCase.java</file>
			<file type="M">org.jboss.as.patching.metadata.PatchMerger.java</file>
			<file type="M">org.jboss.as.test.patching.CumulativePatchingScenariosTestCase.java</file>
			<file type="M">org.jboss.as.test.patching.MergedPatchesTestCase.java</file>
		</fixedFiles>
	</bug>
	<bug id="1851" opendate="2016-10-04 12:28:40" fixdate="2016-10-04 20:01:11" resolution="Done">
		<buginformation>
			<summary>Inconsistent behaviour with browse-content(depth=1) operation between archived and exploded deployments</summary>
			<description>/deployment=jboss-kitchensink-ear.ear:browse-content(depth=1) operation returns inconsistent result depending on whether the deployment is exploded or not. Deployment attached.
Archived:






{




    "outcome" =&amp;gt; "success",




    "result" =&amp;gt; [




        {




            "path" =&amp;gt; "jboss-kitchensink-ear-web.war",




            "directory" =&amp;gt; false,




            "file-size" =&amp;gt; 63190L




        },




        {




            "path" =&amp;gt; "jboss-kitchensink-ear-ejb.jar",




            "directory" =&amp;gt; false,




            "file-size" =&amp;gt; 12256L




        },




        {




            "path" =&amp;gt; "META-INF/",




            "directory" =&amp;gt; true




        }




    ]




}






Exploded:






{




    "outcome" =&amp;gt; "success",




    "result" =&amp;gt; [




        {




            "path" =&amp;gt; "META-INF/",




            "directory" =&amp;gt; true




        },




        {




            "path" =&amp;gt; "META-INF/MANIFEST.MF",




            "directory" =&amp;gt; false,




            "file-size" =&amp;gt; 130L




        },




        {




            "path" =&amp;gt; "jboss-kitchensink-ear-web.war",




            "directory" =&amp;gt; false,




            "file-size" =&amp;gt; 63190L




        },




        {




            "path" =&amp;gt; "jboss-kitchensink-ear-ejb.jar",




            "directory" =&amp;gt; false,




            "file-size" =&amp;gt; 12256L




        },




        {




            "path" =&amp;gt; "META-INF/application.xml",




            "directory" =&amp;gt; false,




            "file-size" =&amp;gt; 802L




        },




        {




            "path" =&amp;gt; "META-INF/kitchensink-ear-quickstart-ds.xml",




            "directory" =&amp;gt; false,




            "file-size" =&amp;gt; 1955L




        },




        {




            "path" =&amp;gt; "META-INF/maven/org.jboss.quickstarts.eap/jboss-kitchensink-ear-ear/pom.xml",




            "directory" =&amp;gt; false,




            "file-size" =&amp;gt; 5582L




        },




        {




            "path" =&amp;gt; "META-INF/maven/org.jboss.quickstarts.eap/jboss-kitchensink-ear-ear/pom.properties",




            "directory" =&amp;gt; false,




            "file-size" =&amp;gt; 143L




        }




    ]




}





</description>
			<version>3.0.0.Alpha9</version>
			<fixedVersion>3.0.0.Alpha10</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.repository.ContentRepositoryTest.java</file>
			<file type="M">org.jboss.as.repository.PathUtil.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">6293</link>
		</links>
	</bug>
	<bug id="1869" opendate="2016-10-17 15:15:36" fixdate="2016-10-20 18:22:32" resolution="Done">
		<buginformation>
			<summary>When unregistering a resource in the MMR, if the address targets an alias then we should just &amp;apos;ignore&amp;apos; the unregistering of the submodel</summary>
			<description>When unregistering the submodel of a resource, if it targets an alias with children the operation will fail like this:
java.lang.IllegalArgumentException: WFLYCTL0277: An alias is already registered at location &amp;amp;apos;/subsystem=infinispan/cache-container=/distributed-cache=/file-store=FILE_STORE&amp;amp;apos;: java.lang.IllegalArgumentException: WFLYCTL0277: An alias is already registered at location &amp;amp;apos;/subsystem=infinispan/cache-container=/distributed-cache=/file-store=FILE_STORE&amp;amp;apos;
at org.jboss.as.controller.registry.AliasResourceRegistration.alreadyRegistered(AliasResourceRegistration.java:291)
at org.jboss.as.controller.registry.AliasResourceRegistration.unregisterSubModel(AliasResourceRegistration.java:123)
at org.jboss.as.controller.registry.ConcreteResourceRegistration.unregisterSubModel(ConcreteResourceRegistration.java:261)
at org.jboss.as.controller.registry.ConcreteResourceRegistration.unregisterSubModel(ConcreteResourceRegistration.java:261)
at org.jboss.as.controller.registry.ConcreteResourceRegistration.unregisterSubModel(ConcreteResourceRegistration.java:261)
at org.jboss.as.controller.registry.ConcreteResourceRegistration.unregisterSubModel(ConcreteResourceRegistration.java:261)
at org.jboss.as.controller.extension.ExtensionRegistry.removeExtension(ExtensionRegistry.java:341)
We should ignore the removal of the children of an alias resource registration.</description>
			<version>3.0.0.Alpha9</version>
			<fixedVersion>3.0.0.Alpha10</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.registry.ConcreteResourceRegistration.java</file>
		</fixedFiles>
	</bug>
	<bug id="1864" opendate="2016-10-13 09:12:31" fixdate="2016-10-26 20:18:59" resolution="Done">
		<buginformation>
			<summary>Whitespaces are not removed from dependencies in module add command</summary>
			<description>Running 
module add --name=foo.bar --resources=foo.jar --dependencies=[org.a, org.b ]
will result in following dependencies in module.xml
{{
...
    &amp;lt;dependencies&amp;gt;
        &amp;lt;module name="org.a"/&amp;gt;
        &amp;lt;module name=" org.b "/&amp;gt;
    &amp;lt;/dependencies&amp;gt;
...
}}
The module name in dependencies should be stripped of leading and trailing whitespaces.</description>
			<version>3.0.0.Alpha9</version>
			<fixedVersion>3.0.0.Alpha11</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.cli.handlers.module.ASModuleHandler.java</file>
			<file type="M">org.jboss.as.test.integration.management.cli.ModuleTestCase.java</file>
		</fixedFiles>
		<links>
			<link type="Causality" description="causes">6951</link>
		</links>
	</bug>
	<bug id="1845" opendate="2016-09-30 22:54:10" fixdate="2016-10-26 20:26:17" resolution="Done">
		<buginformation>
			<summary>Logging subsystem scans the CWD on server boot</summary>
			<description>When booting the server from a directory where the subtree is large the server hangs for a long time. JStack shows that the logging subsystem is scanning the CWD.
Booting the server from the root dir of a maven parent project containing 2 subprojects, a swarm project and a small NPM subproject added 33s to the server boot time compared to stepping into the swarm project and booting it.
Stacktrace while the server is booting:






Thread 25859: (state = IN_NATIVE)




 - sun.nio.fs.UnixNativeDispatcher.lstat0(long, sun.nio.fs.UnixFileAttributes) @bci=0 (Compiled frame; information may be imprecise)




 - sun.nio.fs.UnixNativeDispatcher.lstat(sun.nio.fs.UnixPath, sun.nio.fs.UnixFileAttributes) @bci=10, line=300 (Compiled frame)




 - sun.nio.fs.UnixFileAttributes.get(sun.nio.fs.UnixPath, boolean) @bci=22, line=72 (Compiled frame)




 - sun.nio.fs.UnixFileAttributeViews$Basic.readAttributes() @bci=15, line=52 (Compiled frame)




 - sun.nio.fs.UnixFileSystemProvider.readAttributes(java.nio.file.Path, java.lang.Class, java.nio.file.LinkOption[]) @bci=57, line=144 (Compiled frame)




 - java.nio.file.Files.readAttributes(java.nio.file.Path, java.lang.Class, java.nio.file.LinkOption[]) @bci=7, line=1737 (Compiled frame)




 - java.nio.file.FileTreeWalker.getAttributes(java.nio.file.Path, boolean) @bci=56, line=219 (Compiled frame)




 - java.nio.file.FileTreeWalker.visit(java.nio.file.Path, boolean, boolean) @bci=3, line=276 (Compiled frame)




 - java.nio.file.FileTreeWalker.next() @bci=134, line=372 (Compiled frame)




 - java.nio.file.Files.walkFileTree(java.nio.file.Path, java.util.Set, int, java.nio.file.FileVisitor) @bci=256, line=2706 (Compiled frame)




 - java.nio.file.Files.walkFileTree(java.nio.file.Path, java.nio.file.FileVisitor) @bci=9, line=2742 (Interpreted frame)




 - org.jboss.as.logging.LoggingResource.findFiles(java.lang.String, org.jboss.dmr.ModelNode, boolean) @bci=47, line=251 (Interpreted frame)




 - org.jboss.as.logging.LoggingResource.getChildrenNames(java.lang.String) @bci=37, line=157 (Interpreted frame)




 - org.jboss.as.logging.LoggingResource.getChildren(java.lang.String) @bci=11, line=171 (Interpreted frame)




 - org.jboss.as.controller.registry.AbstractModelResource$DelegateResource.getChildren(java.lang.String) @bci=5, line=362 (Interpreted frame)




 - org.jboss.as.controller.registry.Resource$Tools.readModel(org.jboss.as.controller.PathAddress, org.jboss.as.controller.registry.Resource, int, org.jboss.as.controller.registry.ResourceFilter) @bci=99, line=289 (Interpreted frame)




 - org.jboss.as.controller.registry.Resource$Tools.readModel(org.jboss.as.controller.registry.Resource, int, org.jboss.as.controller.registry.ResourceFilter) @bci=19, line=276 (Interpreted frame)




 - org.jboss.as.controller.registry.Resource$Tools.readModel(org.jboss.as.controller.registry.Resource, int) @bci=5, line=262 (Interpreted frame)




 - org.jboss.as.controller.registry.Resource$Tools.readModel(org.jboss.as.controller.PathAddress, org.jboss.as.controller.registry.Resource, int, org.jboss.as.controller.registry.ResourceFilter) @bci=189, line=291 (Interpreted frame)




 - org.jboss.as.controller.registry.Resource$Tools.readModel(org.jboss.as.controller.registry.Resource, int, org.jboss.as.controller.registry.ResourceFilter) @bci=19, line=276 (Interpreted frame)




 - org.jboss.as.controller.registry.Resource$Tools.readModel(org.jboss.as.controller.registry.Resource, int) @bci=5, line=262 (Interpreted frame)




 - org.jboss.as.controller.registry.Resource$Tools.readModel(org.jboss.as.controller.registry.Resource) @bci=2, line=250 (Interpreted frame)




 - org.jboss.as.controller.ModelControllerImpl.writeModel(org.jboss.as.controller.ModelControllerImpl$ManagementModelImpl, java.util.Set) @bci=19, line=769 (Interpreted frame)




 - org.jboss.as.controller.OperationContextImpl.createPersistenceResource() @bci=17, line=519 (Interpreted frame)




 - org.jboss.as.controller.AbstractOperationContext.executeDoneStage(org.jboss.dmr.ModelNode) @bci=22, line=708 (Interpreted frame)




 - org.jboss.as.controller.AbstractOperationContext.processStages() @bci=277, line=680 (Interpreted frame)




 - org.jboss.as.controller.AbstractOperationContext.executeOperation() @bci=27, line=370 (Interpreted frame)




 - org.jboss.as.controller.OperationContextImpl.executeOperation() @bci=20, line=1344 (Interpreted frame)




 - org.jboss.as.controller.ModelControllerImpl.boot(java.util.List, org.jboss.as.controller.client.OperationMessageHandler, org.jboss.as.controller.ModelController$OperationTransactionControl, boolean, org.jboss.as.controller.extension.MutableRootResourceRegistrationProvider, boolean, boolean) @bci=410, line=485 (Interpreted frame)




 - org.jboss.as.controller.AbstractControllerService.boot(java.util.List, boolean, boolean, org.jboss.as.controller.extension.MutableRootResourceRegistrationProvider) @bci=16, line=387 (Interpreted frame)




 - org.jboss.as.controller.AbstractControllerService.boot(java.util.List, boolean) @bci=7, line=349 (Interpreted frame)




 - org.jboss.as.server.ServerService.boot(java.util.List, boolean) @bci=22, line=392 (Interpreted frame)




 - org.jboss.as.server.ServerService.boot(org.jboss.as.controller.BootContext) @bci=907, line=365 (Interpreted frame)




 - org.jboss.as.controller.AbstractControllerService$1.run() @bci=12, line=299 (Interpreted frame)




 - java.lang.Thread.run() @bci=11, line=745 (Interpreted frame)





</description>
			<version>2.0.10.Final</version>
			<fixedVersion>3.0.0.Alpha11</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.logging.LoggingResource.java</file>
			<file type="M">org.jboss.as.logging.logging.LoggingLogger.java</file>
			<file type="M">org.jboss.as.controller.ModelControllerImpl.java</file>
			<file type="M">org.jboss.as.controller.registry.Resource.java</file>
			<file type="M">org.jboss.as.controller.ValidateModelStepHandler.java</file>
			<file type="M">org.jboss.as.controller.OperationContextImpl.java</file>
		</fixedFiles>
		<links>
			<link type="Dependency" description="blocks">744</link>
		</links>
	</bug>
	<bug id="1908" opendate="2016-10-31 08:13:57" fixdate="2016-11-02 21:27:51" resolution="Done">
		<buginformation>
			<summary>Tab completion suggest writing attribute which has access type metric and is not writable</summary>
			<description>CLI tab completion suggests attributes that are not writable and their access-type is metric
Example 





/subsystem=messaging-activemq/server=default/jms-queue=DLQ:write-attribute(name=&amp;lt;TAB&amp;gt;




consumer-count  delivering-count  entries  legacy-entries  message-count  messages-added  scheduled-count  






From executing :read-resource-description we can see, attributes consumer-count, delivering-count, message-count, messages-added, scheduled-count are of type metric.
On attempt to write metric attribute, for example message-count, non writable error is printed 





[standalone@localhost:9990 jms-queue=q] :write-attribute(name=message-count, value=5)




{




    "outcome" =&amp;gt; "failed",




    "failure-description" =&amp;gt; "WFLYCTL0048: Attribute message-count is not writable",




    "rolled-back" =&amp;gt; true




}






CLI should not suggest writing attributes that are not writable.</description>
			<version>3.0.0.Alpha11</version>
			<fixedVersion>3.0.0.Alpha12</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.cli.Util.java</file>
			<file type="M">org.jboss.as.cli.impl.AttributeNamePathCompleter.java</file>
			<file type="M">org.jboss.as.cli.parsing.test.AttributeNamePathCompletionTestCase.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned to">6672</link>
		</links>
	</bug>
	<bug id="1915" opendate="2016-10-31 19:24:55" fixdate="2016-11-04 22:18:10" resolution="Done">
		<buginformation>
			<summary>ParseUtils.parseAttributeValue should not fail due to DMR type conversions</summary>
			<description>The task of ParseUtils.parseAttributeValue is to convert a string into a ModelNode. The type of the ModelNode is not particularly important, as later code will do type conversion. And, it is not the job of this method to do validation; there is other code that does that. So, the type conversion this method does should not be allowed to produce failures. Continuing to try the conversion is ok, although not required, but if a conversion can&amp;amp;apos;t succeed the pre-conversion ModelType.STRING node should be returned.</description>
			<version>3.0.0.Alpha11</version>
			<fixedVersion>3.0.0.Alpha12</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.parsing.ParseUtils.java</file>
		</fixedFiles>
		<links>
			<link type="Superset" description="incorporates">6667</link>
			<link type="Superset" description="incorporates">6668</link>
		</links>
	</bug>
	<bug id="1552" opendate="2016-05-13 14:57:20" fixdate="2016-11-04 22:26:25" resolution="Done">
		<buginformation>
			<summary>Slaves should report the master&amp;apos;s version in the domain model</summary>
			<description>Setting up the mixed domain tests for an EAP7 slave, I get the following error :






  SimpleMixedDomain700TestCase&amp;gt;SimpleMixedDomainTest.test00002_Versioning:139 expected:&amp;lt;{




    "management-major-version" =&amp;gt; 4,




    "management-micro-version" =&amp;gt; 0,




    "management-minor-version" =&amp;gt; 1,




    "name" =&amp;gt; "Unnamed Domain",




    "namespaces" =&amp;gt; [],




    "product-name" =&amp;gt; "WildFly Full",




    "product-version" =&amp;gt; "10.1.0.Final-SNAPSHOT",




    "release-codename" =&amp;gt; "Kenny",




    "release-version" =&amp;gt; "2.2.0.CR2",




    "schema-locations" =&amp;gt; []




}&amp;gt; but was:&amp;lt;{




    "management-major-version" =&amp;gt; 4,




    "management-micro-version" =&amp;gt; 0,




    "management-minor-version" =&amp;gt; 1,




    "name" =&amp;gt; "Unnamed Domain",




    "namespaces" =&amp;gt; [],




    "product-name" =&amp;gt; "JBoss EAP",




    "product-version" =&amp;gt; "7.0.0.GA",




    "release-codename" =&amp;gt; "Kenny",




    "release-version" =&amp;gt; "2.1.2.Final-redhat-1",




    "schema-locations" =&amp;gt; []




}&amp;gt;






The &amp;amp;apos;expected&amp;amp;apos; is the WildFly master values, while the &amp;amp;apos;actual&amp;amp;apos; are the slave values. product-name, product-version, release-codename and release-version on the slave should be the same as the master values. Once we upgrade to Wildfly Core 3.0.0 we should also check that the management-[major/minor/micro]-version attributes on the slave are the same as the DC&amp;amp;apos;s values as well (i.e 5.0.0 rather than 4.0.1) This is similar to WFLY-3228 back in the day.
This is probably caused by the SyncXXX handlers for pushing the domain config as operations (WFCORE-401)</description>
			<version>2.2.0.CR2</version>
			<fixedVersion>3.0.0.Alpha12</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.domain.controller.operations.SyncModelServerStateTestCase.java</file>
			<file type="M">org.jboss.as.domain.controller.operations.SyncModelOperationHandler.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">4591</link>
		</links>
	</bug>
	<bug id="1936" opendate="2016-11-04 10:57:06" fixdate="2016-11-07 18:40:35" resolution="Done">
		<buginformation>
			<summary>Value of parameters "restart-required" for fixed-*port attributes does not match reality for socket-binding and *-destination-outbound-socket-binding in CLI</summary>
			<description>fixed-port attribute of socket-binding and fixed-source-port attributes of *-destination-outbound-socket-binding define in its description that there is not necessary to do reload or restart for any of them. But reality is different. If you tries to change such attributes you are informed that reload is necessary.
The attributes are defined as "restart-required" =&amp;gt; "no-services", see /socket-binding-group=standard-sockets:read-resource-description(recursive=true)</description>
			<version>3.0.0.Alpha11</version>
			<fixedVersion>3.0.0.Alpha12</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.server.services.net.OutboundSocketBindingResourceDefinition.java</file>
			<file type="M">org.jboss.as.controller.resource.AbstractSocketBindingResourceDefinition.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">6904</link>
		</links>
	</bug>
	<bug id="1896" opendate="2016-10-26 09:44:51" fixdate="2016-11-07 20:31:31" resolution="Done">
		<buginformation>
			<summary>Deployment operation browse-content(archive=true) does not return archives in archived deployments</summary>
			<description>Deployment operation browse-content(archive=true) does not return archives in archived deployments:






[standalone@localhost:9990 /] /deployment=jboss-kitchensink-ear.ear:browse-content()




{




    "outcome" =&amp;gt; "success",




    "result" =&amp;gt; [




        {




            "path" =&amp;gt; "jboss-kitchensink-ear-web.war",




            "directory" =&amp;gt; false,




            "file-size" =&amp;gt; 63190L




        },




        {




            "path" =&amp;gt; "jboss-kitchensink-ear-ejb.jar",




            "directory" =&amp;gt; false,




            "file-size" =&amp;gt; 12256L




        },




        {




            "path" =&amp;gt; "META-INF/maven/org.jboss.quickstarts.eap/jboss-kitchensink-ear-ear/pom.xml",




            "directory" =&amp;gt; false,




            "file-size" =&amp;gt; 5582L




        },




        {




            "path" =&amp;gt; "META-INF/maven/org.jboss.quickstarts.eap/jboss-kitchensink-ear-ear/pom.properties",




            "directory" =&amp;gt; false,




            "file-size" =&amp;gt; 143L




        },




        {




            "path" =&amp;gt; "META-INF/maven/org.jboss.quickstarts.eap/jboss-kitchensink-ear-ear/",




            "directory" =&amp;gt; true




        },




        {




            "path" =&amp;gt; "META-INF/maven/org.jboss.quickstarts.eap/",




            "directory" =&amp;gt; true




        },




        {




            "path" =&amp;gt; "META-INF/maven/",




            "directory" =&amp;gt; true




        },




        {




            "path" =&amp;gt; "META-INF/MANIFEST.MF",




            "directory" =&amp;gt; false,




            "file-size" =&amp;gt; 130L




        },




        {




            "path" =&amp;gt; "META-INF/application.xml",




            "directory" =&amp;gt; false,




            "file-size" =&amp;gt; 802L




        },




        {




            "path" =&amp;gt; "META-INF/kitchensink-ear-quickstart-ds.xml",




            "directory" =&amp;gt; false,




            "file-size" =&amp;gt; 1955L




        },




        {




            "path" =&amp;gt; "META-INF/",




            "directory" =&amp;gt; true




        }




    ]




}




[standalone@localhost:9990 /] /deployment=jboss-kitchensink-ear.ear:browse-content(archive=true)




{"outcome" =&amp;gt; "success"}






It works correctly with exploded deployments:






[standalone@localhost:9990 /] /deployment=jboss-kitchensink-ear.ear:undeploy




{"outcome" =&amp;gt; "success"}




[standalone@localhost:9990 /] /deployment=jboss-kitchensink-ear.ear:explode




{"outcome" =&amp;gt; "success"}




[standalone@localhost:9990 /] /deployment=jboss-kitchensink-ear.ear:deploy




{"outcome" =&amp;gt; "success"}




[standalone@localhost:9990 /] /deployment=jboss-kitchensink-ear.ear:browse-content(archive=true)




{




    "outcome" =&amp;gt; "success",




    "result" =&amp;gt; [




        {




            "path" =&amp;gt; "jboss-kitchensink-ear-web.war",




            "directory" =&amp;gt; false,




            "file-size" =&amp;gt; 63190L




        },




        {




            "path" =&amp;gt; "jboss-kitchensink-ear-ejb.jar",




            "directory" =&amp;gt; false,




            "file-size" =&amp;gt; 12256L




        }




    ]




}





</description>
			<version>3.0.0.Alpha10</version>
			<fixedVersion>3.0.0.Alpha12</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.repository.ContentFilter.java</file>
			<file type="M">org.jboss.as.repository.PathUtilTest.java</file>
			<file type="M">org.jboss.as.repository.PathUtil.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">6632</link>
		</links>
	</bug>
	<bug id="1951" opendate="2016-11-07 17:52:40" fixdate="2016-11-07 20:35:27" resolution="Done">
		<buginformation>
			<summary>Expose content repository read-content as a GET operation</summary>
			<description>Allows the use of the GET method to obtain the binary stream to a content in the content repository.</description>
			<version>3.0.0.Alpha11</version>
			<fixedVersion>3.0.0.Alpha12</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.test.integration.management.http.HttpGetMgmtOpsTestCase.java</file>
			<file type="M">org.jboss.as.test.integration.management.http.HttpDeploymentUploadUnitTestCase.java</file>
			<file type="M">org.jboss.as.domain.http.server.DomainApiHandler.java</file>
		</fixedFiles>
		<links>
			<link type="Dependency" description="blocks">1147</link>
		</links>
	</bug>
	<bug id="1928" opendate="2016-11-03 10:08:59" fixdate="2016-11-09 01:15:03" resolution="Done">
		<buginformation>
			<summary>:validate-operation operation produces unclear failure message; pollutes server log with exceptions</summary>
			<description>Operation :validate-operation produces java.util.NoSuchElementException when no parameter is passed to it, polluting the server log with warning with stack trace.
jboss-cli:






[standalone@localhost:9990 /] :validate-operation                                                  




{




    "outcome" =&amp;gt; "failed",




    "failure-description" =&amp;gt; "WFLYCTL0158: Operation handler failed: java.util.NoSuchElementException: No child &amp;amp;apos;value&amp;amp;apos; exists",




    "rolled-back" =&amp;gt; true




}












08:58:13,409 ERROR [org.jboss.as.controller.management-operation] (management-handler-thread - 17) WFLYCTL0013: Operation ("validate-operation") failed - address: ([]): java.util.NoSuchElementException: No child &amp;amp;apos;value&amp;amp;apos; exists




	at org.jboss.dmr.ModelValue.requireChild(ModelValue.java:387)




	at org.jboss.dmr.ObjectModelValue.requireChild(ObjectModelValue.java:302)




	at org.jboss.dmr.ModelNode.require(ModelNode.java:875)




	at org.jboss.as.controller.operations.common.ValidateOperationHandler.execute(ValidateOperationHandler.java:91)




	at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:940)




	at org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:683)




	at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:382)




	at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1363)




	at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:410)




	at org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:232)




	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.doExecute(ModelControllerClientOperationHandler.java:213)




	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.access$300(ModelControllerClientOperationHandler.java:136)




	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:157)




	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:153)




	at java.security.AccessController.doPrivileged(Native Method)




	at javax.security.auth.Subject.doAs(Subject.java:422)




	at org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:149)




	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1.execute(ModelControllerClientOperationHandler.java:153)




	at org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$1.doExecute(ManagementRequestContextImpl.java:70)




	at org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$AsyncTaskRunner.run(ManagementRequestContextImpl.java:160)




	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)




	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)




	at java.lang.Thread.run(Thread.java:745)




	at org.jboss.threads.JBossThread.run(JBossThread.java:320)






Upon passing this operation an illegal parameter, java.lang.IllegalArgumentException is produced instead of well formed failure message.
jboss-cli:






[standalone@localhost:9990 /] :validate-operation(value=nonsense)




{




    "outcome" =&amp;gt; "failed",




    "failure-description" =&amp;gt; "WFLYCTL0158: Operation handler failed: java.lang.IllegalArgumentException",




    "rolled-back" =&amp;gt; true




}






server.log:






09:01:10,367 ERROR [org.jboss.as.controller.management-operation] (management-handler-thread - 19) WFLYCTL0013: Operation ("validate-operation") failed - address: ([]): java.lang.IllegalArgumentException




	at org.jboss.dmr.ModelValue.getChild(ModelValue.java:115)




	at org.jboss.dmr.ModelNode.get(ModelNode.java:861)




	at org.jboss.as.controller.operations.common.ValidateOperationHandler.execute(ValidateOperationHandler.java:92)




	at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:940)




	at org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:683)




	at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:382)




	at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1363)




	at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:410)




	at org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:232)




	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.doExecute(ModelControllerClientOperationHandler.java:213)




	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.access$300(ModelControllerClientOperationHandler.java:136)




	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:157)




	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:153)




	at java.security.AccessController.doPrivileged(Native Method)




	at javax.security.auth.Subject.doAs(Subject.java:422)




	at org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:149)




	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1.execute(ModelControllerClientOperationHandler.java:153)




	at org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$1.doExecute(ManagementRequestContextImpl.java:70)




	at org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$AsyncTaskRunner.run(ManagementRequestContextImpl.java:160)




	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)




	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)




	at java.lang.Thread.run(Thread.java:745)




	at org.jboss.threads.JBossThread.run(JBossThread.java:320)






This usage, however, does not pollute the server log with warning with stack trace:
jboss-cli:






[standalone@localhost:9990 /] :validate-operation(value={"nonsense" =&amp;gt; "nonsense"})




Failed to handle &amp;amp;apos;:validate-operation(value={"nonsense" =&amp;gt; "nonsense"})&amp;amp;apos;: java.lang.IllegalArgumentException





</description>
			<version>3.0.0.Alpha11</version>
			<fixedVersion>3.0.0.Alpha12</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.operations.common.ValidateOperationHandler.java</file>
			<file type="M">org.jboss.as.controller.logging.ControllerLogger.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">6846</link>
		</links>
	</bug>
	<bug id="1959" opendate="2016-11-08 16:28:30" fixdate="2016-11-09 01:18:14" resolution="Done">
		<buginformation>
			<summary>Deploying an empty managed exploded deployment to server group in domain fails</summary>
			<description>Deploying an empty exploded deployment created on domain controller fails with the following:






    [domain@localhost:9990 /] /deployment=empty-deployment.jar:add(content=[{empty=true}])




    {




        "outcome" =&amp;gt; "success",




        "result" =&amp;gt; undefined,




        "server-groups" =&amp;gt; undefined




    }




    [domain@localhost:9990 /] /server-group=main-server-group/deployment=empty-deployment.jar:add()              




    {




        "outcome" =&amp;gt; "failed",




        "result" =&amp;gt; undefined,




        "failure-description" =&amp;gt; {"WFLYDC0074: Operation failed or was rolled back on all servers. Server failures:" =&amp;gt; {"server-group" =&amp;gt; {"main-server-group" =&amp;gt; {"host" =&amp;gt; {"master" =&amp;gt; {




            "server-one" =&amp;gt; "WFLYSRV0201: Cannot have more than one of [bytes, input-stream-index, hash, url, empty]",




            "server-two" =&amp;gt; "WFLYSRV0201: Cannot have more than one of [bytes, input-stream-index, hash, url, empty]"




        }}}}}},




        "rolled-back" =&amp;gt; true,




        "server-groups" =&amp;gt; {"main-server-group" =&amp;gt; {"host" =&amp;gt; {"master" =&amp;gt; {




            "server-one" =&amp;gt; {"response" =&amp;gt; {




                "outcome" =&amp;gt; "failed",




                "failure-description" =&amp;gt; "WFLYSRV0201: Cannot have more than one of [bytes, input-stream-index, hash, url, empty]",




                "rolled-back" =&amp;gt; true




            }},




            "server-two" =&amp;gt; {"response" =&amp;gt; {




                "outcome" =&amp;gt; "failed",




                "failure-description" =&amp;gt; "WFLYSRV0201: Cannot have more than one of [bytes, input-stream-index, hash, url, empty]",




                "rolled-back" =&amp;gt; true




            }}




        }}}}




    }





</description>
			<version>3.0.0.Alpha11</version>
			<fixedVersion>3.0.0.Alpha12</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.domain.controller.operations.coordination.ServerOperationResolver.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">6977</link>
		</links>
	</bug>
	<bug id="1918" opendate="2016-11-02 02:59:49" fixdate="2016-11-15 22:27:34" resolution="Done">
		<buginformation>
			<summary>re-enable quote parsing</summary>
			<description>The fix for WFCORE-1804 was committed here.
It has a side-effect that it disables quote parsing. Now the another fix which does not have the side-effect was committed in aesh. The following line in the previous fix should be removed, when the new aesh version is released (0.66.11 or 12?).
cli/src/main/java/org/jboss/as/cli/impl/CommandContextImpl.java:495






        settings.parsingQuotes(false);





</description>
			<version>3.0.0.Alpha11</version>
			<fixedVersion>3.0.0.Alpha13</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.cli.impl.CommandContextImpl.java</file>
			<file type="M">org.jboss.as.test.integration.management.cli.CliCommentsTestCase.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned to">6938</link>
			<link type="Related" description="relates to">1970</link>
		</links>
	</bug>
	<bug id="1731" opendate="2016-08-25 04:52:42" fixdate="2016-11-15 22:32:45" resolution="Done">
		<buginformation>
			<summary>Exception generated from command "connection-info" with embedded server</summary>
			<description>I started the embedded server and tried to obtain the connection information. An exception occurred:






[standalone@embedded /] connection-info




13:14:59,095 ERROR [org.jboss.as.controller.management-operation] (AeshProcess: 32) WFLYCTL0013: Operation ("whoami") failed - address: ([]): java.lang.IllegalArgumentException: newValue is null




        at org.jboss.dmr.ModelNode.set(ModelNode.java:499)




        at org.jboss.as.domain.management.security.WhoAmIOperation.execute(WhoAmIOperation.java:95)




        at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:890)




        at org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:659)




        at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:370)




        at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1344)




        at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:392)




        at org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:204)




        at org.jboss.as.controller.ModelControllerImpl$3.execute(ModelControllerImpl.java:659)




        at org.jboss.as.controller.ModelControllerImpl$3.execute(ModelControllerImpl.java:649)




        at org.jboss.as.controller.client.helpers.DelegatingModelControllerClient.execute(DelegatingModelControllerClient.java:63)




        at org.jboss.as.cli.embedded.ThreadContextsModelControllerClient.execute(ThreadContextsModelControllerClient.java:59)




        at org.jboss.as.cli.handlers.ConnectionInfoHandler.doHandle(ConnectionInfoHandler.java:74)




        at org.jboss.as.cli.handlers.CommandHandlerWithHelp.handle(CommandHandlerWithHelp.java:88)




        at org.jboss.as.cli.impl.CommandContextImpl.handle(CommandContextImpl.java:776)




        at org.jboss.as.cli.impl.CommandContextImpl.handleSafe(CommandContextImpl.java:799)




        at org.jboss.as.cli.impl.CommandContextImpl$2.execute(CommandContextImpl.java:412)




        at org.jboss.aesh.console.AeshProcess.run(AeshProcess.java:53)




        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)




        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)




        at java.lang.Thread.run(Thread.java:745)









WFLYCTL0158: Operation handler failed: java.lang.IllegalArgumentException: newValue is null




Failed to handle &amp;amp;apos;connection-info&amp;amp;apos;: java.lang.NullPointerException





</description>
			<version>3.0.0.Alpha5</version>
			<fixedVersion>3.0.0.Alpha13</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.cli.impl.CommandContextImpl.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">5752</link>
		</links>
	</bug>
	<bug id="1975" opendate="2016-11-11 20:22:38" fixdate="2016-11-17 22:18:02" resolution="Done">
		<buginformation>
			<summary>EmbeddedProcessFactory does not accept module pathes with multiple directories</summary>
			<description>The modulePath parameters passed to the org.wildfly.core.embedded.EmbeddedProcessFactory methods are are rejected if they they are actual paths with multiple directories. Only single directory names are accepted.
This is inconsistent with the normal operation of the server, with the naming of the parameter, as well as with the semantics of the module.path system property that it ultimately sets.</description>
			<version>3.0.0.Alpha12</version>
			<fixedVersion>3.0.0.Alpha13</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.wildfly.core.embedded.EmbeddedProcessFactory.java</file>
		</fixedFiles>
	</bug>
	<bug id="1980" opendate="2016-11-14 11:38:17" fixdate="2016-11-17 22:18:43" resolution="Done">
		<buginformation>
			<summary>Property file passed via CLI does not resolve expressions with relative path value in vault attributes</summary>
			<description>Property file passed via CLI with --properties option does not resolve expressions in EAP 7, where in EAP 6 it works fine. </description>
			<version>3.0.0.Alpha12</version>
			<fixedVersion>3.0.0.Alpha13</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.cli.parsing.test.PropertyReplacementTestCase.java</file>
			<file type="M">org.jboss.as.cli.ArgumentValueConverter.java</file>
			<file type="M">org.jboss.as.cli.util.CLIExpressionResolver.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">7092</link>
		</links>
	</bug>
	<bug id="1997" opendate="2016-11-16 03:11:58" fixdate="2016-11-17 22:26:19" resolution="Done">
		<buginformation>
			<summary>NPE when non-existent attribute name is used for list-add operation</summary>
			<description>When I use non-existent attribute name for &amp;amp;apos;list-add&amp;amp;apos; operation, I get following NPE in server.log:






12:44:24,150 ERROR [org.jboss.as.controller.management-operation] (management-handler-thread - 10) WFLYCTL0013: Operation ("list-add") failed - address: ([




    ("subsystem" =&amp;gt; "undertow"),




    ("server" =&amp;gt; "default-server"),




    ("https-listener" =&amp;gt; "https")




]): java.lang.NullPointerException




	at org.jboss.as.controller.operations.global.AbstractCollectionHandler.execute(AbstractCollectionHandler.java:92)




	at org.jboss.as.controller.operations.global.ListOperations$ListAddHandler.execute(ListOperations.java:108)




	at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:921)




	at org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:664)




	at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:383)




	at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1364)




	at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:416)




	at org.jboss.as.controller.ModelControllerImpl.lambda$execute$1(ModelControllerImpl.java:237)




	at org.wildfly.security.auth.client.PeerIdentity.runAsAll(PeerIdentity.java:431)




	at org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:206)




	at org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:237)




	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.doExecute(ModelControllerClientOperationHandler.java:217)




	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.access$400(ModelControllerClientOperationHandler.java:137)




	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:161)




	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:157)




	at org.wildfly.security.auth.client.PeerIdentity.runAsAll(PeerIdentity.java:464)




	at org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:225)




	at org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:185)




	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1.execute(ModelControllerClientOperationHandler.java:157)




	at org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$1.doExecute(ManagementRequestContextImpl.java:70)




	at org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$AsyncTaskRunner.run(ManagementRequestContextImpl.java:160)




	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)




	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)




	at java.lang.Thread.run(Thread.java:745)




	at org.jboss.threads.JBossThread.run(JBossThread.java:320)






Yeah - I understand that it is my fault that I provided bad command. But still, server should not respond with NPE. Ideally it should told me that provided list attribute does not exist for particular element and should finish operation with error.</description>
			<version>3.0.0.Alpha12</version>
			<fixedVersion>3.0.0.Alpha13</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.operations.global.AbstractCollectionHandler.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">7110</link>
		</links>
	</bug>
	<bug id="1992" opendate="2016-11-15 14:35:44" fixdate="2016-11-17 22:27:41" resolution="Done">
		<buginformation>
			<summary>CLI inconsistently parse {} in another object as UNDEFINED</summary>
			<description>CLI interprets {} as blank object in resource attribute (correct), but as UNDEFINED in object attribute. (in model parameter of performRuntime of ADD operation)






/subsystem=elytron/properties-realm=realm:add(users-properties={path=$SOME_PATH},groups-properties={})




=&amp;gt; groups-properties = OBJECT {}












/subsystem=elytron/ldap-realm=ldap-realm8:add(dir-context=local-ldap,identity-mapping={rdn-identifier=uid,otp-credential-mapper={}})




=&amp;gt; otp-credential-mapper=UNDEFINED





</description>
			<version>3.0.0.Alpha12</version>
			<fixedVersion>3.0.0.Alpha13</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.cli.parsing.test.ArgumentValueConverterTestCase.java</file>
			<file type="M">org.jboss.as.cli.parsing.arguments.ArgumentValueCallbackHandler.java</file>
		</fixedFiles>
		<links>
			<link type="Dependency" description="blocks">7437</link>
			<link type="Related" description="is related to">1983</link>
		</links>
	</bug>
	<bug id="2006" opendate="2016-11-17 13:37:11" fixdate="2016-11-17 22:28:57" resolution="Done">
		<buginformation>
			<summary>PatchMerger should copy specific module slot when merging content instead of all the slots</summary>
			<description>PatchMerger when merging content modification for a module copies all of the module slots instead of the one actually modified. This may lead to undesired content overwrite.</description>
			<version>3.0.0.Alpha12</version>
			<fixedVersion>3.0.0.Alpha13</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.patching.metadata.PatchMerger.java</file>
			<file type="M">org.jboss.as.test.patching.MergedCpWithSubmoduleTestCase.java</file>
			<file type="M">org.jboss.as.test.patching.ContentModificationUtils.java</file>
		</fixedFiles>
	</bug>
	<bug id="1922" opendate="2016-11-02 12:57:27" fixdate="2016-11-18 16:58:20" resolution="Done">
		<buginformation>
			<summary>Use a subsystem to manage configuration changes in the future</summary>
			<description>Currently configuration-changes are managed as a part of the &amp;amp;apos;kernel&amp;amp;apos; of WildFly Core. Moving this feature to a proper subsystem is more appropriate  as it would provide a nice way to deploy on managed servers according to a profile instead of a host.
Making this subsystem host-enabled we could also just configure it at a host level.</description>
			<version>3.0.0.Alpha11</version>
			<fixedVersion>3.0.0.Alpha13</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.domain.management.logging.DomainManagementLogger.java</file>
			<file type="M">org.wildfly.extension.core.management.CoreManagementRootResourceDefinition.java</file>
			<file type="M">org.jboss.as.domain.management.parsing.ManagementXml_5.java</file>
			<file type="M">org.wildfly.extension.core.management.CoreManagementExtension.java</file>
			<file type="M">org.wildfly.extension.core.management.CoreManagementSubsystemParser_1_0.java</file>
			<file type="M">org.jboss.as.test.integration.domain.ConfigurationChangesTestCase.java</file>
			<file type="D">org.jboss.as.domain.management.ConfigurationChangeResourceDefinition.java</file>
			<file type="M">org.jboss.as.domain.management.parsing.ManagementXml_4.java</file>
			<file type="M">org.wildfly.core.test.standalone.mgmt.api.core.ConfigurationChangesHistoryTestCase.java</file>
			<file type="M">org.jboss.as.test.integration.mgmt.access.ConfigurationChangesHistoryTestCase.java</file>
			<file type="M">org.jboss.as.domain.management.CoreManagementResourceDefinition.java</file>
			<file type="M">org.jboss.as.test.integration.mgmt.access.AbstractManagementInterfaceRbacTestCase.java</file>
		</fixedFiles>
		<links>
			<link type="Dependency" description="is blocked by">1827</link>
			<link type="Sequence" description="follows up on">1642</link>
		</links>
	</bug>
	<bug id="2013" opendate="2016-11-18 09:47:51" fixdate="2016-11-18 17:03:08" resolution="Done">
		<buginformation>
			<summary>Unable to access http management interface secured by legacy ldap realm</summary>
			<description>When http management interface is secured with legacy security realm using ldap, user is not prompted to provide credentials as should be in case of BASIC http authentication mechanism. Instead 403 http status is returned directly.
Users won&amp;amp;apos;t be able to migrate their current (6.4, 7.0) configuration to 7.1 without change.</description>
			<version>3.0.0.Alpha12</version>
			<fixedVersion>3.0.0.Alpha13</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.domain.management.security.SecurityRealmService.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">7393</link>
		</links>
	</bug>
	<bug id="2008" opendate="2016-11-17 14:07:57" fixdate="2016-11-18 19:40:20" resolution="Done">
		<buginformation>
			<summary>Unable to use path in input-stream-index argument in /core-service=patching:patch</summary>
			<description>File system paths should be allowed as arguments for
/core-service=patching:patch(input-stream-index=)</description>
			<version>3.0.0.Alpha12</version>
			<fixedVersion>3.0.0.Alpha13</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.patching.management.PatchResourceDefinition.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">7116</link>
		</links>
	</bug>
	<bug id="2017" opendate="2016-11-15 07:40:55" fixdate="2016-11-22 23:55:45" resolution="Done">
		<buginformation>
			<summary>embed-server does not start with standalone-elytron.xml</summary>
			<description>I am unable to start embed-server with standalone-elytron.xml 
1)./jboss-cli.sh
2) embed-server --std-out=echo -c=standalone-elytron.xml
3) server is missing org.wildfly.security.security-domain.ManagementDomain, which is however registered in elytron subsystem.
Starting ./standalone.sh -c=standalone-elytron.xml works fine.
Full log:






[mchoma@localhost bin]$ ./jboss-cli.sh 




You are disconnected at the moment. Type &amp;amp;apos;connect&amp;amp;apos; to connect to the server or &amp;amp;apos;help&amp;amp;apos; for the list of supported commands.




[disconnected /] embed-server --std-out=echo -c=standalone-elytron.xml




08:15:40,801 INFO  [org.jboss.modules] (AeshProcess: 1) JBoss Modules version 1.6.0.Beta3




08:15:40,845 INFO  [org.jboss.msc] (AeshProcess: 1) JBoss MSC version 1.2.7.Final-redhat-1




08:15:40,916 INFO  [org.jboss.as] (MSC service thread 1-6) WFLYSRV0049: JBoss EAP 7.1.0.Alpha1 (WildFly Core 3.0.0.Alpha12-redhat-1) starting




08:15:41,088 INFO  [org.jboss.as.domain.management] (MSC service thread 1-5) WFLYDM0136: Registered OpenSSL provider




08:15:41,804 INFO  [org.wildfly.security] (Controller Boot Thread) ELY00001: WildFly Elytron version 1.1.0.Beta13




08:15:41,805 INFO  [org.wildfly.extension.elytron] (Controller Boot Thread) WFLYELY00001: Activating Elytron Subsystem Elytron Version=1.1.0.Beta13, Subsystem Version=1.0.0.Alpha13




08:15:41,811 INFO  [org.jboss.as.controller.management-deprecated] (Controller Boot Thread) WFLYCTL0028: Attribute &amp;amp;apos;security-realm&amp;amp;apos; in the resource at address &amp;amp;apos;/subsystem=undertow/server=default-server/https-listener=https&amp;amp;apos; is deprecated, and may be removed in future version. See the attribute description in the output of the read-resource-description operation to learn more about the deprecation.




08:15:41,859 INFO  [org.jboss.as.patching] (MSC service thread 1-6) WFLYPAT0050: JBoss EAP cumulative patch ID is: base, one-off patches include: none




08:15:42,024 ERROR [org.jboss.as.controller.management-operation] (Controller Boot Thread) WFLYCTL0013: Operation ("add") failed - address: ([




    ("core-service" =&amp;gt; "management"),




    ("access" =&amp;gt; "identity")




]) - failure description: {




    "WFLYCTL0412: Required services that are not installed:" =&amp;gt; ["org.wildfly.security.security-domain.ManagementDomain"],




    "WFLYCTL0180: Services with missing/unavailable dependencies" =&amp;gt; ["org.wildfly.management.identity is missing [org.wildfly.security.security-domain.ManagementDomain]"]




}




08:16:19,546 INFO  [org.jboss.as] (MSC service thread 1-4) WFLYSRV0050: JBoss EAP 7.1.0.Alpha1 (WildFly Core 3.0.0.Alpha12-redhat-1) stopped in 3ms




Cannot start embedded server: WFLYEMB0021: Cannot start embedded process: java.lang.InterruptedException




[disconnected /] 





</description>
			<version>3.0.0.Alpha12</version>
			<fixedVersion>3.0.0.Alpha13</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.domain.management.access.AccessIdentityResourceDefinition.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">7276</link>
		</links>
	</bug>
	<bug id="2026" opendate="2016-11-21 19:24:22" fixdate="2016-11-22 23:58:47" resolution="Done">
		<buginformation>
			<summary>source-port is wrongly offsetted when configured to 0, i.e. ephemeral port; results in "Permission denied (Bind failed)"</summary>
			<description>There is a discrepancy between how 0 is handled.
XSD






        &amp;lt;xs:attribute name="source-port" type="xs:positiveInteger" use="optional"&amp;gt;






doesn&amp;amp;apos;t allow 0.
MODEL






            .setAllowExpression(true).setValidator(new IntRangeValidator(0, 65535, true, true))






allows 0.
IMPLEMENTATION






    public Integer getAbsoluteSourcePort() {




        if (this.sourcePort == null) {




            return null;




        }




        if (this.fixedSourcePort) {




            return this.sourcePort;




        }




        final int portOffset = this.socketBindingManager.getPortOffset();




        return this.sourcePort + portOffset;




    }






doesn&amp;amp;apos;t treat 0 at all, tests for null value only.
Example to reproduce e.g. with modcluster integration in core:






[standalone@localhost:9990 /] /socket-binding-group=standard-sockets/remote-destination-outbound-socket-binding=proxy1:add(port=9090,host=127.0.0.1,source-port=0




{




    "outcome" =&amp;gt; "success",




    "response-headers" =&amp;gt; {"process-state" =&amp;gt; "reload-required"}




}




[standalone@localhost:9990 /] /subsystem=modcluster/mod-cluster-config=configuration:write-attribute(name=proxies,value=[proxy1])




{




    "outcome" =&amp;gt; "success",




    "response-headers" =&amp;gt; {




        "operation-requires-reload" =&amp;gt; true,




        "process-state" =&amp;gt; "reload-required"




    }




}




[standalone@localhost:9990 /] :reload




{




    "outcome" =&amp;gt; "success",




    "result" =&amp;gt; undefined




}






Starting server with 






-Djboss.socket.binding.port-offset=100






yields






20:15:40,471 ERROR [org.jboss.modcluster] (UndertowEventHandlerAdapter - 1) MODCLUSTER000043: Failed to send INFO command to localhost/127.0.0.1:9090: Permission denied (Bind failed)





</description>
			<version>3.0.0.Alpha12</version>
			<fixedVersion>3.0.0.Alpha13</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.network.OutboundSocketBinding.java</file>
		</fixedFiles>
		<links>
			<link type="Dependency" description="blocks">7433</link>
			<link type="Dependency" description="blocks">6915</link>
		</links>
	</bug>
	<bug id="2021" opendate="2016-11-21 08:50:23" fixdate="2016-12-06 12:06:09" resolution="Done">
		<buginformation>
			<summary>"ls /socket-binding-group=*" should print proper error message</summary>
			<description>"ls /socket-binding-group=" should print proper error message. Similar operation "ls /subsystem=" print good error message.






[standalone@localhost:9990 /] ls /subsystem=*




{"WFLYCTL0062: Composite operation failed and was rolled back. Steps that failed:" =&amp;gt; {"Operation step-1" =&amp;gt; "WFLYCTL0030: No resource definition is registered for address [(\"subsystem\" =&amp;gt; \"*\")]"}}




[standalone@localhost:9990 /] ls /socket-binding-group=*




Exception for ls /socket-binding-group=*: java.lang.IllegalArgumentException




[standalone@localhost:9990 /]





</description>
			<version>3.0.0.Alpha12</version>
			<fixedVersion>3.0.0.Alpha15</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.cli.handlers.LsHandler.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">6953</link>
		</links>
	</bug>
	<bug id="2083" opendate="2016-12-05 14:02:40" fixdate="2016-12-09 15:38:05" resolution="Done">
		<buginformation>
			<summary>Reduce number of object allocations and memory footprint</summary>
			<description>Profiler shows that we lots of duplicate object allocations with empty arrays
It also shows that lots of our builder objects are kept in memory even after builder did its job and created the object.
There are also cases where inner classes should be static to prevent capturing object reference to be kept
and many other cases.</description>
			<version>3.0.0.Alpha14</version>
			<fixedVersion>3.0.0.Alpha15</fixedVersion>
			<type>Bug</type>
		</buginformation>
		<fixedFiles>
			<file type="M">org.jboss.as.controller.AttributeDefinition.java</file>
			<file type="M">org.jboss.as.controller.ResourceBuilderRoot.java</file>
			<file type="M">org.wildfly.extension.security.manager.SecurityManagerSubsystemParser_3_0.java</file>
			<file type="M">org.wildfly.extension.security.manager.SecurityManagerExtension.java</file>
			<file type="M">org.wildfly.extension.security.manager.SecurityManagerSubsystemParser_1_0.java</file>
			<file type="M">org.jboss.as.controller.AttributeMarshallers.java</file>
			<file type="M">org.jboss.as.controller.AbstractAttributeDefinitionBuilder.java</file>
			<file type="M">org.jboss.as.controller.SimpleOperationDefinitionBuilder.java</file>
			<file type="M">org.jboss.as.controller.registry.AbstractModelResource.java</file>
			<file type="M">org.jboss.as.controller.AttributeMarshaller.java</file>
			<file type="M">org.jboss.as.controller.SimpleResourceDefinition.java</file>
			<file type="M">org.jboss.as.controller.SimpleListAttributeDefinition.java</file>
			<file type="M">org.jboss.as.controller.SimpleOperationDefinition.java</file>
		</fixedFiles>
		<links>
			<link type="Cloners" description="cloned from">7728</link>
		</links>
	</bug>
</bugrepository>