<!-- 
RSS generated by JIRA (7.2.3#72005-sha1:73be91d2b96fc29303a7eb6820acf420e5d0ed65) at Tue Dec 06 16:56:43 EST 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.jboss.org/si/jira.issueviews:issue-xml/WFCORE-707/WFCORE-707.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>JBoss Issue Tracker</title>
    <link>https://issues.jboss.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>7.2.3</version>
        <build-number>72005</build-number>
        <build-date>06-10-2016</build-date>
    </build-info>

<item>
            <title>[WFCORE-707] System.out usage may cause deadlock</title>
                <link>https://issues.jboss.org/browse/WFCORE-707</link>
                <project id="12315422" key="WFCORE">WildFly Core</project>
                    <description>&lt;p&gt;We recently experienced a deadlock due to the logging subsystem, exactly as was detailed in this thread: &lt;a href=&quot;https://developer.jboss.org/thread/241453&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://developer.jboss.org/thread/241453&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Our concern is that since we include a fairly large number of third-party components, we can&apos;t guarantee they&apos;re not using System.out or System.err somewhere, potentially causing a thread deadlock.&lt;/p&gt;

&lt;p&gt;Are there plans to review this issue, or is the only way to guarantee not having such issues, to disable the logging subsystem?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12572459">WFCORE-707</key>
            <summary>System.out usage may cause deadlock</summary>
                <type id="1" iconUrl="https://issues.jboss.org/secure/viewavatar?size=xsmall&amp;avatarId=13263&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.jboss.org/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.jboss.org/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Done</resolution>
                                        <assignee username="jamezp">James Perkins</assignee>
                                    <reporter username="ansur">Bart Van Dosselaer</reporter>
                        <labels>
                    </labels>
                <created>Fri, 22 May 2015 03:32:01 -0400</created>
                <updated>Tue, 26 May 2015 11:42:36 -0400</updated>
                            <resolved>Tue, 26 May 2015 11:41:27 -0400</resolved>
                                                    <fixVersion>1.0.0.Beta6</fixVersion>
                                    <component>Logging</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13070519" author="jamezp" created="Fri, 22 May 2015 12:58:32 -0400"  >&lt;p&gt;Simply using &lt;tt&gt;System.out&lt;/tt&gt; or &lt;tt&gt;System.err&lt;/tt&gt; won&apos;t trigger a deadlock. The issue here was specific to the log4j &lt;tt&gt;ConsoleAppender&lt;/tt&gt; and has been fixed in WildFly 9.x. If you&apos;re seeing a deadlock with something other than the &lt;tt&gt;ConsoleAppender&lt;/tt&gt; please let me know. A thread dump would help too.&lt;/p&gt;</comment>
                            <comment id="13070862" author="ansur" created="Tue, 26 May 2015 03:30:38 -0400"  >&lt;p&gt;I&apos;ve added a Thread Dump in attachment. This was taken on Wildfly 8.2.0.Final&lt;br/&gt;
C.f. line 10193, here hibernate uses a System.out to log the statement.&lt;/p&gt;</comment>
                            <comment id="13070930" author="ctomc" created="Tue, 26 May 2015 05:59:02 -0400"  >&lt;p&gt;As James said, this was fixed in 9.x, so can you try with 9.0.0.CR1 if it still happens?&lt;/p&gt;</comment>
                            <comment id="13070964" author="matthieu.brouillard" created="Tue, 26 May 2015 07:18:21 -0400"  >&lt;p&gt;Do you know a specific commit in 9.X that solved the issue. We&apos;re stuck on 8.2 and probably will need to apply manually a patch (if possible of course). Thanks.&lt;/p&gt;</comment>
                            <comment id="13071145" author="jamezp" created="Tue, 26 May 2015 11:38:12 -0400"  >&lt;p&gt;As you can see in the thread dump the deadlock is happening because a &lt;tt&gt;ConsoleAppender&lt;/tt&gt; is being used. Ideally you&apos;d just not use a log4j &lt;tt&gt;ConsoleAppender&lt;/tt&gt;. Short for that &lt;a href=&quot;https://repository.jboss.org/nexus/content/repositories/releases/org/jboss/logmanager/log4j-jboss-logmanager/1.1.2.Final/log4j-jboss-logmanager-1.1.2.Final.jar&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;downloading&lt;/a&gt; the latest log4j-jboss-logmanager should fix this issue. You&apos;d need to add the library in &lt;tt&gt;modules/system/layers/base/org/jboss/log4j/logmanager/main/&lt;/tt&gt; and modify the &lt;tt&gt;modules/system/layers/base/org/jboss/log4j/logmanager/mainmodule.xml/&lt;/tt&gt; file to reflect the new resource name. &lt;/p&gt;</comment>
                            <comment id="13071148" author="ansur" created="Tue, 26 May 2015 11:42:36 -0400"  >&lt;p&gt;Many thanks for the explanation - I&apos;ll do just that.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310001">
                    <name>Related</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12569757">WFCORE-664</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12389796" name="threaddump.txt" size="725065" author="ansur" created="Tue, 26 May 2015 03:27:58 -0400"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310641" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Number of attachments</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310640" key="com.atlassian.jira.toolkit:comments">
                        <customfieldname>Number of comments</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311940" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1|hzwikn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310840" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>