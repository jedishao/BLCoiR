<!-- 
RSS generated by JIRA (7.2.3#72005-sha1:73be91d2b96fc29303a7eb6820acf420e5d0ed65) at Mon Dec 12 22:08:39 EST 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.jboss.org/si/jira.issueviews:issue-xml/SWARM-793/SWARM-793.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>JBoss Issue Tracker</title>
    <link>https://issues.jboss.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>7.2.3</version>
        <build-number>72005</build-number>
        <build-date>06-10-2016</build-date>
    </build-info>

<item>
            <title>[SWARM-793] Cannot add custom modules to WildFly Swarm using &lt;resource-root&gt; instead of &lt;artifact&gt; in the module.xml </title>
                <link>https://issues.jboss.org/browse/SWARM-793</link>
                <project id="12317020" key="SWARM">WildFly Swarm</project>
                    <description>&lt;p&gt;JDBC drivers (DB2, Oracle, etc) not available to WildFly Swarm when added as modules (like in WildFly/EAP) using &amp;lt;resource-root&amp;gt; instead of &amp;lt;artifact&amp;gt; in the module.xml.&lt;/p&gt;

&lt;p&gt;Custom module &quot;oracle.jdbc&quot; (module.xml and JAR) copied into Uber-JAR&apos;s &quot;modules\oracle\jdbc\main&quot; directory (there are also some default modules there - jboss, javax, etc) when module is configured like this: &lt;/p&gt;

&lt;p/&gt;
&lt;div id=&quot;syntaxplugin&quot; class=&quot;syntaxplugin&quot; style=&quot;border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;&quot;&gt;
&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; border=&quot;0&quot; width=&quot;100%&quot; style=&quot;font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;&quot;&gt;
		&lt;tbody &gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;   &amp;lt;resources&amp;gt;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;      &amp;lt;resource-root path=&quot;oracle-driver-ojdbc6.jar&quot;/&amp;gt;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;   &amp;lt;/resources&amp;gt;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
			&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;p/&gt;

&lt;p&gt;However, when running app (driver and datasource configured in the standalone.xml), I&apos;m getting this error:&lt;/p&gt;

&lt;p/&gt;
&lt;div id=&quot;syntaxplugin&quot; class=&quot;syntaxplugin&quot; style=&quot;border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;&quot;&gt;
&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; border=&quot;0&quot; width=&quot;100%&quot; style=&quot;font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;&quot;&gt;
		&lt;tbody &gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;  margin-top: 10px;   margin-bottom: 10px;  width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;[jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 21) WFLYJCA0086: Unable to find driver class name in &quot;oracle&quot; jar&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
			&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;p/&gt;

&lt;p&gt;However, when it is configured in module.xml as:&lt;/p&gt;

&lt;p/&gt;
&lt;div id=&quot;syntaxplugin&quot; class=&quot;syntaxplugin&quot; style=&quot;border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;&quot;&gt;
&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; border=&quot;0&quot; width=&quot;100%&quot; style=&quot;font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;&quot;&gt;
		&lt;tbody &gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;  margin-top: 10px;   margin-bottom: 10px;  width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;      &amp;lt;artifact name=&quot;com.hynnet:oracle-driver-ojdbc6:12.1.0.1&quot;/&amp;gt;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
			&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;p/&gt;

&lt;p&gt;JAR is copied to &quot;m2repo\com\hynnet\oracle-driver-ojdbc6\12.1.0.1&quot; directory of Uber-JAR and driver was successfully loaded.&lt;/p&gt;

&lt;p&gt;Looks like WFS adding to classpath only what is in &quot;m2repo&quot;, but not the &quot;oracle&quot; module in &quot;modules&quot; directory.&lt;br/&gt;
Am I missing some command-line parameter to define location of the custom modules, like &quot;JBOSS_MODULEPATH&quot; for JBoss EAP6?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12656802">SWARM-793</key>
            <summary>Cannot add custom modules to WildFly Swarm using &lt;resource-root&gt; instead of &lt;artifact&gt; in the module.xml </summary>
                <type id="1" iconUrl="https://issues.jboss.org/secure/viewavatar?size=xsmall&amp;avatarId=13263&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.jboss.org/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.jboss.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Done</resolution>
                                        <assignee username="bob.mcwhirter">Bob McWhirter</assignee>
                                    <reporter username="JFlint">Andrey Yamshchikov</reporter>
                        <labels>
                    </labels>
                <created>Tue, 25 Oct 2016 15:04:09 -0400</created>
                <updated>Thu, 8 Dec 2016 09:30:40 -0500</updated>
                            <resolved>Wed, 7 Dec 2016 18:35:16 -0500</resolved>
                                    <version>2016.10.0</version>
                                    <fixVersion>2017.1.0</fixVersion>
                                    <component>core</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13311724" author="kenfinni" created="Tue, 25 Oct 2016 16:08:18 -0400"  >&lt;p&gt;If I&apos;m understanding, I think the issue is that when adding a custom module into `src/main/resources/modules&apos; that uses `resource-root` the actual JAR that&apos;s present there is not added to the M2REPO.&lt;/p&gt;

&lt;p&gt;Is that correct?&lt;/p&gt;</comment>
                            <comment id="13312118" author="jflint" created="Wed, 26 Oct 2016 08:15:46 -0400"  >&lt;p&gt;Yes, that JAR only added to &quot;modules&quot; directory of UberJar, which seems reasonable, since JAR is not coming from Maven repo.&lt;br/&gt;
BTW, Swarm also added to this directory some other modules, like &quot;org/jboss/modules&quot;, &quot;javax/api/modules&quot;, etc. &lt;br/&gt;
Not sure if they are on classpath and used by the WF at all.&lt;/p&gt;</comment>
                            <comment id="13327368" author="dansiviter" created="Wed, 23 Nov 2016 12:36:13 -0500"  >&lt;p&gt;Yea, similar issue here. I want to use &lt;tt&gt;integratedSecurity&lt;/tt&gt; of a SQLServer driver (and therefore the &lt;tt&gt;/lib&lt;/tt&gt; directory is important for native library) however, it&apos;s not even loading in the driver. When I change to use the &lt;tt&gt;artifact&lt;/tt&gt; approach it still doesn&apos;t locate the &lt;tt&gt;/lib&lt;/tt&gt; directory like it would on JBoss 6.4.&lt;/p&gt;</comment>
                            <comment id="13334906" author="bob.mcwhirter" created="Tue, 6 Dec 2016 15:50:28 -0500"  >&lt;p&gt;Reformatted for readability.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.jboss.org/secure/ViewProfile.jspa?name=JFlint&quot; class=&quot;user-hover&quot; rel=&quot;JFlint&quot;&gt;Andrey Yamshchikov&lt;/a&gt; I&apos;m looking into this now.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.jboss.org/secure/ViewProfile.jspa?name=dansiviter&quot; class=&quot;user-hover&quot; rel=&quot;dansiviter&quot;&gt;Dan Siviter&lt;/a&gt; Can you try out the BYO JDBC stuff, and let me know if we&apos;re missing something? I&apos;m unfamiliar with the &lt;tt&gt;lib/&lt;/tt&gt; directory bits you refer to.  If you could open a separate issue regarding that, that&apos;d be lovely.  Thanks!&lt;/p&gt;</comment>
                            <comment id="13336001" author="bob.mcwhirter" created="Thu, 8 Dec 2016 09:30:40 -0500"  >&lt;p&gt;I have added some tests to the recently-merged PR.&lt;/p&gt;

&lt;p&gt;In these tests, I was unable to replicate any failure related to a &lt;tt&gt;lib/&lt;/tt&gt; directory as a &lt;tt&gt;resource-root&lt;/tt&gt;, at least for non-&lt;tt&gt;.class&lt;/tt&gt; resources.&lt;/p&gt;

&lt;p&gt;Using a &lt;tt&gt;module.xml&lt;/tt&gt; shaped like this:&lt;/p&gt;

&lt;p/&gt;
&lt;div id=&quot;syntaxplugin&quot; class=&quot;syntaxplugin&quot; style=&quot;border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;&quot;&gt;
&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; border=&quot;0&quot; width=&quot;100%&quot; style=&quot;font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;&quot;&gt;
		&lt;tbody &gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;&amp;lt;module xmlns=&quot;urn:jboss:module:1.3&quot; name=&quot;com.mycorp.mymodule&quot;&amp;gt;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&amp;nbsp;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;  &amp;lt;resources&amp;gt;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;    &amp;lt;resource-root path=&quot;./lib&quot;/&amp;gt;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;    &amp;lt;resource-root path=&quot;myjar.jar&quot;/&amp;gt;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;  &amp;lt;/resources&amp;gt;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&amp;nbsp;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;&amp;lt;/module&amp;gt;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
			&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;p/&gt;

&lt;p&gt;And the test-case here: &lt;a href=&quot;https://github.com/wildfly-swarm/wildfly-swarm/blob/master/testsuite/testsuite-modules/src/test/java/org/wildfly/swarm/misc/modules/ArqModulesTest.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/wildfly-swarm/wildfly-swarm/blob/master/testsuite/testsuite-modules/src/test/java/org/wildfly/swarm/misc/modules/ArqModulesTest.java&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I could successfully load directory-based resources from that module&apos;s classloader.&lt;/p&gt;

&lt;p&gt;On the other hand, I did confirm that using a &lt;tt&gt;.jar&lt;/tt&gt; as a &lt;tt&gt;resource-root&lt;/tt&gt; was not working, and have implemented fixes for that, also demonstrated in the above &lt;tt&gt;module.xml&lt;/tt&gt; and test-case.&lt;/p&gt;

&lt;p&gt;If you find additional problems or I&apos;ve failed to understand the &lt;tt&gt;lib/&lt;/tt&gt; issue, please feel free to open additional JIRA issues.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12311140" key="com.pyxis.greenhopper.jira:gh-epic-link">
                        <customfieldname>Epic Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>SWARM-789</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310641" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Number of attachments</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310640" key="com.atlassian.jira.toolkit:comments">
                        <customfieldname>Number of comments</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311940" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1|i0au9a:xi</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310840" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310940" key="com.pyxis.greenhopper.jira:gh-sprint">
                        <customfieldname>Sprint</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="5494">2016-Dec-A</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>