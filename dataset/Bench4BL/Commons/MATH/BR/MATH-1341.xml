<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sat Nov 19 23:28:23 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/MATH-1341/MATH-1341.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[MATH-1341] &quot;RandomDataGenerator&quot; is brittle</title>
                <link>https://issues.apache.org/jira/browse/MATH-1341</link>
                <project id="12310485" key="MATH">Commons Math</project>
                    <description>&lt;p&gt;Class &lt;tt&gt;RandomDataGenerator&lt;/tt&gt; can easily be misused as it advertizes a method to access its internal RNG (which is &lt;em&gt;not&lt;/em&gt; thread-safe).&lt;/p&gt;

&lt;p&gt;The class is also a mixed bag of &quot;data generators&quot; that are either &quot;secure&quot; or not.&lt;br/&gt;
Moreover it uses the &quot;lazy initialization&quot; pattern (for the RNG instance) solely because of this duality; otherwise users that need one or the other form of data generation will obviously always use the RNG since all data generation methods need it.&lt;br/&gt;
This entails also a performance hit (albeit tiny) as each call checks whether the RNG has been initialized already.&lt;br/&gt;
The clean solution would be to separate the two types of data generation (secure vs not) into different classes.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12949857">MATH-1341</key>
            <summary>&quot;RandomDataGenerator&quot; is brittle</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="erans">Gilles</reporter>
                        <labels>
                            <label>API</label>
                            <label>cleanup</label>
                            <label>deprecation</label>
                            <label>thread-safety</label>
                    </labels>
                <created>Mon, 14 Mar 2016 11:45:17 +0000</created>
                <updated>Sun, 29 May 2016 21:06:15 +0000</updated>
                            <resolved>Sun, 29 May 2016 21:06:15 +0000</resolved>
                                                    <fixVersion>4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                            <comments>
                            <comment id="15203006" author="erans" created="Sat, 19 Mar 2016 23:25:15 +0000"  >&lt;p&gt;Another performance hit: For each sampling, a new distribution object is created.&lt;br/&gt;
This will be compounded with the new sampling API (&lt;a href=&quot;https://issues.apache.org/jira/browse/MATH-1158&quot; title=&quot;Factory method to provide sampling from distributions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MATH-1158&quot;&gt;&lt;del&gt;MATH-1158&lt;/del&gt;&lt;/a&gt;) where a &lt;tt&gt;Sampler&lt;/tt&gt; object will also be created.&lt;/p&gt;

&lt;p&gt;If a user needs sampling from a distribution, is there any advantage to use &lt;tt&gt;RandomDataGenerator&lt;/tt&gt; (over instantiating the appropriate &lt;tt&gt;Sampler&lt;/tt&gt; instance)?&lt;br/&gt;
Even if an application might have some use of the syntactic sugar which this class provides, is there any advantage for CM to provide an alternative sampling API that is not efficient?&lt;/p&gt;</comment>
                            <comment id="15282686" author="erans" created="Fri, 13 May 2016 13:26:28 +0000"  >&lt;p&gt;I attached a new &lt;tt&gt;RandomUtils&lt;/tt&gt; class which I propose as a replacement for &lt;tt&gt;RandomDataGenerator&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Having removed all methods that are &lt;em&gt;trivial&lt;/em&gt; syntactic sugar for the sampler API in &lt;tt&gt;o.a.c.m.distribution&lt;/tt&gt;, the number of lines in &lt;tt&gt;RandomUtils&lt;/tt&gt; is ~60% of the old &lt;tt&gt;RandomDataGenerator&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;The &quot;nextSecureXxx&quot; methods were also removed as most were identical to their &quot;non-secure&quot; counterpart, except for the underlying RNG (secure vs not). In &lt;tt&gt;RandomUtils&lt;/tt&gt;, secure versions are thus &quot;automatically&quot; achieved by passing a secure RNG to the class&apos;s constructor.&lt;/p&gt;

&lt;p&gt;Methods &lt;tt&gt;nextHexString&lt;/tt&gt; and &lt;tt&gt;nextSecureHexString&lt;/tt&gt; were different in that the latter uses a &lt;tt&gt;MessageDigest&lt;/tt&gt; object in its processing.&lt;br/&gt;
The two codes were merged in a single method and a boolean argument selects one or the other behaviour.&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;RandomUtils&lt;/tt&gt; also obsoletes class &lt;tt&gt;RandomGeneratorFactory&lt;/tt&gt; whose functionality is replaced by the following factory method:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;public static UniformRandomProvider asUniformRandomProvider(final Random rng) {
  // ....
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Old &quot;features&quot; intentionally left out:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Lazy initialization (if you don&apos;t need the RNG, you don&apos;t need an instance of this class)&lt;/li&gt;
	&lt;li&gt;Reseeding of the RNG (if necessary - although a bad idea - the caller can hold a reference to the &lt;tt&gt;Random&lt;/tt&gt; object being wrapped, and call &quot;setSeed&quot; on it)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;Please have a look, and let me know of any functionality I may have missed to port to the new class.&lt;/p&gt;</comment>
                            <comment id="15282935" author="luc" created="Fri, 13 May 2016 18:10:48 +0000"  >&lt;p&gt;Seems good to me.&lt;/p&gt;</comment>
                            <comment id="15284010" author="erans" created="Sun, 15 May 2016 23:31:13 +0000"  >&lt;p&gt;Code available in branch &quot;feature-&lt;a href=&quot;https://issues.apache.org/jira/browse/MATH-1341&quot; title=&quot;&amp;quot;RandomDataGenerator&amp;quot; is brittle&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MATH-1341&quot;&gt;&lt;del&gt;MATH-1341&lt;/del&gt;&lt;/a&gt;&quot;.&lt;/p&gt;</comment>
                            <comment id="15286710" author="erans" created="Tue, 17 May 2016 14:24:45 +0000"  >&lt;p&gt;Code merge into branch &quot;develop&quot;.&lt;/p&gt;</comment>
                            <comment id="15293376" author="erans" created="Fri, 20 May 2016 13:35:09 +0000"  >&lt;p&gt;Class &lt;tt&gt;RandomDataGenerator&lt;/tt&gt; removed in branch &quot;task-&lt;a href=&quot;https://issues.apache.org/jira/browse/MATH-1366&quot; title=&quot;Remove obsolete classes in &amp;quot;o.a.c.m.random&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MATH-1366&quot;&gt;&lt;del&gt;MATH-1366&lt;/del&gt;&lt;/a&gt;&quot;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12936339">MATH-1319</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12803859" name="RandomUtils.java" size="19852" author="erans" created="Fri, 13 May 2016 13:26:28 +0000"/>
                    </attachments>
                <subtasks>
                            <subtask id="12969956">MATH-1363</subtask>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 13 May 2016 18:10:48 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            26 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ulif:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>