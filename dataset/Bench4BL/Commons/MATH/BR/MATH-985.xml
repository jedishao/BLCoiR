<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Nov 18 22:19:45 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/MATH-985/MATH-985.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[MATH-985] BicubicSpline interpolation returns unexpected values (BicubicSplineInterpolator/BicubicSplineInterpolationFunction)</title>
                <link>https://issues.apache.org/jira/browse/MATH-985</link>
                <project id="12310485" key="MATH">Commons Math</project>
                    <description>&lt;p&gt;I&apos;ve been testing out the Tricubic spline functions, and have been getting some strange values.  I dug down a bit, and it seems like they start at the Bicubic level.  SplineInterpolator/PolynomialSplineFunction seem to be returning correct values.  I set up a block of data that increases linearly, so you&apos;d expect the interpolated values to follow the same trend, except the values tend to overshoot to half the distance between knot points, and then undershoot for the remaining half.  Probably the easiest thing would be to show some tests.  First - 1D which works fine:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;SplineTest.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.math3.analysis.interpolation.SplineInterpolator;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.math3.analysis.polynomials.PolynomialSplineFunction;

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; class SplineTest {

	&lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt;[] x = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt;[]{.52,.54,.56,.58,.6};
	&lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt;[] y = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt;[]{76,77,78,79,80};
	
	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args){
		SplineTest st = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SplineTest();
		st.go();
	}
	
	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void go(){
		SplineInterpolator si = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SplineInterpolator();
		PolynomialSplineFunction sf = si.interpolate(x, y);
		
		&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(sf.value(0.52));
		&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(sf.value(0.5225));
		&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(sf.value(0.525));
		&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(sf.value(0.5275));
		&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(sf.value(0.53));
		&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(sf.value(0.5325));
		&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(sf.value(0.535));
		&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(sf.value(0.5375));
		&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(sf.value(0.54));
		&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(sf.value(0.5425));
		&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(sf.value(0.545));
		&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(sf.value(0.5475));
		&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(sf.value(0.55));
		&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(sf.value(0.5525));
		&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(sf.value(0.555));
		&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(sf.value(0.5575));
		&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(sf.value(0.56));
	}
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and next, 2D which doesn&apos;t:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;BicubicSplineTest.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.math3.analysis.interpolation.BicubicSplineInterpolatingFunction;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.math3.analysis.interpolation.BicubicSplineInterpolator;

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; class BicubicSplineTest {

	&lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt;[] x = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt;[]{0,1,2};
	&lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt;[] y = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt;[]{.52,.54,.56,.58,.6};
	&lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt;[] v1 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt;[]{76,77,78,79,80};
	&lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt;[][] v2 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt;[][]{v1,v1,v1};
	
	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args){
		BicubicSplineTest bt = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BicubicSplineTest();
		bt.go();
	}
	
	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void go(){
		BicubicSplineInterpolator bi = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BicubicSplineInterpolator();
		BicubicSplineInterpolatingFunction bf = bi.interpolate(x, y, v2);
		
		&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(bf.value(1, 0.52));
		&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(bf.value(1, 0.5225));
		&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(bf.value(1, 0.525));
		&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(bf.value(1, 0.5275));
		&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(bf.value(1, 0.53));
		&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(bf.value(1, 0.5325));
		&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(bf.value(1, 0.535));
		&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(bf.value(1, 0.5375));
		&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(bf.value(1, 0.54));
		&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(bf.value(1, 0.5425));
		&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(bf.value(1, 0.545));
		&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(bf.value(1, 0.5475));
		&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(bf.value(1, 0.55));
		&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(bf.value(1, 0.5525));
		&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(bf.value(1, 0.555));
		&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(bf.value(1, 0.5575));
		&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(bf.value(1, 0.56));
	}
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The data points increase from 76 to 80 in a linear way.  Incrementing by 1/8 the distance to the next point, the 1D spline returns:&lt;/p&gt;

&lt;p&gt;76.0&lt;br/&gt;
76.125&lt;br/&gt;
76.25&lt;br/&gt;
76.375&lt;br/&gt;
76.5&lt;br/&gt;
76.625&lt;br/&gt;
76.75&lt;br/&gt;
76.875&lt;br/&gt;
77.0&lt;br/&gt;
77.125&lt;br/&gt;
77.25&lt;br/&gt;
77.375&lt;br/&gt;
77.5&lt;br/&gt;
77.625&lt;br/&gt;
77.75&lt;br/&gt;
77.875&lt;br/&gt;
78.0&lt;/p&gt;

&lt;p&gt;The 2D spline returns:&lt;/p&gt;

&lt;p&gt;76.0&lt;br/&gt;
80.14453124999996&lt;br/&gt;
80.84375000000003&lt;br/&gt;
79.24609375000007&lt;br/&gt;
76.50000000000003&lt;br/&gt;
73.75390625000007&lt;br/&gt;
72.15625000000001&lt;br/&gt;
72.85546874999996&lt;br/&gt;
76.99999999999997&lt;br/&gt;
81.14453124999993&lt;br/&gt;
81.84374999999997&lt;br/&gt;
80.24609375000006&lt;br/&gt;
77.50000000000003&lt;br/&gt;
74.75390625000009&lt;br/&gt;
73.15625000000004&lt;br/&gt;
73.85546874999997&lt;br/&gt;
78.0&lt;/p&gt;

&lt;p&gt;Even though it&apos;s still effectively a 1D problem.  I&apos;m not sure exactly what&apos;s causing it - maybe something when multiplying the coefficients, but thought I should flag it.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows 7 64 bit, 64 bit JVM&lt;/p&gt;</environment>
        <key id="12649848">MATH-985</key>
            <summary>BicubicSpline interpolation returns unexpected values (BicubicSplineInterpolator/BicubicSplineInterpolationFunction)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jkool">Johnathan Kool</reporter>
                        <labels>
                    </labels>
                <created>Wed, 29 May 2013 06:01:28 +0000</created>
                <updated>Tue, 16 Sep 2014 18:30:56 +0000</updated>
                            <resolved>Sun, 26 Jan 2014 15:58:41 +0000</resolved>
                                    <version>3.1.1</version>
                                    <fixVersion>3.3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13671314" author="erans" created="Fri, 31 May 2013 10:45:48 +0000"  >&lt;blockquote&gt;&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;...&amp;#93;&lt;/span&gt; thought I should flag it.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Thanks a lot!&lt;/p&gt;

&lt;p&gt;There was an indexing bug (I&apos;m sorry for that) which is now fixed (revision 1488145).&lt;/p&gt;</comment>
                            <comment id="13671331" author="erans" created="Fri, 31 May 2013 10:57:08 +0000"  >&lt;p&gt;I&apos;ve attached a plot of your example, comparing the old and new code.&lt;/p&gt;

&lt;p&gt;There are still discrepancies with the original data, but this happens &quot;only&quot; on the border of the interpolation range. I don&apos;t know whether this is expected or not.&lt;/p&gt;

&lt;p&gt;I&apos;m going to replace the unit tests that now fail; that they succeeded with a buggy code proves their uselessness &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;. You are warmly welcome to suggest some tests that properly demonstrate expectations from this algorithm.&lt;/p&gt;</comment>
                            <comment id="13671366" author="erans" created="Fri, 31 May 2013 11:36:31 +0000"  >&lt;p&gt;Unit test classes that currently contain &quot;@Ignore&quot;d tests (which should be replaced):&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;BicubicSplineInterpolatingFunctionTest&lt;/li&gt;
	&lt;li&gt;TricubicSplineInterpolatorTest&lt;/li&gt;
	&lt;li&gt;BicubicSplineInterpolatorTest&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13671528" author="erans" created="Fri, 31 May 2013 14:45:19 +0000"  >&lt;p&gt;New unit tests in &quot;BicubicSplineInterpolatingFunctionTest&quot; (r1488256).&lt;/p&gt;

&lt;p&gt;TBD is whether the tolerances for the tests to pass (i.e. the error on the interpolated values) are correct for this kind of interpolation.&lt;/p&gt;</comment>
                            <comment id="13671858" author="erans" created="Fri, 31 May 2013 22:20:04 +0000"  >&lt;p&gt;New unit tests in &quot;BicubicSplineInterpolatorTest&quot; (r1488417).&lt;/p&gt;</comment>
                            <comment id="13879299" author="tn" created="Wed, 22 Jan 2014 22:46:24 +0000"  >&lt;p&gt;Can this issue be closed?&lt;/p&gt;</comment>
                            <comment id="13879306" author="jkool" created="Wed, 22 Jan 2014 22:50:20 +0000"  >&lt;p&gt;I believe so - it&apos;s been a while since I checked it.  I&apos;d say go ahead and close it.  If anything else crops up, I&apos;ll generate a new ticket.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;

&lt;p&gt;Dr. Johnathan Kool &lt;br/&gt;
Marine Ecologist  |  Coastal, Marine and Climate Change&lt;br/&gt;
Environmental Geoscience Division  |  GEOSCIENCE AUSTRALIA&lt;/p&gt;</comment>
                            <comment id="13882331" author="tn" created="Sun, 26 Jan 2014 15:58:41 +0000"  >&lt;p&gt;Added changelog entry in r1561510.&lt;/p&gt;

&lt;p&gt;For the remaining tests which are ignored atm I would suggest to create a separate ticket.&lt;/p&gt;</comment>
                            <comment id="14001857" author="luc" created="Mon, 19 May 2014 15:13:33 +0000"  >&lt;p&gt;Closing all resolved issue now available in released 3.3 version.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12726859">MATH-1138</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12585581" name="math985.png" size="58075" author="erans" created="Fri, 31 May 2013 10:57:08 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 31 May 2013 10:45:48 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>330175</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 26 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1kyof:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>330509</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>