<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sat Nov 19 20:52:26 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/COLLECTIONS-105/COLLECTIONS-105.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[COLLECTIONS-105] StaticBucketMap.remove(Object) incorrectly handles key comparison</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-105</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;I&apos;ve found a bug in the StaticBucketMap class, the remove(Object)&lt;br/&gt;
method:&lt;/p&gt;

&lt;p&gt;    /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Implements 
{@link Map#remove(Object)}
&lt;p&gt;.&lt;br/&gt;
     */&lt;br/&gt;
    public Object remove( Object key )&lt;br/&gt;
    {&lt;br/&gt;
        int hash = getHash( key );&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;        synchronized( m_locks[ hash ] )&lt;br/&gt;
        {&lt;br/&gt;
            Node n = m_buckets[ hash ];&lt;br/&gt;
            Node prev = null;&lt;/p&gt;

&lt;p&gt;            while( n != null )&lt;br/&gt;
            {&lt;br/&gt;
HERE&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;   if( n.key == null || ( n.key != null &amp;amp;&amp;amp; n.key.equals(&lt;br/&gt;
key ) ) )  &amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&lt;br/&gt;
                {&lt;br/&gt;
                    // Remove this node from the linked list of nodes.&lt;br/&gt;
                    if( null == prev )&lt;/p&gt;
                    {
                        // This node was the head, set the next node to
be the new head.
                        m_buckets[ hash ] = n.next;
                    }
&lt;p&gt;                    else&lt;/p&gt;
                    {
                        // Set the next node of the previous node to be
the node after this one.
                        prev.next = n.next;
                    }
&lt;p&gt;                    m_locks&lt;span class=&quot;error&quot;&gt;&amp;#91;hash&amp;#93;&lt;/span&gt;.size--;&lt;br/&gt;
                    return n.value;&lt;br/&gt;
                }&lt;/p&gt;

&lt;p&gt;                prev = n;&lt;br/&gt;
                n = n.next;&lt;br/&gt;
            }&lt;br/&gt;
        }&lt;/p&gt;

&lt;p&gt;        return null;&lt;br/&gt;
    }&lt;/p&gt;

&lt;p&gt;The test is:&lt;/p&gt;

&lt;p&gt;                if( n.key == null || ( n.key != null &amp;amp;&amp;amp; n.key.equals(&lt;br/&gt;
key ) ) )&lt;/p&gt;

&lt;p&gt;should be:&lt;/p&gt;

&lt;p&gt;                if( n.key == key || ( n.key != null &amp;amp;&amp;amp; n.key.equals( key&lt;br/&gt;
) ) )&lt;/p&gt;

&lt;p&gt;which is how it works in get(Object), containsKey(Object) etc. and which&lt;br/&gt;
is correct. We have a match if the keys match using == OR if they are&lt;br/&gt;
equal according to equals().&lt;/p&gt;</description>
                <environment>&lt;p&gt;Operating System: other&lt;br/&gt;
Platform: Other&lt;/p&gt;</environment>
        <key id="12340558">COLLECTIONS-105</key>
            <summary>StaticBucketMap.remove(Object) incorrectly handles key comparison</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="leo.sutic@inspireinfrastructure.com">leo.sutic</reporter>
                        <labels>
                    </labels>
                <created>Tue, 18 Feb 2003 02:15:34 +0000</created>
                <updated>Sat, 15 Mar 2008 21:36:01 +0000</updated>
                            <resolved>Sat, 15 Mar 2008 21:36:01 +0000</resolved>
                                    <version>2.1</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12403662" author="scolebourne@joda.org" created="Sun, 23 Feb 2003 00:37:05 +0000"  >&lt;p&gt;Fixed in CVS head, thanks&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_10010" key="com.atlassian.jira.plugin.system.customfieldtypes:importid">
                        <customfieldname>Bugzilla Id</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>17139</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 23 Feb 2003 00:37:05 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18893</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 40 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0sjan:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164603</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>