<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Thu Dec 01 20:43:13 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/CRYPTO-89/CRYPTO-89.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[CRYPTO-89] more robust native code to eliminate memory leak</title>
                <link>https://issues.apache.org/jira/browse/CRYPTO-89</link>
                <project id="12320024" key="CRYPTO">Commons Crypto</project>
                    <description>&lt;p&gt;currently, when handling error in the native code, some resource allocated is not deallocated.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    input_bytes = (unsigned &lt;span class=&quot;code-object&quot;&gt;char&lt;/span&gt; *) (*env)-&amp;gt;GetByteArrayElements(env, input, 0);  &lt;span class=&quot;code-comment&quot;&gt;//in some &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt;, it is not deallocated&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;the byte array may accupy lots of memory.  this can cause serious memory leak in the long-running server&lt;/p&gt;</description>
                <environment></environment>
        <key id="12982194">CRYPTO-89</key>
            <summary>more robust native code to eliminate memory leak</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kexianda">Xianda Ke</assignee>
                                    <reporter username="kexianda">Xianda Ke</reporter>
                        <labels>
                    </labels>
                <created>Thu, 23 Jun 2016 03:35:20 +0000</created>
                <updated>Wed, 29 Jun 2016 05:54:33 +0000</updated>
                            <resolved>Wed, 29 Jun 2016 05:54:33 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="15345754" author="kexianda" created="Thu, 23 Jun 2016 05:13:05 +0000"  >&lt;p&gt;C doesn&apos;t support exceptions, try-finally blocks, or RAII at all. A typical approach is to separate releasing of resources at the end of the function and jump there with gotos in the case of error. This way the cleanup code need not be duplicated.&lt;/p&gt;</comment>
                            <comment id="15345950" author="kexianda" created="Thu, 23 Jun 2016 07:20:55 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;OpensslNative.c&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;

Java_org_apache_commons_crypto_cipher_OpensslNative_init () {

  &lt;span class=&quot;code-comment&quot;&gt;// ugly &amp;amp; hard to be understood
&lt;/span&gt;  &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; 0, the context pointer will be reset as NULL, and the context has not change to be deallocated. 
&lt;/span&gt;  &lt;span class=&quot;code-comment&quot;&gt;// memory leak!
&lt;/span&gt;  jbyte *jIv = (*env)-&amp;gt;GetByteArrayElements(env, iv, NULL);
  &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (jIv == NULL) {
    (*env)-&amp;gt;ReleaseByteArrayElements(env, key, jKey, 0);
    THROW(env, &lt;span class=&quot;code-quote&quot;&gt;&quot;java/lang/InternalError&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;Cannot get bytes array &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; iv.&quot;&lt;/span&gt;);
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; (jlong)0;
  }

    &lt;span class=&quot;code-comment&quot;&gt;// potential memory leak! 
&lt;/span&gt;   &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!(alg == AES_CTR || alg == AES_CBC)) {
    THROW(env, &lt;span class=&quot;code-quote&quot;&gt;&quot;java/security/NoSuchAlgorithmException&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;The algorithm is not supported.&quot;&lt;/span&gt;);
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; (jlong)0;
  }

  &lt;span class=&quot;code-comment&quot;&gt;// Error is not handled
&lt;/span&gt;  &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (padding == NOPADDING) {
    dlsym_EVP_CIPHER_CTX_set_padding(context, 0);
  } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (padding == PKCS5PADDING) {
    dlsym_EVP_CIPHER_CTX_set_padding(context, 1);
  }
}
&lt;span class=&quot;code-comment&quot;&gt;//...&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15345989" author="kexianda" created="Thu, 23 Jun 2016 07:45:02 +0000"  >&lt;p&gt;GitHub PR: &lt;a href=&quot;https://github.com/apache/commons-crypto/pull/62&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-crypto/pull/62&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15354605" author="dapengsun" created="Wed, 29 Jun 2016 05:54:33 +0000"  >&lt;p&gt;Thank Xianda.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/CRYPTO-89&quot; title=&quot;more robust native code to eliminate memory leak&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CRYPTO-89&quot;&gt;&lt;del&gt;CRYPTO-89&lt;/del&gt;&lt;/a&gt;: more robust native code to eliminate memory leak&lt;/p&gt;


&lt;p&gt;Project: &lt;a href=&quot;http://git-wip-us.apache.org/repos/asf/commons-crypto/repo&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://git-wip-us.apache.org/repos/asf/commons-crypto/repo&lt;/a&gt;&lt;br/&gt;
Commit: &lt;a href=&quot;http://git-wip-us.apache.org/repos/asf/commons-crypto/commit/800c831a&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://git-wip-us.apache.org/repos/asf/commons-crypto/commit/800c831a&lt;/a&gt;&lt;br/&gt;
Tree: &lt;a href=&quot;http://git-wip-us.apache.org/repos/asf/commons-crypto/tree/800c831a&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://git-wip-us.apache.org/repos/asf/commons-crypto/tree/800c831a&lt;/a&gt;&lt;br/&gt;
Diff: &lt;a href=&quot;http://git-wip-us.apache.org/repos/asf/commons-crypto/diff/800c831a&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://git-wip-us.apache.org/repos/asf/commons-crypto/diff/800c831a&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 29 Jun 2016 05:54:33 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            22 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2zy6v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>