<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Thu Dec 01 20:46:48 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/CRYPTO-108/CRYPTO-108.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[CRYPTO-108] OpenSSL does not handle Native code loading failure</title>
                <link>https://issues.apache.org/jira/browse/CRYPTO-108</link>
                <project id="12320024" key="CRYPTO">Commons Crypto</project>
                    <description>&lt;p&gt;OpenSSL fails to check if the Native code was loaded successfully before creating an instance.&lt;/p&gt;

&lt;p&gt;This just defers the inevitable failure; it would be better to throw an error immediately.&lt;/p&gt;

&lt;p&gt;Also the code should provide the details of the load faiure&lt;/p&gt;</description>
                <environment></environment>
        <key id="12986982">CRYPTO-108</key>
            <summary>OpenSSL does not handle Native code loading failure</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sebb@apache.org">Sebb</assignee>
                                    <reporter username="sebb@apache.org">Sebb</reporter>
                        <labels>
                    </labels>
                <created>Tue, 5 Jul 2016 22:40:32 +0000</created>
                <updated>Mon, 11 Jul 2016 08:19:00 +0000</updated>
                            <resolved>Wed, 6 Jul 2016 23:57:02 +0000</resolved>
                                                    <fixVersion>1.0.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="15363906" author="kexianda" created="Wed, 6 Jul 2016 07:30:41 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sebb%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;sebb@apache.org&quot;&gt;Sebb&lt;/a&gt;, &lt;br/&gt;
Currently, OpenSSL doesn&apos;t throw exception. the native is loaded in a static block.&lt;br/&gt;
Class initializers are executed in the order they are defined, if we throw exception when loading native in the static block. we are trying to use a class that is in an erroneous state.&lt;/p&gt;

&lt;p&gt;if any loading failure, OpenSslCipher.java will handle it and throw an exception.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
OpenSslCipher(Properties props, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; transformation) {
        &lt;span class=&quot;code-comment&quot;&gt;//...
&lt;/span&gt;        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; loadingFailureReason = OpenSsl.getLoadingFailureReason();
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (loadingFailureReason != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
            &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RuntimeException(loadingFailureReason);
        }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</comment>
                            <comment id="15363962" author="sebb@apache.org" created="Wed, 6 Jul 2016 08:26:41 +0000"  >&lt;p&gt;That&apos;s not what I meant. The static block currently does:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; {
    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; loadingFailure = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
    &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (Crypto.isNativeCodeLoaded()) {
            OpenSslNative.initIDs();
        }
    } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception t) {
        loadingFailure = t.getMessage();
    } &lt;span class=&quot;code-keyword&quot;&gt;finally&lt;/span&gt; {
        loadingFailureReason = loadingFailure;
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Note that it ignores the condition isNativeLoaded == false, so OpenSslCipher won&apos;t see the error&lt;/p&gt;

&lt;p&gt;I think it should be:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; {
    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; loadingFailure = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
    &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (Crypto.isNativeCodeLoaded()) {
            OpenSslNative.initIDs();
        } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
            &lt;span class=&quot;code-comment&quot;&gt;// Throwable cannot be &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; isNativeCodeLoaded is &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
&lt;/span&gt;            loadingFailure = Crypto.getLoadingError().getMessage();
        }
    } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception t) {
        loadingFailure = t.getMessage();
    } &lt;span class=&quot;code-keyword&quot;&gt;finally&lt;/span&gt; {
        loadingFailureReason = loadingFailure;
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;About throwing an error: I meant the class as a whole should throw the error, not the static block.&lt;br/&gt;
e.g. in getInstance()&lt;/p&gt;

&lt;p&gt;But at the least the static block should handle native load failure and update the failure reason.&lt;/p&gt;</comment>
                            <comment id="15365242" author="sebb@apache.org" created="Wed, 6 Jul 2016 22:23:29 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/CRYPTO-108&quot; title=&quot;OpenSSL does not handle Native code loading failure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CRYPTO-108&quot;&gt;&lt;del&gt;CRYPTO-108&lt;/del&gt;&lt;/a&gt; OpenSSL does not handle Native code loading failure&lt;/p&gt;

&lt;p&gt;Save load failure message, so getLoadingFailureReason == null means code&lt;br/&gt;
loaded and init OK&lt;br/&gt;
TODO prevent instantiation if init not done OK&lt;/p&gt;

&lt;p&gt;Project: &lt;a href=&quot;http://git-wip-us.apache.org/repos/asf/commons-crypto/repo&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://git-wip-us.apache.org/repos/asf/commons-crypto/repo&lt;/a&gt;&lt;br/&gt;
Commit: &lt;a href=&quot;http://git-wip-us.apache.org/repos/asf/commons-crypto/commit/079c1589&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://git-wip-us.apache.org/repos/asf/commons-crypto/commit/079c1589&lt;/a&gt;&lt;br/&gt;
Tree: &lt;a href=&quot;http://git-wip-us.apache.org/repos/asf/commons-crypto/tree/079c1589&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://git-wip-us.apache.org/repos/asf/commons-crypto/tree/079c1589&lt;/a&gt;&lt;br/&gt;
Diff: &lt;a href=&quot;http://git-wip-us.apache.org/repos/asf/commons-crypto/diff/079c1589&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://git-wip-us.apache.org/repos/asf/commons-crypto/diff/079c1589&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15365354" author="sebb@apache.org" created="Wed, 6 Jul 2016 23:57:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/CRYPTO-108&quot; title=&quot;OpenSSL does not handle Native code loading failure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CRYPTO-108&quot;&gt;&lt;del&gt;CRYPTO-108&lt;/del&gt;&lt;/a&gt; OpenSSL does not handle Native code loading failure&lt;/p&gt;

&lt;p&gt;Don&apos;t construct class if it won&apos;t work&lt;/p&gt;

&lt;p&gt;Project: &lt;a href=&quot;http://git-wip-us.apache.org/repos/asf/commons-crypto/repo&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://git-wip-us.apache.org/repos/asf/commons-crypto/repo&lt;/a&gt;&lt;br/&gt;
Commit: &lt;a href=&quot;http://git-wip-us.apache.org/repos/asf/commons-crypto/commit/edbdf918&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://git-wip-us.apache.org/repos/asf/commons-crypto/commit/edbdf918&lt;/a&gt;&lt;br/&gt;
Tree: &lt;a href=&quot;http://git-wip-us.apache.org/repos/asf/commons-crypto/tree/edbdf918&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://git-wip-us.apache.org/repos/asf/commons-crypto/tree/edbdf918&lt;/a&gt;&lt;br/&gt;
Diff: &lt;a href=&quot;http://git-wip-us.apache.org/repos/asf/commons-crypto/diff/edbdf918&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://git-wip-us.apache.org/repos/asf/commons-crypto/diff/edbdf918&lt;/a&gt;&lt;/p&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 6 Jul 2016 07:30:41 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            21 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i30kef:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>