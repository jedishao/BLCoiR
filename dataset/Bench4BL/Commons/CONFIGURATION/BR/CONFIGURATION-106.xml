<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Thu Dec 01 20:11:15 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/CONFIGURATION-106/CONFIGURATION-106.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[CONFIGURATION-106] [configuration] XMLConfiguration.save() does not keep element hierarchy</title>
                <link>https://issues.apache.org/jira/browse/CONFIGURATION-106</link>
                <project id="12310467" key="CONFIGURATION">Commons Configuration</project>
                    <description>&lt;p&gt;I am using commons.configuration.XMLConfiguration to save some configuration&lt;br/&gt;
elements of my Java 1.4.2 application in a file. If I use nested elements in my&lt;br/&gt;
configuration, this structure is not mapped to the saved XML-File.&lt;/p&gt;

&lt;p&gt;As an example, consider the following simple main method:&lt;/p&gt;

&lt;p&gt;    public static void main(String[] args) {&lt;br/&gt;
        try &lt;/p&gt;
{
        XMLConfiguration myXMLConfig = new XMLConfiguration();
        myXMLConfig.setProperty(&quot;A&quot;,&quot;valueA&quot;);
        myXMLConfig.setProperty(&quot;A.B&quot;,&quot;valueA.B&quot;);
        myXMLConfig.setProperty(&quot;A.B.C.D&quot;,&quot;valueA.B.C.D&quot;);
        myXMLConfig.setProperty(&quot;E.F.G.H&quot;,&quot;valueE.F.G.H&quot;);
        myXMLConfig.setProperty(&quot;I.J.K.L&quot;,&quot;valueI.J.K.L&quot;);
        myXMLConfig.setProperty(&quot;I.J.K&quot;,null);
        myXMLConfig.setProperty(&quot;I.J&quot;,null);
        myXMLConfig.setProperty(&quot;I&quot;,null);
        myXMLConfig.save(&quot;testConfig.xml&quot;);
        }
&lt;p&gt; catch (ConfigurationException e) &lt;/p&gt;
{
            System.out.println(&quot;ERROR: &quot; + e.toString());
        }
&lt;p&gt;    }&lt;/p&gt;

&lt;p&gt;What I expect to get by executing this piece of code is the following (modulo&lt;br/&gt;
formatting issues, of course):&lt;/p&gt;

&lt;p&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;&lt;br/&gt;
&amp;lt;configuration&amp;gt;&lt;br/&gt;
&amp;lt;A&amp;gt; valueA&lt;br/&gt;
  &amp;lt;B&amp;gt; valueB&lt;br/&gt;
    &amp;lt;C&amp;gt;&lt;br/&gt;
      &amp;lt;D&amp;gt; valueD&lt;br/&gt;
      &amp;lt;/D&amp;gt;&lt;br/&gt;
   &amp;lt;/C&amp;gt;&lt;br/&gt;
  &amp;lt;/B&amp;gt;&lt;br/&gt;
&amp;lt;/A&amp;gt;&lt;br/&gt;
&amp;lt;E&amp;gt;&lt;br/&gt;
  &amp;lt;F&amp;gt;&lt;br/&gt;
    &amp;lt;G&amp;gt;&lt;br/&gt;
      &amp;lt;H&amp;gt; valueE.F.G.H&lt;br/&gt;
      &amp;lt;/H&amp;gt;&lt;br/&gt;
   &amp;lt;/G&amp;gt;&lt;br/&gt;
  &amp;lt;/F&amp;gt;&lt;br/&gt;
&amp;lt;/E&amp;gt;&lt;br/&gt;
&amp;lt;I&amp;gt; null&lt;br/&gt;
  &amp;lt;J&amp;gt; null&lt;br/&gt;
    &amp;lt;K&amp;gt; null&lt;br/&gt;
      &amp;lt;L&amp;gt; valueI.J.K.L&lt;br/&gt;
      &amp;lt;/L&amp;gt;&lt;br/&gt;
    &amp;lt;/K&amp;gt;&lt;br/&gt;
  &amp;lt;/J&amp;gt;&lt;br/&gt;
&amp;lt;/I&amp;gt;&lt;br/&gt;
&amp;lt;/configuration&amp;gt;&lt;/p&gt;

&lt;p&gt;The null-values in I.J.K and so on have only been introduced to show that such a&lt;br/&gt;
workarund does not work, either.&lt;br/&gt;
What I actually receive by storing testConfig.xml is the following:&lt;/p&gt;

&lt;p&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;&lt;br/&gt;
&amp;lt;configuration&amp;gt;&lt;br/&gt;
&amp;lt;A&amp;gt;valueA&amp;lt;B&amp;gt;valueA.B&amp;lt;D&amp;gt;valueA.B.C.D&amp;lt;/D&amp;gt;&lt;br/&gt;
&amp;lt;/B&amp;gt;&lt;br/&gt;
&amp;lt;/A&amp;gt;&lt;br/&gt;
&amp;lt;H&amp;gt;valueE.F.G.H&amp;lt;/H&amp;gt;&lt;br/&gt;
&amp;lt;L&amp;gt;valueI.J.K.L&amp;lt;/L&amp;gt;&lt;br/&gt;
&amp;lt;K&amp;gt;null&amp;lt;/K&amp;gt;&lt;br/&gt;
&amp;lt;J&amp;gt;null&amp;lt;/J&amp;gt;&lt;br/&gt;
&amp;lt;I&amp;gt;null&amp;lt;/I&amp;gt;&lt;br/&gt;
&amp;lt;/configuration&amp;gt;&lt;/p&gt;

&lt;p&gt;In my opinion, at least two failures can be seen above:&lt;br/&gt;
 a) The elements I, J, K, and L are not nested, but all declared on top level of&lt;br/&gt;
the XML-document&lt;br/&gt;
 b) Elements without any value are not automatically inserted as, e.g., element&lt;br/&gt;
C for the path A.B.C.D or elements E, F, and G for E.F.G.H&lt;/p&gt;

&lt;p&gt;I also tried to use HierarchicalXMLConfiguration, but corresponding objects can&lt;br/&gt;
not be saved:&lt;br/&gt;
ERROR: org.apache.commons.configuration.ConfigurationException: Can&apos;t save&lt;br/&gt;
HierarchicalXMLConfigurations&lt;/p&gt;

&lt;p&gt;I am using the final Version 1.0 (not RC1 nor RC2) JAR-Files provied by&lt;br/&gt;
&lt;a href=&quot;http://jakarta.apache.org/commons/configuration/downloads.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://jakarta.apache.org/commons/configuration/downloads.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Best regards,&lt;/p&gt;

&lt;p&gt;Christian Kemmer&lt;/p&gt;</description>
                <environment>&lt;p&gt;Operating System: All&lt;br/&gt;
Platform: All&lt;/p&gt;</environment>
        <key id="12341874">CONFIGURATION-106</key>
            <summary>[configuration] XMLConfiguration.save() does not keep element hierarchy</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="christian.kemmer@viadee.de">Christian Kemmer</reporter>
                        <labels>
                    </labels>
                <created>Mon, 15 Nov 2004 19:08:33 +0000</created>
                <updated>Tue, 16 May 2006 12:18:05 +0000</updated>
                            <resolved>Tue, 16 May 2006 12:18:05 +0000</resolved>
                                    <version>1.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12408035" author="christian.kemmer@viadee.de" created="Wed, 8 Dec 2004 17:25:12 +0000"  >&lt;p&gt;I reported this bug about four weeks ago. Has there been any work on this during&lt;br/&gt;
the last few weeks? I am just interested in whether I can rely on getting this&lt;br/&gt;
bug fixed in the near future.&lt;/p&gt;

&lt;p&gt;Best regdards,&lt;/p&gt;

&lt;p&gt;Christian Kemmer&lt;/p&gt;</comment>
                            <comment id="12408036" author="oliver.heger@t-online.de" created="Wed, 8 Dec 2004 18:08:11 +0000"  >&lt;p&gt;An implementation of the save() method was added to&lt;br/&gt;
HierarchicalXMLConfiguration. Maybe you can give it a try.&lt;/p&gt;

&lt;p&gt;I have some plans to combine the two XMLConfiguration classes, taking the best&lt;br/&gt;
of both. This needs a little experimenting though, so I cannot promise anything&lt;br/&gt;
concrete. But I am going to have a look at it on the coming weekend.&lt;/p&gt;

&lt;p&gt;Oliver&lt;/p&gt;</comment>
                            <comment id="12408037" author="chrisw@sptech.com" created="Wed, 15 Dec 2004 07:28:37 +0000"  >&lt;p&gt;I tried the HierachicalXMLConfiguration.&lt;/p&gt;

&lt;p&gt;I get the following when I try to save:&lt;/p&gt;

&lt;p&gt;java.lang.UnsupportedOperationException: Can&apos;t save &lt;br/&gt;
HierarchicalXMLConfigurations&lt;br/&gt;
	at org.apache.commons.configuration.HierarchicalXMLConfiguration.save&lt;br/&gt;
(HierarchicalXMLConfiguration.java:199)&lt;br/&gt;
	at &lt;br/&gt;
org.apache.commons.configuration.HierarchicalXMLConfiguration$FileConfiguration&lt;br/&gt;
Delegate.save(HierarchicalXMLConfiguration.java:251)&lt;br/&gt;
	at org.apache.commons.configuration.AbstractFileConfiguration.save&lt;br/&gt;
(AbstractFileConfiguration.java:324)&lt;br/&gt;
	at org.apache.commons.configuration.AbstractFileConfiguration.save&lt;br/&gt;
(AbstractFileConfiguration.java:292)&lt;br/&gt;
	at org.apache.commons.configuration.AbstractFileConfiguration.save&lt;br/&gt;
(AbstractFileConfiguration.java:260)&lt;br/&gt;
	at org.apache.commons.configuration.AbstractFileConfiguration.save&lt;br/&gt;
(AbstractFileConfiguration.java:241)&lt;br/&gt;
	at org.apache.commons.configuration.HierarchicalXMLConfiguration.save&lt;br/&gt;
(HierarchicalXMLConfiguration.java:184)&lt;br/&gt;
	at config.ConfigUpdate.&amp;lt;init&amp;gt;(ConfigUpdate.java:54)&lt;br/&gt;
	at config.ConfigUpdate.main(ConfigUpdate.java:65)&lt;br/&gt;
Exception in thread &quot;main&quot; &lt;/p&gt;</comment>
                            <comment id="12408038" author="ebourg" created="Wed, 15 Dec 2004 09:13:38 +0000"  >&lt;p&gt;Chris, did you try with the latest nightly build ?&lt;/p&gt;</comment>
                            <comment id="12408039" author="christian.kemmer@viadee.de" created="Wed, 15 Dec 2004 16:52:28 +0000"  >&lt;p&gt;Hi Oliver,&lt;br/&gt;
hi Emmanuel,&lt;/p&gt;

&lt;p&gt;I cannot compile the latest sources (from 2004-12-14) due to the following &lt;br/&gt;
error:&lt;/p&gt;

&lt;p&gt;compile:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; Compiling 41 source files to E:\TEMP\commons-configuration-src-&lt;br/&gt;
20041214\commons-configuration\target\classes&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; E:\TEMP\commons-configuration-src-20041214\commons-&lt;br/&gt;
configuration\src\java\org\apache\commons\configuration\AbstractConfiguration&lt;br/&gt;
.java:149: cannot resolve symbol&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; symbol  : method arrayIterator (java.lang.Object)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; location: class org.apache.commons.collections.IteratorUtils&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;             return fetchInsertIterator(IteratorUtils.arrayIterator&lt;br/&gt;
(token));&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;                                                     ^&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; 1 error&lt;/p&gt;

&lt;p&gt;The required libraries, including commons-collections-3.0.jar, have been &lt;br/&gt;
downloaded by ant before.&lt;/p&gt;

&lt;p&gt;So, I am not able to test the new version of HierarchicalXMLConfiguration. Or &lt;br/&gt;
is there a link to a pre-compiled nightly build, that I missed? I am not &lt;br/&gt;
familiar with the developing process of jakarta-commons as I am only trying to &lt;br/&gt;
use the configuration library for my program.&lt;/p&gt;

&lt;p&gt;Best regards,&lt;/p&gt;

&lt;p&gt;Christian&lt;/p&gt;</comment>
                            <comment id="12408040" author="oliver.heger@t-online.de" created="Wed, 15 Dec 2004 17:15:57 +0000"  >&lt;p&gt;This is strange.&lt;/p&gt;

&lt;p&gt;We are using maven for building per default. So it may be possible that the ant&lt;br/&gt;
build file is a bit out of date. Is there any chance that you can try maven&lt;br/&gt;
(&lt;a href=&quot;http://maven.apache.org/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://maven.apache.org/&lt;/a&gt;) instead?&lt;/p&gt;

&lt;p&gt;I am also not sure why there are no nightly binaries available for&lt;br/&gt;
configuration, but probably for the same reasons.&lt;/p&gt;

&lt;p&gt;HTH&lt;br/&gt;
Oliver&lt;/p&gt;</comment>
                            <comment id="12408041" author="christian.kemmer@viadee.de" created="Wed, 15 Dec 2004 17:42:16 +0000"  >&lt;p&gt;Hi Oliver,&lt;/p&gt;

&lt;p&gt;thanks a lot for that remark. The build from&lt;br/&gt;
commons-configuration-src-20041214.zip has completed without any problems now.&lt;/p&gt;

&lt;p&gt;And, in advance, saving HierarchicalXMLConfigurations really seems to work now.&lt;/p&gt;

&lt;p&gt;I have tried the following main method:&lt;/p&gt;

&lt;p&gt;    public static void main(String[] args) {&lt;br/&gt;
        try &lt;/p&gt;
{
            HierarchicalXMLConfiguration myHierarchicalXMLConfig = new
HierarchicalXMLConfiguration();
            myHierarchicalXMLConfig.setProperty(&quot;A&quot;, &quot;valueA&quot;);
            myHierarchicalXMLConfig.setProperty(&quot;A.B&quot;, &quot;valueA.B&quot;);
            myHierarchicalXMLConfig.setProperty(&quot;A.B.C.D&quot;, &quot;valueA.B.C.D&quot;);
            myHierarchicalXMLConfig.setProperty(&quot;E.F.G.H&quot;, &quot;valueE.F.G.H&quot;);
            myHierarchicalXMLConfig.setProperty(&quot;I.J.K.L&quot;, &quot;valueI.J.K.L&quot;);
            myHierarchicalXMLConfig.setProperty(&quot;I.J.K&quot;, null);
            myHierarchicalXMLConfig.setProperty(&quot;I.J&quot;, null);
            myHierarchicalXMLConfig.setProperty(&quot;I&quot;, null);
            myHierarchicalXMLConfig.setProperty(&quot;A.B&quot;, &quot;NEWvalueA.B&quot;);
            myHierarchicalXMLConfig.save(&quot;testConfig.xml&quot;);
        }
&lt;p&gt; catch (ConfigurationException e) &lt;/p&gt;
{
            System.out.println(&quot;ERROR: &quot; + e.toString());
        }
&lt;p&gt;    }&lt;/p&gt;

&lt;p&gt;which gives me&lt;/p&gt;

&lt;p&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;&lt;br/&gt;
&amp;lt;configuration&amp;gt;&lt;br/&gt;
&amp;lt;A&amp;gt;valueA&amp;lt;B&amp;gt;NEWvalueA.B&amp;lt;C&amp;gt;&lt;br/&gt;
&amp;lt;D&amp;gt;valueA.B.C.D&amp;lt;/D&amp;gt;&lt;br/&gt;
&amp;lt;/C&amp;gt;&lt;br/&gt;
&amp;lt;/B&amp;gt;&lt;br/&gt;
&amp;lt;/A&amp;gt;&lt;br/&gt;
&amp;lt;E&amp;gt;&lt;br/&gt;
&amp;lt;F&amp;gt;&lt;br/&gt;
&amp;lt;G&amp;gt;&lt;br/&gt;
&amp;lt;H&amp;gt;valueE.F.G.H&amp;lt;/H&amp;gt;&lt;br/&gt;
&amp;lt;/G&amp;gt;&lt;br/&gt;
&amp;lt;/F&amp;gt;&lt;br/&gt;
&amp;lt;/E&amp;gt;&lt;br/&gt;
&amp;lt;I&amp;gt;&lt;br/&gt;
&amp;lt;J&amp;gt;&lt;br/&gt;
&amp;lt;K&amp;gt;&lt;br/&gt;
&amp;lt;L&amp;gt;valueI.J.K.L&amp;lt;/L&amp;gt;&lt;br/&gt;
&amp;lt;/K&amp;gt;&lt;br/&gt;
&amp;lt;/J&amp;gt;&lt;br/&gt;
&amp;lt;/I&amp;gt;&lt;br/&gt;
&amp;lt;/configuration&amp;gt;&lt;/p&gt;


&lt;p&gt;This means that&lt;br/&gt;
a) elements are correctly nested now&lt;br/&gt;
b) elements without any value are inserted correctly now&lt;/p&gt;


&lt;p&gt;So, I say a big THANK YOU to you, Oliver, and to all others who helped resolving&lt;br/&gt;
this issue.&lt;/p&gt;

&lt;p&gt;I am changing the status of this issue to FIXED and just wait for the next&lt;br/&gt;
official release to come, including this fix.&lt;/p&gt;

&lt;p&gt;Best regards,&lt;/p&gt;

&lt;p&gt;Christian&lt;/p&gt;</comment>
                            <comment id="12408042" author="christian.kemmer@viadee.de" created="Wed, 22 Dec 2004 21:55:29 +0000"  >&lt;ul&gt;
	&lt;li&gt;
	&lt;ul&gt;
		&lt;li&gt;
		&lt;ul&gt;
			&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/CONFIGURATION-168&quot; title=&quot;[configuration] Messed file on saving an XMLConfiguration&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CONFIGURATION-168&quot;&gt;&lt;del&gt;COM-1601&lt;/del&gt;&lt;/a&gt; has been marked as a duplicate of this bug. ***&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_10010" key="com.atlassian.jira.plugin.system.customfieldtypes:importid">
                        <customfieldname>Bugzilla Id</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>32240</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 8 Dec 2004 18:08:11 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>33910</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 51 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0tg8f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>169939</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>