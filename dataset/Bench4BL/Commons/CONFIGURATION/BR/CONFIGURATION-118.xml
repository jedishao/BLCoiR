<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Thu Dec 01 19:38:11 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/CONFIGURATION-118/CONFIGURATION-118.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[CONFIGURATION-118] [configuration] Loading a configuration twice creates duplicate properties</title>
                <link>https://issues.apache.org/jira/browse/CONFIGURATION-118</link>
                <project id="12310467" key="CONFIGURATION">Commons Configuration</project>
                    <description>&lt;p&gt;The file configurations are not cleared when the source is loaded, thus if the&lt;br/&gt;
configuration is loaded twice, we end up with duplicate properties.&lt;/p&gt;

&lt;p&gt;    public void testDoubleLoading() throws Exception&lt;/p&gt;
    {
        FileConfiguration config = new PropertiesConfiguration();
        config.setFileName(&quot;conf/test.properties&quot;);
        config.load();
        config.load();

        assertEquals(&quot;Number of elements in the &apos;test.integer.array&apos; list&quot;, 2,
config.getList(&quot;test.integer.array&quot;).size());
    }</description>
                <environment>&lt;p&gt;Operating System: All&lt;br/&gt;
Platform: All&lt;/p&gt;</environment>
        <key id="12342086">CONFIGURATION-118</key>
            <summary>[configuration] Loading a configuration twice creates duplicate properties</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ebourg">Emmanuel Bourg</reporter>
                        <labels>
                    </labels>
                <created>Thu, 3 Mar 2005 03:18:10 +0000</created>
                <updated>Tue, 16 May 2006 11:23:51 +0000</updated>
                            <resolved>Tue, 16 May 2006 11:23:51 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12408803" author="oliver.heger@t-online.de" created="Sat, 5 Mar 2005 00:59:55 +0000"  >&lt;p&gt;We could add an abstract append(Reader) method to AbstractFileConfiguration. In&lt;br/&gt;
the sub classes we move the code from the load(Reader) method to append(Reader).&lt;br/&gt;
AbstractFileConfiguration.load(Reader) can then be implemented by calling&lt;br/&gt;
clear() and then delegating to append(Reader). XMLConfiguration needs an extra&lt;br/&gt;
work because it does not inherit from AbstractFileConfiguration.&lt;/p&gt;

&lt;p&gt;This way we would also gain a new append feature, which might be useful for&lt;br/&gt;
easily creating union configurations. WDYT?&lt;/p&gt;

&lt;p&gt;Is anybody already working on this? Otherwise I would have a look at it during&lt;br/&gt;
the weekend.&lt;/p&gt;</comment>
                            <comment id="12408804" author="ebourg" created="Sat, 5 Mar 2005 01:09:53 +0000"  >&lt;p&gt;I see 2 more solutions:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;change nothing and document the load() method to make it clear that properties&lt;br/&gt;
are added to the configuration and do not replace the current values.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;change the load() method to include a call to clear(), but not the other&lt;br/&gt;
methods loading from a stream, a file, a url, etc.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12408805" author="ebourg" created="Sat, 5 Mar 2005 01:11:37 +0000"  >&lt;p&gt;Anyway this is a minor issue, it should not block the 1.1 release.&lt;/p&gt;</comment>
                            <comment id="12408806" author="oliver.heger@t-online.de" created="Sat, 5 Mar 2005 19:33:55 +0000"  >&lt;p&gt;(In reply to comment #2)&lt;br/&gt;
&amp;gt; I see 2 more solutions:&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt; - change nothing and document the load() method to make it clear that properties&lt;br/&gt;
&amp;gt; are added to the configuration and do not replace the current values.&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt; - change the load() method to include a call to clear(), but not the other&lt;br/&gt;
&amp;gt; methods loading from a stream, a file, a url, etc.&lt;/p&gt;

&lt;p&gt;The first solution is fine with me, especially after cross checking that&lt;br/&gt;
java.util.Properties.load() behaves exactly the same way.&lt;/p&gt;

&lt;p&gt;I added some notes to the javadoc of AbstractFileConfiguration and the load()&lt;br/&gt;
methods of PropertiesConfiguration and XMLConfiguration. I also added two new&lt;br/&gt;
test cases that show that a second load() call inserts new properties rather&lt;br/&gt;
than replacing the old content.&lt;/p&gt;

&lt;p&gt;For XMLConfiguration it was a little harder because I found out that the output&lt;br/&gt;
of the save() method is broken when multiple files were loaded. I could fix&lt;br/&gt;
this, which is also checked in the corresponding test class.&lt;/p&gt;

&lt;p&gt;So I suppose this bug can be closed now?&lt;/p&gt;</comment>
                            <comment id="12408807" author="ebourg" created="Sat, 5 Mar 2005 23:10:55 +0000"  >&lt;p&gt;Yes that&apos;s fine, thank you Oliver&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_10010" key="com.atlassian.jira.plugin.system.customfieldtypes:importid">
                        <customfieldname>Bugzilla Id</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>33814</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 5 Mar 2005 00:59:55 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>33961</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 40 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0tfqn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>169859</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>