<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Thu Dec 01 20:23:51 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/COMPRESS-326/COMPRESS-326.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[COMPRESS-326] Fix threading issue in X5455_ExtendedTimestampTest test class (a test for COMPRESS-210)</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-326</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;The test for &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-210&quot; title=&quot;handle zip extra field 0x5455 - Extended Timestamp&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-210&quot;&gt;&lt;del&gt;COMPRESS-210&lt;/del&gt;&lt;/a&gt; is currently failing when Compress is built at Apache Gump.&lt;br/&gt;
&lt;a href=&quot;http://vmgump.apache.org/gump/public/commons-compress/commons-compress-test/index.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://vmgump.apache.org/gump/public/commons-compress/commons-compress-test/index.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;It says that the last success was on 2015-10-06T00:00:09,&lt;br/&gt;
it started failing at  2015-10-06T12:00:09&lt;br/&gt;
and as of now the failure state is persistent for 22 runs (which means ~11 days).&lt;/p&gt;

&lt;p&gt;The failure:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[INFO] ------------------------------------------------------------------------
[INFO] Building Apache Commons Compress 1.11-SNAPSHOT
[INFO] ------------------------------------------------------------------------

&amp;lt;...&amp;gt;

Running org.apache.commons.compress.archivers.zip.X5455_ExtendedTimestampTest
Tests run: 7, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 0.054 sec &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.commons.compress.archivers.zip.X5455_ExtendedTimestampTest
testSampleFile(org.apache.commons.compress.archivers.zip.X5455_ExtendedTimestampTest)  Time elapsed: 0.027 sec  &amp;lt;&amp;lt;&amp;lt; FAILURE!
org.junit.ComparisonFailure: expected:&amp;lt;2105-01-01/0[0:00:02] +0000&amp;gt; but was:&amp;lt;2105-01-01/0[8:00:01] +0000&amp;gt;
	at org.junit.Assert.assertEquals(Assert.java:116)
	at org.junit.Assert.assertEquals(Assert.java:145)
	at org.apache.commons.compress.archivers.zip.X5455_ExtendedTimestampTest.testSampleFile(X5455_ExtendedTimestampTest.java:171)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Reviewing rhe code of the test class, its usage of `SimpleDateFormat DATE_FORMAT` field is wrong. The field is declared as &quot;static&quot;. A SimpleDateFormat is not thread-safe, so it must not be shared between tests, as some testing configurations may run several tests in parallel.&lt;/p&gt;

&lt;p&gt;A simple fix will be to remove &quot;static&quot; from declaration of that field and its initialization block, so that each running instance of the test gets its own copy of SimpleDateFormat class.&lt;/p&gt;

&lt;p&gt;(I am not sure whether this bug is the actual cause of the test failure. I do not see any reconfigurations of test environment on 2015-10-06. &lt;b&gt;Update&lt;/b&gt;: according to gump-general mailing list [1], on Oct 06 the Java runtime used to run Gump was updated to the latest Java 8 release)&lt;/p&gt;

&lt;p&gt;[1] &lt;a href=&quot;http://mail-archives.apache.org/mod_mbox/gump-general/201510.mbox/%3C5613A448.8040109%40apache.org%3E&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://mail-archives.apache.org/mod_mbox/gump-general/201510.mbox/%3C5613A448.8040109%40apache.org%3E&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12905734">COMPRESS-326</key>
            <summary>Fix threading issue in X5455_ExtendedTimestampTest test class (a test for COMPRESS-210)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="kkolinko">Konstantin Kolinko</reporter>
                        <labels>
                    </labels>
                <created>Sat, 17 Oct 2015 15:59:13 +0000</created>
                <updated>Sat, 24 Oct 2015 06:20:06 +0000</updated>
                            <resolved>Sat, 24 Oct 2015 06:20:05 +0000</resolved>
                                                    <fixVersion>1.11</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="14961973" author="bodewig" created="Sat, 17 Oct 2015 16:34:01 +0000"  >&lt;p&gt;This problem&apos;s been on my radar for a while, I just couldn&apos;t find a big enough slice of time to look into it.  Yes, it is the Java version.  It also happens locally - the test fails with recent enough Java8s and 9s, passes with older Java8s and &amp;lt; 8.  I&apos;ve been speculation about a change to the java.util.zip package, but see above.&lt;/p&gt;

&lt;p&gt;Unfortunately making the SimpleDateFormat non-static doesn&apos;t help (the test should be single-threaded anyway).&lt;/p&gt;</comment>
                            <comment id="14972416" author="bodewig" created="Sat, 24 Oct 2015 05:41:54 +0000"  >&lt;p&gt;I think I&apos;ve tracked it down.&lt;/p&gt;

&lt;p&gt;Traditionally Java&apos;s &lt;tt&gt;ZipEntry#getTime&lt;/tt&gt; returned the &lt;tt&gt;lastModifiedTime&lt;/tt&gt; from the archive entry&apos;s header directly - this is why we adjust the time to the local time zone just like InfoZIP would do since the test archive has been written by InfoZIP&apos;s zip.&lt;/p&gt;

&lt;p&gt;Then came &lt;a href=&quot;http://hg.openjdk.java.net/jdk8u/jdk8u/jdk/rev/90df6756406f&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hg.openjdk.java.net/jdk8u/jdk8u/jdk/rev/90df6756406f&lt;/a&gt; which changes the logic of &lt;tt&gt;ZipEntry#getTime&lt;/tt&gt; and now uses additional time fields InfoZIP or Microsoft&apos;s Compressed Folders feature would use in order to get a better result.  I haven&apos;t tracked down which Java8 update has been the first one to receive the patch.&lt;/p&gt;

&lt;p&gt;I&apos;ll try to adjust the test.&lt;/p&gt;</comment>
                            <comment id="14972433" author="bodewig" created="Sat, 24 Oct 2015 06:20:06 +0000"  >&lt;p&gt;test should be fixed with commit a2cda30&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 17 Oct 2015 16:34:01 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 5 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2n5jj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>