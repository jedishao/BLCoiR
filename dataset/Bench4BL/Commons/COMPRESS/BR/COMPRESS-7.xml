<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Thu Dec 01 20:38:03 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/COMPRESS-7/COMPRESS-7.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[COMPRESS-7] Creating TAR archive of an 8 GB file causes IOException</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-7</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;Yesterday I reported a bug with extraction of TAR archives:&lt;br/&gt;
	&lt;a href=&quot;https://issues.apache.org/jira/browse/SANDBOX-168&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SANDBOX-168&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Today I found that when I tried to creat a TAR archive of a file that is exactly 8 GB, that is,&lt;br/&gt;
	(8L * 1024L * 1024L * 1024L) - 1&lt;br/&gt;
that it failed with the following strange error:&lt;/p&gt;

&lt;p&gt;Exception in thread &quot;main&quot; java.io.IOException: request to write &apos;32768&apos; bytes exceeds size in header of &apos;-1&apos; bytes&lt;br/&gt;
        at org.apache.commons.compress.archivers.tar.TarOutputStream.write(TarOutputStream.java:341)&lt;br/&gt;
        at bb.io.StreamUtil.transfer(StreamUtil.java:312)&lt;br/&gt;
        at bb.io.StreamUtil.transfer(StreamUtil.java:290)&lt;br/&gt;
        at bb.io.TarUtil.writeFileData(TarUtil.java:404)&lt;br/&gt;
        at bb.io.TarUtil.archive(TarUtil.java:382)&lt;br/&gt;
        at bb.io.TarUtil.archive(TarUtil.java:334)&lt;br/&gt;
        at bb.io.TarUtil$Test.test_archive_extract_fileLengthLimit(TarUtil.java:610)&lt;br/&gt;
        at bb.io.TarUtil$Test.main(TarUtil.java:542)&lt;/p&gt;

&lt;p&gt;The code that I used to try and create the TAR archive was the same described in that previous bug report, so I will not repeat it here.&lt;/p&gt;

&lt;p&gt;I was doing this in an attempt to discern if the org.apache.commons.compress TAR code has any file size limits, since classic TAR is limited to 8 BG files but org.apache.commons.compress supports GNU TAR long path names, so maybe it has no file size limits either.  (There appears to be no documentation about this in the TAR code.)&lt;/p&gt;

&lt;p&gt;What is strange is that the code first DID apparently succeed in TARing a 10 GB file, albeit, when I tried to see if a third party piece of software (7-zip) would extract it, that program objected saying that it did not support the TAR format type encpuntered in the file.&lt;/p&gt;

&lt;p&gt;Since I need to use a file size limit that is consistent with other programs, I then tried to TAR a file of exactly 8 GB in size.  This is when I encountered the above error.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Win xp pro sp2; JDK 1.5.0_07&lt;/p&gt;</environment>
        <key id="12348010">COMPRESS-7</key>
            <summary>Creating TAR archive of an 8 GB file causes IOException</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="bbatman">Sam Smith</reporter>
                        <labels>
                    </labels>
                <created>Tue, 15 Aug 2006 15:27:06 +0000</created>
                <updated>Mon, 23 Mar 2009 22:18:27 +0000</updated>
                            <resolved>Sat, 21 Jun 2008 17:57:00 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12490427" author="jcrump" created="Fri, 20 Apr 2007 18:52:45 +0000"  >&lt;p&gt;I was faced with a similar issue today.   While the entry size is a long, the write() method takes an int &amp;#8211; and if you get too big, you overflow.  Here is the exception I got when trying to write 9GB entry&lt;/p&gt;

&lt;p&gt;java.io.IOException request to write &apos;8192&apos; bytes exceeds size in header of &apos;1390354048&apos; bytes&lt;br/&gt;
    at org.apache.commons.compress.tar.TarOutputStream.write(TarOutputStream.java:-3)&lt;br/&gt;
    at java.nio.channels.Channels$WritableByteChannelImpl.write(Channels.java:-3)&lt;br/&gt;
    at org.archivas.io.TransferSupport.writeBuffer(TransferSupport.java:-3)&lt;br/&gt;
    at org.archivas.io.TransferSupport.writeChunk(TransferSupport.java:-4)&lt;/p&gt;

&lt;p&gt;It looks like the Ant folks have taken care of this already? &lt;br/&gt;
&lt;a href=&quot;http://www.cenqua.com/fisheye/demo/browse/ant/src/main/org/apache/tools/tar/TarOutputStream.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.cenqua.com/fisheye/demo/browse/ant/src/main/org/apache/tools/tar/TarOutputStream.java&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Why is the m_size field a long, but the write() API take an int?&lt;/p&gt;
</comment>
                            <comment id="12607024" author="ebourg" created="Sat, 21 Jun 2008 17:57:00 +0000"  >&lt;p&gt;Fixed, TarOutputStream now uses long values internally.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 20 Apr 2007 18:52:45 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>49565</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 24 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0b45z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>62787</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>