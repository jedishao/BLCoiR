<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Thu Dec 01 20:25:05 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/COMPRESS-239/COMPRESS-239.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[COMPRESS-239] ArchiveStreamFactory cannot create an ArchiveInputStream from any input stream that is blocking</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-239</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;Encountered while streaming zip data over a network:&lt;/p&gt;

&lt;p&gt;In the createArchiveInputStream method of ArchiveStreamFactory, when the provided input stream is read, and it blocks before 12 bytes are available for reading, due to the contract of the java.io.InputStream class, the archive signature will not be completely read, and an ArchiveException will be thrown (&quot;No Archiver found for the stream signature&quot;).&lt;/p&gt;

&lt;p&gt;In ZipArchiveInputStream, you have implemented a readFully method, which should solve this issue, but since you are checking the length of the signature read against the expected length, you are never getting to do that.  When you try to read the signature, you should be using readFully.&lt;/p&gt;

&lt;p&gt;For reference, here is important part of the contract of java.io.InputStream.read():&lt;/p&gt;

&lt;p&gt;This method blocks until &lt;span class=&quot;error&quot;&gt;&amp;#91;ANY&amp;#93;&lt;/span&gt; input data is available, end of file is detected, or an exception is thrown.&lt;/p&gt;

&lt;p&gt;If len is zero, then no bytes are read and 0 is returned; otherwise, there is an attempt to read &lt;em&gt;at least one byte&lt;/em&gt;. If no byte is available because the stream is at end of file, the value -1 is returned; otherwise, at least one byte is read and stored into b.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows Server 2008r1/r2, Ubuntu 12.10&lt;/p&gt;</environment>
        <key id="12672050">COMPRESS-239</key>
            <summary>ArchiveStreamFactory cannot create an ArchiveInputStream from any input stream that is blocking</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="esaron">Jon Neel</reporter>
                        <labels>
                            <label>easyfix</label>
                    </labels>
                <created>Wed, 2 Oct 2013 22:39:40 +0000</created>
                <updated>Fri, 4 Oct 2013 13:26:49 +0000</updated>
                            <resolved>Fri, 4 Oct 2013 13:26:49 +0000</resolved>
                                    <version>1.5</version>
                                    <fixVersion>1.6</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13785958" author="bodewig" created="Fri, 4 Oct 2013 07:11:50 +0000"  >&lt;p&gt;should be easy to fix.&lt;/p&gt;

&lt;p&gt;If you know you are reading a ZIP you can certainly skip the autodetection version of createArchiveInputStream as a workaround, but you aleady knew that.&lt;/p&gt;</comment>
                            <comment id="13786130" author="bodewig" created="Fri, 4 Oct 2013 13:26:49 +0000"  >&lt;p&gt;fixed with svn revision 1529159&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 4 Oct 2013 07:11:50 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>351676</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 8 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1omun:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>351964</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>