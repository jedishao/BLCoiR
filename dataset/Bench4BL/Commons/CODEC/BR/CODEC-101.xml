<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Thu Dec 01 19:07:52 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/CODEC-101/CODEC-101.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[CODEC-101] Base64InputStream#read(byte[]) incorrectly returns 0 at end of any stream which is multiple of 3 bytes long</title>
                <link>https://issues.apache.org/jira/browse/CODEC-101</link>
                <project id="12310464" key="CODEC">Commons Codec</project>
                    <description>&lt;p&gt;Using new InputStreamReader(new Base64InputStream(in, true)) sometimes fails with &quot;java.io.IOException: Underlying input stream returned zero bytes&quot;.&lt;/p&gt;

&lt;p&gt;This is been tracked down that Base64InputStream#read(byte[]) incorrectly returns 0 at end of any stream which is multiple of 3 bytes long.&lt;/p&gt;</description>
                <environment>&lt;p&gt;WinXP, JDK 1.6.0_14&lt;/p&gt;</environment>
        <key id="12465725">CODEC-101</key>
            <summary>Base64InputStream#read(byte[]) incorrectly returns 0 at end of any stream which is multiple of 3 bytes long</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="juliusdavies">Julius Davies</assignee>
                                    <reporter username="balusc">Bauke Scholtz</reporter>
                        <labels>
                    </labels>
                <created>Sun, 30 May 2010 04:07:04 +0000</created>
                <updated>Thu, 10 Nov 2011 18:10:02 +0000</updated>
                            <resolved>Fri, 21 Jan 2011 19:43:38 +0000</resolved>
                                    <version>1.4</version>
                                    <fixVersion>1.5</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12874336" author="juliusdavies" created="Wed, 2 Jun 2010 00:31:31 +0000"  >&lt;p&gt;Thanks for the bug report.  I&apos;m looking into it.&lt;/p&gt;</comment>
                            <comment id="12874869" author="juliusdavies" created="Wed, 2 Jun 2010 23:59:25 +0000"  >&lt;p&gt;Wow, I can&apos;t imagine how you tracked this one down to Base64InputStream!  Java6&apos;s stacktrace is so un-helpful:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; class R {
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        Base64InputStream in = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Base64InputStream(&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.in);
        InputStreamReader isr = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; InputStreamReader(in, &lt;span class=&quot;code-quote&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt;);
        BufferedReader br = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BufferedReader(isr);
        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; line = br.readLine();
        &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (line != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
            &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;Line:&quot;&lt;/span&gt; + line);
            line = br.readLine();
        }
    }
}

$ java -cp build/playground.jar:/opt/dev/codec/target/classes  R   &amp;lt; all-whitespace.txt 
Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; java.io.IOException: Underlying input stream returned zero bytes
	at sun.nio.cs.StreamDecoder.readBytes(StreamDecoder.java:268)
	at sun.nio.cs.StreamDecoder.implRead(StreamDecoder.java:306)
	at sun.nio.cs.StreamDecoder.read(StreamDecoder.java:158)
	at java.io.InputStreamReader.read(InputStreamReader.java:167)
	at java.io.BufferedReader.fill(BufferedReader.java:136)
	at java.io.BufferedReader.readLine(BufferedReader.java:299)
	at java.io.BufferedReader.readLine(BufferedReader.java:362)
	at R.main(R.java:17)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;I&apos;ve attached a patch that appears to fix it.   Are you able to try this out?  You can try the following commands to build a patched binary:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
svn export http:&lt;span class=&quot;code-comment&quot;&gt;//svn.apache.org/repos/asf/commons/proper/codec/trunk/ codec-trunk
&lt;/span&gt;cd codec-trunk
patch -p0 &amp;lt; codec-101-fix.patch
ant dist
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;In the meantime I&apos;m working on some unit tests to better exercise this patch.  I&apos;ll try and get those uploaded here to &lt;a href=&quot;https://issues.apache.org/jira/browse/CODEC-101&quot; title=&quot;Base64InputStream#read(byte[]) incorrectly returns 0 at end of any stream which is multiple of 3 bytes long&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CODEC-101&quot;&gt;&lt;del&gt;CODEC-101&lt;/del&gt;&lt;/a&gt; within 48 hours.&lt;/p&gt;

</comment>
                            <comment id="12874878" author="balusc" created="Thu, 3 Jun 2010 00:15:07 +0000"  >&lt;p&gt;The fix works. As to nailing down the root cause, the credit goes to someone else, the user named Keith Randall nailed it down in this topic at Stackoverflow: &lt;a href=&quot;http://stackoverflow.com/questions/2937161/problem-using-base64-encoder-and-inputstreamreader&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://stackoverflow.com/questions/2937161/problem-using-base64-encoder-and-inputstreamreader&lt;/a&gt; &lt;/p&gt;</comment>
                            <comment id="12931009" author="striderapache" created="Thu, 11 Nov 2010 13:32:37 +0000"  >&lt;p&gt;This bug has been fixed in June but as of November, the fix still has not been committed to SVN? It is hurting me bigtime and at least getting the patch accepted should be a small matter?&lt;/p&gt;

&lt;p&gt;(Posting from a BugMeNot account, sorry about that)&lt;/p&gt;</comment>
                            <comment id="12931547" author="ggregory@seagullsw.com" created="Fri, 12 Nov 2010 22:28:09 +0000"  >&lt;p&gt;How about a unit test showing the bug in action? &lt;/p&gt;

&lt;p&gt;Ideally, I would like to: apply the unit test patch, watch the test fail, apply the main patch, watch the test pass.&lt;/p&gt;</comment>
                            <comment id="12931633" author="bayard" created="Sat, 13 Nov 2010 05:55:12 +0000"  >&lt;p&gt;Without using the code from stackoverflow as that&apos;s an incompatible license. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12984863" author="juliusdavies" created="Fri, 21 Jan 2011 18:59:47 +0000"  >&lt;p&gt;This triggers the problem:   InputStream.read(byte[]) should never return 0.&lt;/p&gt;</comment>
                            <comment id="12984890" author="juliusdavies" created="Fri, 21 Jan 2011 19:37:43 +0000"  >&lt;p&gt;throwing in another JUnit test&lt;/p&gt;</comment>
                            <comment id="12984894" author="juliusdavies" created="Fri, 21 Jan 2011 19:43:38 +0000"  >&lt;p&gt;The three patches are committed to trunk now.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12469004" name="codec-101-another-junit.patch" size="2258" author="juliusdavies" created="Fri, 21 Jan 2011 19:37:43 +0000"/>
                            <attachment id="12446202" name="codec-101-fix.patch" size="2625" author="juliusdavies" created="Wed, 2 Jun 2010 23:59:24 +0000"/>
                            <attachment id="12469000" name="codec-101-junit.patch" size="1846" author="juliusdavies" created="Fri, 21 Jan 2011 18:59:47 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 2 Jun 2010 00:31:31 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>40245</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 45 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ep6f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>83841</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>