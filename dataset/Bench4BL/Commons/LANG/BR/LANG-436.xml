<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Wed Nov 30 23:47:29 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LANG-436/LANG-436.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[LANG-436] Remove caching from MethodUtils</title>
                <link>https://issues.apache.org/jira/browse/LANG-436</link>
                <project id="12310481" key="LANG">Commons Lang</project>
                    <description>&lt;p&gt;I think we should remove the caching from MethodUtils. This has caused memory leak problems in BeanUtils (where it was copied from) and better IMO to just provide the pure reflection API in lang and let downstream users provide solutions for improving performance.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12395524">LANG-436</key>
            <summary>Remove caching from MethodUtils</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="niallp">Niall Pemberton</assignee>
                                    <reporter username="niallp">Niall Pemberton</reporter>
                        <labels>
                    </labels>
                <created>Wed, 7 May 2008 13:55:27 +0000</created>
                <updated>Thu, 25 Feb 2010 20:35:44 +0000</updated>
                            <resolved>Wed, 7 May 2008 16:08:04 +0000</resolved>
                                                    <fixVersion>2.5</fixVersion>
                                    <component>lang.reflect.*</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12594916" author="niallp" created="Wed, 7 May 2008 13:57:36 +0000"  >&lt;p&gt;Attaching a patch to remove caching from MethodUtils, which I plan to apply&lt;/p&gt;</comment>
                            <comment id="12594951" author="mbenson" created="Wed, 7 May 2008 16:00:03 +0000"  >&lt;p&gt;I have no problems with this.  Apply away!  Thanks, Niall!&lt;/p&gt;</comment>
                            <comment id="12594953" author="niallp" created="Wed, 7 May 2008 16:08:04 +0000"  >&lt;p&gt;OK removed&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/viewvc?view=rev&amp;amp;revision=654159&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc?view=rev&amp;amp;revision=654159&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12604782" author="evoorbraak" created="Fri, 13 Jun 2008 09:50:53 +0000"  >&lt;p&gt;So you removed caching for org.apache.commons.lang.reflect.MethodUtils.java. Should the same not also happen for org.apache.commons.beanutils/MethodUtils.java? This is where I discovered a memory leak today.&lt;/p&gt;

&lt;p&gt;As far as I can see, it uses a WeakHashMap, whose keys are weak references. However, the map is filled with MethodDescriptor instances, which are created in the same method as where they are put as keys in the map. So one would expect that the get garbage collected on the first occasion. It looks like the cache should have been one where the values are weak. Why we still had the memory leak, I cannot explain.&lt;/p&gt;</comment>
                            <comment id="12604896" author="niallp" created="Fri, 13 Jun 2008 14:25:51 +0000"  >&lt;p&gt;Whoever implemented MethodUtils&apos;s caching in BeanUtils presumably did so to improve performance and therefore removing it could negatively affect existing applications - for example Struts1 users. The copy of MethodUtils here in lang has only recently been added - its not in a released version and therefore has no existing users to be concerned about. Better then IMO to just provide the reflection functionality here without the caching which is much cleaner.&lt;/p&gt;

&lt;p&gt;I have done some work on the memory leak associated with the WeakHashMap (nothing to do with the lack of synchronization - which I agree is another issue, thanks for reporting it) and problem seems to be caused by the Method reference held in the MethodDescriptor - see &lt;a href=&quot;https://issues.apache.org/jira/browse/BEANUTILS-291&quot; title=&quot;Circular Reference on WeakHashMap&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BEANUTILS-291&quot;&gt;&lt;del&gt;BEANUTILS-291&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;http://tinyurl.com/5ksjrh&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://tinyurl.com/5ksjrh&lt;/a&gt; which seems to fix this.&lt;/p&gt;

&lt;p&gt;The &lt;a href=&quot;https://issues.apache.org/jira/browse/BEANUTILS-291&quot; title=&quot;Circular Reference on WeakHashMap&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BEANUTILS-291&quot;&gt;&lt;del&gt;BEANUTILS-291&lt;/del&gt;&lt;/a&gt; memory leak issues is still on my todo list - but its currently in a broken state - with the same kind of issue as &lt;a href=&quot;https://issues.apache.org/jira/browse/BEANUTILS-318&quot; title=&quot;Many threads are stuck in infinite loops in MethodUtils  because static WeakHashMap is not thread safe&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BEANUTILS-318&quot;&gt;&lt;del&gt;BEANUTILS-318&lt;/del&gt;&lt;/a&gt;, caused by me replacing the FastHashMap with WeakHashMap. I need to find time to finish up so that we can get a BeanUtils release out with these issues resolved.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12381599" name="LANG-436-remove-MethodUtils-caching.patch" size="9153" author="niallp" created="Wed, 7 May 2008 13:57:36 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 7 May 2008 16:00:03 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>147315</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 25 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0d60n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>74751</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>