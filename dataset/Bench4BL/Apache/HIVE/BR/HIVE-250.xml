<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sat Dec 03 00:37:18 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HIVE-250/HIVE-250.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HIVE-250] shared memory java dbm for map-side joins</title>
                <link>https://issues.apache.org/jira/browse/HIVE-250</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;can use either:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;sdbm: &lt;a href=&quot;http://freshmeat.net/projects/solingerjavasdbm/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://freshmeat.net/projects/solingerjavasdbm/&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;jdbm: &lt;a href=&quot;http://sourceforge.net/projects/jdbm/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://sourceforge.net/projects/jdbm/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;both need modifications to use file mmaps instead of regular file io. will do some testing to see if there&apos;s a major difference between the two.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12413202">HIVE-250</key>
            <summary>shared memory java dbm for map-side joins</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jsensarma">Joydeep Sen Sarma</assignee>
                                    <reporter username="jsensarma">Joydeep Sen Sarma</reporter>
                        <labels>
                    </labels>
                <created>Sun, 25 Jan 2009 07:55:24 +0000</created>
                <updated>Sat, 17 Dec 2011 00:07:54 +0000</updated>
                            <resolved>Fri, 24 Apr 2009 02:00:17 +0000</resolved>
                                                    <fixVersion>0.4.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12667053" author="prasadc" created="Sun, 25 Jan 2009 07:58:28 +0000"  >&lt;p&gt;if they have to be modified to use mmap then why not berkey db java edition?&lt;/p&gt;</comment>
                            <comment id="12667056" author="jsensarma" created="Sun, 25 Jan 2009 08:35:50 +0000"  >&lt;p&gt;i think we had looked at berkeley db as well - seemed way too complicated to modify. it&apos;s a few lines mod in jdbm (fingers crossed).&lt;/p&gt;</comment>
                            <comment id="12667351" author="jsensarma" created="Mon, 26 Jan 2009 18:55:45 +0000"  >&lt;p&gt;ok - i guess i was quite off on this.&lt;/p&gt;

&lt;p&gt;These modules use a java object cache - they deserialize objects from underlying dbm files. the object cache (in the way it&apos;s implemented) cannot be shared across processes. the act of mmaping the file and then reading it has some performance advantages (less system calls) - but doesn&apos;t really help that much from memory perspective. if the file is small and there are lots of readers - then the file system will anyway hold the file in cache (and that&apos;s 1X memory consumption).&lt;/p&gt;

&lt;p&gt;so for v1 - what i would say is just use one of these modules with efficient deserialization (jdbm uses object serialization by default and that&apos;s way too expensive). and trust file caching to do it&apos;s job. The object cache in dbm (configurable) will have to be kept to reasonable size - quite likely a subset of the entire data size.&lt;/p&gt;

&lt;p&gt;if we get time - we can do something smarter - the object cache should have pointers to data in the underlying mmap&apos;ed file. This would mean that data across all object caches is shared (we will still have to pay for object overhead though). with the same amount of memory - the object cache can be sized much larger (since it&apos;s not storing data anymore).&lt;/p&gt;

&lt;p&gt;&amp;#8211;&lt;br/&gt;
i did do some experiments:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;replaced file io with mmaped buffers in jdbm - works perfectly&lt;/li&gt;
	&lt;li&gt;bulk of compute cost is in object deserialization. On my T60 with a single thread - lookup throughput went from 6.5K op/s to 41K op/s if deserialization was avoided (by making the object cache large enough to store all values). cpu bound of course.&lt;/li&gt;
&lt;/ul&gt;

</comment>
                            <comment id="12702213" author="zshao" created="Fri, 24 Apr 2009 02:00:17 +0000"  >&lt;p&gt;Committed to trunk. Thanks Joydeep!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12406284" name="hive.250.1.patch" size="383058" author="namit" created="Thu, 23 Apr 2009 21:29:52 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 25 Jan 2009 07:58:28 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73673</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 33 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0l8r3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122068</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-250&quot; title=&quot;shared memory java dbm for map-side joins&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-250&quot;&gt;&lt;strike&gt;HIVE-250&lt;/strike&gt;&lt;/a&gt;. Shared memory java dbm for map-side joins. (Joydeep Sen Sarma via zshao)</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>