<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun Dec 04 00:17:23 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HIVE-7341/HIVE-7341.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HIVE-7341] Support for Table replication across HCatalog instances</title>
                <link>https://issues.apache.org/jira/browse/HIVE-7341</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The HCatClient currently doesn&apos;t provide very much support for replicating HCatTable definitions between 2 HCatalog Server (i.e. Hive metastore) instances. &lt;/p&gt;

&lt;p&gt;Systems similar to Apache Falcon might find the need to replicate partition data between 2 clusters, and keep the HCatalog metadata in sync between the two. This poses a couple of problems:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;The definition of the source table might change (in column schema, I/O formats, record-formats, serde-parameters, etc.) The system will need a way to diff 2 tables and update the target-metastore with the changes. E.g.
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
targetTable.resolve( sourceTable, targetTable.diff(sourceTable) );
hcatClient.updateTableSchema(dbName, tableName, targetTable);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;li&gt;The current &lt;tt&gt;HCatClient.addPartitions()&lt;/tt&gt; API requires that the partition&apos;s schema be derived from the table&apos;s schema, thereby requiring that the table-schema be resolved &lt;b&gt;before&lt;/b&gt; partitions with the new schema are added to the table. This is problematic, because it introduces race conditions when 2 partitions with differing column-schemas (e.g. right after a schema change) are copied in parallel. This can be avoided if each HCatAddPartitionDesc kept track of the partition&apos;s schema, in flight.&lt;/li&gt;
	&lt;li&gt;The source and target metastores might be running different/incompatible versions of Hive.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;The impending patch attempts to address these concerns (with some caveats).&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;&lt;tt&gt;HCatTable&lt;/tt&gt; now has
	&lt;ol&gt;
		&lt;li&gt;a &lt;tt&gt;diff()&lt;/tt&gt; method, to compare against another HCatTable instance&lt;/li&gt;
		&lt;li&gt;a &lt;tt&gt;resolve(diff)&lt;/tt&gt; method to copy over specified table-attributes from another HCatTable&lt;/li&gt;
		&lt;li&gt;a serialize/deserialize mechanism (via &lt;tt&gt;HCatClient.serializeTable()&lt;/tt&gt; and &lt;tt&gt;HCatClient.deserializeTable()&lt;/tt&gt;), so that HCatTable instances constructed in other class-loaders may be used for comparison&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;HCatPartition&lt;/tt&gt; now provides finer-grained control over a Partition&apos;s column-schema, StorageDescriptor settings, etc. This allows partitions to be copied completely from source, with the ability to override specific properties if required (e.g. location).&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;HCatClient.updateTableSchema()&lt;/tt&gt; can now update the entire table-definition, not just the column schema.&lt;/li&gt;
	&lt;li&gt;I&apos;ve cleaned up and removed most of the redundancy between the HCatTable, HCatCreateTableDesc and HCatCreateTableDesc.Builder. The prior API failed to separate the table-attributes from the add-table-operation&apos;s attributes. By providing fluent-interfaces in HCatTable, and composing an HCatTable instance in HCatCreateTableDesc, the interfaces are cleaner(ish). The old setters are deprecated, in favour of those in HCatTable. Likewise, HCatPartition and HCatAddPartitionDesc.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;I&apos;ll post a patch for trunk shortly.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12725121">HIVE-7341</key>
            <summary>Support for Table replication across HCatalog instances</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mithun">Mithun Radhakrishnan</assignee>
                                    <reporter username="mithun">Mithun Radhakrishnan</reporter>
                        <labels>
                            <label>backward-incompatible</label>
                            <label>data-replication</label>
                    </labels>
                <created>Wed, 2 Jul 2014 22:52:09 +0000</created>
                <updated>Fri, 6 Nov 2015 01:16:31 +0000</updated>
                            <resolved>Mon, 18 Aug 2014 11:02:21 +0000</resolved>
                                    <version>0.13.1</version>
                                    <fixVersion>0.14.0</fixVersion>
                                    <component>HCatalog</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="14050848" author="mithun" created="Wed, 2 Jul 2014 23:08:33 +0000"  >&lt;p&gt;The tentative first version of the fix.&lt;/p&gt;</comment>
                            <comment id="14054163" author="mithun" created="Mon, 7 Jul 2014 20:20:42 +0000"  >&lt;p&gt;Updated patch with the missing class.&lt;/p&gt;</comment>
                            <comment id="14065324" author="mithun" created="Thu, 17 Jul 2014 18:36:01 +0000"  >&lt;p&gt;I&apos;d appreciate any comments on the interfaces. For instance, I&apos;ve deprecated the HCatCreateTableDesc&apos;s old constructor, because it doesn&apos;t specify an HCatTable. I did this to remove redundancy between HCatCreateTableDesc, its Builder and HCatTable itself. For the moment, I&apos;m throwing an &quot;unsupported&quot; exception because there&apos;s no clean way of supporting that constructor, after the cleanup.&lt;/p&gt;</comment>
                            <comment id="14080525" author="mithun" created="Thu, 31 Jul 2014 05:40:57 +0000"  >&lt;p&gt;Improved patch, to ensure deprecated APIs still function.&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;HCatAddPartitionDesc.create(db, table, location, partKeyValMap)&lt;/tt&gt; doesn&apos;t throw an UnsupportedException now.&lt;/p&gt;</comment>
                            <comment id="14081289" author="hiveqa" created="Thu, 31 Jul 2014 19:11:40 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12658845/HIVE-7341.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12658845/HIVE-7341.2.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 1 failed/errored test(s), 5862 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_ql_rewrite_gbtoidx
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/123/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/123/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/123/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/123/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-123/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-123/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 1 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12658845&lt;/p&gt;</comment>
                            <comment id="14090973" author="mithun" created="Fri, 8 Aug 2014 17:07:01 +0000"  >&lt;p&gt;Added documentation for MetadataSerializer, and subclass.&lt;/p&gt;</comment>
                            <comment id="14091584" author="hiveqa" created="Sat, 9 Aug 2014 02:03:24 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 no tests executed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12660665/HIVE-7341.3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12660665/HIVE-7341.3.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/237/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/237/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/237/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/237/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-237/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-237/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Tests exited with: NonZeroExitCodeException
Command &apos;bash /data/hive-ptest/working/scratch/source-prep.sh&apos; failed with exit status 1 and output &apos;+ [[ -n /usr/java/jdk1.7.0_45-cloudera ]]
+ export JAVA_HOME=/usr/java/jdk1.7.0_45-cloudera
+ JAVA_HOME=/usr/java/jdk1.7.0_45-cloudera
+ export PATH=/usr/java/jdk1.7.0_45-cloudera/bin/:/usr/java/jdk1.6.0_34/bin:/usr/local/apache-maven-3.0.5/bin:/usr/local/apache-maven-3.0.5/bin:/usr/java/jdk1.6.0_34/bin:/usr/local/apache-ant-1.9.1/bin:/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/sbin:/home/hiveptest/bin
+ PATH=/usr/java/jdk1.7.0_45-cloudera/bin/:/usr/java/jdk1.6.0_34/bin:/usr/local/apache-maven-3.0.5/bin:/usr/local/apache-maven-3.0.5/bin:/usr/java/jdk1.6.0_34/bin:/usr/local/apache-ant-1.9.1/bin:/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/sbin:/home/hiveptest/bin
+ export &apos;ANT_OPTS=-Xmx1g -XX:MaxPermSize=256m &apos;
+ ANT_OPTS=&apos;-Xmx1g -XX:MaxPermSize=256m &apos;
+ export &apos;M2_OPTS=-Xmx1g -XX:MaxPermSize=256m -Dhttp.proxyHost=localhost -Dhttp.proxyPort=3128&apos;
+ M2_OPTS=&apos;-Xmx1g -XX:MaxPermSize=256m -Dhttp.proxyHost=localhost -Dhttp.proxyPort=3128&apos;
+ cd /data/hive-ptest/working/
+ tee /data/hive-ptest/logs/PreCommit-HIVE-TRUNK-Build-237/source-prep.txt
+ [[ false == \t\r\u\e ]]
+ mkdir -p maven ivy
+ [[ svn = \s\v\n ]]
+ [[ -n &apos;&apos; ]]
+ [[ -d apache-svn-trunk-source ]]
+ [[ ! -d apache-svn-trunk-source/.svn ]]
+ [[ ! -d apache-svn-trunk-source ]]
+ cd apache-svn-trunk-source
+ svn revert -R .
Reverted &apos;hcatalog/hcatalog-pig-adapter/src/test/java/org/apache/hive/hcatalog/pig/TestHCatLoader.java&apos;
Reverted &apos;common/src/test/org/apache/hadoop/hive/common/type/TestDecimal128.java&apos;
Reverted &apos;common/src/test/org/apache/hadoop/hive/common/type/TestHiveDecimal.java&apos;
Reverted &apos;common/src/java/org/apache/hadoop/hive/common/type/Decimal128.java&apos;
Reverted &apos;common/src/java/org/apache/hadoop/hive/common/type/HiveDecimal.java&apos;
Reverted &apos;serde/src/java/org/apache/hadoop/hive/serde2/binarysortable/BinarySortableSerDe.java&apos;
Reverted &apos;ql/src/test/results/clientpositive/decimal_2.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/decimal_udf.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/serde_regex.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/windowing_navfn.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/vector_decimal_math_funcs.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/decimal_4.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/udf_when.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/parquet_decimal.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/literal_decimal.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/decimal_6.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/vector_decimal_cast.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/avro_decimal_native.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/compute_stats_decimal.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/vector_decimal_expressions.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/windowing_decimal.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/decimal_3.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/parquet_decimal1.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/avro_decimal.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/udf_case.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/vector_decimal_aggregate.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/vector_decimal_mapjoin.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/vector_between_in.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/decimal_precision.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/decimal_5.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/windowing_rank.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/orc_predicate_pushdown.q.out&apos;
Reverted &apos;ql/src/test/org/apache/hadoop/hive/ql/exec/vector/expressions/TestVectorTypeCasts.java&apos;
Reverted &apos;ql/src/test/org/apache/hadoop/hive/ql/io/sarg/TestSearchArgumentImpl.java&apos;
Reverted &apos;ql/src/test/org/apache/hadoop/hive/ql/udf/generic/TestGenericUDFOPDivide.java&apos;
Reverted &apos;ql/src/test/queries/clientpositive/literal_decimal.q&apos;
Reverted &apos;ql/src/java/org/apache/hadoop/hive/ql/io/orc/RecordReaderImpl.java&apos;
++ egrep -v &apos;^X|^Performing status on external&apos;
++ awk &apos;{print $2}&apos;
++ svn status --no-ignore
+ rm -rf target datanucleus.log ant/target shims/target shims/0.20/target shims/0.20S/target shims/0.23/target shims/aggregator/target shims/common/target shims/common-secure/target packaging/target hbase-handler/target testutils/target jdbc/target metastore/target data/files/kv10.txt itests/target itests/hcatalog-unit/target itests/test-serde/target itests/qtest/target itests/hive-unit-hadoop2/target itests/hive-minikdc/target itests/hive-unit/target itests/custom-serde/target itests/util/target hcatalog/target hcatalog/core/target hcatalog/streaming/target hcatalog/server-extensions/target hcatalog/hcatalog-pig-adapter/target hcatalog/webhcat/svr/target hcatalog/webhcat/java-client/target hwi/target common/target common/src/gen contrib/target service/target serde/target beeline/target odbc/target cli/target ql/dependency-reduced-pom.xml ql/target ql/src/test/results/clientpositive/decimal_trailing.q.out ql/src/test/queries/clientpositive/decimal_trailing.q
+ svn update
U    service/src/java/org/apache/hive/service/cli/thrift/ThriftHttpCLIService.java
U    service/src/java/org/apache/hive/service/cli/thrift/ThriftBinaryCLIService.java
U    beeline/src/java/org/apache/hive/beeline/HiveSchemaTool.java
U    beeline/pom.xml
U    ql/src/test/templates/TestCompareCliDriver.vm
U    ql/src/test/templates/TestParse.vm
U    ql/src/test/templates/TestParseNegative.vm
U    ql/src/test/templates/TestCliDriver.vm
U    ql/src/test/templates/TestNegativeCliDriver.vm
U    ant/src/org/apache/hadoop/hive/ant/QTestGenTask.java
U    shims/0.20/src/main/java/org/apache/hadoop/hive/shims/Hadoop20Shims.java
U    shims/0.20S/src/main/java/org/apache/hadoop/hive/shims/Hadoop20SShims.java
U    shims/0.23/src/main/java/org/apache/hadoop/hive/shims/Hadoop23Shims.java
U    shims/common/src/main/java/org/apache/hadoop/hive/shims/HadoopShims.java
U    hbase-handler/src/test/templates/TestHBaseCliDriver.vm
U    hbase-handler/src/test/templates/TestHBaseNegativeCliDriver.vm
U    metastore/src/java/org/apache/hadoop/hive/metastore/txn/TxnHandler.java
U    metastore/src/java/org/apache/hadoop/hive/metastore/txn/TxnDbUtil.java
U    data/scripts/q_test_init.sql
U    data/scripts/q_test_cleanup.sql
U    data/conf/hive-site.xml
U    data/conf/tez/hive-site.xml
U    itests/qtest/pom.xml
A    itests/hive-unit-hadoop2/src/test/java/org/apache/hadoop/hive/ql/security/TestPasswordWithCredentialProvider.java
U    itests/hive-unit/src/test/java/org/apache/hadoop/hive/ql/TestLocationQueries.java
A    itests/hive-unit/src/test/java/org/apache/hadoop/hive/ql/security/TestPasswordWithConfig.java
U    itests/util/src/main/java/org/apache/hadoop/hive/hbase/HBaseQTestUtil.java
U    itests/util/src/main/java/org/apache/hadoop/hive/ql/QTestUtil.java

Fetching external item into &apos;hcatalog/src/test/e2e/harness&apos;
Updated external to revision 1616913.

Updated to revision 1616913.
+ patchCommandPath=/data/hive-ptest/working/scratch/smart-apply-patch.sh
+ patchFilePath=/data/hive-ptest/working/scratch/build.patch
+ [[ -f /data/hive-ptest/working/scratch/build.patch ]]
+ chmod +x /data/hive-ptest/working/scratch/smart-apply-patch.sh
+ /data/hive-ptest/working/scratch/smart-apply-patch.sh /data/hive-ptest/working/scratch/build.patch
The patch does not appear to apply with p0, p1, or p2
+ exit 1
&apos;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12660665&lt;/p&gt;</comment>
                            <comment id="14093555" author="mithun" created="Tue, 12 Aug 2014 00:29:57 +0000"  >&lt;p&gt;Need to rebase. (Plus, the file-format needs to be specified now as &quot;orcfile&quot; instead of &quot;orc&quot;).&lt;/p&gt;</comment>
                            <comment id="14093556" author="mithun" created="Tue, 12 Aug 2014 00:30:33 +0000"  >&lt;p&gt;Rebased. &lt;/p&gt;</comment>
                            <comment id="14093999" author="hiveqa" created="Tue, 12 Aug 2014 12:07:59 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12661099/HIVE-7341.4.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12661099/HIVE-7341.4.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 2 failed/errored test(s), 5891 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_dynpart_sort_opt_vectorization
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_ql_rewrite_gbtoidx
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/267/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/267/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/267/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/267/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-267/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-267/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 2 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12661099&lt;/p&gt;</comment>
                            <comment id="14094417" author="mithun" created="Tue, 12 Aug 2014 18:06:47 +0000"  >&lt;p&gt;Those test-failures don&apos;t seem related. I saw the same in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-7223&quot; title=&quot;Support generic PartitionSpecs in Metastore partition-functions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-7223&quot;&gt;&lt;del&gt;HIVE-7223&lt;/del&gt;&lt;/a&gt;. :/&lt;/p&gt;</comment>
                            <comment id="14096079" author="sushanth" created="Wed, 13 Aug 2014 20:38:46 +0000"  >&lt;p&gt;Mithun, this is probably the biggest patch I&apos;m going to +1 with near no comments to further refine! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/biggrin.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;That said, I do have one minor comment :&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;1766 +    LOG.warn(&quot;HiveStorageHandlers can&apos;t be instantiated on the client-side. &quot; +
1767 +        &quot;Replication of StorageHandler-based tables is not supported at this time. &quot; +
1768 +        &quot;Attempting to derive Input/OutputFormat settings from StorageHandler, on best effort: &quot;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;That log line referencing replication can be confusing to users simply using HCatTable and specifying a storage handler, I&apos;d suggest leaving that middle line out. Also, I&apos;d suggest using the word &quot;reliably&quot; as in &quot;HiveStorageHandlers can&apos;t be reliably instantiated on the client-side&quot;, since I do expect that basic functionality used by the create table, etc, can actually be used just fine for existing storage handlers. It&apos;s only if we start attempting to do things like partition pushdown/etc or actually read data that we&apos;d get into issues.&lt;/p&gt;</comment>
                            <comment id="14096215" author="mithun" created="Wed, 13 Aug 2014 22:14:58 +0000"  >&lt;p&gt;Thanks for the review, Sush. :] I&apos;ll post an updated patch with the log-message modified.&lt;/p&gt;</comment>
                            <comment id="14096218" author="mithun" created="Wed, 13 Aug 2014 22:17:31 +0000"  >&lt;p&gt;Updated patch, with a better log-message (about Tables with StorageHandlers specified.)&lt;/p&gt;</comment>
                            <comment id="14096702" author="hiveqa" created="Thu, 14 Aug 2014 07:38:22 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12661562/HIVE-7341.5.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12661562/HIVE-7341.5.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 3 failed/errored test(s), 5894 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_dynpart_sort_opt_vectorization
org.apache.hive.jdbc.TestJdbcDriver2.testDatabaseMetaData
org.apache.hive.jdbc.miniHS2.TestHiveServer2.testConnection
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/302/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/302/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/302/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/302/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-302/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-302/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 3 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12661562&lt;/p&gt;</comment>
                            <comment id="14100533" author="sushanth" created="Mon, 18 Aug 2014 10:58:58 +0000"  >&lt;p&gt;+1, committing.&lt;/p&gt;</comment>
                            <comment id="14100535" author="sushanth" created="Mon, 18 Aug 2014 11:02:21 +0000"  >&lt;p&gt;Committed. Thanks, Mithun!&lt;/p&gt;

&lt;p&gt;(@Lefty: There isn&apos;t much of a need of end-user documentation for this patch, but possibly a programmer documentation aspect, which should mostly be covered by javadocs and the bug report here)&lt;/p&gt;</comment>
                            <comment id="14101601" author="sushanth" created="Tue, 19 Aug 2014 00:23:12 +0000"  >&lt;p&gt;Ugh, sorry for not catching it at review, but this patch did cause some backward incompatibility that broke compilation for Falcon that depends on this api. Rather than reverting this patch back, I figure that opening a new bug (&lt;b&gt;MUST&lt;/b&gt; be resolved in 0.14) to put the old exception behaviour back is a less destructive way of doing so.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-7770&quot; title=&quot;Undo backward-incompatible behaviour change introduced by HIVE-7341&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-7770&quot;&gt;&lt;del&gt;HIVE-7770&lt;/del&gt;&lt;/a&gt; tracks that change.&lt;/p&gt;</comment>
                            <comment id="14101912" author="lefty@hortonworks.com" created="Tue, 19 Aug 2014 06:11:14 +0000"  >&lt;p&gt;Thanks for the doc note, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sushanth&quot; class=&quot;user-hover&quot; rel=&quot;sushanth&quot;&gt;Sushanth Sowmyan&lt;/a&gt;.  When you say &quot;should mostly be covered by javadocs and the bug report&quot; that leaves a little wiggle room for user docs, although I don&apos;t see a good place for this in the HCatalog wikidocs.  Would this only be done by external systems such as Falcon, or could it also be done directly by a Hive/HCat administrator?&lt;/p&gt;</comment>
                            <comment id="14102989" author="sushanth" created="Tue, 19 Aug 2014 22:47:21 +0000"  >&lt;p&gt;This would be used by tool developers, like the developers of Falcon, and not directly related to Hive/HCat administration.&lt;/p&gt;</comment>
                            <comment id="14103325" author="lefty@hortonworks.com" created="Wed, 20 Aug 2014 03:37:16 +0000"  >&lt;p&gt;Okay, thanks again.&lt;/p&gt;</comment>
                            <comment id="14210212" author="thejas" created="Thu, 13 Nov 2014 19:39:37 +0000"  >&lt;p&gt;This has been fixed in 0.14 release. Please open new jira if you see any issues.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12632277">HIVE-4274</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12734902">HIVE-7770</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12693459">HIVE-6378</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12731173">HIVE-7576</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12654376" name="HIVE-7341.1.patch" size="105525" author="mithun" created="Mon, 7 Jul 2014 20:20:42 +0000"/>
                            <attachment id="12658845" name="HIVE-7341.2.patch" size="108716" author="mithun" created="Thu, 31 Jul 2014 05:40:57 +0000"/>
                            <attachment id="12660665" name="HIVE-7341.3.patch" size="110060" author="mithun" created="Fri, 8 Aug 2014 17:07:01 +0000"/>
                            <attachment id="12661099" name="HIVE-7341.4.patch" size="111988" author="mithun" created="Tue, 12 Aug 2014 00:30:33 +0000"/>
                            <attachment id="12661562" name="HIVE-7341.5.patch" size="109807" author="mithun" created="Wed, 13 Aug 2014 22:17:31 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 31 Jul 2014 19:11:40 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>403304</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 3 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1xex3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>403356</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>