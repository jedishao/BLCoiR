<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun Dec 04 00:10:08 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HIVE-7271/HIVE-7271.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HIVE-7271] Speed up unit tests</title>
                <link>https://issues.apache.org/jira/browse/HIVE-7271</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Did some experiments to see if there&apos;s a way to speed up unit tests. TestCliDriver seemed to take a lot of time just spinning up/tearing down JVMs. I was also curious to see if running everything on a ram disk would help.&lt;/p&gt;

&lt;p&gt;Results (I ran tests up to authorization_2):&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Current setup: 40 minutes&lt;/li&gt;
	&lt;li&gt;Single JVM (not using child JVM to run all queries): 8 minutes&lt;/li&gt;
	&lt;li&gt;Single JVM + ram disk: 7 minutes&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;So the ram disk didn&apos;t help that much. But running tests in single JVM seems worthwhile doing.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12722995">HIVE-7271</key>
            <summary>Speed up unit tests</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hagleitn">Gunther Hagleitner</assignee>
                                    <reporter username="hagleitn">Gunther Hagleitner</reporter>
                        <labels>
                    </labels>
                <created>Sun, 22 Jun 2014 05:22:19 +0000</created>
                <updated>Mon, 10 Aug 2015 22:37:59 +0000</updated>
                            <resolved>Wed, 25 Jun 2014 02:36:21 +0000</resolved>
                                                    <fixVersion>0.14.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                <comments>
                            <comment id="14040154" author="hiveqa" created="Sun, 22 Jun 2014 15:00:34 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12651843/HIVE-7271.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12651843/HIVE-7271.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 43 failed/errored test(s), 5607 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_archive_excludeHadoop20
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_authorization_explain
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_dynpart_sort_opt_vectorization
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_dynpart_sort_optimization
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_fetch_aggregation
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_infer_bucket_sort_convert_join
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_mapjoin_hook
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_nonmr_fetch
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_orc_analyze
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_sample10
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_vectorized_parquet
org.apache.hadoop.hive.cli.TestContribCliDriver.testCliDriver_dboutput
org.apache.hadoop.hive.cli.TestContribNegativeCliDriver.testNegativeCliDriver_case_with_row_sequence
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_root_dir_external_table
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_authorization_ctas
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_cachingprintstream
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_compute_stats_long
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_dyn_part3
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_dyn_part_max_per_node
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_index_compact_entry_limit
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_index_compact_size_limit
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_local_mapred_error_cache
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_script_broken_pipe2
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_script_broken_pipe3
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_script_error
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_serde_regex2
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_stats_aggregator_error_2
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_stats_publisher_error_1
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_stats_publisher_error_2
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_udf_assert_true
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_udf_assert_true2
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_udf_reflect_neg
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_udf_test_error
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_udf_test_error_reduce
org.apache.hadoop.hive.ql.exec.TestExecDriver.testMapPlan1
org.apache.hadoop.hive.ql.exec.TestExecDriver.testMapPlan2
org.apache.hadoop.hive.ql.exec.TestExecDriver.testMapRedPlan1
org.apache.hadoop.hive.ql.exec.TestExecDriver.testMapRedPlan2
org.apache.hadoop.hive.ql.exec.TestExecDriver.testMapRedPlan3
org.apache.hadoop.hive.ql.exec.TestExecDriver.testMapRedPlan4
org.apache.hadoop.hive.ql.exec.TestExecDriver.testMapRedPlan5
org.apache.hadoop.hive.ql.exec.TestExecDriver.testMapRedPlan6
org.apache.hive.hcatalog.pig.TestHCatLoader.testReadDataPrimitiveTypes
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/551/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/551/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/551/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/551/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-551/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-551/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 43 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12651843&lt;/p&gt;</comment>
                            <comment id="14040172" author="brocknoland" created="Sun, 22 Jun 2014 16:50:40 +0000"  >&lt;p&gt;It looks like this increases the heap of the tests to 8GB. We&apos;d have to change the instance type we are using for PTest to allow for this.&lt;/p&gt;

&lt;p&gt;FYI &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=szehon&quot; class=&quot;user-hover&quot; rel=&quot;szehon&quot;&gt;Szehon Ho&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14040173" author="brocknoland" created="Sun, 22 Jun 2014 16:51:47 +0000"  >&lt;p&gt;Also be curious why we are removing the assertions in StandardStructObjectInspector.&lt;/p&gt;</comment>
                            <comment id="14040246" author="hagleitn" created="Sun, 22 Jun 2014 20:55:12 +0000"  >&lt;p&gt;I removed the asserts because it turns out that they are firing all the time in our unit tests. However since we execute the queries in a separate jvm that doesn&apos;t have assertions turned on they are ignored. Finally - even when they fire they result in correct query execution. Seems they were useful some time ago, but don&apos;t have any meaning anymore.&lt;/p&gt;

&lt;p&gt;In other words: In today&apos;s hive, &quot;assert XXX&quot; will only fire if you write an actual unit test (not .q files). We should probably switch to throwing assertion error or use guava&apos;s preconditions to encode certain conditions in hive.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brocknoland&quot; class=&quot;user-hover&quot; rel=&quot;brocknoland&quot;&gt;Brock Noland&lt;/a&gt;/&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=szehon&quot; class=&quot;user-hover&quot; rel=&quot;szehon&quot;&gt;Szehon Ho&lt;/a&gt; it might be possible to run with less than 8GB. I added that to run hashtable gen in process with all the other stuff. What instance type are we using currently?&lt;/p&gt;</comment>
                            <comment id="14040258" author="szehon" created="Sun, 22 Jun 2014 21:34:36 +0000"  >&lt;p&gt;Today the ptest host instance is size C1.xlarge (7gb).&lt;/p&gt;

&lt;p&gt;Glad somebody is looking at it, also had minor comments.&lt;/p&gt;

&lt;p&gt;1.  We shouldn&apos;t remove the hadoopShims check of local mode, in MapRedTask right?  Shouldn&apos;t user still able to set this via the mr-specific flags?&lt;/p&gt;

&lt;p&gt;1.  Not related to this change, but can this method name be refactored as it&apos;s confusing (now its executing in process and not in child jvm)&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;+    if (!conf.getBoolVar(HiveConf.ConfVars.SUBMITLOCALTASKVIACHILD)) {
+      // execute in process
+      return executeFromChildJVM(driverContext);
+    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14040263" author="hagleitn" created="Sun, 22 Jun 2014 21:42:55 +0000"  >&lt;blockquote&gt;&lt;p&gt;We shouldn&apos;t remove the hadoopShims check of local mode, in MapRedTask right? Shouldn&apos;t user still able to set this via the mr-specific flags?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I think this was done to &quot;fix&quot; something broken in the unit tests. The user can always choose in or out of process via the hive conf var (submit via child). This is independent of using local job runner or not (right now we always run out of process in local mode.)&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Not related to this change, but can this method name be refactored as it&apos;s confusing (now its executing in process and not in child jvm)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes, this is cheesy. I&apos;ll fix that.&lt;/p&gt;</comment>
                            <comment id="14040279" author="szehon" created="Sun, 22 Jun 2014 22:03:48 +0000"  >&lt;p&gt;Oh yea I hit that once, there&apos;s some statics in ExecMapper that don&apos;t get reset after the MR job, and result in some error if you run more than one query in localJobRunner, hence they forced the localJobRunner jobs to run out of process.  Not sure, but it may still be an issue that needs to be fixed, for this to work.&lt;/p&gt;</comment>
                            <comment id="14040294" author="hagleitn" created="Sun, 22 Jun 2014 23:17:19 +0000"  >&lt;p&gt;.2 fixes test failures and reigns in mem to 4g.&lt;/p&gt;</comment>
                            <comment id="14040295" author="hagleitn" created="Sun, 22 Jun 2014 23:18:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=szehon&quot; class=&quot;user-hover&quot; rel=&quot;szehon&quot;&gt;Szehon Ho&lt;/a&gt; I think this is already fixed. I remember having to clean that up for tez container reuse. I think the IOContext is properly reinitialized for each file now. Also, the unit tests should show if that was still an issue.&lt;/p&gt;</comment>
                            <comment id="14040326" author="hiveqa" created="Mon, 23 Jun 2014 01:14:02 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12651897/HIVE-7271.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12651897/HIVE-7271.2.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 7 failed/errored test(s), 5625 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_authorization_explain
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_decimal_10_0
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_dynpart_sort_optimization
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_root_dir_external_table
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_authorization_ctas
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_dyn_part3
org.apache.hive.hcatalog.pig.TestHCatLoader.testReadDataPrimitiveTypes
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/552/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/552/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/552/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/552/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-552/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-552/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 7 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12651897&lt;/p&gt;</comment>
                            <comment id="14040355" author="hagleitn" created="Mon, 23 Jun 2014 02:43:02 +0000"  >&lt;p&gt;missed two golden files in .2. other than that looks like no new failures.&lt;/p&gt;</comment>
                            <comment id="14040358" author="hagleitn" created="Mon, 23 Jun 2014 02:49:03 +0000"  >&lt;p&gt;Also - checked some build/test times in the precommit q. seems like the cli portion of the tests went from 25 hrs to more like 8 hrs. Although run in parallel it seems to not hit that hard - something else the critical path?&lt;/p&gt;</comment>
                            <comment id="14040395" author="brocknoland" created="Mon, 23 Jun 2014 03:58:23 +0000"  >&lt;p&gt;We specify the number of q files to include in a &quot;test batch&quot; and that number is much less than the number of q file tests. Thus we probably aren&apos;t seeing as much benefit. After this change we can probably increase the batch size.&lt;/p&gt;</comment>
                            <comment id="14040400" author="brocknoland" created="Mon, 23 Jun 2014 04:05:10 +0000"  >&lt;p&gt;I just checked and we run 3 threads per c1.xlarge (3 * 4GB max heap). I think we should change to c3* instance types. It looks like spot prices for c3.2xlarge, which has 15GB of ram, are similar to c1.xlarge.&lt;/p&gt;</comment>
                            <comment id="14040412" author="brocknoland" created="Mon, 23 Jun 2014 04:37:22 +0000"  >&lt;p&gt;To use the new instance type we need to upgrade jclouds. I created &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-7274&quot; title=&quot;Update PTest2 to JClouds 1.7.3&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-7274&quot;&gt;&lt;del&gt;HIVE-7274&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14040433" author="hagleitn" created="Mon, 23 Jun 2014 05:27:48 +0000"  >&lt;p&gt;Maybe we don&apos;t have to switch instance type after all. I just tried to run some of the larger tests with 2gb. Looks good. I might have just run into a mem leak earlier. Before this patch we ran 2 1gb jvms per query. Now it&apos;s 1 2gb. If that works mem requirements should be the same.&lt;/p&gt;</comment>
                            <comment id="14040550" author="hiveqa" created="Mon, 23 Jun 2014 09:12:24 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12651931/HIVE-7271.5.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12651931/HIVE-7271.5.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 6 failed/errored test(s), 5669 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_sample_islocalmode_hook
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_dynpart_sort_optimization
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_root_dir_external_table
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_authorization_ctas
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_dyn_part3
org.apache.hive.jdbc.miniHS2.TestHiveServer2.testConnection
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/558/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/558/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/558/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/558/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-558/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-558/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 6 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12651931&lt;/p&gt;</comment>
                            <comment id="14041630" author="hagleitn" created="Tue, 24 Jun 2014 02:55:49 +0000"  >&lt;p&gt;.6 fixes test failures (golden files again). Also includes the renamed methods &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=szehon&quot; class=&quot;user-hover&quot; rel=&quot;szehon&quot;&gt;Szehon Ho&lt;/a&gt; asked for.&lt;/p&gt;</comment>
                            <comment id="14041634" author="brocknoland" created="Tue, 24 Jun 2014 03:01:38 +0000"  >&lt;p&gt;+1 LGTM&lt;/p&gt;

&lt;p&gt;Regardless of the memory item, I updated our instance types since the c3 have a faster CPU.&lt;/p&gt;</comment>
                            <comment id="14041755" author="szehon" created="Tue, 24 Jun 2014 06:18:34 +0000"  >&lt;p&gt;+1, thanks a lot for this Gunther.  Just for my understanding, the tests for which you set submitviachild=true and local.task.via.child=true were because of OOM at 2GB?&lt;/p&gt;</comment>
                            <comment id="14041878" author="hiveqa" created="Tue, 24 Jun 2014 08:44:56 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12652124/HIVE-7271.6.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12652124/HIVE-7271.6.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 4 failed/errored test(s), 5654 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_sample8
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_root_dir_external_table
org.apache.hadoop.hive.ql.TestMTQueries.testMTQueries1
org.apache.hive.jdbc.miniHS2.TestHiveServer2.testConnection
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/572/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/572/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/572/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/572/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-572/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-572/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 4 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12652124&lt;/p&gt;</comment>
                            <comment id="14042531" author="hagleitn" created="Tue, 24 Jun 2014 18:58:06 +0000"  >&lt;p&gt;Smaller size causes MTQueries to fail. In the latest patch I&apos;ve made a small change to run the multithreaded query test starting child VM (makes sense that multiple join/group by queries in process would eventually run out of memory).&lt;/p&gt;</comment>
                            <comment id="14042532" author="hagleitn" created="Tue, 24 Jun 2014 19:00:14 +0000"  >&lt;p&gt;The other failures are unrelated. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=szehon&quot; class=&quot;user-hover&quot; rel=&quot;szehon&quot;&gt;Szehon Ho&lt;/a&gt; - = I did not analyze all of them in detail, but yes, the ones I looked at ran OOM, so I switched them to out-of-process.&lt;/p&gt;</comment>
                            <comment id="14042548" author="szehon" created="Tue, 24 Jun 2014 19:13:18 +0000"  >&lt;p&gt;Sounds good, thanks.&lt;/p&gt;</comment>
                            <comment id="14042907" author="hiveqa" created="Wed, 25 Jun 2014 00:47:24 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12652249/HIVE-7271.7.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12652249/HIVE-7271.7.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 3 failed/errored test(s), 5669 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_root_dir_external_table
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_schemeAuthority2
org.apache.hive.jdbc.miniHS2.TestHiveServer2.testConnection
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/582/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/582/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/582/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/582/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-582/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-582/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 3 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12652249&lt;/p&gt;</comment>
                            <comment id="14042978" author="hagleitn" created="Wed, 25 Jun 2014 02:35:23 +0000"  >&lt;p&gt;Test failures are unrelated. (ran schemeAuthority locally a couple times no problems).&lt;/p&gt;</comment>
                            <comment id="14042979" author="hagleitn" created="Wed, 25 Jun 2014 02:36:21 +0000"  >&lt;p&gt;Committed to trunk. Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brocknoland&quot; class=&quot;user-hover&quot; rel=&quot;brocknoland&quot;&gt;Brock Noland&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=szehon&quot; class=&quot;user-hover&quot; rel=&quot;szehon&quot;&gt;Szehon Ho&lt;/a&gt;!&lt;/p&gt;</comment>
                            <comment id="14043139" author="lefty@hortonworks.com" created="Wed, 25 Jun 2014 07:33:58 +0000"  >&lt;p&gt;This adds configuration parameter &lt;b&gt;hive.exec.submit.local.task.via.child&lt;/b&gt; to HiveConf.java, so it needs a description in hive-default.xml.template.&lt;/p&gt;

&lt;p&gt;Or you can put the description in a release note, and I&apos;ll make sure it gets into the new version of HiveConf.java (which will include descriptions) after &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-6037&quot; title=&quot;Synchronize HiveConf with hive-default.xml.template and support show conf&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-6037&quot;&gt;&lt;del&gt;HIVE-6037&lt;/del&gt;&lt;/a&gt; gets committed.&lt;/p&gt;</comment>
                            <comment id="14043251" author="hagleitn" created="Wed, 25 Jun 2014 09:42:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=leftylev&quot; class=&quot;user-hover&quot; rel=&quot;leftylev&quot;&gt;Lefty Leverenz&lt;/a&gt; Just a thought: This parameter is useful to run unit tests quicker, but in general not something i would recommend anyone to set to true outside of that. It basically runs the hashtable generation for mapjoins in the CLI process - something that could give you memory issues. I&apos;ll put that in the release notes, but in general I think parameters like this needn&apos;t be exposed to users. In these cases should we just leave it out of the xml?&lt;/p&gt;</comment>
                            <comment id="14043273" author="lefty@hortonworks.com" created="Wed, 25 Jun 2014 10:08:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hagleitn&quot; class=&quot;user-hover&quot; rel=&quot;hagleitn&quot;&gt;Gunther Hagleitner&lt;/a&gt;, the wiki has a section for test parameters (hive.test.mode, etc.) so this can be documented with them.  I recommend that the release note &amp;amp; description explicitly advise people not to set this parameter to true except when running unit tests.  Of course the wiki will link to this Jira so they&apos;ll be able to find the information, but why make them hunt for it?&lt;/p&gt;

&lt;p&gt;When &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-6037&quot; title=&quot;Synchronize HiveConf with hive-default.xml.template and support show conf&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-6037&quot;&gt;&lt;del&gt;HIVE-6037&lt;/del&gt;&lt;/a&gt; gets committed, all parameter descriptions will be in HiveConf.java and then hive-default.xml.template will be generated from HiveConf.java.  You can have an empty description if you prefer, but the parameter will still appear in hive-default.xml.template at that point.&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-TestProperties&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Configuration Properties &amp;#8211; Test Properties &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14043278" author="lefty@hortonworks.com" created="Wed, 25 Jun 2014 10:11:49 +0000"  >&lt;p&gt;Perhaps this should be documented here too:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Unit+Test+Parallel+Execution&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Unit Test Parallel Execution &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14210598" author="thejas" created="Thu, 13 Nov 2014 19:41:38 +0000"  >&lt;p&gt;This has been fixed in 0.14 release. Please open new jira if you see any issues.&lt;/p&gt;</comment>
                            <comment id="14482556" author="lefty@hortonworks.com" created="Tue, 7 Apr 2015 04:21:33 +0000"  >&lt;p&gt;Doc note:  &lt;b&gt;hive.exec.submit.local.task.via.child&lt;/b&gt; is documented in two places in the wiki.&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Unit+Test+Parallel+Execution#UnitTestParallelExecution-Configuration&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Unit Test Parallel Execution &amp;#8211; Configuration &lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-hive.exec.submit.local.task.via.child&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Configuration Properties &amp;#8211; Test Properties &amp;#8211; hive.exec.submit.local.task.via.child &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Please review the doc.  If it&apos;s okay, the TODOC14 label can be removed from this issue.  If changes are needed, just let me know.&lt;/p&gt;</comment>
                            <comment id="14680888" author="sladymon" created="Mon, 10 Aug 2015 22:37:59 +0000"  >&lt;p&gt;The TODOC14 label has been removed from this issue, although the documentation has not been reviewed. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hagleitn&quot; class=&quot;user-hover&quot; rel=&quot;hagleitn&quot;&gt;Gunther Hagleitner&lt;/a&gt;, if you review the documentation in the future and notice anything that needs to be changed, please let Lefty (or myself) know.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12663479">HIVE-5077</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12738028">HIVE-7924</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12651843" name="HIVE-7271.1.patch" size="10517" author="hagleitn" created="Sun, 22 Jun 2014 05:24:37 +0000"/>
                            <attachment id="12651897" name="HIVE-7271.2.patch" size="34058" author="hagleitn" created="Sun, 22 Jun 2014 23:17:19 +0000"/>
                            <attachment id="12651915" name="HIVE-7271.3.patch" size="33274" author="hagleitn" created="Mon, 23 Jun 2014 02:43:02 +0000"/>
                            <attachment id="12651929" name="HIVE-7271.4.patch" size="33274" author="hagleitn" created="Mon, 23 Jun 2014 04:38:03 +0000"/>
                            <attachment id="12651931" name="HIVE-7271.5.patch" size="33274" author="hagleitn" created="Mon, 23 Jun 2014 05:27:48 +0000"/>
                            <attachment id="12652124" name="HIVE-7271.6.patch" size="35426" author="hagleitn" created="Tue, 24 Jun 2014 02:55:49 +0000"/>
                            <attachment id="12652249" name="HIVE-7271.7.patch" size="36466" author="hagleitn" created="Tue, 24 Jun 2014 18:58:06 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 22 Jun 2014 15:00:34 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>401182</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 16 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1x20v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>401261</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>hive.exec.submit.local.task.via.child&lt;br/&gt;
&lt;br/&gt;
Determines whether local tasks (typically mapjoin hashtable generation phase) runs in separate JVM (&amp;quot;true&amp;quot;, recommended) or not. Avoids the overhead of spawning new JVM, but can lead to out-of-memory issues.</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>