<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sat Dec 03 23:28:08 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HIVE-5972/HIVE-5972.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HIVE-5972] Hiveserver2 is much slower than hiveserver1</title>
                <link>https://issues.apache.org/jira/browse/HIVE-5972</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;we are building ms sql cube by linkedserver connectiong hiveserver with Cloudera&apos;s ODBC driver.&lt;/p&gt;

&lt;p&gt;There are two test results:&lt;br/&gt;
1. hiveserver1 running on 2CPUs, 8G mem, took about 8 hours&lt;br/&gt;
2. hiveserver2 running on 4CPUs, 16 mem, took about 13 hours and 27min (never successful on machine with 2CPUs, 8G mem)&lt;/p&gt;

&lt;p&gt; Although on both cases, almost all CPUs are busy when building cube.&lt;/p&gt;

&lt;p&gt;But I cannot understand why hiveserver2 is much slower than hiveserver1, because from doc, hs2 support concurrency, it should be faster than hs1, isn&apos;t it?&lt;/p&gt;



&lt;p&gt;Thanks.&lt;/p&gt;



&lt;p&gt;CDH4.3 on CentOS6.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12683047">HIVE-5972</key>
            <summary>Hiveserver2 is much slower than hiveserver1</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="qwert">a bc</reporter>
                        <labels>
                    </labels>
                <created>Fri, 6 Dec 2013 03:19:42 +0000</created>
                <updated>Mon, 16 Dec 2013 05:18:01 +0000</updated>
                            <resolved>Mon, 16 Dec 2013 05:17:38 +0000</resolved>
                                    <version>0.10.0</version>
                                                    <component>HiveServer2</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13840939" author="cwsteinbach" created="Fri, 6 Dec 2013 03:59:34 +0000"  >&lt;blockquote&gt;
&lt;p&gt;1. hiveserver1 running on 2CPUs, 8G mem, took about 8 hours&lt;br/&gt;
2. hiveserver2 running on 4CPUs, 16 mem, took about 13 hours and 27min (never successful on machine with 2CPUs, 8G mem)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;How large was the resultset that your query generated? How much time did hs1/hs2 spend executing the query on the cluster as opposed to fetching the resultset through hs1/hs2?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;But I cannot understand why hiveserver2 is much slower than hiveserver1, because from doc, hs2 support concurrency, it should be faster than hs1, isn&apos;t it?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;In this context &quot;concurrency&quot; means that HiveServer2 is able to handle multiple concurrent client connections, something that HS1 can&apos;t do. Also, regardless of whether you&apos;re using HS1 or HS2, the actual work of executing the query is delegated to the underlying MR cluster. The HS1/HS2 server coordinates query execution on the cluster and then acts as a relay through which the client fetches the results of the query. It&apos;s this last step (the result set fetch) which is known to be slower on HS2, and we&apos;re tracking the task of fixing this performance regression in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3746&quot; title=&quot;Fix HS2 ResultSet Serialization Performance Regression&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3746&quot;&gt;&lt;del&gt;HIVE-3746&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;So far the information you have provided makes me think that this is a duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3746&quot; title=&quot;Fix HS2 ResultSet Serialization Performance Regression&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3746&quot;&gt;&lt;del&gt;HIVE-3746&lt;/del&gt;&lt;/a&gt;. Please let us know if you think some other issue is causing the performance regression.&lt;/p&gt;</comment>
                            <comment id="13848827" author="cwsteinbach" created="Mon, 16 Dec 2013 05:17:38 +0000"  >&lt;p&gt;Resolving this as a duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3746&quot; title=&quot;Fix HS2 ResultSet Serialization Performance Regression&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3746&quot;&gt;&lt;del&gt;HIVE-3746&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12617683">HIVE-3746</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12668186">HIVE-5276</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 6 Dec 2013 03:59:34 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>362299</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 50 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1qg9j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>362593</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>