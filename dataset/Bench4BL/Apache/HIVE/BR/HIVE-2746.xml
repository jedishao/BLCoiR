<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sat Dec 03 00:14:28 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HIVE-2746/HIVE-2746.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HIVE-2746] Metastore client doesn&apos;t log properly in case of connection failure to server</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2746</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;LOG.error(e.getStackTrace()) in current code prints memory location of StackTraceElement[] instead of message.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12539686">HIVE-2746</key>
            <summary>Metastore client doesn&apos;t log properly in case of connection failure to server</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ashutoshc">Ashutosh Chauhan</assignee>
                                    <reporter username="ashutoshc">Ashutosh Chauhan</reporter>
                        <labels>
                    </labels>
                <created>Tue, 24 Jan 2012 22:49:36 +0000</created>
                <updated>Thu, 2 May 2013 02:29:48 +0000</updated>
                            <resolved>Thu, 26 Jan 2012 02:38:24 +0000</resolved>
                                    <version>0.8.0</version>
                                    <fixVersion>0.9.0</fixVersion>
                                    <component>Metastore</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13192638" author="phabricator@reviews.facebook.net" created="Tue, 24 Jan 2012 22:56:39 +0000"  >&lt;p&gt;ashutoshc requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2746&quot; title=&quot;Metastore client doesn&amp;#39;t log properly in case of connection failure to server&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2746&quot;&gt;&lt;del&gt;HIVE-2746&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Metastore client doesn&apos;t log properly in case of connection failure to server&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2746&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2746&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Corrected log message to print exception message instead of reference address.&lt;/p&gt;

&lt;p&gt;  LOG.error(e.getStackTrace()) in current code prints memory location of StackTraceElement[] instead of message.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1395&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1395&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/2913/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/2913/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13192750" author="phabricator@reviews.facebook.net" created="Wed, 25 Jan 2012 01:12:39 +0000"  >&lt;p&gt;cwsteinbach has requested changes to the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2746&quot; title=&quot;Metastore client doesn&amp;#39;t log properly in case of connection failure to server&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2746&quot;&gt;&lt;del&gt;HIVE-2746&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Metastore client doesn&apos;t log properly in case of connection failure to server&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java:292 Is there any point in trying to set the ugi if the connection failed? Maybe this should be raised directly from the catch block above?&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1395&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1395&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13192758" author="phabricator@reviews.facebook.net" created="Wed, 25 Jan 2012 01:22:39 +0000"  >&lt;p&gt;ashutoshc has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2746&quot; title=&quot;Metastore client doesn&amp;#39;t log properly in case of connection failure to server&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2746&quot;&gt;&lt;del&gt;HIVE-2746&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Metastore client doesn&apos;t log properly in case of connection failure to server&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java:292 No, in the catch block above exception is only logged, not thrown, because thats within a for loop of retries. Connection may succeed in a retry. We can&apos;t throw exception there.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1395&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1395&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13192771" author="phabricator@reviews.facebook.net" created="Wed, 25 Jan 2012 01:36:45 +0000"  >&lt;p&gt;cwsteinbach has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2746&quot; title=&quot;Metastore client doesn&amp;#39;t log properly in case of connection failure to server&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2746&quot;&gt;&lt;del&gt;HIVE-2746&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Metastore client doesn&apos;t log properly in case of connection failure to server&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java:292 Ok, but then shouldn&apos;t this block be moved above the preceding one where we try to set the ugi? If we&apos;re not connected won&apos;t the set_ugi operation fail anyway with a LoginException?&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1395&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1395&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13192777" author="phabricator@reviews.facebook.net" created="Wed, 25 Jan 2012 01:44:39 +0000"  >&lt;p&gt;cwsteinbach has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2746&quot; title=&quot;Metastore client doesn&amp;#39;t log properly in case of connection failure to server&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2746&quot;&gt;&lt;del&gt;HIVE-2746&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Metastore client doesn&apos;t log properly in case of connection failure to server&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java:292 Ok, I think I&apos;m getting confused by the inconsistent indentation in this method (can you fix that?). It looks to me like the block of code that attempts to set the ugi should be taken out of the for-loop and moved below the !isConnected check. Does that make sense? Otherwise we&apos;re just polluting the log with noise every time a connection attempt fails.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1395&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1395&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13193169" author="phabricator@reviews.facebook.net" created="Wed, 25 Jan 2012 18:18:39 +0000"  >&lt;p&gt;ashutoshc updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2746&quot; title=&quot;Metastore client doesn&amp;#39;t log properly in case of connection failure to server&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2746&quot;&gt;&lt;del&gt;HIVE-2746&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Metastore client doesn&apos;t log properly in case of connection failure to server&quot;.&lt;br/&gt;
Reviewers: JIRA, cwsteinbach&lt;/p&gt;

&lt;p&gt;  Incorporated Carl&apos;s suggestions. Fixed indentation. Moved both setugi functionality as well as secure transport setup outside of for loop, since retrials are for transport.open() and that code doesn&apos;t belong in for loop.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1395&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1395&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java&lt;/p&gt;</comment>
                            <comment id="13193441" author="ashutoshc" created="Wed, 25 Jan 2012 23:33:17 +0000"  >&lt;p&gt;All the tests passed with latest patch except for insert2_overwrite_partitions.q which seems unrelated to this patch and randomly fails on trunk.&lt;/p&gt;</comment>
                            <comment id="13193458" author="phabricator@reviews.facebook.net" created="Thu, 26 Jan 2012 00:13:39 +0000"  >&lt;p&gt;cwsteinbach has accepted the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2746&quot; title=&quot;Metastore client doesn&amp;#39;t log properly in case of connection failure to server&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2746&quot;&gt;&lt;del&gt;HIVE-2746&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Metastore client doesn&apos;t log properly in case of connection failure to server&quot;.&lt;/p&gt;

&lt;p&gt;  +1&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1395&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1395&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13193500" author="ashutoshc" created="Thu, 26 Jan 2012 01:18:43 +0000"  >&lt;p&gt;Patch with appropriate appropriate grant perms. Going to commit soon.&lt;/p&gt;</comment>
                            <comment id="13193528" author="ashutoshc" created="Thu, 26 Jan 2012 02:38:24 +0000"  >&lt;p&gt;Committed to trunk.&lt;/p&gt;</comment>
                            <comment id="13193621" author="hudson" created="Thu, 26 Jan 2012 07:34:58 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1221 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1221/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1221/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2746&quot; title=&quot;Metastore client doesn&amp;#39;t log properly in case of connection failure to server&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2746&quot;&gt;&lt;del&gt;HIVE-2746&lt;/del&gt;&lt;/a&gt; : Metastore client doesn&apos;t log properly in case of connection failure to server (hashutosh)&lt;/p&gt;

&lt;p&gt;hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1236025&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1236025&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13265276" author="ashutoshc" created="Mon, 30 Apr 2012 21:11:28 +0000"  >&lt;p&gt;This issue is closed now. It was released with the fix in 0.9.0. If there is a problem, please open a new jira and link this one with that.&lt;/p&gt;</comment>
                            <comment id="13548248" author="hudson" created="Wed, 9 Jan 2013 10:24:58 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2746&quot; title=&quot;Metastore client doesn&amp;#39;t log properly in case of connection failure to server&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2746&quot;&gt;&lt;del&gt;HIVE-2746&lt;/del&gt;&lt;/a&gt; : Metastore client doesn&apos;t log properly in case of connection failure to server (hashutosh) (Revision 1236025)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1236025&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1236025&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12539700">HCATALOG-231</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12511748" name="ASF.LICENSE.NOT.GRANTED--HIVE-2746.D1395.1.patch" size="2197" author="phabricator@reviews.facebook.net" created="Tue, 24 Jan 2012 22:56:40 +0000"/>
                            <attachment id="12511859" name="ASF.LICENSE.NOT.GRANTED--HIVE-2746.D1395.2.patch" size="7945" author="phabricator@reviews.facebook.net" created="Wed, 25 Jan 2012 18:18:40 +0000"/>
                            <attachment id="12511925" name="hive-2746.patch" size="7990" author="ashutoshc" created="Thu, 26 Jan 2012 01:18:43 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 24 Jan 2012 22:56:39 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>225189</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 47 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i09z2f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>56122</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>