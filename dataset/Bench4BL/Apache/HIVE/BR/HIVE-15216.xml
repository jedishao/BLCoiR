<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 02 11:49:19 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HIVE-15216/HIVE-15216.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HIVE-15216] Files on S3 are deleted one by one in INSERT OVERWRITE queries</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15216</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;When running &lt;tt&gt;INSERT OVERWRITE&lt;/tt&gt; queries the files to overwrite are deleted one by one. The reason is that, by default, hive.exec.stagingdir is inside the target table directory.&lt;/p&gt;

&lt;p&gt;Ideally Hive would just delete the entire table directory, but it can&apos;t do that since the staging data is also inside the directory. Instead it deletes each file one-by-one, which is very slow.&lt;/p&gt;

&lt;p&gt;There are a few ways to fix this:&lt;/p&gt;

&lt;p&gt;1: Move the staging directory outside the table location. This can be done by  setting hive.exec.stagingdir to a different location when running on S3. It would be nice if users didn&apos;t have to explicitly set this when running on S3 and things just worked out-of-the-box. My understanding is that hive.exec.stagingdir was only added to support HDFS encryption zones. Since S3 doesn&apos;t have encryption zones, there should be no problem with using the value of hive.exec.scratchdir to store all intermediate data instead.&lt;/p&gt;

&lt;p&gt;2: Multi-thread the delete operations&lt;/p&gt;

&lt;p&gt;3: See if the &lt;tt&gt;S3AFileSystem&lt;/tt&gt; can expose some type of bulk delete op&lt;/p&gt;</description>
                <environment></environment>
        <key id="13020969">HIVE-15216</key>
            <summary>Files on S3 are deleted one by one in INSERT OVERWRITE queries</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="stakiar">Sahil Takiar</reporter>
                        <labels>
                    </labels>
                <created>Tue, 15 Nov 2016 23:23:12 +0000</created>
                <updated>Wed, 16 Nov 2016 02:01:33 +0000</updated>
                            <resolved>Tue, 15 Nov 2016 23:24:36 +0000</resolved>
                                                                    <component>Hive</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i36dc7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>