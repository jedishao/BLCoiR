<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun Dec 04 00:01:52 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HIVE-13917/HIVE-13917.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HIVE-13917] Investigate and fix tests which are timing out in the precommit build</title>
                <link>https://issues.apache.org/jira/browse/HIVE-13917</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Three tests seem to timeout consistently.&lt;br/&gt;
TestJdbcWithMiniHA&lt;br/&gt;
TestJdbcWithMiniMr&lt;br/&gt;
TestOperationLoggingAPIWithTez&lt;/p&gt;</description>
                <environment></environment>
        <key id="12975013">HIVE-13917</key>
            <summary>Investigate and fix tests which are timing out in the precommit build</summary>
                <type id="3" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/task.png">Task</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sseth">Siddharth Seth</assignee>
                                    <reporter username="sseth">Siddharth Seth</reporter>
                        <labels>
                    </labels>
                <created>Thu, 2 Jun 2016 02:13:12 +0000</created>
                <updated>Wed, 23 Nov 2016 10:53:14 +0000</updated>
                            <resolved>Sat, 4 Jun 2016 00:02:30 +0000</resolved>
                                                    <fixVersion>2.2.0</fixVersion>
                                    <component>Testing Infrastructure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="15313372" author="sseth" created="Fri, 3 Jun 2016 00:15:14 +0000"  >&lt;p&gt;Looks like the MiniCluster was not starting properly, and the failure did not cause the test to fail - likely due to the guice injector in YARN running into the issue.&lt;br/&gt;
From target/surefire-reports/org.apache.hive.jdbc.TestJdbcWithMiniHA-output.txt&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;RM-0&quot;&lt;/span&gt; java.lang.NoClassDefFoundError: org/apache/hadoop/yarn/api/ApplicationBaseProtocol
  at org.apache.hadoop.yarn.server.resourcemanager.webapp.RMWebApp.setup(RMWebApp.java:57)
  at org.apache.hadoop.yarn.webapp.WebApp.configureServlets(WebApp.java:159)
  at com.google.inject.servlet.ServletModule.configure(ServletModule.java:53)
  at com.google.inject.AbstractModule.configure(AbstractModule.java:59)
  at com.google.inject.spi.Elements$RecordingBinder.install(Elements.java:223)
  at com.google.inject.spi.Elements.getElements(Elements.java:101)
  at com.google.inject.internal.InjectorShell$Builder.build(InjectorShell.java:133)
  at com.google.inject.internal.InternalInjectorCreator.build(InternalInjectorCreator.java:103)
  at com.google.inject.Guice.createInjector(Guice.java:95)
  at com.google.inject.Guice.createInjector(Guice.java:72)
  at com.google.inject.Guice.createInjector(Guice.java:62)
  at org.apache.hadoop.yarn.webapp.WebApps$Builder.start(WebApps.java:280)
  at org.apache.hadoop.yarn.server.resourcemanager.ResourceManager.startWepApp(ResourceManager.java:987)
  at org.apache.hadoop.yarn.server.resourcemanager.ResourceManager.serviceStart(ResourceManager.java:1087)
  at org.apache.hadoop.service.AbstractService.start(AbstractService.java:193)
  at org.apache.hadoop.yarn.server.MiniYARNCluster$2.run(MiniYARNCluster.java:310)
Caused by: java.lang.ClassNotFoundException: org.apache.hadoop.yarn.api.ApplicationBaseProtocol
  at java.net.URLClassLoader.findClass(URLClassLoader.java:381)
  at java.lang.&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.loadClass(&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.java:424)
  at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:331)
  at java.lang.&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.loadClass(&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.java:357)
  ... 16 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;The test output file (target/surefire-reports/org.apache.hive.jdbc.TestJdbcWithMiniHA-output.txt in this case) is not copied out from the test system. I&apos;ll open another jira to try copying such files out as well.&lt;/p&gt;</comment>
                            <comment id="15313375" author="sseth" created="Fri, 3 Jun 2016 00:16:24 +0000"  >&lt;p&gt;This patch seems to fix all three failing tests, by pulling in the  yarn-api dependency explicitly.&lt;/p&gt;

&lt;p&gt;cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashutoshc&quot; class=&quot;user-hover&quot; rel=&quot;ashutoshc&quot;&gt;Ashutosh Chauhan&lt;/a&gt;  - please review.&lt;/p&gt;</comment>
                            <comment id="15313388" author="ashutoshc" created="Fri, 3 Jun 2016 00:30:19 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="15314318" author="spena" created="Fri, 3 Jun 2016 16:01:18 +0000"  >&lt;p&gt;I&apos;d like to use this patch to run a test on builds.apache.org with the new job. That means we will skip the build queue from our current jenkins server, and see tests results early instead of waiting for the weekend.&lt;/p&gt;

&lt;p&gt;What do you think?&lt;/p&gt;</comment>
                            <comment id="15314374" author="ashutoshc" created="Fri, 3 Jun 2016 16:34:13 +0000"  >&lt;p&gt;sounds good to me.&lt;/p&gt;</comment>
                            <comment id="15314728" author="hiveqa" created="Fri, 3 Jun 2016 20:19:58 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12807861/HIVE-13917.01.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12807861/HIVE-13917.01.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 4 failed/errored test(s), 10213 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_stats_list_bucket
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_subquery_multiinsert
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver_constprog_partitioner
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver_index_bitmap3
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-54-177-240-2.us-west-1.compute.amazonaws.com/job/PreCommit-HIVE-MASTER-Build/6/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-54-177-240-2.us-west-1.compute.amazonaws.com/job/PreCommit-HIVE-MASTER-Build/6/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-54-177-240-2.us-west-1.compute.amazonaws.com/job/PreCommit-HIVE-MASTER-Build/6/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-54-177-240-2.us-west-1.compute.amazonaws.com/job/PreCommit-HIVE-MASTER-Build/6/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-50-18-27-0.us-west-1.compute.amazonaws.com/logs/PreCommit-HIVE-MASTER-Build-6/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-50-18-27-0.us-west-1.compute.amazonaws.com/logs/PreCommit-HIVE-MASTER-Build-6/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 4 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12807861 - PreCommit-HIVE-MASTER-Build&lt;/p&gt;</comment>
                            <comment id="15314754" author="spena" created="Fri, 3 Jun 2016 20:36:33 +0000"  >&lt;p&gt;Great. It works.&lt;br/&gt;
I still need to change the Jenkins URL. This is the correct one:&lt;br/&gt;
&lt;a href=&quot;https://builds.apache.org/view/H-L/view/Hive/job/PreCommit-HIVE-MASTER-Build/6/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/view/H-L/view/Hive/job/PreCommit-HIVE-MASTER-Build/6/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;There&apos;s still one issue with the post-commit not publishing the test results. I did configure that, but it was not displayed. I&apos;ll investigate.&lt;/p&gt;</comment>
                            <comment id="15315135" author="ashutoshc" created="Sat, 4 Jun 2016 00:02:30 +0000"  >&lt;p&gt;Pushed to master. Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sseth&quot; class=&quot;user-hover&quot; rel=&quot;sseth&quot;&gt;Siddharth Seth&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15316877" author="lefty@hortonworks.com" created="Mon, 6 Jun 2016 17:53:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashutoshc&quot; class=&quot;user-hover&quot; rel=&quot;ashutoshc&quot;&gt;Ashutosh Chauhan&lt;/a&gt;, this was only pushed to master so it ought to say Fix Version 2.2.0 instead of 2.1.0.&lt;/p&gt;</comment>
                            <comment id="15689741" author="lefty@hortonworks.com" created="Wed, 23 Nov 2016 10:53:14 +0000"  >&lt;p&gt;But now it has been committed to branch-2.1 so 2.1.0 should be restored to Fix Version (along with 2.2.0).&lt;/p&gt;

&lt;p&gt;See commit b65980f3e0fc83631306535f65cc32ea60adbb34 (&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=spena&quot; class=&quot;user-hover&quot; rel=&quot;spena&quot;&gt;Sergio Pe&#241;a&lt;/a&gt;).&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12975014">HIVE-13918</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12975521">HIVE-13938</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12975524">HIVE-13939</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12807861" name="HIVE-13917.01.patch" size="575" author="sseth" created="Fri, 3 Jun 2016 00:16:24 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 3 Jun 2016 00:30:19 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 week, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2yv47:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>