<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sat Dec 03 01:13:46 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HIVE-750/HIVE-750.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HIVE-750] new partitionpruner does not work with test mode</title>
                <link>https://issues.apache.org/jira/browse/HIVE-750</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;set hive.test.mode=true;&lt;/p&gt;

&lt;p&gt;the new partition pruner does not work&lt;/p&gt;</description>
                <environment></environment>
        <key id="12432878">HIVE-750</key>
            <summary>new partitionpruner does not work with test mode</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="namit">Namit Jain</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Wed, 12 Aug 2009 14:08:43 +0000</created>
                <updated>Sat, 17 Dec 2011 00:05:57 +0000</updated>
                            <resolved>Sat, 5 Sep 2009 00:49:28 +0000</resolved>
                                                    <fixVersion>0.4.0</fixVersion>
                    <fixVersion>0.5.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12745282" author="zshao" created="Thu, 20 Aug 2009 02:16:39 +0000"  >&lt;p&gt;Escalating this to critical since this is breaking internal tests.&lt;/p&gt;</comment>
                            <comment id="12751085" author="namit" created="Thu, 3 Sep 2009 16:58:43 +0000"  >&lt;p&gt;This is due to a predicate pushdown bug - if a non-deterministic function appears, no filter is pushed up.&lt;br/&gt;
The filter should be pushed below the current filter which has a non-deterministic function. Currently, the filters&lt;br/&gt;
only get pushed below the tablescan - will have a patch for this soon.&lt;/p&gt;

&lt;p&gt;This also needs to be committed to 0.4&lt;/p&gt;</comment>
                            <comment id="12751096" author="namit" created="Thu, 3 Sep 2009 17:27:23 +0000"  >&lt;p&gt;patch for trunk&lt;/p&gt;</comment>
                            <comment id="12751110" author="prasadc" created="Thu, 3 Sep 2009 17:59:15 +0000"  >&lt;p&gt;predicate pushdown was optimization before the new pruner came along so this is not a bug but a lack of feature &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;patch looks good but since a new child filter operator is created every time there is a non-deterministic predicate in an expression, there will be two identical filter operators if there are two non-deterministic are encountered while walking down the tree. &lt;/p&gt;

&lt;p&gt;a better option would be&lt;/p&gt;

&lt;p&gt;1) merge the children&apos;s pushdown preds with the current filter op&apos;s preds&lt;br/&gt;
2) run the ppd algorithm to extract pushdown predicates&lt;br/&gt;
3) if step 2 does not return an empty set then skip to step 6 (new)&lt;br/&gt;
4) if the current op&apos;s child is a filter operator then skip to step 6 (new)&lt;br/&gt;
5) create a new filter op with the child&apos;s pushdown preds (new)&lt;br/&gt;
6) pass the results of step2 to current op&apos;s parent&lt;/p&gt;

&lt;p&gt;so the above algorithm would create a new filter-op whenever a predicate can&apos;t be pushed down. this can help in case multiple sub-queries where some of the predicates can be pushed down one join but not all the joins in the query.&lt;/p&gt;</comment>
                            <comment id="12751112" author="prasadc" created="Thu, 3 Sep 2009 18:07:18 +0000"  >&lt;p&gt;ofcourse this is not a complete fix since if only some preds get pushed down, this algo can&apos;t determine the rest of the preds to create new filter op. but it is good enough of a improvement and will fix the problem of creating multiple identical filter-ops for each of the non-deterministic preds in a filter op.&lt;/p&gt;</comment>
                            <comment id="12751124" author="namit" created="Thu, 3 Sep 2009 18:49:45 +0000"  >&lt;p&gt;I am not sure the above would work:&lt;/p&gt;

&lt;p&gt;There may be multiple filters:&lt;/p&gt;


&lt;p&gt;TS -&amp;gt; F1 (non derterministic) -&amp;gt; F2 -&amp;gt; ....... -&amp;gt; F3&lt;/p&gt;

&lt;p&gt;We want to push F3 above, but since F1&apos;s kid is F2, it will not be pushed.&lt;/p&gt;

&lt;p&gt;I agree, in the current algorithm, we are making 2 copies of the filter. &lt;br/&gt;
A better approach would be to merge those filters later, or have a walker which eliminates redundant filters.&lt;/p&gt;</comment>
                            <comment id="12751128" author="prasadc" created="Thu, 3 Sep 2009 18:56:31 +0000"  >&lt;p&gt;You are correct but that can be fixed by chagning step4 to F3 ppds to F2 instead.&lt;/p&gt;</comment>
                            <comment id="12751561" author="prasadc" created="Fri, 4 Sep 2009 18:27:11 +0000"  >&lt;p&gt;talked with namit offline. current patch looks good, the optimization can be done in a different JIRA.&lt;/p&gt;</comment>
                            <comment id="12751562" author="namit" created="Fri, 4 Sep 2009 18:28:52 +0000"  >&lt;p&gt;Filed a follow-up jira for the same&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-815&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-815&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12751570" author="zshao" created="Fri, 4 Sep 2009 19:00:43 +0000"  >&lt;p&gt;Committed to trunk.&lt;/p&gt;

&lt;p&gt;Can you regenerate the patch for branch 0.4? There are some conflicts in the test cases.&lt;/p&gt;</comment>
                            <comment id="12751664" author="namit" created="Fri, 4 Sep 2009 23:45:03 +0000"  >&lt;p&gt;patch for 0.4&lt;/p&gt;</comment>
                            <comment id="12751678" author="zshao" created="Sat, 5 Sep 2009 00:49:28 +0000"  >&lt;p&gt;Committed. Thanks Namit!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12434869">HIVE-815</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12434869">HIVE-815</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12418522" name="hive.750.1.patch" size="238767" author="namit" created="Thu, 3 Sep 2009 17:27:22 +0000"/>
                            <attachment id="12418684" name="hive.750.branch04.patch" size="60940" author="namit" created="Fri, 4 Sep 2009 23:45:03 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 20 Aug 2009 02:16:39 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73326</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 14 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lbjr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122521</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-750&quot; title=&quot;new partitionpruner does not work with test mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-750&quot;&gt;&lt;strike&gt;HIVE-750&lt;/strike&gt;&lt;/a&gt;. New partitionpruner does not work with test mode. (Namit Jain via zshao)</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>