<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sat Dec 03 23:21:53 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HIVE-11880/HIVE-11880.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HIVE-11880] filter bug  of UNION ALL when hive.ppd.remove.duplicatefilters=true and filter condition is type incompatible column </title>
                <link>https://issues.apache.org/jira/browse/HIVE-11880</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;   For UNION ALL , when an union operator is constant column (such as &apos;0L&apos;, BIGINT Type)  and its corresponding column has incompatible type (such as INT type). &lt;br/&gt;
  Query with filter condition on type incompatible column on this UNION ALL  will cause IndexOutOfBoundsException.&lt;/p&gt;

&lt;p&gt; Such as TPC-H table &quot;orders&quot;,in  the following query:&lt;br/&gt;
 Type of &apos;orders&apos;.&apos;o_custkey&apos; is INT normally,  while  the type of corresponding constant column  &quot;0&quot; is BIGINT( `0L AS `o_custkey` ). &lt;br/&gt;
 This following query (with filter &quot;type incompatible column &apos;o_custkey&apos; &quot;)  will fail  with  java.lang.IndexOutOfBoundsException : &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
set hive.cbo.enable=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
set hive.ppd.remove.duplicatefilters=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
CREATE TABLE `orders`(
  `o_orderkey` &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, 
  `o_custkey` &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, 
  `o_orderstatus` string, 
  `o_totalprice` &lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt;, 
  `o_orderdate` string, 
  `o_orderpriority` string, 
  `o_clerk` string, 
  `o_shippriority` &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, 
  `o_comment` string);

SELECT o_orderkey
FROM   (
              SELECT `o_orderkey` ,
                     `o_custkey`
              FROM   `orders`
              UNION ALL
              SELECT `o_orderkey`,
                     0L  AS `o_custkey`
              FROM   `orders`) `oo`
WHERE  o_custkey&amp;lt;10;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12884310">HIVE-11880</key>
            <summary>filter bug  of UNION ALL when hive.ppd.remove.duplicatefilters=true and filter condition is type incompatible column </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="sjtufighter">WangMeng</assignee>
                                    <reporter username="sjtufighter">WangMeng</reporter>
                        <labels>
                    </labels>
                <created>Fri, 18 Sep 2015 12:49:38 +0000</created>
                <updated>Tue, 3 May 2016 01:32:20 +0000</updated>
                            <resolved>Mon, 2 May 2016 20:55:37 +0000</resolved>
                                    <version>1.2.1</version>
                                                    <component>Logical Optimizer</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                <comments>
                            <comment id="14903975" author="sjtufighter" created="Wed, 23 Sep 2015 05:23:31 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xuefuz&quot; class=&quot;user-hover&quot; rel=&quot;xuefuz&quot;&gt;Xuefu Zhang&lt;/a&gt;    &lt;br/&gt;
I uploaded a new patch for this issue.&lt;br/&gt;
Please check it. Thanks.&lt;/p&gt;</comment>
                            <comment id="14904625" author="ashutoshc" created="Wed, 23 Sep 2015 15:09:06 +0000"  >&lt;p&gt;I think patch on &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-11919&quot; title=&quot;Hive Union Type Mismatch&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-11919&quot;&gt;&lt;del&gt;HIVE-11919&lt;/del&gt;&lt;/a&gt; will fix this too. Can you try patch attached there ?&lt;/p&gt;</comment>
                            <comment id="14905982" author="sjtufighter" created="Thu, 24 Sep 2015 08:11:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashutoshc&quot; class=&quot;user-hover&quot; rel=&quot;ashutoshc&quot;&gt;Ashutosh Chauhan&lt;/a&gt; I tried the patch of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-11919&quot; title=&quot;Hive Union Type Mismatch&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-11919&quot;&gt;&lt;del&gt;HIVE-11919&lt;/del&gt;&lt;/a&gt;, it can not fix this bug.&lt;br/&gt;
The two bugs are different.I think &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-11919&quot; title=&quot;Hive Union Type Mismatch&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-11919&quot;&gt;&lt;del&gt;HIVE-11919&lt;/del&gt;&lt;/a&gt; focuses on type mismatch and &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-11880&quot; title=&quot;filter bug  of UNION ALL when hive.ppd.remove.duplicatefilters=true and filter condition is type incompatible column &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-11880&quot;&gt;&lt;del&gt;HIVE-11880&lt;/del&gt;&lt;/a&gt; focuses on filter bug when hive.ppd.remove.duplicatefilters=true&lt;/p&gt;</comment>
                            <comment id="14905983" author="sjtufighter" created="Thu, 24 Sep 2015 08:11:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashutoshc&quot; class=&quot;user-hover&quot; rel=&quot;ashutoshc&quot;&gt;Ashutosh Chauhan&lt;/a&gt; I tried the patch of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-11919&quot; title=&quot;Hive Union Type Mismatch&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-11919&quot;&gt;&lt;del&gt;HIVE-11919&lt;/del&gt;&lt;/a&gt;, it can not fix this bug.&lt;br/&gt;
The two bugs are different.I think &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-11919&quot; title=&quot;Hive Union Type Mismatch&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-11919&quot;&gt;&lt;del&gt;HIVE-11919&lt;/del&gt;&lt;/a&gt; focuses on type mismatch and &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-11880&quot; title=&quot;filter bug  of UNION ALL when hive.ppd.remove.duplicatefilters=true and filter condition is type incompatible column &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-11880&quot;&gt;&lt;del&gt;HIVE-11880&lt;/del&gt;&lt;/a&gt; focuses on filter bug when hive.ppd.remove.duplicatefilters=true&lt;/p&gt;</comment>
                            <comment id="14906092" author="sjtufighter" created="Thu, 24 Sep 2015 09:21:44 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashutoshc&quot; class=&quot;user-hover&quot; rel=&quot;ashutoshc&quot;&gt;Ashutosh Chauhan&lt;/a&gt;   Hi , I uploaded a new patch to add  notes  for this issue and alterd  jira title and description.&lt;br/&gt;
Please check it again . Thanks.&lt;/p&gt;</comment>
                            <comment id="14906211" author="sjtufighter" created="Thu, 24 Sep 2015 11:19:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashutoshc&quot; class=&quot;user-hover&quot; rel=&quot;ashutoshc&quot;&gt;Ashutosh Chauhan&lt;/a&gt;   &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xuefuz&quot; class=&quot;user-hover&quot; rel=&quot;xuefuz&quot;&gt;Xuefu Zhang&lt;/a&gt; &lt;br/&gt;
I feel it will wait a very long time until  &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hiveqa&quot; class=&quot;user-hover&quot; rel=&quot;hiveqa&quot;&gt;Hive QA&lt;/a&gt; runs tests in recent  period. &lt;br/&gt;
Does  the QA queue have been blocked ? Thanks.&lt;/p&gt;</comment>
                            <comment id="14906348" author="hiveqa" created="Thu, 24 Sep 2015 13:34:57 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 no tests executed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12762091/HIVE-11880.02.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12762091/HIVE-11880.02.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/5398/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/5398/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/5398/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/5398/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-5398/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-5398/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Tests exited with: NonZeroExitCodeException
Command &apos;bash /data/hive-ptest/working/scratch/source-prep.sh&apos; failed with exit status 1 and output &apos;+ [[ -n /usr/java/jdk1.7.0_45-cloudera ]]
+ export JAVA_HOME=/usr/java/jdk1.7.0_45-cloudera
+ JAVA_HOME=/usr/java/jdk1.7.0_45-cloudera
+ export PATH=/usr/java/jdk1.7.0_45-cloudera/bin/:/usr/local/apache-maven-3.0.5/bin:/usr/java/jdk1.7.0_45-cloudera/bin:/usr/local/apache-ant-1.9.1/bin:/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/sbin:/home/hiveptest/bin
+ PATH=/usr/java/jdk1.7.0_45-cloudera/bin/:/usr/local/apache-maven-3.0.5/bin:/usr/java/jdk1.7.0_45-cloudera/bin:/usr/local/apache-ant-1.9.1/bin:/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/sbin:/home/hiveptest/bin
+ export &apos;ANT_OPTS=-Xmx1g -XX:MaxPermSize=256m &apos;
+ ANT_OPTS=&apos;-Xmx1g -XX:MaxPermSize=256m &apos;
+ export &apos;M2_OPTS=-Xmx1g -XX:MaxPermSize=256m -Dhttp.proxyHost=localhost -Dhttp.proxyPort=3128&apos;
+ M2_OPTS=&apos;-Xmx1g -XX:MaxPermSize=256m -Dhttp.proxyHost=localhost -Dhttp.proxyPort=3128&apos;
+ cd /data/hive-ptest/working/
+ tee /data/hive-ptest/logs/PreCommit-HIVE-TRUNK-Build-5398/source-prep.txt
+ [[ false == \t\r\u\e ]]
+ mkdir -p maven ivy
+ [[ git = \s\v\n ]]
+ [[ git = \g\i\t ]]
+ [[ -z master ]]
+ [[ -d apache-github-source-source ]]
+ [[ ! -d apache-github-source-source/.git ]]
+ [[ ! -d apache-github-source-source ]]
+ cd apache-github-source-source
+ git fetch origin
+ git reset --hard HEAD
HEAD is now at 648f2c6 HIVE-11922: Better error message when ORC split generation fails (Prasanth Jayachandran reviewed by Sergey Shelukhin)
+ git clean -f -d
+ git checkout master
Already on &apos;master&apos;
+ git reset --hard origin/master
HEAD is now at 648f2c6 HIVE-11922: Better error message when ORC split generation fails (Prasanth Jayachandran reviewed by Sergey Shelukhin)
+ git merge --ff-only origin/master
Already up-to-date.
+ git gc
+ patchCommandPath=/data/hive-ptest/working/scratch/smart-apply-patch.sh
+ patchFilePath=/data/hive-ptest/working/scratch/build.patch
+ [[ -f /data/hive-ptest/working/scratch/build.patch ]]
+ chmod +x /data/hive-ptest/working/scratch/smart-apply-patch.sh
+ /data/hive-ptest/working/scratch/smart-apply-patch.sh /data/hive-ptest/working/scratch/build.patch
patch: **** malformed patch at line 20: @@ -2806,6 +2814,15 @@ private Operator genFilterPlan(QB qb, ASTNode condn, Operator input, boolean use

patch: **** malformed patch at line 20: @@ -2806,6 +2814,15 @@ private Operator genFilterPlan(QB qb, ASTNode condn, Operator input, boolean use

patch: **** malformed patch at line 20: @@ -2806,6 +2814,15 @@ private Operator genFilterPlan(QB qb, ASTNode condn, Operator input, boolean use

The patch does not appear to apply with p0, p1, or p2
+ exit 1
&apos;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12762091 - PreCommit-HIVE-TRUNK-Build&lt;/p&gt;</comment>
                            <comment id="14906790" author="xuefuz" created="Thu, 24 Sep 2015 18:28:48 +0000"  >&lt;p&gt;Looks like the patch needs to be rebased.&lt;/p&gt;</comment>
                            <comment id="14907667" author="sjtufighter" created="Fri, 25 Sep 2015 06:20:38 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xuefuz&quot; class=&quot;user-hover&quot; rel=&quot;xuefuz&quot;&gt;Xuefu Zhang&lt;/a&gt;    I have rebased it and uploaded a new patch.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashutoshc&quot; class=&quot;user-hover&quot; rel=&quot;ashutoshc&quot;&gt;Ashutosh Chauhan&lt;/a&gt; I tried the patch of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-11919&quot; title=&quot;Hive Union Type Mismatch&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-11919&quot;&gt;&lt;del&gt;HIVE-11919&lt;/del&gt;&lt;/a&gt; again after I rebased, it can not fix this bug also.&lt;br/&gt;
Please check it again . Thanks.&lt;/p&gt;</comment>
                            <comment id="14908396" author="ashutoshc" created="Fri, 25 Sep 2015 17:51:45 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jpullokkaran&quot; class=&quot;user-hover&quot; rel=&quot;jpullokkaran&quot;&gt;Laljo John Pullokkaran&lt;/a&gt; Do you want to take a look at this one?&lt;/p&gt;</comment>
                            <comment id="14908411" author="jpullokkaran" created="Fri, 25 Sep 2015 17:56:06 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=wangmeng&quot; class=&quot;user-hover&quot; rel=&quot;wangmeng&quot;&gt;MengWang&lt;/a&gt; Could you upload the patch to RB?&lt;/p&gt;</comment>
                            <comment id="14908415" author="jpullokkaran" created="Fri, 25 Sep 2015 17:58:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sjtufighter&quot; class=&quot;user-hover&quot; rel=&quot;sjtufighter&quot;&gt;WangMeng&lt;/a&gt; Could you upload the patch to RB?&lt;/p&gt;</comment>
                            <comment id="14908938" author="jpullokkaran" created="Sat, 26 Sep 2015 00:42:45 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sjtufighter&quot; class=&quot;user-hover&quot; rel=&quot;sjtufighter&quot;&gt;WangMeng&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-11919&quot; title=&quot;Hive Union Type Mismatch&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-11919&quot;&gt;&lt;del&gt;HIVE-11919&lt;/del&gt;&lt;/a&gt; fixes the issue. I don&apos;t see the exception.&lt;br/&gt;
Could you try the patch?&lt;/p&gt;</comment>
                            <comment id="14909799" author="hiveqa" created="Sun, 27 Sep 2015 16:55:00 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12762327/HIVE-11880.03.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12762327/HIVE-11880.03.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 58 failed/errored test(s), 9620 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_annotate_stats_filter
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_authorization_explain
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join_nulls
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_cbo_join
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_cbo_simple_select
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_cbo_subq_not_in
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_constantPropagateForSubQuery
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_cross_join
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_cross_product_check_1
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_cross_product_check_2
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_input23
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join_alt_syntax
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join_cond_pushdown_1
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join_cond_pushdown_3
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join_nulls
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_lineage3
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_mapjoin1
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_nonblock_op_deduplicate
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_optimize_nullscan
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_partition_boolexpr
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_subquery_notin
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_subquery_notin_having
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_subquery_unqualcolumnrefs
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_subquery_views
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_test_boolean_whereclause
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_udf_count
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_udf_percentile
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_vector_groupby_reduce
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_vector_join_nulls
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_cbo_join
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_cbo_simple_select
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_cbo_subq_not_in
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_cross_join
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_cross_product_check_1
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_cross_product_check_2
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_dynpart_sort_opt_vectorization
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_explainuser_1
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_optimize_nullscan
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_subquery_exists
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vector_auto_smb_mapjoin_14
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vector_groupby_reduce
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vector_join_nulls
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vector_mr_diff_schema_alias
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_join_nonexistent_part
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_auto_join_nulls
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_cbo_simple_select
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_cbo_subq_not_in
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_cross_join
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_cross_product_check_1
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_cross_product_check_2
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_join_alt_syntax
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_join_cond_pushdown_1
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_join_cond_pushdown_3
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_mapjoin1
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_optimize_nullscan
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_udf_percentile
org.apache.hive.hcatalog.api.TestHCatClient.testTableSchemaPropagation
org.apache.hive.service.cli.TestEmbeddedThriftBinaryCLIService.testExecuteStatementParallel
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/5438/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/5438/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/5438/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/5438/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-5438/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-5438/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 58 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12762327 - PreCommit-HIVE-TRUNK-Build&lt;/p&gt;</comment>
                            <comment id="14933215" author="sjtufighter" created="Mon, 28 Sep 2015 12:06:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jpullokkaran&quot; class=&quot;user-hover&quot; rel=&quot;jpullokkaran&quot;&gt;Laljo John Pullokkaran&lt;/a&gt;  I tried the patch of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-11919&quot; title=&quot;Hive Union Type Mismatch&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-11919&quot;&gt;&lt;del&gt;HIVE-11919&lt;/del&gt;&lt;/a&gt;, it can not fix this bug.&lt;br/&gt;
I  think this two bugs are different,  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-11919&quot; title=&quot;Hive Union Type Mismatch&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-11919&quot;&gt;&lt;del&gt;HIVE-11919&lt;/del&gt;&lt;/a&gt; focuses on type mismatch and &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-11880&quot; title=&quot;filter bug  of UNION ALL when hive.ppd.remove.duplicatefilters=true and filter condition is type incompatible column &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-11880&quot;&gt;&lt;del&gt;HIVE-11880&lt;/del&gt;&lt;/a&gt; focuses on filter bug when hive.ppd.remove.duplicatefilters=true.&lt;br/&gt;
And I upload the patch to RB:&lt;a href=&quot;https://reviews.apache.org/r/38805/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/38805/&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14933230" author="sjtufighter" created="Mon, 28 Sep 2015 12:26:49 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jpullokkaran&quot; class=&quot;user-hover&quot; rel=&quot;jpullokkaran&quot;&gt;Laljo John Pullokkaran&lt;/a&gt;  this exception is as follows:&lt;br/&gt;
Caused by: java.lang.RuntimeException: Map operator initialization failed&lt;br/&gt;
......&lt;br/&gt;
Caused by: java.lang.IndexOutOfBoundsException: Index: 0, Size: 0&lt;br/&gt;
	at java.util.ArrayList.rangeCheck(ArrayList.java:635)&lt;br/&gt;
	at java.util.ArrayList.get(ArrayList.java:411)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.UnionOperator.initializeOp(UnionOperator.java:83).&lt;br/&gt;
.........&lt;br/&gt;
And I uploaded a new patch:&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-11880&quot; title=&quot;filter bug  of UNION ALL when hive.ppd.remove.duplicatefilters=true and filter condition is type incompatible column &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-11880&quot;&gt;&lt;del&gt;HIVE-11880&lt;/del&gt;&lt;/a&gt;.04.patch, please check it again. Thanks.&lt;/p&gt;</comment>
                            <comment id="14935024" author="sjtufighter" created="Tue, 29 Sep 2015 11:34:14 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashutoshc&quot; class=&quot;user-hover&quot; rel=&quot;ashutoshc&quot;&gt;Ashutosh Chauhan&lt;/a&gt;   &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jpullokkaran&quot; class=&quot;user-hover&quot; rel=&quot;jpullokkaran&quot;&gt;Laljo John Pullokkaran&lt;/a&gt;  I  have published this patch on Review Board: &lt;a href=&quot;https://reviews.apache.org/r/38805/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/38805/&lt;/a&gt;&lt;br/&gt;
Please help  review it . Thanks. &lt;/p&gt;</comment>
                            <comment id="14935812" author="hiveqa" created="Tue, 29 Sep 2015 20:38:28 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12764007/HIVE-11880.04.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12764007/HIVE-11880.04.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 57 failed/errored test(s), 9631 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestMiniTezCliDriver-vector_distinct_2.q-vector_interval_2.q-load_dyn_part2.q-and-12-more - did not produce a TEST-*.xml file
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_annotate_stats_filter
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_authorization_explain
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join_nulls
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_cbo_join
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_cbo_simple_select
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_cbo_subq_not_in
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_constantPropagateForSubQuery
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_cross_join
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_cross_product_check_1
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_cross_product_check_2
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_input23
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join_alt_syntax
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join_cond_pushdown_1
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join_cond_pushdown_3
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join_nulls
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_lineage3
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_mapjoin1
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_nonblock_op_deduplicate
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_optimize_nullscan
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_partition_boolexpr
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_subquery_notin
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_subquery_notin_having
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_subquery_unqualcolumnrefs
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_subquery_views
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_test_boolean_whereclause
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_udf_count
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_udf_percentile
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_vector_groupby_reduce
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_vector_join_nulls
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_cbo_join
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_cbo_simple_select
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_cbo_subq_not_in
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_cross_join
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_cross_product_check_1
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_cross_product_check_2
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_dynpart_sort_opt_vectorization
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_subquery_exists
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vector_auto_smb_mapjoin_14
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vector_groupby_reduce
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vector_join_nulls
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vector_mr_diff_schema_alias
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_join_nonexistent_part
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_auto_join_nulls
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_cbo_simple_select
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_cbo_subq_not_in
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_cross_join
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_cross_product_check_1
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_cross_product_check_2
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_join_alt_syntax
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_join_cond_pushdown_1
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_join_cond_pushdown_3
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_mapjoin1
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_optimize_nullscan
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_udf_percentile
org.apache.hive.hcatalog.api.TestHCatClient.testTableSchemaPropagation
org.apache.hive.service.cli.TestEmbeddedThriftBinaryCLIService.testExecuteStatementParallel
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/5460/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/5460/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/5460/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/5460/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-5460/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-5460/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 57 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12764007 - PreCommit-HIVE-TRUNK-Build&lt;/p&gt;</comment>
                            <comment id="14939014" author="jpullokkaran" created="Wed, 30 Sep 2015 22:54:51 +0000"  >&lt;p&gt;I wasn&apos;t able to reproduce this.&lt;br/&gt;
What was the execution engine used MR or TEZ?&lt;/p&gt;</comment>
                            <comment id="14939204" author="jpullokkaran" created="Thu, 1 Oct 2015 02:49:09 +0000"  >&lt;p&gt;From what you described here (the failed query) it seems like the original problem is union type mismatch which is what &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-11919&quot; title=&quot;Hive Union Type Mismatch&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-11919&quot;&gt;&lt;del&gt;HIVE-11919&lt;/del&gt;&lt;/a&gt; fixes. It is just that execution failure is happening in the filter.&lt;/p&gt;

&lt;p&gt;As specified in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-11919&quot; title=&quot;Hive Union Type Mismatch&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-11919&quot;&gt;&lt;del&gt;HIVE-11919&lt;/del&gt;&lt;/a&gt; the root cause is union init changes the output type from what gen plan had decided; in this case from &apos;BigInt&apos; to &apos;Int&apos;.&lt;/p&gt;</comment>
                            <comment id="14948023" author="sjtufighter" created="Thu, 8 Oct 2015 03:40:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jpullokkaran&quot; class=&quot;user-hover&quot; rel=&quot;jpullokkaran&quot;&gt;Laljo John Pullokkaran&lt;/a&gt;   &lt;br/&gt;
 I have  added  Review Board in Issue Links.&lt;br/&gt;
 The  execution engine is MR( I  don&apos;t use TEZ) .You can use TPC-H(&lt;a href=&quot;http://www.tpc.org/tpch/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.tpc.org/tpch/&lt;/a&gt;)  to  reproduce this Jira according to the descriptition above. Thanks.&lt;br/&gt;
 Different from  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-11919&quot; title=&quot;Hive Union Type Mismatch&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-11919&quot;&gt;&lt;del&gt;HIVE-11919&lt;/del&gt;&lt;/a&gt; , only when  occurs &quot;union type mismatch&quot; and  one of the type mismatch column  is constant  and this type mismatch column is filter column, then  UNION ALL will  throws &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-11880&quot; title=&quot;filter bug  of UNION ALL when hive.ppd.remove.duplicatefilters=true and filter condition is type incompatible column &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-11880&quot;&gt;&lt;del&gt;HIVE-11880&lt;/del&gt;&lt;/a&gt;&#65294;&lt;/p&gt;</comment>
                            <comment id="15218871" author="aihuaxu" created="Wed, 30 Mar 2016 21:09:45 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sjtufighter&quot; class=&quot;user-hover&quot; rel=&quot;sjtufighter&quot;&gt;WangMeng&lt;/a&gt; I updated the description for the repro. We need to disable cbo to repro the issue. &lt;/p&gt;

&lt;p&gt;Can you update the patch to the latest code? &lt;/p&gt;</comment>
                            <comment id="15220033" author="aihuaxu" created="Thu, 31 Mar 2016 15:28:06 +0000"  >&lt;p&gt;The actual issue seems to be that we are mixing the column alias and column name together.  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-13235&quot; title=&quot;Insert from select generates incorrect result when hive.optimize.constant.propagation is on&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-13235&quot;&gt;&lt;del&gt;HIVE-13235&lt;/del&gt;&lt;/a&gt; also has that problem where I tried to separate alias from the real column name.&lt;/p&gt;

&lt;p&gt;There is a visibility scope in a query like &lt;tt&gt;select 3 as col1 from tbl1 where col1 is not null;&lt;/tt&gt;  in which 2 col1 have different meaning, the first one is just an alias and the second one is table column name. Same for the following query. The filter o_custkey&amp;lt;10 can not push down to the table TS since it&apos;s not the table column. Of course, for this particular case, o_custkey will be replaced with the constant and then the constant expression can be pushed to TS.&lt;/p&gt;

&lt;p&gt;The fix seems to be, a column should have internal name, column name and alias. The operators like SEL could have all of them and based on the usage, we should choose column name or alias. I&apos;m trying to address in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-13235&quot; title=&quot;Insert from select generates incorrect result when hive.optimize.constant.propagation is on&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-13235&quot;&gt;&lt;del&gt;HIVE-13235&lt;/del&gt;&lt;/a&gt;, but seems always missing some cases.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;SELECT o_orderkey
FROM   (
              SELECT `o_orderkey` ,
                     `o_custkey`
              FROM   `orders`
              UNION ALL
              SELECT `o_orderkey`,
                     0L  AS `o_custkey`
              FROM   `orders`) `oo`
WHERE  o_custkey&amp;lt;10;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15222733" author="hiveqa" created="Sat, 2 Apr 2016 05:38:56 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12764007/HIVE-11880.04.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12764007/HIVE-11880.04.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to build exiting with an error&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/7437/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/7437/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/7437/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/7437/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-7437/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-7437/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Tests exited with: NonZeroExitCodeException
Command &apos;bash /data/hive-ptest/working/scratch/source-prep.sh&apos; failed with exit status 1 and output &apos;+ [[ -n /usr/java/jdk1.7.0_45-cloudera ]]
+ export JAVA_HOME=/usr/java/jdk1.7.0_45-cloudera
+ JAVA_HOME=/usr/java/jdk1.7.0_45-cloudera
+ export PATH=/usr/java/jdk1.7.0_45-cloudera/bin/:/usr/local/apache-maven-3.0.5/bin:/usr/java/jdk1.7.0_45-cloudera/bin:/usr/local/apache-ant-1.9.1/bin:/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/sbin:/home/hiveptest/bin
+ PATH=/usr/java/jdk1.7.0_45-cloudera/bin/:/usr/local/apache-maven-3.0.5/bin:/usr/java/jdk1.7.0_45-cloudera/bin:/usr/local/apache-ant-1.9.1/bin:/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/sbin:/home/hiveptest/bin
+ export &apos;ANT_OPTS=-Xmx1g -XX:MaxPermSize=256m &apos;
+ ANT_OPTS=&apos;-Xmx1g -XX:MaxPermSize=256m &apos;
+ export &apos;M2_OPTS=-Xmx1g -XX:MaxPermSize=256m -Dhttp.proxyHost=localhost -Dhttp.proxyPort=3128&apos;
+ M2_OPTS=&apos;-Xmx1g -XX:MaxPermSize=256m -Dhttp.proxyHost=localhost -Dhttp.proxyPort=3128&apos;
+ cd /data/hive-ptest/working/
+ tee /data/hive-ptest/logs/PreCommit-HIVE-TRUNK-Build-7437/source-prep.txt
+ [[ false == \t\r\u\e ]]
+ mkdir -p maven ivy
+ [[ git = \s\v\n ]]
+ [[ git = \g\i\t ]]
+ [[ -z master ]]
+ [[ -d apache-github-source-source ]]
+ [[ ! -d apache-github-source-source/.git ]]
+ [[ ! -d apache-github-source-source ]]
+ cd apache-github-source-source
+ git fetch origin
+ git reset --hard HEAD
HEAD is now at 21f18ad HIVE-13402 : Temporarily disable failing spark tests (Addendum)
+ git clean -f -d
+ git checkout master
Already on &apos;master&apos;
+ git reset --hard origin/master
HEAD is now at 21f18ad HIVE-13402 : Temporarily disable failing spark tests (Addendum)
+ git merge --ff-only origin/master
Already up-to-date.
+ git gc
+ patchCommandPath=/data/hive-ptest/working/scratch/smart-apply-patch.sh
+ patchFilePath=/data/hive-ptest/working/scratch/build.patch
+ [[ -f /data/hive-ptest/working/scratch/build.patch ]]
+ chmod +x /data/hive-ptest/working/scratch/smart-apply-patch.sh
+ /data/hive-ptest/working/scratch/smart-apply-patch.sh /data/hive-ptest/working/scratch/build.patch
The patch does not appear to apply with p0, p1, or p2
+ exit 1
&apos;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12764007 - PreCommit-HIVE-TRUNK-Build&lt;/p&gt;</comment>
                            <comment id="15267487" author="aihuaxu" created="Mon, 2 May 2016 20:54:25 +0000"  >&lt;p&gt;This issue seems to have been fixed by &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-13570&quot; title=&quot;Some queries with Union all fail when CBO is off&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-13570&quot;&gt;&lt;del&gt;HIVE-13570&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15267492" author="aihuaxu" created="Mon, 2 May 2016 20:55:37 +0000"  >&lt;p&gt;Resolve this issue as dep of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-13570&quot; title=&quot;Some queries with Union all fail when CBO is off&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-13570&quot;&gt;&lt;del&gt;HIVE-13570&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15267887" author="sjtufighter" created="Tue, 3 May 2016 01:32:20 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aihuaxu&quot; class=&quot;user-hover&quot; rel=&quot;aihuaxu&quot;&gt;Aihua Xu&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12895574">HIVE-11919</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12761800" name="HIVE-11880.01.patch" size="4690" author="sjtufighter" created="Wed, 23 Sep 2015 03:51:17 +0000"/>
                            <attachment id="12762091" name="HIVE-11880.02.patch" size="4714" author="sjtufighter" created="Thu, 24 Sep 2015 09:17:28 +0000"/>
                            <attachment id="12762327" name="HIVE-11880.03.patch" size="5290" author="sjtufighter" created="Fri, 25 Sep 2015 06:17:36 +0000"/>
                            <attachment id="12764007" name="HIVE-11880.04.patch" size="5296" author="sjtufighter" created="Mon, 28 Sep 2015 12:27:16 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 23 Sep 2015 15:09:06 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            30 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ke4f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>