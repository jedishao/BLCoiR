<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 02 11:48:57 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HIVE-14322/HIVE-14322.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HIVE-14322] Postgres db issues after Datanucleus 4.x upgrade</title>
                <link>https://issues.apache.org/jira/browse/HIVE-14322</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;With the upgrade to  datanucleus 4.x versions in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-6113&quot; title=&quot;Upgrade DataNucleus [was: Unable to instantiate org.apache.hadoop.hive.metastore.HiveMetaStoreClient]&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-6113&quot;&gt;&lt;del&gt;HIVE-6113&lt;/del&gt;&lt;/a&gt;, hive does not work properly with postgres.&lt;br/&gt;
The nullable fields in the database have string &quot;NULL::character varying&quot; instead of real NULL values. This causes various issues.&lt;/p&gt;

&lt;p&gt;One example is -&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
hive&amp;gt; create table t(i &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;);
OK
Time taken: 1.9 seconds
hive&amp;gt; create view v as select * from t;
OK
Time taken: 0.542 seconds
hive&amp;gt; select * from v;
FAILED: SemanticException Unable to fetch table v. java.net.URISyntaxException: Relative path in absolute URI: NULL::character%20varying
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</description>
                <environment></environment>
        <key id="12992074">HIVE-14322</key>
            <summary>Postgres db issues after Datanucleus 4.x upgrade</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sershe">Sergey Shelukhin</assignee>
                                    <reporter username="thejas">Thejas M Nair</reporter>
                        <labels>
                            <label>TODOC2.0</label>
                            <label>TODOC2.1.1</label>
                            <label>TODOC2.2</label>
                    </labels>
                <created>Sun, 24 Jul 2016 06:42:50 +0000</created>
                <updated>Wed, 16 Nov 2016 04:45:35 +0000</updated>
                            <resolved>Mon, 1 Aug 2016 18:44:45 +0000</resolved>
                                    <version>2.0.0</version>
                    <version>2.1.0</version>
                    <version>2.0.1</version>
                                    <fixVersion>2.2.0</fixVersion>
                    <fixVersion>2.1.1</fixVersion>
                    <fixVersion>2.0.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="15390973" author="thejas" created="Sun, 24 Jul 2016 06:45:55 +0000"  >&lt;p&gt;Setting DN autocreate flag to true also helps, but that means going back on the changes in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1841&quot; title=&quot; datanucleus.fixedDatastore should be true in hive-default.xml&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1841&quot;&gt;&lt;del&gt;HIVE-1841&lt;/del&gt;&lt;/a&gt;. I think we should continue to disable autocreate and use schematool instead. So this is not a suitable workaround.&lt;/p&gt;

&lt;p&gt;Until we have a fix in DN for this, I think we should downgrade the DN version  in hive to allow the use of postgres.&lt;br/&gt;
I will follow up with a bug in DN as well.&lt;/p&gt;
</comment>
                            <comment id="15392624" author="sershe" created="Mon, 25 Jul 2016 20:38:29 +0000"  >&lt;p&gt;It&apos;s suspicious that it would work with auto-create but not with a script, which has nothing to do with DN as such.&lt;br/&gt;
I wonder if the syntax in the script (&quot;&quot;COLUMN_TYPE&quot; character varying(128) DEFAULT NULL::character varying) has anything to do with it? Should we change these to NULL and would it help?&lt;/p&gt;

&lt;p&gt;Can you reference a DN bug if you file one?&lt;/p&gt;</comment>
                            <comment id="15392861" author="thejas" created="Mon, 25 Jul 2016 23:41:02 +0000"  >&lt;p&gt;Patch for rolling back the upgrade of DN.&lt;/p&gt;</comment>
                            <comment id="15392865" author="thejas" created="Mon, 25 Jul 2016 23:43:15 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sershe&quot; class=&quot;user-hover&quot; rel=&quot;sershe&quot;&gt;Sergey Shelukhin&lt;/a&gt; Sorry, I should have been more clear.&lt;br/&gt;
I didn&apos;t mean actually auto-creating the schema made the difference. What I meant was using a schema created with schematool, but running metastore with the -hiveconf datanucleus.schema.autoCreateColumns=true option made a difference.&lt;/p&gt;
</comment>
                            <comment id="15392869" author="thejas" created="Mon, 25 Jul 2016 23:45:42 +0000"  >&lt;p&gt;Adding link to question I posted on &lt;a href=&quot;http://www.datanucleus.org/servlet/forum/viewthread_thread,7985_lastpage,yes#38388&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;DN forum&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Needs to be followed up with a bug report.&lt;/p&gt;</comment>
                            <comment id="15392955" author="sershe" created="Tue, 26 Jul 2016 01:04:42 +0000"  >&lt;p&gt;We can also set datanucleus.rdbms.initializeColumnInfo=NONE to address this, it appears (see the thread). I wonder if it has any other repercussions.&lt;/p&gt;</comment>
                            <comment id="15394612" author="sershe" created="Tue, 26 Jul 2016 21:52:29 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thejas&quot; class=&quot;user-hover&quot; rel=&quot;thejas&quot;&gt;Thejas M Nair&lt;/a&gt; the patch. I am not sure if we need to add this anywhere else... I see configs in the source tree set autoCreateAll, but it seems like it should work without such setting (and validateTables/etc. is not set)&lt;/p&gt;</comment>
                            <comment id="15394863" author="thejas" created="Wed, 27 Jul 2016 00:56:16 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="15397921" author="sershe" created="Thu, 28 Jul 2016 18:04:29 +0000"  >&lt;p&gt;datanucleus.rdbms.useColumnDefaultWhenNull was added in DN. I will file a follow-up JIRA to use that when it&apos;s released.&lt;/p&gt;</comment>
                            <comment id="15397978" author="sershe" created="Thu, 28 Jul 2016 18:34:20 +0000"  >&lt;p&gt;QA failed due to some unrelated checksum error, grrrr&lt;/p&gt;</comment>
                            <comment id="15397980" author="sershe" created="Thu, 28 Jul 2016 18:34:51 +0000"  >&lt;p&gt;Same patch&lt;/p&gt;</comment>
                            <comment id="15399897" author="sershe" created="Fri, 29 Jul 2016 19:32:23 +0000"  >&lt;p&gt;And again. Looks like it never got picked up.&lt;/p&gt;</comment>
                            <comment id="15401364" author="hiveqa" created="Sun, 31 Jul 2016 21:50:35 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12821063/HIVE-14322.04.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12821063/HIVE-14322.04.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 7 failed/errored test(s), 10418 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestMsgBusConnection - did not produce a TEST-*.xml file
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_avro_nullable_union
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_subquery_multiinsert
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_avro_non_nullable_union
org.apache.hadoop.hive.llap.tezplugins.TestLlapTaskSchedulerService.testDelayedLocalityNodeCommErrorImmediateAllocation
org.apache.hadoop.hive.metastore.TestHiveMetaStoreTxns.stringifyValidTxns
org.apache.hadoop.hive.metastore.TestHiveMetaStoreTxns.testTxnRange
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/712/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/712/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/712/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/712/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-204-236-174-241.us-west-1.compute.amazonaws.com/logs/PreCommit-HIVE-MASTER-Build-712/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-204-236-174-241.us-west-1.compute.amazonaws.com/logs/PreCommit-HIVE-MASTER-Build-712/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 7 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12821063 - PreCommit-HIVE-MASTER-Build&lt;/p&gt;</comment>
                            <comment id="15402610" author="sershe" created="Mon, 1 Aug 2016 18:44:45 +0000"  >&lt;p&gt;Committed. Thanks for the review!&lt;/p&gt;</comment>
                            <comment id="15403495" author="andy" created="Tue, 2 Aug 2016 06:55:58 +0000"  >&lt;p&gt;FYI &lt;a href=&quot;https://twitter.com/datanucleus/status/760060502143668225&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://twitter.com/datanucleus/status/760060502143668225&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15404581" author="sershe" created="Tue, 2 Aug 2016 18:44:39 +0000"  >&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="15414845" author="lefty@hortonworks.com" created="Wed, 10 Aug 2016 07:26:21 +0000"  >&lt;p&gt;Doc note:  This adds &lt;b&gt;datanucleus.rdbms.initializeColumnInfo&lt;/b&gt; to HiveConf.java in 2.0.2, 2.1.1, and 2.2.0 so it will need to be documented in the MetaStore section of Configuration Properties for those releases.&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-MetaStore&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Configuration Properties &amp;#8211; MetaStore &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;What other values can be used, besides NONE?&lt;/p&gt;

&lt;p&gt;Added labels TODOC2.0 (for 2.0.2), TODOC2.1.1, and TODOC2.2 (not needed if 2.1.1 is released before 2.2.0).&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13020722">HIVE-15204</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12993326">HIVE-14371</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12686504">HIVE-6113</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12492754">HIVE-1841</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12820289" name="HIVE-14322.02.patch" size="1645" author="sershe" created="Tue, 26 Jul 2016 21:52:29 +0000"/>
                            <attachment id="12820762" name="HIVE-14322.03.patch" size="1645" author="sershe" created="Thu, 28 Jul 2016 18:34:51 +0000"/>
                            <attachment id="12821063" name="HIVE-14322.04.patch" size="1645" author="sershe" created="Fri, 29 Jul 2016 19:32:23 +0000"/>
                            <attachment id="12820050" name="HIVE-14322.1.patch" size="17934" author="thejas" created="Mon, 25 Jul 2016 23:41:02 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 25 Jul 2016 20:38:29 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i31fan:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>