<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun Dec 04 00:24:18 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HIVE-5843/HIVE-5843.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HIVE-5843] Transaction manager for Hive</title>
                <link>https://issues.apache.org/jira/browse/HIVE-5843</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;As part of the ACID work proposed in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-5317&quot; title=&quot;Implement insert, update, and delete in Hive with full ACID support&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-5317&quot;&gt;&lt;del&gt;HIVE-5317&lt;/del&gt;&lt;/a&gt; a transaction manager is required.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12679785">HIVE-5843</key>
            <summary>Transaction manager for Hive</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12669392">HIVE-5317</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="alangates">Alan Gates</assignee>
                                    <reporter username="alangates">Alan Gates</reporter>
                        <labels>
                            <label>TODOC13</label>
                    </labels>
                <created>Mon, 18 Nov 2013 18:15:34 +0000</created>
                <updated>Fri, 4 Jul 2014 07:30:23 +0000</updated>
                            <resolved>Wed, 5 Mar 2014 00:21:38 +0000</resolved>
                                    <version>0.12.0</version>
                                    <fixVersion>0.13.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>9</watches>
                                                                <comments>
                            <comment id="13825828" author="alangates" created="Mon, 18 Nov 2013 22:05:42 +0000"  >&lt;p&gt;Design doc&lt;/p&gt;</comment>
                            <comment id="13844468" author="alangates" created="Tue, 10 Dec 2013 17:54:12 +0000"  >&lt;p&gt;Work in progress, definitely not done.  Also huge, unfortunately since I had to regenerate the thrift code. &lt;/p&gt;

&lt;p&gt;This includes the changes to the Hive metastore interface and the framework for new transaction and lock managers on the client.  These two pieces are not yet inter-connected, and use of the transaction manager is not yet connected to the Hive Driver class.&lt;/p&gt;</comment>
                            <comment id="13854873" author="hiveqa" created="Sat, 21 Dec 2013 15:18:56 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12619930/HIVE-5843.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12619930/HIVE-5843.2.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 2 failed/errored test(s), 4820 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_drop_with_concurrency
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_lockneg_try_drop_locked_db
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/725/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/725/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/725/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/725/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 2 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12619930&lt;/p&gt;</comment>
                            <comment id="13854941" author="brocknoland" created="Sat, 21 Dec 2013 21:20:39 +0000"  >&lt;p&gt;Alan,&lt;/p&gt;

&lt;p&gt;Can you generate a patch which does not contain the generated code for reviewing purposes?&lt;/p&gt;

&lt;p&gt;Also, you thrift methods should take a single request object and return a single response object so the methods can be versioned. HS2 does a good job of this:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/hive/blob/trunk/service/if/TCLIService.thrift#L1020&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/hive/blob/trunk/service/if/TCLIService.thrift#L1020&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13855818" author="alangates" created="Mon, 23 Dec 2013 18:24:26 +0000"  >&lt;p&gt;Thanks Brock for the feedback.  I&apos;ll look at changing the thrift method signatures.  Looking more at my code I think I left some ends dangling in DDLTask.java as well, that I also need to fix. But I&apos;ll still post a source only patch for easier viewing.&lt;/p&gt;</comment>
                            <comment id="13874411" author="alangates" created="Fri, 17 Jan 2014 04:11:55 +0000"  >&lt;p&gt;A new version of the patch.  It fixes the two failed unit tests noted by the buildbot, ties up the loose ends in DDLTask, integrates the new DbTxnManager with the rest of the system, and adds a number of new tests.  I&apos;ve uploaded a source only version of the patch separately.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brocknoland&quot; class=&quot;user-hover&quot; rel=&quot;brocknoland&quot;&gt;Brock Noland&lt;/a&gt;, on the thrift method signatures I&apos;ve changed them somewhat.  In the places where they were taking more than one argument or returning values I&apos;ve put in structs.  But a number of the calls take a single long value, the transaction id.  I don&apos;t want to wrap and unwrap this all the time, as I&apos;d like this to be as fast as possible and it seems overkill.  The odds that methods like abortTransaction() will take more than a transactionId seem low.&lt;/p&gt;</comment>
                            <comment id="13874594" author="hiveqa" created="Fri, 17 Jan 2014 09:29:10 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12623577/HIVE-5843.3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12623577/HIVE-5843.3.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 11 failed/errored test(s), 5034 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestHBaseCliDriver.testCliDriver_external_table_ppd
org.apache.hadoop.hive.cli.TestHBaseCliDriver.testCliDriver_hbase_binary_map_queries
org.apache.hadoop.hive.cli.TestHBaseCliDriver.testCliDriver_hbase_binary_map_queries_prefix
org.apache.hadoop.hive.cli.TestHBaseCliDriver.testCliDriver_hbase_binary_storage_queries
org.apache.hadoop.hive.cli.TestHBaseCliDriver.testCliDriver_hbase_joins
org.apache.hadoop.hive.cli.TestHBaseCliDriver.testCliDriver_hbase_ppd_key_range
org.apache.hadoop.hive.cli.TestHBaseCliDriver.testCliDriver_hbase_pushdown
org.apache.hadoop.hive.cli.TestHBaseCliDriver.testCliDriver_hbase_queries
org.apache.hadoop.hive.cli.TestHBaseCliDriver.testCliDriver_hbase_scan_params
org.apache.hadoop.hive.cli.TestHBaseCliDriver.testCliDriver_hbase_single_sourced_multi_insert
org.apache.hadoop.hive.cli.TestHBaseCliDriver.testCliDriver_ppd_key_ranges
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/946/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/946/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/946/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/946/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 11 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12623577&lt;/p&gt;</comment>
                            <comment id="13874877" author="alangates" created="Fri, 17 Jan 2014 15:36:20 +0000"  >&lt;p&gt;Looking at test failures.&lt;/p&gt;</comment>
                            <comment id="13874898" author="brocknoland" created="Fri, 17 Jan 2014 16:07:11 +0000"  >&lt;blockquote&gt;&lt;p&gt;In the places where they were taking more than one argument or returning values I&apos;ve put in structs.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Thank you very much!!&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;But a number of the calls take a single long value, the transaction id. I don&apos;t want to wrap and unwrap this all the time, as I&apos;d like this to be as fast as possible and it seems overkill. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Sorry Alan, please excuse me for my ignorance. From &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-5317&quot; title=&quot;Implement insert, update, and delete in Hive with full ACID support&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-5317&quot;&gt;&lt;del&gt;HIVE-5317&lt;/del&gt;&lt;/a&gt; &quot;Agreed, this will fail badly in a one insert at a time situation.&quot;. Therefore do we see these methods being called in tight loops? It seems that the IO in this situation would dominate any unwrapping of objects?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;The odds that methods like abortTransaction() will take more than a transactionId seem low.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Please know that I am not trying to be obstinate here! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; My only concern is that we follow best practices for new thrift APIs.  The number of times I have heard &quot;we won&apos;t need to change X&quot; and then X later needed to be changed is too numerous to count.&lt;/p&gt;

&lt;p&gt;API&apos;s always evolve and therefore I would suggest that every method take a single parameter and return a single response. Additionally I would not throw an exceptions as they are problematic as well and instead return a Status struct (code, message, stacktrace) which can contain an optional stack trace should an exception be thrown on the server side.&lt;/p&gt;</comment>
                            <comment id="13878842" author="alangates" created="Wed, 22 Jan 2014 17:07:24 +0000"  >&lt;blockquote&gt;&lt;p&gt;Therefore do we see these methods being called in tight loops? It seems that the IO in this situation would dominate any unwrapping of objects?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I don&apos;t see this in tight loops, but whenever this is turned on we are adding a round trip to the metastore on every read query (for lock acquisition) and two for inserts (txn open plus lock acquisition).  I&apos;d just like to keep those as fast as possible.  I&apos;ll do some micro-benchmarking and if I can&apos;t show that it costs something extra I&apos;ll move the single integer values to a struct.  A question though.  Can thrift handle adding new parameters to functions?  It would seem a natural thing to support given thrift&apos;s version independence, but I couldn&apos;t find anything one way or another in the docs.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Additionally I would not throw an exceptions as they are problematic as well&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;What&apos;s wrong with exceptions in thrift?&lt;/p&gt;</comment>
                            <comment id="13878974" author="brocknoland" created="Wed, 22 Jan 2014 18:35:45 +0000"  >&lt;blockquote&gt;&lt;p&gt;I&apos;ll do some micro-benchmarking and if I can&apos;t show that it costs something extra I&apos;ll move the single integer values to a struct.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Awesome!&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Can thrift handle adding new parameters to functions? It would seem a natural thing to support given thrift&apos;s version independence, but I couldn&apos;t find anything one way or another in the docs.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Agreed, you would think that it would be a priority...but AFAIK that is an issue. Thus the use of a single &quot;Request&quot; object per method call.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;What&apos;s wrong with exceptions in thrift?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I suppose the method signatures throw TException which is the parent class of all generated thrift exceptions?  If so, then I don&apos;t suppose there is an issue.&lt;/p&gt;</comment>
                            <comment id="13880553" author="alangates" created="Fri, 24 Jan 2014 00:37:27 +0000"  >&lt;p&gt;New version of the patch.  This fixes the test failures in the last patch.  It also changes the thrift interface per Brock&apos;s requests.  After profiling there was no significant performance penalty for the wrapping and unwrapping.&lt;/p&gt;</comment>
                            <comment id="13881201" author="brocknoland" created="Fri, 24 Jan 2014 17:48:50 +0000"  >&lt;p&gt;Great to hear!&lt;/p&gt;</comment>
                            <comment id="13881960" author="hiveqa" created="Sat, 25 Jan 2014 17:45:27 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12624960/HIVE-5843.4.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12624960/HIVE-5843.4.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 5 failed/errored test(s), 5052 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_auto_sortmerge_join_16
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_import_exported_table
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_infer_bucket_sort_reducers_power_two
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_load_hdfs_file_with_space_in_the_name
org.apache.hadoop.hive.cli.TestNegativeMinimrCliDriver.testNegativeCliDriver_file_with_header_footer_negative
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1017/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1017/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1017/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1017/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 5 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12624960&lt;/p&gt;</comment>
                            <comment id="13884782" author="alangates" created="Tue, 28 Jan 2014 22:22:07 +0000"  >&lt;p&gt;The first four tests auto_sortmerge_join_16, import_exported_table, infer_bucket_sort_reducers_power_two, and load_hdfs_file_with_space_in_the_name pass in my local environment.  The last one, file_with_header_footer_negative fails for me on both my branch and trunk.&lt;/p&gt;

&lt;p&gt;Thus I conclude none of these have anything to do with my changes.&lt;/p&gt;</comment>
                            <comment id="13904669" author="alangates" created="Tue, 18 Feb 2014 21:58:50 +0000"  >&lt;p&gt;This patch probably doesn&apos;t apply as I haven&apos;t pulled from trunk for a couple of weeks.  But I wanted to post it as a work in progress since I made quite a few changes since the last patch.  Those changes include:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;many bug fixes&lt;/li&gt;
	&lt;li&gt;switched to using a jdbc pool rather than having a connection per thread&lt;/li&gt;
	&lt;li&gt;added functionality needed by the compactor (&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-6319&quot; title=&quot;Insert, update, delete functionality needs a compactor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-6319&quot;&gt;&lt;del&gt;HIVE-6319&lt;/del&gt;&lt;/a&gt;)&lt;/li&gt;
	&lt;li&gt;added functionality needed by parser changes for SHOW TRANSACTIONS, etc. (&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-6460&quot; title=&quot;Need new &amp;quot;show&amp;quot; functionality for transactions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-6460&quot;&gt;&lt;del&gt;HIVE-6460&lt;/del&gt;&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13911890" author="alangates" created="Tue, 25 Feb 2014 18:58:55 +0000"  >&lt;p&gt;Latest version of the code minus the generated files.&lt;/p&gt;</comment>
                            <comment id="13911893" author="alangates" created="Tue, 25 Feb 2014 18:59:50 +0000"  >&lt;p&gt;Latest version of the code.  This has been merged with trunk and should be ready for review and hopefully commit.&lt;/p&gt;</comment>
                            <comment id="13912028" author="alangates" created="Tue, 25 Feb 2014 20:43:51 +0000"  >&lt;p&gt;New &quot;latest&quot; version of the patch.  I had forgotten to add the new thrift generated files to the previous version.&lt;/p&gt;</comment>
                            <comment id="13912036" author="lefty@hortonworks.com" created="Tue, 25 Feb 2014 20:47:09 +0000"  >&lt;p&gt;HiveConf comment nits:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;hive.compactor.check.interval:  &quot;// Time in seconds between checks to see if any partitions need compacted.&quot;  --&amp;gt;  &quot;need to be compacted.&quot;&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;hive.txn.timeout:  &quot;// time after which ...&quot;  --&amp;gt;  init cap &quot;Time&quot;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Also a question:  If this goes into Hive 0.13.0, will it be useful immediately or just a piece of an incomplete feature?  Thirteen new config parameters are added, and I&apos;m wondering about documentation (as always).  When &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-6037&quot; title=&quot;Synchronize HiveConf with hive-default.xml.template and support show conf&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-6037&quot;&gt;&lt;del&gt;HIVE-6037&lt;/del&gt;&lt;/a&gt; gets committed we won&apos;t need to update hive-default.xml.template anymore but the parameter comments will have to be moved into the definitions.&lt;/p&gt;</comment>
                            <comment id="13912059" author="alangates" created="Tue, 25 Feb 2014 21:08:35 +0000"  >&lt;p&gt;I&apos;m definitely hoping this makes it into 0.13.  And no, it isn&apos;t only incomplete feature.  If it was, I&apos;d wait until after 0.13 branched.  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-5687&quot; title=&quot;Streaming support in Hive&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-5687&quot;&gt;&lt;del&gt;HIVE-5687&lt;/del&gt;&lt;/a&gt; depends on this, and the hope is to get it into 0.13.&lt;/p&gt;

&lt;p&gt;As for the comments in HiveConf, I didn&apos;t realize I was writing documentation there or I would have paid closer attention to my grammar.  However, a nit on your nit.  &quot;need compacted.&quot; --&amp;gt; &quot;need to be compacted.&quot;  Are you sure?  What is the grammar rule there?&lt;/p&gt;

&lt;p&gt;Overall on documentation though, there will be a fair amount to write, especially once we have &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-6319&quot; title=&quot;Insert, update, delete functionality needs a compactor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-6319&quot;&gt;&lt;del&gt;HIVE-6319&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-6060&quot; title=&quot;Define API for RecordUpdater and UpdateReader&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-6060&quot;&gt;&lt;del&gt;HIVE-6060&lt;/del&gt;&lt;/a&gt; there.  Should I file a separate JIRA outline the documentation needs?&lt;/p&gt;</comment>
                            <comment id="13912361" author="lefty@hortonworks.com" created="Wed, 26 Feb 2014 01:09:39 +0000"  >&lt;p&gt;Thanks Alan, a doc JIRA seems like a good idea for this.&lt;/p&gt;

&lt;p&gt;About the nit, I&apos;m sure that &quot;partitions need compacted&quot; sounds wrong &amp;#8211; maybe you meant &quot;need compaction&quot; or maybe I misunderstood the concept.  I read it as similar to &quot;The dishes in the sink need cleaned&quot; vs. &quot;need to be cleaned&quot; or &quot;need cleaning.&quot;  Not so?&lt;/p&gt;

&lt;p&gt;But I can&apos;t cite a grammar rule without doing some research.  So far I&apos;ve found out that &quot;need&quot; can be a regular verb or a modal.  &quot;I need to look it up, but I need not obsess over it,&quot; respectively.&lt;/p&gt;</comment>
                            <comment id="13912433" author="alangates" created="Wed, 26 Feb 2014 02:19:20 +0000"  >&lt;p&gt;Found an NPE that shows up on a cluster but not in .q file tests.  Will post a new version of the patch soon.&lt;/p&gt;</comment>
                            <comment id="13913189" author="ashutoshc" created="Wed, 26 Feb 2014 17:18:31 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=alangates&quot; class=&quot;user-hover&quot; rel=&quot;alangates&quot;&gt;Alan Gates&lt;/a&gt; If you can create RB entry sans generated code to ease review for it, that will be great.&lt;/p&gt;</comment>
                            <comment id="13913705" author="alangates" created="Wed, 26 Feb 2014 23:16:38 +0000"  >&lt;p&gt;Review board review &lt;a href=&quot;https://reviews.apache.org/r/18536/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/18536/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13915029" author="alangates" created="Thu, 27 Feb 2014 20:44:55 +0000"  >&lt;p&gt;Latest version of the patch with several bug fixes.&lt;/p&gt;</comment>
                            <comment id="13916214" author="hiveqa" created="Fri, 28 Feb 2014 19:22:48 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12631617/HIVE-5843.9.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12631617/HIVE-5843.9.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 3 failed/errored test(s), 5290 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.metastore.txn.TestCompactionTxnHandler.testRevokeTimedOutWorkers
org.apache.hive.beeline.TestSchemaTool.testSchemaInit
org.apache.hive.beeline.TestSchemaTool.testSchemaUpgrade
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1555/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1555/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1555/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1555/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 3 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12631617&lt;/p&gt;</comment>
                            <comment id="13918988" author="alangates" created="Tue, 4 Mar 2014 04:02:12 +0000"  >&lt;p&gt;New version of the patch that addresses Ashutosh&apos;s comments and fixes the failed unit tests found in the previous patch.&lt;/p&gt;

&lt;p&gt;The one set of comments not addressed is the one about moving ValidTxnList out of IMetaStoreClient.  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-6060&quot; title=&quot;Define API for RecordUpdater and UpdateReader&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-6060&quot;&gt;&lt;del&gt;HIVE-6060&lt;/del&gt;&lt;/a&gt; needs to move it to common anyway so that it can be shared with the ql stuff on the backend.  So I won&apos;t move it in this patch, but the next path of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-6060&quot; title=&quot;Define API for RecordUpdater and UpdateReader&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-6060&quot;&gt;&lt;del&gt;HIVE-6060&lt;/del&gt;&lt;/a&gt; will include the move.&lt;/p&gt;</comment>
                            <comment id="13919578" author="ashutoshc" created="Tue, 4 Mar 2014 16:35:26 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13919587" author="hiveqa" created="Tue, 4 Mar 2014 16:42:34 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12632435/HIVE-5843.10.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12632435/HIVE-5843.10.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 1 failed/errored test(s), 5348 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_bucketmapjoin6
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1614/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1614/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1614/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1614/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 1 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12632435&lt;/p&gt;</comment>
                            <comment id="13919706" author="alangates" created="Tue, 4 Mar 2014 17:58:25 +0000"  >&lt;p&gt;I don&apos;t believe this test failure is related to my changes.  I ran this test with and without my patch on Mac and Unix and it passed in all scenarios.&lt;/p&gt;</comment>
                            <comment id="13920272" author="ashutoshc" created="Wed, 5 Mar 2014 00:21:38 +0000"  >&lt;p&gt;Committed to trunk. Thanks, Alan!&lt;/p&gt;</comment>
                            <comment id="13947620" author="lefty@hortonworks.com" created="Wed, 26 Mar 2014 07:14:10 +0000"  >&lt;p&gt;This introduces 13 new config params, but &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-6606&quot; title=&quot;Stand alone metastore fails to start if new transaction values not defined in config&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-6606&quot;&gt;&lt;del&gt;HIVE-6606&lt;/del&gt;&lt;/a&gt; removes two of them.&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;hive.txn.manager, &lt;del&gt;hive.txn.driver&lt;/del&gt; (removed), &lt;del&gt;hive.txn.connection.string&lt;/del&gt; (removed), hive.txn.timeout, hive.txn.max.open.batch, hive.txn.testing, hive.compactor.initiator.on, hive.compactor.worker.threads, hive.compactor.worker.timeout, hive.compactor.check.interval, hive.compactor.delta.num.threshold, hive.compactor.delta.pct.threshold, hive.compactor.abortedtxn.threshold&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;They are listed in a comment on &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-6586&quot; title=&quot;Update parameters in HiveConf.java after commit HIVE-6037&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-6586&quot;&gt;&lt;del&gt;HIVE-6586&lt;/del&gt;&lt;/a&gt;, so they can be added to the new version of HiveConf.java after &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-6037&quot; title=&quot;Synchronize HiveConf with hive-default.xml.template and support show conf&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-6037&quot;&gt;&lt;del&gt;HIVE-6037&lt;/del&gt;&lt;/a&gt; gets committed.  They also need to be documented in the wiki.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12694872">HIVE-6420</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12699866">HIVE-6606</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12676510">HIVE-5687</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12629642" name="5843.5-wip.patch" size="432414" author="alangates" created="Tue, 18 Feb 2014 21:58:50 +0000"/>
                            <attachment id="12631006" name="HIVE-5843-src-only.6.patch" size="123036" author="alangates" created="Tue, 25 Feb 2014 18:58:55 +0000"/>
                            <attachment id="12620234" name="HIVE-5843-src-only.patch" size="218761" author="alangates" created="Mon, 23 Dec 2013 18:24:40 +0000"/>
                            <attachment id="12632435" name="HIVE-5843.10.patch" size="4343894" author="alangates" created="Tue, 4 Mar 2014 04:02:12 +0000"/>
                            <attachment id="12619930" name="HIVE-5843.2.patch" size="3535534" author="alangates" created="Fri, 20 Dec 2013 23:39:37 +0000"/>
                            <attachment id="12623575" name="HIVE-5843.3-src.path" size="293552" author="alangates" created="Fri, 17 Jan 2014 04:07:17 +0000"/>
                            <attachment id="12623577" name="HIVE-5843.3.patch" size="3638143" author="alangates" created="Fri, 17 Jan 2014 04:11:55 +0000"/>
                            <attachment id="12624959" name="HIVE-5843.4-src.patch" size="297353" author="alangates" created="Fri, 24 Jan 2014 00:36:31 +0000"/>
                            <attachment id="12624960" name="HIVE-5843.4.patch" size="3769680" author="alangates" created="Fri, 24 Jan 2014 00:37:27 +0000"/>
                            <attachment id="12631007" name="HIVE-5843.6.patch" size="3614838" author="alangates" created="Tue, 25 Feb 2014 18:59:50 +0000"/>
                            <attachment id="12631033" name="HIVE-5843.7.patch" size="4335964" author="alangates" created="Tue, 25 Feb 2014 20:43:51 +0000"/>
                            <attachment id="12631597" name="HIVE-5843.8.patch" size="4355685" author="alangates" created="Thu, 27 Feb 2014 20:44:55 +0000"/>
                            <attachment id="12631596" name="HIVE-5843.8.src-only.patch" size="403908" author="alangates" created="Thu, 27 Feb 2014 20:44:30 +0000"/>
                            <attachment id="12631617" name="HIVE-5843.9.patch" size="4341615" author="alangates" created="Thu, 27 Feb 2014 23:02:53 +0000"/>
                            <attachment id="12618064" name="HIVE-5843.patch" size="3508837" author="alangates" created="Tue, 10 Dec 2013 17:54:12 +0000"/>
                            <attachment id="12614488" name="HiveTransactionManagerDetailedDesign (1).pdf" size="113176" author="alangates" created="Mon, 18 Nov 2013 22:05:42 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>16.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 21 Dec 2013 15:18:56 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>359143</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 36 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1pwvz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>359442</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>