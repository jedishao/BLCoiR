<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sat Dec 03 00:38:46 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HIVE-2269/HIVE-2269.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HIVE-2269] Hive --auxpath option can&apos;t handle multiple colon separated values</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2269</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="12513071">HIVE-2269</key>
            <summary>Hive --auxpath option can&apos;t handle multiple colon separated values</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cwsteinbach">Carl Steinbach</assignee>
                                    <reporter username="cwsteinbach">Carl Steinbach</reporter>
                        <labels>
                    </labels>
                <created>Thu, 7 Jul 2011 03:02:54 +0000</created>
                <updated>Fri, 21 Mar 2014 18:54:58 +0000</updated>
                            <resolved>Fri, 21 Mar 2014 18:39:38 +0000</resolved>
                                    <version>0.7.0</version>
                    <version>0.7.1</version>
                    <version>0.10.0</version>
                                    <fixVersion>0.12.0</fixVersion>
                                    <component>CLI</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13061018" author="cwsteinbach" created="Thu, 7 Jul 2011 03:18:56 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
% hive --auxpath $HIVE_HOME/lib/hive-hbase-handler-0.8.0-SNAPSHOT.jar:$HIVE_HOME/lib/hive-contrib-0.8.0-SNAPSHOT.jar
Logging initialized using configuration in jar:file:/Users/carl/Work/repos/hive3/build/dist/lib/hive-common-0.8.0-SNAPSHOT.jar!/hive-log4j.properties
Hive history file=/tmp/carl/hive_job_log_carl_201107062017_907171289.txt
hive&amp;gt; SELECT * FROM tmp WHERE x &amp;gt; 1;
SELECT * FROM tmp WHERE x &amp;gt; 1;
Total MapReduce jobs = 1
Launching Job 1 out of 1
&lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt; of reduce tasks is set to 0 since there&apos;s no reduce &lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt;
Execution log at: /tmp/carl/carl_20110706201717_5294c2b7-1cdc-40ab-9aeb-d1811eb8c486.log
java.io.FileNotFoundException: File /Users/carl/Work/repos/hive3/build/dist/lib/hive-hbase-handler-0.8.0-SNAPSHOT.jar:/Users/carl/Work/repos/hive3/build/dist/lib/hive-contrib-0.8.0-SNAPSHOT.jar does not exist.
	at org.apache.hadoop.fs.RawLocalFileSystem.getFileStatus(RawLocalFileSystem.java:361)
	at org.apache.hadoop.fs.FilterFileSystem.getFileStatus(FilterFileSystem.java:245)
	at org.apache.hadoop.filecache.DistributedCache.getTimestamp(DistributedCache.java:509)
	at org.apache.hadoop.mapred.JobClient.configureCommandLineOptions(JobClient.java:629)
	at org.apache.hadoop.mapred.JobClient.submitJobInternal(JobClient.java:761)
	at org.apache.hadoop.mapred.JobClient.submitJob(JobClient.java:730)
	at org.apache.hadoop.hive.ql.exec.ExecDriver.execute(ExecDriver.java:409)
	at org.apache.hadoop.hive.ql.exec.ExecDriver.main(ExecDriver.java:663)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.apache.hadoop.util.RunJar.main(RunJar.java:156)
Job Submission failed with exception &apos;java.io.FileNotFoundException(File /Users/carl/Work/repos/hive3/build/dist/lib/hive-hbase-handler-0.8.0-SNAPSHOT.jar:/Users/carl/Work/repos/hive3/build/dist/lib/hive-contrib-0.8.0-SNAPSHOT.jar does not exist.)&apos;
FAILED: Execution Error, &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; code 2 from org.apache.hadoop.hive.ql.exec.MapRedTask
hive&amp;gt; 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13061031" author="cwsteinbach" created="Thu, 7 Jul 2011 04:07:01 +0000"  >&lt;p&gt;With the patch in place this works:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;

% hive --auxpath &lt;span class=&quot;code-quote&quot;&gt;&quot;::;;,;,$HIVE_HOME/lib/hive-hbase-handler-0.8.0-SNAPSHOT.jar:,:$HIVE_HOME/lib/hive-contrib-0.8.0-SNAPSHOT.jar,::&quot;&lt;/span&gt;
Logging initialized using configuration in jar:file:/Users/carl/Work/repos/hive3/build/dist/lib/hive-common-0.8.0-SNAPSHOT.jar!/hive-log4j.properties
Hive history file=/tmp/carl/hive_job_log_carl_201107062104_2080798370.txt
hive&amp;gt; show tables;
show tables;
OK
tmp
Time taken: 3.573 seconds
hive&amp;gt; select * from tmp where x &amp;gt; 1;
select * from tmp where x &amp;gt; 1;
Total MapReduce jobs = 1
Launching Job 1 out of 1
&lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt; of reduce tasks is set to 0 since there&apos;s no reduce &lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt;
Execution log at: /tmp/carl/carl_20110706210404_ad7de6b9-1b72-4477-bb97-08f3baf1b43f.log
Job running in-process (local Hadoop)
Hadoop job information &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;: number of mappers: 0; number of reducers: 0
2011-07-06 21:04:19,185 &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; map = 100%,  reduce = 0%
Ended Job = job_local_0001
OK
Time taken: 5.292 seconds
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13061295" author="appodictic" created="Thu, 7 Jul 2011 13:31:43 +0000"  >&lt;p&gt;I am someone confused by the title, auxpath is &apos;comma&apos; separate but the title says &apos;colon&apos;.&lt;/p&gt;</comment>
                            <comment id="13061455" author="cwsteinbach" created="Thu, 7 Jul 2011 17:39:02 +0000"  >&lt;blockquote&gt;&lt;p&gt;auxpath is &apos;comma&apos; separate but the title says &apos;colon&apos;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;@Ed: Where is this documented? Regardless, with this patch the value supplied to --auxpath can be either comma or colon separated.&lt;/p&gt;</comment>
                            <comment id="13061513" author="appodictic" created="Thu, 7 Jul 2011 19:21:46 +0000"  >&lt;p&gt;I am not sure this is documented anywhere. As a hadoop historian, I am guessing &apos;,&apos; was chosen to avoid the separator/path separator differences on different OS&apos;s. I do not see a problem supporting columns other then how it might effect the dedicated cygwin/hive users.   &lt;/p&gt;</comment>
                            <comment id="13061520" author="appodictic" created="Thu, 7 Jul 2011 19:30:21 +0000"  >&lt;p&gt;Also it seems that the AUX_PATH is being specified as URI&apos;s. &lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;https://github.com/riptano/hive/wiki/Cassandra-Handler-usage-in-Hive-0.7-with-Cassandra-0.7
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&amp;lt;property&amp;gt; &amp;lt;name&amp;gt;hive.aux.jars.path&amp;lt;/name&amp;gt; &amp;lt;value&amp;gt;file:///path/to/guava-r05.jar,file:///path/to/commons-lang-2.4.jar,file:///path/to/apache-cassandra-0.7.6.jar,file:///path/to/hive-cassandra-handler-0.7.0-beta1.jar&amp;lt;/value&amp;gt; &amp;lt;/property&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So splitting on &apos;:&apos; could break URI&apos;s?&lt;/p&gt;</comment>
                            <comment id="13061636" author="phunt" created="Thu, 7 Jul 2011 22:38:43 +0000"  >&lt;p&gt;Hi. It looks like HIVE_AUX_JARS_PATH (hive --auxpath ...) can be either a directory (if so it considers all *.jar in the directory) or a list. In the case it&apos;s a list, can the entries be only jars or mixed jars &amp;amp; directories?&lt;/p&gt;

&lt;p&gt;I can&apos;t find any documentation on this, perhaps a JIRA should be opened to document the semantics of this parameter?&lt;/p&gt;</comment>
                            <comment id="13079758" author="jghoman" created="Fri, 5 Aug 2011 02:32:43 +0000"  >&lt;p&gt;Created &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2349&quot; title=&quot;Define semantics for --auxpath&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2349&quot;&gt;HIVE-2349&lt;/a&gt; to figure out the exact semantics of auxpath, per Pat.&lt;/p&gt;</comment>
                            <comment id="13079759" author="jghoman" created="Fri, 5 Aug 2011 02:32:59 +0000"  >&lt;p&gt;Canceling patch until questions about what a valid auxpath is are answered.&lt;/p&gt;</comment>
                            <comment id="13693139" author="jojspieg@gmail.com" created="Tue, 25 Jun 2013 16:01:51 +0000"  >&lt;p&gt;No matter what the intent was, the case where HIVE_AUX_JARS_PATH is a list is broken. In the list case, the value of this variable is used in two contradictory ways:&lt;/p&gt;

&lt;p&gt;(1) It is colon appended to AUX_CLASSPATH, then CLASSPATH, then HADOOP_CLASSPATH&lt;br/&gt;
(2) It is split on &quot;,&quot; and appended to Hadoop&apos;s -libjars and hive.aux.jars.path&lt;/p&gt;

&lt;p&gt;If you use commas, (1) doesn&apos;t work.  If you use colons, (2) doesn&apos;t work.&lt;/p&gt;

&lt;p&gt;I am not sure why user JARs need to go in HADOOP_CLASSPATH but I have noticed failures in local mode if one of the user JARs contains an InputFormat and it is not in HADOOP_CLASSPATH.  I think this is probably due to a class caching/loading bug in Hive.  But for whatever reason, HADOOP_CLASSPATH needs to be set if the jars contain a custom InputFormat.  But otherwise, setting -libjars and hive.aux.jars.path seems to be sufficient.  This is probably why more people haven&apos;t been impacted by this bug - for simple UDFs, using &apos;,&apos; works because the comma list in HADOOP_CLASSPATH is silently ignored.&lt;/p&gt;

&lt;p&gt;Consider a user with the following constraints:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Can not modify $HIVE_HOME (i.e. can not add jars to $HIVE_HOME/auxlib)&lt;/li&gt;
	&lt;li&gt;Has multiple JARs&lt;/li&gt;
	&lt;li&gt;The JARs contain at least one custom InputFormat&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;In current releases, this user must pick one of the following options:&lt;br/&gt;
(1) Add the list of JARs to HADOOP_CLASSPATH manually (with colons) and then set HIVE_AUX_JARS_PATH (or --auxpath) with commas.  The comma list still gets appended to the end of HADOOP_CLASSPATH but it should be ignored by the JVM.&lt;br/&gt;
(2) Copy all JARs to a single directory.  Set HIVE_AUX_JARS_PATH (or --auxpath) to this single directory.&lt;/p&gt;

&lt;p&gt;Am I missing anything?  Note, &quot;add jars&quot; is not an option for JARs with custom InputFormats as it does not change HADOOP_CLASSPATH.&lt;/p&gt;

&lt;p&gt;I should also mention that Carl&apos;s patch allows colons to be used successfully in --auxpath.  His patch was picked up by or before CDH3u3 but dropped sometime later.  So, there is a brief period where CDH users can successfully specify a list of JARs with just --auxpath.&lt;/p&gt;

&lt;p&gt;Finally, when defining the semantics of &quot;--auxpath&quot;, it should support a list of local files (not URIs) that can be either comma or colon separated.  The script should reformat the list depending on where it is used.  Supporting just commas or just colons would not be backwards compatible.  Supporting URIs would not be backwards compatible.  Adding support for directories in lists may be OK.&lt;/p&gt;</comment>
                            <comment id="13943366" author="ashutoshc" created="Fri, 21 Mar 2014 18:39:38 +0000"  >&lt;p&gt;After various attempts including &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3978&quot; title=&quot;HIVE_AUX_JARS_PATH should have : instead of , as separator since it gets appended to HADOOP_CLASSPATH&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3978&quot;&gt;&lt;del&gt;HIVE-3978&lt;/del&gt;&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-5363&quot; title=&quot;HIVE-3978 broke the command line option --auxpath&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-5363&quot;&gt;&lt;del&gt;HIVE-5363&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-5410&quot; title=&quot;Hive command line option --auxpath still does not work post HIVE-5363&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-5410&quot;&gt;&lt;del&gt;HIVE-5410&lt;/del&gt;&lt;/a&gt; this has been resolved and it was further improved in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-6328&quot; title=&quot;Hive script should not overwrite AUX_CLASSPATH with HIVE_AUX_JARS_PATH if the latter is set&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-6328&quot;&gt;&lt;del&gt;HIVE-6328&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12517990">HIVE-2349</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12671597">HIVE-5410</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12630496">HIVE-3978</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12670572">HIVE-5363</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12485531" name="HIVE-2269-auxpath.1.patch.txt" size="825" author="cwsteinbach" created="Thu, 7 Jul 2011 04:05:46 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 7 Jul 2011 13:31:43 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37481</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 37 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i05imn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>30115</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>