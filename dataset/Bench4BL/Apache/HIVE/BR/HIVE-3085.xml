<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sat Dec 03 22:52:13 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HIVE-3085/HIVE-3085.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HIVE-3085] make parallel tests work</title>
                <link>https://issues.apache.org/jira/browse/HIVE-3085</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://cwiki.apache.org/Hive/unit-test-parallel-execution.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://cwiki.apache.org/Hive/unit-test-parallel-execution.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I was trying to run the tests using the instructions above.&lt;br/&gt;
I was able to run them using a single machine (parallelism of 4 in ~2 hours).&lt;/p&gt;

&lt;p&gt;The conf. file is as follows: .hive_ptest.conf&lt;/p&gt;

{
  &quot;qfile_hosts&quot;: [
    [&quot;root@&amp;lt;MC&amp;gt;&quot;, 4]
  ],

  &quot;other_hosts&quot;: [
  [&quot;root@&amp;lt;MC&amp;gt;&quot;, 1]
  ],

  &quot;master_base_path&quot;: &quot;/data/users/tmp&quot;,
  &quot;host_base_path&quot;: &quot;/data/users/hivetests&quot;,
  &quot;java_home&quot;: &quot;/usr/local/jdk-6u24-64&quot;

}</description>
                <environment></environment>
        <key id="12559291">HIVE-3085</key>
            <summary>make parallel tests work</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sding">Shuai Ding</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Mon, 4 Jun 2012 23:13:51 +0000</created>
                <updated>Thu, 10 Jan 2013 19:53:49 +0000</updated>
                            <resolved>Tue, 12 Jun 2012 15:37:34 +0000</resolved>
                                                    <fixVersion>0.10.0</fixVersion>
                                    <component>Testing Infrastructure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                <comments>
                            <comment id="13288984" author="namit" created="Mon, 4 Jun 2012 23:16:08 +0000"  >&lt;p&gt;This is a script change used to run tests in parallel. &lt;/p&gt;</comment>
                            <comment id="13289001" author="traviscrawford" created="Mon, 4 Jun 2012 23:49:37 +0000"  >&lt;p&gt;Does &lt;tt&gt;script_broken_pipe1.q&lt;/tt&gt; pass in parallel mode? I&apos;ve been looking at &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3084&quot; title=&quot;Hive CI failing due to script_broken_pipe1.q&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3084&quot;&gt;&lt;del&gt;HIVE-3084&lt;/del&gt;&lt;/a&gt; for a couple hours now and am curious if parallel mode casuses it to complete successfully. It passes when run by itself, but regularly fails as part of the full test suite.&lt;/p&gt;</comment>
                            <comment id="13289052" author="namit" created="Tue, 5 Jun 2012 01:25:04 +0000"  >&lt;p&gt;It ran fine for me&lt;/p&gt;</comment>
                            <comment id="13290565" author="kevinwilfong" created="Wed, 6 Jun 2012 23:11:33 +0000"  >&lt;p&gt;The tests testDatabaseLocation and testSynchronized are failing for all test classes that extend TestHiveMetaStore when I try to run the script.&lt;/p&gt;

&lt;p&gt;I&apos;m running in a Linux environment using the .hive_ptest.conf in the description.&lt;/p&gt;</comment>
                            <comment id="13292969" author="sding" created="Mon, 11 Jun 2012 18:44:31 +0000"  >&lt;p&gt;&lt;a href=&quot;https://reviews.facebook.net/D3585&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D3585&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13293032" author="cwsteinbach" created="Mon, 11 Jun 2012 20:09:48 +0000"  >&lt;p&gt;I added some comments to the review. Thanks.&lt;/p&gt;</comment>
                            <comment id="13293055" author="appodictic" created="Mon, 11 Jun 2012 20:42:59 +0000"  >&lt;p&gt;Do the &apos;parallel&apos; tests still require a shared NFS mount? A while back someone told me I did not need NFS anymore because hadoop &apos;give me Big Datas&apos;.  Really though this shared NFS mount destroys the utility of this toolkit for me.&lt;/p&gt;</comment>
                            <comment id="13293095" author="namit" created="Mon, 11 Jun 2012 21:23:20 +0000"  >&lt;p&gt;Right now, the tests does require a shared mount if you want to run on multiple machines.&lt;br/&gt;
This is good, if we dont want to compile across all the machines.&lt;/p&gt;

&lt;p&gt;Having said that, I am also planning to use it on my machine only, and this should still help to finish the tests in about 1.5 hours.&lt;br/&gt;
In that case, I was able to use local disk on my machine.&lt;/p&gt;

&lt;p&gt;This can be further optimized. Some of them are:&lt;/p&gt;

&lt;p&gt;1. Run the other tests in parallel with TestCliDriver and TestNegativeCliDriver&lt;br/&gt;
2. Run the tests that need super-user privilege in parallel with TestCliDriver and TestNegativeCliDriver&lt;/p&gt;

&lt;p&gt;Filed &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3111&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-3111&lt;/a&gt; for that.&lt;/p&gt;</comment>
                            <comment id="13293117" author="sding" created="Mon, 11 Jun 2012 21:51:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://reviews.facebook.net/D3585&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D3585&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13293121" author="namit" created="Mon, 11 Jun 2012 21:53:18 +0000"  >&lt;p&gt;@Carl, I had a question about ant very-clean package.&lt;br/&gt;
That takes a very long time (~20 min.) since we are downloading so many jar files.&lt;/p&gt;

&lt;p&gt;Won&apos;t it be better to not populate hive*jar in ivy in our local builds ?&lt;br/&gt;
Then, ant clean package can run much faster.&lt;/p&gt;

&lt;p&gt;Or, what is the downside of removing &apos;&lt;b&gt;hive&lt;/b&gt;.jar&apos; from .ivy2 and then running ant clean package.&lt;br/&gt;
Other jars rarely change, but this saves ~10 min. in compile time. &lt;/p&gt;</comment>
                            <comment id="13293124" author="sding" created="Mon, 11 Jun 2012 21:57:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://reviews.facebook.net/D3585&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D3585&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13293176" author="cwsteinbach" created="Mon, 11 Jun 2012 23:13:05 +0000"  >&lt;p&gt;@Namit&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Won&apos;t it be better to not populate hive*jar in ivy in our local builds?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I don&apos;t think we can do that and also continue to list inter-subproject dependencies in the ivy.xml files. The basic reason why this doesn&apos;t work correctly for Hive is that the build is still not using Ivy correctly. More specifically, we&apos;re manually specifying the order in which subprojects are built instead of letting Ivy determine the order through dependency analysis.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Or, what is the downside of removing &apos;hive.jar&apos; from .ivy2 and then running ant clean package.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The main downside is that the user may have configured ivy.cache.dir to be something other than ~/.ivy2, so to be sure that you&apos;re deleting the right files you have to get the value of $&lt;/p&gt;
{ivy.cache.dir}
&lt;p&gt; (which didn&apos;t seem that straightforward the last time I looked at it: &lt;a href=&quot;http://ant.apache.org/ivy/history/2.0.0/use/cleancache.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ant.apache.org/ivy/history/2.0.0/use/cleancache.html&lt;/a&gt;).&lt;/p&gt;</comment>
                            <comment id="13293191" author="cwsteinbach" created="Mon, 11 Jun 2012 23:36:42 +0000"  >&lt;p&gt;@Namit: I filed two followup tickets: &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3116&quot; title=&quot;Make very-clean Ant target more selective&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3116&quot;&gt;&lt;del&gt;HIVE-3116&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3117&quot; title=&quot;Determine order of subproject builds using ivy:buildlist task&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3117&quot;&gt;HIVE-3117&lt;/a&gt;. Thanks.&lt;/p&gt;</comment>
                            <comment id="13293289" author="sding" created="Tue, 12 Jun 2012 02:18:23 +0000"  >&lt;p&gt;&lt;a href=&quot;https://reviews.facebook.net/D3585&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D3585&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13293700" author="namit" created="Tue, 12 Jun 2012 15:35:43 +0000"  >&lt;p&gt;+1&lt;/p&gt;
</comment>
                            <comment id="13293703" author="namit" created="Tue, 12 Jun 2012 15:37:34 +0000"  >&lt;p&gt;Committed. Thanks Shuai&lt;/p&gt;</comment>
                            <comment id="13293925" author="hudson" created="Tue, 12 Jun 2012 21:12:40 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1482 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1482/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1482/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3085&quot; title=&quot;make parallel tests work&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3085&quot;&gt;&lt;del&gt;HIVE-3085&lt;/del&gt;&lt;/a&gt; make parallel tests work&lt;br/&gt;
(Shuai Ding via namit) (Revision 1349398)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
namit : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1349398&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1349398&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/testutils/ptest/hivetest.py&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13396098" author="namit" created="Mon, 18 Jun 2012 18:16:11 +0000"  >&lt;p&gt;@Carl, isn&apos;t there a problem in having hive*jar in ~/ivy2 ?&lt;br/&gt;
I am not sure, but will it create a problem if I am trying to compile 2 different versions of hive on my machine concurrently ?&lt;/p&gt;</comment>
                            <comment id="13396159" author="cwsteinbach" created="Mon, 18 Jun 2012 19:09:30 +0000"  >&lt;p&gt;@Namit: Yeah, I think it&apos;s a problem, but the changes made in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3092&quot; title=&quot;Hive tests should load Hive classes from build directory, not Ivy cache&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3092&quot;&gt;&lt;del&gt;HIVE-3092&lt;/del&gt;&lt;/a&gt; should insulate us from it. You&apos;ll turn up a bunch of links if you try searching for &quot;ivy concurrent build&quot;. However, I also think it&apos;s possible to work around this problem by publishing the Hive JARs to a filesystem repository that&apos;s local to each build, and then making sure that this local repository takes precedence in the list of resolvers in ivy/ivysettings.xml.&lt;/p&gt;</comment>
                            <comment id="13548087" author="hudson" created="Wed, 9 Jan 2013 10:24:20 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3085&quot; title=&quot;make parallel tests work&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3085&quot;&gt;&lt;del&gt;HIVE-3085&lt;/del&gt;&lt;/a&gt; make parallel tests work&lt;br/&gt;
(Shuai Ding via namit) (Revision 1349398)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
namit : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1349398&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1349398&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/testutils/ptest/hivetest.py&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13550215" author="ashutoshc" created="Thu, 10 Jan 2013 19:53:49 +0000"  >&lt;p&gt;This issue is fixed and released as part of 0.10.0 release. If you find an issue which seems to be related to this one, please create a new jira and link this one with new jira.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12560377">HIVE-3120</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12560243">HIVE-3111</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12530870" name="hive.3085.1.patch" size="2649" author="namit" created="Mon, 4 Jun 2012 23:15:45 +0000"/>
                            <attachment id="12531722" name="hive.3085.2.patch" size="10435" author="namit" created="Mon, 11 Jun 2012 21:01:58 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 4 Jun 2012 23:49:37 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>242397</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 47 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02udz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>14524</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>