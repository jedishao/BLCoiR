<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 02 05:54:08 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HIVE-13032/HIVE-13032.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HIVE-13032] Hive services need HADOOP_CLIENT_OPTS for proper log4j2 initialization</title>
                <link>https://issues.apache.org/jira/browse/HIVE-13032</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-12497&quot; title=&quot;Remove HADOOP_CLIENT_OPTS from hive script&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-12497&quot;&gt;&lt;del&gt;HIVE-12497&lt;/del&gt;&lt;/a&gt; removed HADOOP_CLIENT_OPTS as it slowed down cli launch time. But it leads to log4j2 not being initialized when using services other than CLI. Other services like metastore, schematool etc. rely on log4j to initialize the logging based on the presence of log4j2.properties file in the classpath. If we use the standard name for log4j configuration file (log4j2.properties) then automatic initialization will happen. If not, we have to tell log4j to look for specific properties file. This is done via -Dlog4j.configurationFile system property. If we pass this system property via HADOOP_CLIENT_OPTS then all hive services will have logging initialized properly. &lt;/p&gt;

&lt;p&gt;In &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-12497&quot; title=&quot;Remove HADOOP_CLIENT_OPTS from hive script&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-12497&quot;&gt;&lt;del&gt;HIVE-12497&lt;/del&gt;&lt;/a&gt;, the problem was we had HADOOP_CLIENT_OPTS at the top of the script. As a result, hadoop and hbase commands tries to initialize logging which took long time slowing down the startup time.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12938014">HIVE-13032</key>
            <summary>Hive services need HADOOP_CLIENT_OPTS for proper log4j2 initialization</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.png">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="prasanth_j">Prasanth Jayachandran</assignee>
                                    <reporter username="prasanth_j">Prasanth Jayachandran</reporter>
                        <labels>
                    </labels>
                <created>Tue, 9 Feb 2016 22:14:36 +0000</created>
                <updated>Thu, 2 Jun 2016 10:14:04 +0000</updated>
                            <resolved>Wed, 10 Feb 2016 01:56:04 +0000</resolved>
                                    <version>2.0.0</version>
                    <version>2.1.0</version>
                                    <fixVersion>2.0.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="15140139" author="prasanth_j" created="Wed, 10 Feb 2016 01:04:49 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sershe&quot; class=&quot;user-hover&quot; rel=&quot;sershe&quot;&gt;Sergey Shelukhin&lt;/a&gt; Can you please take a look?&lt;/p&gt;</comment>
                            <comment id="15140144" author="sershe" created="Wed, 10 Feb 2016 01:11:19 +0000"  >&lt;p&gt;+1. Can you see that no other services have this line explicitly? Will this cause problems for CLI due to both inits?&lt;/p&gt;</comment>
                            <comment id="15140196" author="prasanth_j" created="Wed, 10 Feb 2016 01:52:20 +0000"  >&lt;p&gt;Verified that it&apos;s not included in other services. Beeline uses different properties file and sets log4j.configurationFile again. Also double initialization is not a problem as logger factory is initialized in a static block which will be initialized automatically by the class loader. Using Configurator to initialize again will return the same instance. Committing this patch shortly.&lt;/p&gt;</comment>
                            <comment id="15140200" author="prasanth_j" created="Wed, 10 Feb 2016 01:56:04 +0000"  >&lt;p&gt;Committed to branch-2.0 and master&lt;/p&gt;</comment>
                            <comment id="15192733" author="yumi" created="Mon, 14 Mar 2016 04:31:32 +0000"  >&lt;p&gt;Can I know how do I apply/install this patch into my Hive in Ubuntu 12.04? Thank you.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12787158" name="HIVE-13032.1.patch" size="389" author="prasanth_j" created="Tue, 9 Feb 2016 22:18:41 +0000"/>
                            <attachment id="12787191" name="HIVE-13032.2.patch" size="857" author="prasanth_j" created="Wed, 10 Feb 2016 01:04:03 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 10 Feb 2016 01:11:19 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            37 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2smyf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>