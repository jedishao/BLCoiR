<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 02 04:49:32 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HIVE-13589/HIVE-13589.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HIVE-13589] beeline support prompt for password with &apos;-p&apos; option</title>
                <link>https://issues.apache.org/jira/browse/HIVE-13589</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Specifying connection string using commandline options in beeline is convenient, as it gets saved in shell command history, and it is easy to retrieve it from there.&lt;br/&gt;
However, specifying the password in command prompt is not secure as it gets displayed on screen and saved in the history.&lt;/p&gt;

&lt;p&gt;It should be possible to specify &apos;-p&apos; without an argument to make beeline prompt for password.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12961507">HIVE-13589</key>
            <summary>beeline support prompt for password with &apos;-p&apos; option</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="vihangk1">Vihang Karajgaonkar</assignee>
                                    <reporter username="thejas">Thejas M Nair</reporter>
                        <labels>
                    </labels>
                <created>Fri, 22 Apr 2016 02:46:10 +0000</created>
                <updated>Tue, 25 Oct 2016 21:31:11 +0000</updated>
                            <resolved>Tue, 25 Oct 2016 03:43:50 +0000</resolved>
                                                    <fixVersion>2.2.0</fixVersion>
                                    <component>Beeline</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="15253231" author="thejas" created="Fri, 22 Apr 2016 02:47:11 +0000"  >&lt;p&gt;A workaround of using a wrapper shell script by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nsabharwal&quot; class=&quot;user-hover&quot; rel=&quot;nsabharwal&quot;&gt;Neeraj Sabharwal&lt;/a&gt; is mentioned here - &lt;a href=&quot;https://community.hortonworks.com/questions/3147/beeline-sample-with-u-f-n-p.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://community.hortonworks.com/questions/3147/beeline-sample-with-u-f-n-p.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15407437" author="jk_self" created="Thu, 4 Aug 2016 08:49:18 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thejas&quot; class=&quot;user-hover&quot; rel=&quot;thejas&quot;&gt;Thejas M Nair&lt;/a&gt;, current patch works with the case specifying &apos;- p&apos; without an argument to make beeline prompt for password.  However it  only support the case with &quot;- p&quot; following by the specified option  which are added in the Beeline.java &lt;span class=&quot;error&quot;&gt;&amp;#91;L290-L391&amp;#93;&lt;/span&gt;. If not, Apache common CLI will consider the option as the value of &quot;- p&quot;.  We can limit user to put the &quot;- p&quot; by the end of command line. Do you have better suggestions?&lt;/p&gt;</comment>
                            <comment id="15430125" author="ferd" created="Mon, 22 Aug 2016 06:34:22 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Jk_Self&quot; class=&quot;user-hover&quot; rel=&quot;Jk_Self&quot;&gt;Ke Jia&lt;/a&gt; for the patch. There is one comment below.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;     try {
+      ConsoleReader reader = getConsoleReader(inputStream);
       if (isBeeLine) {
         int code = initArgs(args);
         if (code != 0) {
@@ -852,7 +853,7 @@ public int begin(String[] args, InputStream inputStream) throws IOException {
       } catch (Exception e) {
         // ignore
       }
-      ConsoleReader reader = getConsoleReader(inputStream);
+
       return execute(reader, false);
     } finally {
         close();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;If you get reader in front, it will fail to get beeline options since it&apos;s parsed after reader getter. &lt;/p&gt;</comment>
                            <comment id="15432205" author="jk_self" created="Tue, 23 Aug 2016 06:10:36 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Ferd&quot; class=&quot;user-hover&quot; rel=&quot;Ferd&quot;&gt;Ferdinand Xu&lt;/a&gt; comment. I fixed it and uploaded the patch.&lt;/p&gt;</comment>
                            <comment id="15432721" author="hiveqa" created="Tue, 23 Aug 2016 12:47:54 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12824995/HIVE-13589.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12824995/HIVE-13589.2.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to build exiting with an error&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/965/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/965/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/965/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/965/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-204-236-174-241.us-west-1.compute.amazonaws.com/logs/PreCommit-HIVE-MASTER-Build-965/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-204-236-174-241.us-west-1.compute.amazonaws.com/logs/PreCommit-HIVE-MASTER-Build-965/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Tests exited with: NonZeroExitCodeException
Command &apos;bash /data/hive-ptest/working/scratch/source-prep.sh&apos; failed with exit status 1 and output &apos;+ [[ -n /usr/java/jdk1.8.0_25 ]]
+ export JAVA_HOME=/usr/java/jdk1.8.0_25
+ JAVA_HOME=/usr/java/jdk1.8.0_25
+ export PATH=/usr/java/jdk1.8.0_25/bin/:/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games
+ PATH=/usr/java/jdk1.8.0_25/bin/:/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games
+ export &apos;ANT_OPTS=-Xmx1g -XX:MaxPermSize=256m &apos;
+ ANT_OPTS=&apos;-Xmx1g -XX:MaxPermSize=256m &apos;
+ export &apos;M2_OPTS=-Xmx1g -XX:MaxPermSize=256m -Dhttp.proxyHost=localhost -Dhttp.proxyPort=3128&apos;
+ M2_OPTS=&apos;-Xmx1g -XX:MaxPermSize=256m -Dhttp.proxyHost=localhost -Dhttp.proxyPort=3128&apos;
+ cd /data/hive-ptest/working/
+ tee /data/hive-ptest/logs/PreCommit-HIVE-MASTER-Build-965/source-prep.txt
+ [[ false == \t\r\u\e ]]
+ mkdir -p maven ivy
+ [[ git = \s\v\n ]]
+ [[ git = \g\i\t ]]
+ [[ -z master ]]
+ [[ -d apache-github-source-source ]]
+ [[ ! -d apache-github-source-source/.git ]]
+ [[ ! -d apache-github-source-source ]]
+ cd apache-github-source-source
+ git fetch origin
+ git reset --hard HEAD
HEAD is now at 4777289 HIVE-14511: Improve MSCK for partitioned table to deal with special cases (Pengcheng Xiong, reviewed by Ashutosh Chauhan)
+ git clean -f -d
+ git checkout master
Already on &apos;master&apos;
Your branch is up-to-date with &apos;origin/master&apos;.
+ git reset --hard origin/master
HEAD is now at 4777289 HIVE-14511: Improve MSCK for partitioned table to deal with special cases (Pengcheng Xiong, reviewed by Ashutosh Chauhan)
+ git merge --ff-only origin/master
Already up-to-date.
+ git gc
+ patchCommandPath=/data/hive-ptest/working/scratch/smart-apply-patch.sh
+ patchFilePath=/data/hive-ptest/working/scratch/build.patch
+ [[ -f /data/hive-ptest/working/scratch/build.patch ]]
+ chmod +x /data/hive-ptest/working/scratch/smart-apply-patch.sh
+ /data/hive-ptest/working/scratch/smart-apply-patch.sh /data/hive-ptest/working/scratch/build.patch
The patch does not appear to apply with p0, p1, or p2
+ exit 1
&apos;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12824995 - PreCommit-HIVE-MASTER-Build&lt;/p&gt;</comment>
                            <comment id="15434086" author="ferd" created="Wed, 24 Aug 2016 02:28:18 +0000"  >&lt;p&gt;LGTM +1 pending to the test&lt;/p&gt;</comment>
                            <comment id="15434159" author="vihangk1" created="Wed, 24 Aug 2016 04:29:50 +0000"  >&lt;p&gt;I think we should not put a limitation that -p should be the last argument. This would be a bad user-experience. If the main reason for this issue is to avoid showing the password in the command history, the ideal behavior should be that user does not provide a password while connecting and beeline should prompt for one when it finds that there is no password provided.&lt;/p&gt;

&lt;p&gt;The issue is due to the code block below. When the password is null, it sets it to empty string due to which beeline does not prompt for the password when it is not provided. I think we should fix this behavior which would provide a way for the user to achieve the same without limiting the usability of the -p argument.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;private String constructCmd(String url, String user, String pass, String driver, boolean stripPasswd) {
    String com = &quot;!connect &quot;
        + url + &quot; &quot;
        + (user == null || user.length() == 0 ? &quot;&apos;&apos;&quot; : user) + &quot; &quot;;
    if (stripPasswd) {
      com += PASSWD_MASK + &quot; &quot;;
    } else {
      com += (pass == null || pass.length() == 0 ? &quot;&apos;&apos;&quot; : pass) + &quot; &quot;;
    }
    com += (driver == null ? &quot;&quot; : driver);
    return com;
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15434196" author="hiveqa" created="Wed, 24 Aug 2016 05:21:40 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12825188/HIVE-13589.3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12825188/HIVE-13589.3.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 9 failed/errored test(s), 10393 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestBeeLineWithArgs - did not produce a TEST-*.xml file
TestHiveCli - did not produce a TEST-*.xml file
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[acid_mapjoin]
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[ctas]
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[vector_join_part_col_char]
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[acid_bucket_pruning]
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver[explainuser_3]
org.apache.hive.service.cli.operation.TestOperationLoggingLayout.testSwitchLogLayout
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/973/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/973/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/973/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/973/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-204-236-174-241.us-west-1.compute.amazonaws.com/logs/PreCommit-HIVE-MASTER-Build-973/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-204-236-174-241.us-west-1.compute.amazonaws.com/logs/PreCommit-HIVE-MASTER-Build-973/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 9 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12825188 - PreCommit-HIVE-MASTER-Build&lt;/p&gt;</comment>
                            <comment id="15434212" author="ferd" created="Wed, 24 Aug 2016 05:43:31 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vihangk1&quot; class=&quot;user-hover&quot; rel=&quot;vihangk1&quot;&gt;Vihang Karajgaonkar&lt;/a&gt; for your input. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Jk_Self&quot; class=&quot;user-hover&quot; rel=&quot;Jk_Self&quot;&gt;Ke Jia&lt;/a&gt;, any thoughts about &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vihangk1&quot; class=&quot;user-hover&quot; rel=&quot;vihangk1&quot;&gt;Vihang Karajgaonkar&lt;/a&gt;&apos;s comments?&lt;/p&gt;</comment>
                            <comment id="15434269" author="jk_self" created="Wed, 24 Aug 2016 06:38:26 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vihangk1&quot; class=&quot;user-hover&quot; rel=&quot;vihangk1&quot;&gt;Vihang Karajgaonkar&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Ferd&quot; class=&quot;user-hover&quot; rel=&quot;Ferd&quot;&gt;Ferdinand Xu&lt;/a&gt;, current patch can prompt for the password when the password is null or empty string. Howerver,if the case with &quot;&lt;del&gt;p&quot; option does not follow the specified option which are added in the Beeline.java &lt;span class=&quot;error&quot;&gt;&amp;#91;L290-L391&amp;#93;&lt;/span&gt;, the Apache Common CLI will consider the option as the value of &quot;-p&quot; argument. For example, &quot;hive --service beeline -u jdbc:hive2://localhost:10000  -n root -p --force=true -e &apos;show tables;&apos;&quot;, because the &quot;&lt;/del&gt;&lt;del&gt;force&quot; option is not added in the Beeline.java, the Apache Common CLI set &quot;&lt;/del&gt;-force=true&quot; to the &quot;-p&quot; option. So when it execute the code which you mentioned above, the password is not null and will not prompt for password. Avoiding the bad user-experience, do you think we need to add all the options in the Beeline.java? &lt;/p&gt;</comment>
                            <comment id="15434292" author="ferd" created="Wed, 24 Aug 2016 06:52:28 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Jk_Self&quot; class=&quot;user-hover&quot; rel=&quot;Jk_Self&quot;&gt;Ke Jia&lt;/a&gt;, we should not move those options to Beeline which will break backwards compatibility. Anyway to make this option required and if user doesn&apos;t enter a password, we pass in an empty value. When comes the empty, we prompt user to enter their password.&lt;/p&gt;</comment>
                            <comment id="15434353" author="ferd" created="Wed, 24 Aug 2016 07:26:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vihangk1&quot; class=&quot;user-hover&quot; rel=&quot;vihangk1&quot;&gt;Vihang Karajgaonkar&lt;/a&gt;, I take a look at the BeeLine code. Now &quot;- p&quot; has been associated with a password. If we make it optional, it will parse the string next to &quot;- p&quot; to see whether it exists a password. In this way, it&apos;s possible to treat &quot;--XXXX&quot; as a password since -XXXX doesn&apos;t exist in Beeline options. One way I can think of is that we could add a new option which has no password. And prompt user to enter the password. Any thoughputs?&lt;/p&gt;</comment>
                            <comment id="15435315" author="vihangk1" created="Wed, 24 Aug 2016 17:14:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Ferd&quot; class=&quot;user-hover&quot; rel=&quot;Ferd&quot;&gt;Ferdinand Xu&lt;/a&gt; I agree that we should not change the behavior of -p argument since it will break backwards compatibility. Adding another option to achieve the same purpose seems to be a overkill. Beeline should be smart enough to prompt for the password if there is no password given at the command line.&lt;/p&gt;

&lt;p&gt;eg:&lt;br/&gt;
1. beeline -u &quot;jdbc:hive2://localhost:10000&quot; -n username&lt;br/&gt;
&amp;gt; beeline should prompt for the password.&lt;/p&gt;

&lt;p&gt;2. beeline -u &quot;jdbc:hive2://localhost:10000&quot; -n username -p &amp;lt;password is expected because -p is provided&amp;gt;&lt;/p&gt;

&lt;p&gt;If we can achieve (1) above within beeline, I think that should be sufficient to solve this issue without any work-arounds mentioned by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thejas&quot; class=&quot;user-hover&quot; rel=&quot;thejas&quot;&gt;Thejas M Nair&lt;/a&gt; in the first comment.&lt;/p&gt;</comment>
                            <comment id="15436153" author="ferd" created="Thu, 25 Aug 2016 02:34:57 +0000"  >&lt;p&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vihangk1&quot; class=&quot;user-hover&quot; rel=&quot;vihangk1&quot;&gt;Vihang Karajgaonkar&lt;/a&gt; Good idea. Let&apos;s make it in this way. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Jk_Self&quot; class=&quot;user-hover&quot; rel=&quot;Jk_Self&quot;&gt;Ke Jia&lt;/a&gt; thank you for your update. LGTM +1&lt;/p&gt;</comment>
                            <comment id="15437227" author="hiveqa" created="Thu, 25 Aug 2016 17:01:46 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12825389/HIVE-13589.4.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12825389/HIVE-13589.4.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 10 failed/errored test(s), 10394 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestBeeLineWithArgs - did not produce a TEST-*.xml file
TestHiveCli - did not produce a TEST-*.xml file
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[acid_mapjoin]
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[ctas]
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[vector_join_part_col_char]
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[acid_bucket_pruning]
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver[explainuser_3]
org.apache.hive.jdbc.TestJdbcWithMiniHS2.testAddJarConstructorUnCaching
org.apache.hive.service.cli.operation.TestOperationLoggingLayout.testSwitchLogLayout
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/988/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/988/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/988/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/988/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-204-236-174-241.us-west-1.compute.amazonaws.com/logs/PreCommit-HIVE-MASTER-Build-988/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-204-236-174-241.us-west-1.compute.amazonaws.com/logs/PreCommit-HIVE-MASTER-Build-988/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 10 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12825389 - PreCommit-HIVE-MASTER-Build&lt;/p&gt;</comment>
                            <comment id="15437261" author="vihangk1" created="Thu, 25 Aug 2016 17:18:48 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Ke+Jia&quot; class=&quot;user-hover&quot; rel=&quot;Ke Jia&quot;&gt;Ke Jia&lt;/a&gt; for the patch. Couple of comments below:&lt;/p&gt;

&lt;p&gt;1. I think there is a method called &lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;public ConsoleReader getConsoleReader(InputStream inputStream) throws IOException
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;in BeeLine.java. I would suggest using this method to initialize the console reader in the begin method before beeline initializes using the args.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;try {
      if (isBeeLine) {
        int code = initArgs(args);
        if (code != 0) {
          return code;
        }
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;2. Will this work if if the password is really an empty string (non-null but empty)?&lt;/p&gt;</comment>
                            <comment id="15438277" author="ferd" created="Fri, 26 Aug 2016 01:41:12 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vihangk1&quot; class=&quot;user-hover&quot; rel=&quot;vihangk1&quot;&gt;Vihang Karajgaonkar&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2. Will this work if if the password is really an empty string (non-null but empty)?
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Now option &quot;- p&quot; required a parameter which means empty string will not be allowed as a password to pass in. The only way to login with an empty string is by prompting. &lt;/p&gt;</comment>
                            <comment id="15438382" author="jk_self" created="Fri, 26 Aug 2016 03:04:46 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vihangk1&quot; class=&quot;user-hover&quot; rel=&quot;vihangk1&quot;&gt;Vihang Karajgaonkar&lt;/a&gt;, I update the patch according to your suggestion. Thank you.&lt;/p&gt;</comment>
                            <comment id="15438579" author="jk_self" created="Fri, 26 Aug 2016 07:10:43 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vihangk1&quot; class=&quot;user-hover&quot; rel=&quot;vihangk1&quot;&gt;Vihang Karajgaonkar&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Ferd&quot; class=&quot;user-hover&quot; rel=&quot;Ferd&quot;&gt;Ferdinand Xu&lt;/a&gt;, I upload the &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-13589&quot; title=&quot;beeline support prompt for password with &amp;#39;-p&amp;#39; option&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-13589&quot;&gt;&lt;del&gt;HIVE-13589&lt;/del&gt;&lt;/a&gt;.6.patch. I test it in beeline and hive cli mode respectively.  And it can work well. Pending to the test.&lt;/p&gt;</comment>
                            <comment id="15440213" author="hiveqa" created="Fri, 26 Aug 2016 23:42:38 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12825617/HIVE-13589.6.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12825617/HIVE-13589.6.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 8 failed/errored test(s), 10396 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestBeeLineWithArgs - did not produce a TEST-*.xml file
TestHiveCli - did not produce a TEST-*.xml file
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[acid_mapjoin]
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[ctas]
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[vector_join_part_col_char]
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[acid_bucket_pruning]
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver[explainuser_3]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/1010/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/1010/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/1010/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/1010/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-204-236-174-241.us-west-1.compute.amazonaws.com/logs/PreCommit-HIVE-MASTER-Build-1010/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-204-236-174-241.us-west-1.compute.amazonaws.com/logs/PreCommit-HIVE-MASTER-Build-1010/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 8 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12825617 - PreCommit-HIVE-MASTER-Build&lt;/p&gt;</comment>
                            <comment id="15451586" author="ferd" created="Wed, 31 Aug 2016 08:31:08 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vihangk1&quot; class=&quot;user-hover&quot; rel=&quot;vihangk1&quot;&gt;Vihang Karajgaonkar&lt;/a&gt; do you have any further comments?&lt;/p&gt;</comment>
                            <comment id="15454183" author="vihangk1" created="Thu, 1 Sep 2016 03:35:36 +0000"  >&lt;p&gt;+1 LGTM. Thanks for the change.&lt;/p&gt;</comment>
                            <comment id="15454443" author="ferd" created="Thu, 1 Sep 2016 06:08:34 +0000"  >&lt;p&gt;Committed to the master. Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Jk_Self&quot; class=&quot;user-hover&quot; rel=&quot;Jk_Self&quot;&gt;Ke Jia&lt;/a&gt; for the patch and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vihangk1&quot; class=&quot;user-hover&quot; rel=&quot;vihangk1&quot;&gt;Vihang Karajgaonkar&lt;/a&gt; for your review.&lt;/p&gt;</comment>
                            <comment id="15457599" author="lefty@hortonworks.com" created="Fri, 2 Sep 2016 05:44:28 +0000"  >&lt;p&gt;Does this need to be documented in the wiki?&lt;/p&gt;</comment>
                            <comment id="15457646" author="ferd" created="Fri, 2 Sep 2016 06:09:05 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=leftylev&quot; class=&quot;user-hover&quot; rel=&quot;leftylev&quot;&gt;Lefty Leverenz&lt;/a&gt;, there&apos;s no new option added in this patch so no need to document. Thanks&#65281;&lt;/p&gt;</comment>
                            <comment id="15457652" author="lefty@hortonworks.com" created="Fri, 2 Sep 2016 06:12:35 +0000"  >&lt;p&gt;That&apos;s good to know, thanks Ferdinand.&lt;/p&gt;</comment>
                            <comment id="15472468" author="ferd" created="Thu, 8 Sep 2016 02:20:43 +0000"  >&lt;p&gt;Revert in 63fdb51 since it breaks TestHiveCLI test and backwards compatibility mentioned in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-14717&quot; title=&quot;Beeline tests failing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-14717&quot;&gt;&lt;del&gt;HIVE-14717&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15478651" author="vihangk1" created="Fri, 9 Sep 2016 23:25:53 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Ke+Jia&quot; class=&quot;user-hover&quot; rel=&quot;Ke Jia&quot;&gt;Ke Jia&lt;/a&gt; I think I have some ideas to work around the issue which we discussed in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-14717&quot; title=&quot;Beeline tests failing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-14717&quot;&gt;&lt;del&gt;HIVE-14717&lt;/del&gt;&lt;/a&gt;. Since I have already spend some time on this issue and I think I have a patch which is almost ready, is it okay if I work on this JIRA? Please let me know. Thanks!&lt;/p&gt;</comment>
                            <comment id="15482879" author="jk_self" created="Mon, 12 Sep 2016 02:57:36 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vihangk1&quot; class=&quot;user-hover&quot; rel=&quot;vihangk1&quot;&gt;Vihang Karajgaonkar&lt;/a&gt;, Thanks for your comments.  About this issue,&#160;I have some ideas and now am working on the patch. May I continue my work for this JIRA? The main idea is that we can add the &quot;-- force&quot; or some other &quot;--&quot; options in Beeline.java, which are defined in &lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/HiveServer2+Clients#HiveServer2Clients-BeelineCommands&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://cwiki.apache.org/confluence/display/Hive/HiveServer2+Clients#HiveServer2Clients-BeelineCommands&lt;/a&gt;. You can share your thoughts once my patch is ready.&#160;Thanks again for your reviews and inputs.&lt;/p&gt;</comment>
                            <comment id="15483820" author="jk_self" created="Mon, 12 Sep 2016 11:11:03 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vihangk1&quot; class=&quot;user-hover&quot; rel=&quot;vihangk1&quot;&gt;Vihang Karajgaonkar&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Ferd&quot; class=&quot;user-hover&quot; rel=&quot;Ferd&quot;&gt;Ferdinand Xu&lt;/a&gt;, I uploaded the latest patch. Please help me review it. Thanks&lt;/p&gt;</comment>
                            <comment id="15484590" author="vihangk1" created="Mon, 12 Sep 2016 16:43:37 +0000"  >&lt;p&gt;I think taking care of options at multiple places in Beeline (using CommandLine and BeelineOpts) should be changed in the future because it causes confusion and more likely to introduce bugs. I guess we should just have one way to handle the options in the future.&lt;/p&gt;

&lt;p&gt;For this change, though I think you don&apos;t need to add the beeline options in Options in Beeline.java. All you need is to track whether -p is given or not. This can be done easily in the processOption method of the BeeLineParser. That way you don&apos;t need to add multiple Options in BeeLine.java. This approach is also less prone to errors since with your approach every time there is a new beelineOpts added, developer will have to add it in Options too which is not used in the end.&lt;/p&gt;

&lt;p&gt;So my suggestion would be to make password an optional argument option using setOptionalArg method in Option class. And then track a boolean in the processOption method to see if -p was found in the arguments or not. Now with both these flags you have all the information you need to make password optional without adding all the other BeelineOpts in the Options (Beeline)&lt;/p&gt;</comment>
                            <comment id="15485140" author="vihangk1" created="Mon, 12 Sep 2016 20:08:27 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Ke+Jia&quot; class=&quot;user-hover&quot; rel=&quot;Ke Jia&quot;&gt;Ke Jia&lt;/a&gt; you can definitely continue working on this patch if you want. I have published my patch privately on &lt;a href=&quot;https://reviews.apache.org/r/51821&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/51821&lt;/a&gt; which you can use as a reference if you want. It has a alternative implementation for this issue along with the test cases. Thanks a lot!&lt;/p&gt;</comment>
                            <comment id="15489293" author="jk_self" created="Wed, 14 Sep 2016 03:44:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vihangk1&quot; class=&quot;user-hover&quot; rel=&quot;vihangk1&quot;&gt;Vihang Karajgaonkar&lt;/a&gt;, Thanks for your comments and suggestion. I updated the patch and uploaded it. Please help me review, Thanks.&lt;/p&gt;</comment>
                            <comment id="15489439" author="ferd" created="Wed, 14 Sep 2016 05:10:31 +0000"  >&lt;p&gt;Trigger the Jenkins job&lt;/p&gt;</comment>
                            <comment id="15489445" author="ferd" created="Wed, 14 Sep 2016 05:12:08 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Jk_Self&quot; class=&quot;user-hover&quot; rel=&quot;Jk_Self&quot;&gt;Ke Jia&lt;/a&gt;, thank you for your updates. Can you please create a review board for your patch?&lt;/p&gt;</comment>
                            <comment id="15489602" author="hiveqa" created="Wed, 14 Sep 2016 06:39:58 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12828379/HIVE-13589.8.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12828379/HIVE-13589.8.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 11 failed/errored test(s), 10507 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestBeeLineWithArgs - did not produce a TEST-*.xml file
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[acid_mapjoin]
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[stats0]
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[vector_join_part_col_char]
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[acid_bucket_pruning]
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver[explainuser_3]
org.apache.hive.beeline.TestBeelinePasswordOption.testPromptPasswordOptionLast
org.apache.hive.beeline.TestBeelinePasswordOption.testPromptPasswordOptionMiddle
org.apache.hive.beeline.TestBeelinePasswordOption.testPromptPasswordOptionStart
org.apache.hive.hcatalog.hbase.TestPigHBaseStorageHandler.org.apache.hive.hcatalog.hbase.TestPigHBaseStorageHandler
org.apache.hive.jdbc.TestJdbcWithMiniHS2.testAddJarConstructorUnCaching
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/1180/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/1180/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/1180/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/1180/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-204-236-174-241.us-west-1.compute.amazonaws.com/logs/PreCommit-HIVE-MASTER-Build-1180/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-204-236-174-241.us-west-1.compute.amazonaws.com/logs/PreCommit-HIVE-MASTER-Build-1180/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 11 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12828379 - PreCommit-HIVE-MASTER-Build&lt;/p&gt;</comment>
                            <comment id="15491003" author="vihangk1" created="Wed, 14 Sep 2016 17:33:46 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Ke+Jia&quot; class=&quot;user-hover&quot; rel=&quot;Ke Jia&quot;&gt;Ke Jia&lt;/a&gt; You will have to modify the constructCmd too like seen in my review. I think that is the reason why TestBeeLineWithArgs  test is failing with your latest patch. The connect(String cmd) method in Commands.java will not work with space separated arguments when the password is null. That is reason why we need to change to implementation of constructCmd method to use &apos;;&apos; separated url.&lt;/p&gt;

&lt;p&gt;It seems that most of the changes and test cases in the latest patch are same as changes from my review. Since that patch is already complete with test cases and we already have a review for it, why not just use that patch instead of reinventing the wheel. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Ke+Jia&quot; class=&quot;user-hover&quot; rel=&quot;Ke Jia&quot;&gt;Ke Jia&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Ferd&quot; class=&quot;user-hover&quot; rel=&quot;Ferd&quot;&gt;Ferdinand Xu&lt;/a&gt; you can review the patch and I can incorporate any suggestions which you may have. Please let me know if that is okay.&lt;/p&gt;</comment>
                            <comment id="15508988" author="jk_self" created="Wed, 21 Sep 2016 07:00:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vihangk1&quot; class=&quot;user-hover&quot; rel=&quot;vihangk1&quot;&gt;Vihang Karajgaonkar&lt;/a&gt;, is it ok if you work on this JIRA? &lt;/p&gt;</comment>
                            <comment id="15510505" author="vihangk1" created="Wed, 21 Sep 2016 16:54:54 +0000"  >&lt;p&gt;@Ke Jia .. I will take it up. Thanks for your consideration.&lt;/p&gt;</comment>
                            <comment id="15543768" author="vihangk1" created="Mon, 3 Oct 2016 23:37:57 +0000"  >&lt;p&gt;Attaching the updated patch which makes password with optional argument like discussed. Adding the review url too&lt;/p&gt;</comment>
                            <comment id="15543771" author="vihangk1" created="Mon, 3 Oct 2016 23:38:31 +0000"  >&lt;p&gt;Adding rb url&lt;/p&gt;</comment>
                            <comment id="15553068" author="vihangk1" created="Thu, 6 Oct 2016 20:18:11 +0000"  >&lt;p&gt;Hey &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Ferd&quot; class=&quot;user-hover&quot; rel=&quot;Ferd&quot;&gt;Ferdinand Xu&lt;/a&gt; .. Can you please review? I incorporated your review comments which you had given earlier in my patch shared with you and Ke Jia. Thanks!&lt;/p&gt;</comment>
                            <comment id="15560992" author="ferd" created="Mon, 10 Oct 2016 01:37:21 +0000"  >&lt;p&gt;I left some comments on review board. Also please attach your patch to trigger the precommit. Thanks!&lt;/p&gt;</comment>
                            <comment id="15562804" author="vihangk1" created="Mon, 10 Oct 2016 16:56:35 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Ferd&quot; class=&quot;user-hover&quot; rel=&quot;Ferd&quot;&gt;Ferdinand Xu&lt;/a&gt; for the review. I had attached patch (&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-13589&quot; title=&quot;beeline support prompt for password with &amp;#39;-p&amp;#39; option&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-13589&quot;&gt;&lt;del&gt;HIVE-13589&lt;/del&gt;&lt;/a&gt;.9.patch) but for some reason the pre-commit didn&apos;t trigger. I will incorporate your suggestions and attach it again. Thanks!&lt;/p&gt;</comment>
                            <comment id="15592525" author="vihangk1" created="Thu, 20 Oct 2016 18:05:09 +0000"  >&lt;p&gt;Attaching the patch which addresses review comments. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Ferd&quot; class=&quot;user-hover&quot; rel=&quot;Ferd&quot;&gt;Ferdinand Xu&lt;/a&gt; Can you please take a look? Sorry was not able to work on this patch for long time but it is ready for review again. I have updated it on the review board too. Thanks a lot!&lt;/p&gt;</comment>
                            <comment id="15592840" author="hiveqa" created="Thu, 20 Oct 2016 20:06:28 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12834474/HIVE-13589.10.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12834474/HIVE-13589.10.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 5 failed/errored test(s), 10574 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[orc_ppd_basic] (batchId=132)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[current_date_timestamp] (batchId=144)
org.apache.hive.beeline.TestBeelineArgParsing.testAddLocalJarWithoutAddDriverClazz[0] (batchId=164)
org.apache.hive.beeline.TestBeelineArgParsing.testAddLocalJar[0] (batchId=164)
org.apache.hive.beeline.TestBeelineArgParsing.testAddLocalJar[1] (batchId=164)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/1701/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/1701/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/1701/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/1701/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-1701/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-1701/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 5 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12834474 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15593629" author="ferd" created="Fri, 21 Oct 2016 01:31:52 +0000"  >&lt;p&gt;Thank you for the update. Leave a few more comments on RB. &lt;/p&gt;</comment>
                            <comment id="15595784" author="vihangk1" created="Fri, 21 Oct 2016 17:32:45 +0000"  >&lt;p&gt;Attaching the updated patch with review comments addressed. Thanks for the review &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Ferd&quot; class=&quot;user-hover&quot; rel=&quot;Ferd&quot;&gt;Ferdinand Xu&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15597914" author="ferd" created="Sat, 22 Oct 2016 14:07:52 +0000"  >&lt;p&gt;LGTM +1 pending to the test&lt;/p&gt;</comment>
                            <comment id="15602716" author="vihangk1" created="Mon, 24 Oct 2016 17:56:33 +0000"  >&lt;p&gt;For some reason HiveQA job is not picking up the patch since last two days. Will re-attach it to see if it helps.&lt;/p&gt;</comment>
                            <comment id="15603599" author="hiveqa" created="Mon, 24 Oct 2016 23:41:28 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12834984/HIVE-13589.12.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12834984/HIVE-13589.12.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 4 failed/errored test(s), 10602 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.thrift.TestHadoopAuthBridge23.testDelegationTokenSharedStore (batchId=216)
org.apache.hive.beeline.TestBeelineArgParsing.testAddLocalJarWithoutAddDriverClazz[0] (batchId=164)
org.apache.hive.beeline.TestBeelineArgParsing.testAddLocalJar[0] (batchId=164)
org.apache.hive.beeline.TestBeelineArgParsing.testAddLocalJar[1] (batchId=164)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/1771/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/1771/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/1771/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/1771/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-1771/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-1771/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 4 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12834984 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15604070" author="ferd" created="Tue, 25 Oct 2016 03:43:51 +0000"  >&lt;p&gt;Failed cases are not related. Committed to the master. Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vihangk1&quot; class=&quot;user-hover&quot; rel=&quot;vihangk1&quot;&gt;Vihang Karajgaonkar&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Jk_Self&quot; class=&quot;user-hover&quot; rel=&quot;Jk_Self&quot;&gt;Ke Jia&lt;/a&gt; for the contributions and reviews.&lt;/p&gt;</comment>
                            <comment id="15604339" author="lefty@hortonworks.com" created="Tue, 25 Oct 2016 06:14:20 +0000"  >&lt;p&gt;Should the description of the -p option be updated in the wiki to say that it can be specified without an argument in 2.2.0 and later versions?&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/HiveServer2+Clients#HiveServer2Clients-BeelineCommandOptions&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;HiveServer2 Clients &amp;#8211; Beeline Command Options &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15604375" author="ferd" created="Tue, 25 Oct 2016 06:27:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=leftylev&quot; class=&quot;user-hover&quot; rel=&quot;leftylev&quot;&gt;Lefty Leverenz&lt;/a&gt;, I think so. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vihangk1&quot; class=&quot;user-hover&quot; rel=&quot;vihangk1&quot;&gt;Vihang Karajgaonkar&lt;/a&gt;, can you update the WIKI? Thank you.&lt;/p&gt;</comment>
                            <comment id="15606542" author="vihangk1" created="Tue, 25 Oct 2016 21:31:11 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=leftylev&quot; class=&quot;user-hover&quot; rel=&quot;leftylev&quot;&gt;Lefty Leverenz&lt;/a&gt; for the reminder. I have updated the wiki. Can you please check and suggest any edits if needed? Thanks.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13003337">HIVE-14717</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12718401">HIVE-7175</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12821739" name="HIVE-13589.1.patch" size="1786" author="Jk_Self" created="Wed, 3 Aug 2016 01:49:10 +0000"/>
                            <attachment id="12834474" name="HIVE-13589.10.patch" size="26860" author="vihangk1" created="Thu, 20 Oct 2016 18:05:09 +0000"/>
                            <attachment id="12834717" name="HIVE-13589.11.patch" size="26860" author="vihangk1" created="Fri, 21 Oct 2016 17:32:45 +0000"/>
                            <attachment id="12834984" name="HIVE-13589.12.patch" size="26860" author="vihangk1" created="Mon, 24 Oct 2016 17:56:33 +0000"/>
                            <attachment id="12824995" name="HIVE-13589.2.patch" size="1588" author="Jk_Self" created="Tue, 23 Aug 2016 06:08:21 +0000"/>
                            <attachment id="12825188" name="HIVE-13589.3.patch" size="1555" author="Jk_Self" created="Wed, 24 Aug 2016 03:28:28 +0000"/>
                            <attachment id="12825389" name="HIVE-13589.4.patch" size="1314" author="Jk_Self" created="Thu, 25 Aug 2016 01:54:55 +0000"/>
                            <attachment id="12825593" name="HIVE-13589.5.patch" size="1583" author="Jk_Self" created="Fri, 26 Aug 2016 03:02:00 +0000"/>
                            <attachment id="12825617" name="HIVE-13589.6.patch" size="2308" author="Jk_Self" created="Fri, 26 Aug 2016 06:52:57 +0000"/>
                            <attachment id="12828023" name="HIVE-13589.7.patch" size="11103" author="Jk_Self" created="Mon, 12 Sep 2016 11:09:07 +0000"/>
                            <attachment id="12828379" name="HIVE-13589.8.patch" size="16493" author="Jk_Self" created="Wed, 14 Sep 2016 03:41:20 +0000"/>
                            <attachment id="12831430" name="HIVE-13589.9.patch" size="30335" author="vihangk1" created="Mon, 3 Oct 2016 23:37:57 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>12.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 4 Aug 2016 08:49:18 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2wkf3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>