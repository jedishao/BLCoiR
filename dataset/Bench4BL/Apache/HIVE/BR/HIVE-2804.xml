<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sat Dec 03 00:11:53 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HIVE-2804/HIVE-2804.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HIVE-2804] Task log retrieval fails on Hadoop 0.23</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2804</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="12542461">HIVE-2804</key>
            <summary>Task log retrieval fails on Hadoop 0.23</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zhenxiao">Zhenxiao Luo</assignee>
                                    <reporter username="cwsteinbach">Carl Steinbach</reporter>
                        <labels>
                    </labels>
                <created>Mon, 13 Feb 2012 23:44:27 +0000</created>
                <updated>Thu, 2 May 2013 02:30:53 +0000</updated>
                            <resolved>Tue, 14 Aug 2012 22:22:19 +0000</resolved>
                                                    <fixVersion>0.10.0</fixVersion>
                                    <component>Diagnosability</component>
                    <component>Query Processor</component>
                    <component>Security</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>11</watches>
                                                                <comments>
                            <comment id="13207354" author="cwsteinbach" created="Mon, 13 Feb 2012 23:45:53 +0000"  >&lt;p&gt;On a secure Hadoop cluster TaskLogProcessor.getErrors() fails:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Ended Job = job_201202112025_0356 with errors
Error during job, obtaining debugging information...
Examining task ID: task_201202112025_0356_m_000003 (and more) from job job_201202112025_0356
Exception in thread &quot;Thread-22&quot; java.lang.RuntimeException: Error while reading from task log url
	at org.apache.hadoop.hive.ql.exec.errors.TaskLogProcessor.getErrors(TaskLogProcessor.java:130)
	at org.apache.hadoop.hive.ql.exec.JobDebugger.showJobFailDebugInfo(JobDebugger.java:211)
	at org.apache.hadoop.hive.ql.exec.JobDebugger.run(JobDebugger.java:81)
	at java.lang.Thread.run(Thread.java:662)
Caused by: java.io.IOException: Server returned HTTP response code: 400 for URL: http://c0509.hal.cloudera.com:50060/tasklog?taskid=attempt_201202112025_0356_r_000000_1&amp;amp;start=-8193
	at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1436)
	at java.net.URL.openStream(URL.java:1010)
	at org.apache.hadoop.hive.ql.exec.errors.TaskLogProcessor.getErrors(TaskLogProcessor.java:120)
	... 3 more
FAILED: Execution Error, return code 2 from org.apache.hadoop.hive.ql.exec.MapRedTask
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13257616" author="zhenxiao" created="Thu, 19 Apr 2012 17:27:14 +0000"  >&lt;p&gt;Also relates to the following:&lt;br/&gt;
&lt;a href=&quot;http://search-hadoop.com/m/LR0vP1Y5227&amp;amp;subj=Hive+Hadoop+Log+Retrieval+Problem&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://search-hadoop.com/m/LR0vP1Y5227&amp;amp;subj=Hive+Hadoop+Log+Retrieval+Problem&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13257964" author="appodictic" created="Fri, 20 Apr 2012 01:18:09 +0000"  >&lt;p&gt;It seems like you will have to make a shim or variable that can be used to generate a version dependent URL.&lt;/p&gt;</comment>
                            <comment id="13263272" author="zhenxiao" created="Fri, 27 Apr 2012 00:26:31 +0000"  >&lt;p&gt;By creating an ThrowNullPointer UDF, and running it in MiniMRCluster, could reproduce a MapReduce job failing.&lt;/p&gt;

&lt;p&gt;When running on apache trunk(which is using MR1), get the following error message:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Begin query: throw_npe.q&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Error during job, obtaining debugging information...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Examining task ID: task_20120426165633901_0001_m_000002 (and more) from job job_20120426165633901_0001&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Task with the most failures(4): &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; -----&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Task ID:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; task_20120426165633901_0001_m_000000&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; URL:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://localhost:50030/taskdetails.jsp?jobid=job_20120426165633901_0001&amp;amp;tipid=task_20120426165633901_0001_m_000000&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://localhost:50030/taskdetails.jsp?jobid=job_20120426165633901_0001&amp;amp;tipid=task_20120426165633901_0001_m_000000&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; -----&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Exception: Client Execution failed with error code = 9&lt;/p&gt;

&lt;p&gt;And in the output file:&lt;/p&gt;

&lt;p&gt;PREHOOK: Output: hdfs://rotor:35306/home/cloudera/Code/hive/build/ql/scratchdir/hive_2012-04-26_16-57-11_129_4964809859660696177/-mr-10000&lt;br/&gt;
Ended Job = job_20120426165633901_0001 with errors&lt;br/&gt;
FAILED: Execution Error, return code 2 from org.apache.hadoop.hive.ql.exec.MapRedTask&lt;/p&gt;

&lt;p&gt;So, on apache trunk, TaskLog retrieval is working OK.&lt;/p&gt;

&lt;p&gt;Since our CDH4 branch could not run MiniMRCluster yet, will try on an MR2 cluster, and also try to run a local cluster in pseudo-distributed mode.&lt;/p&gt;</comment>
                            <comment id="13266239" author="zhenxiao" created="Tue, 1 May 2012 23:18:24 +0000"  >&lt;p&gt;When running in CDH4 branch(which is using MR2 cluster), in a real non-secure cluster, always getting the following exception:&lt;/p&gt;


&lt;p&gt;Exception in thread &quot;Thread-31&quot; java.lang.RuntimeException: Error while reading from task log url&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.errors.TaskLogProcessor.getErrors(TaskLogProcessor.java:130)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.JobDebugger.showJobFailDebugInfo(JobDebugger.java:222)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.JobDebugger.run(JobDebugger.java:82)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:636)&lt;br/&gt;
Caused by: java.io.IOException: Server returned HTTP response code: 400 for URL: &lt;a href=&quot;http://c0409.hal.cloudera.com:8080/tasklog?attemptid=attempt_1335202931724_0600_m_000000_0&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://c0409.hal.cloudera.com:8080/tasklog?attemptid=attempt_1335202931724_0600_m_000000_0&lt;/a&gt;&lt;br/&gt;
	at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1403)&lt;br/&gt;
	at java.net.URL.openStream(URL.java:1029)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.errors.TaskLogProcessor.getErrors(TaskLogProcessor.java:120)&lt;br/&gt;
	... 3 more&lt;br/&gt;
FAILED: Execution Error, return code 2 from org.apache.hadoop.hive.ql.exec.MapRedTask&lt;br/&gt;
MapReduce Jobs Launched: &lt;br/&gt;
Job 0: Map: 2   HDFS Read: 0 HDFS Write: 0 FAIL&lt;br/&gt;
Total MapReduce CPU Time Spent: 0 msec&lt;/p&gt;

&lt;p&gt;After working a patch, using HostUtil.getTaskLogUrl() to retrieve the log, the same exception still happens.&lt;/p&gt;

&lt;p&gt;Found out that, for this intentionally failed testcase, no log generated at all.&lt;/p&gt;</comment>
                            <comment id="13266267" author="zhenxiao" created="Wed, 2 May 2012 00:33:29 +0000"  >&lt;p&gt;The bug could be reproduced in a non-secure MR2 cluster. In non-secure MR1 cluster, everything works OK.&lt;br/&gt;
It is not related to secure-cluster at all. &lt;br/&gt;
The reason is for a Null Pointer Exception Killed MapReduce Job in MR2 cluster, no log generated for the MapReduce job.&lt;br/&gt;
Filed &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-4218&quot; title=&quot;Killed MapReduce Job does not generate log in MR2 cluster&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-4218&quot;&gt;MAPREDUCE-4218&lt;/a&gt; to track the problem.&lt;/p&gt;</comment>
                            <comment id="13268728" author="zhenxiao" created="Fri, 4 May 2012 21:40:14 +0000"  >&lt;p&gt;On Hive Side, when using MR1, Hive is generating the TaskLog URL manually, since no available MapReduce api yet.&lt;/p&gt;

&lt;p&gt;when using MR2, Hive could be using the existing MapReduce api to generate TaskLog URLs.&lt;/p&gt;

&lt;p&gt;Shims should be created to fix the Hive side problem.&lt;/p&gt;</comment>
                            <comment id="13268729" author="zhenxiao" created="Fri, 4 May 2012 21:42:05 +0000"  >&lt;p&gt;@Edward: Yes. Shims are to created to fix the bug. I will submit a patch soon.&lt;/p&gt;</comment>
                            <comment id="13268784" author="phabricator@reviews.facebook.net" created="Fri, 4 May 2012 22:55:47 +0000"  >&lt;p&gt;zhenxiao requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2804&quot; title=&quot;Task log retrieval fails on Hadoop 0.23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2804&quot;&gt;&lt;del&gt;HIVE-2804&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Task log retrieval fails on secure cluster&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2804&quot; title=&quot;Task log retrieval fails on Hadoop 0.23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2804&quot;&gt;&lt;del&gt;HIVE-2804&lt;/del&gt;&lt;/a&gt; Task log retrieval fails on secure cluster&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D3057&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D3057&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  build-common.xml&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/FunctionRegistry.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/HadoopJobExecHelper.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/JobDebugger.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFNPE.java&lt;br/&gt;
  ql/src/test/queries/clientnegative/cluster_npe_tasklog.q&lt;br/&gt;
  ql/src/test/results/clientnegative/cluster_npe_tasklog.q.out&lt;br/&gt;
  shims/src/0.20/java/org/apache/hadoop/hive/shims/Hadoop20Shims.java&lt;br/&gt;
  shims/src/0.20S/java/org/apache/hadoop/hive/shims/Hadoop20SShims.java&lt;br/&gt;
  shims/src/0.23/java/org/apache/hadoop/hive/shims/Hadoop23Shims.java&lt;br/&gt;
  shims/src/common/java/org/apache/hadoop/hive/shims/HadoopShims.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/6927/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/6927/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13269133" author="phabricator@reviews.facebook.net" created="Sun, 6 May 2012 05:53:55 +0000"  >&lt;p&gt;njain has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2804&quot; title=&quot;Task log retrieval fails on Hadoop 0.23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2804&quot;&gt;&lt;del&gt;HIVE-2804&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Task log retrieval fails on secure cluster&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFNPE.java:1 Can this file be added in ql/src/test instead ?&lt;/p&gt;

&lt;p&gt;  You can add the relevant function in the test.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D3057&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D3057&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13269294" author="cwsteinbach" created="Sun, 6 May 2012 21:50:29 +0000"  >&lt;p&gt;@Zhenxiao: please address the review comments and then resubmit. Thanks!&lt;/p&gt;</comment>
                            <comment id="13269295" author="phabricator@reviews.facebook.net" created="Sun, 6 May 2012 21:50:45 +0000"  >&lt;p&gt;cwsteinbach has requested changes to the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2804&quot; title=&quot;Task log retrieval fails on Hadoop 0.23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2804&quot;&gt;&lt;del&gt;HIVE-2804&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Task log retrieval fails on secure cluster&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/FunctionRegistry.java:255 This doesn&apos;t belong here. The UDF is for testing purposes only. Users should not see it listed in the output of &apos;SHOW FUNCTIONS&apos;.&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFNPE.java:1 @Namit: Good point.&lt;/p&gt;

&lt;p&gt;  @Zhenxiao: Please put this in ql/src/test/org/apache/hadoop/hive/ql/udf/generic, and then take a look at ql/src/test/queries/clientpositive/create_genericudf.q for an example of how to register a temporary UDF.&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFNPE.java:37 Might be good to change the name to &quot;evaluate_npe&quot; (and update the other comments accordingly) just to make it clear that the NPE is thrown in evaluate() as opposed to initialize().&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFNPE.java:49 I&apos;m curious if this if() block is really necessary. Does the Java compiler complain without it?&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFNPE.java:42 Is it possible to write a GenericUDF that takes no input parameters (e.g. like UDFPI)? If so then I think we should do that here since we ignore the input anyway. If that isn&apos;t possible, then please change this to take a string as input since that will work better with the src table.&lt;br/&gt;
  ql/src/test/queries/clientnegative/cluster_npe_tasklog.q:3 Referencing src_thrift may give people the impression that this test is somehow related to Thrift. Let&apos;s use the src table instead.&lt;br/&gt;
  ql/src/test/queries/clientnegative/cluster_npe_tasklog.q:1 Please change the name to &quot;cluster_tasklog_retrieval.q&quot;.&lt;br/&gt;
  shims/src/0.20/java/org/apache/hadoop/hive/shims/Hadoop20Shims.java:529 Can we call TaskLogServlet.getTaskLogUrl() here instead of manually constructing the URL? If the answer is no then please add a comment explaining why. Thanks.&lt;br/&gt;
  shims/src/0.20S/java/org/apache/hadoop/hive/shims/Hadoop20SShims.java:33 Same question as above.&lt;br/&gt;
  shims/src/0.23/java/org/apache/hadoop/hive/shims/Hadoop23Shims.java:38 Please use the getHost() and getPort() methods that are provided by java.net.URL.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D3057&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D3057&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2804&quot; title=&quot;Task log retrieval fails on Hadoop 0.23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2804&quot;&gt;&lt;del&gt;HIVE-2804&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13269356" author="phabricator@reviews.facebook.net" created="Mon, 7 May 2012 04:20:00 +0000"  >&lt;p&gt;zhenxiao updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2804&quot; title=&quot;Task log retrieval fails on Hadoop 0.23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2804&quot;&gt;&lt;del&gt;HIVE-2804&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Task log retrieval fails on secure cluster&quot;.&lt;br/&gt;
Reviewers: JIRA, cwsteinbach&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2804&quot; title=&quot;Task log retrieval fails on Hadoop 0.23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2804&quot;&gt;&lt;del&gt;HIVE-2804&lt;/del&gt;&lt;/a&gt;   Task log retrieval fails on secure cluster&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D3057&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D3057&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  build-common.xml&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/HadoopJobExecHelper.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/JobDebugger.java&lt;br/&gt;
  ql/src/test/org/apache/hadoop/hive/ql/udf/generic/GenericUDFEvaluateNPE.java&lt;br/&gt;
  ql/src/test/queries/clientnegative/cluster_tasklog_retrieval.q&lt;br/&gt;
  ql/src/test/results/clientnegative/cluster_tasklog_retrieval.q.out&lt;br/&gt;
  shims/src/0.20/java/org/apache/hadoop/hive/shims/Hadoop20Shims.java&lt;br/&gt;
  shims/src/0.20S/java/org/apache/hadoop/hive/shims/Hadoop20SShims.java&lt;br/&gt;
  shims/src/0.23/java/org/apache/hadoop/hive/shims/Hadoop23Shims.java&lt;br/&gt;
  shims/src/common/java/org/apache/hadoop/hive/shims/HadoopShims.java&lt;/p&gt;</comment>
                            <comment id="13269358" author="phabricator@reviews.facebook.net" created="Mon, 7 May 2012 04:23:52 +0000"  >&lt;p&gt;zhenxiao has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2804&quot; title=&quot;Task log retrieval fails on Hadoop 0.23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2804&quot;&gt;&lt;del&gt;HIVE-2804&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Task log retrieval fails on secure cluster&quot;.&lt;/p&gt;

&lt;p&gt;  @Carl and Namit: Thanks a lot. My updated patch is attached.&lt;/p&gt;

&lt;p&gt;  1. The without the &quot;if (true)&quot; statement, compiler is complaining return is an unreachable command, and fails the compilation. I keeps this &quot;if(true)&quot;.&lt;/p&gt;

&lt;p&gt;  2. GenericUDFEvaluateNPE is taking a string as parameter.&lt;/p&gt;

&lt;p&gt;  3. TaskLogServlet is not available as Hadoop library, HostUtil is the corresponding one. While, HostUtil.java is not available until Hadoop0.23, so in Hadoop0.20, still needs to manually construct the URL. I left comments there.&lt;/p&gt;

&lt;p&gt;  Your comments and suggestions are appreciated.&lt;/p&gt;

&lt;p&gt;  Thanks,&lt;br/&gt;
  Zhenxiao&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D3057&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D3057&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13269382" author="phabricator@reviews.facebook.net" created="Mon, 7 May 2012 05:45:55 +0000"  >&lt;p&gt;cwsteinbach has requested changes to the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2804&quot; title=&quot;Task log retrieval fails on Hadoop 0.23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2804&quot;&gt;&lt;del&gt;HIVE-2804&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Task log retrieval fails on secure cluster&quot;.&lt;/p&gt;

&lt;p&gt;  Looks good overall. Please make the changes I requested and I will test and commit. Thanks.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  shims/src/0.23/java/org/apache/hadoop/hive/shims/Hadoop23Shims.java:46 If this exception is thrown and we ignore it, then the next line is going to throw an NPE since taskTrackerHttpURL will be null. We should make the caller handle this exception instead of squelching it.&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/JobDebugger.java:108 Modify this to also throw MalformedUrlException.&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/JobDebugger.java:103 Modify this to catch Exception instead of IOException. We should also dump the exception stack trace at this point, but that involves modify LogHelper. We&apos;ll save that for another ticket.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D3057&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D3057&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2804&quot; title=&quot;Task log retrieval fails on Hadoop 0.23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2804&quot;&gt;&lt;del&gt;HIVE-2804&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13269867" author="phabricator@reviews.facebook.net" created="Mon, 7 May 2012 18:42:47 +0000"  >&lt;p&gt;zhenxiao updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2804&quot; title=&quot;Task log retrieval fails on Hadoop 0.23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2804&quot;&gt;&lt;del&gt;HIVE-2804&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Task log retrieval fails on secure cluster&quot;.&lt;br/&gt;
Reviewers: JIRA, cwsteinbach&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2804&quot; title=&quot;Task log retrieval fails on Hadoop 0.23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2804&quot;&gt;&lt;del&gt;HIVE-2804&lt;/del&gt;&lt;/a&gt;   Handling MalformedUrlException in the caller&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D3057&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D3057&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  build-common.xml&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/HadoopJobExecHelper.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/JobDebugger.java&lt;br/&gt;
  ql/src/test/org/apache/hadoop/hive/ql/udf/generic/GenericUDFEvaluateNPE.java&lt;br/&gt;
  ql/src/test/queries/clientnegative/cluster_tasklog_retrieval.q&lt;br/&gt;
  ql/src/test/results/clientnegative/cluster_tasklog_retrieval.q.out&lt;br/&gt;
  shims/src/0.20/java/org/apache/hadoop/hive/shims/Hadoop20Shims.java&lt;br/&gt;
  shims/src/0.20S/java/org/apache/hadoop/hive/shims/Hadoop20SShims.java&lt;br/&gt;
  shims/src/0.23/java/org/apache/hadoop/hive/shims/Hadoop23Shims.java&lt;br/&gt;
  shims/src/common/java/org/apache/hadoop/hive/shims/HadoopShims.java&lt;/p&gt;</comment>
                            <comment id="13275093" author="phabricator@reviews.facebook.net" created="Tue, 15 May 2012 00:40:30 +0000"  >&lt;p&gt;zhenxiao requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2804&quot; title=&quot;Task log retrieval fails on Hadoop 0.23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2804&quot;&gt;&lt;del&gt;HIVE-2804&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Task log retrieval fails on Hadoop 0.23&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2804&quot; title=&quot;Task log retrieval fails on Hadoop 0.23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2804&quot;&gt;&lt;del&gt;HIVE-2804&lt;/del&gt;&lt;/a&gt; Task log retrieval fails on Hadoop 0.23&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D3219&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D3219&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  build-common.xml&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/HadoopJobExecHelper.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/JobDebugger.java&lt;br/&gt;
  ql/src/test/org/apache/hadoop/hive/ql/udf/generic/GenericUDFEvaluateNPE.java&lt;br/&gt;
  ql/src/test/queries/clientnegative/cluster_tasklog_retrieval.q&lt;br/&gt;
  ql/src/test/results/clientnegative/cluster_tasklog_retrieval.q.out&lt;br/&gt;
  shims/src/0.20/java/org/apache/hadoop/hive/shims/Hadoop20Shims.java&lt;br/&gt;
  shims/src/0.20S/java/org/apache/hadoop/hive/shims/Hadoop20SShims.java&lt;br/&gt;
  shims/src/0.23/java/org/apache/hadoop/hive/shims/Hadoop23Shims.java&lt;br/&gt;
  shims/src/common/java/org/apache/hadoop/hive/shims/HadoopShims.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/7287/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/7287/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To: JIRA, zhenxiao&lt;/p&gt;</comment>
                            <comment id="13278508" author="phabricator@reviews.facebook.net" created="Fri, 18 May 2012 02:12:02 +0000"  >&lt;p&gt;zhenxiao updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2804&quot; title=&quot;Task log retrieval fails on Hadoop 0.23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2804&quot;&gt;&lt;del&gt;HIVE-2804&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Task log retrieval fails on Hadoop 0.23&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  Updated patch for &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2804&quot; title=&quot;Task log retrieval fails on Hadoop 0.23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2804&quot;&gt;&lt;del&gt;HIVE-2804&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D3219&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D3219&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  build-common.xml&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/HadoopJobExecHelper.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/JobDebugger.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/errors/TaskLogProcessor.java&lt;br/&gt;
  ql/src/test/org/apache/hadoop/hive/ql/udf/generic/GenericUDFEvaluateNPE.java&lt;br/&gt;
  ql/src/test/queries/clientnegative/cluster_tasklog_retrieval.q&lt;br/&gt;
  ql/src/test/results/clientnegative/cluster_tasklog_retrieval.q.out&lt;br/&gt;
  shims/src/0.20/java/org/apache/hadoop/hive/shims/Hadoop20Shims.java&lt;br/&gt;
  shims/src/0.20S/java/org/apache/hadoop/hive/shims/Hadoop20SShims.java&lt;br/&gt;
  shims/src/0.23/java/org/apache/hadoop/hive/shims/Hadoop23Shims.java&lt;br/&gt;
  shims/src/common/java/org/apache/hadoop/hive/shims/HadoopShims.java&lt;/p&gt;

&lt;p&gt;To: JIRA, zhenxiao&lt;/p&gt;</comment>
                            <comment id="13278514" author="phabricator@reviews.facebook.net" created="Fri, 18 May 2012 02:28:06 +0000"  >&lt;p&gt;cwsteinbach has accepted the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2804&quot; title=&quot;Task log retrieval fails on Hadoop 0.23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2804&quot;&gt;&lt;del&gt;HIVE-2804&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Task log retrieval fails on Hadoop 0.23&quot;.&lt;/p&gt;

&lt;p&gt;  +1. Will commit if tests pass.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D3219&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D3219&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2804&quot; title=&quot;Task log retrieval fails on Hadoop 0.23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2804&quot;&gt;&lt;del&gt;HIVE-2804&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To: JIRA, cwsteinbach, zhenxiao&lt;/p&gt;</comment>
                            <comment id="13397421" author="rohithsharma" created="Wed, 20 Jun 2012 10:54:31 +0000"  >&lt;p&gt;I also encountered the same problem with hive UDAF queries such as PERCENTILE and ASSERT_TRUE. I have applied given patch and run these 2 queries. This patch fails throwing following excetiption.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Error during job, obtaining debugging information...
Examining task ID: task_1340014683209_0037_m_000000 (and more) from job job_1340014683209_0037
Exception in thread &quot;Thread-26&quot; java.lang.RuntimeException: Bad task log url
        at org.apache.hadoop.hive.ql.exec.errors.TaskLogProcessor.getStackTraces(TaskLogProcessor.java:193)
        at org.apache.hadoop.hive.ql.exec.JobDebugger.showJobFailDebugInfo(JobDebugger.java:227)
        at org.apache.hadoop.hive.ql.exec.JobDebugger.run(JobDebugger.java:94)
        at java.lang.Thread.run(Thread.java:662)
Caused by: java.net.MalformedURLException
        at java.net.URL.&amp;lt;init&amp;gt;(URL.java:601)
        at java.net.URL.&amp;lt;init&amp;gt;(URL.java:464)
        at java.net.URL.&amp;lt;init&amp;gt;(URL.java:413)
        at org.apache.hadoop.hive.ql.exec.errors.TaskLogProcessor.getStackTraces(TaskLogProcessor.java:191)
        ... 3 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Correct me if I am wrong ,&lt;br/&gt;
With my understanding problem is adding URI&apos;s into &apos;taskLogUrls&apos;, I feel we need null check while adding URI into &apos;taskLogUrls&apos;  because hadoop23shims returns null if the cluster is MR2. This URI construction fails since null is passed as argument when TaskLogProcessor.getErrors() or TaskLogProcessor.getStackTraces() is called and throws MalformedURLException.&lt;/p&gt;</comment>
                            <comment id="13397429" author="rohithsharma" created="Wed, 20 Jun 2012 11:30:03 +0000"  >&lt;p&gt;In addition to above, &lt;/p&gt;

&lt;p&gt;Currently, Once the job is failed, debug information is displayed along with URL. This &apos;taskUrl&apos; displayed is specific to MR1 cluster. This &apos;taskUrl&apos; construction should be based on MR cluster.&lt;/p&gt;</comment>
                            <comment id="13398052" author="zhenxiao" created="Thu, 21 Jun 2012 01:19:50 +0000"  >&lt;p&gt;@rohithsharma:&lt;/p&gt;

&lt;p&gt;Thanks a lot for the comment. Are you using MR1 or MR2 to reproduce the exception? I manually tested &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2804&quot; title=&quot;Task log retrieval fails on Hadoop 0.23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2804&quot;&gt;&lt;del&gt;HIVE-2804&lt;/del&gt;&lt;/a&gt;.6.patch.txt on a real cluster for both MR1 and MR2. It was running OK. While, returning null could be a problem. I will attach an updated &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2804&quot; title=&quot;Task log retrieval fails on Hadoop 0.23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2804&quot;&gt;&lt;del&gt;HIVE-2804&lt;/del&gt;&lt;/a&gt;.7.patch.txt, trying to fix the problem.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Zhenxiao&lt;/p&gt;</comment>
                            <comment id="13398054" author="zhenxiao" created="Thu, 21 Jun 2012 01:24:48 +0000"  >&lt;p&gt;@rohithsharma:&lt;/p&gt;

&lt;p&gt;new patch attached: &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2804&quot; title=&quot;Task log retrieval fails on Hadoop 0.23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2804&quot;&gt;&lt;del&gt;HIVE-2804&lt;/del&gt;&lt;/a&gt;.7.patch.txt&lt;/p&gt;

&lt;p&gt;added null check for taskLogUrl construction.&lt;/p&gt;

&lt;p&gt;Would you please try this patch, and if the exception still occurs, send me a note of the stack trace, I will do more investigation.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Zhenxiao&lt;/p&gt;</comment>
                            <comment id="13398194" author="rohithsharma" created="Thu, 21 Jun 2012 05:03:56 +0000"  >&lt;p&gt;@zhenxiao&lt;br/&gt;
&amp;gt;&amp;gt;&amp;gt; Are you using MR1 or MR2 to reproduce the exception?&lt;br/&gt;
I am using MR2 cluster.&lt;/p&gt;

&lt;p&gt;Latest patch solved the problem, Thanks you &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13398195" author="rohithsharma" created="Thu, 21 Jun 2012 05:06:15 +0000"  >&lt;p&gt;I think, &lt;br/&gt;
adding &quot;GenericUDFEvaluateNPE.java&quot; only for test framework is not required. Existing below UDAF queries will catch above problem.&lt;br/&gt;
&amp;gt;&amp;gt; SELECT percentile(key,5) FROM src;&lt;br/&gt;
&amp;gt;&amp;gt; SELECT assert_true(key &amp;gt;= 100) FROM src;&lt;/p&gt;

&lt;p&gt;We can add these queries into tests.&lt;/p&gt;</comment>
                            <comment id="13398234" author="rohithsharma" created="Thu, 21 Jun 2012 07:00:51 +0000"  >&lt;p&gt;In TaskLogProcessor.java, there are 2 methods which construct URL. One is getError() and another is getStackTraces(). TaskLogProcessor.getStackTraces() is called only if &apos;hive.exec.job.debug.capture.stacktraces&apos; is set to true.I think in your case this was not set false.&lt;/p&gt;</comment>
                            <comment id="13398634" author="zhenxiao" created="Thu, 21 Jun 2012 17:46:07 +0000"  >&lt;p&gt;@rohithsharma:&lt;/p&gt;

&lt;p&gt;Thank you so much for the comment. I will update the patch, and submit for review soon.&lt;/p&gt;</comment>
                            <comment id="13398727" author="zhenxiao" created="Thu, 21 Jun 2012 18:38:22 +0000"  >&lt;p&gt;Patch submitted for review at:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/5310/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/5310/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13429561" author="cwsteinbach" created="Mon, 6 Aug 2012 23:10:29 +0000"  >&lt;p&gt;@Zhenxiao: Patch needs to be rebased against trunk. Thanks.&lt;/p&gt;</comment>
                            <comment id="13429657" author="zhenxiao" created="Tue, 7 Aug 2012 01:42:51 +0000"  >&lt;p&gt;Updated patch submitted for review at:&lt;br/&gt;
&lt;a href=&quot;https://reviews.facebook.net/D4551&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D4551&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13429671" author="cwsteinbach" created="Tue, 7 Aug 2012 02:30:39 +0000"  >&lt;p&gt;+1. Will commit if tests pass.&lt;/p&gt;</comment>
                            <comment id="13434582" author="cwsteinbach" created="Tue, 14 Aug 2012 22:22:19 +0000"  >&lt;p&gt;Committed to trunk. Thanks Zhenxiao!&lt;/p&gt;</comment>
                            <comment id="13434869" author="hudson" created="Wed, 15 Aug 2012 07:57:14 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1606 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1606/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1606/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2804&quot; title=&quot;Task log retrieval fails on Hadoop 0.23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2804&quot;&gt;&lt;del&gt;HIVE-2804&lt;/del&gt;&lt;/a&gt;. Task log retrieval fails on Hadoop 0.23 (Zhenxiao Luo via cws) (Revision 1373145)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
cws : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1373145&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1373145&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/build-common.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/HadoopJobExecHelper.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/JobDebugger.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/errors/TaskLogProcessor.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/org/apache/hadoop/hive/ql/udf/generic/GenericUDFEvaluateNPE.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/cluster_tasklog_retrieval.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/cluster_tasklog_retrieval.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/src/0.20/java/org/apache/hadoop/hive/shims/Hadoop20Shims.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/src/0.20S/java/org/apache/hadoop/hive/shims/Hadoop20SShims.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/src/0.23/java/org/apache/hadoop/hive/shims/Hadoop23Shims.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/src/common/java/org/apache/hadoop/hive/shims/HadoopShims.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13528520" author="phabricator@reviews.facebook.net" created="Tue, 11 Dec 2012 00:37:21 +0000"  >&lt;p&gt;zhenxiao has abandoned the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2804&quot; title=&quot;Task log retrieval fails on Hadoop 0.23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2804&quot;&gt;&lt;del&gt;HIVE-2804&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Task log retrieval fails on Hadoop 0.23&quot;.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D3567&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D3567&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To: JIRA, zhenxiao&lt;/p&gt;</comment>
                            <comment id="13528521" author="phabricator@reviews.facebook.net" created="Tue, 11 Dec 2012 00:37:21 +0000"  >&lt;p&gt;zhenxiao has abandoned the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2804&quot; title=&quot;Task log retrieval fails on Hadoop 0.23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2804&quot;&gt;&lt;del&gt;HIVE-2804&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Task log retrieval fails on secure cluster&quot;.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D3057&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D3057&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To: JIRA, cwsteinbach, zhenxiao&lt;br/&gt;
Cc: njain&lt;/p&gt;</comment>
                            <comment id="13548230" author="hudson" created="Wed, 9 Jan 2013 10:24:54 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2804&quot; title=&quot;Task log retrieval fails on Hadoop 0.23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2804&quot;&gt;&lt;del&gt;HIVE-2804&lt;/del&gt;&lt;/a&gt;. Task log retrieval fails on Hadoop 0.23 (Zhenxiao Luo via cws) (Revision 1373145)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
cws : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1373145&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1373145&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/build-common.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/HadoopJobExecHelper.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/JobDebugger.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/errors/TaskLogProcessor.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/org/apache/hadoop/hive/ql/udf/generic/GenericUDFEvaluateNPE.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/cluster_tasklog_retrieval.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/cluster_tasklog_retrieval.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/src/0.20/java/org/apache/hadoop/hive/shims/Hadoop20Shims.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/src/0.20S/java/org/apache/hadoop/hive/shims/Hadoop20SShims.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/src/0.23/java/org/apache/hadoop/hive/shims/Hadoop23Shims.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/src/common/java/org/apache/hadoop/hive/shims/HadoopShims.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13550325" author="ashutoshc" created="Thu, 10 Jan 2013 19:54:15 +0000"  >&lt;p&gt;This issue is fixed and released as part of 0.10.0 release. If you find an issue which seems to be related to this one, please create a new jira and link this one with new jira.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12553575">MAPREDUCE-4218</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12472147">HIVE-1579</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12600537">HIVE-3313</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12600246">HIVE-3301</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12525694" name="ASF.LICENSE.NOT.GRANTED--HIVE-2804.D3057.1.patch" size="11183" author="phabricator@reviews.facebook.net" created="Fri, 4 May 2012 22:55:49 +0000"/>
                            <attachment id="12525799" name="ASF.LICENSE.NOT.GRANTED--HIVE-2804.D3057.2.patch" size="11702" author="phabricator@reviews.facebook.net" created="Mon, 7 May 2012 04:20:03 +0000"/>
                            <attachment id="12525899" name="ASF.LICENSE.NOT.GRANTED--HIVE-2804.D3057.3.patch" size="13824" author="phabricator@reviews.facebook.net" created="Mon, 7 May 2012 18:42:48 +0000"/>
                            <attachment id="12526866" name="ASF.LICENSE.NOT.GRANTED--HIVE-2804.D3219.1.patch" size="15140" author="phabricator@reviews.facebook.net" created="Tue, 15 May 2012 00:40:32 +0000"/>
                            <attachment id="12527979" name="ASF.LICENSE.NOT.GRANTED--HIVE-2804.D3219.2.patch" size="18785" author="phabricator@reviews.facebook.net" created="Fri, 18 May 2012 02:12:03 +0000"/>
                            <attachment id="12525695" name="HIVE-2804.1.patch.txt" size="11183" author="zhenxiao" created="Fri, 4 May 2012 22:59:08 +0000"/>
                            <attachment id="12525801" name="HIVE-2804.2.patch.txt" size="13566" author="zhenxiao" created="Mon, 7 May 2012 04:55:35 +0000"/>
                            <attachment id="12525900" name="HIVE-2804.3.patch.txt" size="13824" author="zhenxiao" created="Mon, 7 May 2012 18:44:20 +0000"/>
                            <attachment id="12527366" name="HIVE-2804.4.patch.txt" size="15140" author="zhenxiao" created="Tue, 15 May 2012 15:48:27 +0000"/>
                            <attachment id="12527982" name="HIVE-2804.5.patch.txt" size="18785" author="zhenxiao" created="Fri, 18 May 2012 02:15:48 +0000"/>
                            <attachment id="12527980" name="HIVE-2804.5.patch.txt" size="18785" author="zhenxiao" created="Fri, 18 May 2012 02:15:33 +0000"/>
                            <attachment id="12530299" name="HIVE-2804.6.patch.txt" size="19881" author="zhenxiao" created="Wed, 30 May 2012 23:39:56 +0000"/>
                            <attachment id="12532810" name="HIVE-2804.7.patch.txt" size="20109" author="zhenxiao" created="Thu, 21 Jun 2012 01:22:33 +0000"/>
                            <attachment id="12532921" name="HIVE-2804.8.patch.txt" size="15198" author="zhenxiao" created="Thu, 21 Jun 2012 18:38:45 +0000"/>
                            <attachment id="12539402" name="HIVE-2804.9.patch.txt" size="20359" author="zhenxiao" created="Tue, 7 Aug 2012 01:43:08 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>15.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 19 Apr 2012 17:27:14 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>227747</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 47 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02ulr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>14559</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>