<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sat Dec 03 01:51:13 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/CAMEL-7147/CAMEL-7147.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[CAMEL-7147] NullPointerException when chaining CXF/Jackson REST services in a Camel route</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-7147</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;When chaining multiple REST service calls in a single camel route, using Jackson as the JSON provider for CXF, the JacksonJsonProvider appears to lose its thread local context between invocations, resulting in an NPE. The NPE doesn&apos;t always occur at the same point. Sometimes one or both additional services are successfully called before the thead local context disappears, but other times neither service is called and an NPE is thrown as soon as the initial service is invoked.&lt;/p&gt;

&lt;p&gt;See attached zip archive for reproducer (service2 and service3 are deployed on JBoss AS 7.3.0).&lt;/p&gt;

&lt;p&gt;See camel-users thread for background:&lt;br/&gt;
&lt;a href=&quot;http://camel.465427.n5.nabble.com/Questions-about-cxfrs-td5746294.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://camel.465427.n5.nabble.com/Questions-about-cxfrs-td5746294.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Lib versions:&lt;/p&gt;

&lt;p&gt;Camel: 2.12.0&lt;br/&gt;
Jackson: 1.9.10&lt;br/&gt;
CXF: 2.7.0&lt;/p&gt;

&lt;p&gt;Full stacktrace:&lt;/p&gt;

&lt;p&gt;11:40:51,678 | INFO  | tp1806392083-718 | LoggingInInterceptor             | 150 - org.apache.cxf.cxf-api - 2.7.0.redhat-610139 | Inbound Message&lt;br/&gt;
----------------------------&lt;br/&gt;
ID: 15&lt;br/&gt;
Address: &lt;a href=&quot;http://localhost:8182/service1/service1path&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://localhost:8182/service1/service1path&lt;/a&gt;&lt;br/&gt;
Encoding: ISO-8859-1&lt;br/&gt;
Http-Method: POST&lt;br/&gt;
Content-Type: application/json&lt;br/&gt;
Headers: &lt;/p&gt;
{Accept=[*/*], accept-encoding=[gzip,deflate,sdch], Accept-Language=[en-US,en;q=0.8], connection=[keep-alive], Content-Length=[23], content-type=[application/json], Host=[localhost:8182], Origin=[chrome-extension://fhjcajmcbmldlhcimfajhfbgofnpcjmb], User-Agent=[Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/31.0.1650.63 Safari/537.36]}
&lt;p&gt;Payload: &lt;/p&gt;
{&quot;id&quot;:1,&quot;name&quot;:&quot;Fred&quot;}

&lt;p&gt;--------------------------------------&lt;br/&gt;
11:40:51,679 | WARN  | tp1806392083-718 | PhaseInterceptorChain            | 150 - org.apache.cxf.cxf-api - 2.7.0.redhat-610139 | Interceptor for &lt;/p&gt;
{http://jackson.blueprint.camel.mycompany.com/}
&lt;p&gt;ServiceOne has thrown exception, unwinding now&lt;br/&gt;
java.lang.NullPointerException&lt;br/&gt;
	at org.apache.cxf.jaxrs.impl.tl.ThreadLocalProviders.getContextResolver(ThreadLocalProviders.java:50)&lt;span class=&quot;error&quot;&gt;&amp;#91;166:org.apache.cxf.cxf-rt-frontend-jaxrs:2.7.0.redhat-610139&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.codehaus.jackson.jaxrs.JacksonJsonProvider.locateMapper(JacksonJsonProvider.java:633)&lt;span class=&quot;error&quot;&gt;&amp;#91;245:jackson-jaxrs:1.9.10&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.codehaus.jackson.jaxrs.JacksonJsonProvider.readFrom(JacksonJsonProvider.java:413)&lt;span class=&quot;error&quot;&gt;&amp;#91;245:jackson-jaxrs:1.9.10&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cxf.jaxrs.utils.JAXRSUtils.readFromMessageBodyReader(JAXRSUtils.java:1280)&lt;span class=&quot;error&quot;&gt;&amp;#91;166:org.apache.cxf.cxf-rt-frontend-jaxrs:2.7.0.redhat-610139&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cxf.jaxrs.utils.JAXRSUtils.readFromMessageBody(JAXRSUtils.java:1231)&lt;span class=&quot;error&quot;&gt;&amp;#91;166:org.apache.cxf.cxf-rt-frontend-jaxrs:2.7.0.redhat-610139&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cxf.jaxrs.utils.JAXRSUtils.processParameter(JAXRSUtils.java:782)&lt;span class=&quot;error&quot;&gt;&amp;#91;166:org.apache.cxf.cxf-rt-frontend-jaxrs:2.7.0.redhat-610139&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cxf.jaxrs.utils.JAXRSUtils.processParameters(JAXRSUtils.java:741)&lt;span class=&quot;error&quot;&gt;&amp;#91;166:org.apache.cxf.cxf-rt-frontend-jaxrs:2.7.0.redhat-610139&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cxf.jaxrs.interceptor.JAXRSInInterceptor.processRequest(JAXRSInInterceptor.java:263)&lt;span class=&quot;error&quot;&gt;&amp;#91;166:org.apache.cxf.cxf-rt-frontend-jaxrs:2.7.0.redhat-610139&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cxf.jaxrs.interceptor.JAXRSInInterceptor.handleMessage(JAXRSInInterceptor.java:103)&lt;span class=&quot;error&quot;&gt;&amp;#91;166:org.apache.cxf.cxf-rt-frontend-jaxrs:2.7.0.redhat-610139&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:272)&lt;span class=&quot;error&quot;&gt;&amp;#91;150:org.apache.cxf.cxf-api:2.7.0.redhat-610139&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:121)&lt;span class=&quot;error&quot;&gt;&amp;#91;150:org.apache.cxf.cxf-api:2.7.0.redhat-610139&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cxf.transport.http_jetty.JettyHTTPDestination.serviceRequest(JettyHTTPDestination.java:355)&lt;span class=&quot;error&quot;&gt;&amp;#91;176:org.apache.cxf.cxf-rt-transports-http-jetty:2.7.0.redhat-610139&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cxf.transport.http_jetty.JettyHTTPDestination.doService(JettyHTTPDestination.java:319)&lt;span class=&quot;error&quot;&gt;&amp;#91;176:org.apache.cxf.cxf-rt-transports-http-jetty:2.7.0.redhat-610139&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cxf.transport.http_jetty.JettyHTTPHandler.handle(JettyHTTPHandler.java:72)&lt;span class=&quot;error&quot;&gt;&amp;#91;176:org.apache.cxf.cxf-rt-transports-http-jetty:2.7.0.redhat-610139&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1077)&lt;span class=&quot;error&quot;&gt;&amp;#91;93:org.eclipse.jetty.aggregate.jetty-all-server:8.1.9.v20130131&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1013)&lt;span class=&quot;error&quot;&gt;&amp;#91;93:org.eclipse.jetty.aggregate.jetty-all-server:8.1.9.v20130131&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:135)&lt;span class=&quot;error&quot;&gt;&amp;#91;93:org.eclipse.jetty.aggregate.jetty-all-server:8.1.9.v20130131&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:255)&lt;span class=&quot;error&quot;&gt;&amp;#91;93:org.eclipse.jetty.aggregate.jetty-all-server:8.1.9.v20130131&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116)&lt;span class=&quot;error&quot;&gt;&amp;#91;93:org.eclipse.jetty.aggregate.jetty-all-server:8.1.9.v20130131&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.eclipse.jetty.server.Server.handle(Server.java:368)&lt;span class=&quot;error&quot;&gt;&amp;#91;93:org.eclipse.jetty.aggregate.jetty-all-server:8.1.9.v20130131&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:488)&lt;span class=&quot;error&quot;&gt;&amp;#91;93:org.eclipse.jetty.aggregate.jetty-all-server:8.1.9.v20130131&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.eclipse.jetty.server.AbstractHttpConnection.content(AbstractHttpConnection.java:943)&lt;span class=&quot;error&quot;&gt;&amp;#91;93:org.eclipse.jetty.aggregate.jetty-all-server:8.1.9.v20130131&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.content(AbstractHttpConnection.java:1004)&lt;span class=&quot;error&quot;&gt;&amp;#91;93:org.eclipse.jetty.aggregate.jetty-all-server:8.1.9.v20130131&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:861)&lt;span class=&quot;error&quot;&gt;&amp;#91;93:org.eclipse.jetty.aggregate.jetty-all-server:8.1.9.v20130131&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:240)&lt;span class=&quot;error&quot;&gt;&amp;#91;93:org.eclipse.jetty.aggregate.jetty-all-server:8.1.9.v20130131&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.eclipse.jetty.server.AsyncHttpConnection.handle(AsyncHttpConnection.java:82)&lt;span class=&quot;error&quot;&gt;&amp;#91;93:org.eclipse.jetty.aggregate.jetty-all-server:8.1.9.v20130131&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:628)&lt;span class=&quot;error&quot;&gt;&amp;#91;93:org.eclipse.jetty.aggregate.jetty-all-server:8.1.9.v20130131&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:52)&lt;span class=&quot;error&quot;&gt;&amp;#91;93:org.eclipse.jetty.aggregate.jetty-all-server:8.1.9.v20130131&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:608)&lt;span class=&quot;error&quot;&gt;&amp;#91;93:org.eclipse.jetty.aggregate.jetty-all-server:8.1.9.v20130131&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:543)&lt;span class=&quot;error&quot;&gt;&amp;#91;93:org.eclipse.jetty.aggregate.jetty-all-server:8.1.9.v20130131&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:744)&lt;span class=&quot;error&quot;&gt;&amp;#91;:1.7.0_45&amp;#93;&lt;/span&gt;&lt;br/&gt;
11:40:51,681 | WARN  | tp1806392083-718 | PhaseInterceptorChain            | 150 - org.apache.cxf.cxf-api - 2.7.0.redhat-610139 | Exception in handleFault on interceptor org.apache.cxf.binding.xml.interceptor.XMLFaultOutInterceptor@7ba1c840&lt;br/&gt;
org.apache.cxf.interceptor.Fault&lt;br/&gt;
	at org.apache.cxf.interceptor.AbstractFaultChainInitiatorObserver.onMessage(AbstractFaultChainInitiatorObserver.java:76)&lt;span class=&quot;error&quot;&gt;&amp;#91;150:org.apache.cxf.cxf-api:2.7.0.redhat-610139&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:333)&lt;span class=&quot;error&quot;&gt;&amp;#91;150:org.apache.cxf.cxf-api:2.7.0.redhat-610139&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:121)&lt;span class=&quot;error&quot;&gt;&amp;#91;150:org.apache.cxf.cxf-api:2.7.0.redhat-610139&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cxf.transport.http_jetty.JettyHTTPDestination.serviceRequest(JettyHTTPDestination.java:355)&lt;span class=&quot;error&quot;&gt;&amp;#91;176:org.apache.cxf.cxf-rt-transports-http-jetty:2.7.0.redhat-610139&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cxf.transport.http_jetty.JettyHTTPDestination.doService(JettyHTTPDestination.java:319)&lt;span class=&quot;error&quot;&gt;&amp;#91;176:org.apache.cxf.cxf-rt-transports-http-jetty:2.7.0.redhat-610139&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cxf.transport.http_jetty.JettyHTTPHandler.handle(JettyHTTPHandler.java:72)&lt;span class=&quot;error&quot;&gt;&amp;#91;176:org.apache.cxf.cxf-rt-transports-http-jetty:2.7.0.redhat-610139&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1077)&lt;span class=&quot;error&quot;&gt;&amp;#91;93:org.eclipse.jetty.aggregate.jetty-all-server:8.1.9.v20130131&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1013)&lt;span class=&quot;error&quot;&gt;&amp;#91;93:org.eclipse.jetty.aggregate.jetty-all-server:8.1.9.v20130131&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:135)&lt;span class=&quot;error&quot;&gt;&amp;#91;93:org.eclipse.jetty.aggregate.jetty-all-server:8.1.9.v20130131&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:255)&lt;span class=&quot;error&quot;&gt;&amp;#91;93:org.eclipse.jetty.aggregate.jetty-all-server:8.1.9.v20130131&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116)&lt;span class=&quot;error&quot;&gt;&amp;#91;93:org.eclipse.jetty.aggregate.jetty-all-server:8.1.9.v20130131&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.eclipse.jetty.server.Server.handle(Server.java:368)&lt;span class=&quot;error&quot;&gt;&amp;#91;93:org.eclipse.jetty.aggregate.jetty-all-server:8.1.9.v20130131&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:488)&lt;span class=&quot;error&quot;&gt;&amp;#91;93:org.eclipse.jetty.aggregate.jetty-all-server:8.1.9.v20130131&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.eclipse.jetty.server.AbstractHttpConnection.content(AbstractHttpConnection.java:943)&lt;span class=&quot;error&quot;&gt;&amp;#91;93:org.eclipse.jetty.aggregate.jetty-all-server:8.1.9.v20130131&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.content(AbstractHttpConnection.java:1004)&lt;span class=&quot;error&quot;&gt;&amp;#91;93:org.eclipse.jetty.aggregate.jetty-all-server:8.1.9.v20130131&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:861)&lt;span class=&quot;error&quot;&gt;&amp;#91;93:org.eclipse.jetty.aggregate.jetty-all-server:8.1.9.v20130131&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:240)&lt;span class=&quot;error&quot;&gt;&amp;#91;93:org.eclipse.jetty.aggregate.jetty-all-server:8.1.9.v20130131&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.eclipse.jetty.server.AsyncHttpConnection.handle(AsyncHttpConnection.java:82)&lt;span class=&quot;error&quot;&gt;&amp;#91;93:org.eclipse.jetty.aggregate.jetty-all-server:8.1.9.v20130131&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:628)&lt;span class=&quot;error&quot;&gt;&amp;#91;93:org.eclipse.jetty.aggregate.jetty-all-server:8.1.9.v20130131&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:52)&lt;span class=&quot;error&quot;&gt;&amp;#91;93:org.eclipse.jetty.aggregate.jetty-all-server:8.1.9.v20130131&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:608)&lt;span class=&quot;error&quot;&gt;&amp;#91;93:org.eclipse.jetty.aggregate.jetty-all-server:8.1.9.v20130131&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:543)&lt;span class=&quot;error&quot;&gt;&amp;#91;93:org.eclipse.jetty.aggregate.jetty-all-server:8.1.9.v20130131&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:744)&lt;span class=&quot;error&quot;&gt;&amp;#91;:1.7.0_45&amp;#93;&lt;/span&gt;&lt;br/&gt;
Caused by: java.lang.NullPointerException&lt;br/&gt;
	at org.apache.cxf.jaxrs.impl.tl.ThreadLocalProviders.getContextResolver(ThreadLocalProviders.java:50)&lt;span class=&quot;error&quot;&gt;&amp;#91;166:org.apache.cxf.cxf-rt-frontend-jaxrs:2.7.0.redhat-610139&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.codehaus.jackson.jaxrs.JacksonJsonProvider.locateMapper(JacksonJsonProvider.java:633)&lt;span class=&quot;error&quot;&gt;&amp;#91;245:jackson-jaxrs:1.9.10&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.codehaus.jackson.jaxrs.JacksonJsonProvider.readFrom(JacksonJsonProvider.java:413)&lt;span class=&quot;error&quot;&gt;&amp;#91;245:jackson-jaxrs:1.9.10&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cxf.jaxrs.utils.JAXRSUtils.readFromMessageBodyReader(JAXRSUtils.java:1280)&lt;span class=&quot;error&quot;&gt;&amp;#91;166:org.apache.cxf.cxf-rt-frontend-jaxrs:2.7.0.redhat-610139&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cxf.jaxrs.utils.JAXRSUtils.readFromMessageBody(JAXRSUtils.java:1231)&lt;span class=&quot;error&quot;&gt;&amp;#91;166:org.apache.cxf.cxf-rt-frontend-jaxrs:2.7.0.redhat-610139&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cxf.jaxrs.utils.JAXRSUtils.processParameter(JAXRSUtils.java:782)&lt;span class=&quot;error&quot;&gt;&amp;#91;166:org.apache.cxf.cxf-rt-frontend-jaxrs:2.7.0.redhat-610139&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cxf.jaxrs.utils.JAXRSUtils.processParameters(JAXRSUtils.java:741)&lt;span class=&quot;error&quot;&gt;&amp;#91;166:org.apache.cxf.cxf-rt-frontend-jaxrs:2.7.0.redhat-610139&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cxf.jaxrs.interceptor.JAXRSInInterceptor.processRequest(JAXRSInInterceptor.java:263)&lt;span class=&quot;error&quot;&gt;&amp;#91;166:org.apache.cxf.cxf-rt-frontend-jaxrs:2.7.0.redhat-610139&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cxf.jaxrs.interceptor.JAXRSInInterceptor.handleMessage(JAXRSInInterceptor.java:103)&lt;span class=&quot;error&quot;&gt;&amp;#91;166:org.apache.cxf.cxf-rt-frontend-jaxrs:2.7.0.redhat-610139&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:272)&lt;span class=&quot;error&quot;&gt;&amp;#91;150:org.apache.cxf.cxf-api:2.7.0.redhat-610139&amp;#93;&lt;/span&gt;&lt;br/&gt;
	... 21 more&lt;br/&gt;
11:40:51,682 | ERROR | tp1806392083-718 | tractFaultChainInitiatorObserver | 150 - org.apache.cxf.cxf-api - 2.7.0.redhat-610139 | Error occurred during error handling, give up!&lt;br/&gt;
org.apache.cxf.interceptor.Fault&lt;br/&gt;
	at org.apache.cxf.interceptor.AbstractFaultChainInitiatorObserver.onMessage(AbstractFaultChainInitiatorObserver.java:76)&lt;span class=&quot;error&quot;&gt;&amp;#91;150:org.apache.cxf.cxf-api:2.7.0.redhat-610139&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:333)&lt;span class=&quot;error&quot;&gt;&amp;#91;150:org.apache.cxf.cxf-api:2.7.0.redhat-610139&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:121)&lt;span class=&quot;error&quot;&gt;&amp;#91;150:org.apache.cxf.cxf-api:2.7.0.redhat-610139&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cxf.transport.http_jetty.JettyHTTPDestination.serviceRequest(JettyHTTPDestination.java:355)&lt;span class=&quot;error&quot;&gt;&amp;#91;176:org.apache.cxf.cxf-rt-transports-http-jetty:2.7.0.redhat-610139&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cxf.transport.http_jetty.JettyHTTPDestination.doService(JettyHTTPDestination.java:319)&lt;span class=&quot;error&quot;&gt;&amp;#91;176:org.apache.cxf.cxf-rt-transports-http-jetty:2.7.0.redhat-610139&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cxf.transport.http_jetty.JettyHTTPHandler.handle(JettyHTTPHandler.java:72)&lt;span class=&quot;error&quot;&gt;&amp;#91;176:org.apache.cxf.cxf-rt-transports-http-jetty:2.7.0.redhat-610139&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1077)&lt;span class=&quot;error&quot;&gt;&amp;#91;93:org.eclipse.jetty.aggregate.jetty-all-server:8.1.9.v20130131&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1013)&lt;span class=&quot;error&quot;&gt;&amp;#91;93:org.eclipse.jetty.aggregate.jetty-all-server:8.1.9.v20130131&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:135)&lt;span class=&quot;error&quot;&gt;&amp;#91;93:org.eclipse.jetty.aggregate.jetty-all-server:8.1.9.v20130131&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:255)&lt;span class=&quot;error&quot;&gt;&amp;#91;93:org.eclipse.jetty.aggregate.jetty-all-server:8.1.9.v20130131&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116)&lt;span class=&quot;error&quot;&gt;&amp;#91;93:org.eclipse.jetty.aggregate.jetty-all-server:8.1.9.v20130131&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.eclipse.jetty.server.Server.handle(Server.java:368)&lt;span class=&quot;error&quot;&gt;&amp;#91;93:org.eclipse.jetty.aggregate.jetty-all-server:8.1.9.v20130131&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:488)&lt;span class=&quot;error&quot;&gt;&amp;#91;93:org.eclipse.jetty.aggregate.jetty-all-server:8.1.9.v20130131&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.eclipse.jetty.server.AbstractHttpConnection.content(AbstractHttpConnection.java:943)&lt;span class=&quot;error&quot;&gt;&amp;#91;93:org.eclipse.jetty.aggregate.jetty-all-server:8.1.9.v20130131&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.content(AbstractHttpConnection.java:1004)&lt;span class=&quot;error&quot;&gt;&amp;#91;93:org.eclipse.jetty.aggregate.jetty-all-server:8.1.9.v20130131&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:861)&lt;span class=&quot;error&quot;&gt;&amp;#91;93:org.eclipse.jetty.aggregate.jetty-all-server:8.1.9.v20130131&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:240)&lt;span class=&quot;error&quot;&gt;&amp;#91;93:org.eclipse.jetty.aggregate.jetty-all-server:8.1.9.v20130131&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.eclipse.jetty.server.AsyncHttpConnection.handle(AsyncHttpConnection.java:82)&lt;span class=&quot;error&quot;&gt;&amp;#91;93:org.eclipse.jetty.aggregate.jetty-all-server:8.1.9.v20130131&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:628)&lt;span class=&quot;error&quot;&gt;&amp;#91;93:org.eclipse.jetty.aggregate.jetty-all-server:8.1.9.v20130131&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:52)&lt;span class=&quot;error&quot;&gt;&amp;#91;93:org.eclipse.jetty.aggregate.jetty-all-server:8.1.9.v20130131&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:608)&lt;span class=&quot;error&quot;&gt;&amp;#91;93:org.eclipse.jetty.aggregate.jetty-all-server:8.1.9.v20130131&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:543)&lt;span class=&quot;error&quot;&gt;&amp;#91;93:org.eclipse.jetty.aggregate.jetty-all-server:8.1.9.v20130131&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:744)&lt;span class=&quot;error&quot;&gt;&amp;#91;:1.7.0_45&amp;#93;&lt;/span&gt;&lt;br/&gt;
Caused by: java.lang.NullPointerException&lt;br/&gt;
	at org.apache.cxf.jaxrs.impl.tl.ThreadLocalProviders.getContextResolver(ThreadLocalProviders.java:50)&lt;span class=&quot;error&quot;&gt;&amp;#91;166:org.apache.cxf.cxf-rt-frontend-jaxrs:2.7.0.redhat-610139&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.codehaus.jackson.jaxrs.JacksonJsonProvider.locateMapper(JacksonJsonProvider.java:633)&lt;span class=&quot;error&quot;&gt;&amp;#91;245:jackson-jaxrs:1.9.10&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.codehaus.jackson.jaxrs.JacksonJsonProvider.readFrom(JacksonJsonProvider.java:413)&lt;span class=&quot;error&quot;&gt;&amp;#91;245:jackson-jaxrs:1.9.10&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cxf.jaxrs.utils.JAXRSUtils.readFromMessageBodyReader(JAXRSUtils.java:1280)&lt;span class=&quot;error&quot;&gt;&amp;#91;166:org.apache.cxf.cxf-rt-frontend-jaxrs:2.7.0.redhat-610139&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cxf.jaxrs.utils.JAXRSUtils.readFromMessageBody(JAXRSUtils.java:1231)&lt;span class=&quot;error&quot;&gt;&amp;#91;166:org.apache.cxf.cxf-rt-frontend-jaxrs:2.7.0.redhat-610139&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cxf.jaxrs.utils.JAXRSUtils.processParameter(JAXRSUtils.java:782)&lt;span class=&quot;error&quot;&gt;&amp;#91;166:org.apache.cxf.cxf-rt-frontend-jaxrs:2.7.0.redhat-610139&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cxf.jaxrs.utils.JAXRSUtils.processParameters(JAXRSUtils.java:741)&lt;span class=&quot;error&quot;&gt;&amp;#91;166:org.apache.cxf.cxf-rt-frontend-jaxrs:2.7.0.redhat-610139&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cxf.jaxrs.interceptor.JAXRSInInterceptor.processRequest(JAXRSInInterceptor.java:263)&lt;span class=&quot;error&quot;&gt;&amp;#91;166:org.apache.cxf.cxf-rt-frontend-jaxrs:2.7.0.redhat-610139&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cxf.jaxrs.interceptor.JAXRSInInterceptor.handleMessage(JAXRSInInterceptor.java:103)&lt;span class=&quot;error&quot;&gt;&amp;#91;166:org.apache.cxf.cxf-rt-frontend-jaxrs:2.7.0.redhat-610139&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:272)&lt;span class=&quot;error&quot;&gt;&amp;#91;150:org.apache.cxf.cxf-api:2.7.0.redhat-610139&amp;#93;&lt;/span&gt;&lt;br/&gt;
	... 21 more&lt;br/&gt;
11:40:51,683 | WARN  | tp1806392083-718 | AbstractHttpConnection           | 93 - org.eclipse.jetty.aggregate.jetty-all-server - 8.1.9.v20130131 | /service1/service1path&lt;br/&gt;
java.lang.RuntimeException: org.apache.cxf.interceptor.Fault&lt;br/&gt;
	at org.apache.cxf.interceptor.AbstractFaultChainInitiatorObserver.onMessage(AbstractFaultChainInitiatorObserver.java:116)&lt;span class=&quot;error&quot;&gt;&amp;#91;150:org.apache.cxf.cxf-api:2.7.0.redhat-610139&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:333)&lt;span class=&quot;error&quot;&gt;&amp;#91;150:org.apache.cxf.cxf-api:2.7.0.redhat-610139&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:121)&lt;span class=&quot;error&quot;&gt;&amp;#91;150:org.apache.cxf.cxf-api:2.7.0.redhat-610139&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cxf.transport.http_jetty.JettyHTTPDestination.serviceRequest(JettyHTTPDestination.java:355)&lt;span class=&quot;error&quot;&gt;&amp;#91;176:org.apache.cxf.cxf-rt-transports-http-jetty:2.7.0.redhat-610139&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cxf.transport.http_jetty.JettyHTTPDestination.doService(JettyHTTPDestination.java:319)&lt;span class=&quot;error&quot;&gt;&amp;#91;176:org.apache.cxf.cxf-rt-transports-http-jetty:2.7.0.redhat-610139&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cxf.transport.http_jetty.JettyHTTPHandler.handle(JettyHTTPHandler.java:72)&lt;span class=&quot;error&quot;&gt;&amp;#91;176:org.apache.cxf.cxf-rt-transports-http-jetty:2.7.0.redhat-610139&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1077)&lt;span class=&quot;error&quot;&gt;&amp;#91;93:org.eclipse.jetty.aggregate.jetty-all-server:8.1.9.v20130131&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1013)&lt;span class=&quot;error&quot;&gt;&amp;#91;93:org.eclipse.jetty.aggregate.jetty-all-server:8.1.9.v20130131&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:135)&lt;span class=&quot;error&quot;&gt;&amp;#91;93:org.eclipse.jetty.aggregate.jetty-all-server:8.1.9.v20130131&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:255)&lt;span class=&quot;error&quot;&gt;&amp;#91;93:org.eclipse.jetty.aggregate.jetty-all-server:8.1.9.v20130131&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116)&lt;span class=&quot;error&quot;&gt;&amp;#91;93:org.eclipse.jetty.aggregate.jetty-all-server:8.1.9.v20130131&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.eclipse.jetty.server.Server.handle(Server.java:368)&lt;span class=&quot;error&quot;&gt;&amp;#91;93:org.eclipse.jetty.aggregate.jetty-all-server:8.1.9.v20130131&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:488)&lt;span class=&quot;error&quot;&gt;&amp;#91;93:org.eclipse.jetty.aggregate.jetty-all-server:8.1.9.v20130131&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.eclipse.jetty.server.AbstractHttpConnection.content(AbstractHttpConnection.java:943)&lt;span class=&quot;error&quot;&gt;&amp;#91;93:org.eclipse.jetty.aggregate.jetty-all-server:8.1.9.v20130131&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.content(AbstractHttpConnection.java:1004)&lt;span class=&quot;error&quot;&gt;&amp;#91;93:org.eclipse.jetty.aggregate.jetty-all-server:8.1.9.v20130131&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:861)&lt;span class=&quot;error&quot;&gt;&amp;#91;93:org.eclipse.jetty.aggregate.jetty-all-server:8.1.9.v20130131&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:240)&lt;span class=&quot;error&quot;&gt;&amp;#91;93:org.eclipse.jetty.aggregate.jetty-all-server:8.1.9.v20130131&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.eclipse.jetty.server.AsyncHttpConnection.handle(AsyncHttpConnection.java:82)&lt;span class=&quot;error&quot;&gt;&amp;#91;93:org.eclipse.jetty.aggregate.jetty-all-server:8.1.9.v20130131&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:628)&lt;span class=&quot;error&quot;&gt;&amp;#91;93:org.eclipse.jetty.aggregate.jetty-all-server:8.1.9.v20130131&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:52)&lt;span class=&quot;error&quot;&gt;&amp;#91;93:org.eclipse.jetty.aggregate.jetty-all-server:8.1.9.v20130131&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:608)&lt;span class=&quot;error&quot;&gt;&amp;#91;93:org.eclipse.jetty.aggregate.jetty-all-server:8.1.9.v20130131&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:543)&lt;span class=&quot;error&quot;&gt;&amp;#91;93:org.eclipse.jetty.aggregate.jetty-all-server:8.1.9.v20130131&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:744)&lt;span class=&quot;error&quot;&gt;&amp;#91;:1.7.0_45&amp;#93;&lt;/span&gt;&lt;br/&gt;
Caused by: org.apache.cxf.interceptor.Fault&lt;br/&gt;
	at org.apache.cxf.interceptor.AbstractFaultChainInitiatorObserver.onMessage(AbstractFaultChainInitiatorObserver.java:76)&lt;span class=&quot;error&quot;&gt;&amp;#91;150:org.apache.cxf.cxf-api:2.7.0.redhat-610139&amp;#93;&lt;/span&gt;&lt;br/&gt;
	... 22 more&lt;br/&gt;
Caused by: java.lang.NullPointerException&lt;br/&gt;
	at org.apache.cxf.jaxrs.impl.tl.ThreadLocalProviders.getContextResolver(ThreadLocalProviders.java:50)&lt;span class=&quot;error&quot;&gt;&amp;#91;166:org.apache.cxf.cxf-rt-frontend-jaxrs:2.7.0.redhat-610139&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.codehaus.jackson.jaxrs.JacksonJsonProvider.locateMapper(JacksonJsonProvider.java:633)&lt;span class=&quot;error&quot;&gt;&amp;#91;245:jackson-jaxrs:1.9.10&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.codehaus.jackson.jaxrs.JacksonJsonProvider.readFrom(JacksonJsonProvider.java:413)&lt;span class=&quot;error&quot;&gt;&amp;#91;245:jackson-jaxrs:1.9.10&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cxf.jaxrs.utils.JAXRSUtils.readFromMessageBodyReader(JAXRSUtils.java:1280)&lt;span class=&quot;error&quot;&gt;&amp;#91;166:org.apache.cxf.cxf-rt-frontend-jaxrs:2.7.0.redhat-610139&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cxf.jaxrs.utils.JAXRSUtils.readFromMessageBody(JAXRSUtils.java:1231)&lt;span class=&quot;error&quot;&gt;&amp;#91;166:org.apache.cxf.cxf-rt-frontend-jaxrs:2.7.0.redhat-610139&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cxf.jaxrs.utils.JAXRSUtils.processParameter(JAXRSUtils.java:782)&lt;span class=&quot;error&quot;&gt;&amp;#91;166:org.apache.cxf.cxf-rt-frontend-jaxrs:2.7.0.redhat-610139&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cxf.jaxrs.utils.JAXRSUtils.processParameters(JAXRSUtils.java:741)&lt;span class=&quot;error&quot;&gt;&amp;#91;166:org.apache.cxf.cxf-rt-frontend-jaxrs:2.7.0.redhat-610139&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cxf.jaxrs.interceptor.JAXRSInInterceptor.processRequest(JAXRSInInterceptor.java:263)&lt;span class=&quot;error&quot;&gt;&amp;#91;166:org.apache.cxf.cxf-rt-frontend-jaxrs:2.7.0.redhat-610139&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cxf.jaxrs.interceptor.JAXRSInInterceptor.handleMessage(JAXRSInInterceptor.java:103)&lt;span class=&quot;error&quot;&gt;&amp;#91;166:org.apache.cxf.cxf-rt-frontend-jaxrs:2.7.0.redhat-610139&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:272)&lt;span class=&quot;error&quot;&gt;&amp;#91;150:org.apache.cxf.cxf-api:2.7.0.redhat-610139&amp;#93;&lt;/span&gt;&lt;br/&gt;
	... 21 more&lt;/p&gt;</description>
                <environment>&lt;p&gt;Fuse ESB 6.1.0.alpha&lt;/p&gt;</environment>
        <key id="12690309">CAMEL-7147</key>
            <summary>NullPointerException when chaining CXF/Jackson REST services in a Camel route</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="njiang">Willem Jiang</assignee>
                                    <reporter username="dvanbale">David van Balen</reporter>
                        <labels>
                            <label>cxf</label>
                            <label>cxfrs</label>
                            <label>json</label>
                            <label>threadlocal</label>
                    </labels>
                <created>Wed, 22 Jan 2014 16:46:50 +0000</created>
                <updated>Wed, 5 Mar 2014 03:07:08 +0000</updated>
                            <resolved>Wed, 5 Mar 2014 03:07:08 +0000</resolved>
                                    <version>2.12.0</version>
                                    <fixVersion>2.12.4</fixVersion>
                    <fixVersion>2.13.0</fixVersion>
                                    <component>camel-cxf</component>
                    <component>camel-jackson</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13878828" author="dvanbale" created="Wed, 22 Jan 2014 16:53:50 +0000"  >&lt;p&gt;Reproducer project, contains a camel route project (camel-blueprint-jackson), a project with shared class (model), and two additional REST services to be called by the camel route (service2 and service3).&lt;/p&gt;</comment>
                            <comment id="13879150" author="dvanbale" created="Wed, 22 Jan 2014 20:33:44 +0000"  >&lt;p&gt;Fixed logging issue in service3&lt;/p&gt;</comment>
                            <comment id="13879196" author="dvanbale" created="Wed, 22 Jan 2014 21:20:14 +0000"  >&lt;p&gt;Update:&lt;/p&gt;

&lt;p&gt;Looks like, on the first invocation, all three services are called and the NPE occurs when the entry-point service is sending its response. Upon subsequent invocations, there is an immediate NPE during invocation of the entry-point service.&lt;/p&gt;</comment>
                            <comment id="13880254" author="dvanbale" created="Thu, 23 Jan 2014 19:21:41 +0000"  >&lt;p&gt;A workaround for this is to wire your own ObjectMapper and use it to instantiate the JacksonJsonProvider. This way, the provider won&apos;t attempt to store the mapper on the thread local context.&lt;/p&gt;

&lt;p&gt;	&amp;lt;bean id=&quot;jacksonMapper&quot; class=&quot;org.codehaus.jackson.map.ObjectMapper&quot; /&amp;gt;&lt;br/&gt;
	&amp;lt;bean id=&quot;jsonProvider&quot; class=&quot;org.codehaus.jackson.jaxrs.JacksonJsonProvider&quot;&amp;gt;&lt;br/&gt;
		&amp;lt;argument ref=&quot;jacksonMapper&quot;/&amp;gt;&lt;br/&gt;
	&amp;lt;/bean&amp;gt;&lt;/p&gt;
</comment>
                            <comment id="13882241" author="njiang" created="Sun, 26 Jan 2014 09:12:54 +0000"  >&lt;p&gt;Hi David,&lt;/p&gt;

&lt;p&gt;You user case is more complicated than the other CXFRS application, I suggest you use camel-jetty and camel-http to implement the REST proxy server with more control on you side.&lt;/p&gt;

&lt;p&gt;In the code of CXF, the rs server clean the proxy thread local context when it suspend the invocation.  But in your rs client side it may still need to access the thread local information when it get the response message.&lt;/p&gt;

&lt;p&gt;Can you change the enter point of camel route in camel-blueprint-jackson like this?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
...
  &amp;lt;route id=&lt;span class=&quot;code-quote&quot;&gt;&quot;twBusinessRoute&quot;&lt;/span&gt;&amp;gt;
                        &amp;lt;from uri=&lt;span class=&quot;code-quote&quot;&gt;&quot;cxfrs:bean:Service1?Synchronous=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&quot;&lt;/span&gt; /&amp;gt;
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The Synchronous option can make sure the request and response are handled in the same thread.&lt;/p&gt;

&lt;p&gt;Regards,&lt;/p&gt;

&lt;p&gt;Willem&lt;/p&gt;</comment>
                            <comment id="13890890" author="sergey_beryozkin" created="Tue, 4 Feb 2014 17:36:08 +0000"  >&lt;p&gt;Willem, it is nothing to do with CXF clearing the thread-local proxies on the invocation thread exiting for whatever reasons.&lt;/p&gt;

&lt;p&gt;The reason for this NPE is that we have a single Jackson JAX-RS provider shared between multiple CXFRS components - this is in itself is fine, we have a test where a single Jackson provider instance is shared between few endpoints. The problem is the components in the route have different CXF bus instances =&amp;gt; the server endpoint injects a thread local proxy into Jackson while the client being injected with a different bus - another one which overrides the server-injected one, therefore the server thinking it has a proper local proxy injects the current value into it bur the provider points to another thread local proxy.&lt;/p&gt;

&lt;p&gt;It is a bit of a mess unfortunately.&lt;/p&gt;

&lt;p&gt;I&apos;ve managed to get past the NPE but updating it like this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;bean class=&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.cxf.bus.blueprint.BlueprintBus&quot;&lt;/span&gt; id=&lt;span class=&quot;code-quote&quot;&gt;&quot;jaxrs&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;property name=&lt;span class=&quot;code-quote&quot;&gt;&quot;id&quot;&lt;/span&gt; value=&lt;span class=&quot;code-quote&quot;&gt;&quot;jaxrs&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/bean&amp;gt;&lt;/span&gt;

	&amp;lt;cxf:rsServer id=&lt;span class=&quot;code-quote&quot;&gt;&quot;Service1&quot;&lt;/span&gt; address=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://localhost:8182&quot;&lt;/span&gt;
		serviceClass=&lt;span class=&quot;code-quote&quot;&gt;&quot;com.mycompany.camel.blueprint.jackson.ServiceOne&quot;&lt;/span&gt;
		loggingFeatureEnabled=&lt;span class=&quot;code-quote&quot;&gt;&quot;true&quot;&lt;/span&gt;
                bus=&lt;span class=&quot;code-quote&quot;&gt;&quot;jaxrs&quot;&lt;/span&gt;&amp;gt;
		&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;cxf:providers&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;ref component-id=&lt;span class=&quot;code-quote&quot;&gt;&quot;jsonProvider&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
		&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/cxf:providers&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/cxf:rsServer&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&lt;span class=&quot;code-comment&quot;&gt;&amp;lt;!-- and also injecting the bus references for clients --&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and then adding a bus ref&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;

&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;from uri=&lt;span class=&quot;code-quote&quot;&gt;&quot;cxfrs:bean:Service1?bus=#jaxrs&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;

&lt;span class=&quot;code-tag&quot;&gt;&lt;span class=&quot;code-comment&quot;&gt;&amp;lt;!-- same for to: --&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Another work-around is to register a unique Jackson provider per the component, but that is not cool.&lt;/p&gt;

&lt;p&gt;This got me past NPE but I hit:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Caused by: org.codehaus.jackson.map.JsonMappingException: No serializer found for class org.apache.cxf.helpers.LoadingByteArrayOutputStream$1 and no properties discovered to create BeanSerializer (to avoid exception, disable SerializationConfig.Feature.FAIL_ON_EMPTY_BEANS) )
	at org.codehaus.jackson.map.ser.impl.UnknownSerializer.failForEmpty(UnknownSerializer.java:52)[197:jackson-mapper-asl:1.9.13]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I think we are actually hitting the problem to do with Jackson blindly accepting all types including InputStream, I&apos;ll play a bit more with it; CXF should also be enhanced to allow the thread local contexts shared between different buses&lt;/p&gt;</comment>
                            <comment id="13894699" author="sergey_beryozkin" created="Fri, 7 Feb 2014 16:36:16 +0000"  >&lt;p&gt;David, Willem, see the attached files, it all works nicely if we use a custom bus (will not be needed starting from CXF 2.7.10) and drop Jackson: it accepts InputStream and then chokes on it (this won&apos;t be a problem with CXF 3.0.0, with JAX-RS 2.0 requiring that the default providers take care of types like InputStream, etc). &lt;/p&gt;</comment>
                            <comment id="13894704" author="sergey_beryozkin" created="Fri, 7 Feb 2014 16:41:20 +0000"  >&lt;p&gt;Willem or David (if you are still interested) - can you please confirm independently it will work with CXF 2.7.10 when it is out ? if you will, please use the attached files first, next - remove a reference to the custom bus - this should not be needed with CXF 2.7.10. And as I said, with CXF 3.0.0 the original route definition is expected to work as is, i.e, no custom bus and jettison references&lt;/p&gt;</comment>
                            <comment id="13895447" author="njiang" created="Sat, 8 Feb 2014 06:40:21 +0000"  >&lt;p&gt;Hi Sergey,&lt;/p&gt;

&lt;p&gt;Thanks for digging this issue. If you did some change in the CXF side, could you please add a comment with the CXF JIRA?&lt;br/&gt;
It could be easy for the user to follow the fix of CXF.&lt;/p&gt;

&lt;p&gt;Regards,&lt;/p&gt;

&lt;p&gt;Willem&lt;/p&gt;</comment>
                            <comment id="13895968" author="sergey_beryozkin" created="Sun, 9 Feb 2014 18:32:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-5542&quot; title=&quot;JAX-RS providers shared between endpoints or clients with different buses lose injected TL proxies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-5542&quot;&gt;&lt;del&gt;CXF-5542&lt;/del&gt;&lt;/a&gt; fix will let users avoid introducing shared custom CXF buses as shown in the attached files &lt;/p&gt;</comment>
                            <comment id="13896177" author="njiang" created="Mon, 10 Feb 2014 02:54:32 +0000"  >&lt;p&gt;Hi Sergey,&lt;/p&gt;

&lt;p&gt;Thanks for the link. &lt;br/&gt;
It looks there is an bus injection issue in camel-cxfrs blueprint parser, I will dig the code to see if I can do some work on the camel-cxf side to make sure the bus are injected rightly.&lt;/p&gt;

&lt;p&gt;Regards,&lt;/p&gt;

&lt;p&gt;Willem&lt;/p&gt;</comment>
                            <comment id="13896412" author="sergey_beryozkin" created="Mon, 10 Feb 2014 11:31:10 +0000"  >&lt;p&gt;Hi Willem, I see you&apos;ve added the tests validating the bus injection works , thanks.&lt;/p&gt;

&lt;p&gt;I&apos;ve created &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-5551&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/CXF-5551&lt;/a&gt; &lt;/p&gt;

&lt;p&gt;but it is to do with the fact that creating a custom bus with a name other than &quot;cxf&quot; in the context via the CXF Blueprint namespace handler does not really work; I guess &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-5551&quot; title=&quot;Creating a custom bus in Blueprint does not seem to work&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-5551&quot;&gt;&lt;del&gt;CXF-5551&lt;/del&gt;&lt;/a&gt; is a pure CXF issue, unless you see this being actually a CXF RS Blueprint parser issue, I&apos;ve looked at the Camel code, it seems OK to me, please double check.&lt;/p&gt;

&lt;p&gt;Cheers, Sergey&lt;/p&gt;
</comment>
                            <comment id="13897123" author="sergey_beryozkin" created="Mon, 10 Feb 2014 22:25:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-5551&quot; title=&quot;Creating a custom bus in Blueprint does not seem to work&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-5551&quot;&gt;&lt;del&gt;CXF-5551&lt;/del&gt;&lt;/a&gt; is a non issue; updated jaxrs-beans.xml&lt;/p&gt;</comment>
                            <comment id="13897539" author="njiang" created="Tue, 11 Feb 2014 04:57:52 +0000"  >&lt;p&gt;Hi Sergey,&lt;/p&gt;

&lt;p&gt;I just did a quick test with karaf 2.3.3, camel-2.13-SNAPSHOT and CXF 2.7.10, the NPE is gone.&lt;/p&gt;

&lt;p&gt;Regards,&lt;/p&gt;

&lt;p&gt;Willem&lt;/p&gt;</comment>
                            <comment id="13897680" author="sergey_beryozkin" created="Tue, 11 Feb 2014 09:46:10 +0000"  >&lt;p&gt;Hi Willem, thanks for the help on your end; I guess this issue becomes resolved then ? The only other thing that is worth testing, may be independently, is that the original route as defined by David works (with Jackson &amp;amp; with no custom bus) - with CXF 3.0.0-miltesone2, when it&apos;s out, but it can be done later &lt;br/&gt;
Cheers, Sergey&lt;/p&gt;</comment>
                            <comment id="13897951" author="dvanbale" created="Tue, 11 Feb 2014 15:58:17 +0000"  >&lt;p&gt;Thanks for your work on this. I am still interested in testing the original route. I&apos;ll try to do so when I get a chance, but not sure when I&apos;ll get to that since I&apos;m not working with Camel at the moment.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12693331">CXF-5542</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12624421" name="CAMEL-7147.zip" size="2404329" author="dvanbale" created="Wed, 22 Jan 2014 20:33:44 +0000"/>
                            <attachment id="12627647" name="blueprint.xml" size="1323" author="sergey_beryozkin" created="Fri, 7 Feb 2014 16:36:16 +0000"/>
                            <attachment id="12628087" name="jaxrs-beans.xml" size="2299" author="sergey_beryozkin" created="Mon, 10 Feb 2014 22:25:10 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 26 Jan 2014 09:12:54 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369262</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 42 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1rn8n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369567</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>