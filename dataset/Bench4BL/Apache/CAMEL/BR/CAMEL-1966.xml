<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sat Dec 03 03:46:06 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/CAMEL-1966/CAMEL-1966.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[CAMEL-1966] CamelNamespaceHandler is not thread safe</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-1966</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;Here is the mail thread&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; which discusses about it.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://www.nabble.com/Occasional-CamelNamespaceHandler-exception-when-running-with-Spring-DM-1.2-td25195171.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.nabble.com/Occasional-CamelNamespaceHandler-exception-when-running-with-Spring-DM-1.2-td25195171.html&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12487054">CAMEL-1966</key>
            <summary>CamelNamespaceHandler is not thread safe</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="njiang">Willem Jiang</assignee>
                                    <reporter username="njiang">Willem Jiang</reporter>
                        <labels>
                    </labels>
                <created>Tue, 1 Sep 2009 04:55:28 +0000</created>
                <updated>Thu, 3 Jun 2010 07:24:06 +0000</updated>
                            <resolved>Wed, 30 Dec 2009 02:24:33 +0000</resolved>
                                    <version>1.4.0</version>
                    <version>1.5.0</version>
                    <version>1.6.0</version>
                    <version>2.0-M1</version>
                    <version>1.6.1</version>
                    <version>2.0-M2</version>
                    <version>2.0-M3</version>
                    <version>2.0.0</version>
                                    <fixVersion>1.6.2</fixVersion>
                    <fixVersion>2.1.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12953287" author="cmoulliard" created="Fri, 4 Sep 2009 07:49:49 +0000"  >&lt;p&gt;Just to inform you that this error appears also when Camel 2.1-SNAPSHOT is used within Apache Karaf Felix. I have this error since around 3-4 days (when switching from Camel 2.0 to camel 2.1-SNAPSHOT. That was not the case before. I must stop/start my camel bundle to be able to work with it.&lt;/p&gt;

&lt;p&gt;1) At the karaf launch, the following error is generated :&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
karaf@root:/&amp;gt; Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;SpringOsgiExtenderThread-8&quot;&lt;/span&gt; java.lang.IllegalStateException: BeanFactory not initialized or already closed - call &apos;
refresh&apos; before accessing beans via the ApplicationContext
os      at org.springframework.context.support.AbstractRefreshableApplicationContext.getBeanFactory(AbstractRefreshableApplicationContext.java:153)
        at org.springframework.osgi.extender.internal.dependencies.startup.DependencyWaiterApplicationContextExecutor.close(DependencyWaiterApplicatio
nContextExecutor.java:345)
        at org.springframework.osgi.extender.internal.dependencies.startup.DependencyWaiterApplicationContextExecutor.fail(DependencyWaiterApplication
ContextExecutor.java:401)
        at org.springframework.osgi.extender.internal.dependencies.startup.DependencyWaiterApplicationContextExecutor.stageOne(DependencyWaiterApplica
tionContextExecutor.java:287)
        at org.springframework.osgi.extender.internal.dependencies.startup.DependencyWaiterApplicationContextExecutor.refresh(DependencyWaiterApplicat
ionContextExecutor.java:175)
        at org.springframework.osgi.context.support.AbstractDelegatedExecutionApplicationContext.refresh(AbstractDelegatedExecutionApplicationContext.
java:175)
        at org.springframework.osgi.extender.internal.activator.ContextLoaderListener$2.run(ContextLoaderListener.java:718)
        at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:595)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;2) My camel context is not started&lt;br/&gt;
3) To start it, I must stop my camel bundle. During the stop, here is the error generated :&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
09:46:43,499 | ERROR | Timer-3          | DelegatingTimerTask              | duling.timer.DelegatingTimerTask   69 | Unexpected exception thrown from &lt;span class=&quot;code-object&quot;&gt;Runnable&lt;/span&gt;: org.springframework.osgi.extender.internal.util.concurrent.RunnableTimedExecution$MonitoredRunnable@15b4804
java.lang.IllegalStateException: BeanFactory not initialized or already closed - call &apos;refresh&apos; before accessing beans via the ApplicationContext
	at org.springframework.context.support.AbstractRefreshableApplicationContext.getBeanFactory(AbstractRefreshableApplicationContext.java:153)
	at org.springframework.osgi.extender.internal.dependencies.startup.DependencyWaiterApplicationContextExecutor.close(DependencyWaiterApplicationContextExecutor.java:345)
	at org.springframework.osgi.context.support.AbstractDelegatedExecutionApplicationContext.doClose(AbstractDelegatedExecutionApplicationContext.java:236)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:794)
	at org.springframework.osgi.extender.internal.activator.ContextLoaderListener$3.run(ContextLoaderListener.java:807)
	at org.springframework.osgi.extender.internal.util.concurrent.RunnableTimedExecution$MonitoredRunnable.run(RunnableTimedExecution.java:60)
	at org.springframework.scheduling.timer.DelegatingTimerTask.run(DelegatingTimerTask.java:66)
	at java.util.TimerThread.mainLoop(Timer.java:512)
	at java.util.TimerThread.run(Timer.java:462)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I see also sometimes this warning in the log&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
08:59:51,718 | WARN  | ExtenderThread-8 | XmlBeanDefinitionReader          | k.util.xml.SimpleSaxErrorHandler   47 | Ignored XML validation warning
org.xml.sax.SAXParseException: schema_reference.4: Failed to read schema document &apos;http:&lt;span class=&quot;code-comment&quot;&gt;//camel.apache.org/schema/spring/camel-spring.xsd&apos;, because 1) could not find the document; 2) the document could not be read; 3) the root element of the document is not &amp;lt;xsd:schema&amp;gt;.
&lt;/span&gt;	at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:231)
...
Caused by: org.xml.sax.SAXParseException: cvc-complex-type.2.4.c: The matching wildcard is strict, but no declaration can be found &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; element &apos;camel:camelContext&apos;.
	at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:231)
	at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.error(ErrorHandlerWrapper.java:167)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12945617" author="njiang" created="Fri, 4 Sep 2009 10:34:56 +0000"  >&lt;p&gt;trunk&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?rev=809874&amp;amp;view=rev&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc?rev=809874&amp;amp;view=rev&lt;/a&gt;&lt;br/&gt;
camel 1.x&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?rev=809931&amp;amp;view=rev&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc?rev=809931&amp;amp;view=rev&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12945616" author="njiang" created="Fri, 4 Sep 2009 10:38:30 +0000"  >&lt;p&gt;Talked with Charles,&lt;br/&gt;
 The exceptions which he said are related to the bundle loading sequences.&lt;br/&gt;
 If his application bundle is loaded before the camel-core and camel-spring, the exceptions will be thrown.&lt;/p&gt;

</comment>
                            <comment id="12953423" author="roman.ivanov" created="Thu, 24 Dec 2009 14:58:33 +0000"  >&lt;p&gt;Hi, currently I&apos;m upgrading to Camel version 2.1.0 from 2.0.0. And this issue reproduces again. The bundle order is explicitly defined with startup properties, though application bundles are started later then camel. We&apos;re having ServiceMix 4 with Karaf 1.0.4.&lt;/p&gt;

&lt;p&gt;Here are logs:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
org.xml.sax.SAXParseException: schema_reference.4: Failed to read schema document &apos;http:&lt;span class=&quot;code-comment&quot;&gt;//camel.apache.org/schema/spring/camel-spring.xsd&apos;, because 1) could not find the document; 2) the document could not be read; 3) the root element of the document is not &amp;lt;xsd:schema&amp;gt;.
&lt;/span&gt;Caused by: org.xml.sax.SAXParseException: cvc-complex-type.2.4.c: The matching wildcard is strict, but no declaration can be found &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; element &apos;camelContext&apos;.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</comment>
                            <comment id="12953542" author="davsclaus" created="Mon, 28 Dec 2009 14:30:41 +0000"  >&lt;p&gt;Roman, ServiceMix is undergoing many changes recently and I guess it should be better at OSGi stuff on startup.&lt;/p&gt;

&lt;p&gt;So what version do you exactly use for SMX and Karaf?&lt;br/&gt;
And if possible try with a newer version.&lt;/p&gt;</comment>
                            <comment id="12954092" author="njiang" created="Tue, 29 Dec 2009 02:28:41 +0000"  >&lt;p&gt;Hi Roman&lt;/p&gt;

&lt;p&gt;There are something changed in Camel 2.1.0, we merged the camel-osgi and camel-spring to avoid the some issue of&lt;br/&gt;
Please update the org.apache.felix.karaf.features.cfg&lt;br/&gt;
 by replacing the camel-osgi and camel-spring with camel-spring-osgi and try again.&lt;/p&gt;

</comment>
                            <comment id="12954129" author="roman.ivanov" created="Tue, 29 Dec 2009 14:35:13 +0000"  >&lt;p&gt;Hi Claus, Willem&lt;/p&gt;

&lt;p&gt;Upgrade for newer SMX version is good idea for sure, but it might be a separate issue.&lt;br/&gt;
Although, I tried to use camel-spring-osgi instead of 2 separate libs. It didn&apos;t made real effect.&lt;br/&gt;
But, I followed the idea of &lt;a href=&quot;http://issues.apache.org/activemq/browse/CAMEL-1730&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;this issue &lt;/a&gt;.&lt;br/&gt;
And made camel-spring bundle start up order earlier than camel-osgi. And it solved the issue.&lt;/p&gt;</comment>
                            <comment id="12953959" author="njiang" created="Wed, 30 Dec 2009 02:22:54 +0000"  >&lt;p&gt;Hi Roman,&lt;/p&gt;

&lt;p&gt;Which version of Servicemix are you using ?&lt;br/&gt;
There is an camel feature (which includes camel-core, camel-spring and camel-osgi) in the org.apache.felix.karaf.features.cfg, you need to replace it with camel-core and camel-spring-osgi.&lt;br/&gt;
Please make sure there is no camel-spring, camel-spring-osgi, camel-osgi installed at the same time.&lt;/p&gt;
</comment>
                            <comment id="12953958" author="njiang" created="Wed, 30 Dec 2009 02:24:33 +0000"  >&lt;p&gt;The reopened reason is not related to the JIRA.&lt;/p&gt;</comment>
                            <comment id="12956465" author="davsclaus" created="Thu, 3 Jun 2010 07:24:06 +0000"  >&lt;p&gt;Closing old resolved issues&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 4 Sep 2009 07:49:49 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>76674</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 27 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i01lo7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7280</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>