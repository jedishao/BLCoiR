<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sat Dec 03 03:21:58 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/CAMEL-8585/CAMEL-8585.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[CAMEL-8585] The lazy load option doesn&apos;t unlock the file</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-8585</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;Hi, &lt;br/&gt;
After to upgrade camel from 2.14.1 to 2.15.0, a org.apache.camel.component.file.GenericFileOperationFailedException Exception is thrown when camel move/delete the file at the end of process.&lt;br/&gt;
After some tests, I&apos;ve notice that the issue appear when the lazy load option is enabled. I think, the reader or parser used by the component Apache CSV 1.0 aren&apos;t closed at the end of file.&lt;/p&gt;

&lt;p&gt;My stacktrace: &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
14:30:48,960 INFO  [stdout] (Camel (Socle-CamelContext) thread #3 - file:&lt;span class=&quot;code-comment&quot;&gt;//C:/temp/&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt;/source) org.apache.camel.component.file.GenericFileOperationFailedException: Error renaming file from C:\temp\&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt;\source\file_20150304162756890.csv to C:\temp\&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt;\source\error\file_20150304162756890_20150401143044944.csv
&lt;/span&gt;
14:30:48,964 INFO  [stdout] (Camel (Socle-CamelContext) thread #3 - file:&lt;span class=&quot;code-comment&quot;&gt;//C:/temp/&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt;/source) 	at org.apache.camel.component.file.FileOperations.renameFile(FileOperations.java:81)
&lt;/span&gt;
14:30:48,966 INFO  [stdout] (Camel (Socle-CamelContext) thread #3 - file:&lt;span class=&quot;code-comment&quot;&gt;//C:/temp/&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt;/source) 	at org.apache.camel.component.file.strategy.GenericFileProcessStrategySupport.renameFile(GenericFileProcessStrategySupport.java:113)
&lt;/span&gt;
14:30:48,973 INFO  [stdout] (Camel (Socle-CamelContext) thread #3 - file:&lt;span class=&quot;code-comment&quot;&gt;//C:/temp/&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt;/source) 	at org.apache.camel.component.file.strategy.GenericFileRenameProcessStrategy.rollback(GenericFileRenameProcessStrategy.java:66)
&lt;/span&gt;
14:30:48,976 INFO  [stdout] (Camel (Socle-CamelContext) thread #3 - file:&lt;span class=&quot;code-comment&quot;&gt;//C:/temp/&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt;/source) 	at org.apache.camel.component.file.GenericFileOnCompletion.processStrategyRollback(GenericFileOnCompletion.java:151)
&lt;/span&gt;
14:30:48,977 INFO  [stdout] (Camel (Socle-CamelContext) thread #3 - file:&lt;span class=&quot;code-comment&quot;&gt;//C:/temp/&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt;/source) 	at org.apache.camel.component.file.GenericFileOnCompletion.onCompletion(GenericFileOnCompletion.java:86)
&lt;/span&gt;
14:30:48,979 INFO  [stdout] (Camel (Socle-CamelContext) thread #3 - file:&lt;span class=&quot;code-comment&quot;&gt;//C:/temp/&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt;/source) 	at org.apache.camel.component.file.GenericFileOnCompletion.onFailure(GenericFileOnCompletion.java:58)
&lt;/span&gt;
14:30:48,980 INFO  [stdout] (Camel (Socle-CamelContext) thread #3 - file:&lt;span class=&quot;code-comment&quot;&gt;//C:/temp/&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt;/source) 	at org.apache.camel.util.UnitOfWorkHelper.doneSynchronizations(UnitOfWorkHelper.java:101)
&lt;/span&gt;
14:30:48,981 INFO  [stdout] (Camel (Socle-CamelContext) thread #3 - file:&lt;span class=&quot;code-comment&quot;&gt;//C:/temp/&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt;/source) 	at org.apache.camel.impl.DefaultUnitOfWork.done(DefaultUnitOfWork.java:229)
&lt;/span&gt;
14:30:48,982 INFO  [stdout] (Camel (Socle-CamelContext) thread #3 - file:&lt;span class=&quot;code-comment&quot;&gt;//C:/temp/&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt;/source) 	at org.apache.camel.util.UnitOfWorkHelper.doneUow(UnitOfWorkHelper.java:65)
&lt;/span&gt;
14:30:48,983 INFO  [stdout] (Camel (Socle-CamelContext) thread #3 - file:&lt;span class=&quot;code-comment&quot;&gt;//C:/temp/&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt;/source) 	at org.apache.camel.processor.CamelInternalProcessor$UnitOfWorkProcessorAdvice.after(CamelInternalProcessor.java:650)
&lt;/span&gt;
14:30:48,984 INFO  [stdout] (Camel (Socle-CamelContext) thread #3 - file:&lt;span class=&quot;code-comment&quot;&gt;//C:/temp/&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt;/source) 	at org.apache.camel.processor.CamelInternalProcessor$UnitOfWorkProcessorAdvice.after(CamelInternalProcessor.java:618)
&lt;/span&gt;
14:30:48,986 INFO  [stdout] (Camel (Socle-CamelContext) thread #3 - file:&lt;span class=&quot;code-comment&quot;&gt;//C:/temp/&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt;/source) 	at org.apache.camel.processor.CamelInternalProcessor$InternalCallback.done(CamelInternalProcessor.java:240)
&lt;/span&gt;
14:30:48,987 INFO  [stdout] (Camel (Socle-CamelContext) thread #3 - file:&lt;span class=&quot;code-comment&quot;&gt;//C:/temp/&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt;/source) 	at org.apache.camel.impl.MDCUnitOfWork$MDCCallback.done(MDCUnitOfWork.java:231)
&lt;/span&gt;
14:30:48,988 INFO  [stdout] (Camel (Socle-CamelContext) thread #3 - file:&lt;span class=&quot;code-comment&quot;&gt;//C:/temp/&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt;/source) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:106)
&lt;/span&gt;
14:30:48,989 INFO  [stdout] (Camel (Socle-CamelContext) thread #3 - file:&lt;span class=&quot;code-comment&quot;&gt;//C:/temp/&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt;/source) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:191)
&lt;/span&gt;
14:30:48,991 INFO  [stdout] (Camel (Socle-CamelContext) thread #3 - file:&lt;span class=&quot;code-comment&quot;&gt;//C:/temp/&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt;/source) 	at org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:433)
&lt;/span&gt;
14:30:48,992 INFO  [stdout] (Camel (Socle-CamelContext) thread #3 - file:&lt;span class=&quot;code-comment&quot;&gt;//C:/temp/&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt;/source) 	at org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:211)
&lt;/span&gt;
14:30:48,993 INFO  [stdout] (Camel (Socle-CamelContext) thread #3 - file:&lt;span class=&quot;code-comment&quot;&gt;//C:/temp/&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt;/source) 	at org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:175)
&lt;/span&gt;
14:30:48,994 INFO  [stdout] (Camel (Socle-CamelContext) thread #3 - file:&lt;span class=&quot;code-comment&quot;&gt;//C:/temp/&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt;/source) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:174)
&lt;/span&gt;
14:30:48,995 INFO  [stdout] (Camel (Socle-CamelContext) thread #3 - file:&lt;span class=&quot;code-comment&quot;&gt;//C:/temp/&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt;/source) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:101)
&lt;/span&gt;
14:30:48,997 INFO  [stdout] (Camel (Socle-CamelContext) thread #3 - file:&lt;span class=&quot;code-comment&quot;&gt;//C:/temp/&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt;/source) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
&lt;/span&gt;
14:30:48,998 INFO  [stdout] (Camel (Socle-CamelContext) thread #3 - file:&lt;span class=&quot;code-comment&quot;&gt;//C:/temp/&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt;/source) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:304)
&lt;/span&gt;
14:30:48,999 INFO  [stdout] (Camel (Socle-CamelContext) thread #3 - file:&lt;span class=&quot;code-comment&quot;&gt;//C:/temp/&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt;/source) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:178)
&lt;/span&gt;
14:30:49,000 INFO  [stdout] (Camel (Socle-CamelContext) thread #3 - file:&lt;span class=&quot;code-comment&quot;&gt;//C:/temp/&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt;/source) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
&lt;/span&gt;
14:30:49,001 INFO  [stdout] (Camel (Socle-CamelContext) thread #3 - file:&lt;span class=&quot;code-comment&quot;&gt;//C:/temp/&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt;/source) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
&lt;/span&gt;
14:30:49,002 INFO  [stdout] (Camel (Socle-CamelContext) thread #3 - file:&lt;span class=&quot;code-comment&quot;&gt;//C:/temp/&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt;/source) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
&lt;/span&gt;
14:30:49,004 INFO  [stdout] (Camel (Socle-CamelContext) thread #3 - file:&lt;span class=&quot;code-comment&quot;&gt;//C:/temp/&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt;/source) 	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)
&lt;/span&gt;
14:30:49,005 INFO  [stdout] (Camel (Socle-CamelContext) thread #3 - file:&lt;span class=&quot;code-comment&quot;&gt;//C:/temp/&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt;/source) Caused by: java.io.IOException: Renaming file from &apos;C:\temp\&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt;\source\file_20150304162756890.csv&apos; to &apos;C:\temp\&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt;\source\error\file_20150304162756890_20150401143044944.csv&apos; failed: Cannot delete file &apos;C:\temp\&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt;\source\file_20150304162756890.csv&apos; after copy succeeded
&lt;/span&gt;
14:30:49,008 INFO  [stdout] (Camel (Socle-CamelContext) thread #3 - file:&lt;span class=&quot;code-comment&quot;&gt;//C:/temp/&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt;/source) 	at org.apache.camel.util.FileUtil.renameFileUsingCopy(FileUtil.java:471)
&lt;/span&gt;
14:30:49,010 INFO  [stdout] (Camel (Socle-CamelContext) thread #3 - file:&lt;span class=&quot;code-comment&quot;&gt;//C:/temp/&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt;/source) 	at org.apache.camel.util.FileUtil.renameFile(FileUtil.java:443)
&lt;/span&gt;
14:30:49,012 INFO  [stdout] (Camel (Socle-CamelContext) thread #3 - file:&lt;span class=&quot;code-comment&quot;&gt;//C:/temp/&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt;/source) 	at org.apache.camel.component.file.FileOperations.renameFile(FileOperations.java:78)
&lt;/span&gt;
14:30:49,013 INFO  [stdout] (Camel (Socle-CamelContext) thread #3 - file:&lt;span class=&quot;code-comment&quot;&gt;//C:/temp/&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt;/source) 	... 26 more&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12787329">CAMEL-8585</key>
            <summary>The lazy load option doesn&apos;t unlock the file</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="4ntoin3">Antoine Esnault</reporter>
                        <labels>
                    </labels>
                <created>Wed, 1 Apr 2015 13:03:19 +0000</created>
                <updated>Thu, 2 Apr 2015 08:42:55 +0000</updated>
                            <resolved>Thu, 2 Apr 2015 08:42:55 +0000</resolved>
                                    <version>2.15.0</version>
                                    <fixVersion>2.15.2</fixVersion>
                    <fixVersion>2.16.0</fixVersion>
                                    <component>camel-csv</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="14392362" author="davsclaus" created="Thu, 2 Apr 2015 08:18:27 +0000"  >&lt;p&gt;This only affects windows users.&lt;/p&gt;</comment>
                            <comment id="14392383" author="davsclaus" created="Thu, 2 Apr 2015 08:42:55 +0000"  >&lt;p&gt;Thanks for reporting.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 2 Apr 2015 08:18:27 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 35 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i27n4v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>