<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sat Dec 03 02:32:24 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/CAMEL-7451/CAMEL-7451.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[CAMEL-7451] FTP consumer sometimes throws NullPointerException</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-7451</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;I have an exception from a ftp consumer only for few files.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;It happens on few files (2 or 3). Remote directory contains many files&lt;br/&gt;
(many thousand)&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;These few files have the same ownership and permissions of the others&lt;br/&gt;
and are not empty&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;I stopped the application that create the files, to avoid any possible&lt;br/&gt;
lock (anyway, I can modify them without problems)&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;I tried to copy and rename the files, removing the old one, (to create&lt;br/&gt;
a completely new one) without success&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Looking at the source code in&lt;br/&gt;
FtpChangedExclusiveReadLockStrategy.java, the error happens getting the&lt;br/&gt;
timestamp of the file:
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (FTPFile f : files) {
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (f.getName().equals(file.getFileNameOnly())) {
        newLastModified = f.getTimestamp().getTimeInMillis();
        newLength = f.getSize();
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Nothing useful in the logs of the ftp server&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Follow a trace log and the exception regarding one of those files:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2014-05-19 16:21:32,298 TRACE FtpChangedExclusiveReadLockStrategy -
Waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; exclusive read lock to file:
RemoteFile[/dwrg1/moved/DWRG1_2014-03-30T01h30Z.xml]
2014-05-19 16:21:32,298 TRACE FtpChangedExclusiveReadLockStrategy -
Waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; exclusive read lock to file:
RemoteFile[/dwrg1/moved/DWRG1_2014-03-30T01h30Z.xml]
2014-05-19 16:21:32,298 TRACE FtpChangedExclusiveReadLockStrategy -
Waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; exclusive read lock to file:
RemoteFile[/dwrg1/moved/DWRG1_2014-03-30T01h30Z.xml]
2014-05-19 16:21:32,299 TRACE FtpChangedExclusiveReadLockStrategy -
Using fast exists to update file information &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;
RemoteFile[/dwrg1/moved/DWRG1_2014-03-30T01h30Z.xml]
2014-05-19 16:21:32,299 TRACE FtpChangedExclusiveReadLockStrategy -
Using fast exists to update file information &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;
RemoteFile[/dwrg1/moved/DWRG1_2014-03-30T01h30Z.xml]
2014-05-19 16:21:32,640 TRACE FtpChangedExclusiveReadLockStrategy - List
files /dwrg1/moved/DWRG1_2014-03-30T01h30Z.xml found 1 files
2014-05-19 16:21:32,640 TRACE FtpChangedExclusiveReadLockStrategy - List
files /dwrg1/moved/DWRG1_2014-03-30T01h30Z.xml found 1 files
2014-05-19 16:21:32,650 WARN  FtpConsumer -
Endpoint[ftp:&lt;span class=&quot;code-comment&quot;&gt;//xxxx@yy.yy.yy.yy//dwrg1/moved?delay=60000&amp;amp;disconnect=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;amp;fastExistsCheck=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;amp;idempotent=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;amp;idempotentKey=%24%7Bfile%3Aname%7D-%24%7Bfile%3Amodified%7D-%24%7Bfile%3Asize%7D&amp;amp;idempotentRepository=%23fileStore&amp;amp;include=DWRG1.*%5C.xml&amp;amp;maxMessagesPerPoll=10&amp;amp;noop=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;amp;password=xxxxxx&amp;amp;readLock=changed&amp;amp;sortBy=file%3Amodified] cannot begin processing file: RemoteFile[/dwrg1/moved/DWRG1_2014-03-30T01h30Z.xml] due to: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;. Caused by: [java.lang.NullPointerException - &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;]
&lt;/span&gt;java.lang.NullPointerException
        at
org.apache.camel.component.file.remote.strategy.FtpChangedExclusiveReadLockStrategy.acquireExclusiveReadLock(FtpChangedExclusiveReadLockStrategy.java:83)
        at
org.apache.camel.component.file.strategy.GenericFileProcessStrategySupport.begin(GenericFileProcessStrategySupport.java:49)
        at
org.apache.camel.component.file.strategy.GenericFileRenameProcessStrategy.begin(GenericFileRenameProcessStrategy.java:35)
        at
org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:326)
        at
org.apache.camel.component.file.remote.RemoteFileConsumer.processExchange(RemoteFileConsumer.java:99)
        at
org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:201)
        at
org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:165)
        at
org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:187)
        at
org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:114)
        at java.util.concurrent.Executors
$RunnableAdapter.call(Executors.java:471)
        at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:304)
        at java.util.concurrent.ScheduledThreadPoolExecutor
$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:178)
        at java.util.concurrent.ScheduledThreadPoolExecutor
$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
        at
java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
        at java.util.concurrent.ThreadPoolExecutor
$Worker.run(ThreadPoolExecutor.java:615)
        at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;Camel 2.13.1&lt;br/&gt;
Oracle jdk 1.7.0_55&lt;br/&gt;
Debian GNU/Linux oldstable&lt;br/&gt;
Remote ftp server IIS on Windows 2000 server&lt;/p&gt;</environment>
        <key id="12715683">CAMEL-7451</key>
            <summary>FTP consumer sometimes throws NullPointerException</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="albertob">Alberto Brosich</reporter>
                        <labels>
                    </labels>
                <created>Wed, 21 May 2014 06:43:31 +0000</created>
                <updated>Fri, 23 May 2014 07:05:07 +0000</updated>
                            <resolved>Fri, 23 May 2014 07:05:07 +0000</resolved>
                                    <version>2.13.0</version>
                                    <fixVersion>2.12.4</fixVersion>
                    <fixVersion>2.13.2</fixVersion>
                    <fixVersion>2.14.0</fixVersion>
                                    <component>camel-ftp</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="14006936" author="davsclaus" created="Fri, 23 May 2014 07:05:07 +0000"  >&lt;p&gt;Fixed the potential NPE&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 23 May 2014 07:05:07 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>393968</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 28 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1vu27:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>394108</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>