<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sat Dec 03 04:32:50 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/CAMEL-1290/CAMEL-1290.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[CAMEL-1290] FTPConsumer - Error in Rename Strategy.</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-1290</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;Consuming from a FTP server using the following endpoint cause a StringIndexOutOfBoundsException when using the rename strategy.&lt;/p&gt;

&lt;p&gt;&amp;lt;endpoint id=&quot;candidateUrl&quot; uri=&quot;ftp://username@127.0.0.1?password=password&amp;amp;delete=true&amp;amp;binary=true&amp;amp;delay=10000&amp;amp;readLock=rename&quot;/&amp;gt;&lt;/p&gt;

&lt;p&gt;22 Jan 2009 09:36:59,501 ERROR [Thread: 1 org.apache.camel.component.file.remote.RemoteFileComponent&lt;br/&gt;
@8f7aa2] FtpConsumer.log(207) | String index out of range: -1&lt;br/&gt;
java.lang.StringIndexOutOfBoundsException: String index out of range: -1&lt;br/&gt;
        at java.lang.String.substring(String.java:1938)&lt;br/&gt;
        at org.apache.camel.component.file.remote.RemoteFile.getParent(RemoteFile.java:139)&lt;br/&gt;
        at org.apache.camel.component.file.remote.RemoteFile.changeFileName(RemoteFile.java:65)&lt;br/&gt;
        at org.apache.camel.component.file.remote.strategy.RemoteFileRenameExclusiveReadLockStrategy&lt;br/&gt;
.acquireExclusiveReadLock(RemoteFileRenameExclusiveReadLockStrategy.java:45)&lt;br/&gt;
        at org.apache.camel.component.file.remote.strategy.RemoteFileProcessStrategySupport.begin(Re&lt;br/&gt;
moteFileProcessStrategySupport.java:32)&lt;br/&gt;
        at org.apache.camel.component.file.remote.RemoteFileConsumer.processExchange(RemoteFileConsu&lt;br/&gt;
mer.java:131)&lt;br/&gt;
        at org.apache.camel.component.file.remote.RemoteFileConsumer.poll(RemoteFileConsumer.java:98&lt;br/&gt;
)&lt;br/&gt;
        at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:66)&lt;br/&gt;
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)&lt;br/&gt;
        at java.util.concurrent.FutureTask$Sync.innerRunAndReset(FutureTask.java:317)&lt;br/&gt;
        at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:150)&lt;br/&gt;
        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$101(Scheduled&lt;br/&gt;
ThreadPoolExecutor.java:98)&lt;br/&gt;
        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.runPeriodic(Schedule&lt;br/&gt;
dThreadPoolExecutor.java:181)&lt;br/&gt;
        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadP&lt;br/&gt;
oolExecutor.java:205)&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:619)&lt;/p&gt;


&lt;p&gt;A workaround is to add a folder in the url like the following&lt;br/&gt;
&amp;lt;endpoint id=&quot;candidateUrl&quot; uri=&quot;ftp://username@127.0.0.1//myFolder/?password=password&amp;amp;delete=true&amp;amp;binary=true&amp;amp;delay=10000&amp;amp;readLock=rename&quot;/&amp;gt;&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows XP&lt;/p&gt;</environment>
        <key id="12485823">CAMEL-1290</key>
            <summary>FTPConsumer - Error in Rename Strategy.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="watcher">Paddy Daly</reporter>
                        <labels>
                    </labels>
                <created>Thu, 22 Jan 2009 09:44:16 +0000</created>
                <updated>Fri, 31 Jul 2009 06:34:01 +0000</updated>
                            <resolved>Tue, 3 Feb 2009 06:12:42 +0000</resolved>
                                    <version>2.0.0</version>
                                    <fixVersion>2.0-M1</fixVersion>
                                    <component>camel-ftp</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1800">0.5h</timespent>
                                <comments>
                            <comment id="12950510" author="davsclaus" created="Fri, 23 Jan 2009 06:32:40 +0000"  >&lt;p&gt;Paddy thank for the bug report.&lt;/p&gt;

&lt;p&gt;We are in the works of a big refactor in trunk to allow the file based transports to be much more reuseable between types (a kind of VFS in Camel itself)&lt;br/&gt;
So I will refrain from committing to the trunk right now in the FTP/File component.&lt;/p&gt;

&lt;p&gt;We need to get this refactor done first, with help from Ramon Buckland that is working on this right now.&lt;/p&gt;
</comment>
                            <comment id="12950456" author="davsclaus" created="Fri, 23 Jan 2009 06:34:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-1241&quot; title=&quot;Add camel-commons-vfs component&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-1241&quot;&gt;&lt;del&gt;CAMEL-1241&lt;/del&gt;&lt;/a&gt; must be done before we commit to FTP/File as &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-1241&quot; title=&quot;Add camel-commons-vfs component&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-1241&quot;&gt;&lt;del&gt;CAMEL-1241&lt;/del&gt;&lt;/a&gt; is a big refactor and we would like to keep the trunk code aligned with Ramon who is working on &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-1241&quot; title=&quot;Add camel-commons-vfs component&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-1241&quot;&gt;&lt;del&gt;CAMEL-1241&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12950502" author="rbuckland" created="Mon, 26 Jan 2009 01:02:23 +0000"  >&lt;p&gt;The issue is caused by a call to getParentFile which assumes a / root path exists. Since there doesn&apos;t in an &quot;ftp&quot; server relative manner, the fix is simply to check first &lt;/p&gt;

&lt;p&gt;The patch and test case are attached. (see following) &lt;br/&gt;
It does not affect Camel 1.5.x&lt;/p&gt;


&lt;p&gt;The fix is simply a check on resolving the getParent method in the new GenericFile. This change is applied AFTER &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-1241&quot; title=&quot;Add camel-commons-vfs component&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-1241&quot;&gt;&lt;del&gt;CAMEL-1241&lt;/del&gt;&lt;/a&gt; - &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-1241&quot; title=&quot;Add camel-commons-vfs component&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-1241&quot;&gt;&lt;del&gt;CAMEL-1241&lt;/del&gt;&lt;/a&gt;_Refactor_S-FTP_to_use_GenericYYY.patch is applied.&lt;/p&gt;

&lt;p&gt;OLD&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getParent() {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; getAbsoluteFileName().substring(0, getAbsoluteFileName().lastIndexOf(&lt;span class=&quot;code-quote&quot;&gt;&quot;/&quot;&lt;/span&gt;));
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;NEW&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getParent() {
	&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (getAbsoluteFileName().lastIndexOf(&lt;span class=&quot;code-quote&quot;&gt;&quot;/&quot;&lt;/span&gt;) &amp;gt; 0) {
	    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; getAbsoluteFileName().substring(0, getAbsoluteFileName().lastIndexOf(&lt;span class=&quot;code-quote&quot;&gt;&quot;/&quot;&lt;/span&gt;));
	} &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
	    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &quot;&quot;;
	}
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12950397" author="rbuckland" created="Mon, 26 Jan 2009 01:03:33 +0000"  >&lt;p&gt;This fix can (should) only be applied to &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-1241&quot; title=&quot;Add camel-commons-vfs component&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-1241&quot;&gt;&lt;del&gt;CAMEL-1241&lt;/del&gt;&lt;/a&gt; after &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-1241&quot; title=&quot;Add camel-commons-vfs component&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-1241&quot;&gt;&lt;del&gt;CAMEL-1241&lt;/del&gt;&lt;/a&gt;_Refactor_S-FTP_to_use_GenericYYY.patch&lt;/p&gt;

&lt;p&gt;is applied.&lt;/p&gt;</comment>
                            <comment id="12950416" author="rbuckland" created="Mon, 26 Jan 2009 01:04:50 +0000"  >&lt;p&gt;This is the test case.&lt;/p&gt;

&lt;p&gt;It does NOT depend on 1241, of course, it will fail if the attached patch is not applied.&lt;/p&gt;</comment>
                            <comment id="12950470" author="rbuckland" created="Mon, 26 Jan 2009 01:08:47 +0000"  >&lt;p&gt;Claus, please apply patches as required.&lt;/p&gt;

&lt;p&gt;In order &lt;br/&gt;
1. (apply &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-1241&quot; title=&quot;Add camel-commons-vfs component&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-1241&quot;&gt;&lt;del&gt;CAMEL-1241&lt;/del&gt;&lt;/a&gt; - &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-1241&quot; title=&quot;Add camel-commons-vfs component&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-1241&quot;&gt;&lt;del&gt;CAMEL-1241&lt;/del&gt;&lt;/a&gt;_Refactor_S-FTP_to_use_GenericYYY.patch ) &lt;br/&gt;
2. two attached file (patch and test case)&lt;/p&gt;</comment>
                            <comment id="12950500" author="davsclaus" created="Mon, 26 Jan 2009 12:45:20 +0000"  >&lt;p&gt;@Paddy&lt;/p&gt;

&lt;p&gt;The fix should have been committed just recently.&lt;/p&gt;

&lt;p&gt;But the fix is part of a big refactor of the, underlying file transport in Camel, that the FTP now sits on top off. So please test it a bit throughly as there might have slipped a bug in the refactor. Its still an ongoing refactor, but the FTP part should be mostly done.&lt;/p&gt;

</comment>
                            <comment id="12950501" author="watcher" created="Mon, 26 Jan 2009 15:56:24 +0000"  >&lt;p&gt;Claus&lt;br/&gt;
I should have more time to check this tomorrow. &lt;/p&gt;</comment>
                            <comment id="12950509" author="watcher" created="Thu, 29 Jan 2009 09:54:55 +0000"  >&lt;p&gt;Its working now &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;/p&gt;

&lt;p&gt;I be able to test the new build more throughly next week and I&apos;ll report any problems I might find.&lt;br/&gt;
Sorry about the delay. &lt;/p&gt;

&lt;p&gt;-P&lt;/p&gt;</comment>
                            <comment id="12949170" author="davsclaus" created="Fri, 31 Jul 2009 06:34:01 +0000"  >&lt;p&gt;Closing 2.0m1 tickets&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12487026">CAMEL-1241</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12462819" name="CAMEL-1290_Fix_StringIndexOutOfBounds.diff" size="280" author="rbuckland" created="Mon, 26 Jan 2009 01:03:33 +0000"/>
                            <attachment id="12462733" name="CAMEL-1290_TestToShowFix.diff" size="3873" author="rbuckland" created="Mon, 26 Jan 2009 01:04:50 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 23 Jan 2009 06:32:40 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>76893</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 19 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i01hi7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6605</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>