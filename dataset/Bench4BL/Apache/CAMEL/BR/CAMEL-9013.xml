<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sat Dec 03 05:11:38 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/CAMEL-9013/CAMEL-9013.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[CAMEL-9013] Camel HTTP no longer supporting chunked transfer encoding with Tomcat</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-9013</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;When sending a chunked POST whilst running the servlet under Tomcat, camel now fails to read the input stream and sets the body to null.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/ukcrpb6/chunked-http-failure-test&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;chunked-http-failure-test&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This is due to camel checking the stream for available bytes introduced in &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-5806&quot; title=&quot;DefaultHttpBinding shouldn&amp;#39;t assume null payload if HttpMethod == GET&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-5806&quot;&gt;&lt;del&gt;CAMEL-5806&lt;/del&gt;&lt;/a&gt;. For whatever reason the CoyoteInputStream is returning 0 available bytes when handling a chunked request.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (len &amp;lt; 0) {
        InputStream is = request.getInputStream();
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (is.available() == 0) {
            &lt;span class=&quot;code-comment&quot;&gt;// no data so &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
&lt;/span&gt;            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
        }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12848908">CAMEL-9013</key>
            <summary>Camel HTTP no longer supporting chunked transfer encoding with Tomcat</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="ukcrpb6">Bob Browning</reporter>
                        <labels>
                    </labels>
                <created>Fri, 24 Jul 2015 14:36:18 +0000</created>
                <updated>Mon, 27 Jul 2015 10:12:58 +0000</updated>
                            <resolved>Fri, 24 Jul 2015 14:51:40 +0000</resolved>
                                    <version>2.15.0</version>
                    <version>2.15.1</version>
                    <version>2.15.2</version>
                                    <fixVersion>2.15.3</fixVersion>
                                    <component>camel-http</component>
                    <component>camel-servlet</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="14640594" author="ukcrpb6" created="Fri, 24 Jul 2015 15:25:36 +0000"  >&lt;p&gt;Is there any commit available pertaining to this fix?&lt;/p&gt;</comment>
                            <comment id="14640614" author="davsclaus" created="Fri, 24 Jul 2015 15:42:01 +0000"  >&lt;p&gt;Yes check the recent commits&lt;/p&gt;</comment>
                            <comment id="14640650" author="dkulp" created="Fri, 24 Jul 2015 15:59:08 +0000"  >&lt;p&gt;The code is still calling &quot;is.available() == 0&quot; which is still wrong.   Per spec, available() does NOT return any information about whether the body has any data or not.  It only returns an estimate of the number of bytes that can be read without blocking.   Thus, the code is still wrong.  An http client can send the headers, flush the network connection, pause, then send the data.   If the call to available() occurs in the pause, available() would be 0.  &lt;/p&gt;</comment>
                            <comment id="14641994" author="davsclaus" created="Sun, 26 Jul 2015 15:39:15 +0000"  >&lt;p&gt;See &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-8643&quot; title=&quot;Http Post from a streaming client sometimes fails to parse&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-8643&quot;&gt;&lt;del&gt;CAMEL-8643&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14642463" author="ukcrpb6" created="Mon, 27 Jul 2015 08:56:53 +0000"  >&lt;p&gt;This probably wont fix the issue for the servlet since the createConsumer method bypasses the getHttpBinding method it inherits.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
        &lt;span class=&quot;code-comment&quot;&gt;// ServletComponent.java # createConsumer
&lt;/span&gt;
        &lt;span class=&quot;code-comment&quot;&gt;// use the &lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt; binding
&lt;/span&gt;        endpoint.setBinding(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ServletRestHttpBinding());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14642529" author="davsclaus" created="Mon, 27 Jul 2015 10:12:58 +0000"  >&lt;p&gt;Thanks but it would not cause a problem as the default settings would not use that is.available check.&lt;/p&gt;

&lt;p&gt;But I polished the code to inheirt those options on the binding also now.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 24 Jul 2015 15:42:01 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 18 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2hwcv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>