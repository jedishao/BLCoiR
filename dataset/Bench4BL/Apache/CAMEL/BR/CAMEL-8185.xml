<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sat Dec 03 03:57:47 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/CAMEL-8185/CAMEL-8185.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[CAMEL-8185] camel-scr - IllegalArgumentException: argument type mismatch</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-8185</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;When camel-scr (2.15-SNAPSHOT) is deployed and used with Apache Karaf - 2.3.0.redhat-611412&lt;/p&gt;

&lt;p&gt;The following errors are generated when SCR got the CamelComponent or lost the Component&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2014-12-26 11:13:49,453 | ERROR | r-1.0.0-thread-2 | osgi-camel-scr                   | ?                                   ? | 255 - com.redhat.gpe.training.osgi-camel-scr - 1.0.0 | [com.redhat.gpe.training.osgi.camel.BootStrap(52)] The gotCamelComponent method has thrown an exception
java.lang.IllegalArgumentException: argument type mismatch
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)[:1.7.0_51]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)[:1.7.0_51]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)[:1.7.0_51]
	at java.lang.reflect.Method.invoke(Method.java:606)[:1.7.0_51]
	at org.apache.felix.scr.impl.helper.BaseMethod.invokeMethod(BaseMethod.java:231)[82:org.apache.felix.scr:1.8.0.redhat-611412]
	at org.apache.felix.scr.impl.helper.BaseMethod.access$500(BaseMethod.java:39)[82:org.apache.felix.scr:1.8.0.redhat-611412]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2014-12-26 11:22:50,355 | ERROR | l Console &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt; | osgi-camel-scr                   | ?                                   ? | 255 - com.redhat.gpe.training.osgi-camel-scr - 1.0.0 | [com.redhat.gpe.training.osgi.camel.BootStrap(52)] The lostCamelComponent method has thrown an exception
java.lang.IllegalArgumentException: argument type mismatch
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)[:1.7.0_51]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)[:1.7.0_51]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)[:1.7.0_51]
	at java.lang.reflect.Method.invoke(Method.java:606)[:1.7.0_51]
	at org.apache.felix.scr.impl.helper.BaseMethod.invokeMethod(BaseMethod.java:231)[82:org.apache.felix.scr:1.8.0.redhat-611412]
	at org.apache.felix.scr.impl.helper.BaseMethod.access$500(BaseMethod.java:39)[82:org.apache.felix.scr:1.8.0.redhat-611412]
	at org.apache.felix.scr.impl.helper.BaseMethod$Resolved.invoke(BaseMethod.java:624)[82:org.apache.felix.scr:1.8.0.redhat-611412]
	at org.apache.felix.scr.impl.helper.BaseMethod.invoke(BaseMethod.java:508)[82:org.apache.felix.scr:1.8.0.redhat-611412]
	at org.apache.felix.scr.impl.helper.BindMethod.invoke(BindMethod.java:37)[82:org.apache.felix.scr:1.8.0.redhat-611412]
	at org.apache.felix.scr.impl.manager.DependencyManager.invokeUnbindMethod(DependencyManager.java:1711)[82:org.apache.felix.scr:1.8.0.redhat-611412]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Here is the code used as example :&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.camel.CamelContext;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.camel.RoutesBuilder;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.camel.scr.AbstractCamelRunner;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.camel.spi.ComponentResolver;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.felix.scr.annotations.*;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.slf4j.Logger;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.slf4j.LoggerFactory;

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.util.ArrayList;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.util.List;

@Component(label = BootStrap.COMPONENT_LABEL, description = BootStrap.COMPONENT_DESCRIPTION)
@Properties({
        @Property(name = &lt;span class=&quot;code-quote&quot;&gt;&quot;camelContextId&quot;&lt;/span&gt;, value = &lt;span class=&quot;code-quote&quot;&gt;&quot;camel-scr-exercise&quot;&lt;/span&gt;),
        @Property(name = &lt;span class=&quot;code-quote&quot;&gt;&quot;active&quot;&lt;/span&gt;, value = &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&quot;&lt;/span&gt;)
})
@References({
        @Reference(name = &lt;span class=&quot;code-quote&quot;&gt;&quot;camelComponent&quot;&lt;/span&gt;,referenceInterface = ComponentResolver.class,
                cardinality = ReferenceCardinality.MANDATORY_MULTIPLE, policy = ReferencePolicy.DYNAMIC,
                policyOption = ReferencePolicyOption.GREEDY, bind = &lt;span class=&quot;code-quote&quot;&gt;&quot;gotCamelComponent&quot;&lt;/span&gt;, unbind = &lt;span class=&quot;code-quote&quot;&gt;&quot;lostCamelComponent&quot;&lt;/span&gt;)
})
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; class BootStrap &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; AbstractCamelRunner {

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; COMPONENT_LABEL = &lt;span class=&quot;code-quote&quot;&gt;&quot;bootstrap.CamelScrExercise&quot;&lt;/span&gt;;
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; COMPONENT_DESCRIPTION = &lt;span class=&quot;code-quote&quot;&gt;&quot;This is the description &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; camel-scr-exercise.&quot;&lt;/span&gt;;

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Logger LOGGER = LoggerFactory.getLogger(BootStrap.class);

    @Override
    &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; List&amp;lt;RoutesBuilder&amp;gt; getRouteBuilders() {
        LOGGER.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;Load Camel Routes definition&quot;&lt;/span&gt;);
        List&amp;lt;RoutesBuilder&amp;gt; routesBuilders = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArrayList&amp;lt;&amp;gt;();
        routesBuilders.add(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GreeterRoute());
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; routesBuilders;
    }
}

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12763810">CAMEL-8185</key>
            <summary>camel-scr - IllegalArgumentException: argument type mismatch</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="njiang">Willem Jiang</assignee>
                                    <reporter username="cmoulliard">Charles Moulliard</reporter>
                        <labels>
                    </labels>
                <created>Fri, 26 Dec 2014 10:18:37 +0000</created>
                <updated>Sun, 4 Jan 2015 13:25:46 +0000</updated>
                            <resolved>Sun, 4 Jan 2015 07:24:45 +0000</resolved>
                                    <version>2.15.0</version>
                                    <fixVersion>2.15.0</fixVersion>
                                    <component>camel-scr</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="14261538" author="sabre1041" created="Tue, 30 Dec 2014 21:47:23 +0000"  >&lt;p&gt;Tested using both Karaf 2.4 and Fuse 6.1.1 (redhat-611412) using the camel-archetype-scr with a similar configuration as described in this issue. Successfully deployed to Karaf but threw identical exception in Fuse. &lt;/p&gt;

&lt;p&gt;Diagnosed issue to be a potential class loading issue with SCR using bind methods from an abstract class. When overriding methods in subclass and calling super, context deployed successfully on both Fuse and Karaf without error.&lt;/p&gt;</comment>
                            <comment id="14262739" author="githubbot" created="Fri, 2 Jan 2015 03:29:21 +0000"  >&lt;p&gt;GitHub user sabre1041 opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/364&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/camel/pull/364&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-8185&quot; title=&quot;camel-scr - IllegalArgumentException: argument type mismatch&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-8185&quot;&gt;&lt;del&gt;CAMEL-8185&lt;/del&gt;&lt;/a&gt;: Changed parameter of scr reference event methods&lt;/p&gt;

&lt;p&gt;    Modified the default bind/unbind scr reference method parameter from a ComponentResolver to a ServiceReference to avoid the possibility of an argument type mismatch exception. This can occur if multiple versions of Camel are installed (such as JBoss Fuse 6.1) and have registered their own versions of services within the OSGi ServiceRegistry. &lt;/p&gt;

&lt;p&gt;    Since these methods do not utilize the ComponentResolver themselves, moving to a ServiceReference does not change the functionality of the component and the end user can define bind/unbind methods of their own.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/sabre1041/camel&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/sabre1041/camel&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-8185&quot; title=&quot;camel-scr - IllegalArgumentException: argument type mismatch&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-8185&quot;&gt;&lt;del&gt;CAMEL-8185&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/364.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/camel/pull/364.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #364&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 1615d666854403e42d283f966bbeb767977ce7a7&lt;br/&gt;
Author: Andrew Block &amp;lt;andy.block@gmail.com&amp;gt;&lt;br/&gt;
Date:   2015-01-02T02:29:59Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-8185&quot; title=&quot;camel-scr - IllegalArgumentException: argument type mismatch&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-8185&quot;&gt;&lt;del&gt;CAMEL-8185&lt;/del&gt;&lt;/a&gt;: Changed parameter of scr reference event methods from service interface to service reference to handle multiple service versions&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14263778" author="njiang" created="Sun, 4 Jan 2015 07:24:45 +0000"  >&lt;p&gt;The patch has been merged into camel master branch.&lt;/p&gt;</comment>
                            <comment id="14263870" author="githubbot" created="Sun, 4 Jan 2015 13:25:46 +0000"  >&lt;p&gt;Github user sabre1041 closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/364&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/camel/pull/364&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 30 Dec 2014 21:47:23 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 47 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i23s87:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>