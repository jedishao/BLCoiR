<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sat Dec 03 03:40:56 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/CAMEL-7922/CAMEL-7922.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[CAMEL-7922] MQTT endpoint misses QoS &gt; 0 messages due to startup timing issue</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-7922</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;When the MQTT Endpoint is started the MQTT connection is immediately established, causing an immediate influx of persisted messages (put on the topic when the client was not available). &lt;/p&gt;

&lt;p&gt;Issue is that at this point, most likely no consumers are available yet to process these messages.&lt;/p&gt;


&lt;p&gt;&lt;b&gt;Receiving a PUBLISH message&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;Publish message are received without any consumers. Result : msg with QoS &amp;gt; 0 that were put on the topic while the client was not connected are never processed.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Daemon Thread [hawtdispatch-DEFAULT-3] (Suspended (breakpoint at line 815 in CallbackConnection))	
	CallbackConnection.toReceiver(PUBLISH) line: 815	
	CallbackConnection.processFrame(MQTTFrame) line: 732	
	CallbackConnection.access$1500(CallbackConnection, MQTTFrame) line: 51	
	CallbackConnection$6.onTransportCommand(Object) line: 392	
	TcpTransport.drainInbound() line: 709	
	TcpTransport$6.run() line: 588	
	NioDispatchSource$3.run() line: 209	
	SerialDispatchQueue.run() line: 100	
	SimpleThread.run() line: 77	
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;b&gt;No consumers registered yet&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;Only when this finishes will Camel be able to process the messages.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Daemon Thread [localhost-startStop-1] (Suspended (breakpoint at line 164 in MQTTEndpoint))	
	owns: SpringCamelContext  (id=92)	
	owns: Object  (id=143)	
	owns: StandardContext  (id=144)	
	MQTTEndpoint.addConsumer(MQTTConsumer) line: 164	
	MQTTConsumer.doStart() line: 35	
	MQTTConsumer(ServiceSupport).start() line: 61	
	SpringCamelContext(DefaultCamelContext).startService(Service) line: 2158	
	SpringCamelContext(DefaultCamelContext).doStartOrResumeRouteConsumers(Map&amp;lt;Integer,DefaultRouteStartupOrder&amp;gt;, boolean, boolean) line: 2452	
	SpringCamelContext(DefaultCamelContext).doStartRouteConsumers(Map&amp;lt;Integer,DefaultRouteStartupOrder&amp;gt;, boolean) line: 2388	
	SpringCamelContext(DefaultCamelContext).safelyStartRouteServices(boolean, boolean, boolean, boolean, Collection&amp;lt;RouteService&amp;gt;) line: 2318	
	SpringCamelContext(DefaultCamelContext).doStartOrResumeRoutes(Map&amp;lt;String,RouteService&amp;gt;, boolean, boolean, boolean, boolean) line: 2091	
	SpringCamelContext(DefaultCamelContext).doStartCamel() line: 1951	
	SpringCamelContext(DefaultCamelContext).doStart() line: 1777	
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;These messages will never be picked up.&lt;/p&gt;

&lt;p&gt;Perhaps it&apos;s more the responsibility of the consumer / producer to start a connection when they get attached to the endpoint ? &lt;/p&gt;</description>
                <environment></environment>
        <key id="12748703">CAMEL-7922</key>
            <summary>MQTT endpoint misses QoS &gt; 0 messages due to startup timing issue</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="njiang">Willem Jiang</assignee>
                                    <reporter username="davydewaele">Davy De Waele</reporter>
                        <labels>
                    </labels>
                <created>Thu, 16 Oct 2014 20:37:17 +0000</created>
                <updated>Thu, 20 Nov 2014 09:11:42 +0000</updated>
                            <resolved>Thu, 20 Nov 2014 09:11:42 +0000</resolved>
                                    <version>2.14.0</version>
                                    <fixVersion>2.13.4</fixVersion>
                    <fixVersion>2.14.1</fixVersion>
                    <fixVersion>2.15.0</fixVersion>
                                    <component>camel-mqtt</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="14219156" author="njiang" created="Thu, 20 Nov 2014 09:11:42 +0000"  >&lt;p&gt;Applied the patch into camel master, camel-2.14.x and camel-2.13.x branches.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 20 Nov 2014 09:11:42 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 2 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i219jz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>