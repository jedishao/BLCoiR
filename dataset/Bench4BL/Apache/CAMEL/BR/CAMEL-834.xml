<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sat Dec 03 03:43:55 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/CAMEL-834/CAMEL-834.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[CAMEL-834] Trailing slash missing in SftpConsumer</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-834</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;When this route &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &amp;lt;camel:route&amp;gt;
        &amp;lt;camel:from uri=&lt;span class=&quot;code-quote&quot;&gt;&quot;sftp:&lt;span class=&quot;code-comment&quot;&gt;//someuser@hostname/path/to/directory/?password=secret&amp;amp;amp;directory=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;amp;amp;binary=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;amp;amp;consumer.useFixedDelay=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&amp;amp;amp;consumer.setNames=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;amp;amp;consumer.recursive=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&quot;&lt;/span&gt; /&amp;gt;
&lt;/span&gt;        &amp;lt;camel:to uri=&lt;span class=&quot;code-quote&quot;&gt;&quot;file:&lt;span class=&quot;code-comment&quot;&gt;///C:/camel/output/&quot;&lt;/span&gt; /&amp;gt;
&lt;/span&gt;    &amp;lt;/camel:route&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;is configured the files in the remote directory are download, but subsequent calls of the method &quot;pollDir&quot; result in this exception:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;[ &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;: 1 RemoteFileComponent] SftpConsumer                   WARN  Caught SftpException:2: No such file
[ &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;: 1 RemoteFileComponent] SftpConsumer                   WARN  Doing nothing &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; now, need to determine an appropriate action
[ &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;: 1 RemoteFileComponent] ScheduledPollConsumer          WARN  An exception occured &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; polling: Endpoint[sftp:&lt;span class=&quot;code-comment&quot;&gt;//someuser@hostname/path/to/directory/?password=secret&amp;amp;amp;directory=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;amp;amp;binary=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;amp;amp;consumer.useFixedDelay=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&amp;amp;amp;consumer.setNames=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;amp;amp;consumer.recursive=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;]: No such file 2: No such file&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;As you can see the slash is definitely in the configured route. If I check for the missing slash and add it to the dir variable (line 115 in SftpConsumer) then the consumer works:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    	&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(!dir.startsWith(&lt;span class=&quot;code-quote&quot;&gt;&quot;/&quot;&lt;/span&gt;)) {
    		dir = &lt;span class=&quot;code-quote&quot;&gt;&quot;/&quot;&lt;/span&gt; + dir;
    	}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Didn&apos;t have the time to have a closer look. The root cause of the missing slash is somewhere else.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows Vista Business, JDK 1.6.0_05&lt;/p&gt;</environment>
        <key id="12486019">CAMEL-834</key>
            <summary>Trailing slash missing in SftpConsumer</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="spaddo">Aleksandar Vidakovic</reporter>
                        <labels>
                    </labels>
                <created>Mon, 18 Aug 2008 13:09:07 +0000</created>
                <updated>Mon, 16 Feb 2009 05:51:51 +0000</updated>
                            <resolved>Wed, 20 Aug 2008 04:08:19 +0000</resolved>
                                    <version>1.4.0</version>
                                    <fixVersion>1.5.0</fixVersion>
                                    <component>camel-ftp</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12948494" author="davsclaus" created="Mon, 18 Aug 2008 17:38:57 +0000"  >&lt;p&gt;Hi&lt;/p&gt;

&lt;p&gt;Thanks for reporting this. Do you mind trying 1.5-SNAPSHOT as the camel-ftp component has been refactored and improved quite a bit.&lt;/p&gt;

&lt;p&gt;See the download page how to setup the maven repo to get snapshot releases&lt;br/&gt;
&lt;a href=&quot;http://activemq.apache.org/camel/download.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://activemq.apache.org/camel/download.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12948450" author="spaddo" created="Mon, 18 Aug 2008 18:40:26 +0000"  >&lt;p&gt;Actually I did test it against the latest Maven snapshots. Forgot to tell that. The problem with those was that the download didn&apos;t even start. For the moment I can&apos;t tell why.&lt;/p&gt;</comment>
                            <comment id="12948458" author="davsclaus" created="Tue, 19 Aug 2008 03:55:17 +0000"  >&lt;p&gt;Hmm strange.&lt;/p&gt;

&lt;p&gt;You can enable &lt;tt&gt;TRACE&lt;/tt&gt; logging at &lt;tt&gt;org.apache.camel&lt;/tt&gt; and then the logging might hint what could be wrong. &lt;/p&gt;
</comment>
                            <comment id="12948503" author="davsclaus" created="Tue, 19 Aug 2008 04:14:13 +0000"  >&lt;p&gt;Yes the TRACE logging should output what directory it tries to poll&lt;/p&gt;

&lt;p&gt;        if (log.isTraceEnabled()) &lt;/p&gt;
{
            log.trace(&quot;Polling directory: &quot; + dir);
        }

&lt;p&gt;So if you can enable the TRACE logging on camel 1.5-SNAPSHOT and see what is happening.&lt;br/&gt;
Also the new feature for exclusive read lock might have an influce. So setting consumer.exclusiveReadLock=false could help also.&lt;/p&gt;</comment>
                            <comment id="12948541" author="davsclaus" created="Tue, 19 Aug 2008 04:21:56 +0000"  >&lt;p&gt;What SFTP server are you using?&lt;/p&gt;</comment>
                            <comment id="12948532" author="spaddo" created="Tue, 19 Aug 2008 09:27:50 +0000"  >&lt;p&gt;The hint with &quot;consumer.exclusiveReadLock=false&quot; pointed me in the right direction. I verified if I have write rights on the server... and I do not. I guess that&apos;s why nothing was downloaded when I tried with 1.5-SNAPSHOT.&lt;/p&gt;

&lt;p&gt;So, I&apos;m happy... bug is fixed in 1.5... I&apos;ll continue to use this version.&lt;/p&gt;

&lt;p&gt;Thanks for the extensive help Claus.&lt;/p&gt;</comment>
                            <comment id="12948535" author="davsclaus" created="Tue, 19 Aug 2008 09:38:55 +0000"  >&lt;p&gt;Hi&lt;/p&gt;

&lt;p&gt;Glad its working in 1.5 also for the SFTP part that we dont have a mock test server for.&lt;/p&gt;

&lt;p&gt;I am wondering if exclusiveReadLock should be &lt;b&gt;false&lt;/b&gt; in the FTP part as having write privileges is not always the normal use-case.&lt;/p&gt;</comment>
                            <comment id="12948485" author="davsclaus" created="Wed, 20 Aug 2008 04:08:19 +0000"  >&lt;p&gt;The exclusiveReadLock option is now default &lt;b&gt;false&lt;/b&gt; in Camel 1.5.&lt;/p&gt;</comment>
                            <comment id="12950720" author="davsclaus" created="Mon, 16 Feb 2009 05:51:51 +0000"  >&lt;p&gt;Closing all 1.5.0 issues&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 18 Aug 2008 17:38:57 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>83292</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 42 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i01eon:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6148</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>