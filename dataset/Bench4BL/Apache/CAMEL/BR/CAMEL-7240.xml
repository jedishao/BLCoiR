<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sat Dec 03 02:25:25 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/CAMEL-7240/CAMEL-7240.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[CAMEL-7240] ThreadsProcessor should resolve RejectedPolicy from the referenced ThreadPoolProfile</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-7240</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;ThreadsProcessor&lt;/tt&gt; uses &lt;tt&gt;rejectedPolicy&lt;/tt&gt; field to determine if it should set the exception on the exchange. &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; abort = ThreadPoolRejectedPolicy.Abort == rejectedPolicy;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (abort) {
  exchange.setException(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RejectedExecutionException());
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Unfortunately &lt;tt&gt;ThreadsDefinition&lt;/tt&gt; reads &lt;tt&gt;rejectedPolicy&lt;/tt&gt; only if the latter is set directly on the Threads definition level. If &lt;tt&gt;getExecutorServiceRef&lt;/tt&gt; is set on the &lt;tt&gt;ThreadsDefinition&lt;/tt&gt;, the &lt;tt&gt;rejectedPolicy&lt;/tt&gt; value from the referenced thread pool profile is ignored.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
ThreadsProcessor thread = ...;
...
thread.setRejectedPolicy(getRejectedPolicy());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;That leads to the situations when task is rejected, but exception is not set on the exchange, because &lt;tt&gt;ThreadsProcessor&lt;/tt&gt; is unaware of the effective rejection policy.&lt;/p&gt;

&lt;p&gt;The following configuration demonstrates the issue:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;threadPool id=&lt;span class=&quot;code-quote&quot;&gt;&quot;bigPool&quot;&lt;/span&gt; poolSize=&lt;span class=&quot;code-quote&quot;&gt;&quot;1&quot;&lt;/span&gt; maxPoolSize=&lt;span class=&quot;code-quote&quot;&gt;&quot;1&quot;&lt;/span&gt; threadName=&lt;span class=&quot;code-quote&quot;&gt;&quot;foo&quot;&lt;/span&gt; maxQueueSize=&lt;span class=&quot;code-quote&quot;&gt;&quot;1&quot;&lt;/span&gt; rejectedPolicy=&lt;span class=&quot;code-quote&quot;&gt;&quot;Abort&quot;&lt;/span&gt;/&amp;gt;
...
&amp;lt;threads executorServiceRef=&lt;span class=&quot;code-quote&quot;&gt;&quot;bigPool&quot;&lt;/span&gt; ...&amp;gt;
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;tt&gt;ThreadsProcessor&lt;/tt&gt; should resolve the rejection policy from the thread pool profile if one is referenced with the &lt;tt&gt;ExecutorServiceRef&lt;/tt&gt; option.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12697147">CAMEL-7240</key>
            <summary>ThreadsProcessor should resolve RejectedPolicy from the referenced ThreadPoolProfile</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="hekonsek">Henryk Konsek</reporter>
                        <labels>
                    </labels>
                <created>Tue, 25 Feb 2014 16:52:33 +0000</created>
                <updated>Tue, 25 Feb 2014 16:54:05 +0000</updated>
                            <resolved>Tue, 25 Feb 2014 16:54:05 +0000</resolved>
                                                    <fixVersion>2.13.0</fixVersion>
                                    <component>camel-core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13911715" author="hekonsek" created="Tue, 25 Feb 2014 16:54:05 +0000"  >&lt;p&gt;Fixed in 77bbb6e2783cb552fb735ce6caeb711bec8eb472.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>375621</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 40 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1sq7j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>375917</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>