<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sat Dec 03 01:31:43 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/CAMEL-1263/CAMEL-1263.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[CAMEL-1263] MailConsumer throws exception on line 113</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-1263</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;When the mail box is empty (no mail available), MailConsumer throws the following exception on line 113.  It happens for both pop3 and imap protocols (Java Mail API 1.4.1 Sun implementation).  &lt;/p&gt;

&lt;p&gt;Regardless the cause, closing the folder should be enclosed in a try/catch block and ignore any exception thrown, because it is no longer interesting to the client application.  It can surely log the exception, but shouldn&apos;t throw it.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;[java] javax.mail.MessagingException: A6 NO Mailbox is locked by POP server;
[java]   nested exception is:
[java]     com.sun.mail.iap.CommandFailedException: A6 NO Mailbox is locked by POP server
[java]     at com.sun.mail.imap.IMAPFolder.close(IMAPFolder.java:1128)
[java]     at com.sun.mail.imap.IMAPFolder.close(IMAPFolder.java:1055)
[java]     at org.apache.camel.component.mail.MailConsumer.poll(MailConsumer.java:113)
[java]     at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:66)
[java]     at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
[java]     at java.util.concurrent.FutureTask$Sync.innerRunAndReset(FutureTask.java:317)
[java]     at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:150)
[java]     at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$101(ScheduledThreadPoolExecutor.java:98)
[java]     at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.runPeriodic(ScheduledThreadPoolExecutor.java:181)
[java]     at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:205)
[java]     at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
[java]     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
[java]     at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:619)
[java] Caused by: com.sun.mail.iap.CommandFailedException: A6 NO Mailbox is locked by POP server
[java]     at com.sun.mail.iap.Protocol.handleResult(Protocol.java:341)
[java]     at com.sun.mail.iap.Protocol.simpleCommand(Protocol.java:363)
[java]     at com.sun.mail.imap.protocol.IMAPProtocol.close(IMAPProtocol.java:976)
[java]     at com.sun.mail.imap.IMAPFolder.close(IMAPFolder.java:1125)
[java]     ... 12 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;Camel&lt;/p&gt;</environment>
        <key id="12485686">CAMEL-1263</key>
            <summary>MailConsumer throws exception on line 113</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="mwc_tonesoft">Michael Chen</reporter>
                        <labels>
                    </labels>
                <created>Thu, 15 Jan 2009 19:12:05 +0000</created>
                <updated>Fri, 31 Jul 2009 06:33:59 +0000</updated>
                            <resolved>Sun, 18 Jan 2009 10:21:52 +0000</resolved>
                                    <version>1.5.0</version>
                                    <fixVersion>1.6.0</fixVersion>
                    <fixVersion>2.0-M1</fixVersion>
                                    <component>camel-mail</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12950340" author="mwc_tonesoft" created="Thu, 15 Jan 2009 19:19:59 +0000"  >&lt;p&gt;Note that there was no exception thrown inside the matching try block above line 113 of MailConsumer.  The processing of the mail (empty) folder was successful.&lt;/p&gt;</comment>
                            <comment id="12950316" author="mwc_tonesoft" created="Thu, 15 Jan 2009 19:31:49 +0000"  >&lt;p&gt;It turns out regardless whether there is mail in the mailbox or not, the folder.close(true) line always throw this exception.&lt;/p&gt;</comment>
                            <comment id="12950447" author="davsclaus" created="Thu, 15 Jan 2009 19:59:37 +0000"  >&lt;p&gt;Do you know which Mail Server you connect to?&lt;/p&gt;

&lt;p&gt;This is the first time we hear about this. &lt;/p&gt;</comment>
                            <comment id="12950403" author="mwc_tonesoft" created="Fri, 16 Jan 2009 17:01:03 +0000"  >&lt;p&gt;The mail server is running on Fedora Core 4, version cyrus_imapd-2.2.12-6.fc4.&lt;/p&gt;</comment>
                            <comment id="12950472" author="davsclaus" created="Sun, 18 Jan 2009 10:21:52 +0000"  >&lt;p&gt;Thanks for reporting.&lt;/p&gt;

&lt;p&gt;We now catch the MessagingException and log a debug message that closing the folder was not possible and ignore it.&lt;/p&gt;</comment>
                            <comment id="12949049" author="davsclaus" created="Fri, 31 Jul 2009 06:33:59 +0000"  >&lt;p&gt;Closing 2.0m1 tickets&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 15 Jan 2009 19:59:37 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>76902</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 19 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i01hc7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6578</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>