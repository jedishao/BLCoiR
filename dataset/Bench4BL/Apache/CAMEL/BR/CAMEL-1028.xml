<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sat Dec 03 03:20:32 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/CAMEL-1028/CAMEL-1028.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[CAMEL-1028] Don&apos;t require username on send mail routes (relays don&apos;t require login)</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-1028</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;Don&apos;t require a login in the send mail URI because internal relay mail servers don&apos;t require them.  If you do include one, the mail server gets confused and thinks that you are looping and it will bounce the email so this is a bit inconvenient bug.&lt;/p&gt;

&lt;p&gt;Thread &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread: 1 org.apache.camel.component.mail.MailComponent@663ec&amp;#93;&lt;/span&gt; (Suspended (exception NullPointerException))	&lt;br/&gt;
	Properties(Hashtable&amp;lt;K,V&amp;gt;).put(K, V) line: 394	&lt;br/&gt;
	MailConfiguration.createJavaMailProperties() line: 146	&lt;br/&gt;
	MailConfiguration.createJavaMailSender() line: 107	&lt;br/&gt;
	MailEndpoint.createProducer() line: 53	&lt;br/&gt;
	ProducerCache&amp;lt;E&amp;gt;.getProducer(Endpoint&amp;lt;E&amp;gt;) line: 50	&lt;br/&gt;
	ProducerCache&amp;lt;E&amp;gt;.send(Endpoint&amp;lt;E&amp;gt;, Processor) line: 84	&lt;br/&gt;
	DefaultProducerTemplate&amp;lt;E&amp;gt;.send(Endpoint&amp;lt;E&amp;gt;, Processor) line: 84	&lt;br/&gt;
	DefaultProducerTemplate&amp;lt;E&amp;gt;.sendBodyAndHeaders(Endpoint, Object, Map&amp;lt;String,Object&amp;gt;) line: 143	&lt;br/&gt;
	DefaultProducerTemplate&amp;lt;E&amp;gt;.sendBodyAndHeaders(String, Object, Map&amp;lt;String,Object&amp;gt;) line: 139	&lt;br/&gt;
	LogEmailThrowsAdvice.sendEmail(String) line: 64	&lt;br/&gt;
	LogEmailThrowsAdvice.afterThrowing(Method, Object[], Object, Exception) line: 42	&lt;br/&gt;
	NativeMethodAccessorImpl.invoke0(Method, Object, Object[]) line: not available &lt;span class=&quot;error&quot;&gt;&amp;#91;native method&amp;#93;&lt;/span&gt;	&lt;br/&gt;
	NativeMethodAccessorImpl.invoke(Object, Object[]) line: 39	&lt;br/&gt;
	DelegatingMethodAccessorImpl.invoke(Object, Object[]) line: 25	&lt;br/&gt;
	Method.invoke(Object, Object...) line: 597	&lt;br/&gt;
	ThrowsAdviceInterceptor.invokeHandlerMethod(MethodInvocation, Throwable, Method) line: 146	&lt;br/&gt;
	ThrowsAdviceInterceptor.invoke(MethodInvocation) line: 131	&lt;br/&gt;
	ReflectiveMethodInvocation.proceed() line: 171	&lt;br/&gt;
	JdkDynamicAopProxy.invoke(Object, Method, Object[]) line: 204	&lt;br/&gt;
	$Proxy24.process(Exchange) line: not available	&lt;br/&gt;
	BeanProcessor.process(Exchange) line: 81	&lt;br/&gt;
	BeanEndpoint(ProcessorEndpoint).onExchange(Exchange) line: 92	&lt;br/&gt;
	ProcessorEndpoint$1.process(Exchange) line: 66	&lt;br/&gt;
	AsyncProcessorTypeConverter$ProcessorToAsyncProcessorBridge.process(Exchange, AsyncCallback) line: 43	&lt;br/&gt;
	SendProcessor.process(Exchange, AsyncCallback) line: 75	&lt;br/&gt;
	InstrumentationProcessor.process(Exchange, AsyncCallback) line: 57	&lt;br/&gt;
	DeadLetterChannel.process(Exchange, AsyncCallback, DeadLetterChannel$RedeliveryData) line: 155	&lt;br/&gt;
	DeadLetterChannel.process(Exchange, AsyncCallback) line: 91	&lt;br/&gt;
	InstrumentationProcessor.process(Exchange, AsyncCallback) line: 57	&lt;br/&gt;
	UnitOfWorkProcessor.process(Exchange, AsyncCallback) line: 39	&lt;br/&gt;
	AsyncProcessorHelper.process(AsyncProcessor, Exchange) line: 41	&lt;br/&gt;
	UnitOfWorkProcessor(DelegateAsyncProcessor).process(Exchange) line: 66	&lt;br/&gt;
	MailConsumer.processMessage(Message) line: 169	&lt;br/&gt;
	MailConsumer.processMessages(Message[]) line: 151	&lt;br/&gt;
	MailConsumer.poll() line: 105	&lt;br/&gt;
	MailConsumer(ScheduledPollConsumer&amp;lt;E&amp;gt;).run() line: 65	&lt;br/&gt;
	Executors$RunnableAdapter&amp;lt;T&amp;gt;.call() line: 441	&lt;br/&gt;
	FutureTask$Sync.innerRunAndReset() line: 317	&lt;br/&gt;
	ScheduledThreadPoolExecutor$ScheduledFutureTask&amp;lt;V&amp;gt;(FutureTask&amp;lt;V&amp;gt;).runAndReset() line: 150	&lt;br/&gt;
	ScheduledThreadPoolExecutor$ScheduledFutureTask&amp;lt;V&amp;gt;.access$101(ScheduledThreadPoolExecutor$ScheduledFutureTask) line: 98	&lt;br/&gt;
	ScheduledThreadPoolExecutor$ScheduledFutureTask&amp;lt;V&amp;gt;.runPeriodic() line: 181	&lt;br/&gt;
	ScheduledThreadPoolExecutor$ScheduledFutureTask&amp;lt;V&amp;gt;.run() line: 205	&lt;br/&gt;
	ThreadPoolExecutor$Worker.runTask(Runnable) line: 885	&lt;br/&gt;
	ThreadPoolExecutor$Worker.run() line: 907	&lt;br/&gt;
	Thread.run() line: 619	&lt;/p&gt;


&lt;p&gt;Code:&lt;br/&gt;
AOPExceptionHandler:&lt;br/&gt;
	private void sendEmail(String errors) &lt;/p&gt;
{
		template = camelContext.createProducerTemplate();
		StringBuffer body = new StringBuffer(&quot;Hello Techops.\n&quot;);
		body.append(&quot;Got an exception please handle.\n\nRegards Reportdev.\n\n&quot;);
		body.append(errors);
		template.sendBodyAndHeaders(emailServerUri, body, emailProperties);
	}

&lt;p&gt;applicationContext.xml&lt;br/&gt;
&amp;lt;bean id=&quot;logThrowsAdvice&quot; class=&quot;com.contextweb.advice.LogEmailThrowsAdvice&quot;&amp;gt;&lt;br/&gt;
		&amp;lt;property name=&quot;camelContext&quot; ref=&quot;camel&quot; /&amp;gt;&lt;br/&gt;
		&amp;lt;property name=&quot;sendMail&quot; value=&quot;true&quot; /&amp;gt;&lt;br/&gt;
		&amp;lt;!-- username=reportdev&amp;amp;to=DPeterson@apache.com --&amp;gt;&lt;br/&gt;
		&amp;lt;property name=&quot;emailServerUri&quot;&lt;br/&gt;
			value=&quot;smtp://mail.apache.corp&quot; /&amp;gt;&lt;br/&gt;
		&amp;lt;property name=&quot;emailProperties&quot;&amp;gt;&lt;br/&gt;
			&amp;lt;map&amp;gt;&lt;br/&gt;
				&amp;lt;entry key=&quot;From&quot;&amp;gt;&lt;br/&gt;
					&amp;lt;value&amp;gt;&quot;ReportDev@apache.com&quot;&amp;lt;/value&amp;gt;&lt;br/&gt;
				&amp;lt;/entry&amp;gt;&lt;br/&gt;
				&amp;lt;entry key=&quot;Subject&quot;&amp;gt;&lt;br/&gt;
					&amp;lt;value&amp;gt;&quot;Exception in 3rd Party Reporting Email&lt;br/&gt;
						Processing&quot;&amp;lt;/value&amp;gt;&lt;br/&gt;
				&amp;lt;/entry&amp;gt;&lt;br/&gt;
				&amp;lt;entry key=&quot;To&quot;&amp;gt;&lt;br/&gt;
					&amp;lt;value&amp;gt;&quot;DPeterson@apache.com&quot;&amp;lt;/value&amp;gt;&lt;br/&gt;
				&amp;lt;/entry&amp;gt;&lt;br/&gt;
			&amp;lt;/map&amp;gt;&lt;br/&gt;
		&amp;lt;/property&amp;gt;&lt;br/&gt;
		&amp;lt;property name=&quot;logFactory&quot; ref=&quot;LogFactoryBean&quot; /&amp;gt;&lt;br/&gt;
	&amp;lt;/bean&amp;gt;&lt;/p&gt;

&lt;p&gt;Workaround is to use URI for &quot;To&quot; and put the username after the ? in the URI.  This will fool the mail relay server into routing the email bypassing it&apos;s loop detection logic:&lt;br/&gt;
	&amp;lt;!-- Define the ThrowsAdvice bean --&amp;gt;&lt;br/&gt;
	&amp;lt;bean id=&quot;logThrowsAdvice&quot; class=&quot;com.contextweb.advice.LogEmailThrowsAdvice&quot;&amp;gt;&lt;br/&gt;
		&amp;lt;property name=&quot;camelContext&quot; ref=&quot;camel&quot; /&amp;gt;&lt;br/&gt;
		&amp;lt;property name=&quot;sendMail&quot; value=&quot;true&quot; /&amp;gt;&lt;br/&gt;
		&amp;lt;property name=&quot;emailServerUri&quot;&lt;br/&gt;
			value=&quot;smtp://mail.contextweb.corp?username=reportdev&amp;amp;to=DPeterson@apache.com&quot; /&amp;gt;&lt;br/&gt;
		&amp;lt;property name=&quot;emailProperties&quot;&amp;gt;&lt;br/&gt;
			&amp;lt;map&amp;gt;&lt;br/&gt;
				&amp;lt;entry key=&quot;From&quot;&amp;gt;&lt;br/&gt;
					&amp;lt;value&amp;gt;&quot;ReportDev@apache.com&quot;&amp;lt;/value&amp;gt;&lt;br/&gt;
				&amp;lt;/entry&amp;gt;&lt;br/&gt;
				&amp;lt;entry key=&quot;Subject&quot;&amp;gt;&lt;br/&gt;
					&amp;lt;value&amp;gt;&quot;Exception in 3rd Party Reporting Email&lt;br/&gt;
						Processing&quot;&amp;lt;/value&amp;gt;&lt;br/&gt;
				&amp;lt;/entry&amp;gt;&lt;br/&gt;
			&amp;lt;/map&amp;gt;&lt;br/&gt;
		&amp;lt;/property&amp;gt;&lt;br/&gt;
		&amp;lt;property name=&quot;logFactory&quot; ref=&quot;LogFactoryBean&quot; /&amp;gt;&lt;br/&gt;
	&amp;lt;/bean&amp;gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12485250">CAMEL-1028</key>
            <summary>Don&apos;t require username on send mail routes (relays don&apos;t require login)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="hockeydave">David Peterson</reporter>
                        <labels>
                    </labels>
                <created>Mon, 27 Oct 2008 11:08:18 +0000</created>
                <updated>Mon, 27 Oct 2008 12:35:30 +0000</updated>
                            <resolved>Mon, 27 Oct 2008 12:35:30 +0000</resolved>
                                    <version>1.4.0</version>
                                    <fixVersion>1.5.0</fixVersion>
                                    <component>camel-mail</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12949385" author="hockeydave" created="Mon, 27 Oct 2008 11:16:05 +0000"  >&lt;p&gt;Changed eclipse to catch the actual NullPointerException so replacing the stack trace w/ a better one.&lt;/p&gt;</comment>
                            <comment id="12949437" author="davsclaus" created="Mon, 27 Oct 2008 11:35:38 +0000"  >&lt;p&gt;David I think this one is fixed in Camel 1.5.&lt;/p&gt;

&lt;p&gt;Can you try with 1.5-SNAPSHOT? &lt;/p&gt;</comment>
                            <comment id="12949045" author="hockeydave" created="Mon, 27 Oct 2008 11:59:24 +0000"  >&lt;p&gt;This seems to be fixed in 1.5-SNAPSHOT.  Feel free to close this.&lt;/p&gt;</comment>
                            <comment id="12949431" author="hockeydave" created="Mon, 27 Oct 2008 12:00:53 +0000"  >&lt;p&gt;Yes, it is fixed in 1.5-SNAPSHOT.&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;


</comment>
                            <comment id="12949432" author="hockeydave" created="Mon, 27 Oct 2008 12:13:50 +0000"  >&lt;p&gt;However, I have to stay with my workaround for now.  I cannot switch to 1.5-SNAPSHOT until this gets fixed (was working in 1.4, broken in 1.5).&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.nabble.com/processOnlyUnseenMessages%3Dtrue-not-working-in-1.4.0--tt20120636s22882.html#a20169282&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.nabble.com/processOnlyUnseenMessages%3Dtrue-not-working-in-1.4.0--tt20120636s22882.html#a20169282&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12949460" author="davsclaus" created="Mon, 27 Oct 2008 12:22:10 +0000"  >&lt;p&gt;David&lt;/p&gt;

&lt;p&gt;Isn&apos;t he problem with processOnlyUnseenMessages not because of POP3? If you use IMAP does it not work in 1.5?&lt;/p&gt;</comment>
                            <comment id="12949467" author="hockeydave" created="Mon, 27 Oct 2008 12:30:53 +0000"  >&lt;p&gt;Yes, I&apos;m speaking about the new error #2.&#160;Sorry, it&apos;s a bit buried down in the Forum thread, but here is a snippet of it along with Janstey&apos;s comment that it will be fixed in the next snapshot.&lt;/p&gt;

&lt;p&gt;2. &#160;New Exception in trying to process Excel files. &#160;This works in 1.4.0 so something got broken in 1.5-SNAPSHOT.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.camel.NoTypeConversionAvailableException&amp;#93;&lt;/span&gt; thrown by target class &lt;span class=&quot;error&quot;&gt;&amp;#91;com.contextweb.mail.MailReader&amp;#93;&lt;/span&gt; and method &lt;span class=&quot;error&quot;&gt;&amp;#91;public abstract void org.apache.camel.Processor.process(org.apache.camel.Exchange) throws java.lang.Exception&amp;#93;&lt;/span&gt;org.apache.camel.NoTypeConversionAvailableException: No type converter available to convert from type: class com.sun.mail.util.BASE64DecoderStream to the required type: org.apache.commons.logging.Log with value com.sun.mail.util.BASE64DecoderStream@aa4bf8 &lt;br/&gt;
&#160; &#160; &#160; &#160; at org.apache.camel.impl.converter.DefaultTypeConverter.convertTo(DefaultTypeConverter.java:117) &lt;/p&gt;

&lt;p&gt;Janstey response:&lt;/p&gt;

&lt;p&gt;#2 should be fixed in the next SNAPSHOT deploy. &lt;/p&gt;


</comment>
                            <comment id="12949454" author="davsclaus" created="Mon, 27 Oct 2008 12:35:30 +0000"  >&lt;p&gt;David&lt;/p&gt;

&lt;p&gt;#2 Yes it should be fixed in 1.5.&lt;/p&gt;

&lt;p&gt;Jonathan have committed the fix:&lt;br/&gt;
Author: janstey&lt;br/&gt;
Date: Sat Oct 25 18:38:39 2008&lt;br/&gt;
New Revision: 707928&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 27 Oct 2008 11:35:38 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>76967</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 6 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i01fvz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6343</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>