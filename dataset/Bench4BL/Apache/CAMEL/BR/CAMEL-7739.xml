<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sat Dec 03 02:47:45 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/CAMEL-7739/CAMEL-7739.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[CAMEL-7739] camel-mail poller onCompletion Folder is not Open</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-7739</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;I think I found a bug in Camel OncompletionProcessor code when used with a Mail poller route and onCompletion.&lt;br/&gt;
The error occurs when the Log level is set to DEBUG or TRACE. In that case the logger tries to call the toString() method of the DefaultExchange class which calls org.apache.camel.component.mail.MailMessage.toString().&lt;/p&gt;

&lt;p&gt;At that stage, the POP3Folder is already closed.&lt;br/&gt;
A very obvious (but not elegant) solution, would be to add a try-catch block to the log instruction. &lt;br/&gt;
Otherwise, I think a good solution is to change the DefaultExchange#toString method.&lt;br/&gt;
Here is the exception that occured:&lt;/p&gt;

&lt;p&gt;java.lang.IllegalStateException: Folder is not Open&lt;br/&gt;
	at com.sun.mail.pop3.POP3Folder.checkOpen(POP3Folder.java:551)&lt;br/&gt;
	at com.sun.mail.pop3.POP3Folder.getProtocol(POP3Folder.java:581)&lt;br/&gt;
	at com.sun.mail.pop3.POP3Message.loadHeaders(POP3Message.java:606)&lt;br/&gt;
	at com.sun.mail.pop3.POP3Message.getHeader(POP3Message.java:383)&lt;br/&gt;
	at javax.mail.internet.MimeMessage.getAddressHeader(MimeMessage.java:701)&lt;br/&gt;
	at javax.mail.internet.MimeMessage.getFrom(MimeMessage.java:362)&lt;br/&gt;
	at org.apache.camel.component.mail.MailUtils.dumpMessage(MailUtils.java:106)&lt;br/&gt;
	at org.apache.camel.component.mail.MailMessage.toString(MailMessage.java:49)&lt;br/&gt;
	at java.lang.String.valueOf(String.java:2854)&lt;br/&gt;
	at java.lang.StringBuilder.append(StringBuilder.java:128)&lt;br/&gt;
	at org.apache.camel.impl.DefaultExchange.toString(DefaultExchange.java:81)&lt;br/&gt;
	at org.slf4j.helpers.MessageFormatter.safeObjectAppend(MessageFormatter.java:304)&lt;br/&gt;
	at org.slf4j.helpers.MessageFormatter.deeplyAppendParameter(MessageFormatter.java:276)&lt;br/&gt;
	at org.slf4j.helpers.MessageFormatter.arrayFormat(MessageFormatter.java:230)&lt;br/&gt;
	at ch.qos.logback.classic.spi.LoggingEvent.&amp;lt;init&amp;gt;(LoggingEvent.java:115)&lt;br/&gt;
	at ch.qos.logback.classic.Logger.buildLoggingEventAndAppend(Logger.java:439)&lt;br/&gt;
	at ch.qos.logback.classic.Logger.filterAndLog_1(Logger.java:413)&lt;br/&gt;
	at ch.qos.logback.classic.Logger.debug(Logger.java:506)&lt;br/&gt;
	at org.apache.camel.processor.OnCompletionProcessor$OnCompletionSynchronization$1.call(OnCompletionProcessor.java:178)&lt;br/&gt;
	at org.apache.camel.processor.OnCompletionProcessor$OnCompletionSynchronization$1.call(OnCompletionProcessor.java:176)&lt;br/&gt;
	at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)&lt;br/&gt;
	at java.util.concurrent.FutureTask.run(FutureTask.java:166)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:722)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12736095">CAMEL-7739</key>
            <summary>camel-mail poller onCompletion Folder is not Open</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="Laabidi Raissi">Laabidi Raissi</reporter>
                        <labels>
                            <label>bug</label>
                            <label>onCompletion</label>
                            <label>pop3</label>
                    </labels>
                <created>Fri, 22 Aug 2014 16:42:09 +0000</created>
                <updated>Sun, 15 Feb 2015 11:34:57 +0000</updated>
                            <resolved>Sun, 15 Feb 2015 11:34:57 +0000</resolved>
                                    <version>2.13.0</version>
                                    <fixVersion>2.13.4</fixVersion>
                    <fixVersion>2.14.2</fixVersion>
                    <fixVersion>2.15.0</fixVersion>
                                    <component>camel-core</component>
                    <component>camel-mail</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="14321929" author="davsclaus" created="Sun, 15 Feb 2015 11:29:44 +0000"  >&lt;p&gt;Yeah we should not dump the mail content in the toString()&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 15 Feb 2015 11:29:44 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 41 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1z8i7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>