<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sat Dec 03 04:09:05 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/CAMEL-364/CAMEL-364.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[CAMEL-364] camel-mina if exchange failed then out could potentially be a copy of in</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-364</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;Using the camel-mina component in synchronous mode (InOut exchange pattern) there is a potential bug if eg a processor throws an exception.&lt;/p&gt;

&lt;p&gt;This is a failed delivery in camel. And out-of-the-box the default policy is to retry up till 6 times. And if still failing camel-mina will continue and return a response to the client.&lt;br/&gt;
The respons is a duplicate of the in body.&lt;/p&gt;

&lt;p&gt;A workaround is to set the out body to null immediately in your processor. If the body is null before the exception is thrown then camel-mina will no return a response.&lt;/p&gt;

&lt;p&gt;To reproduce the bug see the MinaTcpWithInOutUsingPlainSocketTest and remove the setbody null code below and the test should fail.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;code-quote&quot;&gt;&quot;force-exception&quot;&lt;/span&gt;.equals(in)) {
                            &lt;span class=&quot;code-comment&quot;&gt;// clear out before throwing exception
&lt;/span&gt;                            e.getOut().setBody(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
                            &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IllegalArgumentException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Forced exception&quot;&lt;/span&gt;);
                        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In MinaConsumer there is a TODO comment where the bug should be handled (from &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-356&quot; title=&quot;Synchronous mode should handle exceptions being thrown from MINA&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-356&quot;&gt;&lt;del&gt;CAMEL-356&lt;/del&gt;&lt;/a&gt;)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12485173">CAMEL-364</key>
            <summary>camel-mina if exchange failed then out could potentially be a copy of in</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="davsclaus">Claus Ibsen</reporter>
                        <labels>
                    </labels>
                <created>Thu, 6 Mar 2008 06:04:57 +0000</created>
                <updated>Mon, 12 May 2008 07:48:07 +0000</updated>
                            <resolved>Sun, 9 Mar 2008 07:37:46 +0000</resolved>
                                    <version>1.3.0</version>
                                    <fixVersion>1.3.0</fixVersion>
                                    <component>camel-mina</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12946471" author="davsclaus" created="Thu, 6 Mar 2008 06:05:42 +0000"  >&lt;p&gt;Requires this patch&lt;/p&gt;</comment>
                            <comment id="12946516" author="davsclaus" created="Sat, 8 Mar 2008 18:01:43 +0000"  >&lt;p&gt;See patch on &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-375&quot; title=&quot;camel-mina improvements&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-375&quot;&gt;&lt;del&gt;CAMEL-375&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12946469" author="davsclaus" created="Sun, 9 Mar 2008 07:37:46 +0000"  >&lt;p&gt;Fixed with patch from &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-375&quot; title=&quot;camel-mina improvements&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-375&quot;&gt;&lt;del&gt;CAMEL-375&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12485177">CAMEL-356</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12485176">CAMEL-375</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>83243</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 39 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i01brz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5677</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>