<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sat Dec 03 16:34:39 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-9943/HBASE-9943.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-9943] Big linked list test fails with encoding PREFIX_TREE </title>
                <link>https://issues.apache.org/jira/browse/HBASE-9943</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;ITBLL starts with encoding NONE. Online encoding change will try other encoding. However, if it starts with encoding PREFIX_TREE, the test fails, even with online encoding change disabled.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12678609">HBASE-9943</key>
            <summary>Big linked list test fails with encoding PREFIX_TREE </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jxiang">Jimmy Xiang</reporter>
                        <labels>
                    </labels>
                <created>Mon, 11 Nov 2013 17:12:16 +0000</created>
                <updated>Wed, 13 Aug 2014 19:22:46 +0000</updated>
                            <resolved>Wed, 13 Aug 2014 19:18:19 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13824743" author="mcorgan" created="Sun, 17 Nov 2013 05:13:07 +0000"  >&lt;p&gt;Hi Jimmy, I tried to reproduce with the following commands, but I haven&apos;t seen anything wrong.  Is it possible to reproduce with the command line?  I&apos;m also not sure what to look for in the itbll.Verify m/r output.  Any tips to reproduce?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
truncate &apos;IntegrationTestBigLinkedList&apos;

alter &apos;IntegrationTestBigLinkedList&apos;, {DATA_BLOCK_ENCODING=&amp;gt;&apos;PREFIX_TREE&apos;}

bin/hbase org.apache.hadoop.hbase.test.IntegrationTestBigLinkedList Generator 1 25000000 /home/mcorgan/junk/itbll2/generate

bin/hbase org.apache.hadoop.hbase.mapreduce.RowCounter &apos;IntegrationTestBigLinkedList&apos;

major_compact &apos;IntegrationTestBigLinkedList&apos;

bin/hbase org.apache.hadoop.hbase.mapreduce.RowCounter &apos;IntegrationTestBigLinkedList&apos;

bin/hbase org.apache.hadoop.hbase.test.IntegrationTestBigLinkedList Verify /home/mcorgan/junk/itbll2/verify 4

alter &apos;IntegrationTestBigLinkedList&apos;, {DATA_BLOCK_ENCODING=&amp;gt;&apos;NONE&apos;}

major_compact &apos;IntegrationTestBigLinkedList&apos;

bin/hbase org.apache.hadoop.hbase.mapreduce.RowCounter &apos;IntegrationTestBigLinkedList&apos;

bin/hbase org.apache.hadoop.hbase.test.IntegrationTestBigLinkedList Verify /home/mcorgan/junk/itbll2/verify2 4
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13824888" author="jxiang" created="Sun, 17 Nov 2013 16:04:00 +0000"  >&lt;p&gt;Here is a patch I used to simplify the actions and can reproduce the problem. You can see that even just restarting RS can cause the issue since I disabled all CM actions1 and actions2, and region move in actions3. It is not a decoder/encoder caching issue either since I disabled it.&lt;/p&gt;

&lt;p&gt;Once you have a cluster, you can run itbll &quot;hbase org.apache.hadoop.hbase.test.IntegrationTestBigLinkedList --monkey slowDeterministic Loop 5 12 25000000 IntegrationTestBigLinkedList 12&quot; to reproduce it.  The test won&apos;t survive many loops.  It generally fails in loop 1 or 2 for me.&lt;/p&gt;</comment>
                            <comment id="13824889" author="jxiang" created="Sun, 17 Nov 2013 16:05:56 +0000"  >&lt;p&gt;From the command line, while you are generating more rows, can you try to do a rolling restart of the cluster a couple times?&lt;/p&gt;</comment>
                            <comment id="13828108" author="jxiang" created="Wed, 20 Nov 2013 20:59:44 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mcorgan&quot; class=&quot;user-hover&quot; rel=&quot;mcorgan&quot;&gt;Matt Corgan&lt;/a&gt;, do you have some documentation on the prefix tree encoding algo? I found itbll has data loss even without CM (ie calm CM). BTW, have you reproduced it?&lt;/p&gt;</comment>
                            <comment id="13828168" author="mcorgan" created="Wed, 20 Nov 2013 21:43:46 +0000"  >&lt;p&gt;Sorry Jimmy, I haven&apos;t been able to reproduce as I don&apos;t have a test cluster.  Can you think of a way to reproduce on a single machine?&lt;/p&gt;

&lt;p&gt;If you have any more clues about where or how it&apos;s erroring, that would be helpful.&lt;/p&gt;

&lt;p&gt;I&apos;m happy to help you debug this, but if you want to get a better understanding in general, then this is the best doc from &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4676&quot; title=&quot;Prefix Compression - Trie data block encoding&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4676&quot;&gt;&lt;del&gt;HBASE-4676&lt;/del&gt;&lt;/a&gt;: &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12518363/PrefixTrie_Format_v1.pdf&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12518363/PrefixTrie_Format_v1.pdf&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13828263" author="apurtell" created="Wed, 20 Nov 2013 23:10:51 +0000"  >&lt;p&gt;I was able to see a PREFIX_TREE related corruption on a single machine by running a minicluster and the equivalent of &apos;LoadTestTool -write 10:100:10 -read 100:10 -update 20:10 -num_keys 1000000&apos;. &lt;/p&gt;</comment>
                            <comment id="13828375" author="jxiang" created="Thu, 21 Nov 2013 01:35:01 +0000"  >&lt;p&gt;It is a problem harder than I thought. Unassigned while I continue to look into it. It could be an issue with the encoding algo (impl) itself, or an issue of split/compact while using this encoding. It&apos;s a corner case since I lost only ~60 of 300mil rows.  It&apos;s not that corner either since my itbll fails every time when using prefix_tree, even without CM.&lt;/p&gt;</comment>
                            <comment id="14095105" author="jxiang" created="Wed, 13 Aug 2014 03:38:53 +0000"  >&lt;p&gt;In &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11728&quot; title=&quot;Data loss while scanning using PREFIX_TREE DATA-BLOCK-ENCODING&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11728&quot;&gt;&lt;del&gt;HBASE-11728&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdifn&quot; class=&quot;user-hover&quot; rel=&quot;bdifn&quot;&gt;wuchengzhi&lt;/a&gt; reported a similar case with detailed information which should help for the debugging.&lt;/p&gt;</comment>
                            <comment id="14095969" author="apurtell" created="Wed, 13 Aug 2014 19:18:19 +0000"  >&lt;p&gt;Incorporated into &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11728&quot; title=&quot;Data loss while scanning using PREFIX_TREE DATA-BLOCK-ENCODING&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11728&quot;&gt;&lt;del&gt;HBASE-11728&lt;/del&gt;&lt;/a&gt;, resolving this as a dup. Reopen if you disagree.&lt;/p&gt;</comment>
                            <comment id="14095977" author="jxiang" created="Wed, 13 Aug 2014 19:22:46 +0000"  >&lt;p&gt;That&apos;s ok. I think it&apos;s a dup. I will play with the IT again after &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11728&quot; title=&quot;Data loss while scanning using PREFIX_TREE DATA-BLOCK-ENCODING&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11728&quot;&gt;&lt;del&gt;HBASE-11728&lt;/del&gt;&lt;/a&gt; is fixed.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="12733671">HBASE-11728</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12528782">HBASE-4676</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12733671">HBASE-11728</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12673722">HBASE-9757</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12614287" name="trunk-9943-rep.patch" size="6690" author="jxiang" created="Sun, 17 Nov 2013 16:04:00 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 17 Nov 2013 05:13:07 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>357976</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 16 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1pplr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>358266</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>