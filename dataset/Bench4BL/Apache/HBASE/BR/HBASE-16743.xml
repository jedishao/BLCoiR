<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Thu Dec 01 23:01:24 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-16743/HBASE-16743.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-16743] TestSimpleRpcScheduler#testCoDelScheduling is broke</title>
                <link>https://issues.apache.org/jira/browse/HBASE-16743</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;The testCoDelScheduling test is broke. Here are some notes on it. I have disabled it in the &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-15638&quot; title=&quot;Shade protobuf&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-15638&quot;&gt;&lt;del&gt;HBASE-15638&lt;/del&gt;&lt;/a&gt; shading patch.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
I don&apos;t get &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; test. When I time &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; test, the minDelay is &amp;gt; 2 * codel delay from the get go. So we are always overloaded. The test below would seem to complete the queuing of all the CallRunners inside the codel check interval. I don&apos;t think we are skipping codel checking. Second, I think &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; test has been  broken since HBASE-16089 Add on FastPath &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; CoDel went in. The thread name we were looking &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; was the name BEFORE we updated: i.e. &lt;span class=&quot;code-quote&quot;&gt;&quot;RpcServer.CodelBQ.&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;.handler&quot;&lt;/span&gt;. But same patch changed the name of the codel  fastpath thread to: &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FastPathBalancedQueueRpcExecutor(&lt;span class=&quot;code-quote&quot;&gt;&quot;CodelFPBQ.&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;&quot;&lt;/span&gt;, handlerCount, numCallQueues...

Codel is hard to test. This test is going to be flakey given it all timer-based. Disabling &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; now till chat
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;FYI &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mantonov&quot; class=&quot;user-hover&quot; rel=&quot;mantonov&quot;&gt;Mikhail Antonov&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13009022">HBASE-16743</key>
            <summary>TestSimpleRpcScheduler#testCoDelScheduling is broke</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mantonov">Mikhail Antonov</assignee>
                                    <reporter username="stack">stack</reporter>
                        <labels>
                    </labels>
                <created>Fri, 30 Sep 2016 23:55:51 +0000</created>
                <updated>Sat, 29 Oct 2016 05:13:19 +0000</updated>
                            <resolved>Fri, 28 Oct 2016 23:50:31 +0000</resolved>
                                    <version>1.3.0</version>
                                    <fixVersion>1.3.0</fixVersion>
                                    <component>rpc</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="15611346" author="mantonov" created="Thu, 27 Oct 2016 09:37:54 +0000"  >&lt;p&gt;that escaped my attention when I looked for thing marked for 1.3. This test is definitely flaky now on 1.3. will look tomorrow.&lt;/p&gt;</comment>
                            <comment id="15611436" author="mantonov" created="Thu, 27 Oct 2016 10:13:04 +0000"  >&lt;p&gt;Looking at here &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-16089&quot; title=&quot;Add on FastPath for CoDel&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-16089&quot;&gt;&lt;del&gt;HBASE-16089&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12813161/HBASE-16089.v3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12813161/HBASE-16089.v3.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I don&apos;t understand some thing, why did we change this from 5ms to 100ms?&lt;/p&gt;

&lt;p&gt;public static final int CALL_QUEUE_CODEL_DEFAULT_TARGET_DELAY = 100;&lt;/p&gt;

&lt;p&gt;Need to take another look at this patch tomorrow&lt;/p&gt;</comment>
                            <comment id="15611445" author="mantonov" created="Thu, 27 Oct 2016 10:17:24 +0000"  >&lt;p&gt;Also thread prefix name is incorrect yes. With corrected named (below) the tests seem to be passing reliable for me. will run more in the loop to check&lt;/p&gt;

&lt;p&gt;envEdge.threadNamePrefixs.add(&quot;RpcServer.CodelFPBQ.default.handler&quot;);&lt;br/&gt;
envEdge.threadNamePrefixs.add(&quot;RpcServer.CodelRWQ.default.handler&quot;);&lt;/p&gt;</comment>
                            <comment id="15616929" author="mantonov" created="Fri, 28 Oct 2016 23:28:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt; with the above changes to handler names in the test it&apos;s fast and stable for me (ran 50 times in a loop and all passed). Going to commit in master, branch-1 and branch-1.3. Do you want to enable it in master now?&lt;/p&gt;</comment>
                            <comment id="15616944" author="mantonov" created="Fri, 28 Oct 2016 23:37:55 +0000"  >&lt;p&gt;a trivial patch (changing test only) that I committed&lt;/p&gt;</comment>
                            <comment id="15616968" author="mantonov" created="Fri, 28 Oct 2016 23:50:32 +0000"  >&lt;p&gt;marking resolved, and filed a separate jira to re-enable it on master&lt;/p&gt;</comment>
                            <comment id="15617091" author="hudson" created="Sat, 29 Oct 2016 00:50:04 +0000"  >&lt;p&gt;FAILURE: Integrated in Jenkins build HBase-1.3-JDK8 #61 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.3-JDK8/61/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.3-JDK8/61/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-16743&quot; title=&quot;TestSimpleRpcScheduler#testCoDelScheduling is broke&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-16743&quot;&gt;&lt;del&gt;HBASE-16743&lt;/del&gt;&lt;/a&gt; TestSimpleRpcScheduler#testCoDelScheduling is broke (antonov: rev c542c49ab651989ea85bd43398d95db1833fea26)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) hbase-server/src/test/java/org/apache/hadoop/hbase/ipc/TestSimpleRpcScheduler.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15617230" author="hudson" created="Sat, 29 Oct 2016 02:20:31 +0000"  >&lt;p&gt;FAILURE: Integrated in Jenkins build HBase-1.4 #504 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.4/504/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.4/504/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-16743&quot; title=&quot;TestSimpleRpcScheduler#testCoDelScheduling is broke&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-16743&quot;&gt;&lt;del&gt;HBASE-16743&lt;/del&gt;&lt;/a&gt; TestSimpleRpcScheduler#testCoDelScheduling is broke (antonov: rev ea5b0a05d692cfaccc004d030df9d81fb4f7f47e)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) hbase-server/src/test/java/org/apache/hadoop/hbase/ipc/TestSimpleRpcScheduler.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15617443" author="hudson" created="Sat, 29 Oct 2016 04:53:46 +0000"  >&lt;p&gt;FAILURE: Integrated in Jenkins build HBase-Trunk_matrix #1874 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-Trunk_matrix/1874/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-Trunk_matrix/1874/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-16743&quot; title=&quot;TestSimpleRpcScheduler#testCoDelScheduling is broke&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-16743&quot;&gt;&lt;del&gt;HBASE-16743&lt;/del&gt;&lt;/a&gt; TestSimpleRpcScheduler#testCoDelScheduling is broke (antonov: rev 17dfa34cfb8e2ec62ea33ee9cb23d47e1fe56dff)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) hbase-server/src/test/java/org/apache/hadoop/hbase/ipc/TestSimpleRpcScheduler.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15617463" author="stack" created="Sat, 29 Oct 2016 05:08:23 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="15617470" author="hudson" created="Sat, 29 Oct 2016 05:13:19 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build HBase-1.3-JDK7 #54 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.3-JDK7/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.3-JDK7/54/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-16743&quot; title=&quot;TestSimpleRpcScheduler#testCoDelScheduling is broke&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-16743&quot;&gt;&lt;del&gt;HBASE-16743&lt;/del&gt;&lt;/a&gt; TestSimpleRpcScheduler#testCoDelScheduling is broke (antonov: rev c542c49ab651989ea85bd43398d95db1833fea26)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) hbase-server/src/test/java/org/apache/hadoop/hbase/ipc/TestSimpleRpcScheduler.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12835920" name="HBASE-16743.branch-1.patch" size="934" author="mantonov" created="Fri, 28 Oct 2016 23:37:55 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 27 Oct 2016 09:37:54 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i34bsn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>