<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Thu Dec 01 21:54:50 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-14370/HBASE-14370.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-14370] Use separate thread for calling ZKPermissionWatcher#refreshNodes()</title>
                <link>https://issues.apache.org/jira/browse/HBASE-14370</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;I came off a support case (0.98.0) where main zk thread was seen doing the following:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  at org.apache.hadoop.hbase.security.access.ZKPermissionWatcher.refreshAuthManager(ZKPermissionWatcher.java:152)
  at org.apache.hadoop.hbase.security.access.ZKPermissionWatcher.refreshNodes(ZKPermissionWatcher.java:135)
  at org.apache.hadoop.hbase.security.access.ZKPermissionWatcher.nodeChildrenChanged(ZKPermissionWatcher.java:121)
  at org.apache.hadoop.hbase.zookeeper.ZooKeeperWatcher.process(ZooKeeperWatcher.java:348)
  at org.apache.zookeeper.ClientCnxn$EventThread.processEvent(ClientCnxn.java:519)
  at org.apache.zookeeper.ClientCnxn$EventThread.run(ClientCnxn.java:495)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;There were 62000 nodes under /acl due to lack of fix from &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12635&quot; title=&quot;Delete acl notify znode of table after the table is deleted&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12635&quot;&gt;&lt;del&gt;HBASE-12635&lt;/del&gt;&lt;/a&gt;, leading to slowness in table creation because zk notification for region offline was blocked by the above.&lt;/p&gt;

&lt;p&gt;The attached patch separates refreshNodes() call into its own thread.&lt;/p&gt;

&lt;p&gt;Thanks to Enis and Devaraj for offline discussion.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12862030">HBASE-14370</key>
            <summary>Use separate thread for calling ZKPermissionWatcher#refreshNodes()</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="yuzhihong@gmail.com">Ted Yu</assignee>
                                    <reporter username="yuzhihong@gmail.com">Ted Yu</reporter>
                        <labels>
                    </labels>
                <created>Sat, 5 Sep 2015 16:15:16 +0000</created>
                <updated>Sat, 26 Sep 2015 01:25:28 +0000</updated>
                            <resolved>Sat, 26 Sep 2015 01:25:28 +0000</resolved>
                                    <version>0.98.0</version>
                                    <fixVersion>2.0.0</fixVersion>
                    <fixVersion>1.3.0</fixVersion>
                    <fixVersion>0.98.15</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>9</watches>
                                                                <comments>
                            <comment id="14732029" author="hadoopqa" created="Sat, 5 Sep 2015 16:21:46 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12754330/14370-v1.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12754330/14370-v1.txt&lt;/a&gt;&lt;br/&gt;
  against master branch at commit bada19bb54a358233db2b3e23c86d215ac2dc29b.&lt;br/&gt;
  ATTACHMENT ID: 12754330&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javac&lt;/font&gt;.  The patch appears to cause mvn compile goal to fail with Hadoop version 2.4.0.&lt;/p&gt;

&lt;p&gt;    Compilation errors resume:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; Error invoking method &apos;get(java.lang.Integer)&apos; in java.util.ArrayList at META-INF/LICENSE.vm&lt;span class=&quot;error&quot;&gt;&amp;#91;line 1627, column 22&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; Failed to execute goal org.apache.maven.plugins:maven-remote-resources-plugin:1.5:process (default) on project hbase-assembly: Error rendering velocity resource. Error invoking method &apos;get(java.lang.Integer)&apos; in java.util.ArrayList at META-INF/LICENSE.vm&lt;span class=&quot;error&quot;&gt;&amp;#91;line 1627, column 22&amp;#93;&lt;/span&gt;: InvocationTargetException: Index: 0, Size: 0 -&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;Help 1&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; To see the full stack trace of the errors, re-run Maven with the -e switch.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; Re-run Maven using the -X switch to enable full debug logging.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; For more information about the errors and possible solutions, please read the following articles:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;Help 1&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; After correcting the problems, you can resume the build with the command&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt;   mvn &amp;lt;goals&amp;gt; -rf :hbase-assembly&lt;/p&gt;


&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15437//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15437//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14732048" author="apurtell" created="Sat, 5 Sep 2015 17:09:18 +0000"  >&lt;p&gt;So this was an issue with 0.98.0 involving something fixed in 0.98.9? Why make any additional changes now? &lt;/p&gt;</comment>
                            <comment id="14732066" author="yuzhihong@gmail.com" created="Sat, 5 Sep 2015 18:42:21 +0000"  >&lt;p&gt;Using the main zk thread for refreshing AuthManager, in my opinion, is not a scalable design.&lt;/p&gt;

&lt;p&gt;The customer cluster has well over 2000 tables. A workflow constantly creates new tables.&lt;br/&gt;
The time for running ZKPermissionWatcher#refreshNodes() is not negligible.&lt;/p&gt;

&lt;p&gt;We should free the main zk thread for processing other zookeeper notifications.&lt;/p&gt;</comment>
                            <comment id="14732072" author="apurtell" created="Sat, 5 Sep 2015 18:58:53 +0000"  >&lt;p&gt;I suppose this makes sense for where we don&apos;t have proc-v2, but otherwise moving permission cache updates away from the zookeeper hack to proc-v2 is the correct approach to fixing the problem you describe. &lt;/p&gt;</comment>
                            <comment id="14732082" author="hadoopqa" created="Sat, 5 Sep 2015 19:38:37 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12754332/14370-v1.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12754332/14370-v1.txt&lt;/a&gt;&lt;br/&gt;
  against master branch at commit bada19bb54a358233db2b3e23c86d215ac2dc29b.&lt;br/&gt;
  ATTACHMENT ID: 12754332&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15438//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15438//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15438//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15438//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15438//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15438//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15438//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15438//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14733721" author="yuzhihong@gmail.com" created="Mon, 7 Sep 2015 13:39:19 +0000"  >&lt;p&gt;This change would benefit 0.98 and branch-1.x where we don&apos;t have proc-v2.&lt;/p&gt;

&lt;p&gt;Moving permission cache updates away from the zookeeper would be done in another JIRA.&lt;/p&gt;</comment>
                            <comment id="14735217" author="enis" created="Tue, 8 Sep 2015 17:26:54 +0000"  >&lt;p&gt;It is standard practice to fork off a thread to do the work in the zk client since the zk notification is handled by a single thread. If a zk watcher runs for a very long time, other zk notifications are just blocked waiting for the event notification thread. We have to be careful though because the ordering of the execution for these should follow the zk notification order. &lt;/p&gt;

&lt;p&gt;In the case Ted mentioned, even with &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12635&quot; title=&quot;Delete acl notify znode of table after the table is deleted&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12635&quot;&gt;&lt;del&gt;HBASE-12635&lt;/del&gt;&lt;/a&gt; fixed, the &lt;tt&gt;ZKPermissionWatcher#refreshNodes()&lt;/tt&gt; does a getData() for every 2000+ child znode which is quite costly. The other notifications (like assignment notifications) are waiting, and causing assignment to take a very long time. &lt;/p&gt;</comment>
                            <comment id="14735224" author="enis" created="Tue, 8 Sep 2015 17:29:56 +0000"  >&lt;p&gt;For the patch, instead of forking a thread, can we have a SingleThreadedExecutor?&lt;/p&gt;</comment>
                            <comment id="14735237" author="yuzhihong@gmail.com" created="Tue, 8 Sep 2015 17:38:23 +0000"  >&lt;p&gt;Currently no class is using SingleThreadedExecutor&lt;/p&gt;

&lt;p&gt;What benefit does it give us ?&lt;/p&gt;</comment>
                            <comment id="14735423" author="enis" created="Tue, 8 Sep 2015 19:06:00 +0000"  >&lt;p&gt;Forking a thread is expensive, so we do not use that pattern but instead use Executors with fixed thread pools. Plus, as mentioned above, we have to make sure that the refresh requests from different even notifications should execute in the same order that the zk notification comes from. Single threaded executor should be able to do that. &lt;/p&gt;</comment>
                            <comment id="14735461" author="yuzhihong@gmail.com" created="Tue, 8 Sep 2015 19:27:40 +0000"  >&lt;p&gt;See if patch v3 is better.&lt;/p&gt;</comment>
                            <comment id="14735509" author="enis" created="Tue, 8 Sep 2015 20:05:26 +0000"  >&lt;blockquote&gt;&lt;p&gt;See if patch v3 is better.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Thanks Ted. &lt;/p&gt;

&lt;p&gt;The executor thread is not shut down, and will cause a thread leak. &lt;br/&gt;
I was following the AtomicReference nodes, but could not get the full semantics. Did you introduce that to pass the list of nodes to the thread? Can we simplify by just passing the list of znodes directly to the thread? There may still be a race condition between nodeChildrenChanged (which now happens in the thread) and nodeDeleted, which still executes in the zk event thread, no?  &lt;/p&gt;</comment>
                            <comment id="14735527" author="yuzhihong@gmail.com" created="Tue, 8 Sep 2015 20:15:16 +0000"  >&lt;p&gt;w.r.t. thread leak, have you seen the following code ?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void close() {
+    executor.shutdown();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;w.r.t. AtomicReference, the goal is for refresher thread to be interruptible.&lt;/p&gt;

&lt;p&gt;w.r.t. race condition between nodeChildrenChanged and nodeDeleted, if a table (namespace) is deleted, client would get TableNotFoundException (NamespaceNotFoundException) for future access - before ACL is checked.&lt;br/&gt;
Do you think tighter coordination is needed between the zk thread and the refresher thread ?&lt;/p&gt;</comment>
                            <comment id="14735703" author="enis" created="Tue, 8 Sep 2015 21:58:11 +0000"  >&lt;blockquote&gt;&lt;p&gt;w.r.t. thread leak, have you seen the following code ?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Ok, missed that. &lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Do you think tighter coordination is needed between the zk thread and the refresher thread ?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;In theory, there maybe a race where one thread is refreshing the table auths, while the other is deleting that permission since now, they will be executing in different threads. Maybe we can make every operation (nodeCreated,nodeDeleted,nodeDataChanged,nodeChildrenChanged) to execute from the executor.  &lt;/p&gt;</comment>
                            <comment id="14735719" author="yuzhihong@gmail.com" created="Tue, 8 Sep 2015 22:10:36 +0000"  >&lt;blockquote&gt;&lt;p&gt;one thread is refreshing the table auths, while the other is deleting that permission&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;If table auth is put back by the refresher, it would be overwritten next time the table with same name is created.&lt;br/&gt;
Before the table is created again, TableNotFoundException serves as the guard.&lt;/p&gt;

&lt;p&gt;What do you think ?&lt;/p&gt;</comment>
                            <comment id="14735778" author="yuzhihong@gmail.com" created="Tue, 8 Sep 2015 22:53:39 +0000"  >&lt;p&gt;Looking at patch v1, the thread is created once when ZKPermissionWatcher is created - not for every refresh call.&lt;/p&gt;</comment>
                            <comment id="14735954" author="enis" created="Wed, 9 Sep 2015 01:31:31 +0000"  >&lt;blockquote&gt;&lt;p&gt;Looking at patch v1, the thread is created once when ZKPermissionWatcher is created - not for every refresh call.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yes, it seems that the thread never exits. This is kind of like a busy wait, no? The thread looks for whether it should refresh every 2ms without a wait / signal. &lt;/p&gt;</comment>
                            <comment id="14735977" author="yuzhihong@gmail.com" created="Wed, 9 Sep 2015 01:43:27 +0000"  >&lt;p&gt;Clarification, based in patch v1, the only concern is busy waiting.&lt;br/&gt;
If that&apos;s the case, I can continue refining patch v1.&lt;/p&gt;</comment>
                            <comment id="14736020" author="yuzhihong@gmail.com" created="Wed, 9 Sep 2015 02:31:51 +0000"  >&lt;p&gt;Please take a look at 14370-wait-nofity.txt&lt;/p&gt;</comment>
                            <comment id="14736300" author="hadoopqa" created="Wed, 9 Sep 2015 06:41:21 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12754799/14370-wait-nofity.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12754799/14370-wait-nofity.txt&lt;/a&gt;&lt;br/&gt;
  against master branch at commit e95358a7fc3f554dcbb351c8b7295cafc01e8c23.&lt;br/&gt;
  ATTACHMENT ID: 12754799&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15485//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15485//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15485//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15485//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15485//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15485//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15485//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15485//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14736981" author="hadoopqa" created="Wed, 9 Sep 2015 14:53:50 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12754878/14370-wait-nofity-v2.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12754878/14370-wait-nofity-v2.txt&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 27d3ab43efeabe2a0e1173858b6994b17b5c355b.&lt;br/&gt;
  ATTACHMENT ID: 12754878&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to cause Findbugs (version 2.0.3) to fail.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;/p&gt;


&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15501//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15501//testReport/&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15501//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15501//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15501//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15501//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14737507" author="yuzhihong@gmail.com" created="Wed, 9 Sep 2015 20:15:09 +0000"  >&lt;p&gt;Ran 14370-wait-nofity-v2.txt locally. Except for TestMasterFailoverWithProcedures , the other tests passed.&lt;br/&gt;
TestMasterFailoverWithProcedures passed when run alone.&lt;/p&gt;</comment>
                            <comment id="14737789" author="enis" created="Wed, 9 Sep 2015 23:19:09 +0000"  >&lt;p&gt;Sorry, I have a hard time understanding the reasoning to go back to approach v1 from v3 patch. The possible race conditions I mention above are not specific to the Thread vs Executors, it is orthogonal to that. So v1 patch or a wait-signal version does not buy us anything compared to v3 patch.  &lt;/p&gt;

&lt;p&gt;In the v3 patch, you are submitting a Runnable thread to the executor which runs indefinitely everytime node data changes. The lifecycle of ZKPermissionWatcher is different than AcccessController. I think what happens is that the AcccessController coprocessor will be stopped everytime a region is closed from the region server, while the ZKPermissionWatcher is cached via TableAuthManager. &lt;/p&gt;

&lt;p&gt;Let me attach a patch, to explain it better. &lt;/p&gt;</comment>
                            <comment id="14737795" author="enis" created="Wed, 9 Sep 2015 23:26:21 +0000"  >&lt;p&gt;Ted, can you check the v4 patch to see my points above. I did not run any tests on it though. &lt;/p&gt;</comment>
                            <comment id="14737817" author="yuzhihong@gmail.com" created="Wed, 9 Sep 2015 23:44:10 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
778	      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (ref-1 == 0) {
779	        instance.close();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;instance should be removed from refCount, right ?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
68	      &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; DaemonThreadFactory(&lt;span class=&quot;code-quote&quot;&gt;&quot;zkpermissionwatcher&quot;&lt;/span&gt;));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Adding hyphen would make the thread name more readable.&lt;/p&gt;

&lt;p&gt;Submitting all actions to executor maintains the semantics of original implementation.&lt;/p&gt;

&lt;p&gt;If I cannot convince you that patch v1 doesn&apos;t introduce client visible difference in terms of ACL, we can go with patch v4. However, in a cluster with many tables where new tables are being created, the backing queue for the executor may have non-trivial length.&lt;/p&gt;</comment>
                            <comment id="14738032" author="yuzhihong@gmail.com" created="Thu, 10 Sep 2015 02:33:08 +0000"  >&lt;p&gt;Patch v5 adds call to watcher.abort() in TableAuthManager#release() when ref counting assertion fails.&lt;/p&gt;</comment>
                            <comment id="14738079" author="hadoopqa" created="Thu, 10 Sep 2015 03:19:22 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12755024/hbase-14370_v4.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12755024/hbase-14370_v4.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit a11bb2a933ad799546e7179fdf6ce75e3e22d44b.&lt;br/&gt;
  ATTACHMENT ID: 12755024&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15516//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15516//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15516//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15516//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15516//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15516//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15516//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15516//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14738188" author="hadoopqa" created="Thu, 10 Sep 2015 05:22:14 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12755052/14370-v5.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12755052/14370-v5.txt&lt;/a&gt;&lt;br/&gt;
  against master branch at commit a11bb2a933ad799546e7179fdf6ce75e3e22d44b.&lt;br/&gt;
  ATTACHMENT ID: 12755052&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;/p&gt;


&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15517//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15517//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15517//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15517//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15517//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15517//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15517//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15517//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14738656" author="yuzhihong@gmail.com" created="Thu, 10 Sep 2015 12:22:20 +0000"  >&lt;p&gt;Patch v7 adds preemption for nodeChildrenChanged events on top of patch v5.&lt;/p&gt;</comment>
                            <comment id="14738887" author="hadoopqa" created="Thu, 10 Sep 2015 15:09:57 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12755121/14370-v7.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12755121/14370-v7.txt&lt;/a&gt;&lt;br/&gt;
  against master branch at commit e770cf34174c8226eaf703c303ee3d8397c38242.&lt;br/&gt;
  ATTACHMENT ID: 12755121&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 9 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 site&lt;/font&gt;.  The patch appears to cause mvn post-site goal to fail.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.mapreduce.TestImportExport&lt;br/&gt;
                  org.apache.hadoop.hbase.util.TestProcessBasedCluster&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15525//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15525//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15525//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15525//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15525//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15525//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15525//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15525//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14738954" author="yuzhihong@gmail.com" created="Thu, 10 Sep 2015 15:46:34 +0000"  >&lt;p&gt;The above test failures were not related to the patch - I have seen them in other QA runs.&lt;br/&gt;
The tests pass locally.&lt;/p&gt;</comment>
                            <comment id="14738999" author="stack" created="Thu, 10 Sep 2015 16:08:11 +0000"  >&lt;p&gt;It is hard to follow what is going on and I don&apos;t see a test that exercises this new complexity: i.e. processing loads of znodes asserting it is Doing The Right Thing. This patch includes refcounting without test at extremities (just does log warn that &quot;Something wrong with the TableAuthManager reference counting: &quot;...)  Patch passes to executor anonymous new Runnable() throughout but then declares a  &apos;  private Runnable runnable = new Runnable() {&apos;... &lt;/p&gt;

&lt;p&gt;Mainly wanted to say we don&apos;t need more threads but you fellas seem to be trying hard to avoid long-running thread that does nothing 99.999999999999999% of the time so that is good.&lt;/p&gt;
</comment>
                            <comment id="14739049" author="yuzhihong@gmail.com" created="Thu, 10 Sep 2015 16:23:21 +0000"  >&lt;blockquote&gt;&lt;p&gt;just does log warn that &quot;Something wrong with the TableAuthManager &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The following change in the same if block would take action on top of warning:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+      instance.getZKPermissionWatcher().getWatcher().abort(msg, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;blockquote&gt;&lt;p&gt;but then declares a &apos; private Runnable&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The private runnable allows subsequent nodeChildrenChanged event to preempt current processing of previous nodeChildrenChanged event. The rationale is that there is no need to continue processing potentially stale data.&lt;br/&gt;
Would renaming the private runnable (e.g. nodeChildrenChangedRunnable) make the code more readable ?&lt;/p&gt;

&lt;p&gt;As of patch v7, the order of handling zk notifications is strictly the same as current formation.&lt;/p&gt;

&lt;p&gt;As stated earlier, the customer&apos;s use case constantly creates new tables. As of last Friday, there were ~2600 tables. I wouldn&apos;t be surprised if the table count reaches 3000.&lt;br/&gt;
Efficiently handling zk notifications becomes important such that the notifications for region assignment are not blocked by the handling for ACL.&lt;/p&gt;</comment>
                            <comment id="14739142" author="yuzhihong@gmail.com" created="Thu, 10 Sep 2015 17:09:24 +0000"  >&lt;p&gt;Patch v8 moves the private runnable inside nodeChildrenChanged() with some comment explaining what it does.&lt;br/&gt;
Hopefully this makes code more readble.&lt;/p&gt;</comment>
                            <comment id="14739262" author="stack" created="Thu, 10 Sep 2015 18:14:09 +0000"  >&lt;p&gt;A WARN then it aborts?&lt;/p&gt;

&lt;p&gt;Tests?&lt;/p&gt;</comment>
                            <comment id="14739291" author="hadoopqa" created="Thu, 10 Sep 2015 18:24:18 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12755178/14370-v8.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12755178/14370-v8.txt&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 0f0cdc5131913e1d82e9099c0a8e000c2ac97754.&lt;br/&gt;
  ATTACHMENT ID: 12755178&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 9 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to cause Findbugs (version 2.0.3) to fail.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 site&lt;/font&gt;.  The patch appears to cause mvn post-site goal to fail.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;/p&gt;


&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15531//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15531//testReport/&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15531//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15531//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15531//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15531//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14739320" author="yuzhihong@gmail.com" created="Thu, 10 Sep 2015 18:36:18 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
/home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/test-framework/dev-support/test-patch.sh: line 861: mvn: command not found
We&apos;re ok: there is no zombie test
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;How come the above error happened on H5 as well &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Let me change the log from warn to fatal and try to come up with a unit test.&lt;/p&gt;</comment>
                            <comment id="14739478" author="hadoopqa" created="Thu, 10 Sep 2015 19:55:26 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12755178/14370-v8.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12755178/14370-v8.txt&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 0f0cdc5131913e1d82e9099c0a8e000c2ac97754.&lt;br/&gt;
  ATTACHMENT ID: 12755178&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 9 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;/p&gt;


&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core zombie tests&lt;/font&gt;.  There are 1 zombie test(s): 	at org.apache.hadoop.hbase.regionserver.TestRegionReplicas.testRefreshStoreFiles(TestRegionReplicas.java:237)&lt;br/&gt;
	at org.apache.camel.component.jetty.HttpEndpointUriEncodingIssueTest.testEndpointUriEncodingIssue(HttpEndpointUriEncodingIssueTest.java:32)&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15530//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15530//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15530//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15530//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15530//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15530//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15530//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15530//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14739520" author="yuzhihong@gmail.com" created="Thu, 10 Sep 2015 20:14:56 +0000"  >&lt;p&gt;Here is my test plan: subclass AccessController and override its stop() method.&lt;br/&gt;
When the subclass stop() method calls super#stop() twice in a row, verify the abortion.&lt;/p&gt;

&lt;p&gt;Please let me know if other scenario should be tested.&lt;/p&gt;</comment>
                            <comment id="14739583" author="stack" created="Thu, 10 Sep 2015 21:02:14 +0000"  >&lt;p&gt;Sounds fine. What about refcounting? Any way a recount decrement can be missed?&lt;/p&gt;</comment>
                            <comment id="14739607" author="yuzhihong@gmail.com" created="Thu, 10 Sep 2015 21:15:09 +0000"  >&lt;p&gt;The scenario I described was for refcounting verification where double decrement leads to region server abortion.&lt;br/&gt;
w.r.t. missed recount decrement, I haven&apos;t found a scenario yet.&lt;/p&gt;</comment>
                            <comment id="14739671" author="yuzhihong@gmail.com" created="Thu, 10 Sep 2015 21:50:26 +0000"  >&lt;p&gt;In patch v10, added test where double ref decrement leads to region server abort.&lt;br/&gt;
Also verified that after tables are deleted, total reference count comes down to 0 in normal operation.&lt;/p&gt;</comment>
                            <comment id="14740055" author="hadoopqa" created="Fri, 11 Sep 2015 02:43:26 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12755242/14370-v10.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12755242/14370-v10.txt&lt;/a&gt;&lt;br/&gt;
  against master branch at commit bf26088d7be4386864148516b151dfb0a858c416.&lt;br/&gt;
  ATTACHMENT ID: 12755242&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 14 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;/p&gt;


&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core zombie tests&lt;/font&gt;.  There are 5 zombie test(s): 	at org.apache.hadoop.hbase.io.hfile.TestCacheOnWrite.testStoreFileCacheOnWriteInternals(TestCacheOnWrite.java:274)&lt;br/&gt;
	at org.apache.hadoop.hbase.io.hfile.TestCacheOnWrite.testStoreFileCacheOnWrite(TestCacheOnWrite.java:503)&lt;br/&gt;
	at org.apache.hadoop.hbase.replication.regionserver.TestReplicationWALReaderManager.test(TestReplicationWALReaderManager.java:181)&lt;br/&gt;
	at org.apache.hadoop.hbase.TestAcidGuarantees.testMobGetAtomicity(TestAcidGuarantees.java:392)&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15540//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15540//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15540//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15540//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15540//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15540//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15540//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15540//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14740081" author="enis" created="Fri, 11 Sep 2015 03:08:52 +0000"  >&lt;blockquote&gt;&lt;p&gt;Mainly wanted to say we don&apos;t need more threads but you fellas seem to be trying hard to avoid long-running thread that does nothing 99.999999999999999% of the time so that is good.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;The original motivation for this patch was due to &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12635&quot; title=&quot;Delete acl notify znode of table after the table is deleted&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12635&quot;&gt;&lt;del&gt;HBASE-12635&lt;/del&gt;&lt;/a&gt; having left a dynamic cluster with lots of regions with 60K acl definitions. The zk watcher thread will spend 3+ minutes just to do the refresh acls. Even with &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12635&quot; title=&quot;Delete acl notify znode of table after the table is deleted&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12635&quot;&gt;&lt;del&gt;HBASE-12635&lt;/del&gt;&lt;/a&gt; fixed, I think we should follow the practice of forking a thread to process the zk notifications. I did not do the perf analysis, but we have a cluster with 2000 tables which may make the refreshNodes() to be in the multi-seconds range. &lt;/p&gt;

&lt;p&gt;The ref counting is unfortunate, since there is no easy way to have an executor corresponding to a TableAuthManager since TableAuthManager itself is a static cache. We could have added the executor as one of the core RS threads, but that seems also a bit hacky. If there are suggestions there, I can try it out. &lt;/p&gt;

&lt;p&gt;Coming back to patch, Ted, I think I got the motivation for the preemption. v10 patch looks fine to me. &lt;/p&gt;</comment>
                            <comment id="14740086" author="yuzhihong@gmail.com" created="Fri, 11 Sep 2015 03:13:52 +0000"  >&lt;p&gt;Rerun failed tests shown above and they passed locally.&lt;/p&gt;</comment>
                            <comment id="14740106" author="yuzhihong@gmail.com" created="Fri, 11 Sep 2015 03:34:11 +0000"  >&lt;p&gt;Patch for branch-1.&lt;/p&gt;</comment>
                            <comment id="14740594" author="yuzhihong@gmail.com" created="Fri, 11 Sep 2015 11:17:44 +0000"  >&lt;p&gt;TestAccessController3 seems to hang in branch-1.&lt;br/&gt;
Here is part of stack trace:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; prio=5 tid=0x00007ff522800000 nid=0x1903 in &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait() [0x00000001098f7000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: TIMED_WAITING (on object monitor)
  at java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait(Native Method)
  - waiting on &amp;lt;0x00000007c6a63358&amp;gt; (a java.util.concurrent.atomic.AtomicBoolean)
  at org.apache.hadoop.hbase.client.RpcRetryingCaller.callWithRetries(RpcRetryingCaller.java:168)
  - locked &amp;lt;0x00000007c6a63358&amp;gt; (a java.util.concurrent.atomic.AtomicBoolean)
  at org.apache.hadoop.hbase.ipc.RegionCoprocessorRpcChannel.callExecService(RegionCoprocessorRpcChannel.java:95)
  at org.apache.hadoop.hbase.ipc.CoprocessorRpcChannel.callBlockingMethod(CoprocessorRpcChannel.java:73)
  at org.apache.hadoop.hbase.protobuf.generated.AccessControlProtos$AccessControlService$BlockingStub.grant(AccessControlProtos.java:10280)
  at org.apache.hadoop.hbase.protobuf.ProtobufUtil.grant(ProtobufUtil.java:2181)
  at org.apache.hadoop.hbase.security.access.SecureTestUtil$2.call(SecureTestUtil.java:375)
  at org.apache.hadoop.hbase.security.access.SecureTestUtil$2.call(SecureTestUtil.java:367)
  at org.apache.hadoop.hbase.security.access.SecureTestUtil.updateACLs(SecureTestUtil.java:332)
  at org.apache.hadoop.hbase.security.access.SecureTestUtil.grantGlobal(SecureTestUtil.java:367)
  at org.apache.hadoop.hbase.security.access.TestAccessController3.setUpTableAndUserPermissions(TestAccessController3.java:243)
  at org.apache.hadoop.hbase.security.access.TestAccessController3.setupBeforeClass(TestAccessController3.java:187)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14740640" author="yuzhihong@gmail.com" created="Fri, 11 Sep 2015 11:47:34 +0000"  >&lt;p&gt;Turns out &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14378&quot; title=&quot;Get TestAccessController* passing again on branch-1&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14378&quot;&gt;&lt;del&gt;HBASE-14378&lt;/del&gt;&lt;/a&gt; covers TestAccessController&amp;#42; already.&lt;/p&gt;

&lt;p&gt;Would wait for that to go in first.&lt;/p&gt;</comment>
                            <comment id="14740942" author="yuzhihong@gmail.com" created="Fri, 11 Sep 2015 14:59:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt;:&lt;br/&gt;
I am preparing backport to 0.98 branch.&lt;/p&gt;

&lt;p&gt;Let me know if you have comments.&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="14740983" author="apurtell" created="Fri, 11 Sep 2015 15:31:58 +0000"  >&lt;p&gt;Review looks solid, no comments, please go ahead.&lt;/p&gt;</comment>
                            <comment id="14741075" author="hadoopqa" created="Fri, 11 Sep 2015 16:24:55 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12755409/14370-branch-1-v10.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12755409/14370-branch-1-v10.txt&lt;/a&gt;&lt;br/&gt;
  against branch-1 branch at commit c438052cc2280121727d4ae0883f0b76cad5816a.&lt;br/&gt;
  ATTACHMENT ID: 12755409&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 14 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;                &lt;font color=&quot;red&quot;&gt;-1 checkstyle&lt;/font&gt;.  The applied patch generated 3815 checkstyle errors (more than the master&apos;s current 3814 errors).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.snapshot.TestFlushSnapshotFromClient&lt;br/&gt;
                  org.apache.hadoop.hbase.mapred.TestTableMapReduce&lt;br/&gt;
                  org.apache.hadoop.hbase.client.TestSnapshotCloneIndependence&lt;br/&gt;
                  org.apache.hadoop.hbase.mapreduce.TestImportTsv&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core zombie tests&lt;/font&gt;.  There are 23 zombie test(s): 	at org.apache.hadoop.hbase.security.visibility.TestVisibilityLabelsWithACL.testVisibilityLabelsForUserWithNoAuths(TestVisibilityLabelsWithACL.java:203)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.TestMajorCompaction.testUserMajorCompactionRequest(TestMajorCompaction.java:429)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.TestSplitTransactionOnCluster.testSplitWithRegionReplicas(TestSplitTransactionOnCluster.java:1024)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.TestCorruptedRegionStoreFile.testLosingFileAfterScannerInit(TestCorruptedRegionStoreFile.java:172)&lt;br/&gt;
	at org.apache.hadoop.hbase.mapred.TestTableSnapshotInputFormat.testInitTableSnapshotMapperJobConfig(TestTableSnapshotInputFormat.java:104)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.TestAtomicOperation.testIncrementMultiThreads(TestAtomicOperation.java:166)&lt;br/&gt;
	at org.apache.hadoop.hbase.snapshot.TestExportSnapshot.testExportFileSystemState(TestExportSnapshot.java:286)&lt;br/&gt;
	at org.apache.hadoop.hbase.snapshot.TestExportSnapshot.testExportFileSystemState(TestExportSnapshot.java:260)&lt;br/&gt;
	at org.apache.hadoop.hbase.snapshot.TestExportSnapshot.testExportFileSystemState(TestExportSnapshot.java:193)&lt;br/&gt;
	at org.apache.hadoop.hbase.mapreduce.TestImportTsv.testMROnTable(TestImportTsv.java:116)&lt;br/&gt;
	at org.apache.hadoop.hbase.mapred.TestTableInputFormat.testInputFormat(TestTableInputFormat.java:353)&lt;br/&gt;
	at org.apache.hadoop.hbase.mapred.TestTableInputFormat.testDeprecatedExtensionOfTableInputFormatBase(TestTableInputFormat.java:334)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.TestRegionReplicas.testRefreshStoreFiles(TestRegionReplicas.java:250)&lt;br/&gt;
	at org.apache.hadoop.hbase.snapshot.TestExportSnapshot.testExportFileSystemState(TestExportSnapshot.java:286)&lt;br/&gt;
	at org.apache.hadoop.hbase.snapshot.TestExportSnapshot.testExportFileSystemState(TestExportSnapshot.java:260)&lt;br/&gt;
	at org.apache.hadoop.hbase.snapshot.TestExportSnapshot.testExportWithTargetName(TestExportSnapshot.java:218)&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15562//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15562//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15562//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15562//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15562//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15562//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;                Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15562//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15562//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14741104" author="yuzhihong@gmail.com" created="Fri, 11 Sep 2015 16:42:53 +0000"  >&lt;p&gt;QA environment issue:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
testRegionCrossingHFileSplitRowBloom(org.apache.hadoop.hbase.mapreduce.TestLoadIncrementalHFilesUseSecurityEndPoint)  Time elapsed: 1.308 sec  &amp;lt;&amp;lt;&amp;lt; ERROR!
org.apache.hadoop.ipc.RemoteException: unable to create &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;native&lt;/span&gt; thread
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I don&apos;t think any of the above test failure is involved with enabling ACL.&lt;/p&gt;

&lt;p&gt;I am running the tests locally to make sure they pass.&lt;/p&gt;</comment>
                            <comment id="14741247" author="yuzhihong@gmail.com" created="Fri, 11 Sep 2015 17:57:20 +0000"  >&lt;p&gt;Patch for 0.98 branch&lt;/p&gt;</comment>
                            <comment id="14741495" author="hadoopqa" created="Fri, 11 Sep 2015 20:33:04 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12755457/14370-0.98-v10.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12755457/14370-0.98-v10.txt&lt;/a&gt;&lt;br/&gt;
  against 0.98 branch at commit c94d10952fe44f73096027cc9083cee993983940.&lt;br/&gt;
  ATTACHMENT ID: 12755457&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 14 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 22 warning messages.&lt;/p&gt;

&lt;p&gt;                &lt;font color=&quot;red&quot;&gt;-1 checkstyle&lt;/font&gt;.  The applied patch generated 3869 checkstyle errors (more than the master&apos;s current 3868 errors).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;/p&gt;


&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15567//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15567//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15567//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15567//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15567//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15567//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;                Javadoc warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15567//artifact/patchprocess/patchJavadocWarnings.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15567//artifact/patchprocess/patchJavadocWarnings.txt&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15567//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15567//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14741503" author="yuzhihong@gmail.com" created="Fri, 11 Sep 2015 20:38:02 +0000"  >&lt;p&gt;For 0.98 QA run:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
fht https:&lt;span class=&quot;code-comment&quot;&gt;//builds.apache.org/job/PreCommit-HBASE-Build/15567/console
&lt;/span&gt;Fetching the console output from the URL
Printing hanging tests
Hanging test : org.apache.hadoop.hbase.mapreduce.TestTableInputFormatScan1
Hanging test : org.apache.hadoop.hbase.mapreduce.TestMultiTableInputFormat
Printing Failing tests
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The above hanging tests were not related to the patch.&lt;/p&gt;

&lt;p&gt;Planning to commit in the near future.&lt;/p&gt;</comment>
                            <comment id="14741857" author="hudson" created="Sat, 12 Sep 2015 02:27:02 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-TRUNK #6800 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/6800/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/6800/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14370&quot; title=&quot;Use separate thread for calling ZKPermissionWatcher#refreshNodes()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14370&quot;&gt;&lt;del&gt;HBASE-14370&lt;/del&gt;&lt;/a&gt; Use separate thread for calling ZKPermissionWatcher#refreshNodes() (tedyu: rev dff5243c89544de8ed3127a7df5ec79cdab3373b)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/security/access/TestTablePermissions.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/security/access/TestZKPermissionsWatcher.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/security/access/TestAccessController.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/security/access/AccessController.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/security/access/ZKPermissionWatcher.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/security/access/TestAccessController3.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/security/access/SecureTestUtil.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/security/access/TableAuthManager.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14741866" author="hudson" created="Sat, 12 Sep 2015 03:05:33 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.98-on-Hadoop-1.1 #1073 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/1073/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/1073/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14370&quot; title=&quot;Use separate thread for calling ZKPermissionWatcher#refreshNodes()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14370&quot;&gt;&lt;del&gt;HBASE-14370&lt;/del&gt;&lt;/a&gt; Use separate thread for calling ZKPermissionWatcher#refreshNodes() (tedyu: rev c5f3f68339f4a87bfa7823a8b8edad33a51b205c)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/security/access/TestAccessController3.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/security/access/TestTablePermissions.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/security/access/AccessController.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/security/access/TableAuthManager.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/security/access/TestZKPermissionsWatcher.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/security/access/SecureTestUtil.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/security/access/TestAccessController.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/security/access/ZKPermissionWatcher.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14741897" author="hudson" created="Sat, 12 Sep 2015 04:28:17 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.98 #1120 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98/1120/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98/1120/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14370&quot; title=&quot;Use separate thread for calling ZKPermissionWatcher#refreshNodes()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14370&quot;&gt;&lt;del&gt;HBASE-14370&lt;/del&gt;&lt;/a&gt; Use separate thread for calling ZKPermissionWatcher#refreshNodes() (tedyu: rev c5f3f68339f4a87bfa7823a8b8edad33a51b205c)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/security/access/TestZKPermissionsWatcher.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/security/access/TestAccessController.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/security/access/TestAccessController3.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/security/access/ZKPermissionWatcher.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/security/access/TestTablePermissions.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/security/access/SecureTestUtil.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/security/access/TableAuthManager.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/security/access/AccessController.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14876396" author="yuzhihong@gmail.com" created="Fri, 18 Sep 2015 20:58:16 +0000"  >&lt;p&gt;Waiting for green branch-1.x build before integrating to those branches.&lt;/p&gt;</comment>
                            <comment id="14900183" author="anoop.hbase" created="Mon, 21 Sep 2015 04:14:33 +0000"  >&lt;blockquote&gt;&lt;p&gt;private static Map&amp;lt;TableAuthManager, Integer&amp;gt; refCount = new HashMap&amp;lt;&amp;gt;();&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Can&apos;t we have refCount info within TableAuthManager  instance? The &apos;release&apos; method can be on instance rather than a static?&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;public void close() &lt;/p&gt;
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {
107	    executor.shutdown();
108	  }&lt;/span&gt; &lt;/div&gt;&lt;/blockquote&gt;
&lt;p&gt;Do we need call shutdownNow() so that the running Runnable may be interrupted ?&lt;/p&gt;</comment>
                            <comment id="14900191" author="yuzhihong@gmail.com" created="Mon, 21 Sep 2015 04:43:18 +0000"  >&lt;blockquote&gt;&lt;p&gt;Can&apos;t we have refCount info within TableAuthManager instance&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Having refCount as static makes tracking outstanding TableAuthManager instance(s) easy.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Do we need call shutdownNow() &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Calling shutdown() allows outstanding notifications to be processed.&lt;/p&gt;</comment>
                            <comment id="14900195" author="anoop.hbase" created="Mon, 21 Sep 2015 04:48:54 +0000"  >&lt;p&gt;You want it to be processed? After the close()?&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Having refCount as static makes tracking outstanding TableAuthManager instance(s) easy&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt; But do we have a tracking mechanism?  &lt;/p&gt;</comment>
                            <comment id="14900218" author="anoop.hbase" created="Mon, 21 Sep 2015 05:24:24 +0000"  >&lt;p&gt;I see this is already committed and only branch-1 commit was pending.  Sorry for the delay in review.&lt;br/&gt;
These are not so serious. Feel free to ignore as of now. If we want we can do later.&lt;/p&gt;</comment>
                            <comment id="14901515" author="apurtell" created="Mon, 21 Sep 2015 22:21:28 +0000"  >&lt;p&gt;This has been committed, the issue should be resolved as Fixed.&lt;/p&gt;</comment>
                            <comment id="14901517" author="apurtell" created="Mon, 21 Sep 2015 22:22:27 +0000"  >&lt;p&gt;Update fix versions when committed to other branches&lt;/p&gt;</comment>
                            <comment id="14907541" author="yuzhihong@gmail.com" created="Fri, 25 Sep 2015 04:17:35 +0000"  >&lt;p&gt;Re-attaching for test run.&lt;/p&gt;</comment>
                            <comment id="14907965" author="hadoopqa" created="Fri, 25 Sep 2015 11:51:32 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12762313/14370-branch-1-v10.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12762313/14370-branch-1-v10.txt&lt;/a&gt;&lt;br/&gt;
  against branch-1 branch at commit a33adf2f0b050e9cf9330fd5ab7e200a7dd27d6d.&lt;br/&gt;
  ATTACHMENT ID: 12762313&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 14 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;                &lt;font color=&quot;red&quot;&gt;-1 checkstyle&lt;/font&gt;.  The applied patch generated 3777 checkstyle errors (more than the master&apos;s current 3776 errors).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;/p&gt;


&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core zombie tests&lt;/font&gt;.  There are 1 zombie test(s): &lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15739//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15739//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15739//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15739//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15739//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15739//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;                Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15739//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15739//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14908054" author="yuzhihong@gmail.com" created="Fri, 25 Sep 2015 13:53:36 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
fht https:&lt;span class=&quot;code-comment&quot;&gt;//builds.apache.org/job/PreCommit-HBASE-Build/15739/consoleFull
&lt;/span&gt;Fetching the console output from the URL
Printing hanging tests
Hanging test : org.apache.hadoop.hbase.security.access.TestWithDisabledAuthorization
Printing Failing tests
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;From &lt;a href=&quot;https://builds.apache.org/job/HBase-1.3/jdk=latest1.7,label=Hadoop/203/consoleFull&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.3/jdk=latest1.7,label=Hadoop/203/consoleFull&lt;/a&gt; :&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; prio=10 tid=0x00007fa16c00a800 nid=0x4e8 waiting on condition [0x00007fa173269000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: TIMED_WAITING (sleeping)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.sleep(Native Method)
	at org.apache.hadoop.hbase.client.ConnectionManager$HConnectionImplementation.locateRegionInMeta(ConnectionManager.java:1339)
	at org.apache.hadoop.hbase.client.ConnectionManager$HConnectionImplementation.locateRegion(ConnectionManager.java:1159)
	at org.apache.hadoop.hbase.client.ConnectionManager$HConnectionImplementation.relocateRegion(ConnectionManager.java:1130)
	at org.apache.hadoop.hbase.client.ConnectionManager$HConnectionImplementation.relocateRegion(ConnectionManager.java:1114)
	at org.apache.hadoop.hbase.client.ConnectionManager$HConnectionImplementation.getRegionLocation(ConnectionManager.java:935)
	at org.apache.hadoop.hbase.client.HRegionLocator.getRegionLocation(HRegionLocator.java:83)
	at org.apache.hadoop.hbase.client.RegionServerCallable.prepare(RegionServerCallable.java:79)
	at org.apache.hadoop.hbase.client.RpcRetryingCaller.callWithRetries(RpcRetryingCaller.java:124)
	at org.apache.hadoop.hbase.ipc.RegionCoprocessorRpcChannel.callExecService(RegionCoprocessorRpcChannel.java:95)
	at org.apache.hadoop.hbase.ipc.CoprocessorRpcChannel.callBlockingMethod(CoprocessorRpcChannel.java:73)
	at org.apache.hadoop.hbase.protobuf.generated.AccessControlProtos$AccessControlService$BlockingStub.grant(AccessControlProtos.java:10280)
	at org.apache.hadoop.hbase.protobuf.ProtobufUtil.grant(ProtobufUtil.java:2209)
	at org.apache.hadoop.hbase.security.access.SecureTestUtil$8.call(SecureTestUtil.java:502)
	at org.apache.hadoop.hbase.security.access.SecureTestUtil$8.call(SecureTestUtil.java:494)
	at org.apache.hadoop.hbase.security.access.SecureTestUtil.updateACLs(SecureTestUtil.java:324)
	at org.apache.hadoop.hbase.security.access.SecureTestUtil.grantOnTable(SecureTestUtil.java:494)
	at org.apache.hadoop.hbase.security.access.TestWithDisabledAuthorization.setUp(TestWithDisabledAuthorization.java:203)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;So it was not regression.&lt;/p&gt;</comment>
                            <comment id="14908299" author="hudson" created="Fri, 25 Sep 2015 16:45:27 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.3 #204 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.3/204/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.3/204/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14370&quot; title=&quot;Use separate thread for calling ZKPermissionWatcher#refreshNodes()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14370&quot;&gt;&lt;del&gt;HBASE-14370&lt;/del&gt;&lt;/a&gt; Use separate thread for calling ZKPermissionWatcher#refreshNodes() (tedyu: rev 52188c5c4a55483bea229c77ab37b9bcbe9b3623)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/security/access/TestAccessController3.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/security/access/ZKPermissionWatcher.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/security/access/TestZKPermissionsWatcher.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/security/access/TableAuthManager.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/security/access/AccessController.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/security/access/TestAccessController.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/security/access/SecureTestUtil.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/security/access/TestTablePermissions.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14908314" author="hudson" created="Fri, 25 Sep 2015 16:54:19 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.3-IT #182 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.3-IT/182/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.3-IT/182/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14370&quot; title=&quot;Use separate thread for calling ZKPermissionWatcher#refreshNodes()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14370&quot;&gt;&lt;del&gt;HBASE-14370&lt;/del&gt;&lt;/a&gt; Use separate thread for calling ZKPermissionWatcher#refreshNodes() (tedyu: rev 52188c5c4a55483bea229c77ab37b9bcbe9b3623)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/security/access/ZKPermissionWatcher.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/security/access/TestAccessController.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/security/access/AccessController.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/security/access/TestTablePermissions.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/security/access/SecureTestUtil.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/security/access/TableAuthManager.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/security/access/TestZKPermissionsWatcher.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/security/access/TestAccessController3.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14908966" author="apurtell" created="Sat, 26 Sep 2015 01:25:28 +0000"  >&lt;p&gt;Why is this open again? Commit, then resolve. Don&apos;t commit and not resolve. Thanks for helping RMs keep JIRA clean!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12755457" name="14370-0.98-v10.txt" size="31639" author="yuzhihong@gmail.com" created="Fri, 11 Sep 2015 17:57:20 +0000"/>
                            <attachment id="12762313" name="14370-branch-1-v10.txt" size="31889" author="yuzhihong@gmail.com" created="Fri, 25 Sep 2015 04:17:35 +0000"/>
                            <attachment id="12755409" name="14370-branch-1-v10.txt" size="31889" author="yuzhihong@gmail.com" created="Fri, 11 Sep 2015 14:00:31 +0000"/>
                            <attachment id="12755312" name="14370-branch-1-v10.txt" size="31711" author="yuzhihong@gmail.com" created="Fri, 11 Sep 2015 03:34:11 +0000"/>
                            <attachment id="12754332" name="14370-v1.txt" size="5417" author="yuzhihong@gmail.com" created="Sat, 5 Sep 2015 16:35:16 +0000"/>
                            <attachment id="12755242" name="14370-v10.txt" size="31804" author="yuzhihong@gmail.com" created="Thu, 10 Sep 2015 21:50:26 +0000"/>
                            <attachment id="12754718" name="14370-v3.txt" size="7389" author="yuzhihong@gmail.com" created="Tue, 8 Sep 2015 19:51:31 +0000"/>
                            <attachment id="12755052" name="14370-v5.txt" size="16050" author="yuzhihong@gmail.com" created="Thu, 10 Sep 2015 02:33:08 +0000"/>
                            <attachment id="12755121" name="14370-v7.txt" size="17960" author="yuzhihong@gmail.com" created="Thu, 10 Sep 2015 12:22:20 +0000"/>
                            <attachment id="12755178" name="14370-v8.txt" size="17348" author="yuzhihong@gmail.com" created="Thu, 10 Sep 2015 17:17:45 +0000"/>
                            <attachment id="12754878" name="14370-wait-nofity-v2.txt" size="5705" author="yuzhihong@gmail.com" created="Wed, 9 Sep 2015 10:12:51 +0000"/>
                            <attachment id="12754799" name="14370-wait-nofity.txt" size="5581" author="yuzhihong@gmail.com" created="Wed, 9 Sep 2015 02:31:51 +0000"/>
                            <attachment id="12755024" name="hbase-14370_v4.patch" size="15877" author="enis" created="Wed, 9 Sep 2015 23:26:21 +0000"/>
                            <attachment id="12755384" name="test-acl3-branch-1.stack" size="165059" author="yuzhihong@gmail.com" created="Fri, 11 Sep 2015 11:18:25 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>14.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 5 Sep 2015 16:21:46 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 9 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2jtnz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>