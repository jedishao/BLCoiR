<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 02 18:53:05 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-709/HBASE-709.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-709] Deadlock while rolling WAL-log while finishing flush</title>
                <link>https://issues.apache.org/jira/browse/HBASE-709</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Found this in our cluster:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Found one Java-level deadlock:
=============================
&lt;span class=&quot;code-quote&quot;&gt;&quot;IPC Server handler 5 on 60020&quot;&lt;/span&gt;:
  waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; ownable synchronizer 0x00007f5f659d4e90, (a java.util.concurrent.locks.ReentrantLock$NonfairSync),
  which is held by &lt;span class=&quot;code-quote&quot;&gt;&quot;regionserver/0:0:0:0:0:0:0:0:60020.cacheFlusher&quot;&lt;/span&gt;
&lt;span class=&quot;code-quote&quot;&gt;&quot;regionserver/0:0:0:0:0:0:0:0:60020.cacheFlusher&quot;&lt;/span&gt;:
  waiting to lock monitor 0x00007f5f56312f78 (object 0x00007f5f659d4ec0, a java.lang.&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;),
  which is held by &lt;span class=&quot;code-quote&quot;&gt;&quot;IPC Server handler 5 on 60020&quot;&lt;/span&gt;

Java stack information &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the threads listed above:
===================================================
&lt;span class=&quot;code-quote&quot;&gt;&quot;IPC Server handler 5 on 60020&quot;&lt;/span&gt;:
        at sun.misc.Unsafe.park(Native Method)
        - parking to wait &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;  &amp;lt;0x00007f5f659d4e90&amp;gt; (a java.util.concurrent.locks.ReentrantLock$NonfairSync)
        at java.util.concurrent.locks.LockSupport.park(Unknown Source)
        at java.util.concurrent.locks.AbstractQueuedSynchronizer.parkAndCheckInterrupt(Unknown Source)
        at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireQueued(Unknown Source)
        at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquire(Unknown Source)
        at java.util.concurrent.locks.ReentrantLock$NonfairSync.lock(Unknown Source)
        at java.util.concurrent.locks.ReentrantLock.lock(Unknown Source)
        at org.apache.hadoop.hbase.HLog.rollWriter(HLog.java:219)
        at org.apache.hadoop.hbase.HLog.append(HLog.java:390)
        - locked &amp;lt;0x00007f5f659d4ec0&amp;gt; (a java.lang.&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;)
        at org.apache.hadoop.hbase.HRegion.update(HRegion.java:1633)
        at org.apache.hadoop.hbase.HRegion.batchUpdate(HRegion.java:1436)
        at org.apache.hadoop.hbase.HRegionServer.batchUpdate(HRegionServer.java:1552)
        at sun.reflect.GeneratedMethodAccessor9.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at org.apache.hadoop.hbase.ipc.HbaseRPC$Server.call(HbaseRPC.java:413)
        at org.apache.hadoop.ipc.Server$Handler.run(Server.java:901)
&lt;span class=&quot;code-quote&quot;&gt;&quot;regionserver/0:0:0:0:0:0:0:0:60020.cacheFlusher&quot;&lt;/span&gt;:
        at org.apache.hadoop.hbase.HLog.completeCacheFlush(HLog.java:481)
        - waiting to lock &amp;lt;0x00007f5f659d4ec0&amp;gt; (a java.lang.&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;)
        at org.apache.hadoop.hbase.HRegion.internalFlushcache(HRegion.java:1133)
        at org.apache.hadoop.hbase.HRegion.flushcache(HRegion.java:1020)
        at org.apache.hadoop.hbase.HRegionServer$Flusher.flushRegion(HRegionServer.java:446)
        - locked &amp;lt;0x00007f5f659d3ec8&amp;gt; (a java.util.HashSet)
        at org.apache.hadoop.hbase.HRegionServer$Flusher.run(HRegionServer.java:390)

Found 1 deadlock.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12399034">HBASE-709</key>
            <summary>Deadlock while rolling WAL-log while finishing flush</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.png">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stack">stack</assignee>
                                    <reporter username="stack">stack</reporter>
                        <labels>
                    </labels>
                <created>Wed, 25 Jun 2008 20:53:50 +0000</created>
                <updated>Fri, 22 Aug 2008 21:13:19 +0000</updated>
                            <resolved>Thu, 26 Jun 2008 03:29:53 +0000</resolved>
                                                    <fixVersion>0.1.3</fixVersion>
                    <fixVersion>0.2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12608203" author="stack" created="Wed, 25 Jun 2008 21:30:48 +0000"  >&lt;p&gt;Fix for deadlock.  Removed last-ditch effort that would force roll of log when HDFS issue and then retry append.  The log rolling makes for a deadlock.  Instead, just register a roll of the log and just let out the exception.&lt;/p&gt;</comment>
                            <comment id="12608204" author="stack" created="Wed, 25 Jun 2008 21:31:51 +0000"  >&lt;p&gt;Made it blocker because it hangs up the regionserver; regionserver keeps reporting that alls fine so regions do not get deployed elsewhere.&lt;/p&gt;</comment>
                            <comment id="12608205" author="stack" created="Wed, 25 Jun 2008 21:32:09 +0000"  >&lt;p&gt;Please review.&lt;/p&gt;</comment>
                            <comment id="12608244" author="jimk" created="Thu, 26 Jun 2008 01:21:32 +0000"  >&lt;p&gt;deadlock.txt is a patch for branch (I&apos;m assuming, since otherwise HLog has a different location)&lt;/p&gt;</comment>
                            <comment id="12608245" author="jimk" created="Thu, 26 Jun 2008 01:36:18 +0000"  >&lt;p&gt;Reviewed patch +1.&lt;/p&gt;</comment>
                            <comment id="12608262" author="stack" created="Thu, 26 Jun 2008 03:29:53 +0000"  >&lt;p&gt;Committed to branch and trunk&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12384711" name="deadlock.txt" size="1633" author="stack" created="Wed, 25 Jun 2008 21:30:48 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 26 Jun 2008 01:21:32 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>25351</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 24 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0h8yv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>98715</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>