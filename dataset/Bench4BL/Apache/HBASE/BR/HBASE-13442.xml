<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sat Dec 03 16:33:44 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-13442/HBASE-13442.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-13442] Rename scanner caching to a more semantically correct term such as row limit</title>
                <link>https://issues.apache.org/jira/browse/HBASE-13442</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Caching acts more as a row limit now. By default in branch-1+, a Scan is configured with (caching=Integer.MAX_VALUE, maxResultSize=2MB) so that we service scans on the basis of buffer size rather than number of rows. As a result, caching should now only be configured in instances where the user knows that they will only need X rows. Thus, caching should be renamed to something that is more semantically correct such as rowLimit.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12819806">HBASE-13442</key>
            <summary>Rename scanner caching to a more semantically correct term such as row limit</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12819804">HBASE-13441</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jonathan.lawlor">Jonathan Lawlor</reporter>
                        <labels>
                    </labels>
                <created>Thu, 9 Apr 2015 19:55:23 +0000</created>
                <updated>Thu, 23 Apr 2015 16:49:01 +0000</updated>
                            <resolved>Thu, 23 Apr 2015 16:49:01 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="14488252" author="davelatham" created="Thu, 9 Apr 2015 20:53:30 +0000"  >&lt;p&gt;I&apos;d propose that we give it a name like row limit, and also make it actually limit the number of rows the client returns to the app.&lt;/p&gt;</comment>
                            <comment id="14505731" author="jonathan.lawlor" created="Tue, 21 Apr 2015 20:50:42 +0000"  >&lt;p&gt;Here&apos;s a look at what the proposed API change would look like (before it is integrated into the rest of the codebase). In summary:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;The current APIs setCaching/getCaching are deprecated in 2.0.0&lt;/li&gt;
	&lt;li&gt;The new APIs setRPCRowLimit/getRPCRowLimit take the place of caching&lt;/li&gt;
	&lt;li&gt;There is no change in the actual behavior behavior (yet... see below), just a change in name. The name change makes it clear what using the API will actually do.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Discussion:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Thoughts on new API names? Other recommendations?&lt;/li&gt;
	&lt;li&gt;Should behavior stay the same? Alternatively, as &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davelatham&quot; class=&quot;user-hover&quot; rel=&quot;davelatham&quot;&gt;Dave Latham&lt;/a&gt; suggested, should we instead make it actually limit the number of rows the client returns to the app (once the row limit is reached the scanner would be closed and return null on future calls to scanner.next())? If the alternative is pursued, it would be more appropriate to call it rowLimit rather than rpcRowLimit.&lt;/li&gt;
	&lt;li&gt;Anything other suggestions?&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14505774" author="davelatham" created="Tue, 21 Apr 2015 21:11:06 +0000"  >&lt;p&gt;It may be good to understand how people actually want to use this thing  In my mind the client API and the protocol to the server are two separate things.  I can see applications that want to scan N rows from a given start point.  To support them we could put a rowLimit in the client API or require row filters.  The protocol itself could still allow the client to ask the server for N rows or M bytes, whichever comes first.  If the app is not actually limiting its results, I don&apos;t see why an app should care specifically about how many rows the client transfers from the server in each RPC - bytes seem the more relevant currency to tune for performance. &lt;/p&gt;</comment>
                            <comment id="14505836" author="jonathan.lawlor" created="Tue, 21 Apr 2015 21:44:43 +0000"  >&lt;blockquote&gt;&lt;p&gt;I don&apos;t see why an app should care specifically about how many rows the client transfers from the server in each RPC - bytes seem the more relevant currency to tune for performance.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Really good point, I can&apos;t think of such a scenario either. Certainly we want to return results from the server on the basis of size rather than some arbitrary number of rows (since row size can vary table to table, there isn&apos;t a universally &quot;good&quot; row limit). This is supported by the move to the default configurations of (caching = Integer.MAX_VALUE, maxResultSize = 2 MB). So actually, the best course of action here wouldn&apos;t be to rename caching... but actually to deprecate it so eventually it can be removed completely in favor of rowLimit.&lt;/p&gt;

&lt;p&gt;The feature in the protocol that allows the client to ask for a certain number of rows would remain, but only be used for backwards compatibility and for the scenario that the client wants to limit itself to only a certain number of rows. Makes sense to me.&lt;/p&gt;

&lt;p&gt;With such a change, we would also want to remove any associated configurations for caching/rowlimit  in hbase-site.xml and hbase-default.xml. There isn&apos;t a scenario (at least that I can think of) where it would be appropriate to limit all scans to a particular number of rows and then close them. The row limit would be like the startRow or stopRow settings on scans, configured on a per scan basis with no means to set a global default for all scans.&lt;/p&gt;</comment>
                            <comment id="14505904" author="stack" created="Tue, 21 Apr 2015 22:13:23 +0000"  >&lt;p&gt;Yeah, purge/deprecate caching and purge/deprecate rpc row limit for reasons you all give above. I&apos;d go further and purge setting size on a Scan too while we are at it... Let RPC or server-side figure what is best size to chunk responses in... Having the Scan setting size is wonky especially when many concurrent scans going on.&lt;/p&gt;

&lt;p&gt;Regard&apos;s Daves row limit, suggest that that be done via a filter rather than sully base Scan API since I think it qualifies as exotic.&lt;/p&gt;
</comment>
                            <comment id="14509347" author="jonathan.lawlor" created="Thu, 23 Apr 2015 16:49:01 +0000"  >&lt;p&gt;Closing this one in favor of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13541&quot; title=&quot;Deprecate Scan caching in 2.0.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13541&quot;&gt;HBASE-13541&lt;/a&gt;. Please reopen if there are any outstanding concerns.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12726995" name="HBASE-13442-proposal.diff" size="6456" author="jonathan.lawlor" created="Tue, 21 Apr 2015 20:50:41 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 9 Apr 2015 20:53:30 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 32 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2d207:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>