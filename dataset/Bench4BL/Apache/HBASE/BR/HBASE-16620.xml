<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Thu Dec 01 22:52:38 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-16620/HBASE-16620.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-16620] Fix backup command-line tool usability issues</title>
                <link>https://issues.apache.org/jira/browse/HBASE-16620</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;We need to address issues found by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=saint.ack%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;saint.ack@gmail.com&quot;&gt;Stack&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7912?focusedCommentId=15484865&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15484865&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-7912?focusedCommentId=15484865&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15484865&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13004406">HBASE-16620</key>
            <summary>Fix backup command-line tool usability issues</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="vrodionov">Vladimir Rodionov</assignee>
                                    <reporter username="vrodionov">Vladimir Rodionov</reporter>
                        <labels>
                            <label>backup</label>
                    </labels>
                <created>Mon, 12 Sep 2016 19:36:04 +0000</created>
                <updated>Mon, 19 Sep 2016 21:03:47 +0000</updated>
                            <resolved>Thu, 15 Sep 2016 18:50:11 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="15486105" author="vrodionov" created="Tue, 13 Sep 2016 03:25:09 +0000"  >&lt;p&gt;Updated command-line usage patch. cc: &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tedyu&quot; class=&quot;user-hover&quot; rel=&quot;tedyu&quot;&gt;Ted Yu&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15487664" author="yuzhihong@gmail.com" created="Tue, 13 Sep 2016 16:28:01 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
87	          + &lt;span class=&quot;code-quote&quot;&gt;&quot; -t              table name. If specified, only backup images, which contain &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; table\n &quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The above should start with &apos;-t table&apos; to match synopsis.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (tables == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
+          &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;ERROR: Backup set &apos;&quot;&lt;/span&gt; + setName+ &lt;span class=&quot;code-quote&quot;&gt;&quot;&apos; is either empty or does not exist&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;System.err should be used when exit code is negative, right ?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+      } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt;(IllegalArgumentException e) {
+        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;ERROR: Illegal argument &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; backup root path: &quot;&lt;/span&gt;+ value);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Add space between catch and (.&lt;br/&gt;
Please use System.err&lt;/p&gt;
</comment>
                            <comment id="15488547" author="yuzhihong@gmail.com" created="Tue, 13 Sep 2016 21:51:59 +0000"  >&lt;p&gt;Patch v2 changes System.out to System.err where -1 is returned as exit code.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vrodionov&quot; class=&quot;user-hover&quot; rel=&quot;vrodionov&quot;&gt;Vladimir Rodionov&lt;/a&gt;:&lt;br/&gt;
If you&apos;re Okay with v2, I can commit it.&lt;/p&gt;</comment>
                            <comment id="15488581" author="yuzhihong@gmail.com" created="Tue, 13 Sep 2016 22:02:03 +0000"  >&lt;p&gt;Ran TestBackupShowHistory with patch v2 which passed.&lt;/p&gt;</comment>
                            <comment id="15489265" author="vrodionov" created="Wed, 14 Sep 2016 03:31:20 +0000"  >&lt;p&gt;patch v3.&lt;/p&gt;</comment>
                            <comment id="15489305" author="yuzhihong@gmail.com" created="Wed, 14 Sep 2016 03:49:45 +0000"  >&lt;p&gt;Apart from adding tests in v3, any other change(s) ?&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="15489307" author="yuzhihong@gmail.com" created="Wed, 14 Sep 2016 03:50:42 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void backupDriverDeleteHelp () &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Please name the sub-test testBackupDriverDeleteHelp().&lt;/p&gt;

&lt;p&gt;Same with other new tests.&lt;/p&gt;</comment>
                            <comment id="15490513" author="yuzhihong@gmail.com" created="Wed, 14 Sep 2016 14:01:49 +0000"  >&lt;p&gt;Patch v4 removes white spaces.&lt;br/&gt;
Also changes test names.&lt;/p&gt;</comment>
                            <comment id="15490580" author="yuzhihong@gmail.com" created="Wed, 14 Sep 2016 14:35:08 +0000"  >&lt;p&gt;Thanks for the patch, Vlad.&lt;/p&gt;</comment>
                            <comment id="15490872" author="stack" created="Wed, 14 Sep 2016 16:32:34 +0000"  >&lt;p&gt;What of the issues were addressed by this patch? There is no description. Thanks. Is the branch ready for another usage by dumb &apos;user&apos;?&lt;/p&gt;</comment>
                            <comment id="15491037" author="yuzhihong@gmail.com" created="Wed, 14 Sep 2016 17:47:21 +0000"  >&lt;p&gt;Addendum adds test category to TestBackupCommandLineTool&lt;/p&gt;</comment>
                            <comment id="15491108" author="yuzhihong@gmail.com" created="Wed, 14 Sep 2016 18:18:35 +0000"  >&lt;p&gt;The following comments from &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7912&quot; title=&quot;HBase Backup/Restore Based on HBase Snapshot&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7912&quot;&gt;HBASE-7912&lt;/a&gt; have been addressed.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Convert is unexplained as is silent&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;convert / silent have been dropped since they&apos;re obsolete.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;-w workers are threads or mapreduce tasks?&lt;/p&gt;&lt;/blockquote&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+          + &lt;span class=&quot;code-quote&quot;&gt;&quot; -w              number of parallel workers (MapReduce tasks).\n&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;&lt;p&gt;I&apos;d guess it is the scheme that is disallowed but the complaint is that &apos;first&apos; does not exist.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;backup set &apos;first&apos; should be first created using &quot;hbase backup set&quot; command.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
kalashnikov:hbase.git.commit2 stack$ ./bin/hbase backup set
2016-09-12 10:02:27,178 ERROR [main] util.AbstractHBaseTool: Error running command-line tool
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
kalashnikov:hbase.git.commit2 stack$ ./bin/hbase backup set add first
2016-09-12 10:04:07,068 ERROR [main] util.AbstractHBaseTool: Error running command-line tool
java.lang.RuntimeException: Wrong args
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;If argument is empty, usage would be printed - for each (sub)command.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vrodionov&quot; class=&quot;user-hover&quot; rel=&quot;vrodionov&quot;&gt;Vladimir Rodionov&lt;/a&gt;:&lt;br/&gt;
Can you add what I missed ?&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt;:&lt;br/&gt;
You&apos;re welcome to try from the tip of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7912&quot; title=&quot;HBase Backup/Restore Based on HBase Snapshot&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7912&quot;&gt;HBASE-7912&lt;/a&gt; branch.&lt;/p&gt;</comment>
                            <comment id="15491155" author="vrodionov" created="Wed, 14 Sep 2016 18:38:05 +0000"  >&lt;p&gt;The command-line tool  now:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Correctly print usage for every command ( -h, -help)&lt;/li&gt;
	&lt;li&gt;Does not throw exception in case of a wrong command format (only when command fails)&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15491158" author="vrodionov" created="Wed, 14 Sep 2016 18:39:44 +0000"  >&lt;p&gt;I added additional unit test for command helps, will add more tests today as an addendum  to this patch. &lt;/p&gt;</comment>
                            <comment id="15491997" author="vrodionov" created="Thu, 15 Sep 2016 01:23:18 +0000"  >&lt;p&gt;Addendum patch. Adds more tests and removes all System.exit in BackupCommands&lt;/p&gt;</comment>
                            <comment id="15491998" author="vrodionov" created="Thu, 15 Sep 2016 01:23:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tedyu&quot; class=&quot;user-hover&quot; rel=&quot;tedyu&quot;&gt;Ted Yu&lt;/a&gt;, addendum patch&lt;/p&gt;</comment>
                            <comment id="15492092" author="yuzhihong@gmail.com" created="Thu, 15 Sep 2016 02:17:18 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
-        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.exit(-1);
+        &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IOException(IGNORE);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;What&apos;s the benefit of throwing IOE ?&lt;/p&gt;

&lt;p&gt;Can you fill in better exception message ?&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="15492316" author="vrodionov" created="Thu, 15 Sep 2016 04:20:05 +0000"  >&lt;p&gt;Check the code. execute is void and can throw only IOException&lt;/p&gt;

&lt;p&gt;We need to report successful finish (no exception), command failure (exception), command failure due to format error (IGNORE) &lt;/p&gt;</comment>
                            <comment id="15492357" author="yuzhihong@gmail.com" created="Thu, 15 Sep 2016 04:43:47 +0000"  >&lt;p&gt;How about giving IGNORE a more descriptive name so that other people understands its purpose.&lt;/p&gt;</comment>
                            <comment id="15494006" author="yuzhihong@gmail.com" created="Thu, 15 Sep 2016 17:21:01 +0000"  >&lt;p&gt;In addendum 4, IGNORE is renamed INCORRECT_USAGE.&lt;/p&gt;</comment>
                            <comment id="15494208" author="vrodionov" created="Thu, 15 Sep 2016 18:47:20 +0000"  >&lt;p&gt;Cool. lgtm.&lt;/p&gt;</comment>
                            <comment id="15494213" author="yuzhihong@gmail.com" created="Thu, 15 Sep 2016 18:50:11 +0000"  >&lt;p&gt;Thanks for the addendum, Vlad.&lt;/p&gt;</comment>
                            <comment id="15497740" author="vrodionov" created="Fri, 16 Sep 2016 23:40:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tedyu&quot; class=&quot;user-hover&quot; rel=&quot;tedyu&quot;&gt;Ted Yu&lt;/a&gt; can you fix compilation error? BackupDriver?&lt;/p&gt;</comment>
                            <comment id="15497776" author="yuzhihong@gmail.com" created="Sat, 17 Sep 2016 00:05:34 +0000"  >&lt;p&gt;Compilation has been fixed.&lt;/p&gt;</comment>
                            <comment id="15504688" author="vrodionov" created="Mon, 19 Sep 2016 21:03:15 +0000"  >&lt;p&gt;addendum6 adds more unit tests. cc:&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tedyu&quot; class=&quot;user-hover&quot; rel=&quot;tedyu&quot;&gt;Ted Yu&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="12863549">HBASE-14414</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12828338" name="16620-v2.patch" size="18812" author="yuzhihong@gmail.com" created="Tue, 13 Sep 2016 21:51:59 +0000"/>
                            <attachment id="12828466" name="16620-v4.patch" size="40119" author="yuzhihong@gmail.com" created="Wed, 14 Sep 2016 14:01:49 +0000"/>
                            <attachment id="12828502" name="16620.addendum" size="876" author="yuzhihong@gmail.com" created="Wed, 14 Sep 2016 17:47:21 +0000"/>
                            <attachment id="12828689" name="16620.addendum4" size="20056" author="yuzhihong@gmail.com" created="Thu, 15 Sep 2016 17:21:01 +0000"/>
                            <attachment id="12828932" name="16620.addendum5" size="712" author="yuzhihong@gmail.com" created="Sat, 17 Sep 2016 00:05:34 +0000"/>
                            <attachment id="12829273" name="HBASE-16620-addendum6.patch" size="4398" author="vrodionov" created="Mon, 19 Sep 2016 21:03:15 +0000"/>
                            <attachment id="12828166" name="HBASE-16620-v1.patch" size="16243" author="vrodionov" created="Tue, 13 Sep 2016 03:25:09 +0000"/>
                            <attachment id="12828378" name="HBASE-16620-v3.patch" size="40280" author="vrodionov" created="Wed, 14 Sep 2016 03:31:20 +0000"/>
                            <attachment id="12828571" name="HBASE-16620.add.patch" size="18831" author="vrodionov" created="Thu, 15 Sep 2016 01:23:18 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 13 Sep 2016 16:28:01 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i33jcn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>