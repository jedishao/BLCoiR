<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 02 19:17:32 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-238/HBASE-238.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-238] [hbase] Possible data loss if Exception happens between snapshot and flush to disk.</title>
                <link>https://issues.apache.org/jira/browse/HBASE-238</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;There exists a little window during which we can lose data.  During a memcache flush, we make an inmemory copy, a &apos;snapshot&apos;.  The memcache is then zeroed and off we go again taking updates.  Meantime, in background we are supposed to flush the snapshot to disk.  If this process is interrupted &amp;#8211; e.g. the HDFS is yanked from under us or if an OOME occurs in this thread &amp;#8211; then the content of the snapshot is lost.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12378332">HBASE-238</key>
            <summary>[hbase] Possible data loss if Exception happens between snapshot and flush to disk.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="stack">stack</reporter>
                        <labels>
                    </labels>
                <created>Sat, 15 Sep 2007 01:32:22 +0000</created>
                <updated>Mon, 4 Feb 2008 18:41:16 +0000</updated>
                            <resolved>Sat, 15 Sep 2007 21:13:03 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12527687" author="stack" created="Sat, 15 Sep 2007 03:31:29 +0000"  >&lt;p&gt;On second take, if the interruption causes a regionserver crash, there should be no data loss; memaches is backed upin the hlog.  But if we manage to keep going, then we&apos;ll be in a strange situation where the snapshot has been &apos;lost&apos; &amp;#8211; though backed up in hlog &amp;#8211; because regionserver serves out of memcache+snapshot histories and from flushes, the store HStoreFiles.  &lt;/p&gt;</comment>
                            <comment id="12527763" author="stack" created="Sat, 15 Sep 2007 19:30:31 +0000"  >&lt;p&gt;If flush is interrupted, force a restart of the HRS so hlog is replayed &amp;#8211; currently this only happens on restarts &amp;#8211; so memcache is refilled with what was in the aborted/dropped snapshot.  Otherwise, opportunity for HRS to misrepresent content of its stores.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-238&quot; title=&quot;[hbase] Possible data loss if Exception happens between snapshot and flush to disk.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-238&quot;&gt;&lt;del&gt;HADOOP-1903&lt;/del&gt;&lt;/a&gt; Possible data loss if Exception happens between snapshot and flush&lt;br/&gt;
to disk.&lt;/p&gt;

&lt;p&gt;M  src/contrib/hbase/src/java/org/apache/hadoop/hbase/HRegionServer.java&lt;br/&gt;
    javadoc additions.&lt;br/&gt;
    (Flusher.chore): Restart HRS if we get a DroppedSnapshotException.&lt;br/&gt;
M src/contrib/hbase/src/java/org/apache/hadoop/hbase/HLog.java&lt;br/&gt;
    (abort): Renamed abortCacheFlush&lt;br/&gt;
    (cleanup): Added.&lt;br/&gt;
M  src/contrib/hbase/src/java/org/apache/hadoop/hbase/HMaster.java&lt;br/&gt;
    Add TODO to comment.&lt;br/&gt;
M  src/contrib/hbase/src/java/org/apache/hadoop/hbase/HMemcache.java&lt;br/&gt;
    Add comment on state.&lt;br/&gt;
M  src/contrib/hbase/src/java/org/apache/hadoop/hbase/HRegion.java&lt;br/&gt;
    Add throws javadoc to a couple of methods. Add comments to&lt;br/&gt;
    catch of IOException in cache flush.&lt;/p&gt;</comment>
                            <comment id="12527764" author="stack" created="Sat, 15 Sep 2007 19:31:00 +0000"  >&lt;p&gt;Builds and passes all tests locally.  Trying against hudson.&lt;/p&gt;</comment>
                            <comment id="12527778" author="hadoopqa" created="Sat, 15 Sep 2007 20:22:57 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
&lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12365914/1903.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12365914/1903.patch&lt;/a&gt;&lt;br/&gt;
against trunk revision r575950.&lt;/p&gt;

&lt;p&gt;    @author +1.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    javadoc +1.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    javac +1.  The applied patch does not generate any new compiler warnings.&lt;/p&gt;

&lt;p&gt;    findbugs +1.  The patch does not introduce any new Findbugs warnings.&lt;/p&gt;

&lt;p&gt;    core tests +1.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    contrib tests +1.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/772/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/772/testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/772/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/772/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle results: &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/772/artifact/trunk/build/test/checkstyle-errors.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/772/artifact/trunk/build/test/checkstyle-errors.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/772/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/772/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12527786" author="stack" created="Sat, 15 Sep 2007 21:13:03 +0000"  >&lt;p&gt;Committed.  Resolving issue.&lt;/p&gt;</comment>
                            <comment id="12527858" author="hudson" created="Sun, 16 Sep 2007 12:11:52 +0000"  >&lt;p&gt;Integrated in Hadoop-Nightly #239 (See &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Nightly/239/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Nightly/239/&lt;/a&gt;)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12365914" name="1903.patch" size="15253" author="stack" created="Sat, 15 Sep 2007 19:30:31 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 15 Sep 2007 20:22:57 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>25022</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 12 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0h5r3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>98194</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>