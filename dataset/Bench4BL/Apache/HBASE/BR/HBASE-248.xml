<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 02 19:59:33 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-248/HBASE-248.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-248] Flusher flushing back to back when it should not be</title>
                <link>https://issues.apache.org/jira/browse/HBASE-248</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;settings:&lt;br/&gt;
hbase.regionserver.optionalcacheflushinterval = 300000 (5 mins)&lt;br/&gt;
hbase.hregion.memcache.flush.size = 67108864 (64MB)&lt;/p&gt;

&lt;p&gt;I am attaching a log for this everything works fine until the first flush of the memcache. but once it flushes the first time correctly it flushes back to back many times even when it does not exceed one of the two limits above.&lt;/p&gt;

&lt;p&gt;I have not found but one spot where we update the variable LastFlushTime except when the server starts so this could be the problem but I may be missing it in the code somewhere. If it is getting updated then we need to look if something could be blocking it from updating after a memcache flush.&lt;/p&gt;</description>
                <environment>&lt;p&gt;hadoop svn 613782&lt;/p&gt;</environment>
        <key id="12386826">HBASE-248</key>
            <summary>Flusher flushing back to back when it should not be</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="viper799">Billy Pearson</reporter>
                        <labels>
                    </labels>
                <created>Tue, 22 Jan 2008 05:30:58 +0000</created>
                <updated>Fri, 22 Aug 2008 21:34:57 +0000</updated>
                            <resolved>Sun, 3 Feb 2008 20:36:07 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12561225" author="viper799" created="Tue, 22 Jan 2008 05:31:27 +0000"  >&lt;p&gt;attached snip of log&lt;/p&gt;</comment>
                            <comment id="12561247" author="viper799" created="Tue, 22 Jan 2008 07:39:24 +0000"  >&lt;p&gt;just adding some stats about this problem&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2008-01-22 01:07:31,944 DEBUG org.apache.hadoop.hbase.HStore: started compaction of 432 files using hdfs:&lt;span class=&quot;code-comment&quot;&gt;//10.0.0.1:9000/gfs_storage/hadoop-root/hbase/webdata/compaction.dir &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; 540402979/in_rank
&lt;/span&gt;2008-01-22 01:23:17,384 DEBUG org.apache.hadoop.hbase.HStore: moving 540402979/in_rank/8016207671941404930 in hdfs:&lt;span class=&quot;code-comment&quot;&gt;//10.0.0.1:9000/gfs_storage/hadoop-root/hbase/webdata/compaction.dir to 540402979/in_rank/8587356094792327071 in hdfs://10.0.0.1:9000/gfs_storage/hadoop-root/hbase/webdata &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; 540402979/in_rank
&lt;/span&gt;2008-01-22 01:23:22,605 DEBUG org.apache.hadoop.hbase.HStore: started compaction of 328 files using hdfs:&lt;span class=&quot;code-comment&quot;&gt;//10.0.0.1:9000/gfs_storage/hadoop-root/hbase/webdata/compaction.dir &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; 540402979/rank_visual
&lt;/span&gt;2008-01-22 01:23:31,248 DEBUG org.apache.hadoop.hbase.HStore: moving 540402979/rank_visual/4003180598508023113 in hdfs:&lt;span class=&quot;code-comment&quot;&gt;//10.0.0.1:9000/gfs_storage/hadoop-root/hbase/webdata/compaction.dir to 540402979/rank_visual/5001502002807562425 in hdfs://10.0.0.1:9000/gfs_storage/hadoop-root/hbase/webdata &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; 540402979/rank_visual
&lt;/span&gt;2008-01-22 01:23:34,438 INFO org.apache.hadoop.hbase.HRegion: compaction completed on region webdata,,1200970130265. Took 57mins, 10sec
2008-01-22 01:23:34,439 DEBUG org.apache.hadoop.hbase.HStore: compaction &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; HStore 540402979/size needed.
2008-01-22 01:23:34,439 DEBUG org.apache.hadoop.hbase.HRegion: 540402979/size needs compaction
2008-01-22 01:23:34,439 INFO org.apache.hadoop.hbase.HRegion: starting compaction on region webdata,,1200970130265
2008-01-22 01:23:34,439 DEBUG org.apache.hadoop.hbase.HStore: started compaction of 323 files using hdfs:&lt;span class=&quot;code-comment&quot;&gt;//10.0.0.1:9000/gfs_storage/hadoop-root/hbase/webdata/compaction.dir &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; 540402979/size&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;after finished compacting 432 files on the last column the compaction took 57min and 10 sec in that time there was 323 more flushes to the first column. the job stop writeing to the table at 01:04:35. so with my match that works out to be 8.5 flushes a min&lt;/p&gt;</comment>
                            <comment id="12561869" author="jimk" created="Wed, 23 Jan 2008 23:33:44 +0000"  >&lt;p&gt;Blocked to see if &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-69&quot; title=&quot;[hbase] Make cache flush triggering less simplistic&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-69&quot;&gt;&lt;del&gt;HADOOP-2636&lt;/del&gt;&lt;/a&gt; resolves the issue&lt;/p&gt;</comment>
                            <comment id="12565212" author="viper799" created="Sun, 3 Feb 2008 20:36:07 +0000"  >&lt;p&gt;Issues fixed with with issue &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-138&quot; title=&quot;[hbase] Under load, regions become extremely large and eventually cause region servers to become unresponsive&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-138&quot;&gt;&lt;del&gt;HADOOP-2731&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12386455">HBASE-69</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12373720" name="log.log" size="18677" author="viper799" created="Tue, 22 Jan 2008 05:31:26 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 23 Jan 2008 23:33:44 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>25032</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 44 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0h5un:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>98210</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>