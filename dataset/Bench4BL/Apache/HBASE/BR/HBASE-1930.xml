<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sat Dec 03 17:05:13 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-1930/HBASE-1930.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-1930] Put.setTimeStamp misleading (doesn&apos;t change timestamp on existing KeyValues, not copied in copy constructor)</title>
                <link>https://issues.apache.org/jira/browse/HBASE-1930</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;In the process of migrating some code from 0.19, and was changing BatchUpdate&apos;s to Put&apos;s.  I was hit by a bit of a gotcha.  In the old code, I populated the BatchUpdate, then set the timestamp.  However, this doesn&apos;t wotk for Put, because Put creates KeyValue&apos;s with the currently set timestamp when adding values.  Setting the timestamp at the end has no effect.  Also, the copy constructor doesn&apos;t copy the timestamp (or writeToWAL) setting.&lt;/p&gt;

&lt;p&gt;One option would be to simply update the javadoc to make it clear that the timestamp needs to be set prior to adding values.  I&apos;m attaching a proposed patch which moves the timestamp setting to constructor only so that it isn&apos;t possible to trigger the confusing case at all.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12438845">HBASE-1930</key>
            <summary>Put.setTimeStamp misleading (doesn&apos;t change timestamp on existing KeyValues, not copied in copy constructor)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="davelatham">Dave Latham</reporter>
                        <labels>
                    </labels>
                <created>Thu, 22 Oct 2009 20:39:49 +0000</created>
                <updated>Fri, 20 Nov 2015 13:01:30 +0000</updated>
                            <resolved>Fri, 23 Oct 2009 20:00:30 +0000</resolved>
                                    <version>0.20.0</version>
                    <version>0.20.1</version>
                                    <fixVersion>0.90.0</fixVersion>
                                    <component>Client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12768877" author="davelatham" created="Thu, 22 Oct 2009 20:40:55 +0000"  >&lt;p&gt;proposed patch removes setTimestamp, adds timestamp as a constructor arg, modifies copy constructor to copy timestamp and writeToWAL&lt;/p&gt;</comment>
                            <comment id="12768881" author="davelatham" created="Thu, 22 Oct 2009 20:44:01 +0000"  >&lt;p&gt;Realized this fix shouldn&apos;t go on branch, because it&apos;s an api change.&lt;/p&gt;</comment>
                            <comment id="12768927" author="streamy" created="Thu, 22 Oct 2009 21:53:11 +0000"  >&lt;p&gt;Good catch.&lt;/p&gt;

&lt;p&gt;Patch looks good, Dave.  Will run it through tests tomorrow and commit if no one else does before me.  Thanks.&lt;/p&gt;</comment>
                            <comment id="12768994" author="stack" created="Fri, 23 Oct 2009 00:41:00 +0000"  >&lt;p&gt;Should the below be passing on the rowlock?  It doesn&apos;t seem to be?  (Might be just my reading of patch in isolation)&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;

Index: src/java/org/apache/hadoop/hbase/client/Put.java
===================================================================
--- src/java/org/apache/hadoop/hbase/client/Put.java	(revision 828839)
+++ src/java/org/apache/hadoop/hbase/client/Put.java	(working copy)
@@ -75,6 +75,16 @@
    * @param rowLock previously acquired row lock, or &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
    */
   &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Put(&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt; [] row, RowLock rowLock) {
+      &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;(row, HConstants.LATEST_TIMESTAMP, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
+  }

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Otherwise +1&lt;/p&gt;</comment>
                            <comment id="12769016" author="davelatham" created="Fri, 23 Oct 2009 01:44:06 +0000"  >&lt;p&gt;You&apos;re absolutely right, Stack.  That&apos;s what I get to revising the constructors too many times.  Here&apos;s a revised patch.&lt;/p&gt;</comment>
                            <comment id="12769268" author="davelatham" created="Fri, 23 Oct 2009 15:51:35 +0000"  >&lt;p&gt;Updated the patch to match trunk, fix up some javadoc and tests.  All tests pass locally.&lt;/p&gt;</comment>
                            <comment id="12769395" author="stack" created="Fri, 23 Oct 2009 20:00:30 +0000"  >&lt;p&gt;Thanks for the patch Dave.&lt;/p&gt;</comment>
                            <comment id="15017820" author="lars_francke" created="Fri, 20 Nov 2015 13:01:30 +0000"  >&lt;p&gt;This issue was closed as part of a bulk closing operation on 2015-11-20. All issues that have been resolved and where all fixVersions have been released have been closed (following discussions on the mailing list).&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12439426">HBASE-1941</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12423025" name="1930-trunk.patch" size="7300" author="davelatham" created="Fri, 23 Oct 2009 15:51:35 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 22 Oct 2009 21:53:11 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>26070</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 2 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hfw7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>99837</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>