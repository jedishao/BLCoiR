<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sat Dec 03 16:23:57 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-2500/HBASE-2500.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-2500] Block indexes and meta blocks should be put into the LRU</title>
                <link>https://issues.apache.org/jira/browse/HBASE-2500</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Currently we are not tracking the heap usage of block indexes.  We&apos;re just relying on the fact that we leave a large percentage of total heap as part of &quot;everything else&quot; not in memstores or the block cache.  The &quot;everything else&quot; portion should be left for ephemeral/transient memory usage, not long-lived objects like block indexes.  Introduction of blooms will extend this issue to meta blocks in general.&lt;/p&gt;

&lt;p&gt;All of this should be moved into an LRU.  Either the existing block cache LRU or a new LRU.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12463259">HBASE-2500</key>
            <summary>Block indexes and meta blocks should be put into the LRU</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="streamy">Jonathan Gray</reporter>
                        <labels>
                            <label>moved_from_0_20_5</label>
                    </labels>
                <created>Wed, 28 Apr 2010 21:29:35 +0000</created>
                <updated>Mon, 15 Apr 2013 22:25:07 +0000</updated>
                            <resolved>Mon, 15 Apr 2013 22:25:07 +0000</resolved>
                                                                    <component>regionserver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="12861948" author="streamy" created="Wed, 28 Apr 2010 21:33:33 +0000"  >&lt;p&gt;My preference would be to add all of these to the existing block cache LRU.  The open question then would be whether they are treated like other normal data blocks, or whether we add additional block types.  The design of the LRU actually makes it quite easy to add additional types (currently there is single access block, multiple access block, and in-memory block), and there is not much overhead involved.  The additional overhead is done in the background eviction thread so doesn&apos;t add anything to the put/get methods.&lt;/p&gt;

&lt;p&gt;If there was a new block type or two, like &quot;index&quot; and/or &quot;meta&quot;, then these would be able to have their own slice of the total block cache pie.  The LRU gives each of the different block types their own percentage of the total LRU size.  Each is able to grow above it&apos;s slice if others are under-utilized, the LRU just guarantees that during an eviction that block type will be given at least the specified slice size.&lt;/p&gt;

&lt;p&gt;I think we&apos;ll also need to add code to re-fetch block indexes / meta blocks if they are not in the block cache.&lt;/p&gt;</comment>
                            <comment id="12861954" author="ryanobjc" created="Wed, 28 Apr 2010 21:46:57 +0000"  >&lt;p&gt;Right now the block index does not have multiple sub-blocks. Even if it did, any operation requiring the block index would have to load the entire block index because it does a binary search.  The block index is not really designed to be usable &quot;in-situ&quot; like the data blocks, so something extra fancy with callbacks when blocks are evicted might be required.&lt;/p&gt;</comment>
                            <comment id="12861956" author="streamy" created="Wed, 28 Apr 2010 21:54:37 +0000"  >&lt;p&gt;I guess there are also additional long-lived references to the block indexes that would need to be removed in order to actually evict?&lt;/p&gt;

&lt;p&gt;One way to do this would be to have a special eviction method called when evicting block index blocks.  Shouldn&apos;t be so hard to do in the block cache if we give them their own type/priority.&lt;/p&gt;</comment>
                            <comment id="12862938" author="stack" created="Sat, 1 May 2010 00:06:13 +0000"  >&lt;p&gt;I like this.&lt;/p&gt;</comment>
                            <comment id="12866823" author="stack" created="Wed, 12 May 2010 23:48:38 +0000"  >&lt;p&gt;Bulk move of 0.20.5 issues into 0.21.0 after vote that we merge branch into TRUNK up on list.&lt;/p&gt;</comment>
                            <comment id="12918232" author="streamy" created="Tue, 5 Oct 2010 21:46:13 +0000"  >&lt;p&gt;This really should be done, but punting to 0.92 because won&apos;t be done in time for 0.90.&lt;/p&gt;</comment>
                            <comment id="13047697" author="stack" created="Fri, 10 Jun 2011 22:58:22 +0000"  >&lt;p&gt;Moving out of 0.92.  Move it back in if you think differently.&lt;/p&gt;</comment>
                            <comment id="13047710" author="stack" created="Fri, 10 Jun 2011 22:58:25 +0000"  >&lt;p&gt;Moving out of 0.92.  Move it back in if you think differently.&lt;/p&gt;</comment>
                            <comment id="13632294" author="jdcryans" created="Mon, 15 Apr 2013 22:25:07 +0000"  >&lt;p&gt;This was done as part of the HFileV2 work.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12473625">HBASE-2970</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 28 Apr 2010 21:46:57 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>32615</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 33 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02fpz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>12148</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>