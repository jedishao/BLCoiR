<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 02 20:20:42 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-347/HBASE-347.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-347] [hbase] Have master pass the regionserver the filesystem to use</title>
                <link>https://issues.apache.org/jira/browse/HBASE-347</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;The less configuration needed starting a regionserver the better.  Currently the regionserver needs to read hadoop-site mainly so it knows which filesystem to go against.  If it could get this info from the master instead when it gets the response to its reporting-for-duty message, then the dependency on hadoop-site.xml could mostly go away.&lt;/p&gt;

&lt;p&gt;Looking at regionserver, it looks like it would just take a little reorganization so that the hlog opening and the startup of worker threads doesn&apos;t happen until after we get our first response from the master.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12378784">HBASE-347</key>
            <summary>[hbase] Have master pass the regionserver the filesystem to use</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="stack">stack</reporter>
                        <labels>
                    </labels>
                <created>Thu, 20 Sep 2007 18:59:24 +0000</created>
                <updated>Mon, 4 Feb 2008 18:41:48 +0000</updated>
                            <resolved>Thu, 27 Sep 2007 21:29:38 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12529553" author="stack" created="Fri, 21 Sep 2007 20:50:30 +0000"  >&lt;p&gt;Here is one possible approach:&lt;/p&gt;

&lt;p&gt;+ On startup, a regionserver reports in for duty and usually, what happens next is that the master sends the regionserver a MSG_REGION_OPEN message with a payload of an HRegionInfo describing the particular region the master wants the regionserver to open.  Other messages sent by the master include MSG_REGION_CLOSE, MSG_REGIONSERVER_STOP, etc.&lt;br/&gt;
+ Messages are comprised of a byte indicating the message type and optionally an HRegionInfo payload for a particular region if the message from the master addresses a particular region. Currently messages either have an empty payload or they carry an HRegionInfo payload (See HMsg).&lt;br/&gt;
+ We could add a new INIT message. The INIT message would be sent by the master the first time a regionserver reports in for duty.  Its payload would be a MapWritable laden with properties the regionserver needs going about its work: e.g. filesystem to use and hbase.root to use, etc.&lt;br/&gt;
+ We&apos;d change the HMsg so rather than an explicit HRegionInfo, instead it would carry a Writable whose type would be deteremined by the command carried in the message.&lt;br/&gt;
+ On the regionserver side, it would read the passed properties and set them into its local config.  No attempts at touching the filesystem or startup of service threads would happen until after it had received the INIT message from the master.&lt;/p&gt;</comment>
                            <comment id="12529958" author="stack" created="Mon, 24 Sep 2007 20:07:11 +0000"  >&lt;p&gt;Chatting w/ Jim, rather than introduce a new INIT message, instead, change the signature on method the regionserver invokes to tell the master its reporting-for-duty.  Currently it returns a void.  Make it instead return a MapWritable laden w/ master-supplied configs.&lt;/p&gt;</comment>
                            <comment id="12530363" author="stack" created="Wed, 26 Sep 2007 05:28:45 +0000"  >&lt;p&gt;Here&apos;s a first cut.  Lots of HRegionServer refactoring so no fs access nor service thread startups until after we&apos;ve had our first conversation with master.  Needs testing on a cluster.&lt;/p&gt;</comment>
                            <comment id="12530506" author="stack" created="Wed, 26 Sep 2007 18:15:01 +0000"  >&lt;p&gt;v2 comes of edit and testing on cluster&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-347&quot; title=&quot;[hbase] Have master pass the regionserver the filesystem to use&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-347&quot;&gt;&lt;del&gt;HADOOP-1928&lt;/del&gt;&lt;/a&gt; Have master pass the regionserver the filesystem to use&lt;/p&gt;

&lt;p&gt;M  src/contrib/hbase/src/test/org/apache/hadoop/hbase/TestDFSAbort.java&lt;br/&gt;
    Remove commented out lines (We used to have shorter than default&lt;br/&gt;
    ipc timeouts and retries but was failing on hudson so went back to&lt;br/&gt;
    using defaults again).&lt;br/&gt;
M src/contrib/hbase/src/test/org/apache/hadoop/hbase/MultiRegionTable.java&lt;br/&gt;
    Rootdir data member has been removed from HRegionServer.  Use conf&lt;br/&gt;
    setting.&lt;br/&gt;
M src/contrib/hbase/src/test/org/apache/hadoop/hbase/OOMERegionServer.java&lt;br/&gt;
    HRegionServer constructor signature changed.&lt;br/&gt;
M  src/contrib/hbase/src/java/org/apache/hadoop/hbase/HRegionServer.java&lt;br/&gt;
    Refactor constructor.  Delay filesystem access and service thread startups&lt;br/&gt;
    until after first communique w/ master.  Constructor no longer takes&lt;br/&gt;
    the hbase.rootdir param.  Instead, this is now read from the master&lt;br/&gt;
    when regionserver reports in for duty.  Made most of the data members&lt;br/&gt;
    final.&lt;br/&gt;
    (join): Refactored.  Pass each thread to new join override.&lt;br/&gt;
    (init): Added.  Takes a MapWritable of configs obtained from master.&lt;br/&gt;
    (startServiceThreads): Renamed from startAllServices.&lt;br/&gt;
    (setupHlog, getThisIP): Added.&lt;br/&gt;
M  src/contrib/hbase/src/java/org/apache/hadoop/hbase/HMasterRegionInterface.java&lt;br/&gt;
M  src/contrib/hbase/src/java/org/apache/hadoop/hbase/HMaster.java&lt;br/&gt;
    (regionServerStartup): Now returns subset of configuration to &lt;br/&gt;
    regionserver.&lt;br/&gt;
M  src/contrib/hbase/src/java/org/apache/hadoop/hbase/util/FSUtils.java&lt;br/&gt;
    (isSystemAvaliable): Takes optional arg that can short-circuit retries&lt;br/&gt;
    if another thread has ruled server should go down.  Improved logging.&lt;br/&gt;
M  src/contrib/hbase/build.xml&lt;br/&gt;
    Add hbase conf dir to the test classpath.  Means that hbase default&lt;br/&gt;
    location will be under whatever has been specified as hadoop&lt;br/&gt;
    default.&lt;/p&gt;</comment>
                            <comment id="12530507" author="stack" created="Wed, 26 Sep 2007 18:15:37 +0000"  >&lt;p&gt;Passes all local tests.  Trying against hudson.&lt;/p&gt;</comment>
                            <comment id="12530835" author="hadoopqa" created="Thu, 27 Sep 2007 20:52:24 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
&lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12366601/master_passing_config-v2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12366601/master_passing_config-v2.patch&lt;/a&gt;&lt;br/&gt;
against trunk revision r579928.&lt;/p&gt;

&lt;p&gt;    @author +1.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    javadoc +1.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    javac +1.  The applied patch does not generate any new compiler warnings.&lt;/p&gt;

&lt;p&gt;    findbugs +1.  The patch does not introduce any new Findbugs warnings.&lt;/p&gt;

&lt;p&gt;    core tests +1.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    contrib tests +1.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/833/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/833/testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/833/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/833/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle results: &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/833/artifact/trunk/build/test/checkstyle-errors.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/833/artifact/trunk/build/test/checkstyle-errors.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/833/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/833/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12530849" author="stack" created="Thu, 27 Sep 2007 21:29:38 +0000"  >&lt;p&gt;Applied. Resolving.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12366601" name="master_passing_config-v2.patch" size="28807" author="stack" created="Wed, 26 Sep 2007 18:15:00 +0000"/>
                            <attachment id="12366567" name="master_passing_config.patch" size="66417" author="stack" created="Wed, 26 Sep 2007 05:28:45 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 27 Sep 2007 20:52:24 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>25131</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 11 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0h6rb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>98357</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>