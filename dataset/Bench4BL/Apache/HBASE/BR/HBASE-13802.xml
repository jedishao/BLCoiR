<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Thu Dec 01 21:22:16 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-13802/HBASE-13802.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-13802] Procedure V2: Master fails to come up due to rollback of create namespace table</title>
                <link>https://issues.apache.org/jira/browse/HBASE-13802</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;In Procedure V2 (&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13203&quot; title=&quot;Procedure v2 - master create/delete table&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13203&quot;&gt;&lt;del&gt;HBASE-13203&lt;/del&gt;&lt;/a&gt;) implementation, Rollback of a CreateTableProcedure would call the Quota Manager to remove the table from namespace quota.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void deleteTableStates(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; MasterProcedureEnv env, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; TableName tableName)  {
 ProcedureSyncWait.getMasterQuotaManager(env).removeTableFromNamespaceQuota(tableName);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This could lead to a &apos;deadlock&apos;-like situation during master starting up:&lt;br/&gt;
(1) The create namespace table procedure failed in the middle of master crash/failover. When master re-started, it tried to rollback, one step of rollback is to call QuotaManager to remove the table from NameSpaceQuota, but the QuotaManager has NOT started - so the rollback has to wait.&lt;br/&gt;
(2). The QuotaManager would start in master after Namespace Manager starts.&lt;br/&gt;
(3). The Namespace Manager is waiting for the table lock to be released by rollback of create namespace table procedure so that it can create namespace table as part of Namespace Manager initialization.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
HMaster#finishActiveMasterInitialization() {
   ...
   status.setStatus(&lt;span class=&quot;code-quote&quot;&gt;&quot;Starting namespace manager&quot;&lt;/span&gt;);
   initNamespace();
    ...
   status.setStatus(&lt;span class=&quot;code-quote&quot;&gt;&quot;Starting quota manager&quot;&lt;/span&gt;);
   initQuotaManager();
   ...
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;(4). Now (1) waits for (2), which waits for (3), which waits for (1) - no one make progress &amp;amp; master could not complete initialization and fails to come up.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2015-05-28 10:01:26,890 INFO  [ip-111-22-33-444:16000.activeMasterManager] master.TableNamespaceManager: Namespace table not found. Creating...
2015-05-28 10:06:22,016 WARN  [ProcedureExecutorThread-0] procedure.CreateTableProcedure: Failed rollback attempt step=CREATE_TABLE_PRE_OPERATION table=hbase:namespace
org.apache.hadoop.hbase.exceptions.TimeoutIOException: Timed out while waiting on quota manager to be available
	at org.apache.hadoop.hbase.master.procedure.ProcedureSyncWait.waitFor(ProcedureSyncWait.java:122)
	at org.apache.hadoop.hbase.master.procedure.ProcedureSyncWait.waitFor(ProcedureSyncWait.java:102)
	at org.apache.hadoop.hbase.master.procedure.ProcedureSyncWait.getMasterQuotaManager(ProcedureSyncWait.java:184)
	at org.apache.hadoop.hbase.master.procedure.DeleteTableProcedure.deleteTableStates(DeleteTableProcedure.java:408)
	at org.apache.hadoop.hbase.master.procedure.CreateTableProcedure.rollbackState(CreateTableProcedure.java:169)
	at org.apache.hadoop.hbase.master.procedure.CreateTableProcedure.rollbackState(CreateTableProcedure.java:58)
	at org.apache.hadoop.hbase.procedure2.StateMachineProcedure.rollback(StateMachineProcedure.java:121)
	at org.apache.hadoop.hbase.procedure2.Procedure.doRollback(Procedure.java:414)
	at org.apache.hadoop.hbase.procedure2.ProcedureExecutor.executeRollback(ProcedureExecutor.java:808)
	at org.apache.hadoop.hbase.procedure2.ProcedureExecutor.executeRollback(ProcedureExecutor.java:773)
	at org.apache.hadoop.hbase.procedure2.ProcedureExecutor.execLoop(ProcedureExecutor.java:653)
	at org.apache.hadoop.hbase.procedure2.ProcedureExecutor.execLoop(ProcedureExecutor.java:626)
	at org.apache.hadoop.hbase.procedure2.ProcedureExecutor.access$200(ProcedureExecutor.java:70)
	at org.apache.hadoop.hbase.procedure2.ProcedureExecutor$1.run(ProcedureExecutor.java:413)
2015-05-28 10:06:22,169 WARN  [ProcedureExecutorThread-1] procedure.CreateTableProcedure: The table hbase:namespace does not exist in meta but has a znode. run hbck to fix inconsistencies.
2015-05-28 10:06:27,292 FATAL [ip-111-22-33-444:16000.activeMasterManager] master.HMaster: Failed to become active master
java.io.IOException: Timedout 300000ms waiting for namespace table to be assigned
	at org.apache.hadoop.hbase.master.TableNamespaceManager.start(TableNamespaceManager.java:104)
	at org.apache.hadoop.hbase.master.HMaster.initNamespace(HMaster.java:980)
	at org.apache.hadoop.hbase.master.HMaster.finishActiveMasterInitialization(HMaster.java:779)
	at org.apache.hadoop.hbase.master.HMaster.access$500(HMaster.java:182)
	at org.apache.hadoop.hbase.master.HMaster$1.run(HMaster.java:1632)
	at java.lang.Thread.run(Thread.java:745)
2015-05-28 10:06:27,293 FATAL [ip-111-22-33-444:16000.activeMasterManager] master.HMaster: Master server abort: loaded coprocessors are: [org.apache.ranger.authorization.hbase.RangerAuthorizationCoprocessor]
2015-05-28 10:06:27,293 FATAL [ip-111-22-33-444:16000.activeMasterManager] master.HMaster: Unhandled exception. Starting shutdown.
java.io.IOException: Timedout 300000ms waiting for namespace table to be assigned
	at org.apache.hadoop.hbase.master.TableNamespaceManager.start(TableNamespaceManager.java:104)
	at org.apache.hadoop.hbase.master.HMaster.initNamespace(HMaster.java:980)
	at org.apache.hadoop.hbase.master.HMaster.finishActiveMasterInitialization(HMaster.java:779)
	at org.apache.hadoop.hbase.master.HMaster.access$500(HMaster.java:182)
	at org.apache.hadoop.hbase.master.HMaster$1.run(HMaster.java:1632)
	at java.lang.Thread.run(Thread.java:745)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12833677">HBASE-13802</key>
            <summary>Procedure V2: Master fails to come up due to rollback of create namespace table</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="syuanjiang">Stephen Yuan Jiang</assignee>
                                    <reporter username="syuanjiang">Stephen Yuan Jiang</reporter>
                        <labels>
                    </labels>
                <created>Fri, 29 May 2015 06:00:33 +0000</created>
                <updated>Mon, 15 Jun 2015 15:37:53 +0000</updated>
                            <resolved>Fri, 29 May 2015 09:40:26 +0000</resolved>
                                    <version>2.0.0</version>
                    <version>1.1.0</version>
                    <version>1.2.0</version>
                                    <fixVersion>2.0.0</fixVersion>
                    <fixVersion>1.2.0</fixVersion>
                    <fixVersion>1.1.1</fixVersion>
                                    <component>master</component>
                    <component>proc-v2</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>9</watches>
                                                                <comments>
                            <comment id="14564264" author="syuanjiang" created="Fri, 29 May 2015 06:11:45 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mbertozzi&quot; class=&quot;user-hover&quot; rel=&quot;mbertozzi&quot;&gt;Matteo Bertozzi&lt;/a&gt; I think we could resolve this issue in one of the following ways:&lt;br/&gt;
(1). Proposal-1: just like CreateTableHandler code, we only call Quota Manager is master is initialized:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (master.isInitialized()) {
        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
          ((HMaster) &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.server).getMasterQuotaManager().removeTableFromNamespaceQuota(
            hTableDescriptor.getTableName());
        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (IOException e1) {
          LOG.error(&lt;span class=&quot;code-quote&quot;&gt;&quot;Error trying to update namespace quota &quot;&lt;/span&gt; + e1);
        }
      }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Pro - on-par with CreateTableHandler; code is more generic&lt;br/&gt;
Con - if master is not initialized, we would not wait for update and cause some quota inaccurate.&lt;/p&gt;

&lt;p&gt;(2). Proposal-2: if the target table is namespace (or quota) table, we would not ask QuotaManager to update - Deleting namespace and quota table is a rare event (including rolling back of creating), this would not affect quota logic too much.&lt;/p&gt;

&lt;p&gt;Pro - only target specific tables (limit the scope of change)&lt;br/&gt;
Con - inflexible (what if in the future, there is another special table that we need to handle, but we could forget); if master is not initialized, normal table rollback could wait a while.&lt;/p&gt;</comment>
                            <comment id="14564268" author="mbertozzi" created="Fri, 29 May 2015 06:16:59 +0000"  >&lt;p&gt;on create we don&apos;t add quotas for system tables&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; void preCreate(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; MasterProcedureEnv env)
      &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException, InterruptedException {
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!getTableName().isSystemTable()) {
      ProcedureSyncWait.getMasterQuotaManager(env)
        .checkNamespaceTableAndRegionQuota(getTableName(), newRegions.size());
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;so we don&apos;t have to remove them in delete. we are missing an if !systable in the delete&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void deleteTableStates(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; MasterProcedureEnv env, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; TableName tableName)
      &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!getTableName().isSystemTable()) { &lt;span class=&quot;code-comment&quot;&gt;// &amp;lt;---- WE SHOULD ADD THIS
&lt;/span&gt;    ProcedureSyncWait.getMasterQuotaManager(env).removeTableFromNamespaceQuota(tableName);
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14564272" author="syuanjiang" created="Fri, 29 May 2015 06:19:39 +0000"  >&lt;p&gt;In  CreateTableProcedure, we have the following logic:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; void preCreate(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; MasterProcedureEnv env)
      &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException, InterruptedException {
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!getTableName().isSystemTable()) {
      ProcedureSyncWait.getMasterQuotaManager(env)
        .checkNamespaceTableAndRegionQuota(getTableName(), newRegions.size());
    }
   ...
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So it make sense to do the same system table check in rollback.  Patch is attached.&lt;/p&gt;</comment>
                            <comment id="14564275" author="mbertozzi" created="Fri, 29 May 2015 06:23:04 +0000"  >&lt;p&gt;another thing you can add, aside the !sysTable in the delete is&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; acquireLock(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; MasterProcedureEnv env) {
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!getTableName().isSystemTable() &amp;amp;&amp;amp; !env.isInitialized()) &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;which ensures that for non-systables the master must be initialized, before executing the creation.&lt;/p&gt;</comment>
                            <comment id="14564316" author="syuanjiang" created="Fri, 29 May 2015 07:03:59 +0000"  >&lt;p&gt;ok, update the patch - this makes create table procedure on-par with other DDL procedures.&lt;/p&gt;</comment>
                            <comment id="14564318" author="mbertozzi" created="Fri, 29 May 2015 07:04:47 +0000"  >&lt;p&gt;+1 on v1&lt;/p&gt;</comment>
                            <comment id="14564446" author="hadoopqa" created="Fri, 29 May 2015 09:10:01 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12736058/HBASE-13802.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12736058/HBASE-13802.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 325614220f1c208b0846001f903888660096cdb1.&lt;br/&gt;
  ATTACHMENT ID: 12736058&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.1 2.5.2 2.6.0)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14231//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14231//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14231//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14231//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14231//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14231//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14231//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14231//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14564472" author="hadoopqa" created="Fri, 29 May 2015 09:38:39 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12736067/HBASE-13802.v1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12736067/HBASE-13802.v1.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 325614220f1c208b0846001f903888660096cdb1.&lt;br/&gt;
  ATTACHMENT ID: 12736067&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.1 2.5.2 2.6.0)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;                &lt;font color=&quot;red&quot;&gt;-1 checkstyle&lt;/font&gt;.  The applied patch generated 1929 checkstyle errors (more than the master&apos;s current 1928 errors).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;/p&gt;


&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14232//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14232//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14232//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14232//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14232//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14232//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;                Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14232//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14232//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14564473" author="yuzhihong@gmail.com" created="Fri, 29 May 2015 09:40:27 +0000"  >&lt;p&gt;Thanks for the patch, Stephen.&lt;/p&gt;

&lt;p&gt;Thanks for the review, Matteo.&lt;/p&gt;</comment>
                            <comment id="14564496" author="yuzhihong@gmail.com" created="Fri, 29 May 2015 09:52:06 +0000"  >&lt;p&gt;Patch v1 introduced a checkstyle warning.&lt;/p&gt;

&lt;p&gt;Here is the addendum which fixes the warning.&lt;/p&gt;</comment>
                            <comment id="14564612" author="hudson" created="Fri, 29 May 2015 11:45:17 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.2 #115 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.2/115/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.2/115/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13802&quot; title=&quot;Procedure V2: Master fails to come up due to rollback of create namespace table&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13802&quot;&gt;&lt;del&gt;HBASE-13802&lt;/del&gt;&lt;/a&gt; Procedure V2: Master fails to come up due to rollback of create namespace table (Stephen Jiang) (tedyu: rev 46c9a5b339a77167960ba5382e6d2f380fc312a8)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/procedure/DeleteTableProcedure.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/procedure/CreateTableProcedure.java&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13802&quot; title=&quot;Procedure V2: Master fails to come up due to rollback of create namespace table&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13802&quot;&gt;&lt;del&gt;HBASE-13802&lt;/del&gt;&lt;/a&gt; Addendum fixes checkstyle warning by removing the whitespace before the right parenthesis (tedyu: rev 695c4790cdb2f6ba57ace674fb9bc4cc7744d6e4)&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/procedure/CreateTableProcedure.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14564679" author="hudson" created="Fri, 29 May 2015 12:10:14 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.1 #511 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.1/511/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.1/511/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13802&quot; title=&quot;Procedure V2: Master fails to come up due to rollback of create namespace table&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13802&quot;&gt;&lt;del&gt;HBASE-13802&lt;/del&gt;&lt;/a&gt; Procedure V2: Master fails to come up due to rollback of create namespace table (Stephen Jiang) (tedyu: rev 6ac03566877d9905394b2107e546e3c70058392a)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/procedure/DeleteTableProcedure.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/procedure/CreateTableProcedure.java&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13802&quot; title=&quot;Procedure V2: Master fails to come up due to rollback of create namespace table&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13802&quot;&gt;&lt;del&gt;HBASE-13802&lt;/del&gt;&lt;/a&gt; Addendum fixes checkstyle warning by removing the whitespace before the right parenthesis (tedyu: rev 02be1f9c472956b0aff3856e64eb7a281549d610)&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/procedure/CreateTableProcedure.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14564712" author="hudson" created="Fri, 29 May 2015 12:32:31 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-TRUNK #6528 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/6528/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/6528/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13802&quot; title=&quot;Procedure V2: Master fails to come up due to rollback of create namespace table&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13802&quot;&gt;&lt;del&gt;HBASE-13802&lt;/del&gt;&lt;/a&gt; Procedure V2: Master fails to come up due to rollback of create namespace table (Stephen Jiang) (tedyu: rev 5646071c737318abde49696bb79fe203681dc27a)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/procedure/CreateTableProcedure.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/procedure/DeleteTableProcedure.java&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13802&quot; title=&quot;Procedure V2: Master fails to come up due to rollback of create namespace table&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13802&quot;&gt;&lt;del&gt;HBASE-13802&lt;/del&gt;&lt;/a&gt; Addendum fixes checkstyle warning by removing the whitespace before the right parenthesis (tedyu: rev cca687d718df9c8580820292e309275e30a4111d)&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/procedure/CreateTableProcedure.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14586188" author="lquterqtd" created="Mon, 15 Jun 2015 15:25:26 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=syuanjiang&quot; class=&quot;user-hover&quot; rel=&quot;syuanjiang&quot;&gt;Stephen Yuan Jiang&lt;/a&gt;&lt;br/&gt;
I met the same problem in version 1.1.0.1,except upgrade or patch, is there any other way to recover the hmaster?&lt;/p&gt;</comment>
                            <comment id="14586208" author="lquterqtd" created="Mon, 15 Jun 2015 15:37:53 +0000"  >&lt;p&gt;I delete the /hbase directory &quot;hadoop fs -rmr /hbase&quot; and then restrat the hmaster, it&apos;s ok now.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12736098" name="13802-addendum.txt" size="1053" author="yuzhihong@gmail.com" created="Fri, 29 May 2015 09:52:06 +0000"/>
                            <attachment id="12736067" name="HBASE-13802.v1.patch" size="1638" author="syuanjiang" created="Fri, 29 May 2015 07:03:02 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 29 May 2015 06:16:59 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 24 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2fd1r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>