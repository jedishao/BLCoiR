<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 02 19:10:31 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-1415/HBASE-1415.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-1415] Stuck on memcache flush</title>
                <link>https://issues.apache.org/jira/browse/HBASE-1415</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Latest trunk, regionserver gets stuck doing below:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2009-05-13 03:05:28,126 [regionserver/0:0:0:0:0:0:0:0:60021.logRoller] INFO org.apache.hadoop.hbase.regionserver.HLog: Closed hdfs:&lt;span class=&quot;code-comment&quot;&gt;//aa0-000-12.u.powerset.com:9000/hbasetrunk2/.logs/aa0-000-13.u.powerset.com_1242178588540_60021/hlog.dat.1242183899413, entries=10051
&lt;/span&gt;2009-05-13 03:05:28,126 [regionserver/0:0:0:0:0:0:0:0:60021.logRoller] DEBUG org.apache.hadoop.hbase.regionserver.HLog: Found 0 logs to remove  out of total 53; oldest outstanding seqnum is 6838308 from region TestTable,0842399686,1242180442452
2009-05-13 03:05:28,737 [IPC Server handler 9 on 60021] INFO org.apache.hadoop.hbase.regionserver.MemcacheFlusher: Forced flushing of TestTable,0107641622,1242181965182 because global memcache limit of 497.8m exceeded; currently 513.3m and flushing till 311.1m
2009-05-13 03:05:28,737 [IPC Server handler 9 on 60021] DEBUG org.apache.hadoop.hbase.regionserver.MemcacheFlusher: Too many store files in store info: 5, waiting
2009-05-13 03:05:28,737 [IPC Server handler 9 on 60021] DEBUG org.apache.hadoop.hbase.regionserver.CompactSplitThread: Compaction requested &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; region TestTable,0107641622,1242181965182/614435386 because: regionserver/0:0:0:0:0:0:0:0:60021.cacheFlusher
2009-05-13 03:06:07,143 [regionserver/0:0:0:0:0:0:0:0:60021.compactor] DEBUG org.apache.hadoop.hbase.regionserver.Store: Completed compaction of info; store size is 168.0m
2009-05-13 03:06:07,143 [regionserver/0:0:0:0:0:0:0:0:60021.compactor] INFO org.apache.hadoop.hbase.regionserver.HRegion: compaction completed on region TestTable,0092188538,1242183375224 in 3mins, 58sec
2009-05-13 03:06:58,757 [IPC Server handler 9 on 60021] DEBUG org.apache.hadoop.hbase.regionserver.MemcacheFlusher: Too many store files in store info: 5, waiting
2009-05-13 03:06:58,757 [IPC Server handler 9 on 60021] DEBUG org.apache.hadoop.hbase.regionserver.CompactSplitThread: Compaction requested &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; region TestTable,0107641622,1242181965182/614435386 because: regionserver/0:0:0:0:0:0:0:0:60021.cacheFlusher
2009-05-13 03:08:28,767 [IPC Server handler 9 on 60021] DEBUG org.apache.hadoop.hbase.regionserver.MemcacheFlusher: Too many store files in store info: 5, waiting
2009-05-13 03:08:28,767 [IPC Server handler 9 on 60021] DEBUG org.apache.hadoop.hbase.regionserver.CompactSplitThread: Compaction requested &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; region TestTable,0107641622,1242181965182/614435386 because: regionserver/0:0:0:0:0:0:0:0:60021.cacheFlusher
2009-05-13 03:09:58,777 [IPC Server handler 9 on 60021] DEBUG org.apache.hadoop.hbase.regionserver.MemcacheFlusher: Too many store files in store info: 5, waiting

...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;Thread dumping I see a few threads blocked here:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-quote&quot;&gt;&quot;IPC Server handler 4 on 60021&quot;&lt;/span&gt; daemon prio=10 tid=0x00007f42982ee000 nid=0x599b waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; monitor entry [0x000000004380b000..0x000000004380bb00]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: BLOCKED (on object monitor)
        at org.apache.hadoop.hbase.regionserver.MemcacheFlusher.reclaimMemcacheMemory(MemcacheFlusher.java:294)
        - waiting to lock &amp;lt;0x00007f42aac8cbd8&amp;gt; (a org.apache.hadoop.hbase.regionserver.MemcacheFlusher)
        at org.apache.hadoop.hbase.regionserver.HRegionServer.batchUpdates(HRegionServer.java:1800)
        at sun.reflect.GeneratedMethodAccessor6.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.hadoop.hbase.ipc.HBaseRPC$Server.call(HBaseRPC.java:642)
        at org.apache.hadoop.hbase.ipc.HBaseServer$Handler.run(HBaseServer.java:911)

..
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And this is a good while after my MR upload failed.&lt;/p&gt;

&lt;p&gt;Assigning myself since I can reproduce easy enough.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12425295">HBASE-1415</key>
            <summary>Stuck on memcache flush</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="apurtell">Andrew Purtell</assignee>
                                    <reporter username="stack">stack</reporter>
                        <labels>
                    </labels>
                <created>Wed, 13 May 2009 05:22:30 +0000</created>
                <updated>Sun, 13 Sep 2009 22:24:38 +0000</updated>
                            <resolved>Thu, 21 May 2009 00:54:34 +0000</resolved>
                                                    <fixVersion>0.20.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12708802" author="apurtell" created="Wed, 13 May 2009 07:08:11 +0000"  >&lt;p&gt;This is 1058 not working as intended. Too many store files, compaction is requested, it completes, but does not actually compact anything. So, the gate never comes up.&lt;/p&gt;</comment>
                            <comment id="12708953" author="stack" created="Wed, 13 May 2009 14:48:33 +0000"  >&lt;p&gt;No worries Andrew.  I can reproduce easy enough.  Let me see if I can figure a patch for you and J-D to look at.&lt;/p&gt;</comment>
                            <comment id="12711419" author="apurtell" created="Wed, 20 May 2009 23:30:31 +0000"  >&lt;p&gt;Backing out hbase-1058 patches from trunk will resolve this. &lt;/p&gt;</comment>
                            <comment id="12711440" author="apurtell" created="Thu, 21 May 2009 00:54:34 +0000"  >&lt;p&gt;Resolved by reverting 1058-v2 patch on trunk.&lt;/p&gt;</comment>
                            <comment id="12711442" author="apurtell" created="Thu, 21 May 2009 00:55:00 +0000"  >&lt;p&gt;Assign to me for blame.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 13 May 2009 07:08:11 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>25743</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 29 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hd3z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>99386</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>