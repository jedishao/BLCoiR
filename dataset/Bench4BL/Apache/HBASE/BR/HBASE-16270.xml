<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Thu Dec 01 21:58:44 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-16270/HBASE-16270.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-16270] Handle duplicate clearing of snapshot in region replicas</title>
                <link>https://issues.apache.org/jira/browse/HBASE-16270</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;We have an HBase (1.1.2) production cluster with 58 region servers and a staging cluster with 6 region servers.&lt;/p&gt;

&lt;p&gt;For both clusters, we enabled region replicas with the following settings:&lt;/p&gt;

&lt;p&gt;hbase.regionserver.storefile.refresh.period = 0&lt;br/&gt;
hbase.region.replica.replication.enabled = true&lt;br/&gt;
hbase.region.replica.replication.memstore.enabled = true&lt;br/&gt;
hbase.master.hfilecleaner.ttl = 3600000&lt;br/&gt;
hbase.master.loadbalancer.class = org.apache.hadoop.hbase.master.balancer.StochasticLoadBalancer&lt;br/&gt;
hbase.meta.replica.count = 3&lt;br/&gt;
hbase.regionserver.meta.storefile.refresh.period = 30000&lt;br/&gt;
hbase.region.replica.wait.for.primary.flush = true&lt;br/&gt;
hbase.region.replica.storefile.refresh.memstore.multiplier = 4&lt;/p&gt;

&lt;p&gt;We then altered our HBase tables to have REGION_REPLICATION =&amp;gt; 2&lt;/p&gt;

&lt;p&gt;Both clusters got into a state where a few region servers were spewing the following error below in the HBase logs.  In one instance the error occurred over 70K times.  At this time, these region servers would see 10x write traffic (the hadoop.HBase.RegionServer.Server.writeRequestCount metric) and in some instances would crash.&lt;/p&gt;

&lt;p&gt;At the same time, we would see secondary regions move and then go into the &quot;reads are disabled&quot; state for extended periods.  &lt;/p&gt;

&lt;p&gt;It appears there is a race condition where the DefaultMemStore::clearSnapshot method might be called more than once in succession. The first call would set snapshotId to -1, but the second call would throw an exception.  It seems the second call should just return if the snapshotId is already -1, rather than throwing an exception.&lt;/p&gt;


&lt;p&gt;Thu Jul 21 08:38:50 UTC 2016, RpcRetryingCaller&lt;/p&gt;
{globalStartTime=1469090201543, pause=100, retries=35}
&lt;p&gt;, org.apache.hadoop.hbase.regionserver.UnexpectedStateException: org.apache.hadoop.hbase.regionserver.UnexpectedStateException: Current snapshot id is -1,passed 1469085004304&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.DefaultMemStore.clearSnapshot(DefaultMemStore.java:187)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HStore.updateStorefiles(HStore.java:1054)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HStore.access$500(HStore.java:128)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HStore$StoreFlusherImpl.replayFlush(HStore.java:2270)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HRegion.replayFlushInStores(HRegion.java:4487)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HRegion.replayWALFlushCommitMarker(HRegion.java:4388)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HRegion.replayWALFlushMarker(HRegion.java:4191)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.RSRpcServices.doReplayBatchOp(RSRpcServices.java:776)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.RSRpcServices.replay(RSRpcServices.java:1655)&lt;br/&gt;
        at org.apache.hadoop.hbase.protobuf.generated.AdminProtos$AdminService$2.callBlockingMethod(AdminProtos.java:22255)&lt;br/&gt;
        at org.apache.hadoop.hbase.ipc.RpcServer.call(RpcServer.java:2114)&lt;br/&gt;
        at org.apache.hadoop.hbase.ipc.CallRunner.run(CallRunner.java:101)&lt;br/&gt;
        at org.apache.hadoop.hbase.ipc.RpcExecutor.consumerLoop(RpcExecutor.java:130)&lt;br/&gt;
        at org.apache.hadoop.hbase.ipc.RpcExecutor$1.run(RpcExecutor.java:107)&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:745)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12991618">HBASE-16270</key>
            <summary>Handle duplicate clearing of snapshot in region replicas</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rayokota">Robert Yokota</assignee>
                                    <reporter username="rayokota">Robert Yokota</reporter>
                        <labels>
                    </labels>
                <created>Thu, 21 Jul 2016 21:13:49 +0000</created>
                <updated>Mon, 29 Aug 2016 18:24:37 +0000</updated>
                            <resolved>Wed, 24 Aug 2016 13:54:53 +0000</resolved>
                                    <version>1.1.2</version>
                                    <fixVersion>2.0.0</fixVersion>
                    <fixVersion>1.3.0</fixVersion>
                    <fixVersion>1.4.0</fixVersion>
                    <fixVersion>1.1.6</fixVersion>
                    <fixVersion>1.2.3</fixVersion>
                                    <component>Replication</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>12</watches>
                                                                <comments>
                            <comment id="15388486" author="rayokota" created="Thu, 21 Jul 2016 21:41:13 +0000"  >&lt;p&gt;The above stack trace shows the UnexpectedStateException occurring via Region.replayWALFlushMarker.  However we also see it via other methods such as Region.replayWALRegionEventMarker:&lt;/p&gt;

&lt;p&gt;Thu Jul 21 04:33:01 UTC 2016, RpcRetryingCaller&lt;/p&gt;
{globalStartTime=1469075452267, pause=100, retries=35}
&lt;p&gt;, org.apache.hadoop.hbase.regionserver.UnexpectedStateException: org.apache.hadoop.hbase.regionserver.UnexpectedStateException: Current snapshot id is -1,passed 1469074991520&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.DefaultMemStore.clearSnapshot(DefaultMemStore.java:187)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HStore.updateStorefiles(HStore.java:1054)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HStore.access$500(HStore.java:128)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HStore$StoreFlusherImpl.abort(HStore.java:2282)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HRegion.replayWALRegionEventMarker(HRegion.java:4649)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.RSRpcServices.doReplayBatchOp(RSRpcServices.java:781)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.RSRpcServices.replay(RSRpcServices.java:1655)&lt;br/&gt;
        at org.apache.hadoop.hbase.protobuf.generated.AdminProtos$AdminService$2.callBlockingMethod(AdminProtos.java:22255)&lt;br/&gt;
        at org.apache.hadoop.hbase.ipc.RpcServer.call(RpcServer.java:2114)&lt;br/&gt;
        at org.apache.hadoop.hbase.ipc.CallRunner.run(CallRunner.java:101)&lt;br/&gt;
        at org.apache.hadoop.hbase.ipc.RpcExecutor.consumerLoop(RpcExecutor.java:130)&lt;br/&gt;
        at org.apache.hadoop.hbase.ipc.RpcExecutor$1.run(RpcExecutor.java:107)&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:745)&lt;/p&gt;
</comment>
                            <comment id="15397854" author="rayokota" created="Thu, 28 Jul 2016 17:23:50 +0000"  >&lt;p&gt;With the one-line fix in the attached patches, we no longer get the UnexpectedStateException, whereas without the patch, we would reliably get it in our production cluster after ~2 hours of restarting all 58 region servers.&lt;/p&gt;</comment>
                            <comment id="15400245" author="stack" created="Fri, 29 Jul 2016 23:39:03 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mbertozzi&quot; class=&quot;user-hover&quot; rel=&quot;mbertozzi&quot;&gt;Matteo Bertozzi&lt;/a&gt; This looks good to me. To you?&lt;/p&gt;</comment>
                            <comment id="15400266" author="mbertozzi" created="Fri, 29 Jul 2016 23:54:11 +0000"  >&lt;p&gt;In 1.1, 1.2, 1.3, branch-1, master I see that before calling clearSnapshot() we check snapshotId &amp;gt; 0. since &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11569&quot; title=&quot;Flush / Compaction handling from secondary region replicas&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11569&quot;&gt;&lt;del&gt;HBASE-11569&lt;/del&gt;&lt;/a&gt;&lt;br/&gt;
so this patch should not be needed in the latest code base.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; updateStorefiles(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; List&amp;lt;StoreFile&amp;gt; sfs, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; snapshotId)
...
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (snapshotId &amp;gt; 0) {
        &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.memstore.clearSnapshot(snapshotId);
      }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/apache/hbase/blob/master/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HStore.java#L1042&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/hbase/blob/master/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HStore.java#L1042&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;can you reproduce the issue with the latest &amp;gt;= 1.1? if so, can you write a unit-test?&lt;/p&gt;</comment>
                            <comment id="15400280" author="mbertozzi" created="Sat, 30 Jul 2016 00:06:44 +0000"  >&lt;p&gt;nevermind... did not understood patch.&lt;br/&gt;
the -1 check is on the internal snapshotId not the passed one&lt;/p&gt;</comment>
                            <comment id="15400284" author="mbertozzi" created="Sat, 30 Jul 2016 00:09:34 +0000"  >&lt;p&gt;when do we have snapshotId -1? always if the replica is not a primary?&lt;br/&gt;
can we add some if !RegionReplicaUtil.isDefaultReplica() to avoid to get in that code path instead of just doing a check on -1?&lt;/p&gt;</comment>
                            <comment id="15400525" author="rayokota" created="Sat, 30 Jul 2016 07:51:23 +0000"  >&lt;p&gt;It appears that this.snapshotId is set to -1 at the end of clearSnapshot().  So one way I could see the above error happening is if two threads are concurrently calling HStore.updateStoreFiles.  In HStore.updateStoreFiles there is write lock that is obtained.  The second thread will wait for the lock, and when it obtains the lock it will call clearSnapshot() after the first thread has already called it.  Since the snapshot has already been cleared (this.snapshotId set to -1), the second call to clearSnapshot should just return, instead of throwing UnexpectedStateException.&lt;/p&gt;</comment>
                            <comment id="15400676" author="mbertozzi" created="Sat, 30 Jul 2016 14:01:51 +0000"  >&lt;p&gt;so this is not just read replicas related, right?&lt;br/&gt;
patch look ok then, maybe we can replace the -1 with NO_SNAPSHOT_ID as the other code does&lt;/p&gt;</comment>
                            <comment id="15402649" author="enis" created="Mon, 1 Aug 2016 19:10:43 +0000"  >&lt;p&gt;I would like to understand this better since it seems that there is a race condition happening although we are protecting the flush replay handling with the synchronization via &lt;tt&gt;HRegion.writeState&lt;/tt&gt;. In &lt;tt&gt;HRegion.replayWALFlushCommitMarker()&lt;/tt&gt; we look at whether we are already flushing through &lt;tt&gt;writestate.flushing&lt;/tt&gt; which means that there must be a memstore snapshot already. So, then the flush commit marker received, we will try to clear the existing snapshot. Do you have logs from the same regionserver which is getting the UnexpectedStateException for the same region. If you grep the region&apos;s encoded name, that might help us a lot, because we usually have extensive logging for flush or replay operations. &lt;/p&gt;</comment>
                            <comment id="15402979" author="rayokota" created="Mon, 1 Aug 2016 22:49:35 +0000"  >&lt;p&gt;Sorry, I don&apos;t have the logs any longer.  However, I did spend a little time trying to identify where the race condition is.  Assuming that HRegion.writestate is being used to protect such races, I found this:&lt;/p&gt;

&lt;p&gt;HStore.updateStoreFiles is called by&lt;/p&gt;

&lt;p&gt;StoreFlusherImpl.replayFlush() - all these occurrences seem to be protected by HRegion.writestate&lt;br/&gt;
StoreFlusherImpl.abort() - all these occurrences seem to be protected by HRegion.writestate&lt;br/&gt;
StoreFlusherImpl.commit() - NOT all occurrences protected by HRegion.writestate&lt;/p&gt;

&lt;p&gt;For example here is a sequence that is not protected by HRegion.writestate&lt;/p&gt;

&lt;p&gt;HRegion.flushcache &lt;br/&gt;
-&amp;gt; HRegion.internalFlushcache &lt;br/&gt;
-&amp;gt; HRegion.internalFlushcache (different signature)&lt;br/&gt;
-&amp;gt; HRegion.internalFlushCacheAndCommit &lt;br/&gt;
-&amp;gt; StoreFlusherImpl.commit&lt;/p&gt;

&lt;p&gt;You can see at this link where the call to HRegion.internalFlushcache is outside the synchronized block for HRegion.writestate (however, my analysis may be wrong as this was based on just a few minutes of digging).&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/hbase/blob/master/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java#L2079-L2090&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/hbase/blob/master/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java#L2079-L2090&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15403209" author="enis" created="Tue, 2 Aug 2016 01:54:08 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rayokota&quot; class=&quot;user-hover&quot; rel=&quot;rayokota&quot;&gt;Robert Yokota&lt;/a&gt; for digging deeper. &lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;You can see at this link where the call to HRegion.internalFlushcache is outside the synchronized block for HRegion.writestate (however, my analysis may be wrong as this was based on just a few minutes of digging).&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;We are still guarding that code with writeState before and after the call. Moreover, region replicas have writeState.writesEnabled=false set, so normal HRegion.flushCache() and HRegion.close() etc calls should not be exercising that code paths. Only through the replayWALFlush() should be exercising the flush prepare + flush commit sequence which is already protected. &lt;/p&gt;

&lt;p&gt;Is there any way that we can reproduce the issue, and get the full logs for the region? That would really help in the analysis. &lt;/p&gt;</comment>
                            <comment id="15403288" author="rayokota" created="Tue, 2 Aug 2016 03:16:59 +0000"  >&lt;p&gt;First, I&apos;m sorry but I won&apos;t be able to reproduce this for you.  When it happened, it caused disruption for external and internal customers.&lt;/p&gt;

&lt;p&gt;Second, thank you for your patience with my musings as I am out of my depth in this matter.&lt;/p&gt;

&lt;p&gt;My conjecture is that this is happening for primary regions (not secondary regions).  I&apos;m also guessing that it is through a call to StoreFlusherImpl.commit() concurrent with another StoreFlusherImpl method that calls HStore.updateStoreFiles().  For example, here is another line where HRegion.internalFlushcache() eventually calls StoreFlusterImpl.commit().  Note that it is called for a primary region, but only if region replicas are turned on.  However, I don&apos;t know if it is possible that another call to HStore.updateStoreFiles() can be happening concurrently.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/hbase/blob/master/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java#L1234-L1243&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/hbase/blob/master/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java#L1234-L1243&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15404156" author="rayokota" created="Tue, 2 Aug 2016 15:12:21 +0000"  >&lt;p&gt;I went back to check the logs for our 6 node cluster.  Unfortunately, I see the UnexpectedStateException in all of the logs except the most recent, but nothing before, as these errors swamped the logs.  However, that was only the case for 5 out of the 6 region servers.  On the 6th region server, I do not see any UnexpectedStateException errors, but I do see the following exception swamp the logs instead.  Maybe this information will help.&lt;/p&gt;

&lt;p&gt;2016-07-21 18:30:25,765 WARN  &lt;span class=&quot;error&quot;&gt;&amp;#91;regionserver/stagehbase-5.az2.bl2.yammer.com/10.243.237.61:16020.replicationSource,region_replica_replication&amp;#93;&lt;/span&gt; regionserver.RegionReplicaReplicationEndpoint: Received IOException while trying to replicatejava.io.IOException: java.net.SocketTimeoutException: callTimeout=1200000, callDuration=1581759: null&lt;br/&gt;
        at org.apache.hadoop.hbase.wal.WALSplitter$PipelineController.checkForErrors(WALSplitter.java:876)&lt;br/&gt;
        at org.apache.hadoop.hbase.wal.WALSplitter$EntryBuffers.appendEntry(WALSplitter.java:939)&lt;br/&gt;
        at org.apache.hadoop.hbase.replication.regionserver.RegionReplicaReplicationEndpoint.replicate(RegionReplicaReplicationEndpoint.java:290)&lt;br/&gt;
        at org.apache.hadoop.hbase.replication.regionserver.ReplicationSource.shipEdits(ReplicationSource.java:694)&lt;br/&gt;
        at org.apache.hadoop.hbase.replication.regionserver.ReplicationSource.run(ReplicationSource.java:406)&lt;br/&gt;
Caused by: java.net.SocketTimeoutException: callTimeout=1200000, callDuration=1581759: null&lt;br/&gt;
        at org.apache.hadoop.hbase.client.RpcRetryingCaller.callWithRetries(RpcRetryingCaller.java:159)&lt;br/&gt;
        at org.apache.hadoop.hbase.replication.regionserver.RegionReplicaReplicationEndpoint$RetryingRpcCallable.call(RegionReplicaReplicationEndpoint.java:606)&lt;br/&gt;
        at java.util.concurrent.FutureTask.run(FutureTask.java:266)&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:745)&lt;br/&gt;
Caused by: org.apache.hadoop.hbase.client.RetriesExhaustedException: Can&apos;t get the location&lt;br/&gt;
        at org.apache.hadoop.hbase.client.RegionAdminServiceCallable.getRegionLocations(RegionAdminServiceCallable.java:178)&lt;br/&gt;
        at org.apache.hadoop.hbase.client.RegionAdminServiceCallable.getLocation(RegionAdminServiceCallable.java:105)&lt;br/&gt;
        at org.apache.hadoop.hbase.client.RegionAdminServiceCallable.prepare(RegionAdminServiceCallable.java:89)&lt;br/&gt;
        at org.apache.hadoop.hbase.client.RpcRetryingCaller.callWithRetries(RpcRetryingCaller.java:124)&lt;br/&gt;
        ... 5 more&lt;br/&gt;
Caused by: java.io.IOException: HRegionInfo was null in feedie:counters, row=keyvalues=&lt;/p&gt;
{feedie:counters,*,1449083378490.b5edddf50e5a18f6ff013b10a4b82edd./info:regioninfo/1449083379635/Put/vlen=43/seqid=0, feedie:counters,*,1449083378490.b5edddf50e5a18f6ff013b10a4b82edd./info:seqnumDuringOpen/1469114520082/Put/vlen=8/seqid=0, feedie:counters,*,1449083378490.b5edddf50e5a18f6ff013b10a4b82edd./info:server/1469114520082/Put/vlen=37/seqid=0, feedie:counters,*,1449083378490.b5edddf50e5a18f6ff013b10a4b82edd./info:serverstartcode/1469114520082/Put/vlen=8/seqid=0}
&lt;p&gt;        at org.apache.hadoop.hbase.client.ConnectionManager$HConnectionImplementation.locateRegionInMeta(ConnectionManager.java:1263)&lt;br/&gt;
        at org.apache.hadoop.hbase.client.ConnectionManager$HConnectionImplementation.locateRegion(ConnectionManager.java:1155)&lt;br/&gt;
        at org.apache.hadoop.hbase.client.RegionAdminServiceCallable.getRegionLocations(RegionAdminServiceCallable.java:170)&lt;br/&gt;
        ... 8 more&lt;/p&gt;
</comment>
                            <comment id="15405150" author="enis" created="Wed, 3 Aug 2016 01:36:33 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rayokota&quot; class=&quot;user-hover&quot; rel=&quot;rayokota&quot;&gt;Robert Yokota&lt;/a&gt; for sticking through this. There is one case that maybe relevant that in case of multi-column families, we may end up dropping the prepared snapshots for some column families versus all of them. This happens because each CF flush is a separate process. Is this table multi-CF or not? At least we can narrow down the search. &lt;/p&gt;</comment>
                            <comment id="15405180" author="rayokota" created="Wed, 3 Aug 2016 02:10:27 +0000"  >&lt;p&gt;There is no indication in the logs as to which regions were throwing the UnexpectedStateException.  But, yes, region replication was enabled for all our tables, and we do have 2 tables that each have 2 column families.&lt;/p&gt;</comment>
                            <comment id="15434661" author="enis" created="Wed, 24 Aug 2016 10:24:06 +0000"  >&lt;p&gt;I&apos;ve been trying to track down all the code paths that may lead to the case that we end up with a prepared snapshot context in &lt;tt&gt;StoreFlusherImpl&lt;/tt&gt;, but without the corresponding snapshot. Unfortunately, by manual inspection I am not able to narrow the root cause. I&apos;ve also checked the integration test for this which is running with 3 column families, and tried to reproduce it that way without success. &lt;/p&gt;

&lt;p&gt;Let us see whether the tests will run with this patch. We can commit the fix with some more logging and see whether that would help or not. &lt;/p&gt;</comment>
                            <comment id="15434708" author="enis" created="Wed, 24 Aug 2016 11:04:11 +0000"  >&lt;p&gt;Let&apos;s see the test results. &lt;/p&gt;</comment>
                            <comment id="15434881" author="hadoopqa" created="Wed, 24 Aug 2016 12:54:25 +0000"  >&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/error.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;b&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;&lt;/b&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Vote &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Runtime &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Comment &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;blue&quot;&gt;0&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;blue&quot;&gt; reexec &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;blue&quot;&gt; 0m 12s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;blue&quot;&gt; Docker mode activated. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; @author &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; 0m 0s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; The patch does not contain any @author tags. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt;-1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; test4tests &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; 0m 0s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; The patch doesn&apos;t appear to include any new or modified tests. Please justify why no new tests are needed for this patch. Also please list what manual steps were performed to verify this patch. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; mvninstall &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; 1m 31s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; branch-1.2 passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; compile &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; 0m 33s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; branch-1.2 passed with JDK v1.8.0_101 &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; compile &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; 0m 34s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; branch-1.2 passed with JDK v1.7.0_101 &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; checkstyle &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; 0m 54s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; branch-1.2 passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; mvneclipse &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; 0m 15s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; branch-1.2 passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; findbugs &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; 1m 48s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; branch-1.2 passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; javadoc &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; 0m 25s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; branch-1.2 passed with JDK v1.8.0_101 &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; javadoc &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; 0m 32s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; branch-1.2 passed with JDK v1.7.0_101 &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; mvninstall &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; 0m 44s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; compile &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; 0m 33s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed with JDK v1.8.0_101 &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; javac &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; 0m 33s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; compile &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; 0m 34s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed with JDK v1.7.0_101 &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; javac &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; 0m 34s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; checkstyle &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; 0m 56s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; mvneclipse &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; 0m 16s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; whitespace &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; 0m 0s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; The patch has no whitespace issues. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt;-1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; hadoopcheck &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; 8m 12s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; The patch causes 11 errors with Hadoop v2.6.1. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt;-1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; hadoopcheck &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; 9m 35s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; The patch causes 11 errors with Hadoop v2.6.2. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt;-1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; hadoopcheck &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; 11m 2s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; The patch causes 11 errors with Hadoop v2.6.3. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt;-1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; hadoopcheck &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; 12m 25s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; The patch causes 11 errors with Hadoop v2.7.1. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; hbaseprotoc &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; 0m 16s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; findbugs &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; 2m 16s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; javadoc &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; 0m 25s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed with JDK v1.8.0_101 &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; javadoc &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; 0m 35s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed with JDK v1.7.0_101 &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt;-1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; unit &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; 78m 46s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; hbase-server in the patch failed. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; asflicense &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; 0m 19s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; The patch does not generate ASF License warnings. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt;&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; 105m 23s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Reason &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Tests &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Failed junit tests &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; hadoop.hbase.mapreduce.TestMultiTableSnapshotInputFormat &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; hadoop.hbase.coprocessor.TestRowProcessorEndpoint &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Report/Notes &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Docker &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Client=1.11.2 Server=1.11.2 Image:yetus/hbase:date2016-08-24 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JIRA Patch URL &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12820736/HBASE-16270-branch-1.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12820736/HBASE-16270-branch-1.2.patch&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JIRA Issue &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-16270&quot; title=&quot;Handle duplicate clearing of snapshot in region replicas&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-16270&quot;&gt;&lt;del&gt;HBASE-16270&lt;/del&gt;&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Optional Tests &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  asflicense  javac  javadoc  unit  findbugs  hadoopcheck  hbaseanti  checkstyle  compile  &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; uname &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Linux 211093ff3a06 3.13.0-36-lowlatency #63-Ubuntu SMP PREEMPT Wed Sep 3 21:56:12 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Build tool &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; maven &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Personality &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; /testptch/patchprocess/precommit/personality/hbase.sh &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; git revision &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; branch-1.2 / 09ade32 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Default Java &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 1.7.0_101 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Multi-JDK versions &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  /usr/lib/jvm/java-8-oracle:1.8.0_101 /usr/lib/jvm/java-7-openjdk-amd64:1.7.0_101 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; findbugs &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; v3.0.0 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; unit &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3235/artifact/patchprocess/patch-unit-hbase-server.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3235/artifact/patchprocess/patch-unit-hbase-server.txt&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; unit test logs &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3235/artifact/patchprocess/patch-unit-hbase-server.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3235/artifact/patchprocess/patch-unit-hbase-server.txt&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  Test Results &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3235/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3235/testReport/&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; modules &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; C: hbase-server U: hbase-server &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Console output &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3235/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3235/console&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Powered by &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Apache Yetus 0.3.0   &lt;a href=&quot;http://yetus.apache.org&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://yetus.apache.org&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;This message was automatically generated.&lt;/p&gt;
</comment>
                            <comment id="15434902" author="enis" created="Wed, 24 Aug 2016 13:13:36 +0000"  >&lt;p&gt;LICENSE.vm issue is back for Hadoop-2.6.1+: &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[INFO] --- maven-remote-resources-plugin:1.5:process (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;) @ hbase-assembly ---
[ERROR] Error invoking method &apos;get(java.lang.&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;)&apos; in java.util.ArrayList at META-INF/LICENSE.vm[line 1671, column 8]
java.lang.reflect.InvocationTargetException
	at sun.reflect.GeneratedMethodAccessor141.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.apache.velocity.util.introspection.UberspectImpl$VelMethodImpl.doInvoke(UberspectImpl.java:395)
	at org.apache.velocity.util.introspection.UberspectImpl$VelMethodImpl.invoke(UberspectImpl.java:384)
	at org.apache.velocity.runtime.parser.node.ASTIndex.execute(ASTIndex.java:149)
	at org.apache.velocity.runtime.parser.node.ASTReference.execute(ASTReference.java:280)
	at org.apache.velocity.runtime.parser.node.ASTReference.render(ASTReference.java:369)
	at org.apache.velocity.runtime.parser.node.ASTBlock.render(ASTBlock.java:72)
	at org.apache.velocity.runtime.parser.node.ASTIfStatement.render(ASTIfStatement.java:87)
	at org.apache.velocity.runtime.parser.node.ASTBlock.render(ASTBlock.java:72)
	at org.apache.velocity.runtime.parser.node.ASTIfStatement.render(ASTIfStatement.java:87)
	at org.apache.velocity.runtime.parser.node.ASTBlock.render(ASTBlock.java:72)
	at org.apache.velocity.runtime.parser.node.ASTIfStatement.render(ASTIfStatement.java:87)
	at org.apache.velocity.runtime.parser.node.ASTBlock.render(ASTBlock.java:72)
	at org.apache.velocity.runtime.directive.Foreach.render(Foreach.java:420)
	at org.apache.velocity.runtime.parser.node.ASTDirective.render(ASTDirective.java:207)
	at org.apache.velocity.runtime.parser.node.ASTBlock.render(ASTBlock.java:72)
	at org.apache.velocity.runtime.parser.node.ASTIfStatement.render(ASTIfStatement.java:87)
	at org.apache.velocity.runtime.parser.node.SimpleNode.render(SimpleNode.java:342)
	at org.apache.velocity.Template.merge(Template.java:356)
	at org.apache.velocity.Template.merge(Template.java:260)
	at org.apache.velocity.app.VelocityEngine.mergeTemplate(VelocityEngine.java:354)
	at org.apache.maven.plugin.resources.remote.ProcessRemoteResourcesMojo.processResourceBundles(ProcessRemoteResourcesMojo.java:1164)
	at org.apache.maven.plugin.resources.remote.ProcessRemoteResourcesMojo.execute(ProcessRemoteResourcesMojo.java:520)
	at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
	at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
	at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
	at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
	at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
	at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
	at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
	at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
	at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
	at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
	at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
	at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
	at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:289)
	at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:229)
	at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:415)
	at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:356)
Caused by: java.lang.IndexOutOfBoundsException: Index: 0, Size: 0
	at java.util.ArrayList.rangeCheck(ArrayList.java:635)
	at java.util.ArrayList.get(ArrayList.java:411)
	... 46 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Fortunately does not affect this patch. I&apos;ll commit this shortly. &lt;/p&gt;</comment>
                            <comment id="15434973" author="enis" created="Wed, 24 Aug 2016 13:54:53 +0000"  >&lt;p&gt;As per above, I have pushed the patch to 1.1+. We can revisit if there is more logging or find a way to reproduce the issue locally. In the mean time, the patch seems harmless and will actually fix the flush handling for the region replica replication. &lt;br/&gt;
Thanks  Robert Yokota. &lt;/p&gt;</comment>
                            <comment id="15435039" author="hudson" created="Wed, 24 Aug 2016 14:44:01 +0000"  >&lt;p&gt;FAILURE: Integrated in Jenkins build HBase-1.1-JDK7 #1772 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.1-JDK7/1772/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.1-JDK7/1772/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-16270&quot; title=&quot;Handle duplicate clearing of snapshot in region replicas&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-16270&quot;&gt;&lt;del&gt;HBASE-16270&lt;/del&gt;&lt;/a&gt; Handle duplicate clearing of snapshot in region replicas (enis: rev dca60dbc566c6693269718e469021cdb9999bfce)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/DefaultMemStore.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15435057" author="hudson" created="Wed, 24 Aug 2016 14:52:36 +0000"  >&lt;p&gt;FAILURE: Integrated in Jenkins build HBase-1.3-IT #800 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.3-IT/800/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.3-IT/800/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-16270&quot; title=&quot;Handle duplicate clearing of snapshot in region replicas&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-16270&quot;&gt;&lt;del&gt;HBASE-16270&lt;/del&gt;&lt;/a&gt; Handle duplicate clearing of snapshot in region replicas (enis: rev 25995a2bf71195d0fe697e919f226a21b0d84be1)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/DefaultMemStore.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15435182" author="hudson" created="Wed, 24 Aug 2016 16:07:57 +0000"  >&lt;p&gt;FAILURE: Integrated in Jenkins build HBase-1.4 #365 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.4/365/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.4/365/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-16270&quot; title=&quot;Handle duplicate clearing of snapshot in region replicas&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-16270&quot;&gt;&lt;del&gt;HBASE-16270&lt;/del&gt;&lt;/a&gt; Handle duplicate clearing of snapshot in region replicas (enis: rev f0385b4b83bd9725aefcc9c9ec3f08cb57b33afa)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/DefaultMemStore.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15435212" author="hudson" created="Wed, 24 Aug 2016 16:28:08 +0000"  >&lt;p&gt;FAILURE: Integrated in Jenkins build HBase-1.3 #826 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.3/826/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.3/826/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-16270&quot; title=&quot;Handle duplicate clearing of snapshot in region replicas&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-16270&quot;&gt;&lt;del&gt;HBASE-16270&lt;/del&gt;&lt;/a&gt; Handle duplicate clearing of snapshot in region replicas (enis: rev 25995a2bf71195d0fe697e919f226a21b0d84be1)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/DefaultMemStore.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15435331" author="hudson" created="Wed, 24 Aug 2016 17:22:02 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build HBase-1.2-JDK8 #10 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.2-JDK8/10/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.2-JDK8/10/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-16270&quot; title=&quot;Handle duplicate clearing of snapshot in region replicas&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-16270&quot;&gt;&lt;del&gt;HBASE-16270&lt;/del&gt;&lt;/a&gt; Handle duplicate clearing of snapshot in region replicas (enis: rev fefb8e8513f6eac93cd89cd2a2cf4a8874a33116)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/DefaultMemStore.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15435372" author="hudson" created="Wed, 24 Aug 2016 17:42:41 +0000"  >&lt;p&gt;FAILURE: Integrated in Jenkins build HBase-Trunk_matrix #1474 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-Trunk_matrix/1474/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-Trunk_matrix/1474/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-16270&quot; title=&quot;Handle duplicate clearing of snapshot in region replicas&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-16270&quot;&gt;&lt;del&gt;HBASE-16270&lt;/del&gt;&lt;/a&gt; Handle duplicate clearing of snapshot in region replicas (enis: rev dda8f67b2cc9f6ef4ab434beea2a47d461a20a1f)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/AbstractMemStore.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15435413" author="hudson" created="Wed, 24 Aug 2016 18:09:12 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build HBase-1.2-JDK7 #13 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.2-JDK7/13/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.2-JDK7/13/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-16270&quot; title=&quot;Handle duplicate clearing of snapshot in region replicas&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-16270&quot;&gt;&lt;del&gt;HBASE-16270&lt;/del&gt;&lt;/a&gt; Handle duplicate clearing of snapshot in region replicas (enis: rev fefb8e8513f6eac93cd89cd2a2cf4a8874a33116)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/DefaultMemStore.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15435933" author="hudson" created="Wed, 24 Aug 2016 23:27:04 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build HBase-1.1-JDK8 #1857 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.1-JDK8/1857/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.1-JDK8/1857/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-16270&quot; title=&quot;Handle duplicate clearing of snapshot in region replicas&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-16270&quot;&gt;&lt;del&gt;HBASE-16270&lt;/del&gt;&lt;/a&gt; Handle duplicate clearing of snapshot in region replicas (enis: rev dca60dbc566c6693269718e469021cdb9999bfce)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/DefaultMemStore.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15443704" author="ndimiduk" created="Sun, 28 Aug 2016 16:26:37 +0000"  >&lt;p&gt;No assignee here?&lt;/p&gt;</comment>
                            <comment id="15446655" author="enis" created="Mon, 29 Aug 2016 18:24:37 +0000"  >&lt;p&gt;I&apos;ve committed Robert&apos;s patch. Let me assign to him. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12820736" name="HBASE-16270-branch-1.2.patch" size="802" author="rayokota" created="Thu, 28 Jul 2016 17:21:06 +0000"/>
                            <attachment id="12820735" name="HBASE-16270-master.patch" size="785" author="rayokota" created="Thu, 28 Jul 2016 17:21:06 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 29 Jul 2016 23:39:03 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i31chb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>