<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Thu Dec 01 21:57:01 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-14012/HBASE-14012.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-14012] Double Assignment and Dataloss when ServerCrashProcedure runs during Master failover</title>
                <link>https://issues.apache.org/jira/browse/HBASE-14012</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;(Rewrite to be more explicit about what the problem is)&lt;/p&gt;

&lt;p&gt;ITBLL. Master comes up (It is being killed every 1-5 minutes or so). It is joining a running cluster (all servers up except Master with most regions assigned out on cluster). ProcedureStore has two ServerCrashProcedures unfinished (RUNNABLE state) for two separate servers. One SCP is in the middle of the assign step when master crashes (SERVER_CRASH_ASSIGN). This SCP step has this comment on it:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
        &lt;span class=&quot;code-comment&quot;&gt;// Assign may not be idempotent. SSH used to requeue the SSH &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; we got an IOE assigning
&lt;/span&gt;        &lt;span class=&quot;code-comment&quot;&gt;// which is what we are mimicing here but it looks prone to &lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt; assignment &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; assign
&lt;/span&gt;        &lt;span class=&quot;code-comment&quot;&gt;// fails midway. TODO: Test.&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This issue is 1.2+ only since it is ServerCrashProcedure (Added in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13616&quot; title=&quot;Move ServerShutdownHandler to Pv2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13616&quot;&gt;&lt;del&gt;HBASE-13616&lt;/del&gt;&lt;/a&gt;, post hbase-1.1.x).&lt;/p&gt;

&lt;p&gt;Looking at ServerShutdownHandler, how we used to do crash processing before we moved over to the Pv2 framework, SSH may have (accidentally) avoided this issue since it does its processing in a big blob starting over if killed mid-crash. In particular, post-crash, SSH scans hbase:meta to find servers that were on the downed server. SCP scanneds Meta in one step, saves off the regions it finds into the ProcedureStore, and then in the next step, does actual assign. In this case, we crashed post-meta scan and during assign. Assign is a bulk assign. It mostly succeeded but got this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 809622 2015-06-09 20:05:28,576 INFO  [ProcedureExecutorThread-9] master.GeneralBulkAssigner: Failed assigning 3 regions to server c2021.halxg.cloudera.com,16020,1433905510696, reassigning them
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So, most regions actually made it to new locations except for a few stragglers. All of the successfully assigned regions then are reassigned on other side of master restart when we replay the SCP assign step.&lt;/p&gt;

&lt;p&gt;Let me put together the scan meta and assign steps in SCP; this should do until we redo all of assign to run on Pv2.&lt;/p&gt;

&lt;p&gt;A few other things I noticed:&lt;/p&gt;

&lt;p&gt;In SCP, we only check if failover in first step, not for every step, which means ServerCrashProcedure will run if on reload it is beyond the first step.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-comment&quot;&gt;// Is master fully online? If not, yield. No processing of servers unless master is up
&lt;/span&gt;    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!services.getAssignmentManager().isFailoverCleanupDone()) {
      throwProcedureYieldException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Waiting on master failover to complete&quot;&lt;/span&gt;);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This means we are assigning while Master is still coming up, a no-no (though it does not seem to have caused problem here). Fix.&lt;/p&gt;

&lt;p&gt;Also, I see that over the 8 hours of this particular log, each time the master crashes and comes back up, we queue a ServerCrashProcedure for c2022 because an empty dir never gets cleaned up:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 39 2015-06-09 22:15:33,074 WARN  [ProcedureExecutorThread-0] master.SplitLogManager: returning success without actually splitting and deleting all the log files in path hdfs:&lt;span class=&quot;code-comment&quot;&gt;//c2020.halxg.cloudera.com:8020/hbase/WALs/c2022.halxg.cloudera.com,16020,1433902151857-splitting&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Fix this too.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12842427">HBASE-14012</key>
            <summary>Double Assignment and Dataloss when ServerCrashProcedure runs during Master failover</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.png">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stack">stack</assignee>
                                    <reporter username="stack">stack</reporter>
                        <labels>
                    </labels>
                <created>Thu, 2 Jul 2015 20:06:00 +0000</created>
                <updated>Mon, 6 Jul 2015 17:58:43 +0000</updated>
                            <resolved>Mon, 6 Jul 2015 15:04:45 +0000</resolved>
                                    <version>2.0.0</version>
                    <version>1.2.0</version>
                                    <fixVersion>2.0.0</fixVersion>
                    <fixVersion>1.2.0</fixVersion>
                    <fixVersion>1.3.0</fixVersion>
                                    <component>master</component>
                    <component>Region Assignment</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>10</watches>
                                                                <comments>
                            <comment id="14612446" author="stack" created="Thu, 2 Jul 2015 20:09:14 +0000"  >&lt;p&gt;Here is a bit of log:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2015-06-09 20:06:20,270 INFO  [c2020:16000.activeMasterManager] master.ServerManager: AssignmentManager hasn&apos;t finished failover cleanup; waiting
2015-06-09 20:06:20,272 INFO  [c2020:16000.activeMasterManager] master.HMaster: hbase:meta with replicaId 0 assigned=0, rit=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, location=c2025.halxg.cloudera.com,16020,1433892619022
2015-06-09 20:06:20,295 DEBUG [ProcedureExecutorThread-4] regionserver.HRegionFileSystem: No StoreFiles &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;: hdfs:&lt;span class=&quot;code-comment&quot;&gt;//c2020.halxg.cloudera.com:8020/hbase/data/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/IntegrationTestBigLinkedList/c607a47967fd4873135f38e883156e4d/big
&lt;/span&gt;2015-06-09 20:06:20,295 DEBUG [ProcedureExecutorThread-10] regionserver.HRegionFileSystem: No StoreFiles &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;: hdfs:&lt;span class=&quot;code-comment&quot;&gt;//c2020.halxg.cloudera.com:8020/hbase/data/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/IntegrationTestBigLinkedList/1a5a90047a76da6dddebb5aff0acb275/big
&lt;/span&gt;2015-06-09 20:06:20,342 DEBUG [hconnection-0x680c3bc0-shared--pool3-t1] ipc.RpcClientImpl: Use SIMPLE authentication &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; service ClientService, sasl=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
2015-06-09 20:06:20,342 DEBUG [hconnection-0x680c3bc0-shared--pool3-t1] ipc.RpcClientImpl: Connecting to c2025.halxg.cloudera.com/10.20.84.31:16020
2015-06-09 20:06:20,376 DEBUG [ProcedureExecutorThread-4] regionserver.HRegionFileSystem: No StoreFiles &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;: hdfs:&lt;span class=&quot;code-comment&quot;&gt;//c2020.halxg.cloudera.com:8020/hbase/data/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/IntegrationTestBigLinkedList/c607a47967fd4873135f38e883156e4d/tiny
&lt;/span&gt;2015-06-09 20:06:20,379 DEBUG [ProcedureExecutorThread-10] regionserver.HRegionFileSystem: No StoreFiles &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;: hdfs:&lt;span class=&quot;code-comment&quot;&gt;//c2020.halxg.cloudera.com:8020/hbase/data/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/IntegrationTestBigLinkedList/1a5a90047a76da6dddebb5aff0acb275/tiny
&lt;/span&gt;2015-06-09 20:06:20,383 DEBUG [ProcedureExecutorThread-4] regionserver.HRegionFileSystem: No StoreFiles &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;: hdfs:&lt;span class=&quot;code-comment&quot;&gt;//c2020.halxg.cloudera.com:8020/hbase/data/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/IntegrationTestBigLinkedList/d586e9037f683384411ab2663e31f97b/big
&lt;/span&gt;2015-06-09 20:06:20,383 DEBUG [ProcedureExecutorThread-10] regionserver.HRegionFileSystem: No StoreFiles &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;: hdfs:&lt;span class=&quot;code-comment&quot;&gt;//c2020.halxg.cloudera.com:8020/hbase/data/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/IntegrationTestBigLinkedList/ce4ebb9a375a1fe4b5777d2d960c940c/big
&lt;/span&gt;2015-06-09 20:06:20,420 DEBUG [ProcedureExecutorThread-4] regionserver.HRegionFileSystem: No StoreFiles &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;: hdfs:&lt;span class=&quot;code-comment&quot;&gt;//c2020.halxg.cloudera.com:8020/hbase/data/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/IntegrationTestBigLinkedList/d586e9037f683384411ab2663e31f97b/tiny
&lt;/span&gt;2015-06-09 20:06:20,421 DEBUG [ProcedureExecutorThread-4] regionserver.HRegionFileSystem: No StoreFiles &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;: hdfs:&lt;span class=&quot;code-comment&quot;&gt;//c2020.halxg.cloudera.com:8020/hbase/data/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/IntegrationTestBigLinkedList/6dc837d3ec4e2afd05314472ee17ca80/big
&lt;/span&gt;2015-06-09 20:06:20,422 DEBUG [ProcedureExecutorThread-10] regionserver.HRegionFileSystem: No StoreFiles &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;: hdfs:&lt;span class=&quot;code-comment&quot;&gt;//c2020.halxg.cloudera.com:8020/hbase/data/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/IntegrationTestBigLinkedList/ce4ebb9a375a1fe4b5777d2d960c940c/tiny
&lt;/span&gt;2015-06-09 20:06:20,423 DEBUG [ProcedureExecutorThread-10] regionserver.HRegionFileSystem: No StoreFiles &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;: hdfs:&lt;span class=&quot;code-comment&quot;&gt;//c2020.halxg.cloudera.com:8020/hbase/data/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/IntegrationTestBigLinkedList/6fbe22ff15c2e5f2b207f79eaf8f382a/big
&lt;/span&gt;2015-06-09 20:06:20,453 DEBUG [ProcedureExecutorThread-10] regionserver.HRegionFileSystem: No StoreFiles &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;: hdfs:&lt;span class=&quot;code-comment&quot;&gt;//c2020.halxg.cloudera.com:8020/hbase/data/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/IntegrationTestBigLinkedList/6fbe22ff15c2e5f2b207f79eaf8f382a/tiny
&lt;/span&gt;
...

2015-06-09 20:06:20,795 DEBUG [ProcedureExecutorThread-4] regionserver.HRegionFileSystem: No StoreFiles &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;: hdfs:&lt;span class=&quot;code-comment&quot;&gt;//c2020.halxg.cloudera.com:8020/hbase/data/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/IntegrationTestBigLinkedList/0983b02ec079ea8ac2fb2901dbe2a6fb/tiny
&lt;/span&gt;2015-06-09 20:06:20,797 INFO  [ProcedureExecutorThread-4] master.AssignmentManager: Bulk assigning 9 region(s) across 5 server(s), round-robin=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
....
2015-06-09 20:06:20,909 INFO  [c2020:16000.activeMasterManager] master.AssignmentManager: Found regions out on cluster or in RIT; presuming failover
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Its the bulk assign there on the end that is doing assign of regions already out on cluster.&lt;/p&gt;</comment>
                            <comment id="14614146" author="stack" created="Sun, 5 Jul 2015 06:14:45 +0000"  >&lt;p&gt;Small patch that looks big because we did some changes in PB.&lt;/p&gt;

&lt;p&gt;Change name of procedure executor thread from&lt;br/&gt;
ProcedureExecutorThread to ProcedureExecutor (Yeah, its a thread)&lt;/p&gt;

&lt;p&gt;SplitLogManager: clean up logging.&lt;/p&gt;

&lt;p&gt;ServerCrashProcedure: Don&apos;t run if master is initializing and then the fix which is collapse steps: collapsed getting of list of regions to assign together with assign so a server crash cannot split these steps. Required regen of protobufs to remove step and to change name of one of the persisted Lists... its name was changed from regionsToAssign to regionsAssigned.&lt;/p&gt;

&lt;p&gt;Trying hadoopqa to see how it does.&lt;/p&gt;

&lt;p&gt;It is hard to add a test in here given we are removing the hole during which a crashed master could cause harm. Would be sweet if could set up the scenario seen in cluster testing to ensure this fix for sure nails it.&lt;/p&gt;</comment>
                            <comment id="14614184" author="hadoopqa" created="Sun, 5 Jul 2015 08:48:16 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12743615/14012.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12743615/14012.txt&lt;/a&gt;&lt;br/&gt;
  against master branch at commit e640f1e76af8f32015f475629610da127897f01e.&lt;br/&gt;
  ATTACHMENT ID: 12743615&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.7.0)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 1 warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.master.procedure.TestServerCrashProcedure&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14667//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14667//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14667//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14667//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14667//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14667//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Javadoc warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14667//artifact/patchprocess/patchJavadocWarnings.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14667//artifact/patchprocess/patchJavadocWarnings.txt&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14667//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14667//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14614351" author="stack" created="Sun, 5 Jul 2015 18:24:15 +0000"  >&lt;p&gt;Test failure was legit. Failure was during the DLR run of the TestServerCrashProcedure. The failure was an instance of this patch is trying to fix, that is:&lt;/p&gt;

&lt;p&gt;+ The ServerCrashProcedure is set up to use the nice ProcedureV2 test rig that crashes out the test rig after each step and replays the last step&lt;br/&gt;
+ In this case, we were rerunning the new compounded get-regions-to-assign and assign steps.&lt;br/&gt;
+ The test infra crashed us after doing above step so we were running through for the second time.&lt;br/&gt;
+ Second time through, there were no regions to assign because we&apos;d already assigned all.&lt;br/&gt;
+ When no regions to assign, I had a short-circuit in place so we just cut to the finish because we were &apos;done&apos;.&lt;br/&gt;
+ But then we missed the clean up of the DLR ZK markings of regions in recovery.&lt;/p&gt;

&lt;p&gt;I don&apos;t think I need to add a test for this patch; the current TestServerCrashProcedure already exercises the case we set out to fix.&lt;/p&gt;

&lt;p&gt;Let me do a few runs on cluster to be sure I have not broke anything else.&lt;/p&gt;</comment>
                            <comment id="14614358" author="stack" created="Sun, 5 Jul 2015 18:49:15 +0000"  >&lt;p&gt;@here Can I have a review please? Test on cluster passes. Trying bigger runs but could do with a review in meantime. Thanks.&lt;/p&gt;</comment>
                            <comment id="14614392" author="stack" created="Sun, 5 Jul 2015 20:31:42 +0000"  >&lt;p&gt;Did a few cluster runs of ITBLL up to 500M and all passes (branch-1.2). Will keep going up in size.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I don&apos;t think I need to add a test for this patch...&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Thinking more on my comment above, I could do a test that was more true to the failure found:&lt;/p&gt;

&lt;p&gt;+ During ServerCrashProcessing assign step, bulk assign N regions and have at least N-1 fail the assign.&lt;br/&gt;
+ While the N-1th region was being reassigned, crash the master down; all other regions will have had to be successfully assigned elsewhere before the crash happened... so that means the N-1th would have to be slower than all others being assigned.&lt;br/&gt;
+ Bring up new master and check for double assignment.&lt;/p&gt;

&lt;p&gt;Such a test would be a bit hard to contrive.&lt;/p&gt;</comment>
                            <comment id="14614404" author="hadoopqa" created="Sun, 5 Jul 2015 21:12:47 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12743633/14012v2.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12743633/14012v2.txt&lt;/a&gt;&lt;br/&gt;
  against master branch at commit e640f1e76af8f32015f475629610da127897f01e.&lt;br/&gt;
  ATTACHMENT ID: 12743633&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.7.0)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 1 warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14668//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14668//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14668//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14668//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14668//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14668//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Javadoc warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14668//artifact/patchprocess/patchJavadocWarnings.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14668//artifact/patchprocess/patchJavadocWarnings.txt&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14668//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14668//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14615073" author="busbey" created="Mon, 6 Jul 2015 14:17:46 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
--- a/hbase-procedure/src/main/java/org/apache/hadoop/hbase/procedure2/ProcedureExecutor.java
+++ b/hbase-procedure/src/main/java/org/apache/hadoop/hbase/procedure2/ProcedureExecutor.java
@@ -447,7 +447,7 @@ &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; class ProcedureExecutor&amp;lt;TEnvironment&amp;gt; {
 
     &lt;span class=&quot;code-comment&quot;&gt;// Initialize procedures executor
&lt;/span&gt;     &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i = 0; i &amp;lt; numThreads; ++i) {
-      threads[i] = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;(&lt;span class=&quot;code-quote&quot;&gt;&quot;ProcedureExecutorThread-&quot;&lt;/span&gt; + i) {
+      threads[i] = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;(&lt;span class=&quot;code-quote&quot;&gt;&quot;ProcedureExecutor-&quot;&lt;/span&gt; + i) {
         @Override
         &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void run() {
           execLoop();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Why include this thread rename? seems unrelated.&lt;/p&gt;</comment>
                            <comment id="14615082" author="busbey" created="Mon, 6 Jul 2015 14:24:54 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; SERVER_CRASH_SPLIT_LOGS:
         splitLogs(env);
         &lt;span class=&quot;code-comment&quot;&gt;// If DLR, go to FINISH. Otherwise, &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; DLS, go to SERVER_CRASH_CALC_REGIONS_TO_ASSIGN
&lt;/span&gt;         &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.distributedLogReplay) setNextState(ServerCrashState.SERVER_CRASH_FINISH);
-        &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; setNextState(ServerCrashState.SERVER_CRASH_CALC_REGIONS_TO_ASSIGN);
-        &lt;span class=&quot;code-keyword&quot;&gt;break&lt;/span&gt;;
-
-      &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; SERVER_CRASH_CALC_REGIONS_TO_ASSIGN:
-        &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.regionsToAssign = calcRegionsToAssign(env);
-        setNextState(ServerCrashState.SERVER_CRASH_ASSIGN);
+        &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; setNextState(ServerCrashState.SERVER_CRASH_ASSIGN);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;nit: comment is wrong now, because SERVER_CRASH_CALC_REGIONS_TO_ASSIGN is gone.&lt;/p&gt;</comment>
                            <comment id="14615101" author="busbey" created="Mon, 6 Jul 2015 14:37:52 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
--- a/hbase-protocol/src/main/protobuf/MasterProcedure.proto
+++ b/hbase-protocol/src/main/protobuf/MasterProcedure.proto
@@ -188,7 +188,7 @@ message ServerCrashStateData {
   required ServerName server_name = 1;
   optional bool distributed_log_replay = 2;
   repeated RegionInfo regions_on_crashed_server = 3;
-  repeated RegionInfo regions_to_assign = 4;
+  repeated RegionInfo regions_assigned = 4;
   optional bool carrying_meta = 5;
   optional bool should_split_wal = 6 [&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;];
 }
@@ -200,7 +200,7 @@ &lt;span class=&quot;code-keyword&quot;&gt;enum&lt;/span&gt; ServerCrashState {
   SERVER_CRASH_NO_SPLIT_LOGS = 4;
   SERVER_CRASH_SPLIT_LOGS = 5;
   SERVER_CRASH_PREPARE_LOG_REPLAY = 6;
-  SERVER_CRASH_CALC_REGIONS_TO_ASSIGN = 7;
+  &lt;span class=&quot;code-comment&quot;&gt;// Removed SERVER_CRASH_CALC_REGIONS_TO_ASSIGN = 7;
&lt;/span&gt;   SERVER_CRASH_ASSIGN = 8;
   SERVER_CRASH_WAIT_ON_ASSIGN = 9;
   SERVER_CRASH_FINISH = 100;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Does this semantic change impact rolling upgrades for folks who have ProcV2 enabled on 1.1 installs?&lt;/p&gt;</comment>
                            <comment id="14615114" author="stack" created="Mon, 6 Jul 2015 14:46:03 +0000"  >&lt;blockquote&gt;&lt;p&gt;Why include this thread rename? seems unrelated.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Following this thread name is how I was able to trace what happened. That the thread had thread in its name was irritating.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Does this semantic change impact rolling upgrades for folks who have ProcV2 enabled on 1.1 installs?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;No. This changed did not make it out into a release yet.&lt;/p&gt;

&lt;p&gt;Let me fix the comment. Will wait a few minutes in case you have other comments Sean&lt;/p&gt;</comment>
                            <comment id="14615115" author="busbey" created="Mon, 6 Jul 2015 14:48:59 +0000"  >&lt;p&gt;lgtm.&lt;/p&gt;</comment>
                            <comment id="14615143" author="stack" created="Mon, 6 Jul 2015 15:04:45 +0000"  >&lt;p&gt;Pushed to 1.2+&lt;/p&gt;

&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=busbey&quot; class=&quot;user-hover&quot; rel=&quot;busbey&quot;&gt;Sean Busbey&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14615333" author="hudson" created="Mon, 6 Jul 2015 17:15:57 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.2-IT #38 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.2-IT/38/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.2-IT/38/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14012&quot; title=&quot;Double Assignment and Dataloss when ServerCrashProcedure runs during Master failover&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14012&quot;&gt;&lt;del&gt;HBASE-14012&lt;/del&gt;&lt;/a&gt; Double Assignment and Dataloss when ServerCrashProcedure runs during Master failover (stack: rev 8660a6004c7bc500536e43c0d35498cfc16c9867)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/RegionStateStore.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/procedure/ServerCrashProcedure.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/java/org/apache/hadoop/hbase/protobuf/generated/MasterProcedureProtos.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/protobuf/MasterProcedure.proto&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/SplitLogManager.java&lt;/li&gt;
	&lt;li&gt;hbase-procedure/src/main/java/org/apache/hadoop/hbase/procedure2/ProcedureExecutor.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14615353" author="hudson" created="Mon, 6 Jul 2015 17:33:11 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.3 #36 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.3/36/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.3/36/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14012&quot; title=&quot;Double Assignment and Dataloss when ServerCrashProcedure runs during Master failover&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14012&quot;&gt;&lt;del&gt;HBASE-14012&lt;/del&gt;&lt;/a&gt; Double Assignment and Dataloss when ServerCrashProcedure runs during Master failover (stack: rev 4e36815906e5fd175063b0700532e3dce88bcda6)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-protocol/src/main/protobuf/MasterProcedure.proto&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/procedure/ServerCrashProcedure.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/java/org/apache/hadoop/hbase/protobuf/generated/MasterProcedureProtos.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/SplitLogManager.java&lt;/li&gt;
	&lt;li&gt;hbase-procedure/src/main/java/org/apache/hadoop/hbase/procedure2/ProcedureExecutor.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/RegionStateStore.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14615397" author="hudson" created="Mon, 6 Jul 2015 17:53:59 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.3-IT #21 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.3-IT/21/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.3-IT/21/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14012&quot; title=&quot;Double Assignment and Dataloss when ServerCrashProcedure runs during Master failover&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14012&quot;&gt;&lt;del&gt;HBASE-14012&lt;/del&gt;&lt;/a&gt; Double Assignment and Dataloss when ServerCrashProcedure runs during Master failover (stack: rev 4e36815906e5fd175063b0700532e3dce88bcda6)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/SplitLogManager.java&lt;/li&gt;
	&lt;li&gt;hbase-procedure/src/main/java/org/apache/hadoop/hbase/procedure2/ProcedureExecutor.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/protobuf/MasterProcedure.proto&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/java/org/apache/hadoop/hbase/protobuf/generated/MasterProcedureProtos.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/procedure/ServerCrashProcedure.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/RegionStateStore.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14615400" author="hudson" created="Mon, 6 Jul 2015 17:55:31 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-TRUNK #6630 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/6630/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/6630/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14012&quot; title=&quot;Double Assignment and Dataloss when ServerCrashProcedure runs during Master failover&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14012&quot;&gt;&lt;del&gt;HBASE-14012&lt;/del&gt;&lt;/a&gt; Double Assignment and Dataloss when ServerCrashProcedure (stack: rev cff1a5f1f5cc8f5e1e99c6aecb39e2e69f86bf7e)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/SplitLogManager.java&lt;/li&gt;
	&lt;li&gt;hbase-procedure/src/main/java/org/apache/hadoop/hbase/procedure2/ProcedureExecutor.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/RegionStateStore.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/protobuf/MasterProcedure.proto&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/java/org/apache/hadoop/hbase/protobuf/generated/MasterProcedureProtos.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/procedure/ServerCrashProcedure.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14615405" author="hudson" created="Mon, 6 Jul 2015 17:58:43 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.2 #52 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.2/52/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.2/52/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14012&quot; title=&quot;Double Assignment and Dataloss when ServerCrashProcedure runs during Master failover&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14012&quot;&gt;&lt;del&gt;HBASE-14012&lt;/del&gt;&lt;/a&gt; Double Assignment and Dataloss when ServerCrashProcedure runs during Master failover (stack: rev 8660a6004c7bc500536e43c0d35498cfc16c9867)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/SplitLogManager.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/procedure/ServerCrashProcedure.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/java/org/apache/hadoop/hbase/protobuf/generated/MasterProcedureProtos.java&lt;/li&gt;
	&lt;li&gt;hbase-procedure/src/main/java/org/apache/hadoop/hbase/procedure2/ProcedureExecutor.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/RegionStateStore.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/protobuf/MasterProcedure.proto&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12743615" name="14012.txt" size="52319" author="stack" created="Sun, 5 Jul 2015 06:14:45 +0000"/>
                            <attachment id="12743633" name="14012v2.txt" size="56911" author="stack" created="Sun, 5 Jul 2015 18:24:15 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 5 Jul 2015 08:48:16 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 21 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2gt6f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>