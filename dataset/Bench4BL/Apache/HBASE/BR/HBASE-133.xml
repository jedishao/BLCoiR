<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 02 19:02:24 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-133/HBASE-133.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-133] [hbase] TestRegionServerExit has new failure mode since HADOOP-2338</title>
                <link>https://issues.apache.org/jira/browse/HBASE-133</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;TestRegionServerExit has a new failure mode since &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-246&quot; title=&quot;[hbase] NPE in master server&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-246&quot;&gt;&lt;del&gt;HADOOP-2338&lt;/del&gt;&lt;/a&gt;. It appears that the region server won&apos;t exit. Is it possible that  a scanner lease is not being cleaned up correctly?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12384264">HBASE-133</key>
            <summary>[hbase] TestRegionServerExit has new failure mode since HADOOP-2338</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jimk">Jim Kellerman</reporter>
                        <labels>
                    </labels>
                <created>Sun, 9 Dec 2007 08:07:04 +0000</created>
                <updated>Fri, 22 Aug 2008 21:34:50 +0000</updated>
                            <resolved>Wed, 12 Dec 2007 00:41:28 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12549822" author="hadoopqa" created="Sun, 9 Dec 2007 11:35:10 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
&lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12371307/patch.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12371307/patch.txt&lt;/a&gt;&lt;br/&gt;
against trunk revision r602633.&lt;/p&gt;

&lt;p&gt;    @author +1.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    javadoc +1.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    javac +1.  The applied patch does not generate any new compiler warnings.&lt;/p&gt;

&lt;p&gt;    findbugs +1.  The patch does not introduce any new Findbugs warnings.&lt;/p&gt;

&lt;p&gt;    core tests +1.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    contrib tests +1.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/1305/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/1305/testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/1305/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/1305/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle results: &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/1305/artifact/trunk/build/test/checkstyle-errors.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/1305/artifact/trunk/build/test/checkstyle-errors.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/1305/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/1305/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12549919" author="jimk" created="Mon, 10 Dec 2007 06:37:54 +0000"  >&lt;p&gt;HMaster: stop root and meta scanners after region servers are quiesced - this should fix TestRegionServerExit.&lt;br/&gt;
HStore, TestTableMapReduce: reduce logging verbosity&lt;br/&gt;
TestTableJoinMapReduce - make shutdown more like other hbase test cases.&lt;/p&gt;</comment>
                            <comment id="12549924" author="jimk" created="Mon, 10 Dec 2007 06:43:16 +0000"  >&lt;p&gt;Tests passed. Comiitted&lt;/p&gt;</comment>
                            <comment id="12550033" author="hudson" created="Mon, 10 Dec 2007 12:26:27 +0000"  >&lt;p&gt;Integrated in Hadoop-Nightly #328 (See &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Nightly/328/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Nightly/328/&lt;/a&gt;)&lt;/p&gt;</comment>
                            <comment id="12550144" author="jimk" created="Mon, 10 Dec 2007 18:31:00 +0000"  >&lt;p&gt;Failed in nightly build #328&lt;/p&gt;

&lt;p&gt;This was a strange failure. The region server serving the meta region aborted as expected, its leas timed out, the master started processing the shutdown by splitting the region server&apos;s log and scanning the root region where it discovered that the downed server was serving the meta region, the meta region was reassigned, opened, information was updated in the root region, yet the next root scan got back the old data:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;

    [junit] 2007-12-10 11:58:52,417 INFO  [HMaster] org.apache.hadoop.hbase.HMaster$ProcessRegionOpen.process(HMaster.java:2461): updating row .META.,,1 in table -ROOT-,,0 with startcode 1197287919218 and server 140.211.11.75:39266

    [junit] 2007-12-10 11:59:00,221 INFO  [HMaster.rootScanner] org.apache.hadoop.hbase.HMaster$BaseScanner.scanRegion(HMaster.java:213): HMaster.rootScanner scanning meta region regionname: -ROOT-,,0, startKey: &amp;lt;&amp;gt;, server: 140.211.11.75:39206}
    [junit] 2007-12-10 11:59:00,317 DEBUG [HMaster.rootScanner] org.apache.hadoop.hbase.HMaster$BaseScanner.scanRegion(HMaster.java:249): HMaster.rootScanner regioninfo: {regionname: .META.,,1, startKey: &amp;lt;&amp;gt;, tableDesc: {name: .META., families: {info:={name: info, max versions: 1, compression: NONE, in memory: &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, max length: 2147483647, bloom filter: none}}}}, server: 140.211.11.75:39205, startCode: 1197287908915
    [junit] 2007-12-10 11:59:00,317 DEBUG [HMaster.rootScanner] org.apache.hadoop.hbase.HMaster$BaseScanner.checkAssigned(HMaster.java:469): Current assignment of .META.,,1 is no good
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;As to why the test timed out, one of the region servers failed to exit completely (HRegionServer.run)&lt;/p&gt;</comment>
                            <comment id="12550737" author="jimk" created="Tue, 11 Dec 2007 23:11:57 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-133&quot; title=&quot;[hbase] TestRegionServerExit has new failure mode since HADOOP-2338&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-133&quot;&gt;&lt;del&gt;HADOOP-2392&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-140&quot; title=&quot;[hbase] Fix assertion failures in TestTableMapReduce&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-140&quot;&gt;&lt;del&gt;HADOOP-2324&lt;/del&gt;&lt;/a&gt;:&lt;/p&gt;

&lt;p&gt;Chore&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;initialChore() now returns boolean&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;HMaster&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;rather than retry in root and meta scanners, return if a scan fails. It will get retried on the next scan. This has two effects: 1) scanners exit more quickly during shutdown and 2) they don&apos;t keep retrying to connect to a dead server, allowing them to recover from a server going down more quickly.&lt;/li&gt;
	&lt;li&gt;initialScan in root and meta scanners return boolean and do not progress to maintenanceScan until the initial scan completes successfully.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;HRegionServer&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;speed up region server exit by reordering join&apos;s so that we join with threads in the order that we told them to stop&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;TestTableMapReduce&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;remove overrides of heartbeat and thread wake intervals&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-89&quot; title=&quot;NPE in HMaster.cancelLease&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-89&quot;&gt;&lt;del&gt;HADOOP-2396&lt;/del&gt;&lt;/a&gt;:&lt;/p&gt;

&lt;p&gt;HMaster&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;move check for null HRegionInfo before first attempt to dereference it.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-256&quot; title=&quot;[hbase] &amp;quot;The only time that a meta scanner should try to recover a log is when the master is starting.&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-256&quot;&gt;&lt;del&gt;HADOOP-2397&lt;/del&gt;&lt;/a&gt;:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;HMaster$BaseScanner.checkAssigned: don&apos;t try to split dead server&apos;s log if initial startup has completed.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-58&quot; title=&quot;[hbase] review and fix logging levels&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-58&quot;&gt;&lt;del&gt;HADOOP-2353&lt;/del&gt;&lt;/a&gt;:&lt;/p&gt;

&lt;p&gt;HMsg&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;change toString() to only output the region name rather than calling HRegionInfo.toString()&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;StaticTestEnvironment&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;make logging a bit less verbose&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;TestHLog&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;was writing to local file system and failing on Windows&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12550738" author="jimk" created="Tue, 11 Dec 2007 23:12:52 +0000"  >&lt;p&gt;Works for me. Try hudson&lt;/p&gt;</comment>
                            <comment id="12550761" author="hadoopqa" created="Wed, 12 Dec 2007 00:23:08 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
&lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12371466/patch.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12371466/patch.txt&lt;/a&gt;&lt;br/&gt;
against trunk revision r603315.&lt;/p&gt;

&lt;p&gt;    @author +1.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    javadoc +1.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    javac +1.  The applied patch does not generate any new compiler warnings.&lt;/p&gt;

&lt;p&gt;    findbugs +1.  The patch does not introduce any new Findbugs warnings.&lt;/p&gt;

&lt;p&gt;    core tests +1.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    contrib tests +1.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/1321/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/1321/testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/1321/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/1321/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle results: &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/1321/artifact/trunk/build/test/checkstyle-errors.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/1321/artifact/trunk/build/test/checkstyle-errors.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/1321/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/1321/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12550768" author="jimk" created="Wed, 12 Dec 2007 00:41:28 +0000"  >&lt;p&gt;Tests passed. Committed. If the problem should reoccur, we will open a new Jira.&lt;/p&gt;</comment>
                            <comment id="12550940" author="hudson" created="Wed, 12 Dec 2007 12:22:04 +0000"  >&lt;p&gt;Integrated in Hadoop-Nightly #330 (See &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Nightly/330/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Nightly/330/&lt;/a&gt;)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12371466" name="patch.txt" size="26165" author="jimk" created="Tue, 11 Dec 2007 23:11:57 +0000"/>
                            <attachment id="12371307" name="patch.txt" size="8633" author="jimk" created="Sun, 9 Dec 2007 10:28:31 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 9 Dec 2007 11:35:10 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>24917</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0h4on:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>98021</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>