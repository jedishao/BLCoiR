<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 02 19:38:47 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-299/HBASE-299.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-299] HClient for multiple tables</title>
                <link>https://issues.apache.org/jira/browse/HBASE-299</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;I have an app that needs to access multiple HBase tables concurrently.  The current HClient can only have one table open at a time even though it caches region servers of multiple tables as they are looked up.&lt;/p&gt;

&lt;p&gt;This means that my application layer must open multiple HClients, one per table, perhaps caching those HClients in a pool to reuse them (and their cached table data) as appropriate.&lt;/p&gt;

&lt;p&gt;or&lt;/p&gt;

&lt;p&gt;Shall I write an HClient patch that makes the HClient  multi-table thread-safe?&lt;/p&gt;

&lt;p&gt;Jim&apos;s suggestion is to implement an HClient singleton (call it HClientManager?) that does the actual caching/resync of root/meta regions.  Individual HClients will still be one table, one update row at a time but will rely on the singleton for the cached table info.  We want HClients to be created and disposed as fast as possible with a minimum of meta lookups.&lt;/p&gt;

&lt;p&gt;Jim, what about non-root/meta regions, shouldn&apos;t they be cached and refreshed via the singleton also?  It may still be possible that a region split/resync will occur during on HClient session so does the HClientManager need to be able to notify the corresponding HClients in that event?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12372382">HBASE-299</key>
            <summary>HClient for multiple tables</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="james.kennedy">James Kennedy</reporter>
                        <labels>
                    </labels>
                <created>Mon, 25 Jun 2007 21:27:16 +0000</created>
                <updated>Mon, 4 Feb 2008 18:41:34 +0000</updated>
                            <resolved>Fri, 3 Aug 2007 00:03:18 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12508568" author="james.kennedy" created="Wed, 27 Jun 2007 15:05:41 +0000"  >&lt;p&gt;I decided to write a new equivalent of HClient using two classes: HConnection and HTable. These represent a splitting of the original HClient. HConnection takes care of administrative functions like create/delete/disable/enableTable(), etc, caches all table info and region connections, and serves out HTables via openTable() or createTable().&lt;/p&gt;

&lt;p&gt;HTable is a lighter-weight client that allows scan/update of a single HBase table. It uses its parent HConnection to initialize any region server proxies, etc.&lt;/p&gt;

&lt;p&gt;The HConnection is NOT a singleton. I figured that within a single app, user may need to access multiple HBase clusters.  So instead i made HConnection maintain a static &amp;lt;Configuration, HConnection&amp;gt; map with static getters for HConnection by Configuration.  The default configuration is the one on the classpath but it is possible to get HConnections based on any other Configuration.  HConnection will statically preserve those connections within the application lifetime and since its constructor is private, it is not possible to instantiate an unregistered HConnection.&lt;/p&gt;

&lt;p&gt;The chief advantage of this HConnection-HTable pattern is that one can have multiple concurrent transactions on multiple tables that share a single HBase &quot;connection&quot;. &lt;/p&gt;

&lt;p&gt;I&apos;ll post a patch when i&apos;ve tested some more. Right now this code presumes Hadoop-1531 patch is applied and i&apos;m trying to avoid code tangle... it would be great if Hadoop-1521 got applied soon unless you guys reject it.&lt;/p&gt;</comment>
                            <comment id="12508622" author="jimk" created="Wed, 27 Jun 2007 19:01:57 +0000"  >&lt;p&gt;See Michael&apos;s and my comments on &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-308&quot; title=&quot;Add RowFilter to HRegion.HScanner&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-308&quot;&gt;&lt;del&gt;HADOOP-1531&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Why not have one HConnection object for each HBase instance?&lt;/p&gt;

&lt;p&gt;Since the HConnection object is managing region to server mappings I guess it makes sense to cache all the server information in the connection object rather than just the root/meta information as I suggested previously.&lt;/p&gt;

&lt;p&gt;My original thinking was that since what you call HTable is associated with a single table, that it made sense to cache the information for that table here instead of in the connection object. This way, when you are done with that table, it&apos;s cache will go away when the HTable object goes away.&lt;/p&gt;

&lt;p&gt;If you maintain the region to server cache for all the open tables for an HBase instance in the HConnection, then there should probably a close method on HTable so it can tell the connection to drop the information for that table.&lt;/p&gt;</comment>
                            <comment id="12508646" author="james.kennedy" created="Wed, 27 Jun 2007 20:49:45 +0000"  >&lt;p&gt;If by &quot;HBase instance&quot; we mean a Configuration object pointing to a specific HMaster, then one HConnection per HBase instance is how i&apos;ve implemented it.  The static methods in HConnection ensure that HConnections are initialized as needed based on given Configuration object.  After that, any requests for an HConnection are keyed by Configuration. Repeated requests always get the same HConnection for a given Configuration.&lt;/p&gt;

&lt;p&gt;Imagine using a single HConnection for many transactions across many (sometimes the same) tables.  You don&apos;t want to &quot;close&quot; an HTable because another transaction on the same table may execute moments afterwards... the caching has been centralized to avoid repeated meta lookups. &lt;/p&gt;

&lt;p&gt;Only when an HTable times out accessing an HRegion and needs to findRegion(),  does it call a HConnection.closeTable() which essentially clears the cache for that table.  This is followed by  a synchronized HConnection.getTableServers() method which will update the cache with the new regions.&lt;/p&gt;


</comment>
                            <comment id="12508691" author="jimk" created="Thu, 28 Jun 2007 00:11:12 +0000"  >&lt;p&gt;&amp;gt; If by &quot;HBase instance&quot; we mean a Configuration object pointing to a specific HMaster, then one &lt;br/&gt;
&amp;gt; HConnection per HBase instance is how i&apos;ve implemented it. &lt;/p&gt;

&lt;p&gt;Yes, this is what I meant.&lt;/p&gt;

&lt;p&gt;&amp;gt; Imagine using a single HConnection for many transactions across many (sometimes the same) tables. &lt;br/&gt;
&amp;gt; You don&apos;t want to &quot;close&quot; an HTable because another transaction on the same table may execute &lt;br/&gt;
&amp;gt; moments afterwards... the caching has been centralized to avoid repeated meta lookups.&lt;/p&gt;

&lt;p&gt;Yes. However, an application usually knows when it is done accessing a table. If the table region to server map were in the HTable object, then that cache would be dumped when the client garbage collected the HTable object. However, since we are talking about caching the region to server information in the HConnection object, the client needs the ability to say &quot;ok I am done with this table now&quot; so that the HConnection can drop all that cached information. For very large tables, this could consume a great amount of memory, and I would much rather go through the work of re-opening a table than risking an OutOfMemoryException.&lt;/p&gt;

&lt;p&gt;&amp;gt; Only when an HTable times out accessing an HRegion and needs to findRegion(), does it call a &lt;br/&gt;
&amp;gt; HConnection.closeTable() which essentially clears the cache for that table. This is followed by a &lt;br/&gt;
&amp;gt; synchronized HConnection.getTableServers() method which will update the cache with the new &lt;br/&gt;
&amp;gt; regions.&lt;/p&gt;

&lt;p&gt;yes, this is definately needed. but see my explanation above for why we should have an HTable.close&lt;br/&gt;
method.&lt;/p&gt;
</comment>
                            <comment id="12508703" author="james.kennedy" created="Thu, 28 Jun 2007 01:16:45 +0000"  >&lt;p&gt;I see what you&apos;re saying.&lt;/p&gt;

&lt;p&gt;I&apos;ll add a close() method to HTable, thats not a problem. &lt;/p&gt;

</comment>
                            <comment id="12512578" author="james.kennedy" created="Fri, 13 Jul 2007 18:47:33 +0000"  >&lt;p&gt;Submitted a patch with four new files:&lt;br/&gt;
HConnection&lt;br/&gt;
HTable&lt;br/&gt;
TableNotFoundException&lt;br/&gt;
TestHConnection&lt;/p&gt;

&lt;p&gt;and additions of equals() and hashcode() to Configuration.&lt;/p&gt;

&lt;p&gt;Assuming you guys like this code:&lt;/p&gt;

&lt;p&gt;I&apos;m not sure what the best way to integrate this would be. HConnection and HTable repeat a lot of the same code that is in HClient.  Should we maintain them separately? If we replace HClient we&apos;ll need to refactor a lot of places where it is used. If that&apos;s the way to go, I would suggest modifiying HClient to be a facade for HConnection/HTable to ditch the repeated code.  Deprecate it and then slowly replace it with HConnection wherever we see it.&lt;/p&gt;
</comment>
                            <comment id="12514996" author="james.kennedy" created="Tue, 24 Jul 2007 15:09:57 +0000"  >&lt;p&gt;Assigning to Jim for comment.&lt;br/&gt;
Also I&apos;ll be on vacation for 3 weeks.&lt;/p&gt;</comment>
                            <comment id="12515052" author="jimk" created="Tue, 24 Jul 2007 18:08:32 +0000"  >&lt;p&gt;James,&lt;/p&gt;

&lt;p&gt;I&apos;ve been meaning to look at this but haven&apos;t had  time yet. However it is next on my list after &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-136&quot; title=&quot;HClient fails to readjust when ROOT or META redeployed on new region server&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-136&quot;&gt;&lt;del&gt;HADOOP-1516&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="12515061" author="james.kennedy" created="Tue, 24 Jul 2007 18:45:07 +0000"  >&lt;p&gt;No problem. I&apos;m just concerned that that HClient will evolve so much that this patch will be out of date if it isn&apos;t already.  It will take some work to mirror recent improvements in HClient to the HConnection/HTable classes although most methods are copied to them as is.&lt;/p&gt;

&lt;p&gt;Since I&apos;ll be away for 3 weeks, i won&apos;t be able to update a new patch and/or implement the above HClient facade for a while.&lt;/p&gt;</comment>
                            <comment id="12515063" author="jimk" created="Tue, 24 Jul 2007 18:55:06 +0000"  >&lt;p&gt;Don&apos;t worry about creating a new patch. I can work off the existing one which at least has the architectural view established.&lt;/p&gt;

&lt;p&gt;HClient has changed a lot and changes even more for &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-136&quot; title=&quot;HClient fails to readjust when ROOT or META redeployed on new region server&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-136&quot;&gt;&lt;del&gt;HADOOP-1516&lt;/del&gt;&lt;/a&gt;, but it should be hard to adopt what you have.&lt;/p&gt;</comment>
                            <comment id="12516448" author="jimk" created="Mon, 30 Jul 2007 17:17:33 +0000"  >&lt;p&gt;The implementation of this feature will have two phases:&lt;/p&gt;

&lt;p&gt;Phase 1:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Implement new classes&lt;/li&gt;
	&lt;li&gt;HConnection manages connections to multiple tables and instances&lt;/li&gt;
	&lt;li&gt;HTable - used by clients to manipulate data in a single table&lt;/li&gt;
	&lt;li&gt;HBaseAdmin - used to perform administrative functions&lt;/li&gt;
	&lt;li&gt;Reimplement HClient in terms of HConnection/HTable/HBaseAdmin. HClient will be deprecated&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Phase 2:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Modify other HBase components to use HConnection/HTable/HBaseAdmin instead of HClient&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12516849" author="jimk" created="Wed, 1 Aug 2007 01:48:07 +0000"  >&lt;p&gt;patch for phase 1&lt;/p&gt;</comment>
                            <comment id="12516850" author="jimk" created="Wed, 1 Aug 2007 01:49:20 +0000"  >&lt;p&gt;patch.txt contains the changes for phase 1 of this issue. Works in local environment. Try to get +1 from Hudson&lt;/p&gt;</comment>
                            <comment id="12516860" author="hadoopqa" created="Wed, 1 Aug 2007 03:10:53 +0000"  >&lt;p&gt;-1, build or testing failed&lt;/p&gt;

&lt;p&gt;2 attempts failed to build and test the latest attachment &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12362940/patch.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12362940/patch.txt&lt;/a&gt; against trunk revision r561603.&lt;/p&gt;

&lt;p&gt;Test results:   &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/494/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/494/testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/494/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/494/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Please note that this message is automatically generated and may represent a problem with the automation system and not the patch.&lt;/p&gt;</comment>
                            <comment id="12516882" author="jimk" created="Wed, 1 Aug 2007 06:59:32 +0000"  >&lt;p&gt;Fix test errors&lt;/p&gt;</comment>
                            <comment id="12516886" author="jimk" created="Wed, 1 Aug 2007 07:22:11 +0000"  >&lt;p&gt;Fixed two race conditions in HMaster:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;don&apos;t process a region server exit message if the lease has timed&lt;br/&gt;
  out. Otherwise we end up with two pending server shutdown messages&lt;br/&gt;
  to process and chaos ensues.&lt;/li&gt;
	&lt;li&gt;don&apos;t reassign the root region when the server&apos;s lease expires. The&lt;br/&gt;
  lease expiration handler will queue a PendingServerShutdown&lt;br/&gt;
  operation that must run before the root region is reassigned because&lt;br/&gt;
  the HLog of the dead server must be split before any regions served&lt;br/&gt;
  by the dead server are reassigned.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Why weren&apos;t these seen before?&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;synchronization has changed which may have exposed these conditions&lt;br/&gt;
  which existed before but were never observed.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12516887" author="jimk" created="Wed, 1 Aug 2007 07:24:10 +0000"  >&lt;p&gt;Although the race conditions that are fixed by this patch were never observed in our development environment, they were lurking there waiting to be found.&lt;/p&gt;

&lt;p&gt;Our test cases still run in our environment with this change. Submitting patch to get +1 from Hudson.&lt;/p&gt;</comment>
                            <comment id="12516916" author="hadoopqa" created="Wed, 1 Aug 2007 10:04:01 +0000"  >&lt;p&gt;-1, build or testing failed&lt;/p&gt;

&lt;p&gt;2 attempts failed to build and test the latest attachment &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12362949/patch.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12362949/patch.txt&lt;/a&gt; against trunk revision r561603.&lt;/p&gt;

&lt;p&gt;Test results:   &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/498/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/498/testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/498/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/498/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Please note that this message is automatically generated and may represent a problem with the automation system and not the patch.&lt;/p&gt;</comment>
                            <comment id="12516972" author="jimk" created="Wed, 1 Aug 2007 14:00:41 +0000"  >&lt;p&gt;test-contrib did not even run. Instead a failure in TestDFSUpgrade caused the build to fail.&lt;/p&gt;</comment>
                            <comment id="12516982" author="jimk" created="Wed, 1 Aug 2007 14:22:37 +0000"  >&lt;p&gt;Since build failure was in TestDFSUpgrade, test-contrib did not run. Resubmitting to see if we can get past TestDFSUpgrade&apos;s sporadic failure and actually test this patch&lt;/p&gt;</comment>
                            <comment id="12517004" author="hadoopqa" created="Wed, 1 Aug 2007 15:53:13 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12362949/patch.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12362949/patch.txt&lt;/a&gt; applied and successfully tested against trunk revision r561603.&lt;/p&gt;

&lt;p&gt;Test results:   &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/499/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/499/testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/499/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/499/console&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12517014" author="jimk" created="Wed, 1 Aug 2007 17:00:27 +0000"  >&lt;p&gt;Even though Hudson awarded a +1, two tests had errors during the first test run, so there is still some issue with a couple of the tests. Going to change the log levels for those tests and re-run.&lt;/p&gt;</comment>
                            <comment id="12517015" author="jimk" created="Wed, 1 Aug 2007 17:08:12 +0000"  >&lt;p&gt;Resubmitting with different logging levels, in case it fails.&lt;/p&gt;</comment>
                            <comment id="12517063" author="hadoopqa" created="Wed, 1 Aug 2007 20:04:08 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12362986/patch.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12362986/patch.txt&lt;/a&gt; applied and successfully tested against trunk revision r561885.&lt;/p&gt;

&lt;p&gt;Test results:   &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/502/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/502/testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/502/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/502/console&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12517064" author="jimk" created="Wed, 1 Aug 2007 20:07:03 +0000"  >&lt;p&gt;Phase 1 testing complete. Preparing to commit phase 1.&lt;/p&gt;</comment>
                            <comment id="12517141" author="jimk" created="Thu, 2 Aug 2007 05:02:02 +0000"  >&lt;p&gt;Use new classes to access HBase instead of HClient&lt;/p&gt;</comment>
                            <comment id="12517142" author="jimk" created="Thu, 2 Aug 2007 05:03:12 +0000"  >&lt;p&gt;Patch works in local build. Checking with Hudson&lt;/p&gt;</comment>
                            <comment id="12517147" author="hadoopqa" created="Thu, 2 Aug 2007 05:47:53 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12363023/patch.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12363023/patch.txt&lt;/a&gt; applied and successfully tested against trunk revision r561975.&lt;/p&gt;

&lt;p&gt;Test results:   &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/507/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/507/testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/507/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/507/console&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12517174" author="jimk" created="Thu, 2 Aug 2007 08:18:45 +0000"  >&lt;p&gt;All HBase code except TestHClient and the HBaseShell now use the new client objects (HBaseAdmin, HTable, HConnection). Opening a separate issue for conversion of HBaseShell.&lt;/p&gt;</comment>
                            <comment id="12517283" author="jimk" created="Thu, 2 Aug 2007 14:51:23 +0000"  >&lt;p&gt;Need to expose close table function to provide for freeing up resources&lt;/p&gt;</comment>
                            <comment id="12517364" author="jimk" created="Thu, 2 Aug 2007 20:17:05 +0000"  >&lt;p&gt;HTable&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;added public method close&lt;/li&gt;
	&lt;li&gt;added protected method checkClosed&lt;/li&gt;
	&lt;li&gt;make getConnection public&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;HConnectionManager&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;a call to getTableServers or reloadTableServers will cause information for closed&lt;br/&gt;
  tables to be reloaded&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;TestHTable&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;new test case&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12517365" author="jimk" created="Thu, 2 Aug 2007 20:17:37 +0000"  >&lt;p&gt;Works in my environment. Verify with Hudson.&lt;/p&gt;</comment>
                            <comment id="12517398" author="hadoopqa" created="Thu, 2 Aug 2007 22:58:49 +0000"  >&lt;p&gt;-1, build or testing failed&lt;/p&gt;

&lt;p&gt;2 attempts failed to build and test the latest attachment &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12363082/patch.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12363082/patch.txt&lt;/a&gt; against trunk revision r562041.&lt;/p&gt;

&lt;p&gt;Test results:   &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/511/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/511/testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/511/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/511/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Please note that this message is automatically generated and may represent a problem with the automation system and not the patch.&lt;/p&gt;</comment>
                            <comment id="12517400" author="jimk" created="Thu, 2 Aug 2007 23:04:55 +0000"  >&lt;p&gt;Hudson never even ran test-contrib&lt;/p&gt;

&lt;p&gt;The first test run had the following failures:&lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Running org.apache.hadoop.dfs.TestDFSUpgrade&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Tests run: 1, Failures: 1, Errors: 0, Time elapsed: 8.789 sec&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Running org.apache.hadoop.fs.TestCopyFiles&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Tests run: 4, Failures: 1, Errors: 0, Time elapsed: 51.907 sec&lt;/p&gt;

&lt;p&gt;and the second run hung:&lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Running org.apache.hadoop.mapred.TestMiniMRWithDFS&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Tests run: 1, Failures: 0, Errors: 1, Time elapsed: 733.912 sec&lt;/p&gt;

&lt;p&gt;and this patch only effects test-contrib for hbase&lt;/p&gt;</comment>
                            <comment id="12517401" author="jimk" created="Thu, 2 Aug 2007 23:05:51 +0000"  >&lt;p&gt;Resubmitting patch hoping that failures in test-core are transient and that test-contrib will actually run.&lt;/p&gt;</comment>
                            <comment id="12517410" author="hadoopqa" created="Thu, 2 Aug 2007 23:51:54 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12363082/patch.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12363082/patch.txt&lt;/a&gt; applied and successfully tested against trunk revision r562041.&lt;/p&gt;

&lt;p&gt;Test results:   &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/512/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/512/testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/512/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/512/console&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12517411" author="jimk" created="Fri, 3 Aug 2007 00:03:18 +0000"  >&lt;p&gt;Committed. Resolving issue.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12361805" name="HConnection.patch" size="71920" author="james.kennedy" created="Fri, 13 Jul 2007 18:47:32 +0000"/>
                            <attachment id="12363082" name="patch.txt" size="12282" author="jimk" created="Thu, 2 Aug 2007 20:17:04 +0000"/>
                            <attachment id="12363023" name="patch.txt" size="72889" author="jimk" created="Thu, 2 Aug 2007 05:02:02 +0000"/>
                            <attachment id="12362986" name="patch.txt" size="151995" author="jimk" created="Wed, 1 Aug 2007 17:08:12 +0000"/>
                            <attachment id="12362949" name="patch.txt" size="150149" author="jimk" created="Wed, 1 Aug 2007 07:22:11 +0000"/>
                            <attachment id="12362940" name="patch.txt" size="143231" author="jimk" created="Wed, 1 Aug 2007 01:48:06 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 27 Jun 2007 19:01:57 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>25083</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 19 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0h6dj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>98295</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>