<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sat Dec 03 19:32:31 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-8207/HBASE-8207.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-8207] Replication could have data loss when machine name contains hyphen &quot;-&quot;</title>
                <link>https://issues.apache.org/jira/browse/HBASE-8207</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;In the recent test case TestReplication* failures, I&apos;m finally able to find the cause(or one of causes) for its intermittent failures.&lt;/p&gt;

&lt;p&gt;When a machine name contains &quot;-&quot;, it breaks the function ReplicationSource.checkIfQueueRecovered. It causes the following issue:&lt;/p&gt;

&lt;p&gt;deadRegionServers list is way off so that replication doesn&apos;t wait for log splitting finish for a wal file and move on to the next one(data loss)&lt;/p&gt;

&lt;p&gt;You can see that replication use those weird paths constructed from deadRegionServers to check a file existence&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2013-03-26 21:26:51,385 INFO  [ReplicationExecutor-0.replicationSource,2-ip-10-197-0-156.us-west-1.compute.internal,52170,1364333181125] regionserver.ReplicationSource(524): Possible location hdfs:&lt;span class=&quot;code-comment&quot;&gt;//localhost:52882/user/ec2-user/hbase/.logs/1.compute.internal,52170,1364333181125/ip-10-197-0-156.us-west-1.compute.internal%252C52170%252C1364333181125.1364333199540
&lt;/span&gt;2013-03-26 21:26:51,386 INFO  [ReplicationExecutor-0.replicationSource,2-ip-10-197-0-156.us-west-1.compute.internal,52170,1364333181125] regionserver.ReplicationSource(524): Possible location hdfs:&lt;span class=&quot;code-comment&quot;&gt;//localhost:52882/user/ec2-user/hbase/.logs/1.compute.internal,52170,1364333181125-splitting/ip-10-197-0-156.us-west-1.compute.internal%252C52170%252C1364333181125.1364333199540
&lt;/span&gt;2013-03-26 21:26:51,387 INFO  [ReplicationExecutor-0.replicationSource,2-ip-10-197-0-156.us-west-1.compute.internal,52170,1364333181125] regionserver.ReplicationSource(524): Possible location hdfs:&lt;span class=&quot;code-comment&quot;&gt;//localhost:52882/user/ec2-user/hbase/.logs/west/ip-10-197-0-156.us-west-1.compute.internal%252C52170%252C1364333181125.1364333199540
&lt;/span&gt;2013-03-26 21:26:51,389 INFO  [ReplicationExecutor-0.replicationSource,2-ip-10-197-0-156.us-west-1.compute.internal,52170,1364333181125] regionserver.ReplicationSource(524): Possible location hdfs:&lt;span class=&quot;code-comment&quot;&gt;//localhost:52882/user/ec2-user/hbase/.logs/west-splitting/ip-10-197-0-156.us-west-1.compute.internal%252C52170%252C1364333181125.1364333199540
&lt;/span&gt;2013-03-26 21:26:51,391 INFO  [ReplicationExecutor-0.replicationSource,2-ip-10-197-0-156.us-west-1.compute.internal,52170,1364333181125] regionserver.ReplicationSource(524): Possible location hdfs:&lt;span class=&quot;code-comment&quot;&gt;//localhost:52882/user/ec2-user/hbase/.logs/156.us/ip-10-197-0-156.us-west-1.compute.internal%252C52170%252C1364333181125.1364333199540
&lt;/span&gt;2013-03-26 21:26:51,394 INFO  [ReplicationExecutor-0.replicationSource,2-ip-10-197-0-156.us-west-1.compute.internal,52170,1364333181125] regionserver.ReplicationSource(524): Possible location hdfs:&lt;span class=&quot;code-comment&quot;&gt;//localhost:52882/user/ec2-user/hbase/.logs/156.us-splitting/ip-10-197-0-156.us-west-1.compute.internal%252C52170%252C1364333181125.1364333199540
&lt;/span&gt;2013-03-26 21:26:51,396 INFO  [ReplicationExecutor-0.replicationSource,2-ip-10-197-0-156.us-west-1.compute.internal,52170,1364333181125] regionserver.ReplicationSource(524): Possible location hdfs:&lt;span class=&quot;code-comment&quot;&gt;//localhost:52882/user/ec2-user/hbase/.logs/0/ip-10-197-0-156.us-west-1.compute.internal%252C52170%252C1364333181125.1364333199540
&lt;/span&gt;2013-03-26 21:26:51,398 INFO  [ReplicationExecutor-0.replicationSource,2-ip-10-197-0-156.us-west-1.compute.internal,52170,1364333181125] regionserver.ReplicationSource(524): Possible location hdfs:&lt;span class=&quot;code-comment&quot;&gt;//localhost:52882/user/ec2-user/hbase/.logs/0-splitting/ip-10-197-0-156.us-west-1.compute.internal%252C52170%252C1364333181125.1364333199540&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This happened in the recent test failure in &lt;a href=&quot;http://54.241.6.143/job/HBase-0.94/org.apache.hbase$hbase/21/testReport/junit/org.apache.hadoop.hbase.replication/TestReplicationQueueFailover/queueFailover/?auto_refresh=false&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://54.241.6.143/job/HBase-0.94/org.apache.hbase$hbase/21/testReport/junit/org.apache.hadoop.hbase.replication/TestReplicationQueueFailover/queueFailover/?auto_refresh=false&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Search for &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
File does not exist: hdfs:&lt;span class=&quot;code-comment&quot;&gt;//localhost:52882/user/ec2-user/hbase/.oldlogs/ip-10-197-0-156.us-west-1.compute.internal%2C52170%2C1364333181125.1364333199540&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;After 10 times retries, replication source gave up and move on to the next file. Data loss happens. &lt;/p&gt;

&lt;p&gt;Since lots of EC2 machine names contain &quot;-&quot; including our Jenkin servers, this is a high impact issue.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12639494">HBASE-8207</key>
            <summary>Replication could have data loss when machine name contains hyphen &quot;-&quot;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jeffreyz">Jeffrey Zhong</assignee>
                                    <reporter username="jeffreyz">Jeffrey Zhong</reporter>
                        <labels>
                    </labels>
                <created>Thu, 28 Mar 2013 00:17:53 +0000</created>
                <updated>Thu, 5 Sep 2013 02:36:38 +0000</updated>
                            <resolved>Fri, 29 Mar 2013 17:36:18 +0000</resolved>
                                    <version>0.94.6</version>
                    <version>0.95.0</version>
                                    <fixVersion>0.98.0</fixVersion>
                    <fixVersion>0.94.7</fixVersion>
                    <fixVersion>0.95.0</fixVersion>
                                    <component>Replication</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>17</watches>
                                                                <comments>
                            <comment id="13615918" author="jeffreyz" created="Thu, 28 Mar 2013 00:19:06 +0000"  >&lt;p&gt;Attached the log of the failed test case in case Jenkin server clean the log later.&lt;/p&gt;</comment>
                            <comment id="13615926" author="lhofhansl" created="Thu, 28 Mar 2013 00:36:25 +0000"  >&lt;p&gt;Making critical. This is bad.&lt;/p&gt;</comment>
                            <comment id="13615941" author="lhofhansl" created="Thu, 28 Mar 2013 00:51:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jdcryans&quot; class=&quot;user-hover&quot; rel=&quot;jdcryans&quot;&gt;Jean-Daniel Cryans&lt;/a&gt; FYI.&lt;/p&gt;</comment>
                            <comment id="13615950" author="enis" created="Thu, 28 Mar 2013 01:17:31 +0000"  >&lt;p&gt;I think the problem comes from: &lt;/p&gt;

&lt;p&gt;ReplicationZookeeper.copyQueuesFromRSUsingMulti&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
src/main/java/org/apache/hadoop/hbase/replication&lt;span class=&quot;code-comment&quot;&gt;//ReplicationZookeeper.java:        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; newPeerId = peerId + &lt;span class=&quot;code-quote&quot;&gt;&quot;-&quot;&lt;/span&gt; + znode;
&lt;/span&gt;src/main/java/org/apache/hadoop/hbase/replication&lt;span class=&quot;code-comment&quot;&gt;//regionserver/ReplicationSource.java:    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] parts = peerClusterZnode.split(&lt;span class=&quot;code-quote&quot;&gt;&quot;-&quot;&lt;/span&gt;);&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Fixing it should not be that hard. Jeffrey, this is a production bug as well as test, right? &lt;/p&gt;
</comment>
                            <comment id="13615952" author="yuzhihong@gmail.com" created="Thu, 28 Mar 2013 01:23:28 +0000"  >&lt;p&gt;How about using &apos;=&apos; as the separator ?&lt;/p&gt;</comment>
                            <comment id="13615957" author="jxiang" created="Thu, 28 Mar 2013 01:28:32 +0000"  >&lt;p&gt;We need to make sure there is a proper migration plan, at least mentioning the fix in release notes.&lt;/p&gt;</comment>
                            <comment id="13615960" author="jxiang" created="Thu, 28 Mar 2013 01:29:32 +0000"  >&lt;p&gt;A non-printable/configurable delimiter?&lt;/p&gt;</comment>
                            <comment id="13615963" author="jmspaggi" created="Thu, 28 Mar 2013 01:34:06 +0000"  >&lt;p&gt;Any thing which is not allowed as an host name might be acceptable, like pipe, % or like &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jxiang&quot; class=&quot;user-hover&quot; rel=&quot;jxiang&quot;&gt;Jimmy Xiang&lt;/a&gt; proposed, a non printable delimiter. But if we need to print that on the logs, then the pipe option might be better? also, if this is stored in ZK, then indeed, we might need to keep the existing &quot;-&quot; + new delimiter for the reads, and the new delimiter for the writes...&lt;/p&gt;</comment>
                            <comment id="13615964" author="jeffreyz" created="Thu, 28 Mar 2013 01:38:41 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enis&quot; class=&quot;user-hover&quot; rel=&quot;enis&quot;&gt;Enis Soztutar&lt;/a&gt; This could be a production issue if a user setups HBase with replication enabled in EC2 like env.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jxiang&quot; class=&quot;user-hover&quot; rel=&quot;jxiang&quot;&gt;Jimmy Xiang&lt;/a&gt; I thought about to change to another delimiter &quot;:&quot; which is NOT allowed by machine name nor hdfs file name. While it will cause a little bit migration issue. Since the znode value could be either a peerId or peerId-&amp;lt;servername&amp;gt;-&amp;lt;servername&amp;gt;... and server name has to contain &quot;,&quot;&lt;/p&gt;

&lt;p&gt;Therefore, I&apos;m planning to keep the current way just patch the function checkIfQueueRecovered so before treating &quot;-&quot; as valid server name delimiter we have to see a &quot;,&quot; before. In 0.96 or onwords we could use a different char like &quot;:&quot; which isn&apos;t allowed in either machine name or hdfs.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
-Jeffrey&lt;/p&gt;</comment>
                            <comment id="13615966" author="lhofhansl" created="Thu, 28 Mar 2013 01:41:38 +0000"  >&lt;p&gt;The same is in ReplicationZookeeper.copyQueuesFromRS, so at least it is nothing new.&lt;/p&gt;</comment>
                            <comment id="13615969" author="lhofhansl" created="Thu, 28 Mar 2013 01:49:21 +0000"  >&lt;p&gt;I like &apos;:&apos; as separator. We can do this in the backwards compatible way: Since we know that &apos;:&apos; will not be in a valid hostname it won&apos;t be in the concatenated strings. So when read the data from ZK in ReplicationSource, we check whether we find a &apos;:&apos;, if we do we split on that, otherwise we split on &apos;-&apos; as we do now. We will always write in the new format.&lt;br/&gt;
Rolling restarts will still be a problem, though.&lt;/p&gt;</comment>
                            <comment id="13615971" author="enis" created="Thu, 28 Mar 2013 01:54:29 +0000"  >&lt;p&gt;BTW, for future reviews, we should ensure that carrying data around znodes names, and file names, and string parsing etc should be avoided, unless there is a valid reason.&lt;/p&gt;</comment>
                            <comment id="13615977" author="yuzhihong@gmail.com" created="Thu, 28 Mar 2013 02:01:53 +0000"  >&lt;p&gt;I wonder why trunk builds didn&apos;t encounter such problem.&lt;br/&gt;
From &lt;a href=&quot;http://54.241.6.143/job/HBase-TRUNK/45/console:&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://54.241.6.143/job/HBase-TRUNK/45/console:&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Running org.apache.hadoop.hbase.replication.TestReplicationQueueFailoverCompressed
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 66.645 sec
...
Running org.apache.hadoop.hbase.replication.TestReplicationQueueFailover
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 77.707 sec
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13616060" author="jeffreyz" created="Thu, 28 Mar 2013 05:16:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tedyu%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;tedyu@apache.org&quot;&gt;Ted Yu&lt;/a&gt; It depends if log splitting can finish in time before replication gives up. In our test case setup, log splitting normally completes within 1-2 secs while replication takes about 5 secs to give up. So in most cases, the test runs fine. In local dev env, we don&apos;t have machine name containing &quot;-&quot; so we can&apos;t even reproduce it. &lt;/p&gt;

&lt;p&gt;Since we just changed Jenkins, I can&apos;t find more build history. From my &quot;flaky test detector&quot; tool(&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8018&quot; title=&quot;Add &amp;quot;Flaky Testcase Detector&amp;quot; tool into dev-tools&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8018&quot;&gt;&lt;del&gt;HBASE-8018&lt;/del&gt;&lt;/a&gt;) result in trunk which I ran on March 5. We can see replication in trunk is flaky at that time:&lt;/p&gt;

&lt;p&gt;&lt;em&gt;HBase-TRUNK&#160;(from last 10 runs)&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;Failed Test Cases &#160; &#160; &#160; &#160; &#160; &#160; &#160;3908 3909 3910 3912 3913 3914 3915 3916&lt;br/&gt;
========================================================&lt;br/&gt;
org.apache.hadoop.hbase.replication.testreplicationqueuefailover.queuefailover &#160; &#160;1 &#160; &#160;1 &#160; &#160;1 &#160; -1 &#160; &#160;0 &#160; -1 &#160; &#160;0 &#160; &#160;1&lt;br/&gt;
org.apache.hadoop.hbase.replication.testreplicationqueuefailovercompressed.queuefailover &#160; &#160;1 &#160; &#160;1 &#160; &#160;1 &#160; -1 &#160; &#160;0 &#160; -1 &#160; &#160;0 &#160; &#160;1&lt;/p&gt;

&lt;p&gt;&lt;em&gt;HBase-0.95 (from last 10 runs configurable)&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;Failed Test Cases &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;21 &#160; 22 &#160; 23 &#160; 24 &#160; 25 &#160; 27&lt;br/&gt;
========================================================&lt;br/&gt;
org.apache.hadoop.hbase.replication.testreplicationqueuefailover.queuefailover &#160; &#160;1 &#160; -1 &#160; &#160;0 &#160; &#160;1 &#160; -1 &#160; &#160;0&lt;br/&gt;
org.apache.hadoop.hbase.replication.testreplicationqueuefailovercompressed.queuefailover &#160; &#160;0 &#160; &#160;1 &#160; -1 &#160; &#160;0 &#160; -1 &#160; &#160;0&lt;/p&gt;
</comment>
                            <comment id="13616135" author="jeason" created="Thu, 28 Mar 2013 08:23:41 +0000"  >&lt;p&gt;I have finished one patch which using &quot;#&quot; instead of &quot;-&quot;. Sorry, I raised a same issue but didn&apos;t notice this has already been there&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13616141" author="jeason" created="Thu, 28 Mar 2013 08:45:12 +0000"  >&lt;p&gt;We found the same problem in our test environment, attaching the logs for your reference:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2013-03-25 04:51:20,929 INFO  [ReplicationExecutor-0.replicationSource,1-160-172-0-130,60020,1364199883591] NB dead servers : 4 org.apache.hadoop.hbase.replication.regionserver.ReplicationSource.openReader(ReplicationSource.java:517)
2013-03-25 04:51:20,929 INFO  [ReplicationExecutor-0.replicationSource,1-160-172-0-130,60020,1364199883591] Possible location hdfs://hacluster/hbase/.logs/130,60020,1364199883591/160-172-0-130%252C60020%252C1364199883591.1364200564291 org.apache.hadoop.hbase.replication.regionserver.ReplicationSource.openReader(ReplicationSource.java:528)
2013-03-25 04:51:20,930 INFO  [ReplicationExecutor-0.replicationSource,1-160-172-0-130,60020,1364199883591] Possible location hdfs://hacluster/hbase/.logs/130,60020,1364199883591-splitting/160-172-0-130%252C60020%252C1364199883591.1364200564291 org.apache.hadoop.hbase.replication.regionserver.ReplicationSource.openReader(ReplicationSource.java:528)
2013-03-25 04:51:20,932 INFO  [ReplicationExecutor-0.replicationSource,1-160-172-0-130,60020,1364199883591] Possible location hdfs://hacluster/hbase/.logs/0/160-172-0-130%252C60020%252C1364199883591.1364200564291 org.apache.hadoop.hbase.replication.regionserver.ReplicationSource.openReader(ReplicationSource.java:528)
2013-03-25 04:51:20,934 INFO  [ReplicationExecutor-0.replicationSource,1-160-172-0-130,60020,1364199883591] Possible location hdfs://hacluster/hbase/.logs/0-splitting/160-172-0-130%252C60020%252C1364199883591.1364200564291 org.apache.hadoop.hbase.replication.regionserver.ReplicationSource.openReader(ReplicationSource.java:528)
2013-03-25 04:51:20,935 INFO  [ReplicationExecutor-0.replicationSource,1-160-172-0-130,60020,1364199883591] Possible location hdfs://hacluster/hbase/.logs/172/160-172-0-130%252C60020%252C1364199883591.1364200564291 org.apache.hadoop.hbase.replication.regionserver.ReplicationSource.openReader(ReplicationSource.java:528)
2013-03-25 04:51:20,937 INFO  [ReplicationExecutor-0.replicationSource,1-160-172-0-130,60020,1364199883591] Possible location hdfs://hacluster/hbase/.logs/172-splitting/160-172-0-130%252C60020%252C1364199883591.1364200564291 org.apache.hadoop.hbase.replication.regionserver.ReplicationSource.openReader(ReplicationSource.java:528)
2013-03-25 04:51:20,938 INFO  [ReplicationExecutor-0.replicationSource,1-160-172-0-130,60020,1364199883591] Possible location hdfs://hacluster/hbase/.logs/160/160-172-0-130%252C60020%252C1364199883591.1364200564291 org.apache.hadoop.hbase.replication.regionserver.ReplicationSource.openReader(ReplicationSource.java:528)
2013-03-25 04:51:20,939 INFO  [ReplicationExecutor-0.replicationSource,1-160-172-0-130,60020,1364199883591] Possible location hdfs://hacluster/hbase/.logs/160-splitting/160-172-0-130%252C60020%252C1364199883591.1364200564291 org.apache.hadoop.hbase.replication.regionserver.ReplicationSource.openReader(ReplicationSource.java:528)
2013-03-25 04:51:20,941 WARN  [ReplicationExecutor-0.replicationSource,1-160-172-0-130,60020,1364199883591] 1-160-172-0-130,60020,1364199883591 Got:  org.apache.hadoop.hbase.replication.regionserver.ReplicationSource.openReader(ReplicationSource.java:563)
java.io.IOException: File from recovered queue is nowhere to be found
	at org.apache.hadoop.hbase.replication.regionserver.ReplicationSource.openReader(ReplicationSource.java:545)
	at org.apache.hadoop.hbase.replication.regionserver.ReplicationSource.run(ReplicationSource.java:311)
Caused by: java.io.FileNotFoundException: File does not exist: hdfs://hacluster/hbase/.oldlogs/160-172-0-130%2C60020%2C1364199883591.1364200564291
	at org.apache.hadoop.hdfs.DistributedFileSystem.getFileStatus(DistributedFileSystem.java:752)
	at org.apache.hadoop.io.SequenceFile$Reader.&amp;lt;init&amp;gt;(SequenceFile.java:1692)
	at org.apache.hadoop.io.SequenceFile$Reader.&amp;lt;init&amp;gt;(SequenceFile.java:1716)
	at org.apache.hadoop.hbase.regionserver.wal.SequenceFileLogReader$WALReader.&amp;lt;init&amp;gt;(SequenceFileLogReader.java:55)
	at org.apache.hadoop.hbase.regionserver.wal.SequenceFileLogReader.init(SequenceFileLogReader.java:177)
	at org.apache.hadoop.hbase.regionserver.wal.HLog.getReader(HLog.java:728)
	at org.apache.hadoop.hbase.replication.regionserver.ReplicationHLogReaderManager.openReader(ReplicationHLogReaderManager.java:67)
	at org.apache.hadoop.hbase.replication.regionserver.ReplicationSource.openReader(ReplicationSource.java:511)
	... 1 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13616469" author="apurtell" created="Thu, 28 Mar 2013 17:47:24 +0000"  >&lt;p&gt;Nice find. This has been vexing.&lt;/p&gt;</comment>
                            <comment id="13616501" author="jeffreyz" created="Thu, 28 Mar 2013 18:18:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jeason&quot; class=&quot;user-hover&quot; rel=&quot;jeason&quot;&gt;Jieshan Bean&lt;/a&gt; Thanks for the patch! Changing delimiter increase the existing user burden to apply the patch. I&apos;m fine if we change it for 0.96 and onwards while different code base adds more work to support &amp;amp; developers in the future.&lt;/p&gt;

&lt;p&gt;I came up a patch which keeps existing &quot;-&quot;. The reason we can do that is that we only have one place to consume(parse) the znode string so we can handle the situation.&lt;/p&gt;

&lt;p&gt;Please let me know what do you think?&lt;/p&gt;

&lt;p&gt;In the patch, we also include two small fixes:&lt;/p&gt;

&lt;p&gt;1) When replication is waiting for log splitting complete, there is no sleep in between so we keep hitting hdfs name node &lt;br/&gt;
2) Replication checks possible file locations in reverse order, while in reality the possible log splitting location is from the first failed RS. After the fix, we can cut trips to NN too.&lt;/p&gt;

&lt;p&gt;I&apos;m still thinking how to include this in our tests so we can catch this error earlier.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
-Jeffrey&lt;/p&gt;</comment>
                            <comment id="13616592" author="lhofhansl" created="Thu, 28 Mar 2013 19:56:44 +0000"  >&lt;p&gt;+1 on Jeffrey&apos;s patch.&lt;/p&gt;

&lt;p&gt;Is this needed?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+                &lt;span class=&quot;code-comment&quot;&gt;// Sleep fixed interval to wait &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; log splitting work get done
&lt;/span&gt;+                &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.sleepForRetries(&lt;span class=&quot;code-quote&quot;&gt;&quot;waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; log splitting is done&quot;&lt;/span&gt;, 1);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13616599" author="yuzhihong@gmail.com" created="Thu, 28 Mar 2013 20:01:37 +0000"  >&lt;p&gt;@Jeffrey:&lt;br/&gt;
Can you upload patch for 0.94 ?&lt;/p&gt;

&lt;p&gt;I wonder if we should integrate Jeff&apos;s patch to 0.94 first where we can verify on EC2 cluster that the problem is fixed.&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="13616617" author="yuzhihong@gmail.com" created="Thu, 28 Mar 2013 20:20:39 +0000"  >&lt;p&gt;@Jeff:&lt;br/&gt;
Patch is great: we avoid incompatibilities for the next 0.94 release.&lt;br/&gt;
Actually we can use your patch for 0.94 and switch to new delimiter in 0.95 / 0.98 so that code maintenance work is less.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+  &lt;span class=&quot;code-comment&quot;&gt;// Since servername can contains &lt;span class=&quot;code-quote&quot;&gt;&quot;-&quot;&lt;/span&gt; like &lt;span class=&quot;code-quote&quot;&gt;&quot;ip-10-46-221-101.ec2.internal&quot;&lt;/span&gt;, so we need skip some&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;can contains &lt;span class=&quot;code-quote&quot;&gt;&quot;-&quot;&lt;/span&gt; like&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; =&amp;gt; &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;can contain &lt;span class=&quot;code-quote&quot;&gt;&quot;-&quot;&lt;/span&gt;, such as&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&apos;we need skip&apos; -&amp;gt; &apos;we need to skip&apos;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+  &lt;span class=&quot;code-comment&quot;&gt;// 2-ip-10-46-221-101.ec2.internal,52170,1364333181125-ip-10-46-221-101.ec2.internal,52171,
&lt;/span&gt;+  &lt;span class=&quot;code-comment&quot;&gt;// 1364333181127-...&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Normally we don&apos;t want long line. But for the above sample, we&apos;d better keep it on the same line.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    &lt;span class=&quot;code-comment&quot;&gt;// extract dead servers
&lt;/span&gt;+    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (parts.length &amp;gt; 1) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Since there is no else block, you can revert the condition and bail out early.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+      &lt;span class=&quot;code-comment&quot;&gt;// valid server name delimiter &lt;span class=&quot;code-quote&quot;&gt;&quot;-&quot;&lt;/span&gt; has to be after &lt;span class=&quot;code-quote&quot;&gt;&quot;,&quot;&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&apos;after &quot;,&quot;&apos; -&amp;gt; &apos;after &quot;,&quot; in ServerName&apos;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+                LOG.error(&lt;span class=&quot;code-quote&quot;&gt;&quot;Found invalid server name:&quot;&lt;/span&gt; + serverName);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The above log sentence is the same for first and second server name candidates. It would be nice to use slightly different terms.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(startIndex &amp;lt; len - 1){
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I think we should add a log statement for the else block of the above check - basically there is no second server name in that case.&lt;/p&gt;

&lt;p&gt;One general minor comment is that you should insert space between if and the following left paren.&lt;/p&gt;</comment>
                            <comment id="13616623" author="jdcryans" created="Thu, 28 Mar 2013 20:34:07 +0000"  >&lt;p&gt;Mmm sorry about this one, guys. I guess that&apos;s what happens when you test only in one environment.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;1) When replication is waiting for log splitting complete, there is no sleep in between so we keep hitting hdfs name node &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Since the HLog is always &quot;somewhere&quot;, AFAIK we don&apos;t wait for log splitting to finish.&lt;/p&gt;

&lt;p&gt;About the patch, it seems that the &quot;extract dead servers&quot; logic should itself be extracted into its own method.&lt;/p&gt;</comment>
                            <comment id="13616822" author="jeffreyz" created="Thu, 28 Mar 2013 23:31:34 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lhofhansl&quot; class=&quot;user-hover&quot; rel=&quot;lhofhansl&quot;&gt;Lars Hofhansl&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jdcryans&quot; class=&quot;user-hover&quot; rel=&quot;jdcryans&quot;&gt;Jean-Daniel Cryans&lt;/a&gt; You&apos;re right. The sleep is not needed.&lt;/p&gt;

&lt;p&gt;I found another bug inside function copyQueuesFromRSUsingMulti where &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (hlogs == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; || hlogs.size() == 0) {
          &lt;span class=&quot;code-keyword&quot;&gt;continue&lt;/span&gt;; &lt;span class=&quot;code-comment&quot;&gt;// empty log queue.
&lt;/span&gt;        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The continue skips the empty folder deletion &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;listOfOps.add(ZKUtilOp.deleteNodeFailSilent(oldClusterZnode));&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The skip leave its parent folder as non-empty and it then fails the root folder deletion&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;ZKUtilOp.deleteNodeFailSilent(deadRSZnodePath)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In the end, the whole function fails and it is a scary thing.&lt;/p&gt;

&lt;p&gt;I came up a patch for trunk. The new patch includes all fixes, feedbacks and a new test case so we can uncover this issue much sooner. I&apos;ll submit a similar patch to 0.94 soon.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
-Jeffrey&lt;/p&gt;</comment>
                            <comment id="13616858" author="yuzhihong@gmail.com" created="Fri, 29 Mar 2013 00:01:32 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    ReplicationSource.extracDeadServersFromZNodeString(parts[1], &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.deadRegionServers);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Class name, ReplicationSource, is not needed, right ?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testNodeFailoveDeadServerParsing() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Typo: the &apos;ove&apos; in Failover&lt;/p&gt;</comment>
                            <comment id="13616951" author="jeffreyz" created="Fri, 29 Mar 2013 01:26:35 +0000"  >&lt;p&gt;I incorporated the two feedbacks from Ted and submitted two patches one for trunk and one for 0.94.&lt;/p&gt;

&lt;p&gt;In 0.94 one, I also increase the setting &quot;replication.source.size.capacity&quot; to make the test run fast because once a while the test cases failed with real timeout.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
-Jeffrey&lt;/p&gt;</comment>
                            <comment id="13617039" author="lhofhansl" created="Fri, 29 Mar 2013 03:38:34 +0000"  >&lt;p&gt;Looks good to me. replication.source.size.capacity is small to cause lot&apos;s of activity, 10k is OK.&lt;/p&gt;

&lt;p&gt;+1 on this one.&lt;/p&gt;</comment>
                            <comment id="13617056" author="jeason" created="Fri, 29 Mar 2013 04:25:05 +0000"  >&lt;p&gt;New patch also looks good to me. Is it neccessary to add restrictions on peer-id when calling add_peer?&lt;/p&gt;</comment>
                            <comment id="13617071" author="lhofhansl" created="Fri, 29 Mar 2013 04:35:22 +0000"  >&lt;p&gt;I&apos;d rather not do that (at least in 0.94) lest we get that wrong.&lt;/p&gt;</comment>
                            <comment id="13617090" author="hadoopqa" created="Fri, 29 Mar 2013 05:28:27 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12576001/hbase-8207_v2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12576001/hbase-8207_v2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces lines longer than 100&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 site&lt;/font&gt;.  The patch appears to cause mvn site goal to fail.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5044//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5044//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5044//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5044//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5044//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5044//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5044//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5044//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5044//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5044//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5044//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5044//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5044//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5044//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5044//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5044//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5044//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5044//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5044//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5044//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13617372" author="yuzhihong@gmail.com" created="Fri, 29 Mar 2013 14:21:25 +0000"  >&lt;p&gt;There is a long line:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    SortedMap&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, SortedSet&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt;&amp;gt; testMap = rz1.copyQueuesFromRSUsingMulti(server.getServerName().getServerName());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jdcryans&quot; class=&quot;user-hover&quot; rel=&quot;jdcryans&quot;&gt;Jean-Daniel Cryans&lt;/a&gt;:&lt;br/&gt;
Do you have more comments ?&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="13617410" author="jdcryans" created="Fri, 29 Mar 2013 15:11:50 +0000"  >&lt;p&gt;+1, love the added test.&lt;/p&gt;</comment>
                            <comment id="13617462" author="yuzhihong@gmail.com" created="Fri, 29 Mar 2013 16:04:44 +0000"  >&lt;p&gt;Patch v3 wraps the long line.&lt;/p&gt;</comment>
                            <comment id="13617468" author="yuzhihong@gmail.com" created="Fri, 29 Mar 2013 16:10:50 +0000"  >&lt;p&gt;Integrated to 0.94, 0.95 and trunk.&lt;/p&gt;

&lt;p&gt;Thanks for the patch, Jeffrey.&lt;/p&gt;

&lt;p&gt;Thanks for the reviews, Lars, J-D and Jieshan.&lt;/p&gt;</comment>
                            <comment id="13617535" author="enis" created="Fri, 29 Mar 2013 17:20:14 +0000"  >&lt;p&gt;Noticed a typo: extracDeadServersFromZNodeString -&amp;gt; extractDeadServersFromZNodeString.&lt;/p&gt;</comment>
                            <comment id="13617545" author="yuzhihong@gmail.com" created="Fri, 29 Mar 2013 17:30:14 +0000"  >&lt;p&gt;Addendum fixes the typo.&lt;/p&gt;</comment>
                            <comment id="13617549" author="yuzhihong@gmail.com" created="Fri, 29 Mar 2013 17:36:03 +0000"  >&lt;p&gt;Method name corrected in 0.94, 0.95 and trunk.&lt;/p&gt;

&lt;p&gt;Thanks for the finding, Enis.&lt;/p&gt;</comment>
                            <comment id="13617768" author="hudson" created="Fri, 29 Mar 2013 22:04:46 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #468 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/468/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/468/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8207&quot; title=&quot;Replication could have data loss when machine name contains hyphen &amp;quot;-&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8207&quot;&gt;&lt;del&gt;HBASE-8207&lt;/del&gt;&lt;/a&gt; Addendum fixes the typo in extractDeadServersFromZNodeString() (Revision 1462552)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8207&quot; title=&quot;Replication could have data loss when machine name contains hyphen &amp;quot;-&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8207&quot;&gt;&lt;del&gt;HBASE-8207&lt;/del&gt;&lt;/a&gt; Replication could have data loss when machine name contains hyphen &quot;-&quot; (Jeffrey) (Revision 1462515)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSource.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationZookeeper.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSource.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/replication/regionserver/TestReplicationSourceManager.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13617785" author="hudson" created="Fri, 29 Mar 2013 22:17:44 +0000"  >&lt;p&gt;Integrated in HBase-0.94-security #129 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security/129/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security/129/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8207&quot; title=&quot;Replication could have data loss when machine name contains hyphen &amp;quot;-&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8207&quot;&gt;&lt;del&gt;HBASE-8207&lt;/del&gt;&lt;/a&gt; Addendum fixes the typo in extractDeadServersFromZNodeString() (Revision 1462554)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8207&quot; title=&quot;Replication could have data loss when machine name contains hyphen &amp;quot;-&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8207&quot;&gt;&lt;del&gt;HBASE-8207&lt;/del&gt;&lt;/a&gt; Replication could have data loss when machine name contains hyphen &quot;-&quot; (Jeffrey) (Revision 1462518)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSource.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/replication/ReplicationZookeeper.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSource.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/replication/TestReplicationBase.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/replication/regionserver/TestReplicationSourceManager.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13617807" author="hudson" created="Fri, 29 Mar 2013 22:20:32 +0000"  >&lt;p&gt;Integrated in hbase-0.95-on-hadoop2 #47 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.95-on-hadoop2/47/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.95-on-hadoop2/47/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8207&quot; title=&quot;Replication could have data loss when machine name contains hyphen &amp;quot;-&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8207&quot;&gt;&lt;del&gt;HBASE-8207&lt;/del&gt;&lt;/a&gt; Addendum fixes the typo in extractDeadServersFromZNodeString() (Revision 1462553)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8207&quot; title=&quot;Replication could have data loss when machine name contains hyphen &amp;quot;-&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8207&quot;&gt;&lt;del&gt;HBASE-8207&lt;/del&gt;&lt;/a&gt; Replication could have data loss when machine name contains hyphen &quot;-&quot; (Jeffrey) (Revision 1462516)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSource.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationZookeeper.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSource.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/replication/regionserver/TestReplicationSourceManager.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13617848" author="hudson" created="Fri, 29 Mar 2013 23:03:58 +0000"  >&lt;p&gt;Integrated in hbase-0.95 #113 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.95/113/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.95/113/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8207&quot; title=&quot;Replication could have data loss when machine name contains hyphen &amp;quot;-&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8207&quot;&gt;&lt;del&gt;HBASE-8207&lt;/del&gt;&lt;/a&gt; Addendum fixes the typo in extractDeadServersFromZNodeString() (Revision 1462553)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8207&quot; title=&quot;Replication could have data loss when machine name contains hyphen &amp;quot;-&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8207&quot;&gt;&lt;del&gt;HBASE-8207&lt;/del&gt;&lt;/a&gt; Replication could have data loss when machine name contains hyphen &quot;-&quot; (Jeffrey) (Revision 1462516)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSource.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationZookeeper.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSource.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/replication/regionserver/TestReplicationSourceManager.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13617861" author="hudson" created="Fri, 29 Mar 2013 23:17:09 +0000"  >&lt;p&gt;Integrated in HBase-0.94 #927 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/927/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/927/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8207&quot; title=&quot;Replication could have data loss when machine name contains hyphen &amp;quot;-&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8207&quot;&gt;&lt;del&gt;HBASE-8207&lt;/del&gt;&lt;/a&gt; Addendum fixes the typo in extractDeadServersFromZNodeString() (Revision 1462554)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8207&quot; title=&quot;Replication could have data loss when machine name contains hyphen &amp;quot;-&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8207&quot;&gt;&lt;del&gt;HBASE-8207&lt;/del&gt;&lt;/a&gt; Replication could have data loss when machine name contains hyphen &quot;-&quot; (Jeffrey) (Revision 1462518)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSource.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/replication/ReplicationZookeeper.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSource.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/replication/TestReplicationBase.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/replication/regionserver/TestReplicationSourceManager.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13617907" author="hudson" created="Sat, 30 Mar 2013 00:16:49 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #4000 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/4000/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/4000/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8207&quot; title=&quot;Replication could have data loss when machine name contains hyphen &amp;quot;-&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8207&quot;&gt;&lt;del&gt;HBASE-8207&lt;/del&gt;&lt;/a&gt; Addendum fixes the typo in extractDeadServersFromZNodeString() (Revision 1462552)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8207&quot; title=&quot;Replication could have data loss when machine name contains hyphen &amp;quot;-&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8207&quot;&gt;&lt;del&gt;HBASE-8207&lt;/del&gt;&lt;/a&gt; Replication could have data loss when machine name contains hyphen &quot;-&quot; (Jeffrey) (Revision 1462515)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSource.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationZookeeper.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSource.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/replication/regionserver/TestReplicationSourceManager.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13621489" author="hudson" created="Wed, 3 Apr 2013 23:19:34 +0000"  >&lt;p&gt;Integrated in hbase-0.95 #121 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.95/121/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.95/121/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8207&quot; title=&quot;Replication could have data loss when machine name contains hyphen &amp;quot;-&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8207&quot;&gt;&lt;del&gt;HBASE-8207&lt;/del&gt;&lt;/a&gt; Don&apos;t use hdfs append during lease recovery (Revision 1463958)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
nkeywal : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/util/FSHDFSUtils.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/wal/TestHLog.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13621496" author="hudson" created="Wed, 3 Apr 2013 23:21:33 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #4009 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/4009/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/4009/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8207&quot; title=&quot;Replication could have data loss when machine name contains hyphen &amp;quot;-&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8207&quot;&gt;&lt;del&gt;HBASE-8207&lt;/del&gt;&lt;/a&gt; Don&apos;t use hdfs append during lease recovery (Revision 1463957)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
nkeywal : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/util/FSHDFSUtils.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/wal/TestHLog.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13621772" author="hudson" created="Thu, 4 Apr 2013 04:40:59 +0000"  >&lt;p&gt;Integrated in hbase-0.95-on-hadoop2 #53 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.95-on-hadoop2/53/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.95-on-hadoop2/53/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8207&quot; title=&quot;Replication could have data loss when machine name contains hyphen &amp;quot;-&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8207&quot;&gt;&lt;del&gt;HBASE-8207&lt;/del&gt;&lt;/a&gt; Don&apos;t use hdfs append during lease recovery (Revision 1463958)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
nkeywal : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/util/FSHDFSUtils.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/wal/TestHLog.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13622120" author="hudson" created="Thu, 4 Apr 2013 13:07:47 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #476 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/476/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/476/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8207&quot; title=&quot;Replication could have data loss when machine name contains hyphen &amp;quot;-&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8207&quot;&gt;&lt;del&gt;HBASE-8207&lt;/del&gt;&lt;/a&gt; Don&apos;t use hdfs append during lease recovery (Revision 1463957)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
nkeywal : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/util/FSHDFSUtils.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/wal/TestHLog.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13623142" author="hudson" created="Fri, 5 Apr 2013 01:00:47 +0000"  >&lt;p&gt;Integrated in HBase-0.94-security-on-Hadoop-23 #13 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security-on-Hadoop-23/13/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security-on-Hadoop-23/13/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8207&quot; title=&quot;Replication could have data loss when machine name contains hyphen &amp;quot;-&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8207&quot;&gt;&lt;del&gt;HBASE-8207&lt;/del&gt;&lt;/a&gt; Addendum fixes the typo in extractDeadServersFromZNodeString() (Revision 1462554)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8207&quot; title=&quot;Replication could have data loss when machine name contains hyphen &amp;quot;-&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8207&quot;&gt;&lt;del&gt;HBASE-8207&lt;/del&gt;&lt;/a&gt; Replication could have data loss when machine name contains hyphen &quot;-&quot; (Jeffrey) (Revision 1462518)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSource.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/replication/ReplicationZookeeper.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSource.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/replication/TestReplicationBase.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/replication/regionserver/TestReplicationSourceManager.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13732747" author="hudson" created="Wed, 7 Aug 2013 21:11:23 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.92 #614 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.92/614/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.92/614/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9154&quot; title=&quot;[0.92] Backport HBASE-8207 to fix replication test failures&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9154&quot;&gt;&lt;del&gt;HBASE-9154&lt;/del&gt;&lt;/a&gt;. &lt;span class=&quot;error&quot;&gt;&amp;#91;0.92&amp;#93;&lt;/span&gt; Backport &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8207&quot; title=&quot;Replication could have data loss when machine name contains hyphen &amp;quot;-&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8207&quot;&gt;&lt;del&gt;HBASE-8207&lt;/del&gt;&lt;/a&gt; Replication could have data loss when machine name contains hyphen - (Jeffrey) (apurtell: rev 1511424)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/replication/ReplicationZookeeper.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSource.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/test/java/org/apache/hadoop/hbase/replication/TestMasterReplication.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/test/java/org/apache/hadoop/hbase/replication/TestMultiSlaveReplication.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/test/java/org/apache/hadoop/hbase/replication/TestReplication.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13758704" author="hudson" created="Thu, 5 Sep 2013 02:36:38 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.92-security #150 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.92-security/150/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.92-security/150/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9154&quot; title=&quot;[0.92] Backport HBASE-8207 to fix replication test failures&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9154&quot;&gt;&lt;del&gt;HBASE-9154&lt;/del&gt;&lt;/a&gt;. &lt;span class=&quot;error&quot;&gt;&amp;#91;0.92&amp;#93;&lt;/span&gt; Backport &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8207&quot; title=&quot;Replication could have data loss when machine name contains hyphen &amp;quot;-&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8207&quot;&gt;&lt;del&gt;HBASE-8207&lt;/del&gt;&lt;/a&gt; Replication could have data loss when machine name contains hyphen - (Jeffrey) (apurtell: rev 1511424)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/replication/ReplicationZookeeper.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSource.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/test/java/org/apache/hadoop/hbase/replication/TestMasterReplication.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/test/java/org/apache/hadoop/hbase/replication/TestMultiSlaveReplication.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/test/java/org/apache/hadoop/hbase/replication/TestReplication.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12639530">HBASE-8212</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12576116" name="8207-trunk-addendum.txt" size="1047" author="yuzhihong@gmail.com" created="Fri, 29 Mar 2013 17:30:14 +0000"/>
                            <attachment id="12576091" name="8207_v3.patch" size="9071" author="yuzhihong@gmail.com" created="Fri, 29 Mar 2013 16:04:44 +0000"/>
                            <attachment id="12575843" name="HBASE-8212-94.patch" size="4804" author="jeason" created="Thu, 28 Mar 2013 08:23:41 +0000"/>
                            <attachment id="12575805" name="failed.txt" size="5306676" author="jeffreyz" created="Thu, 28 Mar 2013 00:19:06 +0000"/>
                            <attachment id="12576000" name="hbase-8207-0.94-v1.patch" size="9554" author="jeffreyz" created="Fri, 29 Mar 2013 01:26:35 +0000"/>
                            <attachment id="12575907" name="hbase-8207.patch" size="4871" author="jeffreyz" created="Thu, 28 Mar 2013 18:18:08 +0000"/>
                            <attachment id="12575974" name="hbase-8207_v1.patch" size="9649" author="jeffreyz" created="Thu, 28 Mar 2013 23:31:34 +0000"/>
                            <attachment id="12576001" name="hbase-8207_v2.patch" size="9682" author="jeffreyz" created="Fri, 29 Mar 2013 01:27:33 +0000"/>
                            <attachment id="12575999" name="hbase-8207_v2.patch" size="9682" author="jeffreyz" created="Fri, 29 Mar 2013 01:26:35 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 28 Mar 2013 00:36:25 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>319963</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 13 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1j7h3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>320304</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>