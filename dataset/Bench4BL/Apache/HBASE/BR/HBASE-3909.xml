<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sat Dec 03 18:06:22 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-3909/HBASE-3909.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-3909] Add dynamic config</title>
                <link>https://issues.apache.org/jira/browse/HBASE-3909</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;I&apos;m sure this issue exists already, at least as part of the discussion around making online schema edits possible, but no hard this having its own issue.  Ted started a conversation on this topic up on dev and Todd suggested we lookd at how Hadoop did it over in &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7001&quot; title=&quot;Allow configuration changes without restarting configured nodes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7001&quot;&gt;&lt;del&gt;HADOOP-7001&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12507918">HBASE-3909</key>
            <summary>Add dynamic config</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="stack">stack</reporter>
                        <labels>
                    </labels>
                <created>Fri, 20 May 2011 19:41:16 +0000</created>
                <updated>Thu, 18 Jun 2015 18:54:19 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>27</watches>
                                                                <comments>
                            <comment id="13037141" author="yuzhihong@gmail.com" created="Fri, 20 May 2011 22:59:14 +0000"  >&lt;p&gt;I went over &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7001&quot; title=&quot;Allow configuration changes without restarting configured nodes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7001&quot;&gt;&lt;del&gt;HADOOP-7001&lt;/del&gt;&lt;/a&gt;.5.patch&lt;br/&gt;
We have the following decision to make:&lt;br/&gt;
1. &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7001&quot; title=&quot;Allow configuration changes without restarting configured nodes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7001&quot;&gt;&lt;del&gt;HADOOP-7001&lt;/del&gt;&lt;/a&gt; is in trunk only. Are we going to pull the interface/base class/util class over to hbase ?&lt;br/&gt;
2. ReconfigurationServlet would be convenient for admin to use. Are we going to support reloading conf from hbase shell ?&lt;br/&gt;
3. &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7001&quot; title=&quot;Allow configuration changes without restarting configured nodes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7001&quot;&gt;&lt;del&gt;HADOOP-7001&lt;/del&gt;&lt;/a&gt; provides fine-grained property reconfig through reconfigurePropertyImpl() calls. Shall we also provide coarse-grained property reconfig mechanism ? e.g. we can notify AssignmentManager of the properties it uses whose values have just changed. This mechanism is also related to getReconfigurableProperties(). I think HMaster, AssignmentManager, etc would all extend ReconfigurableBase.&lt;/p&gt;</comment>
                            <comment id="13037255" author="apurtell" created="Sat, 21 May 2011 03:14:30 +0000"  >&lt;p&gt;Given that Hadoop does not require ZooKeeper, but we do anyway, I wonder if it makes more sense to go our own route and host all of configuration in the ZooKeeper namespace. It would therefore be possible to make one edit (committed into ZK) and watches on all processes would automatically pull it.&lt;/p&gt;

&lt;p&gt;The access controller on &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3025&quot; title=&quot;Coprocessor based simple access control&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3025&quot;&gt;&lt;del&gt;HBASE-3025&lt;/del&gt;&lt;/a&gt; uses this approach for ACLs. Upon cold boot they are loaded from META into znodes. Then all processes open watches on the znode(s). Upon update, the znode is updated, firing the watchers, propagating the change cluster wide.&lt;/p&gt;

&lt;p&gt;For supporting dynamic configuration, the first process up could populate znode(s) from Configuration; otherwise if the znodes exist configuration would be read from there. Whenever the znode(s) are updated, the changes can be applied to running state by the watcher.&lt;/p&gt;

&lt;p&gt;How/if the updated configuration should be written back to the config xml files on local disk may be a subject of debate.&lt;/p&gt;</comment>
                            <comment id="13037265" author="tlipcon" created="Sat, 21 May 2011 05:01:20 +0000"  >&lt;p&gt;I&apos;m always skeptical of the suggestion to store configuration in ZooKeeper. Here&apos;s my reasoning:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;we already require at least one piece of configuration in the client itself in order to connect to ZooKeeper (ie the ZK quorum info and session timeouts, etc)&lt;/li&gt;
	&lt;li&gt;operations teams are very good at managing text-based configuration files with tools like puppet, cfengine, etc. It&apos;s also easy to version-control these kinds of configs, add &amp;lt;!-- comments --&amp;gt;, etc. Moving to ZK makes these tasks more difficult &amp;#8211; we&apos;d need lots of tooling, etc.&lt;/li&gt;
	&lt;li&gt;If we keep both the text-based and ZK-based, it&apos;s easy to accidentally change something in ZK but forget to update in text, so it would revert on next restart.&lt;/li&gt;
	&lt;li&gt;we currently have the somewhat nice property that nothing in ZK is &quot;critical&quot; - even if the ZK cluster is completely wiped out, we dont lose any info. This would be a change.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13037266" author="yuzhihong@gmail.com" created="Sat, 21 May 2011 05:06:42 +0000"  >&lt;p&gt;+1 on Todd&apos;s comment.&lt;/p&gt;</comment>
                            <comment id="13037269" author="apurtell" created="Sat, 21 May 2011 05:10:47 +0000"  >&lt;p&gt;Forget it then&lt;/p&gt;
</comment>
                            <comment id="13037419" author="stack" created="Sat, 21 May 2011 16:59:10 +0000"  >&lt;p&gt;Some push back:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;we already require at least one piece of configuration in the client itself in order to connect to ZooKeeper (ie the ZK quorum info and session timeouts, etc)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;True, but we do keep config in two places &amp;#8211; in hbase-*.xml and in conf/hbase-env.sh.  If only an ensemble location (and optional timeout) could be environment variables.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;operations teams are very good at managing text-based configuration files with tools like puppet, cfengine, etc. It&apos;s also easy to version-control these kinds of configs, add &amp;lt;!-- comments --&amp;gt;, etc. Moving to ZK makes these tasks more difficult &#8211; we&apos;d need lots of tooling, etc.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;If we move our config. totally to zk, true (This is a good point though.  We are providing a software package that is going to be deployed in all kinds of environments.  We need to do the LCD).&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;If we keep both the text-based and ZK-based, it&apos;s easy to accidentally change something in ZK but forget to update in text, so it would revert on next restart.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;What I was thinking was that the text-based would seed zk.  Changes would be made to the text-based config. and would then have to be hoisted up into zk for the changes to have an effect.  Part of master startup would be putting the config. up in zk for clients and regionservers to use (Currently, regionservers get critical config. from the master, not from reading text-based file in their conf dir as part of the checkin).&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;we currently have the somewhat nice property that nothing in ZK is &quot;critical&quot; - even if the ZK cluster is completely wiped out, we dont lose any info. This would be a change.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This needs to become a golden rule going forward.   Where do we etch it?  (If we do the above where master posts config. to zk, then zk is not the sole repository for config.)&lt;/p&gt;

&lt;p&gt;I suppose I think there is still merit in the original proposal for using the zk watcher &apos;message bus&apos; propagating config. changes but need to study hadoop-7001 more I say anything more.&lt;/p&gt;
</comment>
                            <comment id="13041879" author="yuzhihong@gmail.com" created="Tue, 31 May 2011 22:40:02 +0000"  >&lt;p&gt;Since &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7001&quot; title=&quot;Allow configuration changes without restarting configured nodes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7001&quot;&gt;&lt;del&gt;HADOOP-7001&lt;/del&gt;&lt;/a&gt; was for 0.23, we still need to decide how we should pull it into hbase.&lt;/p&gt;</comment>
                            <comment id="13049412" author="stack" created="Tue, 14 Jun 2011 20:56:58 +0000"  >&lt;p&gt;Pulling into 0.92 though I&apos;m sure it&apos;ll be punted soon....&lt;/p&gt;</comment>
                            <comment id="13070836" author="ghelmling" created="Mon, 25 Jul 2011 22:42:35 +0000"  >&lt;p&gt;It would be really nice to have this capability but seems way out there for 0.92.  We can&apos;t depend on Hadoop trunk/0.23 classes for 0.92.  We could fork the &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7001&quot; title=&quot;Allow configuration changes without restarting configured nodes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7001&quot;&gt;&lt;del&gt;HADOOP-7001&lt;/del&gt;&lt;/a&gt; patch or come up with our own approach, but either one is going to be a lot of work.  And the server related changes to support this seem fairly tricky for anything beyond trivial configuration options &amp;#8211; ie, how to support reconfiguring number of rpc handler threads, say.&lt;/p&gt;

&lt;p&gt;All this adds up to: I&apos;d suggest we punt from 0.92.&lt;/p&gt;</comment>
                            <comment id="13070843" author="yuzhihong@gmail.com" created="Mon, 25 Jul 2011 22:53:17 +0000"  >&lt;p&gt;+1 on moving out of 0.92&lt;/p&gt;</comment>
                            <comment id="13070861" author="stack" created="Mon, 25 Jul 2011 23:46:05 +0000"  >&lt;p&gt;My thought on moving issues in and out of releases is just do it with justification rather than make justification and not move it waiting on others to agree.  For example, you make a good case for moving the issue out Gary, so go for it.&lt;/p&gt;

&lt;p&gt;If someone objects, let them counter argue and move it back.  If a dispute, we can move it to the dev list to duke it out.&lt;/p&gt;

&lt;p&gt;Good stuff.&lt;/p&gt;</comment>
                            <comment id="13215277" author="stack" created="Fri, 24 Feb 2012 00:45:48 +0000"  >&lt;p&gt;I&apos;m now suggesting we hoist the differences only up into zk.  We&apos;d have a configuration directory under /hbase in zk.  It would have znodes whose names are the config to change.  The content of the znode is the new value (and type I suppose).&lt;/p&gt;

&lt;p&gt;Once a znode is added under configuration dir, watchers are triggered and they update their running Configuration instance.&lt;/p&gt;

&lt;p&gt;We do some refactoring in HRegionServers and HMaster so important configs go back to their Configuration instance at critical junctures such as at split or checking if should do a compaction or if should flush, rather than read a data member that was set on Construction (We&apos;d be careful to not do lookup on Configuration always).&lt;/p&gt;

&lt;p&gt;We&apos;d add a configure to the shell that allowed you hoist configs up into zk.&lt;/p&gt;

&lt;p&gt;We&apos;d punt on there being a connection between this mechanism and whats in hbase-*xml.  This facility is for &apos;ephemeral&apos; configuration, for getting you over a temporary hump, for trying out a setting to see its effect, or to get you out of a fix; e.g. cluster is up and running but you forgot to set a critical config. all w/o need of a rolling restart/restart.&lt;/p&gt;</comment>
                            <comment id="13215284" author="stack" created="Fri, 24 Feb 2012 01:01:36 +0000"  >&lt;p&gt;Reading over hadoop-7001, Phillip says &quot;Not to mention that Configuration objects get copied along, so it&apos;s hard to make sure that a configuration change propagates to all possible children.&quot;  I need to survey to make sure callback context can change a Configuration instance that is used in all the important places we&apos;d want to change.  &lt;/p&gt;</comment>
                            <comment id="13215291" author="zhihyu@ebaysf.com" created="Fri, 24 Feb 2012 01:12:56 +0000"  >&lt;blockquote&gt;&lt;p&gt;It would have znodes whose names are the config to change&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;The assumption is there wouldn&apos;t be many such config items to change. We should survey and validate this assumption.&lt;/p&gt;

&lt;p&gt;When would these znodes be deleted ?&lt;/p&gt;</comment>
                            <comment id="13215346" author="stack" created="Fri, 24 Feb 2012 03:34:08 +0000"  >&lt;blockquote&gt;&lt;p&gt;The assumption is there wouldn&apos;t be many such config items to change. We should survey and validate this assumption.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;You could do hundreds or even put every config. up there if you wanted.  Should be fine.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;When would these znodes be deleted ?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Not sure.  Good question.  Their insertion would trigger the callback so they&apos;d be useless after putting.  Could let them just expire.  Might be good to keep them around though so could get an idea of what was changed via zk.  Need to think on it.&lt;/p&gt;</comment>
                            <comment id="13215352" author="zhihyu@ebaysf.com" created="Fri, 24 Feb 2012 03:50:13 +0000"  >&lt;p&gt;I think these two questions are related.&lt;br/&gt;
If we keep config znodes around, the amount of data on zookeeper tends to accumulate. We should have control over how long those znodes exist, i.e. enforcing expiration policy.&lt;/p&gt;</comment>
                            <comment id="13216095" author="jxiang" created="Fri, 24 Feb 2012 23:24:51 +0000"  >&lt;p&gt;Can we put dynamic configuration somewhere in the HDFS, for example, some file under hbase.rootdir?&lt;/p&gt;

&lt;p&gt;We can put static configuration in hbase-site.xml, and dynamic configuration in a file under hbase.rootdir.&lt;/p&gt;

&lt;p&gt;We can also enhance hbase shell or master UI to view/change those dynamic configurations.&lt;/p&gt;</comment>
                            <comment id="13216105" author="jxiang" created="Fri, 24 Feb 2012 23:36:08 +0000"  >&lt;p&gt;For these dynamic configurations, we can cache them in memory. In the meantime, create a separate thread to re-load the cache periodically.&lt;br/&gt;
So it is apparent to the configuration reader.&lt;/p&gt;</comment>
                            <comment id="13216113" author="stack" created="Fri, 24 Feb 2012 23:38:52 +0000"  >&lt;p&gt;@Jimmy Nice thing about zk is that when config changes all get notification (Would need to make it so a new regionserver joining cluster would look into the zk /configuration dir to pick up differences).  When its in fs, we&apos;d need to poll fs to find changes?&lt;/p&gt;</comment>
                            <comment id="13216115" author="zhihyu@ebaysf.com" created="Fri, 24 Feb 2012 23:41:04 +0000"  >&lt;p&gt;@Jimmy:&lt;br/&gt;
In your comment @ 24/Feb/12 23:36, did you mean &apos;transparent to configuration reader&apos; ?&lt;br/&gt;
It is not totally transparent - we need some reader-writer lock.&lt;/p&gt;</comment>
                            <comment id="13216131" author="jxiang" created="Fri, 24 Feb 2012 23:51:47 +0000"  >&lt;p&gt;Yes, I meant transparent to configuration reader.  My assumption is that the change doesn&apos;t have to take effect right away.  Some delay is fine.&lt;/p&gt;

&lt;p&gt;If we really want to use ZK, we can use a central file as persistence.&lt;/p&gt;
</comment>
                            <comment id="13216758" author="jxiang" created="Sun, 26 Feb 2012 14:54:00 +0000"  >&lt;p&gt;@Stack,  we don&apos;t have to poll fs to find changes. We can just put the lastmodifieddate of the file in ZK.  Once the last modified date is changed, we can load the file again.&lt;/p&gt;

&lt;p&gt;When a new regionserver joins a cluster, it should always try to check if any configuration is changed based on the configuration file last modified&lt;br/&gt;
date, which is kind of the version number of the file.&lt;/p&gt;</comment>
                            <comment id="13217961" author="lhofhansl" created="Tue, 28 Feb 2012 06:48:54 +0000"  >&lt;p&gt;Moving out of 0.94&lt;/p&gt;</comment>
                            <comment id="13220383" author="stack" created="Thu, 1 Mar 2012 21:29:29 +0000"  >&lt;p&gt;@Jimmy&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;we don&apos;t have to poll fs to find changes. We can just put the lastmodifieddate of the file in ZK. Once the last modified date is changed, we can load the file again.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Why have the fs involved at all.  What would be the advantage?  Why not just put the changed configs. up in zk?  Because we could lose them (because we do not keep permanent data up in zk)?  That&apos;d be ok I think.  If you don&apos;t move the configs to hbase-site, then its your own fault if they are lost when zk data is cleared.&lt;/p&gt;
</comment>
                            <comment id="13220404" author="jxiang" created="Thu, 1 Mar 2012 21:54:52 +0000"  >&lt;p&gt;If they lose them, it could be very bad. It may be too later when someone see something weird, then realize their configs are gone. I think it is safer to persist them somewhere.&lt;/p&gt;</comment>
                            <comment id="13244127" author="umamaheswararao" created="Mon, 2 Apr 2012 11:23:05 +0000"  >&lt;p&gt;I think syncing the configuration across clusters would be mostly OM kind of tools functionality. Bringing that into Hadoop/Hbase may not be correct.&lt;br/&gt;
I feel the current issue scope would be to allow some way to do the in-memory config updates with out restarting the node.&lt;/p&gt;

&lt;p&gt;And I agree with Todd. OM tools are good in managing configs.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt; &#166;operations teams are very good at managing text-based configuration files with tools like puppet, cfengine, etc. It&apos;s also easy to version-control these kinds of configs, add &amp;lt;!-- comments --&amp;gt;, etc. Moving to ZK makes these tasks more difficult &#8211; we&apos;d need lots of tooling, etc.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;The current limitation point would be that, even though OMs are capable enough for updating the configurations in all the places, there is no way to make the nodes reflect with that configs without restart of that node.&lt;/p&gt;

&lt;p&gt;I am thinking to proceed with Hadoop-7001 kind of implementation, if there are no objections.&lt;br/&gt;
Also, as a next step we can provide the options like, updating configs from shell and provide command to reload the config from disk one more..etc&lt;/p&gt;</comment>
                            <comment id="13244456" author="stack" created="Mon, 2 Apr 2012 19:00:07 +0000"  >&lt;p&gt;Nothing in hadoop-7001 guarantees that what is in the *.xml files is in agreement w/ what gets POSTed to the daemon, right? &lt;/p&gt;</comment>
                            <comment id="13244482" author="umamaheswararao" created="Mon, 2 Apr 2012 19:22:43 +0000"  >&lt;p&gt;Yes, As per my understanding, &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7001&quot; title=&quot;Allow configuration changes without restarting configured nodes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7001&quot;&gt;&lt;del&gt;HADOOP-7001&lt;/del&gt;&lt;/a&gt; will assume that, OM/other tools will update *.xml and POST the same configs to Daemon for updating in-memory values. &lt;/p&gt;</comment>
                            <comment id="13244489" author="tlipcon" created="Mon, 2 Apr 2012 19:28:10 +0000"  >&lt;p&gt;I think adding a &quot;refreshConfigs&quot; admin command is a good idea. It can re-read the configs off the local disk, and emit warnings for any configs that changed that were not runtime-reconfigurable.&lt;/p&gt;</comment>
                            <comment id="13244494" author="stack" created="Mon, 2 Apr 2012 19:32:44 +0000"  >&lt;p&gt;But it should go via zk I&apos;d say since we have it rather than have us POST refreshConfigs to a servlet on each server&lt;/p&gt;</comment>
                            <comment id="13244509" author="stack" created="Mon, 2 Apr 2012 19:45:12 +0000"  >&lt;p&gt;An argument for redoing hadoop-7001 in hbase would be that you can reset configs in hbase the way you do it in hadoop.  I could go for that.&lt;/p&gt;</comment>
                            <comment id="13246823" author="iamknome" created="Wed, 4 Apr 2012 23:02:56 +0000"  >&lt;p&gt;First draft patch&lt;/p&gt;</comment>
                            <comment id="13246824" author="iamknome" created="Wed, 4 Apr 2012 23:04:26 +0000"  >&lt;p&gt;Attached a first draft for review. It may not address all the reqs mentioned in this Jira but can be added. (I started with a loose set of requirements and hope to refine it as we go further)&lt;/p&gt;

&lt;p&gt;1. Config will be maintained in ZK.&lt;br/&gt;
2. Any runtime config changes survives master/RS crash.&lt;br/&gt;
3. Shell support to update config as well as get config value for a config key.&lt;br/&gt;
4. Behind a flag and is disabled by default. Can be enabled through a config change.&lt;br/&gt;
5. If enabled, any new config changes will be available instantly with out a restart.&lt;/p&gt;

&lt;p&gt;Please review and let me know your comments. I wanted to get it out here so can get early comments and work on addressing the same.&lt;/p&gt;
</comment>
                            <comment id="13246825" author="zhihyu@ebaysf.com" created="Wed, 4 Apr 2012 23:08:08 +0000"  >&lt;p&gt;@Subbu:&lt;br/&gt;
Do you want to put the patch on review board ? It is of decent size.&lt;/p&gt;</comment>
                            <comment id="13246828" author="iamknome" created="Wed, 4 Apr 2012 23:12:24 +0000"  >&lt;p&gt;Ted,&lt;/p&gt;

&lt;p&gt;I am trying to but for some reason RB is not allowing me to attach my svn&lt;br/&gt;
patch.&lt;/p&gt;

&lt;p&gt;Is there anything special i need to do? I always have issues attaching my&lt;br/&gt;
patches to RB.&lt;/p&gt;

&lt;p&gt;will keep trying.&lt;/p&gt;

&lt;p&gt;thanks&lt;br/&gt;
Subbu&lt;/p&gt;

&lt;p&gt;On Wed, Apr 4, 2012 at 4:08 PM, Zhihong Yu (Commented) (JIRA) &amp;lt;&lt;/p&gt;
</comment>
                            <comment id="13246833" author="zhihyu@ebaysf.com" created="Wed, 4 Apr 2012 23:17:49 +0000"  >&lt;p&gt;I could create review request based on this patch.&lt;/p&gt;</comment>
                            <comment id="13246869" author="zhihyu@ebaysf.com" created="Thu, 5 Apr 2012 00:01:26 +0000"  >&lt;p&gt;For new files, please add license at the top of them.&lt;/p&gt;

&lt;p&gt;Please add class javadoc for HBaseInMemoryConfiguration. Nicolas is introducing CompoundConfiguration in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5335&quot; title=&quot;Dynamic Schema Configurations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5335&quot;&gt;&lt;del&gt;HBASE-5335&lt;/del&gt;&lt;/a&gt;. You may want to take a look.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; getLong(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; name, &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; defaultValue) {
+        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (clusterConfigMap.containsKey(name)) {
+            &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; longValue = clusterConfigMap.get(name);
+            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; longValue == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; ? defaultValue : &lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt;.parseLong(longValue);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;What if Long.parseLong() throws NumberFormatException ? Should you catch NFE and delegate to super.getLong() ?&lt;br/&gt;
Similar comment for getInt(), getFloat() and getBoolean().&lt;/p&gt;

&lt;p&gt;For the new method in HMasterInterface:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; updateConfig(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; configKey, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; configValue) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Should List&amp;lt;Pair&amp;lt;String, String&amp;gt;&amp;gt; be the parameter type so that the number of calls to master can be lowered ?&lt;br/&gt;
Similar comment for getConfig().&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.zooKeeper = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ZooKeeperWatcher(conf, MASTER + &lt;span class=&quot;code-quote&quot;&gt;&quot;:&quot;&lt;/span&gt; + &lt;span class=&quot;code-quote&quot;&gt;&quot;isa.port&quot;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;What does &quot;isa.port&quot; represent above ?&lt;br/&gt;
getClusterConfiguration() is not a good name: clusterConfigTracker is started in the method.&lt;/p&gt;

&lt;p&gt;If &quot;hbase.dynamic.configuration.enabled&quot; has value of false, do we need to start the tracker ?&lt;br/&gt;
Similar comment for starting the tracker in initializeZKBasedSystemTrackers().&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
-    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.zooKeeper.reconnectAfterExpiration();
-
+    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.zooKeeper = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ZooKeeperWatcher(conf, MASTER + &lt;span class=&quot;code-quote&quot;&gt;&quot;:&quot;&lt;/span&gt;
+      + &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.serverName.getPort(), &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
+    &lt;span class=&quot;code-comment&quot;&gt;// Set cluster config tracker to &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; to trigger a reload.
&lt;/span&gt;+    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.clusterConfigTracker = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Is the change above to how zooKeeper is recovered intentional ?&lt;br/&gt;
tryRecoveringExpiredZKSession() is called by abortNow(). Can you explain what the comment above setting this.clusterConfigTracker to null means ?&lt;/p&gt;</comment>
                            <comment id="13247113" author="umamaheswararao" created="Thu, 5 Apr 2012 09:44:54 +0000"  >&lt;p&gt;@Subbu, &lt;/p&gt;

&lt;p&gt;I just reviewed this patch. Feedback as follows.&lt;/p&gt;

&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 1) updateClusterConfig and createClusterConfig are looks like mostly duplicate code for me. Can we reuse the code or can change the API, such that it can handle both.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;


 &lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (ZKUtil.checkExists(watcher,
+                    getConfigNodePath(configKey)) &amp;gt; 0) {
+                LOG.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;Cluster configuration node exist &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; Config Key = &quot;&lt;/span&gt;
+                        + configKey + &lt;span class=&quot;code-quote&quot;&gt;&quot; Updating the cluster config node&quot;&lt;/span&gt;);
+                ZKUtil.setData(watcher, getConfigNodePath(configKey), Bytes.toBytes(configValue));
+            } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
+                ZKUtil.createSetData(watcher, getConfigNodePath(configKey),
+                        Bytes.toBytes(configValue));
+            }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 2) Looks your are using wrong code formatter. intendation should be 2 spaces.
 &lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
+            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (ZKUtil.checkExists(watcher,
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;


&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 3) Normally we used to put the licence header at top of the file.
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; org.apache.hadoop.hbase.zookeeper;
+
+&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.logging.Log;
+&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.logging.LogFactory;
+&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.hadoop.conf.Configuration;
+&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.hadoop.hbase.Abortable;
+&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.hadoop.hbase.HBaseInMemoryConfiguration;
+&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.hadoop.hbase.util.Bytes;
+&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.zookeeper.KeeperException;
+&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.codehaus.jackson.map.ObjectMapper;
+
+&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.io.IOException;
+&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.io.StringWriter;
+&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.util.Map;
+
+/**
+ * Licensed to the Apache Software Foundation (ASF) under one
+ * or more contributor license agreements.  See the NOTICE file
+ * distributed with &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; work &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; additional information
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;


&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 4)  configuration.dumpConfiguration(configuration, outWriter); , this api is static in configuration , you can call directly with class.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;


&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 5) getMaster in HBaseAdmin seems like deprecated&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; getMaster().updateConfig(configKey, configValue);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 6) please add the javadoc cleanly
 &lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 /**
+     *
+     * @param configKey
+     * @param configValue
+     * @&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt;
+     */
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;


&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 7) a) Call back comes from ZK for dataChangeEvent,&lt;br/&gt;
   b) when you are processing the event at Hmaster/Regionserver to refresh the configurations.&lt;br/&gt;
   c) Now unfortunately ZK down/nw fluctuation from ZK to Server.&lt;br/&gt;
   d) It may get data as null. And refreshClusterConfigMap will just ignore the dataupdation in memory.&lt;br/&gt;
   Then this node may continue with old configs right? when this will get updated again? &lt;br/&gt;
   seems to be a bug here. no?&lt;br/&gt;
   You have used ZKUtil#getChildDataAndWatchForNewChildren, it can throw NPE, I Just filed JIRA &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5722&quot; title=&quot;NPE in ZKUtil#getChildDataAndWatchForNewChildren when ZK not available or NW down.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5722&quot;&gt;&lt;del&gt;HBASE-5722&lt;/del&gt;&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;


&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 8) Looks you are creating znodes for all the configuration items.&lt;br/&gt;
    I feel, we should not allow user to change all the configuration items. ( like some configurations we may not be able to change at runtime, may be zk url etc..).&lt;br/&gt;
    So, while creating znodes it self we can create only for mutable config items in ZK. If user tries to update any immutable config items, you can directly emit the warning.&lt;br/&gt;
    Am i missing some thing here?&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;


&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 9) I think we may need to add the validation checks for the mutable configurations from admin. Since we are encouraging the users to update configs dynamically, if user sets some wrong values, it may change directly and system may go immediatly to unstable state. may be dangerous. no?&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;


&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 10) Looks we are handling nodeDeleted event. When exactly this event can come?&lt;br/&gt;
     I think we added updateConfig api in HBase admin. How can we remove element with this? Is this event really will occur?&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;


&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 11) Final question is that, we are claiming hadoop can run in commodity hardwares, in that case some configuration items can be different in each machine. for example: &apos;hbase.regionserver.handler.count&apos;..etc&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;


&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 12)createClusterConfig creating JSonConfiguration from the Configuration and adding them into HBaseInMemoryConfiguration.&lt;br/&gt;
   Can&apos;t we create update the HBaseInMemoryConfiguration from input Configuration.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;


&lt;p&gt;  Please correct me if I missunderstand your design. Great work thanks a lot.&lt;/p&gt;


&lt;p&gt;Thanks&lt;br/&gt;
Uma&lt;/p&gt;</comment>
                            <comment id="13247116" author="umamaheswararao" created="Thu, 5 Apr 2012 09:57:09 +0000"  >&lt;p&gt;Point 11) is incomplete:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;11) Final question is that, we are claiming hadoop can run in commodity hardwares, in that case some configuration items can be different in each machine. for example: &apos;hbase.regionserver.handler.count&apos;..etc&lt;/p&gt;&lt;/blockquote&gt; 
&lt;p&gt;But the zookeeper based design may update the configurations in all nodes as same.&lt;br/&gt;
We can&apos;t provide dynamic configuration updation functionality for such kind of properties right? If you see one property in DataNode, dataXceiverCount. We can configure this property defferently in each machine, and also this is a dynamically changeable item.&lt;/p&gt;
</comment>
                            <comment id="13248041" author="iamknome" created="Fri, 6 Apr 2012 04:33:09 +0000"  >&lt;p&gt;@Uma/@Ted:&lt;/p&gt;

&lt;p&gt;Thanks a lot for your review and comments. As I mentioned this is early draft and will address your concerns in the next few days.&lt;/p&gt;

&lt;p&gt;Also @Uma you raised lot of interesting questions which I had while working on this and I will post my thoughts on the same some time tomorrow.&lt;/p&gt;

&lt;p&gt;thanks &lt;/p&gt;
</comment>
                            <comment id="13248088" author="umamaheswararao" created="Fri, 6 Apr 2012 05:46:08 +0000"  >&lt;p&gt;@Subbu, &lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Also @Uma you raised lot of interesting questions which I had while working on this and I will post my thoughts on the same some time tomorrow.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;That&apos;s great.&lt;/p&gt;

&lt;p&gt;Thinking some more, one more point to check.&lt;/p&gt;

&lt;p&gt;Presently looks this design will update same set of configurations in all nodes (Hmasters/ RegionServers). But Hmaster may not require or interested on HRegionServer specific configuration items. But when you update the configurations related to HRegionServer, call back will come to Hmaster as well and will process this event. This processing will be really unnecessary in Hmaster. Because it will never use that RegionServers specific configuration items.&lt;/p&gt;

&lt;p&gt;@Stack, Ted, what is your opinion on this point. &lt;/p&gt;

&lt;p&gt;is it ok to update in all nodes as same? or we can separate the Znodes clearly for Hmaster and HregionServer, and then updations will takes place accordingly? &lt;br/&gt;
I mean anyway we have to maintain reconfigurable items in-memory.So, here itself we can distinguish them. And the property updations from admin can pass to the correspondiong Znode based on item.&lt;/p&gt;</comment>
                            <comment id="13248459" author="iamknome" created="Fri, 6 Apr 2012 16:12:58 +0000"  >&lt;p&gt;@Uma:&lt;/p&gt;

&lt;p&gt;5. getMaster().updateConfig is not deprecated. It is used by the Shell. &lt;/p&gt;

&lt;p&gt;7. If ZK is down or connectivity is lost we have much bigger problem then loosing a config update. &lt;/p&gt;

&lt;p&gt;8. Yes. I thought of creating two buckets of configuration elements. 1) Bootstrap config items which may not be changed after the cluster is up or have no effect changing them once cluster is up 2) Non bootstrap, truly runtime configurations which have immediate effect. My thought was to add these features if there is a consensus from the group.&lt;/p&gt;

&lt;p&gt;9. Yes. But if a user is changing the configuration either in XML or dynamic he is better aware of the implications. no?&lt;/p&gt;

&lt;p&gt;10. NodeDeleted is not required. We are not going to delete a configuration entry at runtime and even doing so may not have any effect now. In the future if we want to trigger some actions based on presence/absence of some configuration entries this might be added.&lt;/p&gt;

&lt;p&gt;11. Yes, we can offer a Master/RS specific fine grained configuration controls if that is a real requirement. My thought is begin with some thing&lt;br/&gt;
very simple and add complexities as we see fit. So, one option is as we all know is to create separate subset of config nodes per Master/RS in the cluster and they subscribe to events specific to their own subset. But, if you look at our current configuration xml we make no clear distinction as to which properties belong to which runtime entity. Although we name them like config.key.master or config.key.region, I am not sure whether we can count on them to make a decision on whether a property applies to MAster only or RS only and so on.&lt;/p&gt;

&lt;p&gt;12. My thought is InMemory Configuration holds the config items after creating a ZK node for the same as other wise it may not be altered. Basically we need to make sure that ZK config node exists for a config key before we keep it in memory. &lt;/p&gt;

&lt;p&gt;13. My thought is ideally we want Master to be the single point of source for all cluster wide config management/updates. We definitely don&apos;t want to directly manipulate a RS specific property. I mean we should not expose API&apos;s in RS to enable config key manipulations. Master should be the single point of source for all configuration entries irrespective of whether the config is cluster wide, master specific or RS specific and ZK should be the medium of communication across the cluster. So, master will be involved in all config updates is my take. &lt;/p&gt;

&lt;p&gt;Others please comment.&lt;/p&gt;</comment>
                            <comment id="13248472" author="zhihyu@ebaysf.com" created="Fri, 6 Apr 2012 16:26:17 +0000"  >&lt;p&gt;For #11, we can create another JIRA for annotating the scope of each config parameter: whether it affects master or region server, or both.&lt;br/&gt;
This way master and region server wouldn&apos;t need to receive zk event whose underlying config update is irrelevant to itself.&lt;/p&gt;</comment>
                            <comment id="13248491" author="umamaheswararao" created="Fri, 6 Apr 2012 16:50:04 +0000"  >&lt;blockquote&gt;
&lt;p&gt;5. getMaster().updateConfig is not deprecated. It is used by the Shell.&lt;/p&gt;&lt;/blockquote&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 @Deprecated
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; HMasterInterface getMaster()
But, I am not sure &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; wnat reason, &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; API has been deprecated.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
&lt;p&gt;7. If ZK is down or connectivity is lost we have much bigger problem then loosing a config update&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;for example, i am referring &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5635&quot; title=&quot;If getTaskList() returns null, splitlogWorker would go down and it won&amp;#39;t serve any requests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5635&quot;&gt;&lt;del&gt;HBASE-5635&lt;/del&gt;&lt;/a&gt; kind of issues. &lt;/p&gt;


&lt;p&gt;I think your 11th point mostly answering my 13th question. My 11th point was something defferent. Since you want to make the initial patch simple, let&apos;s discuss that later or separate task.&lt;/p&gt;


&lt;blockquote&gt;
&lt;p&gt;13. My thought is ideally we want Master to be the single point of source for all cluster wide config management/updates. We definitely don&apos;t want to directly manipulate a RS specific property. I mean we should not expose API&apos;s in RS to enable config key manipulations. Master should be the single point of source for all configuration entries irrespective of whether the config is cluster wide, master specific or RS specific and ZK should be the medium of communication across the cluster. So, master will be involved in all config updates is my take. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I am not talking about the configuration updation from defferent nodes. I am talking about some config item updations which may not be really required for all the nodes. ( like some configurations items will be used only by master and some items will be used only by RS). Anyway as you said, we can take this point as next task I feel.&lt;/p&gt;</comment>
                            <comment id="13294735" author="iamknome" created="Wed, 13 Jun 2012 23:53:14 +0000"  >&lt;p&gt;I have tried to capture all (most of) of configuration properties that are currently being used in an excel. &lt;/p&gt;

&lt;p&gt;The objective here is to figure out what properties may be effectively changed using the dynamic config utility and what is not. While doing this exercise I figured that almost close to 200 properties are missing from hbase-default.xml but is getting used in the system.   &lt;/p&gt;

&lt;p&gt;So, here are my thoughts on this and would like to hear from you guys your thoughts as well:&lt;/p&gt;

&lt;p&gt;1. My understanding is that all configuration properties will be/must be defined in hbase-default.xml with a default value. Some exceptions are possible  in some corner cases but majority of properties must be defined here. &lt;/p&gt;

&lt;p&gt;2. There is no way for a user to know that a property is configurable/changeable unless 1) the property is defined in hbase-default 2) Or communicated through some documentation or API doc. &lt;/p&gt;
</comment>
                            <comment id="13294736" author="iamknome" created="Wed, 13 Jun 2012 23:54:47 +0000"  >&lt;p&gt;Ted/Uma:&lt;/p&gt;

&lt;p&gt;Addressed all of your comments in this patch. &lt;/p&gt;</comment>
                            <comment id="13294740" author="iamknome" created="Thu, 14 Jun 2012 00:09:11 +0000"  >&lt;p&gt;I am seeing that this is a complicated feature with lots of open questions.&lt;/p&gt;

&lt;p&gt;1. There are lot of properties/configuration that may have no effect (even with dynamic config tool) once the server is up. How do we communicate such cases? Do we maintain a smaller subset of configurations that can be changed dynamically and only allow those subsets for dynamic changes?&lt;/p&gt;

&lt;p&gt;2. There are lot of properties that might take effect during cases of server fail over/back up server taking over etc. Basically every dynamic configuration change that we apply to the cluster will take effect during server failover/ or back server taking over. How do we communicate such cases? Do we even want this?&lt;/p&gt;

&lt;p&gt;3. Do we really think that this feature will be a valuable addition?  &lt;/p&gt;</comment>
                            <comment id="13294832" author="yuzhihong@gmail.com" created="Thu, 14 Jun 2012 06:24:41 +0000"  >&lt;p&gt;@Subbu:&lt;br/&gt;
Have you seen &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5335&quot; title=&quot;Dynamic Schema Configurations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5335&quot;&gt;&lt;del&gt;HBASE-5335&lt;/del&gt;&lt;/a&gt; which adds config options on a per-table &amp;amp; per-cf basis ?&lt;br/&gt;
Just for your reference.&lt;/p&gt;

&lt;p&gt;For #1 above, I think we should maintain subset of configurations.&lt;/p&gt;</comment>
                            <comment id="13295267" author="stack" created="Thu, 14 Jun 2012 19:48:14 +0000"  >&lt;blockquote&gt;&lt;p&gt;My understanding is that all configuration properties will be/must be defined in hbase-default.xml with a default value. Some exceptions are possible in some corner cases but majority of properties must be defined here.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;IMO, on #1 in your first of two comments above Subbu, there are configs. that are do not have to be in hbase-default.  Such configs. are those we think we&apos;d never change but that we&apos;ve made configurable just-in-case.  This class of config can only be found by reading source code.  We don&apos;t add them to hbase-default.xml because they detract from the important configs. in the flat hbase-default xml file (Maybe this is less of an issue now we &apos;hide&apos; hbase-default.xml inside the jar and the book includes description).   If we do add these to hbase-default.xml, I&apos;d think we&apos;d add an annotation saying like &apos;exotic&apos; or &apos;not-for-the-faint-of-heart&apos;).&lt;/p&gt;

&lt;p&gt;On #2, I think its fine that they have to read the source for esoterics.&lt;/p&gt;

&lt;p&gt;On your second set of comments, I think yes, this is an important feature to have and I agree many configs. will not be changeable without extensive refactoring server-side (and even then, some may be just plain dangerous to change in mid-flight).  Perhaps we do a subset in this case and if you stray outside of the subset, you get an exception.&lt;/p&gt;



</comment>
                            <comment id="13295400" author="iamknome" created="Fri, 15 Jun 2012 00:15:35 +0000"  >&lt;p&gt;Thanks Stack/Ted.&lt;/p&gt;

&lt;p&gt;The latest version of patch basically enables any and all of the configuration properties (that I have captured in the excel. Roughly 300 config properties) to be changed through the shell. Some config changes will take immediate effect, while others will have no effect mid-flight, but will take effect when a Master/RS newly joins the cluster or fails over.&lt;/p&gt;

&lt;p&gt;So, basically what we have now is all you can change option with no exception. Only caveat is that the user may not know which one will be immediate and which is not.&lt;/p&gt;</comment>
                            <comment id="13409077" author="zhihyu@ebaysf.com" created="Sun, 8 Jul 2012 21:57:28 +0000"  >&lt;p&gt;For HBaseInMemoryConfiguration.java, the license should be placed at the top of file.&lt;br/&gt;
Have you seen hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/CompoundConfiguration.java ?&lt;br/&gt;
It holds multiple ImmutableConfigMap&apos;s.&lt;/p&gt;

&lt;p&gt;Minor comment on format:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+               &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
+            }
+            &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&quot;&lt;/span&gt;.equals(booleanValue)) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;else is not needed. In case you want to keep it, please move it to the line with &apos;}&apos;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+            LOG.debug(&lt;span class=&quot;code-quote&quot;&gt;&quot;Found Cluster configuration in ZK. Refreshing the in memory configuration map from ZK&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The above line is too long (&amp;gt; 100 chars).&lt;/p&gt;

&lt;p&gt;It looks like ClusterConfigTracker wasn&apos;t included in the patch. Therefore it is hard to get a global view of your design.&lt;br/&gt;
Can you generate a new patch for trunk and put it on the review board ?&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="13409084" author="zhihyu@ebaysf.com" created="Sun, 8 Jul 2012 22:10:31 +0000"  >&lt;p&gt;I found a copy of ClusterConfigTracker in patch v1.&lt;br/&gt;
Please add javadoc for this class.&lt;/p&gt;

&lt;p&gt;For hasClusterConfigAvailableInZK(), maybe a better name is isClusterConfigAvailableInZK().&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+            &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; configNodes = ZKUtil.getNumberOfChildren(watcher, watcher.clusterConfigZNode);
+            &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] data = ZKUtil.getData(watcher, watcher.clusterConfigZNode);
+            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (data != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; data.length &amp;gt; 0 &amp;amp;&amp;amp; configNodes &amp;gt; 0) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The check of configNodes &amp;gt; 0 should be performed before the call to ZKUtil.getData(). If it is 0, return false directly.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; updateClusterConfig(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; configKey, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; configValue) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Consider creating a method similar to the above which accepts collection of key/value pairs so that more than one key/value would be updated in one call.&lt;/p&gt;

&lt;p&gt;Since I haven&apos;t seen ClusterConfigTracker in patch v2, some of the above comments may not apply.&lt;/p&gt;</comment>
                            <comment id="13451167" author="iamknome" created="Sat, 8 Sep 2012 00:14:39 +0000"  >&lt;p&gt;Added latest patch with protobuf support and addressed the review comments.  All 7 tests pass.&lt;/p&gt;

&lt;p&gt;Here is a sample of how things work from shell:&lt;/p&gt;

&lt;p&gt;hbase(main):007:0&amp;gt; get_config &apos;hbase.balancer.period&apos;&lt;br/&gt;
config_value = : 20000&lt;br/&gt;
0 row(s) in 0.0170 seconds&lt;/p&gt;

&lt;p&gt;hbase(main):008:0&amp;gt; update_config &apos;hbase.balancer.period&apos;, &apos;35000&apos;&lt;br/&gt;
updated config key with new value &lt;br/&gt;
0 row(s) in 0.0200 seconds&lt;/p&gt;

&lt;p&gt;hbase(main):009:0&amp;gt; get_config &apos;hbase.balancer.period&apos;&lt;br/&gt;
config_value = : 35000&lt;br/&gt;
0 row(s) in 0.0180 seconds&lt;/p&gt;</comment>
                            <comment id="13451237" author="hadoopqa" created="Sat, 8 Sep 2012 03:31:50 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12544331/3909_090712-2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12544331/3909_090712-2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 hadoop2.0.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    -1 javac.  The patch appears to cause mvn compile goal to fail.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to cause Findbugs (version 1.3.9) to fail.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.TestHBaseDynamicConfiguration&lt;br/&gt;
                  org.apache.hadoop.hbase.replication.TestReplication&lt;br/&gt;
                  org.apache.hadoop.hbase.client.TestShell&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2828//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2828//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2828//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2828//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13451246" author="yuzhihong@gmail.com" created="Sat, 8 Sep 2012 04:45:29 +0000"  >&lt;p&gt;I think the test failure was due to the following in initializeZKBasedSystemTrackers():&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.catalogTracker = createCatalogTracker(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.zooKeeper, &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.conf,
        &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;, conf.getInt(&lt;span class=&quot;code-quote&quot;&gt;&quot;hbase.master.catalog.timeout&quot;&lt;/span&gt;, 600000));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;nit: exchange the order of the parameters so that assertion is easier to read:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    assertEquals(catalogTimeout, &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;.MAX_VALUE);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;In this particular case, I think the assertion is not needed - the actual value may change if someone modifies the snippet cited above.&lt;/p&gt;</comment>
                            <comment id="13461281" author="stack" created="Sat, 22 Sep 2012 22:01:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=iamknome&quot; class=&quot;user-hover&quot; rel=&quot;iamknome&quot;&gt;Subbu M Iyer&lt;/a&gt; Mind putting your patch on rb so we can take a look?  I like your cmd-line example.  That looks sweet.&lt;/p&gt;</comment>
                            <comment id="13461560" author="iamknome" created="Mon, 24 Sep 2012 01:33:07 +0000"  >&lt;p&gt;Stack: Which RB version should l target my patch on ?&lt;/p&gt;

&lt;p&gt;Please let me know.&lt;/p&gt;

&lt;p&gt;thanks&lt;br/&gt;
Subbu&lt;/p&gt;
</comment>
                            <comment id="13461677" author="yuzhihong@gmail.com" created="Mon, 24 Sep 2012 08:43:36 +0000"  >&lt;p&gt;Subbu has put the review here on Sept 8th: &lt;a href=&quot;https://reviews.apache.org/r/6964/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/6964/&lt;/a&gt; &lt;/p&gt;</comment>
                            <comment id="13485805" author="iamknome" created="Mon, 29 Oct 2012 03:11:42 +0000"  >&lt;p&gt;Attaching latest patch that addresses the review comments. &lt;/p&gt;

&lt;p&gt;All tests pass except the following and I am reviewing the failures. &lt;/p&gt;

&lt;p&gt;Tests in error: &lt;br/&gt;
  testGetRowVersions(org.apache.hadoop.hbase.TestMultiVersions): Shutting down&lt;br/&gt;
  testScanMultipleVersions(org.apache.hadoop.hbase.TestMultiVersions): org.apache.hadoop.hbase.MasterNotRunningException: Can create a proxy to master, but it is not running&lt;/p&gt;
</comment>
                            <comment id="13485812" author="zhihyu@ebaysf.com" created="Mon, 29 Oct 2012 03:42:47 +0000"  >&lt;p&gt;The test passed locally with patch on my MacBook:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Running org.apache.hadoop.hbase.TestMultiVersions
2012-10-28 20:41:05.379 java[36641:1903] Unable to load realm mapping info from SCDynamicStore
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 39.007 sec
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13485827" author="hadoopqa" created="Mon, 29 Oct 2012 04:18:17 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12551148/3909-102812.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12551148/3909-102812.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 89 warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to introduce 3 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.client.TestShell&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3169//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3169//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3169//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3169//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3169//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3169//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3169//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3169//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3169//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3169//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3169//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3169//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3169//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3169//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13486133" author="zhihyu@ebaysf.com" created="Mon, 29 Oct 2012 16:43:38 +0000"  >&lt;p&gt;Test failure revealed that some script might be missing from the patch:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Stacktrace

org.jruby.embed.EvalFailedException: (LoadError) no such file to load -- shell/commands/update_config
	at org.jruby.embed.internal.EmbedEvalUnitImpl.run(EmbedEvalUnitImpl.java:136)
	at org.jruby.embed.ScriptingContainer.runUnit(ScriptingContainer.java:1263)
	at org.jruby.embed.ScriptingContainer.runScriptlet(ScriptingContainer.java:1308)
	at org.apache.hadoop.hbase.client.TestShell.testRunShellTests(TestShell.java:69)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13486146" author="iamknome" created="Mon, 29 Oct 2012 16:57:00 +0000"  >&lt;p&gt;Added new patch to address the missing scripts issue.&lt;/p&gt;

&lt;p&gt;Thanks Ted for pointing it out.&lt;/p&gt;</comment>
                            <comment id="13486157" author="zhihyu@ebaysf.com" created="Mon, 29 Oct 2012 17:10:50 +0000"  >&lt;p&gt;The first few changes to conf/hbase-site.xml seem to be unrelated to this feature.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+            runtime cluster configuration changes with out the need &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; restarting the cluster.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&apos;with out&apos; -&amp;gt; &apos;without&apos;&lt;br/&gt;
For HBaseInMemoryConfiguration:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; get(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; configKey) {
+    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (clusterConfigMap.containsKey(configKey)) {
+      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; clusterConfigMap.get(configKey);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Since clusterConfigMap is ConcurrentHashMap, I think we should skip the call to containsKey(). If null is returned from get(), we delegate to super.get(). This applies to getLong(), etc.&lt;br/&gt;
For refreshClusterConfigMap():&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+      LOG.debug(&lt;span class=&quot;code-quote&quot;&gt;&quot;Refreshed cluster configuration map. Current size = &quot;&lt;/span&gt;
+              + clusterConfigMap.size());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Consider recording the size of clusterConfigMap before refreshing and log both sizes.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Running org.apache.hadoop.hbase.TestHBaseDynamicConfiguration
Tests run: 7, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 116.502 sec
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I think TestHBaseDynamicConfiguration should be marked as LargeTest.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    updateClusterConfig(cct);
+
+    &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.sleep(5000);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Worth considering finding the proper way of detecting completion of config update so that we don&apos;t need to wait for so long.&lt;br/&gt;
testDumpConfiguration() seems like a utility method instead of a test.&lt;br/&gt;
testConfigDuplicateAddition() can be named testConfigDuplicateAdditionWithSameKey().&lt;br/&gt;
testConfigUpdate() seems to be same as testConfigDuplicateAddition().&lt;/p&gt;

&lt;p&gt;For JsonConfiguration and JsonProperty, they&apos;re defined in ClusterConfigTracker.&lt;br/&gt;
You can reuse them in TestHBaseDynamicConfiguration&lt;/p&gt;

&lt;p&gt;Please upload patch v3 onto review board so that further review is easier.&lt;/p&gt;</comment>
                            <comment id="13486207" author="hadoopqa" created="Mon, 29 Oct 2012 17:58:24 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12551209/3909-102912.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12551209/3909-102912.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 89 warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to introduce 3 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;/p&gt;


&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3172//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3172//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3172//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3172//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3172//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3172//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3172//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3172//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3172//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3172//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3172//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3172//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3172//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3172//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13486254" author="zhihyu@ebaysf.com" created="Mon, 29 Oct 2012 18:51:49 +0000"  >&lt;p&gt;For ClusterConfigTracker:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+        &lt;span class=&quot;code-comment&quot;&gt;// Cluster configuration already exists in ZK.
&lt;/span&gt;+        LOG.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;ZK Cluster Config already available. Skipping config ZK node creation&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The above log should be debug. The second sentence actually belongs to initClusterConfig()&lt;br/&gt;
For updateClusterConfig(String configKey, String configValue):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (KeeperException e) {
+      LOG.error(&lt;span class=&quot;code-quote&quot;&gt;&quot;Failure during update cluster configuration&quot;&lt;/span&gt;, e);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Please include configKey in the above log.&lt;br/&gt;
The change in ServerManager.java is unrelated, please remove from next patch.&lt;/p&gt;

&lt;p&gt;For update_config.rb and get_config.rb, the following is not needed:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+# Copyright 2011 The Apache Software Foundation
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;For HBaseAdmin.java, the following line exceeds 100 characters long:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+        UpdateConfigRequest request = RequestConverter.buildUpdateConfigRequest(configKey, configValue);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Currently only one pair of key / value is updated per UpdateConfigRequest:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+message UpdateConfigRequest {
+  required string configKey = 1;
+  required string configValue = 2;
+}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Shall we accommodate more than one pair (through repeated keyword) ?&lt;/p&gt;</comment>
                            <comment id="13486310" author="zhihyu@ebaysf.com" created="Mon, 29 Oct 2012 20:21:09 +0000"  >&lt;p&gt;In a local run, TestMasterNoCluster hung.&lt;br/&gt;
I wasn&apos;t able to find the test in &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3172//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3172//testReport/&lt;/a&gt; either.&lt;br/&gt;
Will attach jstack soon.&lt;/p&gt;</comment>
                            <comment id="13486317" author="hadoopqa" created="Mon, 29 Oct 2012 20:32:13 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12551232/testMasterNoCluster.stack&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12551232/testMasterNoCluster.stack&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3173//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3173//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13487431" author="iamknome" created="Wed, 31 Oct 2012 01:16:11 +0000"  >&lt;p&gt;Ted,&lt;/p&gt;

&lt;p&gt;Addressed all your comments except the support for having more than one&lt;br/&gt;
pair of values for the update request. My thought is we shall definitely&lt;br/&gt;
add that as a additional feature once we commit this one.&lt;/p&gt;

&lt;p&gt;Also updated the latest patch to review board.&lt;/p&gt;

&lt;p&gt;thanks a lot for your cooperation on this.&lt;/p&gt;

&lt;p&gt;Subbu&lt;/p&gt;

</comment>
                            <comment id="13487432" author="iamknome" created="Wed, 31 Oct 2012 01:17:14 +0000"  >&lt;p&gt;call to containsKey(). If null is returned from get(), we delegate to&lt;br/&gt;
super.get(). This applies to getLong(), etc.&lt;/p&gt;

&lt;p&gt;This is tricky. Basically my thought is it&apos;s quite possible that some one&lt;br/&gt;
has overridden a configuration key with null value explicitly and in such&lt;br/&gt;
cases we do not want to override the same with default value from config.&lt;/p&gt;

&lt;p&gt;So, if the key is present in CHM, then we must use it no matter what the&lt;br/&gt;
value is.&lt;/p&gt;

&lt;p&gt;thoughts ?&lt;/p&gt;

&lt;p&gt;On Mon, Oct 29, 2012 at 10:12 AM, Ted Yu (JIRA) &amp;lt;jira@apache.org&amp;gt; wrote:&lt;/p&gt;
</comment>
                            <comment id="13487462" author="zhihyu@ebaysf.com" created="Wed, 31 Oct 2012 02:33:29 +0000"  >&lt;p&gt;Excerpt from &lt;a href=&quot;http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentHashMap.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentHashMap.html&lt;/a&gt; :&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Like Hashtable but unlike HashMap, this class does not allow null to be used as a key or value. &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;So the user is not able to specify null value. I think my suggestion is safe.&lt;/p&gt;</comment>
                            <comment id="13551360" author="sershe" created="Fri, 11 Jan 2013 18:29:32 +0000"  >&lt;p&gt;this appears to have stalled&lt;/p&gt;</comment>
                            <comment id="13639843" author="stack" created="Tue, 23 Apr 2013 23:42:43 +0000"  >&lt;p&gt;Moving new feature out of 0.95 (I think this is critical hbase feature but I can&apos;t work on it at mo.)&lt;/p&gt;</comment>
                            <comment id="13877542" author="aoxiang" created="Tue, 21 Jan 2014 15:33:50 +0000"  >&lt;p&gt;What about the method which 0.89 fb current use&#65311; &lt;br/&gt;
(1) First we change all node&apos;s hbase-site.xml.&lt;br/&gt;
(2) Second ask the node to reload the conf and take effect.  &lt;/p&gt;</comment>
                            <comment id="13877544" author="aoxiang" created="Tue, 21 Jan 2014 15:38:50 +0000"  >&lt;p&gt;And i can backport it from 0.89 fb and make a patch for trunk.&lt;/p&gt;</comment>
                            <comment id="13877546" author="hadoopqa" created="Tue, 21 Jan 2014 15:42:38 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12551209/3909-102912.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12551209/3909-102912.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12551209&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8482//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8482//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13878207" author="aoxiang" created="Wed, 22 Jan 2014 03:27:27 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=saint.ack%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;saint.ack@gmail.com&quot;&gt;Stack&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tedyu%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;tedyu@apache.org&quot;&gt;Ted Yu&lt;/a&gt; how about the patch &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3909&quot; title=&quot;Add dynamic config&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3909&quot;&gt;HBASE-3909&lt;/a&gt;-backport-from-fb-for-trunk.patch?&lt;br/&gt;
We have many method to implement dynamic config, so i just add a framework, if we accept this method , will add more.  &lt;/p&gt;</comment>
                            <comment id="13878318" author="hadoopqa" created="Wed, 22 Jan 2014 06:21:19 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12624264/HBASE-3909-backport-from-fb-for-trunk.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12624264/HBASE-3909-backport-from-fb-for-trunk.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12624264&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.0&lt;/font&gt;.  The patch compiles against the hadoop 1.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.1&lt;/font&gt;.  The patch compiles against the hadoop 1.1 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 1 warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to introduce 1 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces the following lines longer than 100:&lt;br/&gt;
    +    private UpdateConfigurationRequest(boolean noInit) &lt;/p&gt;
{ this.unknownFields = com.google.protobuf.UnknownFieldSet.getDefaultInstance(); }&lt;br/&gt;
+    private UpdateConfigurationResponse(boolean noInit) { this.unknownFields = com.google.protobuf.UnknownFieldSet.getDefaultInstance(); }
&lt;p&gt;+       * &amp;lt;code&amp;gt;rpc UpdateConfiguration(.UpdateConfigurationRequest) returns (.UpdateConfigurationResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+     * &amp;lt;code&amp;gt;rpc UpdateConfiguration(.UpdateConfigurationRequest) returns (.UpdateConfigurationResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+    private UpdateConfigurationRequest(boolean noInit) &lt;/p&gt;
{ this.unknownFields = com.google.protobuf.UnknownFieldSet.getDefaultInstance(); }&lt;br/&gt;
+    private UpdateConfigurationResponse(boolean noInit) { this.unknownFields = com.google.protobuf.UnknownFieldSet.getDefaultInstance(); }
&lt;p&gt;+       * &amp;lt;code&amp;gt;rpc UpdateConfiguration(.UpdateConfigurationRequest) returns (.UpdateConfigurationResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+     * &amp;lt;code&amp;gt;rpc UpdateConfiguration(.UpdateConfigurationRequest) returns (.UpdateConfigurationResponse);&amp;lt;/code&amp;gt;&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 site&lt;/font&gt;.  The patch appears to cause mvn site goal to fail.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8488//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8488//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8488//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8488//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8488//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8488//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8488//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8488//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8488//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8488//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8488//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8488//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8488//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8488//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8488//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8488//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8488//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8488//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8488//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8488//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8488//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8488//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13879287" author="yuzhihong@gmail.com" created="Wed, 22 Jan 2014 22:39:10 +0000"  >&lt;p&gt;Skimmed the patch.&lt;br/&gt;
Some high level questions:&lt;br/&gt;
when configuration is updated, how would regions in transition pick up the changes ?&lt;br/&gt;
when configuration is updated and meanwhile master fails over, what would happen ?&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="13879394" author="aoxiang" created="Thu, 23 Jan 2014 02:53:52 +0000"  >&lt;p&gt;Q: when configuration is updated, how would regions in transition pick up the changes ?&lt;br/&gt;
A: when region open finished, it can check the configuration, if configuration changes the region can apply the new configuration.&lt;/p&gt;

&lt;p&gt;Q:when configuration is updated and meanwhile master fails over, what would happen ?&lt;br/&gt;
A: The new configuration takes effect must be triggered by admin&#65292;if some node failed&#65292;admin can do it again.&lt;/p&gt;
</comment>
                            <comment id="13879425" author="yuzhihong@gmail.com" created="Thu, 23 Jan 2014 03:41:20 +0000"  >&lt;blockquote&gt;&lt;p&gt;when region open finished, it can check the configuration&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Does this imply that this region needs re-opening because many parameters take effect at the time of region open ?&lt;/p&gt;</comment>
                            <comment id="13879429" author="aoxiang" created="Thu, 23 Jan 2014 03:45:29 +0000"  >&lt;blockquote&gt;&lt;p&gt;Does this imply that this region needs re-opening because many parameters take effect at the time of region open ?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;No&#65292;the region should not re-opening&#65292;not all parameters will dynamic take effect, we choose some of them.&lt;/p&gt;</comment>
                            <comment id="13882088" author="stack" created="Sat, 25 Jan 2014 22:36:45 +0000"  >&lt;p&gt;Patch is great.  Lets get it in.  There is a hole in that the admin client does not know how to talk to backup master which we should fix in general but it should not get in the way of this patch.  What you think &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aoxiang&quot; class=&quot;user-hover&quot; rel=&quot;aoxiang&quot;&gt;binlijin&lt;/a&gt;?  Apply this as is and then add configs as we go?  Needs a bit of doc. so devs know this mechanism exists.  Would suggest fixing the class comment so it uses javadoc formatting especially given the documentation on the class is so good.&lt;/p&gt;

&lt;p&gt;Rereading the old comments on this issue talking of hoisting configs up into zk so we can exploit its callback mechanism, this mechanism does none of that and just has us reload the configs from under the running processors.&lt;/p&gt;

&lt;p&gt;One concern I&apos;d have is that we are reloading the configs but the Server constructors do a bunch of checking and setting on configs.  Will these settings be lost when we reload from raw configs on disk.  For example, HRS constructor calls FSUtils.setupShortCircuitRead(this.conf).  Do these settings persist pas the reload call?&lt;/p&gt;

&lt;p&gt;Good stuff.&lt;/p&gt;</comment>
                            <comment id="13882118" author="hadoopqa" created="Sun, 26 Jan 2014 00:09:04 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12624975/HBASE-3909-backport-from-fb-for-trunk-2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12624975/HBASE-3909-backport-from-fb-for-trunk-2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12624975&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.0&lt;/font&gt;.  The patch compiles against the hadoop 1.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.1&lt;/font&gt;.  The patch compiles against the hadoop 1.1 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 1 warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces the following lines longer than 100:&lt;br/&gt;
    +    private UpdateConfigurationRequest(boolean noInit) &lt;/p&gt;
{ this.unknownFields = com.google.protobuf.UnknownFieldSet.getDefaultInstance(); }&lt;br/&gt;
+    private UpdateConfigurationResponse(boolean noInit) { this.unknownFields = com.google.protobuf.UnknownFieldSet.getDefaultInstance(); }
&lt;p&gt;+       * &amp;lt;code&amp;gt;rpc UpdateConfiguration(.UpdateConfigurationRequest) returns (.UpdateConfigurationResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+     * &amp;lt;code&amp;gt;rpc UpdateConfiguration(.UpdateConfigurationRequest) returns (.UpdateConfigurationResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+    private UpdateConfigurationRequest(boolean noInit) &lt;/p&gt;
{ this.unknownFields = com.google.protobuf.UnknownFieldSet.getDefaultInstance(); }&lt;br/&gt;
+    private UpdateConfigurationResponse(boolean noInit) { this.unknownFields = com.google.protobuf.UnknownFieldSet.getDefaultInstance(); }
&lt;p&gt;+       * &amp;lt;code&amp;gt;rpc UpdateConfiguration(.UpdateConfigurationRequest) returns (.UpdateConfigurationResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+     * &amp;lt;code&amp;gt;rpc UpdateConfiguration(.UpdateConfigurationRequest) returns (.UpdateConfigurationResponse);&amp;lt;/code&amp;gt;&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 site&lt;/font&gt;.  The patch appears to cause mvn site goal to fail.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8517//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8517//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8517//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8517//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8517//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8517//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8517//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8517//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8517//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8517//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8517//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8517//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8517//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8517//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8517//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8517//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8517//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8517//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8517//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8517//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8517//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8517//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13882144" author="aoxiang" created="Sun, 26 Jan 2014 02:19:51 +0000"  >&lt;p&gt;Add to rb for review, &lt;a href=&quot;https://reviews.apache.org/r/17369/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/17369/&lt;/a&gt; .&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;There is a hole in that the admin client does not know how to talk to backup master which we should fix in general but it should not get in the way of this patch. &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yes,  this patch misses backup master, we can fix it with other patch.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Apply this as is and then add configs as we go? Needs a bit of doc. &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;More work will be done, for example doc and add ruby command.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;One concern I&apos;d have is that we are reloading the configs but the Server constructors do a bunch of checking and setting on configs. Will these settings be lost when we reload from raw configs on disk. For example, HRS constructor calls FSUtils.setupShortCircuitRead(this.conf). Do these settings persist pas the reload call?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yes, at first these are some settings will be lost, we will not have all settings take effect dynamic. &lt;/p&gt;</comment>
                            <comment id="13882196" author="stack" created="Sun, 26 Jan 2014 06:34:40 +0000"  >&lt;blockquote&gt;&lt;p&gt;Yes, this patch misses backup master, we can fix it with other patch.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Yes, at first these are some settings will be lost, we will not have all settings take effect dynamic.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Pardon me.  I don&apos;t follow.  We can&apos;t lose the setting of short circuit reads on reload of configs.  Do you think this will happen?  Can we add unit tests to show server configs ride across the reload of configs?  Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aoxiang&quot; class=&quot;user-hover&quot; rel=&quot;aoxiang&quot;&gt;binlijin&lt;/a&gt;&lt;/p&gt;
</comment>
                            <comment id="13883069" author="apurtell" created="Mon, 27 Jan 2014 18:33:59 +0000"  >&lt;blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Yes, this patch misses backup master, we can fix it with other patch.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yes.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;That&apos;s a pretty big hole. What happens if there is a fail over? &lt;/p&gt;</comment>
                            <comment id="13883160" author="stack" created="Mon, 27 Jan 2014 19:29:08 +0000"  >&lt;blockquote&gt;&lt;p&gt;That&apos;s a pretty big hole. What happens if there is a fail over?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The failed-over master will be missing the config.  A workaround would be the operator restarting the backup masters when master config changed.  Can add this to the release notes and address it better in a second issue (backup masters are in general on hbaseadmins blindside &amp;#8211; need to fix).&lt;/p&gt;</comment>
                            <comment id="13883662" author="zjushch" created="Tue, 28 Jan 2014 02:13:22 +0000"  >&lt;p&gt;Throw some potential problems I think:&lt;br/&gt;
1.As the implementation of patch, only allow some configuration to reset the value after reloading. It means Administrator should remember the configurations which could be reloaded dynamically. &lt;br/&gt;
I think it will puzzle the user whether the configuraion value he expected is reset.&lt;/p&gt;

&lt;p&gt;2.Through the Configuration Observer, will  the reloaded value take affect  properly? At least, resetting the compaction threads number is possible to be not expected on the patch.  For example,  decreasing the CorePoolSize of thread pool will not decrease the number of running thread until the queue of thread pool is empty and the thread is idle for some time. If user want to limit the IO caused by compaction through decreasing the compaction threads number dynamically, but compaction request is always being produced in real cluster, it means the compaction thread won&apos;t be idle, then the running compaction thread won&apos;t be decreased.&lt;/p&gt;

&lt;p&gt;3.Is it any concurrent risk when reloading the config? A thread may get the old value and new value for the same config when running. Of course, this could be guaranteed in Configuration Observer, but seems not easy.&lt;/p&gt;

</comment>
                            <comment id="13894230" author="aoxiang" created="Fri, 7 Feb 2014 06:17:31 +0000"  >&lt;blockquote&gt;&lt;p&gt;Pardon me. I don&apos;t follow. We can&apos;t lose the setting of short circuit reads on reload of configs. Do you think this will happen? &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Some configs are hard or not impossible to take effect dynamically right now for example&#65306; zookeeper.session.timeout, hbase.regionserver.metahandler.count and so on.&lt;br/&gt;
If we want short circuit reads to take effect dynamically we must change HDFS Client.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
DFSClient
  /**
   * DFSClient configuration 
   */
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; class Conf {
    &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; useLegacyBlockReader;
    &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; useLegacyBlockReaderLocal;
    &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; domainSocketPath;
    &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; skipShortCircuitChecksums;
    &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; shortCircuitBufferSize;
    &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; shortCircuitLocalReads;
    &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; domainSocketDataTraffic;
    &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; shortCircuitStreamsCacheSize;
    &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; shortCircuitStreamsCacheExpiryMs; 
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13894291" author="aoxiang" created="Fri, 7 Feb 2014 08:16:27 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3909&quot; title=&quot;Add dynamic config&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3909&quot;&gt;HBASE-3909&lt;/a&gt;-backport-from-fb-for-trunk-4.patch make short circuit reads dynamic.&lt;/p&gt;</comment>
                            <comment id="13894334" author="hadoopqa" created="Fri, 7 Feb 2014 09:21:17 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12627568/HBASE-3909-backport-from-fb-for-trunk-3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12627568/HBASE-3909-backport-from-fb-for-trunk-3.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12627568&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.0&lt;/font&gt;.  The patch compiles against the hadoop 1.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.1&lt;/font&gt;.  The patch compiles against the hadoop 1.1 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 3 warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces the following lines longer than 100:&lt;br/&gt;
    +    private UpdateConfigurationRequest(boolean noInit) &lt;/p&gt;
{ this.unknownFields = com.google.protobuf.UnknownFieldSet.getDefaultInstance(); }&lt;br/&gt;
+    private UpdateConfigurationResponse(boolean noInit) { this.unknownFields = com.google.protobuf.UnknownFieldSet.getDefaultInstance(); }
&lt;p&gt;+       * &amp;lt;code&amp;gt;rpc UpdateConfiguration(.UpdateConfigurationRequest) returns (.UpdateConfigurationResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+     * &amp;lt;code&amp;gt;rpc UpdateConfiguration(.UpdateConfigurationRequest) returns (.UpdateConfigurationResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+    private UpdateConfigurationRequest(boolean noInit) &lt;/p&gt;
{ this.unknownFields = com.google.protobuf.UnknownFieldSet.getDefaultInstance(); }&lt;br/&gt;
+    private UpdateConfigurationResponse(boolean noInit) { this.unknownFields = com.google.protobuf.UnknownFieldSet.getDefaultInstance(); }
&lt;p&gt;+       * &amp;lt;code&amp;gt;rpc UpdateConfiguration(.UpdateConfigurationRequest) returns (.UpdateConfigurationResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+     * &amp;lt;code&amp;gt;rpc UpdateConfiguration(.UpdateConfigurationRequest) returns (.UpdateConfigurationResponse);&amp;lt;/code&amp;gt;&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8625//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8625//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8625//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8625//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8625//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8625//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8625//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8625//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8625//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8625//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8625//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8625//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8625//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8625//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8625//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8625//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8625//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8625//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8625//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8625//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8625//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8625//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13894369" author="hadoopqa" created="Fri, 7 Feb 2014 10:10:22 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12627573/HBASE-3909-backport-from-fb-for-trunk-4.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12627573/HBASE-3909-backport-from-fb-for-trunk-4.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12627573&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.0&lt;/font&gt;.  The patch compiles against the hadoop 1.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.1&lt;/font&gt;.  The patch compiles against the hadoop 1.1 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 3 warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces the following lines longer than 100:&lt;br/&gt;
    +    private UpdateConfigurationRequest(boolean noInit) &lt;/p&gt;
{ this.unknownFields = com.google.protobuf.UnknownFieldSet.getDefaultInstance(); }&lt;br/&gt;
+    private UpdateConfigurationResponse(boolean noInit) { this.unknownFields = com.google.protobuf.UnknownFieldSet.getDefaultInstance(); }
&lt;p&gt;+       * &amp;lt;code&amp;gt;rpc UpdateConfiguration(.UpdateConfigurationRequest) returns (.UpdateConfigurationResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+     * &amp;lt;code&amp;gt;rpc UpdateConfiguration(.UpdateConfigurationRequest) returns (.UpdateConfigurationResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+    private UpdateConfigurationRequest(boolean noInit) &lt;/p&gt;
{ this.unknownFields = com.google.protobuf.UnknownFieldSet.getDefaultInstance(); }&lt;br/&gt;
+    private UpdateConfigurationResponse(boolean noInit) { this.unknownFields = com.google.protobuf.UnknownFieldSet.getDefaultInstance(); }
&lt;p&gt;+       * &amp;lt;code&amp;gt;rpc UpdateConfiguration(.UpdateConfigurationRequest) returns (.UpdateConfigurationResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+     * &amp;lt;code&amp;gt;rpc UpdateConfiguration(.UpdateConfigurationRequest) returns (.UpdateConfigurationResponse);&amp;lt;/code&amp;gt;&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8626//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8626//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8626//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8626//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8626//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8626//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8626//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8626//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8626//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8626//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8626//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8626//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8626//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8626//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8626//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8626//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8626//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8626//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8626//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8626//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8626//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8626//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13894760" author="yuzhihong@gmail.com" created="Fri, 7 Feb 2014 17:43:31 +0000"  >&lt;p&gt;Patch is of large size.&lt;/p&gt;

&lt;p&gt;Mind posting it on review board ?&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="13894815" author="yuzhihong@gmail.com" created="Fri, 7 Feb 2014 18:28:46 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+ * Copyright 2013 The Apache Software Foundation
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Year is not needed.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;interface&lt;/span&gt; ConfigurationObserver {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Add annotation for audience.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+          LOG.error(&lt;span class=&quot;code-quote&quot;&gt;&quot;Encountered a NPE &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; notifying observers.&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Please add some information about the observer which caused the NPE&lt;/p&gt;</comment>
                            <comment id="13895399" author="aoxiang" created="Sat, 8 Feb 2014 03:04:29 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tedyu%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;tedyu@apache.org&quot;&gt;Ted Yu&lt;/a&gt;  patch is uploaded to &lt;a href=&quot;https://reviews.apache.org/r/17369/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/17369/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13895434" author="hadoopqa" created="Sat, 8 Feb 2014 04:55:26 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12627774/HBASE-3909-backport-from-fb-for-trunk-5.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12627774/HBASE-3909-backport-from-fb-for-trunk-5.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12627774&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 9 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.0&lt;/font&gt;.  The patch compiles against the hadoop 1.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.1&lt;/font&gt;.  The patch compiles against the hadoop 1.1 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 3 warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to introduce 1 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces the following lines longer than 100:&lt;br/&gt;
    +    private UpdateConfigurationRequest(boolean noInit) &lt;/p&gt;
{ this.unknownFields = com.google.protobuf.UnknownFieldSet.getDefaultInstance(); }&lt;br/&gt;
+    private UpdateConfigurationResponse(boolean noInit) { this.unknownFields = com.google.protobuf.UnknownFieldSet.getDefaultInstance(); }
&lt;p&gt;+       * &amp;lt;code&amp;gt;rpc UpdateConfiguration(.UpdateConfigurationRequest) returns (.UpdateConfigurationResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+     * &amp;lt;code&amp;gt;rpc UpdateConfiguration(.UpdateConfigurationRequest) returns (.UpdateConfigurationResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+    private UpdateConfigurationRequest(boolean noInit) &lt;/p&gt;
{ this.unknownFields = com.google.protobuf.UnknownFieldSet.getDefaultInstance(); }&lt;br/&gt;
+    private UpdateConfigurationResponse(boolean noInit) { this.unknownFields = com.google.protobuf.UnknownFieldSet.getDefaultInstance(); }
&lt;p&gt;+       * &amp;lt;code&amp;gt;rpc UpdateConfiguration(.UpdateConfigurationRequest) returns (.UpdateConfigurationResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+     * &amp;lt;code&amp;gt;rpc UpdateConfiguration(.UpdateConfigurationRequest) returns (.UpdateConfigurationResponse);&amp;lt;/code&amp;gt;&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 site&lt;/font&gt;.  The patch appears to cause mvn site goal to fail.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8640//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8640//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8640//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8640//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8640//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8640//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8640//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8640//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8640//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8640//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8640//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8640//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8640//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8640//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8640//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8640//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8640//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8640//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8640//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8640//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8640//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8640//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13895454" author="aoxiang" created="Sat, 8 Feb 2014 07:06:08 +0000"  >&lt;p&gt;Try to fix javadoc and findbugs warnings.&lt;/p&gt;</comment>
                            <comment id="13895475" author="hadoopqa" created="Sat, 8 Feb 2014 08:38:01 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12627787/HBASE-3909-backport-from-fb-for-trunk-6.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12627787/HBASE-3909-backport-from-fb-for-trunk-6.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12627787&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 9 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.0&lt;/font&gt;.  The patch compiles against the hadoop 1.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.1&lt;/font&gt;.  The patch compiles against the hadoop 1.1 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 3 warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces the following lines longer than 100:&lt;br/&gt;
    +    private UpdateConfigurationRequest(boolean noInit) &lt;/p&gt;
{ this.unknownFields = com.google.protobuf.UnknownFieldSet.getDefaultInstance(); }&lt;br/&gt;
+    private UpdateConfigurationResponse(boolean noInit) { this.unknownFields = com.google.protobuf.UnknownFieldSet.getDefaultInstance(); }
&lt;p&gt;+       * &amp;lt;code&amp;gt;rpc UpdateConfiguration(.UpdateConfigurationRequest) returns (.UpdateConfigurationResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+     * &amp;lt;code&amp;gt;rpc UpdateConfiguration(.UpdateConfigurationRequest) returns (.UpdateConfigurationResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+    private UpdateConfigurationRequest(boolean noInit) &lt;/p&gt;
{ this.unknownFields = com.google.protobuf.UnknownFieldSet.getDefaultInstance(); }&lt;br/&gt;
+    private UpdateConfigurationResponse(boolean noInit) { this.unknownFields = com.google.protobuf.UnknownFieldSet.getDefaultInstance(); }
&lt;p&gt;+       * &amp;lt;code&amp;gt;rpc UpdateConfiguration(.UpdateConfigurationRequest) returns (.UpdateConfigurationResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+     * &amp;lt;code&amp;gt;rpc UpdateConfiguration(.UpdateConfigurationRequest) returns (.UpdateConfigurationResponse);&amp;lt;/code&amp;gt;&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 site&lt;/font&gt;.  The patch appears to cause mvn site goal to fail.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;/p&gt;


&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core zombie tests&lt;/font&gt;.  There are 1 zombie test(s): 	at org.apache.hadoop.hbase.regionserver.wal.TestLogRolling.testLogRollOnPipelineRestart(TestLogRolling.java:485)&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8642//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8642//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8642//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8642//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8642//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8642//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8642//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8642//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8642//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8642//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8642//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8642//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8642//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8642//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8642//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8642//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8642//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8642//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8642//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8642//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8642//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8642//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13895513" author="hadoopqa" created="Sat, 8 Feb 2014 11:09:36 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12627802/HBASE-3909-backport-from-fb-for-trunk-7.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12627802/HBASE-3909-backport-from-fb-for-trunk-7.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12627802&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 9 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.0&lt;/font&gt;.  The patch compiles against the hadoop 1.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.1&lt;/font&gt;.  The patch compiles against the hadoop 1.1 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces the following lines longer than 100:&lt;br/&gt;
    +    private UpdateConfigurationRequest(boolean noInit) &lt;/p&gt;
{ this.unknownFields = com.google.protobuf.UnknownFieldSet.getDefaultInstance(); }&lt;br/&gt;
+    private UpdateConfigurationResponse(boolean noInit) { this.unknownFields = com.google.protobuf.UnknownFieldSet.getDefaultInstance(); }
&lt;p&gt;+       * &amp;lt;code&amp;gt;rpc UpdateConfiguration(.UpdateConfigurationRequest) returns (.UpdateConfigurationResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+     * &amp;lt;code&amp;gt;rpc UpdateConfiguration(.UpdateConfigurationRequest) returns (.UpdateConfigurationResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+    private UpdateConfigurationRequest(boolean noInit) &lt;/p&gt;
{ this.unknownFields = com.google.protobuf.UnknownFieldSet.getDefaultInstance(); }&lt;br/&gt;
+    private UpdateConfigurationResponse(boolean noInit) { this.unknownFields = com.google.protobuf.UnknownFieldSet.getDefaultInstance(); }
&lt;p&gt;+       * &amp;lt;code&amp;gt;rpc UpdateConfiguration(.UpdateConfigurationRequest) returns (.UpdateConfigurationResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+     * &amp;lt;code&amp;gt;rpc UpdateConfiguration(.UpdateConfigurationRequest) returns (.UpdateConfigurationResponse);&amp;lt;/code&amp;gt;&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 site&lt;/font&gt;.  The patch appears to cause mvn site goal to fail.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8643//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8643//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8643//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8643//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8643//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8643//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8643//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8643//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8643//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8643//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8643//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8643//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8643//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8643//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8643//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8643//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8643//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8643//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8643//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8643//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8643//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8643//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14110405" author="liushaohui" created="Tue, 26 Aug 2014 06:55:05 +0000"  >&lt;p&gt;Any tr about this issue?  It&apos;s a very good feature for operations.&lt;/p&gt;</comment>
                            <comment id="14110406" author="liushaohui" created="Tue, 26 Aug 2014 06:55:54 +0000"  >&lt;p&gt;Sorry for typo.&lt;/p&gt;

&lt;p&gt;Any progress about this issue? It&apos;s a very good feature for operations.&lt;/p&gt;</comment>
                            <comment id="14155532" author="manukranthk" created="Wed, 1 Oct 2014 21:09:11 +0000"  >&lt;p&gt;I am planning to produce a patch to forward port : &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8576&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-8576&lt;/a&gt; to master. It adds a lot of flexibility to do configuration changes dynamically. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gaurav.menghani&quot; class=&quot;user-hover&quot; rel=&quot;gaurav.menghani&quot;&gt;Gaurav Menghani&lt;/a&gt; has done some analysis on the types of configs we have in 89-fb and found that it makes sense to update some configs in an online fashion like compaction configurations etc. In case anyone is interested in the patch please refer to : &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12147&quot; title=&quot;Porting Online Config Change from 89-fb&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12147&quot;&gt;&lt;del&gt;HBASE-12147&lt;/del&gt;&lt;/a&gt;. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12548792">HBASE-5678</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12613405">HBASE-7049</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12754300">PHOENIX-1433</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12541164">HBASE-5335</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12537691">HBASE-5146</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12477384">HADOOP-7001</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12838892">HBASE-13936</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12551148" name="3909-102812.patch" size="146782" author="iamknome" created="Mon, 29 Oct 2012 03:12:19 +0000"/>
                            <attachment id="12551209" name="3909-102912.patch" size="150910" author="iamknome" created="Mon, 29 Oct 2012 16:57:15 +0000"/>
                            <attachment id="12521411" name="3909-v1.patch" size="54482" author="iamknome" created="Wed, 4 Apr 2012 23:02:56 +0000"/>
                            <attachment id="12521413" name="3909.v1" size="53145" author="zhihyu@ebaysf.com" created="Wed, 4 Apr 2012 23:17:49 +0000"/>
                            <attachment id="12544331" name="3909_090712-2.patch" size="146254" author="iamknome" created="Sat, 8 Sep 2012 00:15:59 +0000"/>
                            <attachment id="12624975" name="HBASE-3909-backport-from-fb-for-trunk-2.patch" size="134076" author="aoxiang" created="Fri, 24 Jan 2014 02:04:32 +0000"/>
                            <attachment id="12627568" name="HBASE-3909-backport-from-fb-for-trunk-3.patch" size="137872" author="aoxiang" created="Fri, 7 Feb 2014 07:34:58 +0000"/>
                            <attachment id="12627573" name="HBASE-3909-backport-from-fb-for-trunk-4.patch" size="141479" author="aoxiang" created="Fri, 7 Feb 2014 08:14:21 +0000"/>
                            <attachment id="12627774" name="HBASE-3909-backport-from-fb-for-trunk-5.patch" size="146479" author="aoxiang" created="Sat, 8 Feb 2014 03:02:03 +0000"/>
                            <attachment id="12627787" name="HBASE-3909-backport-from-fb-for-trunk-6.patch" size="146860" author="aoxiang" created="Sat, 8 Feb 2014 07:05:28 +0000"/>
                            <attachment id="12627802" name="HBASE-3909-backport-from-fb-for-trunk-7.patch" size="146804" author="aoxiang" created="Sat, 8 Feb 2014 09:16:46 +0000"/>
                            <attachment id="12624264" name="HBASE-3909-backport-from-fb-for-trunk.patch" size="130967" author="aoxiang" created="Wed, 22 Jan 2014 03:22:20 +0000"/>
                            <attachment id="12532029" name="HBase Cluster Config Details.xlsx" size="22870" author="iamknome" created="Wed, 13 Jun 2012 23:53:51 +0000"/>
                            <attachment id="12532030" name="patch-v2.patch" size="37474" author="iamknome" created="Wed, 13 Jun 2012 23:55:11 +0000"/>
                            <attachment id="12551232" name="testMasterNoCluster.stack" size="20098" author="zhihyu@ebaysf.com" created="Mon, 29 Oct 2012 20:22:12 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>15.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 20 May 2011 22:59:14 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>27086</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 9 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i00rpb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2420</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Bumping from 0.92 for above reasons</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>