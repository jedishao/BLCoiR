<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Thu Dec 01 20:58:11 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-14501/HBASE-14501.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-14501] NPE in replication when HDFS transparent encryption is enabled.</title>
                <link>https://issues.apache.org/jira/browse/HBASE-14501</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;We are seeing a NPE when replication (or in this case async wal replay for region replicas) is run on top of an HDFS cluster with TDE configured.&lt;/p&gt;

&lt;p&gt;This is the stack trace:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.lang.NullPointerException
        at org.apache.hadoop.hbase.CellUtil.matchingRow(CellUtil.java:370)
        at org.apache.hadoop.hbase.replication.regionserver.ReplicationSource.countDistinctRowKeys(ReplicationSource.java:649)
        at org.apache.hadoop.hbase.replication.regionserver.ReplicationSource.readAllEntriesToReplicateOrNextFile(ReplicationSource.java:450)
        at org.apache.hadoop.hbase.replication.regionserver.ReplicationSource.run(ReplicationSource.java:346)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This stack trace can only happen if WALEdit.getCells() returns an array containing null entries. I believe this happens due to &lt;tt&gt;KeyValueCodec.parseCell()&lt;/tt&gt; uses &lt;tt&gt;KeyValueUtil.iscreate()&lt;/tt&gt; which returns null in case of EOF at the beginning. However, the contract for the Decoder.parseCell() is not clear whether returning null is acceptable or not. The other Decoders (CompressedKvDecoder, CellCodec, etc) do not return null while KeyValueCodec does. &lt;/p&gt;

&lt;p&gt;BaseDecoder has this code: &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; advance() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.hasNext) &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.hasNext;
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.in.available() == 0) {
      &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.hasNext = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.hasNext;
    }
    &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
      &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.current = parseCell();
    } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (IOException ioEx) {
      rethrowEofException(ioEx);
    }
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.hasNext;
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;which is not correct since it uses &lt;tt&gt;IS.available()&lt;/tt&gt; not according to the javadoc: (&lt;a href=&quot;https://docs.oracle.com/javase/7/docs/api/java/io/InputStream.html#available(&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://docs.oracle.com/javase/7/docs/api/java/io/InputStream.html#available(&lt;/a&gt;)). DFSInputStream implements &lt;tt&gt;available()&lt;/tt&gt; as the remaining bytes to read from the stream, so we do not see the issue there. &lt;tt&gt;CryptoInputStream.available()&lt;/tt&gt; does a similar thing but see the issue. &lt;/p&gt;

&lt;p&gt;So two questions: &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;What should be the interface for Decoder.parseCell()? Can it return null?&lt;/li&gt;
	&lt;li&gt;How to properly fix  BaseDecoder.advance() to not rely on &lt;tt&gt;available()&lt;/tt&gt; call.&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12901096">HBASE-14501</key>
            <summary>NPE in replication when HDFS transparent encryption is enabled.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="enis">Enis Soztutar</assignee>
                                    <reporter username="enis">Enis Soztutar</reporter>
                        <labels>
                    </labels>
                <created>Mon, 28 Sep 2015 18:20:07 +0000</created>
                <updated>Wed, 27 Jan 2016 15:28:29 +0000</updated>
                            <resolved>Tue, 13 Oct 2015 04:06:12 +0000</resolved>
                                                    <fixVersion>2.0.0</fixVersion>
                    <fixVersion>1.2.0</fixVersion>
                    <fixVersion>1.3.0</fixVersion>
                    <fixVersion>1.0.3</fixVersion>
                    <fixVersion>1.1.3</fixVersion>
                    <fixVersion>0.98.16</fixVersion>
                                    <component>Replication</component>
                    <component>security</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>9</watches>
                                                                <comments>
                            <comment id="14933957" author="stack" created="Mon, 28 Sep 2015 20:52:06 +0000"  >&lt;p&gt;What is TDE?&lt;/p&gt;

&lt;p&gt;Return of null trying to parse a KV from stream looks like it has been around for a long time moved to KeyValueUtil from KeyValue itself as part of this:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10800&quot; title=&quot;Use CellComparator instead of KVComparator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10800&quot;&gt;&lt;del&gt;HBASE-10800&lt;/del&gt;&lt;/a&gt; - Use CellComparator instead of KVComparator (Ram)&lt;/p&gt;

&lt;p&gt;The comment is:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;@return Created KeyValue OR if we find a length of zero, we will return&lt;/li&gt;
	&lt;li&gt;null which can be useful marking a stream as done.&lt;/li&gt;
&lt;/ul&gt;


&lt;blockquote&gt;&lt;p&gt;However, the contract for the Decoder.parseCell() is not clear whether returning null is acceptable or not. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It is totally useless. It has no doc. I would think that it should at least note that a null could come back but  would imagine as user that you should not go in here unless something to parse..... and throw an exception if failed to parse... that would be &apos;cleaner&apos; than what is here now.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;The other Decoders (CompressedKvDecoder, CellCodec, etc) do not return null while KeyValueCodec does.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This seems like the proper behavior.&lt;/p&gt;

&lt;p&gt;On the is.available, that came in here:&lt;/p&gt;

&lt;p&gt;Author: Michael Stack &amp;lt;stack@apache.org&amp;gt;&lt;br/&gt;
Date:   Sat Feb 23 22:38:58 2013 +0000&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7899&quot; title=&quot;Cell block building tools: Cell codec and means of iterating an objects Cells&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7899&quot;&gt;&lt;del&gt;HBASE-7899&lt;/del&gt;&lt;/a&gt; Cell block building tools: Cell codec and means of iterating an objects Cells&lt;/p&gt;

&lt;p&gt;    git-svn-id: &lt;a href=&quot;https://svn.apache.org/repos/asf/hbase/trunk@1449420&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/repos/asf/hbase/trunk@1449420&lt;/a&gt; 13f79535-47bb-0310-9956-ffa450edef68&lt;/p&gt;

&lt;p&gt;Can you redo your bit about is.available? There are some bits missing which makes it hard to read. I think you are trying to say relying on is.available is dodgy... which yeah, generally is (though I put it here I believe).&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;What should be the interface for Decoder.parseCell()? Can it return null?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;To be more correct, it should throw an exception but it will probably be highly disruptive of current Cell/KV parsing.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;How to properly fix BaseDecoder.advance() to not rely on available() call.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;m not sure how to do this. We want the Interface to be dumb and exist out in hbase-common.... IS doesn&apos;t have much in it   Could read to EOF I suppose.&lt;/p&gt;

&lt;p&gt;This is an ugly one Enis.&lt;/p&gt;
</comment>
                            <comment id="14934045" author="enis" created="Mon, 28 Sep 2015 21:16:06 +0000"  >&lt;blockquote&gt;&lt;p&gt;What is TDE?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Transparent data encryption. &lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;This seems like the proper behavior.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Agreed. We should not allow the Decoder to decide whether an EOF is ok or not. &lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Can you redo your bit about is.available? There are some bits missing which makes it hard to read. I think you are trying to say relying on is.available is dodgy... which yeah, generally is (though I put it here I believe).&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yes. IS.available() returns the number of bytes available to read without blocking. Since HDFS implements it to return the total number of remaining bytes instead, this part has been working. But we should not rely on all underlying filesystems to implement &lt;tt&gt;IS.available()&lt;/tt&gt; this way. &lt;/p&gt;</comment>
                            <comment id="14934047" author="enis" created="Mon, 28 Sep 2015 21:16:55 +0000"  >&lt;p&gt;Let me try a patch to see whether things break or not when we change KeyValueCodec to throw exception instead. &lt;/p&gt;</comment>
                            <comment id="14934500" author="enis" created="Tue, 29 Sep 2015 02:15:32 +0000"  >&lt;p&gt;Learnings so far: &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;The interface between &lt;tt&gt;Decoder&lt;/tt&gt; and underlying &lt;tt&gt;InputStream&lt;/tt&gt; should be explicit. Ideally, the Decoder should not return null in parseCell().&lt;/li&gt;
	&lt;li&gt;The &lt;tt&gt;CellDecoder&lt;/tt&gt; right now does not know whether the InputStream has ended or not (EOF), so &lt;tt&gt;advance()&lt;/tt&gt; should look up how many bytes it can read. Sometimes the upper layer has context for how many cells it should read (IPCUtil, ProtobufLogReader).&lt;/li&gt;
	&lt;li&gt;Not throwing an EOFException for every createCellScanner() in RPCUtil maybe important for performance. Otherwise we will be throwing an exception in the regular code path.&lt;/li&gt;
	&lt;li&gt;Tried to pass in a LimitInputStream which knows about the file / buffer length and implements &lt;tt&gt;remaining()&lt;/tt&gt; so that the Decoder does not try to parseCell() and cause an exception in the happy path. Turns out DFSInputStream for open file tailing gets the last data blocks length from the datanodes directly, possibly overflowing the file length returned at file open time from NN (important for replication WAL tailing).&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I&apos;ll pursue another alternative to change BaseDecoder.parseCell() to return a union of &amp;lt;Cell, EOF, Exception&amp;gt; without causing extra object allocations per cell. &lt;/p&gt;</comment>
                            <comment id="14936117" author="enis" created="Wed, 30 Sep 2015 00:01:05 +0000"  >&lt;p&gt;Let&apos;s try this patch. BaseDecoder uses a PushbackIS to read the first byte to decide whether this is a legit EOF or not. If legit, returns false, otherwise lets the actual Decoder do &lt;tt&gt;parseCell()&lt;/tt&gt;. If parseCell throws an EOF, it is a partial cell read and gets re-thrown. &lt;/p&gt;

&lt;p&gt;I&apos;ll test this with the TDE setup to see whether we still see a NPE. Probably, it won&apos;t be possible to bring up a mini hdfs cluster with TDE setup.  &lt;/p&gt;</comment>
                            <comment id="14936352" author="hadoopqa" created="Wed, 30 Sep 2015 04:27:20 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12764345/hbase-14501_v1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12764345/hbase-14501_v1.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit c04d18970e066c1c5879a7ac1d261ef69cae5c3e.&lt;br/&gt;
  ATTACHMENT ID: 12764345&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 site&lt;/font&gt;.  The patch appears to cause mvn post-site goal to fail.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.mapreduce.TestImportExport&lt;br/&gt;
                  org.apache.hadoop.hbase.util.TestProcessBasedCluster&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15818//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15818//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15818//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15818//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15818//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15818//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15818//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15818//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14936363" author="stack" created="Wed, 30 Sep 2015 04:55:39 +0000"  >&lt;p&gt;+1 Nice.&lt;/p&gt;</comment>
                            <comment id="14938841" author="apurtell" created="Wed, 30 Sep 2015 20:49:47 +0000"  >&lt;p&gt;Set fix versions&lt;/p&gt;</comment>
                            <comment id="14938842" author="apurtell" created="Wed, 30 Sep 2015 20:49:54 +0000"  >&lt;p&gt;+1 from me too&lt;/p&gt;</comment>
                            <comment id="14951377" author="ndimiduk" created="Fri, 9 Oct 2015 23:22:02 +0000"  >&lt;p&gt;Green lights from that manual test &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enis&quot; class=&quot;user-hover&quot; rel=&quot;enis&quot;&gt;Enis Soztutar&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="14954319" author="enis" created="Tue, 13 Oct 2015 03:43:52 +0000"  >&lt;blockquote&gt;&lt;p&gt;Green lights from that manual test Enis Soztutar?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yes, just got around to test this with the TDE cluster. NPE&apos;s are gone which were quite reproducible. I&apos;ll commit the patch shortly. The test failures are not related. &lt;/p&gt;</comment>
                            <comment id="14954338" author="enis" created="Tue, 13 Oct 2015 04:06:12 +0000"  >&lt;p&gt;Committed to 0.98+. Thanks for the reviews. &lt;/p&gt;</comment>
                            <comment id="14954414" author="hudson" created="Tue, 13 Oct 2015 05:26:09 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.2-IT #203 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.2-IT/203/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.2-IT/203/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14501&quot; title=&quot;NPE in replication when HDFS transparent encryption is enabled.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14501&quot;&gt;&lt;del&gt;HBASE-14501&lt;/del&gt;&lt;/a&gt; NPE in replication with TDE (enis: rev b7b18e09f4f12b117d37b929127e8f52927b9d98)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/KeyValue.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/SecureWALCellCodec.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/KeyValueUtil.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSource.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/codec/CellCodec.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/codec/BaseDecoder.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14954438" author="hudson" created="Tue, 13 Oct 2015 05:51:20 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.0 #1078 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.0/1078/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.0/1078/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14501&quot; title=&quot;NPE in replication when HDFS transparent encryption is enabled.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14501&quot;&gt;&lt;del&gt;HBASE-14501&lt;/del&gt;&lt;/a&gt; NPE in replication with TDE (enis: rev 2c6cd83b8add75927e6b84ddc412753fa19ba2f4)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSource.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/KeyValueUtil.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/KeyValue.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/codec/CellCodec.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/codec/BaseDecoder.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/SecureWALCellCodec.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14954446" author="hudson" created="Tue, 13 Oct 2015 05:57:57 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.3-IT #229 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.3-IT/229/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.3-IT/229/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14501&quot; title=&quot;NPE in replication when HDFS transparent encryption is enabled.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14501&quot;&gt;&lt;del&gt;HBASE-14501&lt;/del&gt;&lt;/a&gt; NPE in replication with TDE (enis: rev bbbb52cfbf7ef05150431d00ee127eb45b545c28)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/KeyValue.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSource.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/SecureWALCellCodec.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/codec/BaseDecoder.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/codec/CellCodec.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/KeyValueUtil.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14954449" author="ashish singhi" created="Tue, 13 Oct 2015 05:59:56 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enis&quot; class=&quot;user-hover&quot; rel=&quot;enis&quot;&gt;Enis Soztutar&lt;/a&gt; I have one doubt regarding the change,&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
lastCell = cells.get(i);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Will the list of cells in a WALEdit  be in sorted order ? &lt;br/&gt;
If yes I will close &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14491&quot; title=&quot;ReplicationSource#countDistinctRowKeys code logic is not correct&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14491&quot;&gt;&lt;del&gt;HBASE-14491&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14954515" author="hudson" created="Tue, 13 Oct 2015 07:00:14 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.1 #702 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.1/702/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.1/702/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14501&quot; title=&quot;NPE in replication when HDFS transparent encryption is enabled.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14501&quot;&gt;&lt;del&gt;HBASE-14501&lt;/del&gt;&lt;/a&gt; NPE in replication with TDE (enis: rev 55c2f132550ed1ccc4904211ac61fc6035367b24)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSource.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/KeyValueUtil.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/codec/CellCodec.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/SecureWALCellCodec.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/KeyValue.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/codec/BaseDecoder.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14954589" author="hudson" created="Tue, 13 Oct 2015 08:09:33 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.3 #256 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.3/256/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.3/256/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14501&quot; title=&quot;NPE in replication when HDFS transparent encryption is enabled.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14501&quot;&gt;&lt;del&gt;HBASE-14501&lt;/del&gt;&lt;/a&gt; NPE in replication with TDE (enis: rev bbbb52cfbf7ef05150431d00ee127eb45b545c28)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/KeyValueUtil.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/codec/CellCodec.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSource.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/KeyValue.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/SecureWALCellCodec.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/codec/BaseDecoder.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14954601" author="hudson" created="Tue, 13 Oct 2015 08:16:31 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.2 #244 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.2/244/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.2/244/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14501&quot; title=&quot;NPE in replication when HDFS transparent encryption is enabled.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14501&quot;&gt;&lt;del&gt;HBASE-14501&lt;/del&gt;&lt;/a&gt; NPE in replication with TDE (enis: rev b7b18e09f4f12b117d37b929127e8f52927b9d98)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/codec/BaseDecoder.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSource.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/codec/CellCodec.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/KeyValueUtil.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/SecureWALCellCodec.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/KeyValue.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14954606" author="hudson" created="Tue, 13 Oct 2015 08:19:26 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-TRUNK #6900 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/6900/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/6900/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14501&quot; title=&quot;NPE in replication when HDFS transparent encryption is enabled.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14501&quot;&gt;&lt;del&gt;HBASE-14501&lt;/del&gt;&lt;/a&gt; NPE in replication with TDE (enis: rev 2ff6d0fe4789857ab51685949711d755dedd459a)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSource.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/codec/BaseDecoder.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/KeyValueUtil.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/codec/CellCodec.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/KeyValue.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/SecureWALCellCodec.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14954638" author="hudson" created="Tue, 13 Oct 2015 08:48:37 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-0.98 #1153 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98/1153/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98/1153/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14501&quot; title=&quot;NPE in replication when HDFS transparent encryption is enabled.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14501&quot;&gt;&lt;del&gt;HBASE-14501&lt;/del&gt;&lt;/a&gt; NPE in replication with TDE (enis: rev c6608e652a118b1c5dc683e5e5b9694724e1d8f5)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/KeyValueUtil.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/codec/CellCodec.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/KeyValue.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSource.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/SecureWALCellCodec.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/codec/BaseDecoder.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14954780" author="hudson" created="Tue, 13 Oct 2015 11:05:26 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.98-on-Hadoop-1.1 #1105 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/1105/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/1105/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14501&quot; title=&quot;NPE in replication when HDFS transparent encryption is enabled.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14501&quot;&gt;&lt;del&gt;HBASE-14501&lt;/del&gt;&lt;/a&gt; NPE in replication with TDE (enis: rev c6608e652a118b1c5dc683e5e5b9694724e1d8f5)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSource.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/KeyValueUtil.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/codec/CellCodec.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/codec/BaseDecoder.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/KeyValue.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/SecureWALCellCodec.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14955413" author="enis" created="Tue, 13 Oct 2015 18:24:36 +0000"  >&lt;blockquote&gt;&lt;p&gt;Will the list of cells in a WALEdit be in sorted order ? If yes I will close &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14491&quot; title=&quot;ReplicationSource#countDistinctRowKeys code logic is not correct&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14491&quot;&gt;&lt;del&gt;HBASE-14491&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Thanks for the pointer. Let me check.&lt;/p&gt;</comment>
                            <comment id="15119474" author="ndimiduk" created="Wed, 27 Jan 2016 15:28:29 +0000"  >&lt;p&gt;Bulk closing 1.1.3 issues.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                            <outwardlinks description="incorporates">
                                        <issuelink>
            <issuekey id="12896353">HBASE-14491</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12917460">HBASE-14904</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12917424">PHOENIX-2477</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12764345" name="hbase-14501_v1.patch" size="9039" author="enis" created="Wed, 30 Sep 2015 00:01:05 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 28 Sep 2015 20:52:06 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            44 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2mdbb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>