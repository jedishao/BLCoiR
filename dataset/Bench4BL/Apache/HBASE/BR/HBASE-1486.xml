<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 02 19:48:01 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-1486/HBASE-1486.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-1486] BLOCKCACHE always on even when disabled</title>
                <link>https://issues.apache.org/jira/browse/HBASE-1486</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Comes from Billy Pearson up on list.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12427247">HBASE-1486</key>
            <summary>BLOCKCACHE always on even when disabled</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="larsgeorge">Lars George</assignee>
                                    <reporter username="stack">stack</reporter>
                        <labels>
                    </labels>
                <created>Fri, 5 Jun 2009 19:38:13 +0000</created>
                <updated>Sun, 13 Sep 2009 22:24:41 +0000</updated>
                            <resolved>Mon, 8 Jun 2009 01:48:11 +0000</resolved>
                                                    <fixVersion>0.20.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12716926" author="larsgeorge" created="Sat, 6 Jun 2009 22:50:48 +0000"  >&lt;p&gt;I am taking a stab at this. Maybe Billy can verify as well if this fixes the issue.&lt;/p&gt;

&lt;p&gt;The issue was that the isBlockCacheEnabled from the HColumnDefinition was &lt;b&gt;not&lt;/b&gt; handed to the Store and StoreFiles eventually. I added this to these two classes and when a block cache is asked for during the creation of a Reader it skips it when blockcache is set to false.&lt;/p&gt;</comment>
                            <comment id="12716997" author="larsgeorge" created="Sat, 6 Jun 2009 23:27:09 +0000"  >&lt;p&gt;Oops, sorry, my IDE missed a few spots. The ant build found them though. This second patch fixes all compile issues.&lt;/p&gt;

&lt;p&gt;But please note that now the TestStoreFile.java has the option to test with and without the block cache. I have set it to &quot;false&quot; but maybe the tests need to be run twice? Once with and once without block cache?&lt;/p&gt;</comment>
                            <comment id="12716999" author="ryanobjc" created="Sun, 7 Jun 2009 00:29:30 +0000"  >&lt;p&gt;the block cache family value should default to &apos;true&apos; or &apos;on&apos;.  Can you please make sure this is the case.  &lt;/p&gt;</comment>
                            <comment id="12717000" author="viper799" created="Sun, 7 Jun 2009 00:38:52 +0000"  >&lt;p&gt;when I create a new table and do not define block cache in the column it was getting set to true&lt;/p&gt;

&lt;p&gt;also same in meta&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
hbase(main):002:0&amp;gt; describe &apos;.META.&apos;
09/06/06 19:37:36 INFO zookeeper.ZooKeeperWrapper: Quorum servers: server-1:2181
09/06/06 19:37:37 DEBUG client.HConnectionManager$TableServers: Got ZooKeeper event, state: SyncConnected, type: None, path: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
09/06/06 19:37:37 DEBUG zookeeper.ZooKeeperWrapper: Read ZNode /hbase/master got 10.0.1.1:60000
DESCRIPTION                                                             ENABLED
09/06/06 19:37:37 DEBUG client.HConnectionManager$TableServers: Got ZooKeeper event, state: SyncConnected, type: None, path: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
09/06/06 19:37:37 DEBUG zookeeper.ZooKeeperWrapper: Read ZNode /hbase/root-region-server got 10.0.1.5:60020
09/06/06 19:37:37 DEBUG client.HConnectionManager$TableServers: Found ROOT at 10.0.1.5:60020
09/06/06 19:37:37 DEBUG client.HConnectionManager$TableServers: address: 10.0.1.8:60020, regioninfo: REGION =&amp;gt; {NAME =&amp;gt; &apos;.META.,,1&apos;, STARTKEY =&amp;gt; &apos;&apos;, ENDKEY =&amp;gt; &apos;&apos;, ENCODED =&amp;gt; 1028785192, TABLE =&amp;gt; {{NAME =&amp;gt; &apos;.META.&apos;, MEMCACHE_FLUSHSIZE =&amp;gt; &apos;16384&apos;, IS_META =&amp;gt; &apos;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&apos;, FAMILIES =&amp;gt; [{NAME =&amp;gt; &apos;historian&apos;, VERSIONS =&amp;gt; &apos;2147483647&apos;, COMPRESSION =&amp;gt; &apos;NONE&apos;, TTL =&amp;gt; &apos;604800&apos;, BLOCKSIZE =&amp;gt; &apos;8192&apos;, IN_MEMORY =&amp;gt; &apos;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&apos;, BLOCKCACHE =&amp;gt; &apos;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&apos;}, {NAME =&amp;gt; &apos;info&apos;, VERSIONS =&amp;gt; &apos;10&apos;, COMPRESSION =&amp;gt; &apos;NONE&apos;, TTL =&amp;gt; &apos;2147483647&apos;, BLOCKSIZE =&amp;gt; &apos;8192&apos;, IN_MEMORY =&amp;gt; &apos;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&apos;, BLOCKCACHE =&amp;gt; &apos;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&apos;}]}}
09/06/06 19:37:37 DEBUG zookeeper.ZooKeeperWrapper: Read ZNode /hbase/root-region-server got 10.0.1.5:60020
09/06/06 19:37:37 DEBUG client.HConnectionManager$TableServers: Found ROOT at 10.0.1.5:60020
 {NAME =&amp;gt; &apos;.META.&apos;, MEMCACHE_FLUSHSIZE =&amp;gt; &apos;16384&apos;, IS_META =&amp;gt; &apos;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&apos;, F &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
 AMILIES =&amp;gt; [{NAME =&amp;gt; &apos;historian&apos;, COMPRESSION =&amp;gt; &apos;NONE&apos;, VERSIONS =&amp;gt; &apos;
 2147483647&apos;, TTL =&amp;gt; &apos;604800&apos;, BLOCKSIZE =&amp;gt; &apos;8192&apos;, IN_MEMORY =&amp;gt; &apos;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
 &apos;, BLOCKCACHE =&amp;gt; &apos;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&apos;}, {NAME =&amp;gt; &apos;info&apos;, COMPRESSION =&amp;gt; &apos;NONE&apos;, VER
 SIONS =&amp;gt; &apos;10&apos;, TTL =&amp;gt; &apos;2147483647&apos;, BLOCKSIZE =&amp;gt; &apos;8192&apos;, IN_MEMORY =&amp;gt;
 &apos;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&apos;, BLOCKCACHE =&amp;gt; &apos;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&apos;}]}
1 row(s) in 0.2430 seconds

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12717001" author="viper799" created="Sun, 7 Jun 2009 00:39:57 +0000"  >&lt;p&gt;BLOCKCACHE =&amp;gt; &apos;true&apos; for info in meta&lt;br/&gt;
and&lt;br/&gt;
BLOCKCACHE =&amp;gt; &apos;false&apos; for historian&lt;/p&gt;</comment>
                            <comment id="12717002" author="viper799" created="Sun, 7 Jun 2009 01:04:02 +0000"  >&lt;p&gt;Seams to be working &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1304&quot; title=&quot;New client server implementation of how gets and puts are handled. &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1304&quot;&gt;&lt;del&gt;HBASE-1304&lt;/del&gt;&lt;/a&gt; killed my ability to import until its side effects get resolved I put some data and flushed via shell then confirmed that the region server was using 0 blocks of block cache where the region was stored.&lt;br/&gt;
so +1&lt;/p&gt;</comment>
                            <comment id="12717016" author="larsgeorge" created="Sun, 7 Jun 2009 08:08:08 +0000"  >&lt;p&gt;OK, as per the discussion, I have &lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;changed HColumnDefinition to have the block cache set to &lt;b&gt;true&lt;/b&gt; by default&lt;/li&gt;
	&lt;li&gt;changed the TestStoreFile to test &lt;b&gt;with&lt;/b&gt; block cache on as it was the case originally (since it was always on)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Also, I checked the HTableDescriptor and found that for&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;ROOT block cache is &lt;b&gt;true&lt;/b&gt;&lt;/li&gt;
	&lt;li&gt;.META. block cache is &lt;b&gt;true&lt;/b&gt;&lt;/li&gt;
	&lt;li&gt;Historian block cache is &lt;b&gt;false&lt;/b&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Are these still OK. Sounds to me, not sure about the Historian, but is seems to be set to false on purpose?&lt;/p&gt;
</comment>
                            <comment id="12717113" author="stack" created="Mon, 8 Jun 2009 01:48:11 +0000"  >&lt;p&gt;Committed.  Thanks for the patch Lars.&lt;/p&gt;

&lt;p&gt;In 0.19.x, we had block cache on for catalog tables as default (off for historian).  We wanted to have block cache on for all tables by default for same reasons as I see being put forward up on #hbase but in 0.19, block cache could cause us to OOME so we were selective &amp;#8211; the catalog tables only.&lt;/p&gt;

&lt;p&gt;I added note that migration needs to enable block cache on tables or at least recommend that old tables have it manually enabled.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12410075" name="1486-2.patch" size="7338" author="larsgeorge" created="Sat, 6 Jun 2009 23:27:09 +0000"/>
                            <attachment id="12410079" name="1486-3.patch" size="7920" author="larsgeorge" created="Sun, 7 Jun 2009 08:08:08 +0000"/>
                            <attachment id="12410074" name="1486.patch" size="3193" author="larsgeorge" created="Sat, 6 Jun 2009 22:50:48 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 6 Jun 2009 22:50:48 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>25782</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 26 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hdjb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>99455</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>