<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 02 20:19:15 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-1091/HBASE-1091.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-1091] shell tools -&gt; close_region does not work for regions that did not deploy properly on startup</title>
                <link>https://issues.apache.org/jira/browse/HBASE-1091</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;2008-12-28 16:14:32,292 INFO org.apache.hadoop.hbase.master.HMaster: Marking result_domain,,1230404458436 as closed on 10.30.94.48:60020; cleaning SERVER + STARTCODE; master will tell regionserver to close region on next heartbeat&lt;br/&gt;
2008-12-28 16:14:32,293 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server handler 4 on 60000, call modifyTable([B@64c6e290, 4, [Lorg.apache.hadoop.io.Writable;@3d448fa0) from 10.30.94.51:55082: error: java.io.IOException: java.lang.IllegalStateException: Cannot transition to closing from any other state. Region: result_domain,,1230404458436&lt;br/&gt;
java.io.IOException: java.lang.IllegalStateException: Cannot transition to closing from any other state. Region: result_domain,,1230404458436&lt;br/&gt;
        at org.apache.hadoop.hbase.master.RegionManager.setClosing(RegionManager.java:797)&lt;br/&gt;
        at org.apache.hadoop.hbase.master.HMaster.modifyTable(HMaster.java:836)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
        at org.apache.hadoop.hbase.ipc.HBaseRPC$Server.call(HBaseRPC.java:632)&lt;br/&gt;
        at org.apache.hadoop.hbase.ipc.HBaseServer$Handler.run(HBaseServer.java:894)&lt;/p&gt;

&lt;p&gt;Clearing &apos;info:server&apos; and &apos;info:serverstartcode&apos; for the affected region has no effect either.&lt;/p&gt;

&lt;p&gt;The region in question did not properly deploy:&lt;/p&gt;

&lt;p&gt;2008-12-28 15:58:44,857 INFO org.apache.hadoop.hbase.master.ServerManager: Received MSG_REPORT_CLOSE: result_domain,,1230404458436: java.io.IOException: Could not obtain block: blk_-1589286342406311350_4245713 file=/data/hbase/result_domain/43721464/ErrorResult/mapfiles/284087383342325737/index&lt;br/&gt;
        at org.apache.hadoop.dfs.DFSClient$DFSInputStream.chooseDataNode(DFSClient.java:1472)&lt;br/&gt;
        at org.apache.hadoop.dfs.DFSClient$DFSInputStream.blockSeekTo(DFSClient.java:1322)&lt;br/&gt;
        at org.apache.hadoop.dfs.DFSClient$DFSInputStream.read(DFSClient.java:1427)&lt;br/&gt;
        at java.io.DataInputStream.readFully(DataInputStream.java:178)&lt;br/&gt;
        at java.io.DataInputStream.readFully(DataInputStream.java:152)&lt;br/&gt;
        at org.apache.hadoop.io.SequenceFile$Reader.init(SequenceFile.java:1453)&lt;br/&gt;
        at org.apache.hadoop.io.SequenceFile$Reader.&amp;lt;init&amp;gt;(SequenceFile.java:1431)&lt;br/&gt;
        at org.apache.hadoop.io.SequenceFile$Reader.&amp;lt;init&amp;gt;(SequenceFile.java:1420)&lt;br/&gt;
        at org.apache.hadoop.io.SequenceFile$Reader.&amp;lt;init&amp;gt;(SequenceFile.java:1415)&lt;br/&gt;
        at org.apache.hadoop.io.MapFile$Reader.open(MapFile.java:292)&lt;br/&gt;
        at org.apache.hadoop.hbase.io.HBaseMapFile$HBaseReader.&amp;lt;init&amp;gt;(HBaseMapFile.java:81)&lt;br/&gt;
        at org.apache.hadoop.hbase.io.BloomFilterMapFile$Reader.&amp;lt;init&amp;gt;(BloomFilterMapFile.java:66)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HStoreFile.getReader(HStoreFile.java:443)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HStore.setupReaders(HStore.java:254)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HStore.&amp;lt;init&amp;gt;(HStore.java:239)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HRegion.instantiateHStore(HRegion.java:1624)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HRegion.initialize(HRegion.java:270)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HRegionServer.instantiateRegion(HRegionServer.java:1360)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HRegionServer.openRegion(HRegionServer.java:1331)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HRegionServer$Worker.run(HRegionServer.java:1247)&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:619)&lt;br/&gt;
 from 10.30.94.34:60020&lt;/p&gt;

&lt;p&gt;I am trying to force a redeployment in an attempt to manually recover the region. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12411384">HBASE-1091</key>
            <summary>shell tools -&gt; close_region does not work for regions that did not deploy properly on startup</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stack">stack</assignee>
                                    <reporter username="apurtell">Andrew Purtell</reporter>
                        <labels>
                    </labels>
                <created>Sun, 28 Dec 2008 21:26:47 +0000</created>
                <updated>Sun, 13 Sep 2009 22:26:36 +0000</updated>
                            <resolved>Tue, 30 Dec 2008 07:03:26 +0000</resolved>
                                                    <fixVersion>0.19.0</fixVersion>
                                    <component>master</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12659474" author="apurtell" created="Sun, 28 Dec 2008 21:33:50 +0000"  >&lt;p&gt;After a full restart, the region in question deployed successfully, so it was a transient DFS problem only. Forcing the state transition and therefore triggering a redeployment would have successfully recovered the region, assuming restarting the DFS client did not also contribute to the successful deployment.  (See &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1084&quot; title=&quot;Reinitializable DFS client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1084&quot;&gt;&lt;del&gt;HBASE-1084&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;</comment>
                            <comment id="12659475" author="stack" created="Sun, 28 Dec 2008 21:46:37 +0000"  >&lt;p&gt;Bringing into 0.19.0 since the check frustrates new redeploy tool.  Maybe should be warning rather than a failure.&lt;/p&gt;</comment>
                            <comment id="12659478" author="apurtell" created="Sun, 28 Dec 2008 21:55:02 +0000"  >&lt;p&gt;Having the assertion in place to protect against invalid transitions is good IMHO. The admin region tools should be able to override however. &lt;/p&gt;</comment>
                            <comment id="12659754" author="stack" created="Tue, 30 Dec 2008 07:03:15 +0000"  >&lt;p&gt;Add by-pass of state transition check when invocation from shell.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12396890" name="1091.patch" size="4622" author="stack" created="Tue, 30 Dec 2008 07:03:15 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 28 Dec 2008 21:46:37 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>25566</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 49 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hb9r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>99088</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>