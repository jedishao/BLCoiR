<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sat Dec 03 16:53:28 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-1916/HBASE-1916.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-1916] FindBugs and javac warnings cleanup</title>
                <link>https://issues.apache.org/jira/browse/HBASE-1916</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;FindBugs was run on the 0.20 branch code recently and produced ~400 warnings, which were presented to me in a meeting. So I installed the Eclipse FindBugs plugin, analyzed both trunk and 0.20 branch, and systematically went through and addressed the warnings. About a quarter of them were incorrect (spurious, pointless, etc.). Of the remainder, most were stylistic. A few were real bugs. Attached are big patches against trunk and branch which roll up all of the changes. They are too numerous to separate out and mostly do not warrant special attention. &lt;/p&gt;

&lt;p&gt;All tests pass with patches applied.&lt;/p&gt;

&lt;p&gt;There are a few real bugs fixed:&lt;/p&gt;

&lt;p&gt;Would-be null dereference (fall through from null test):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Index: src/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java
===================================================================
@@ -1222,12 +1222,13 @@
     &lt;span class=&quot;code-comment&quot;&gt;// queue at time iterator was taken out.  Apparently goes from oldest.
&lt;/span&gt;     &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (ToDoEntry e: &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.toDo) {
       HMsg msg = e.msg;
-      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (msg == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
+      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (msg != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
+        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (msg.isType(HMsg.Type.MSG_REGION_OPEN)) {
+          addProcessingMessage(msg.getRegionInfo());
+        }
+      } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
         LOG.warn(&lt;span class=&quot;code-quote&quot;&gt;&quot;Message is empty: &quot;&lt;/span&gt; + e);
       }
-      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (e.msg.isType(HMsg.Type.MSG_REGION_OPEN)) {
-        addProcessingMessage(e.msg.getRegionInfo());
-      }
     }
   }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Invalid attempt to remove scanner from string keyed map using an integer key instead of scanner name:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Index: src/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java
===================================================================
@@ -1900,7 +1902,8 @@
         &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;: results.toArray(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Result[0]);
     } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Throwable t) {
       &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (t &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; NotServingRegionException) {
-        &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.scanners.remove(scannerId);
+        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; scannerName = &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;.valueOf(scannerId);
+        &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.scanners.remove(scannerName);
       }
       &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; convertThrowableToIOE(cleanup(t));
     }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Invalid equality test:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Index: src/java/org/apache/hadoop/hbase/util/FSUtils.java
===================================================================
@@ -301,11 +301,15 @@
       &lt;span class=&quot;code-comment&quot;&gt;// should be regions.  Then in each region, should only be family
&lt;/span&gt;       &lt;span class=&quot;code-comment&quot;&gt;// directories.  Under each of these, should be one file only.
&lt;/span&gt;       Path d = tableDirs[i].getPath();
-      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (d.getName().equals(HConstants.HREGION_LOGDIR_NAME)) &lt;span class=&quot;code-keyword&quot;&gt;continue&lt;/span&gt;;
+      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (d.getName().equals(HConstants.HREGION_LOGDIR_NAME)) {
+        &lt;span class=&quot;code-keyword&quot;&gt;continue&lt;/span&gt;;
+      }
       FileStatus [] regionDirs = fs.listStatus(d, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; DirFilter(fs));
       &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; j = 0; j &amp;lt; regionDirs.length; j++) {
         Path dd = regionDirs[j].getPath();
-        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (dd.equals(HConstants.HREGION_COMPACTIONDIR_NAME)) &lt;span class=&quot;code-keyword&quot;&gt;continue&lt;/span&gt;;
+        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (dd.getName().equals(HConstants.HREGION_COMPACTIONDIR_NAME)) {
+          &lt;span class=&quot;code-keyword&quot;&gt;continue&lt;/span&gt;;
+        }
         &lt;span class=&quot;code-comment&quot;&gt;// Else its a region name.  Now look in region &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; families.
&lt;/span&gt;         FileStatus [] familyDirs = fs.listStatus(dd, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; DirFilter(fs));
         &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; k = 0; k &amp;lt; familyDirs.length; k++) {
@@ -360,11 +364,15 @@
       &lt;span class=&quot;code-comment&quot;&gt;// only be family directories.  Under each of these, should be a mapfile
&lt;/span&gt;       &lt;span class=&quot;code-comment&quot;&gt;// and info directory and in these only one file.
&lt;/span&gt;       Path d = tableDirs[i].getPath();
-      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (d.getName().equals(HConstants.HREGION_LOGDIR_NAME)) &lt;span class=&quot;code-keyword&quot;&gt;continue&lt;/span&gt;;
+      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (d.getName().equals(HConstants.HREGION_LOGDIR_NAME)) {
+        &lt;span class=&quot;code-keyword&quot;&gt;continue&lt;/span&gt;;
+      }
       FileStatus [] regionDirs = fs.listStatus(d, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; DirFilter(fs));
       &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; j = 0; j &amp;lt; regionDirs.length; j++) {
         Path dd = regionDirs[j].getPath();
-        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (dd.equals(HConstants.HREGION_COMPACTIONDIR_NAME)) &lt;span class=&quot;code-keyword&quot;&gt;continue&lt;/span&gt;;
+        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (dd.getName().equals(HConstants.HREGION_COMPACTIONDIR_NAME)) {
+          &lt;span class=&quot;code-keyword&quot;&gt;continue&lt;/span&gt;;
+        }
         &lt;span class=&quot;code-comment&quot;&gt;// Else its a region name.  Now look in region &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; families.
&lt;/span&gt;         FileStatus [] familyDirs = fs.listStatus(dd, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; DirFilter(fs));
         &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; k = 0; k &amp;lt; familyDirs.length; k++) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Minor race:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Index: src/java/org/apache/hadoop/hbase/client/HConnectionManager.java
===================================================================
@@ -197,7 +197,7 @@
      * Get &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; watcher&apos;s ZKW, instanciate it &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; necessary.
      * @&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; ZKW
      */
-    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; ZooKeeperWrapper getZooKeeperWrapper() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
+    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;synchronized&lt;/span&gt; ZooKeeperWrapper getZooKeeperWrapper() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
       &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(zooKeeperWrapper == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
         zooKeeperWrapper = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ZooKeeperWrapper(conf, &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;);
       } 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Sleep within lock. Rewritten to sleep using lock instead. Also, notify when sleep is no longer necessary. Saves 20-30 seconds in TestZooKeeper:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Index: src/java/org/apache/hadoop/hbase/client/HConnectionManager.java
===================================================================
@@ -323,6 +323,7 @@
             
             &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (tryMaster.isMasterRunning()) {
               &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.master = tryMaster;
+              &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.masterLock.notifyAll();
               &lt;span class=&quot;code-keyword&quot;&gt;break&lt;/span&gt;;
             }
             
@@ -340,7 +341,7 @@
 
           &lt;span class=&quot;code-comment&quot;&gt;// Cannot connect to master or it is not running. Sleep &amp;amp; retry
&lt;/span&gt;           &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
-            &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.sleep(getPauseTime(tries));
+            &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.masterLock.wait(getPauseTime(tries));
           } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (InterruptedException e) {
             &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;continue&lt;/span&gt;
&lt;/span&gt;           }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&apos;column&apos; and &apos;newColumn&apos; are not guaranteed to not be null along some code paths. Protect against possible null dereference and make the static tool happy.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Index: src/java/org/apache/hadoop/hbase/regionserver/WildcardColumnTracker.java
===================================================================
@@ -165,74 +165,80 @@
       &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.newColumn = newColumns.get(newIndex);
       &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; MatchCode.INCLUDE;
     }
-    
-    
-    &lt;span class=&quot;code-comment&quot;&gt;// There are &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; and old, figure which to check first
&lt;/span&gt;-    &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; ret = Bytes.compareTo(column.getBuffer(), column.getOffset(), 
+
+    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (column != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; newColumn != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
+      &lt;span class=&quot;code-comment&quot;&gt;// There are &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; and old, figure which to check first
&lt;/span&gt;+      &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; ret = Bytes.compareTo(column.getBuffer(), column.getOffset(), 
         column.getLength(), newColumn.getBuffer(), newColumn.getOffset(), 
         newColumn.getLength());
         
-    &lt;span class=&quot;code-comment&quot;&gt;// Old is smaller than &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt;, compare against old
&lt;/span&gt;-    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(ret &amp;lt;= -1) {
-      ret = Bytes.compareTo(column.getBuffer(), column.getOffset(), 
+      &lt;span class=&quot;code-comment&quot;&gt;// Old is smaller than &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt;, compare against old
&lt;/span&gt;+      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(ret &amp;lt;= -1) {
+        ret = Bytes.compareTo(column.getBuffer(), column.getOffset(), 
           column.getLength(), bytes, offset, length);
       
+        &lt;span class=&quot;code-comment&quot;&gt;// Same column
&lt;/span&gt;+        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(ret == 0) {
+          &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(column.increment() &amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.maxVersions) {
+            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; MatchCode.SKIP;
+          }
+          &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; MatchCode.INCLUDE;
+        }
+      
+        &lt;span class=&quot;code-comment&quot;&gt;// Specified column is bigger than current column
&lt;/span&gt;+        &lt;span class=&quot;code-comment&quot;&gt;// Move down current column and check again
&lt;/span&gt;+        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(ret &amp;lt;= -1) {
+          &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(++index == columns.size()) {
+            &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.column = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
+          } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
+            &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.column = columns.get(index);
+          }
+          &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; checkColumn(bytes, offset, length);
+        }
+      
+        &lt;span class=&quot;code-comment&quot;&gt;// ret &amp;gt;= 1
&lt;/span&gt;+        &lt;span class=&quot;code-comment&quot;&gt;// Specified column is smaller than current column
&lt;/span&gt;+        &lt;span class=&quot;code-comment&quot;&gt;// Nothing to match against, add to &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; and include
&lt;/span&gt;+        newColumns.add(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ColumnCount(bytes, offset, length, 1));
+        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; MatchCode.INCLUDE;
+      }
+    }
+
+    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (newColumn != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
+      &lt;span class=&quot;code-comment&quot;&gt;// Cannot be equal, so ret &amp;gt;= 1
&lt;/span&gt;+      &lt;span class=&quot;code-comment&quot;&gt;// New is smaller than old, compare against &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt;
&lt;/span&gt;+      &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; ret = Bytes.compareTo(newColumn.getBuffer(), newColumn.getOffset(), 
+        newColumn.getLength(), bytes, offset, length);
+    
       &lt;span class=&quot;code-comment&quot;&gt;// Same column
&lt;/span&gt;       &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(ret == 0) {
-        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(column.increment() &amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.maxVersions) {
+        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(newColumn.increment() &amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.maxVersions) {
           &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; MatchCode.SKIP;
         }
         &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; MatchCode.INCLUDE;
       }
-      
+    
       &lt;span class=&quot;code-comment&quot;&gt;// Specified column is bigger than current column
&lt;/span&gt;       &lt;span class=&quot;code-comment&quot;&gt;// Move down current column and check again
&lt;/span&gt;       &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(ret &amp;lt;= -1) {
-        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(++index == columns.size()) {
-          &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.column = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
+        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(++newIndex == newColumns.size()) {
+          &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.newColumn = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
         } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
-          &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.column = columns.get(index);
+          &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.newColumn = newColumns.get(newIndex);
         }
         &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; checkColumn(bytes, offset, length);
       }
-      
+    
       &lt;span class=&quot;code-comment&quot;&gt;// ret &amp;gt;= 1
&lt;/span&gt;       &lt;span class=&quot;code-comment&quot;&gt;// Specified column is smaller than current column
&lt;/span&gt;       &lt;span class=&quot;code-comment&quot;&gt;// Nothing to match against, add to &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; and include
&lt;/span&gt;       newColumns.add(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ColumnCount(bytes, offset, length, 1));
       &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; MatchCode.INCLUDE;
     }
-    
-    &lt;span class=&quot;code-comment&quot;&gt;// Cannot be equal, so ret &amp;gt;= 1
&lt;/span&gt;-    &lt;span class=&quot;code-comment&quot;&gt;// New is smaller than old, compare against &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt;
&lt;/span&gt;-    
-    ret = Bytes.compareTo(newColumn.getBuffer(), newColumn.getOffset(), 
-        newColumn.getLength(), bytes, offset, length);
-    
-    &lt;span class=&quot;code-comment&quot;&gt;// Same column
&lt;/span&gt;-    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(ret == 0) {
-      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(newColumn.increment() &amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.maxVersions) {
-        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; MatchCode.SKIP;
-      }
-      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; MatchCode.INCLUDE;
-    }
-    
-    &lt;span class=&quot;code-comment&quot;&gt;// Specified column is bigger than current column
&lt;/span&gt;-    &lt;span class=&quot;code-comment&quot;&gt;// Move down current column and check again
&lt;/span&gt;-    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(ret &amp;lt;= -1) {
-      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(++newIndex == newColumns.size()) {
-        &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.newColumn = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
-      } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
-        &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.newColumn = newColumns.get(newIndex);
-      }
-      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; checkColumn(bytes, offset, length);
-    }
-    
-    &lt;span class=&quot;code-comment&quot;&gt;// ret &amp;gt;= 1
&lt;/span&gt;-    &lt;span class=&quot;code-comment&quot;&gt;// Specified column is smaller than current column
&lt;/span&gt;-    &lt;span class=&quot;code-comment&quot;&gt;// Nothing to match against, add to &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; and include
&lt;/span&gt;+
+    &lt;span class=&quot;code-comment&quot;&gt;// No match happened, add to &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; and include
&lt;/span&gt;     newColumns.add(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ColumnCount(bytes, offset, length, 1));
-    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; MatchCode.INCLUDE;
+    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; MatchCode.INCLUDE;    
   }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12438392">HBASE-1916</key>
            <summary>FindBugs and javac warnings cleanup</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="apurtell">Andrew Purtell</assignee>
                                    <reporter username="apurtell">Andrew Purtell</reporter>
                        <labels>
                    </labels>
                <created>Sun, 18 Oct 2009 14:51:44 +0000</created>
                <updated>Fri, 12 Oct 2012 06:13:24 +0000</updated>
                            <resolved>Tue, 20 Oct 2009 14:07:27 +0000</resolved>
                                                    <fixVersion>0.20.2</fixVersion>
                    <fixVersion>0.90.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12767148" author="stack" created="Sun, 18 Oct 2009 22:26:46 +0000"  >&lt;p&gt;+1 on applying to trunk.&lt;/p&gt;

&lt;p&gt;Do you think we should apply this on the branch Andrew?  While each change in it self is small risk, the very volume might be risky.&lt;/p&gt;</comment>
                            <comment id="12767175" author="apurtell" created="Mon, 19 Oct 2009 00:38:52 +0000"  >&lt;p&gt;Committed to trunk.&lt;/p&gt;

&lt;p&gt;There are some changes that are more than cosmetic or warnings fixes which should go in on branch. The volume of these is lower and the patch is manageable for review. Attached as &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1916&quot; title=&quot;FindBugs and javac warnings cleanup&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1916&quot;&gt;&lt;del&gt;HBASE-1916&lt;/del&gt;&lt;/a&gt;-branch-shouldfix.patch. &lt;/p&gt;</comment>
                            <comment id="12767182" author="ryanobjc" created="Mon, 19 Oct 2009 01:01:01 +0000"  >&lt;p&gt;i wanted to code review this before it went in. lots of changes to fairly core code, and we cannot rely on the unit tests to protect us.&lt;/p&gt;</comment>
                            <comment id="12767185" author="ryanobjc" created="Mon, 19 Oct 2009 01:15:39 +0000"  >&lt;p&gt;Btw you are aware there are edits to thrift-generated code, right?  Also needlessly turning objects into &apos;serializable&apos;, etc, is not making me happy here.&lt;/p&gt;
</comment>
                            <comment id="12767191" author="apurtell" created="Mon, 19 Oct 2009 01:44:22 +0000"  >&lt;p&gt;Part of this was about reducing a raft of javac warnings and FindBugs warnings to find real problems. Reducing the volume of warnings was also a goal. So I tried to set the bar just above useless/pointless. Doing that is really rote and time consuming so I did it in a systematic manner without respect to generated code or otherwise, so in some cases maybe the result drops below the bar, but harmlessly (removed useless includes, etc.). &lt;/p&gt;

&lt;p&gt;Regarding Thrift, actually the way the generated code boxed primitives was lower performing than the changes that went in. On the other hand, modifying generated code has only a temporary result. I&apos;d like to see Thrift come out of core so all of the warnings noise it produces will come out also. &lt;/p&gt;

&lt;p&gt;&apos;Serializable&apos; is just an interface change with no runtime impact as I understand. Correct me if I&apos;m wrong. So, these changes contribute to a reduction in warnings without any harm.&lt;/p&gt;</comment>
                            <comment id="12767194" author="apurtell" created="Mon, 19 Oct 2009 01:52:58 +0000"  >&lt;p&gt;Also for the record in my opinion with the exception of the changes called out in the &quot;shouldfix&quot; patch &amp;#8211; applicable equally to trunk and branch &amp;#8211; there&apos;s minimal merit to the changes either way. For me this issue, and maybe follow up issues of its kind, are evidence I can point to whenever I hear &quot;but, your code is full of bugs.&quot; No, they are warnings, and they have been reviewed and in some cases addressed.&lt;/p&gt;</comment>
                            <comment id="12767197" author="ryanobjc" created="Mon, 19 Oct 2009 02:30:09 +0000"  >&lt;p&gt;I think there is harm in incorrectly suggesting that those classes are &apos;serialization&apos; and that people should be serializing them.   Considering we are not using that mechanism in our code,perhaps it would be better to remove all Serialization references instead? I dont like cargo cult programming.&lt;/p&gt;</comment>
                            <comment id="12767199" author="apurtell" created="Mon, 19 Oct 2009 02:46:30 +0000"  >&lt;p&gt;Sounds good to me. I backed out the &apos;Serializable&apos; hunks as r826580.&lt;/p&gt;</comment>
                            <comment id="12767203" author="stack" created="Mon, 19 Oct 2009 03:51:21 +0000"  >&lt;p&gt;Yeah, Serializable is just a marker interface but we don&apos;t do any java serializing so thanks for backing it out.&lt;/p&gt;</comment>
                            <comment id="12767204" author="stack" created="Mon, 19 Oct 2009 03:57:37 +0000"  >&lt;p&gt;I took a look at the short patch for branch.  +1 on commit if all tests pass.&lt;/p&gt;</comment>
                            <comment id="12767224" author="apurtell" created="Mon, 19 Oct 2009 06:32:54 +0000"  >&lt;p&gt;Not all tests on branch succeed currently. See &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1917&quot; title=&quot;TestScanner.testFilters failing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1917&quot;&gt;&lt;del&gt;HBASE-1917&lt;/del&gt;&lt;/a&gt;. Holding off on committing this to branch until all tests are working again.&lt;/p&gt;</comment>
                            <comment id="12767815" author="apurtell" created="Tue, 20 Oct 2009 14:07:27 +0000"  >&lt;p&gt;Committed short patch to branch. All tests pass locally.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12422515" name="HBASE-1916-branch-shouldfix.patch" size="26153" author="apurtell" created="Mon, 19 Oct 2009 00:38:52 +0000"/>
                            <attachment id="12422483" name="omnibus-cleanup-branch.patch" size="231471" author="apurtell" created="Sun, 18 Oct 2009 14:52:20 +0000"/>
                            <attachment id="12422482" name="omnibus-cleanup-trunk.patch" size="178407" author="apurtell" created="Sun, 18 Oct 2009 14:52:20 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 18 Oct 2009 22:26:46 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>26058</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 7 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08s2v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>49149</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>