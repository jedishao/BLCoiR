<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 02 20:07:28 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-1101/HBASE-1101.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-1101] NPE in HConnectionManager$TableServers.processBatchOfRows</title>
                <link>https://issues.apache.org/jira/browse/HBASE-1101</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Had DFS errors take down a region server. Looks like a full restart may be necessary because errors on the region continue. Clients attempting to store to the region get a NPE in HConnectionManager$TableServers.processBatchOfRows.&lt;/p&gt;

&lt;p&gt;Caused by: java.lang.NullPointerException&lt;br/&gt;
	at org.apache.hadoop.hbase.client.HConnectionManager$TableServers.processBatchOfRows(HConnectionManager.java:911)&lt;br/&gt;
	at org.apache.hadoop.hbase.client.HTable.flushCommits(HTable.java:1267)&lt;br/&gt;
	at org.apache.hadoop.hbase.client.HTable.commit(HTable.java:1238)&lt;br/&gt;
	at org.apache.hadoop.hbase.client.HTable.commit(HTable.java:1218)&lt;br/&gt;
	at net.iridiant.content.Content.store(Unknown Source)&lt;br/&gt;
	at net.iridiant.content.Content.store(Unknown Source)&lt;br/&gt;
	... 6 more&lt;/p&gt;</description>
                <environment></environment>
        <key id="12411471">HBASE-1101</key>
            <summary>NPE in HConnectionManager$TableServers.processBatchOfRows</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="apurtell">Andrew Purtell</assignee>
                                    <reporter username="apurtell">Andrew Purtell</reporter>
                        <labels>
                    </labels>
                <created>Tue, 30 Dec 2008 15:06:31 +0000</created>
                <updated>Sun, 13 Sep 2009 22:26:36 +0000</updated>
                            <resolved>Tue, 6 Jan 2009 03:24:19 +0000</resolved>
                                                    <fixVersion>0.19.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12660029" author="stack" created="Wed, 31 Dec 2008 06:46:09 +0000"  >&lt;p&gt;Saw this myself in some bulk upload testing this evening:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
08/12/31 02:14:18 DEBUG client.HConnectionManager$TableServers: Cache hit in table locations &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; row &amp;lt;0000515246&amp;gt; and tableName TestTable: location server 208.76.44.141:60020, location region name TestTable,0000515246,1230688952892
08/12/31 02:14:41 INFO hbase.PerformanceEvaluation: client-0 0/524285/1048576
Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;0&quot;&lt;/span&gt; java.lang.NullPointerException
        at org.apache.hadoop.hbase.client.HConnectionManager$TableServers.processBatchOfRows(HConnectionManager.java:919)
        at org.apache.hadoop.hbase.client.HTable.flushCommits(HTable.java:1267)
        at org.apache.hadoop.hbase.client.HTable.commit(HTable.java:1238)
        at org.apache.hadoop.hbase.client.HTable.commit(HTable.java:1218)
        at org.apache.hadoop.hbase.PerformanceEvaluation$SequentialWriteTest.testRow(PerformanceEvaluation.java:515)
        at org.apache.hadoop.hbase.PerformanceEvaluation$Test.test(PerformanceEvaluation.java:386)
        at org.apache.hadoop.hbase.PerformanceEvaluation.runOneClient(PerformanceEvaluation.java:583)
        at org.apache.hadoop.hbase.PerformanceEvaluation$1.run(PerformanceEvaluation.java:242)
Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;1&quot;&lt;/span&gt; java.lang.NullPointerException
        at org.apache.hadoop.hbase.client.HConnectionManager$TableServers.processBatchOfRows(HConnectionManager.java:919)
        at org.apache.hadoop.hbase.client.HTable.flushCommits(HTable.java:1267)
        at org.apache.hadoop.hbase.client.HTable.commit(HTable.java:1238)
        at org.apache.hadoop.hbase.client.HTable.commit(HTable.java:1218)
        at org.apache.hadoop.hbase.PerformanceEvaluation$SequentialWriteTest.testRow(PerformanceEvaluation.java:515)
        at org.apache.hadoop.hbase.PerformanceEvaluation$Test.test(PerformanceEvaluation.java:386)
        at org.apache.hadoop.hbase.PerformanceEvaluation.runOneClient(PerformanceEvaluation.java:583)
        at org.apache.hadoop.hbase.PerformanceEvaluation$1.run(PerformanceEvaluation.java:242)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12660030" author="stack" created="Wed, 31 Dec 2008 06:47:12 +0000"  >&lt;p&gt;This seems &apos;new&apos;.  My uploading broke.  Don&apos;t know yet if this is cause or symptom.&lt;/p&gt;</comment>
                            <comment id="12660164" author="apurtell" created="Wed, 31 Dec 2008 23:37:31 +0000"  >&lt;p&gt;Got this with HBase trunk on Hadoop 0.19.0:&lt;/p&gt;

&lt;p&gt;Dec 31, 2008 11:35:29 PM net.iridiant.heritrix.writer.HBaseWriterProcessor innerProcessResult&lt;br/&gt;
SEVERE: Failed write of Record: &lt;a href=&quot;http://www.tianshui.net.cn/Files/200810/122.jpg&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.tianshui.net.cn/Files/200810/122.jpg&lt;/a&gt; (in thread &apos;ToeThread #28: &lt;a href=&quot;http://www.tianshui.net.cn/Files/200810/122.jpg&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.tianshui.net.cn/Files/200810/122.jpg&lt;/a&gt;&apos;; in processor &apos;Archiver&apos;)&lt;br/&gt;
java.io.IOException: java.lang.reflect.UndeclaredThrowableException&lt;br/&gt;
	at net.iridiant.heritrix.writer.HBaseWriter.write(Unknown Source)&lt;br/&gt;
	at net.iridiant.heritrix.writer.HBaseWriterProcessor.write(Unknown Source)&lt;br/&gt;
	at net.iridiant.heritrix.writer.HBaseWriterProcessor.innerProcessResult(Unknown Source)&lt;br/&gt;
	at org.archive.modules.Processor.process(Processor.java:123)&lt;br/&gt;
	at org.archive.crawler.framework.ToeThread.processCrawlUri(ToeThread.java:310)&lt;br/&gt;
	at org.archive.crawler.framework.ToeThread.run(ToeThread.java:157)&lt;br/&gt;
Caused by: java.lang.reflect.UndeclaredThrowableException&lt;br/&gt;
	at $Proxy12.getRegionInfo(Unknown Source)&lt;br/&gt;
	at org.apache.hadoop.hbase.client.HConnectionManager$TableServers.locateRootRegion(HConnectionManager.java:798)&lt;br/&gt;
	at org.apache.hadoop.hbase.client.HConnectionManager$TableServers.locateRegion(HConnectionManager.java:448)&lt;br/&gt;
	at org.apache.hadoop.hbase.client.HConnectionManager$TableServers.locateRegion(HConnectionManager.java:423)&lt;br/&gt;
	at org.apache.hadoop.hbase.client.HConnectionManager$TableServers.locateRegionInMeta(HConnectionManager.java:500)&lt;br/&gt;
	at org.apache.hadoop.hbase.client.HConnectionManager$TableServers.locateRegion(HConnectionManager.java:458)&lt;br/&gt;
	at org.apache.hadoop.hbase.client.HConnectionManager$TableServers.locateRegion(HConnectionManager.java:423)&lt;br/&gt;
	at org.apache.hadoop.hbase.client.HConnectionManager$TableServers.locateRegionInMeta(HConnectionManager.java:500)&lt;br/&gt;
	at org.apache.hadoop.hbase.client.HConnectionManager$TableServers.locateRegion(HConnectionManager.java:462)&lt;br/&gt;
	at org.apache.hadoop.hbase.client.HConnectionManager$TableServers.relocateRegion(HConnectionManager.java:430)&lt;br/&gt;
	at org.apache.hadoop.hbase.client.HConnectionManager$TableServers.getRegionLocation(HConnectionManager.java:289)&lt;br/&gt;
	at org.apache.hadoop.hbase.client.HConnectionManager$TableServers.processBatchOfRows(HConnectionManager.java:947)&lt;br/&gt;
	at org.apache.hadoop.hbase.client.HTable.flushCommits(HTable.java:1267)&lt;br/&gt;
	at org.apache.hadoop.hbase.client.HTable.commit(HTable.java:1238)&lt;br/&gt;
	at org.apache.hadoop.hbase.client.HTable.commit(HTable.java:1218)&lt;br/&gt;
	at net.iridiant.content.Content.store(Unknown Source)&lt;br/&gt;
	at net.iridiant.content.Content.store(Unknown Source)&lt;br/&gt;
	... 6 more&lt;br/&gt;
Caused by: org.apache.hadoop.ipc.RemoteException: java.io.IOException: java.lang.NullPointerException&lt;/p&gt;

&lt;p&gt;	at org.apache.hadoop.hbase.ipc.HBaseClient.call(HBaseClient.java:701)&lt;br/&gt;
	at org.apache.hadoop.hbase.ipc.HBaseRPC$Invoker.invoke(HBaseRPC.java:321)&lt;br/&gt;
	... 23 more&lt;/p&gt;</comment>
                            <comment id="12660170" author="apurtell" created="Thu, 1 Jan 2009 01:59:12 +0000"  >&lt;p&gt;Patch 1101-1 guards in processBatchOfRows against regions that temporarily go missing, perhaps while in transition states. Uses a retry strategy. Will collect up the throwables and throw them all as a RetriesExceededException eventually. Testing this patch on the cluster now.&lt;/p&gt;</comment>
                            <comment id="12660179" author="apurtell" created="Thu, 1 Jan 2009 04:17:20 +0000"  >&lt;p&gt;Problem does not reoccur in testing on the cluster now.  Passes all local tests.&lt;/p&gt;</comment>
                            <comment id="12660181" author="apurtell" created="Thu, 1 Jan 2009 04:28:10 +0000"  >&lt;p&gt;Updated patch replaces a stray IOE with a RetriesExhaustedException like the other hunks.&lt;/p&gt;</comment>
                            <comment id="12660368" author="apurtell" created="Fri, 2 Jan 2009 18:51:43 +0000"  >&lt;p&gt;I believe patch 1101-3 addresses another related NPE encountered last night.&lt;/p&gt;</comment>
                            <comment id="12660923" author="stack" created="Mon, 5 Jan 2009 20:59:27 +0000"  >&lt;p&gt;+1 on patch.&lt;/p&gt;</comment>
                            <comment id="12660927" author="apurtell" created="Mon, 5 Jan 2009 21:10:18 +0000"  >&lt;p&gt;From #hbase:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;13:01&amp;#93;&lt;/span&gt;	&amp;lt;jdcryans&amp;gt;	apurtell: you should remove my comment in the first line of processBatchOfRows&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;13:01&amp;#93;&lt;/span&gt;	&amp;lt;apurtell&amp;gt;	jdcryans: ok&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;13:02&amp;#93;&lt;/span&gt;	&amp;lt;jdcryans&amp;gt;	apurtell: also the method is very long now... I would either chop it or add comments&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;13:03&amp;#93;&lt;/span&gt;	&amp;lt;jdcryans&amp;gt;	apurtell: I would try to refactor all the: while (currentRegion == null &amp;amp;&amp;amp; tries &amp;lt; numRetries) {&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;13:04&amp;#93;&lt;/span&gt;	&amp;lt;jdcryans&amp;gt;	something like getRegionNameWithRetries&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;13:04&amp;#93;&lt;/span&gt;	&amp;lt;apurtell&amp;gt;	jdcryans: ok&lt;/p&gt;</comment>
                            <comment id="12660932" author="tim_s" created="Mon, 5 Jan 2009 21:18:28 +0000"  >&lt;p&gt;I was getting the exact same message, with this patch haven&apos;t had another one yet.&lt;/p&gt;</comment>
                            <comment id="12660937" author="apurtell" created="Mon, 5 Jan 2009 21:29:54 +0000"  >&lt;p&gt;Thanks for testing the patch Tim. &lt;/p&gt;</comment>
                            <comment id="12661038" author="jdcryans" created="Tue, 6 Jan 2009 03:15:34 +0000"  >&lt;p&gt;+1 on latest patch. Good job.&lt;/p&gt;</comment>
                            <comment id="12661040" author="apurtell" created="Tue, 6 Jan 2009 03:24:19 +0000"  >&lt;p&gt;Committed. Passes all local tests. Thanks for the review J-D. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12396988" name="1101-1.patch" size="4649" author="apurtell" created="Thu, 1 Jan 2009 01:59:12 +0000"/>
                            <attachment id="12396992" name="1101-2.patch" size="4357" author="apurtell" created="Thu, 1 Jan 2009 04:28:10 +0000"/>
                            <attachment id="12397029" name="1101-3.patch" size="4701" author="apurtell" created="Fri, 2 Jan 2009 18:51:43 +0000"/>
                            <attachment id="12397169" name="1101-4.patch" size="3662" author="apurtell" created="Tue, 6 Jan 2009 02:58:48 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 31 Dec 2008 06:46:09 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>25573</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 48 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hbc7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>99099</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>