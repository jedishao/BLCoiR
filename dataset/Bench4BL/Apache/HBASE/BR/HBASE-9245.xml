<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sat Dec 03 19:35:04 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-9245/HBASE-9245.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-9245] Remove dead or deprecated code from hbase 0.96</title>
                <link>https://issues.apache.org/jira/browse/HBASE-9245</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;This is an umbrella issue that will cover the removal or refactoring of dangling dead code and cruft.  Some can make it into 0.96, some may have to wait for an 0.98.  The &quot;great culling&quot; of code will be grouped patches that are logically related.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12663993">HBASE-9245</key>
            <summary>Remove dead or deprecated code from hbase 0.96</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jmhsieh">Jonathan Hsieh</reporter>
                        <labels>
                    </labels>
                <created>Fri, 16 Aug 2013 05:37:28 +0000</created>
                <updated>Wed, 18 Nov 2015 18:44:04 +0000</updated>
                            <resolved>Wed, 18 Nov 2015 18:44:04 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>9</watches>
                                                                                                            <comments>
                            <comment id="13749501" author="jmhsieh" created="Sat, 24 Aug 2013 23:57:59 +0000"  >&lt;p&gt;Using this as an umbrella for more KeyValue -&amp;gt; Cell conversion work.  From a review of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9247&quot; title=&quot;Cleanup Key/KV/Meta/MetaKey Comparators&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9247&quot;&gt;&lt;del&gt;HBASE-9247&lt;/del&gt;&lt;/a&gt; I suggested that all client and user facing apis should use the opaque Cell interface instead of KeyValues (which should be encapsulate implementation details).  This would require the type signature conversion in the apis in the hbase-client and hbase-common modules.&lt;/p&gt;

&lt;p&gt;There are three &quot;root&quot; classes that expose KeyValue:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;hbase-client/.../client/Result.java&lt;/li&gt;
	&lt;li&gt;hbase-client/.../filter/Filter.java&lt;/li&gt;
	&lt;li&gt;hbase-client/.../coprocessor/ColumnInterpreter.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;So far I&apos;ve done a pass on Filter which I&apos;ll post as a patch.  Depending on how pervasive result and columninterpretar are I file follow ons for those individually as well.&lt;/p&gt;
</comment>
                            <comment id="13762063" author="ndimiduk" created="Mon, 9 Sep 2013 17:27:13 +0000"  >&lt;p&gt;Sorry to throw a spanner into the works so late in the effort, but what&apos;s the motivation for removing entirely the KV from these public APIs rather than marking them &lt;tt&gt;@Deprecated&lt;/tt&gt; for 0.96 and deleting them in 0.98?&lt;/p&gt;</comment>
                            <comment id="13762140" author="jmhsieh" created="Mon, 9 Sep 2013 18:40:04 +0000"  >&lt;p&gt;Here&apos;s motivation for 0.96 vs 0.98:&lt;br/&gt;
1) There would be perf degradation due to api shimming at multiple locations that actually affects the common case (see &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9359&quot; title=&quot;Convert KeyValue to Cell in hbase-client module - Result/Put/Delete, ColumnInterpreter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9359&quot;&gt;&lt;del&gt;HBASE-9359&lt;/del&gt;&lt;/a&gt;, and some of the grossness in the filter api shim).  &lt;br/&gt;
2) There are many other apis that have been removed already,  that break exiting apps so it seemed better to get them all at this time instead of guaranteeing that it will happen again.  &lt;br/&gt;
3) I believe the changes are fairly minimal (a type change) and efforts are being made to minimize the impact after this type change is being done.  &lt;br/&gt;
4) Not doing it now blocks a whole class of optimizations from coming in as minor feature additions until we have another chance to break the api.&lt;/p&gt;

&lt;p&gt;Here&apos;s motivation for the overall removal of KV from the client/common api:&lt;/p&gt;

&lt;p&gt;In 0.94, KV is a concrete implementation that is present on the serverside and the client side. The internal structure and layout is exposed such that all kvs are locked into being a single contiguous array/base pointer (for the entire KV) with offsets and lengths into this base pointer for each of the major fields (row, fam, qual, value, ts).  This means each kv has a fully copy of all these fields.&lt;/p&gt;

&lt;p&gt;In 0.96 we&apos;ve introduced encodings that break the single base pointer assumption.  The Cell interface exposes what is essentially multiple base pointers (one for row, fam, qual, val, just returning long for ts).  This will allow us to use more efficient encodings that can allow us to share rows/fams/quals from multiple KV&apos;s with the a single array.  &lt;/p&gt;

&lt;p&gt;Currently in 0.96 there are two implementations of Cell &amp;#8211; KeyValue (a cell backed by a flat contiguous array), and PrefexTreeCell (a cell backed that uses multiple base pointers to share prefixes).  Currently the PrefixTreeCell is only on the RS side (actually only at the store file I believe) and we have to do a bunch of interpreting on the RS side to convert to KV&apos;s, and then ship to clients.  &lt;/p&gt;

&lt;p&gt;By changing the client/common API to only use the Cell interface, we decouple the interface from the implementation.  This opens opportunities for push KV encodings up from the HFile level into the scanners, and the flexiblity to send encoded kvs to the client.  &lt;/p&gt;

&lt;p&gt;It is important to do the client api first since these will be the longest living, and other changes from here on will be likely be internal to RS&apos;s or only additions to the rpc protocol which should not break compatibility as future 0.96 api+wire compatible hbases come around.&lt;/p&gt;</comment>
                            <comment id="13762647" author="sershe" created="Tue, 10 Sep 2013 02:26:05 +0000"  >&lt;p&gt;Should there be a sub-JIRA to brainstorm how people would build against both 94 and 96? Would projects like Hive, Mahout, etc. need HBase shim similar to Hadoop?&lt;/p&gt;</comment>
                            <comment id="13762741" author="stack" created="Tue, 10 Sep 2013 05:18:08 +0000"  >&lt;blockquote&gt;&lt;p&gt;Should there be a sub-JIRA to brainstorm how people would build against both 94 and 96? Would projects like Hive, Mahout, etc. need HBase shim similar to Hadoop?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sershe&quot; class=&quot;user-hover&quot; rel=&quot;sershe&quot;&gt;Sergey Shelukhin&lt;/a&gt;. I&apos;d be interested in this one.  Should be recommendations, list of issues.  Hopefully it will involve the amount of work hbase project went through making it so we could do hadoop1 and hadoop2.&lt;/p&gt;</comment>
                            <comment id="15011642" author="jmhsieh" created="Wed, 18 Nov 2015 18:44:04 +0000"  >&lt;p&gt;0.96 has long past.  closing this out.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12662923">HBASE-9176</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                            <outwardlinks description="incorporates">
                                        <issuelink>
            <issuekey id="12667876">HBASE-9491</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                            <subtask id="12663995">HBASE-9246</subtask>
                            <subtask id="12663997">HBASE-9247</subtask>
                            <subtask id="12664387">HBASE-9262</subtask>
                            <subtask id="12664880">HBASE-9288</subtask>
                            <subtask id="12665397">HBASE-9334</subtask>
                            <subtask id="12665808">HBASE-9359</subtask>
                            <subtask id="12667664">HBASE-9477</subtask>
                            <subtask id="12667665">HBASE-9478</subtask>
                            <subtask id="12667922">HBASE-9493</subtask>
                            <subtask id="12667939">HBASE-9496</subtask>
                            <subtask id="12527820">HBASE-4625</subtask>
                            <subtask id="12666188">HBASE-9381</subtask>
                            <subtask id="12666193">HBASE-9383</subtask>
                            <subtask id="12666386">HBASE-9396</subtask>
                            <subtask id="12670384">HBASE-9652</subtask>
                            <subtask id="12695053">HBASE-10526</subtask>
                            <subtask id="12696611">HBASE-10588</subtask>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 9 Sep 2013 17:27:13 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>343994</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 2 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1nbmf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>344296</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>