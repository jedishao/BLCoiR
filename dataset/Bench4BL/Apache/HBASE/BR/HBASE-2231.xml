<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sat Dec 03 19:34:16 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-2231/HBASE-2231.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-2231] Compaction events should be written to HLog</title>
                <link>https://issues.apache.org/jira/browse/HBASE-2231</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;The sequence for a compaction should look like this:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Compact region to &quot;new&quot; files&lt;/li&gt;
	&lt;li&gt;Write a &quot;Compacted Region&quot; entry to the HLog&lt;/li&gt;
	&lt;li&gt;Delete &quot;old&quot; files&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;This deals with a case where the RS has paused between step 1 and 2 and the regions have since been reassigned.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12456510">HBASE-2231</key>
            <summary>Compaction events should be written to HLog</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.png">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stack">stack</assignee>
                                    <reporter username="tlipcon">Todd Lipcon</reporter>
                        <labels>
                            <label>moved_from_0_20_5</label>
                    </labels>
                <created>Wed, 17 Feb 2010 05:37:27 +0000</created>
                <updated>Mon, 23 Sep 2013 19:08:29 +0000</updated>
                            <resolved>Fri, 26 Apr 2013 22:15:37 +0000</resolved>
                                                    <fixVersion>0.98.0</fixVersion>
                    <fixVersion>0.95.1</fixVersion>
                                    <component>regionserver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>29</watches>
                                                                <comments>
                            <comment id="12834652" author="tlipcon" created="Wed, 17 Feb 2010 05:46:16 +0000"  >&lt;p&gt;Essentially, we&apos;re relying on the following sequence of events in the case of a pause:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;The RS starts a compaction&lt;/li&gt;
	&lt;li&gt;GC or whatever kicks in, causing the RS to be kicked out of the ZK quorum&lt;/li&gt;
	&lt;li&gt;Master notices this and opens the RS&apos;s latest HLog for append. This steals the write lease on the HLog file, bumps generation stamps, etc.&lt;/li&gt;
	&lt;li&gt;RS comes back to life, finishes the compaction, writes &quot;Compacted Region&quot; to HLog, and calls hflush()&lt;/li&gt;
	&lt;li&gt;hflush() fails since the original writer lease is no longer valid. Thus, the region server aborts and does not futz with the region&apos;s on-HDFS data (thus not interfering with the new server of this region)&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;This same sequence occurs for the case when the region tries to hflush edits in-flight RPCs from before the pause.&lt;/p&gt;

&lt;p&gt;There was some question about a problem where the regionserver also rolls its HLog right after the pause. In this case, the master might not catch the rolled HLog file, and the RS wouldn&apos;t be properly interrupted. Perhaps one solution for this is that, when rolling an HLog, you must open the new HLog first, then append an &quot;HLog rolled&quot; message to the old HLog, then start writing into the new one. There can then be a protocol on the HMaster to determine that it has really stolen the lease for the latest HLog.&lt;/p&gt;

&lt;p&gt;Regardless of the above question, the HMaster will also need to be sure to take the lease on the last HLog immediately, rather than starting to roll forward from the first HLog without looking at the latest ones.&lt;/p&gt;</comment>
                            <comment id="12835290" author="karthik.ranga" created="Thu, 18 Feb 2010 17:06:44 +0000"  >&lt;p&gt;Just wanted to attach evidence to the issue pointed out by Todd - &quot;the regionserver also rolls its HLog right after the pause. In this case, the master might not catch the rolled HLog file, and the RS wouldn&apos;t be properly interrupted&quot;&lt;/p&gt;

&lt;p&gt;From an email exchange between a few of us:&lt;/p&gt;

&lt;p&gt;&amp;gt; Look at these snippets from the log:&lt;br/&gt;
&amp;gt; 2010-02-15 16:23:56,493 INFO org.apache.hadoop.hbase.regionserver.HRegionServer: Got ZooKeeper event, state: Disconnected, type: None, path: null&lt;br/&gt;
&amp;gt; 2010-02-15 16:23:57,848 WARN org.apache.hadoop.hbase.regionserver.HLog: IPC Server handler 30 on 60020 took 1200ms appending an edit to hlog; editcount=121&lt;br/&gt;
&amp;gt; 2010-02-15 16:24:04,697 INFO org.apache.hadoop.hbase.regionserver.HRegionServer: Got ZooKeeper event, state: Expired, type: None, path: null&lt;br/&gt;
&amp;gt; 2010-02-15 16:24:04,697 WARN org.apache.zookeeper.ClientCnxn: Exception closing session 0x326c5173bc80000 to sun.nio.ch.SelectionKeyImpl@5534afcb&lt;br/&gt;
&amp;gt;&lt;br/&gt;
&amp;gt; This means master did not take possession of the latest hlog. So the RS actually appended into the log AFTER the zk timeout happened. The suggestion from yesterday&apos;s discussion (first open the last hlog) should take care of this edit.&lt;/p&gt;</comment>
                            <comment id="12844304" author="dhruba" created="Fri, 12 Mar 2010 00:55:00 +0000"  >&lt;p&gt;A offline discussion among Karthik and Arvind resulted in the idea that the master should rename the directory where hlogs are written. It should then open the last file for &quot;append&quot; to ensure that the old region server cannot write anymore to it. After that, the master is free to safely process all the logs in the hlog directory.&lt;/p&gt;

&lt;p&gt;This would need that the region server use org.apache.hadoop.fs.create() while crearing a hlog file (which allows failing a create if any intermediate directory in the path is absent).&lt;/p&gt;</comment>
                            <comment id="12844307" author="tlipcon" created="Fri, 12 Mar 2010 01:01:25 +0000"  >&lt;blockquote&gt;&lt;p&gt;This would need that the region server use org.apache.hadoop.fs.create() while crearing a hlog file (which allows failing a create if any intermediate directory in the path is absent).&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Which API does this? I was under the impression that all of the available create() APIs recursively mkdired the containing directory (though maybe I&apos;m out of date or just plain wrong)&lt;/p&gt;</comment>
                            <comment id="12844323" author="dhruba" created="Fri, 12 Mar 2010 01:25:50 +0000"  >&lt;p&gt;org.apache.hadoop.fs.FileContext.create() has a &quot;option&quot; flag that allows an app to specify whether intermediate directories should be created or not.&lt;/p&gt;</comment>
                            <comment id="12844325" author="tlipcon" created="Fri, 12 Mar 2010 01:29:24 +0000"  >&lt;p&gt;yea, but that API isn&apos;t til 0.22. Backporting FileContext is a no-go imo.&lt;/p&gt;</comment>
                            <comment id="12864588" author="tlipcon" created="Wed, 5 May 2010 23:42:28 +0000"  >&lt;p&gt;I&apos;m going to suck it up and take this one on, I think - it&apos;s fairly easy to reproduce by doing heavy writes with WAL disabled for those writes, and then kill -STOP a region server for 65 seconds or so.&lt;/p&gt;</comment>
                            <comment id="12864656" author="tlipcon" created="Thu, 6 May 2010 05:37:43 +0000"  >&lt;p&gt;linking &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2519&quot; title=&quot;StoreFileScanner.seek swallows IOEs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2519&quot;&gt;&lt;del&gt;HBASE-2519&lt;/del&gt;&lt;/a&gt;, which causes this to currently present as silent data loss in some situations&lt;/p&gt;</comment>
                            <comment id="12864658" author="tlipcon" created="Thu, 6 May 2010 05:43:52 +0000"  >&lt;p&gt;Here&apos;s a test case which shows the silent dataloss after causing IOEs on the next compaction of the affected region.&lt;/p&gt;</comment>
                            <comment id="12864668" author="tlipcon" created="Thu, 6 May 2010 06:23:35 +0000"  >&lt;p&gt;My plan is this:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;HLog already has a special METAFAMILY/METAROW concept that can be used to put out-of-band info in the editlog.&lt;/li&gt;
	&lt;li&gt;Currently we write a &quot;COMPLETE_CACHE_FLUSH&quot; entry in there for cache flushes&lt;/li&gt;
	&lt;li&gt;Do a similar thing, but with COMPACTION_FINISHED. In this case we&apos;ll also have a qualifier COMPACTION_DATA which will contain (a) the compacted file path in the compaction dir, and (b) the files that fed into the compaction&lt;/li&gt;
	&lt;li&gt;During HLog replay, if we see one of these entries, we try to &quot;finish&quot; the compaction by moving the compacted file into place and removing the source files (these are idempotent operations, so it&apos;s fine if the RS already did it)&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12866803" author="stack" created="Wed, 12 May 2010 23:48:16 +0000"  >&lt;p&gt;Bulk move of 0.20.5 issues into 0.21.0 after vote that we merge branch into TRUNK up on list.&lt;/p&gt;</comment>
                            <comment id="12868483" author="tlipcon" created="Tue, 18 May 2010 01:40:25 +0000"  >&lt;p&gt;Here&apos;s a patch for trunk with tests, etc.&lt;/p&gt;

&lt;p&gt;This still needs cleanup, etc, please don&apos;t commit yet. I&apos;ll do some cleanup and then post a reviewboard asap.&lt;/p&gt;</comment>
                            <comment id="12869386" author="tlipcon" created="Wed, 19 May 2010 22:40:46 +0000"  >&lt;p&gt;I&apos;ve been thinking about this a bit, and I want to think about a different design.&lt;/p&gt;

&lt;p&gt;The flaw with the design as I outlined above is that we have to read through the entire reconstruction HLog until we find the special entries telling us to &quot;finish off&quot; the compaction for the dead regionserver. This is fine in today&apos;s world, but I think in some instances it would be better to finish the compaction and get the directory in a reasonable state &lt;b&gt;before&lt;/b&gt; replaying the logs. This would allow, for example, the recovering regionserver to start serving the region in &quot;stale readonly&quot; mode before log replay is done.&lt;/p&gt;

&lt;p&gt;I&apos;m thinking about a different design in which we add an /hbase/ops-in-progress/regionserver/ directory in zookeeper. When we are about to start moving files around after a compaction, we write our intention in there, and when we&apos;re done, we remove it. Thus the HMaster can take of finishing or aborting the compaction immediately when it starts recovery, and the recovering regionserver doesn&apos;t have to worry about the transition in progress.&lt;/p&gt;

&lt;p&gt;Thoughts?&lt;/p&gt;</comment>
                            <comment id="12902165" author="jdcryans" created="Tue, 24 Aug 2010 23:47:24 +0000"  >&lt;p&gt;Do you want to revive this issue Todd? If so, my thought is that we should just rollback whatever that was in progress in a way that the sleeping node couldn&apos;t mess up when it wakes up. I&apos;m not super keen on using ZK for that, seems overly complicated.&lt;/p&gt;</comment>
                            <comment id="12918181" author="ryanobjc" created="Tue, 5 Oct 2010 21:00:40 +0000"  >&lt;p&gt;The original plan seems good, or have things changed too much?  If we can piggypack on HLog, that would be better since as JD pointed out ZK can be tricky.&lt;/p&gt;

&lt;p&gt;Given that this issue is so small, should we hold up 0.90 for this or not?&lt;/p&gt;</comment>
                            <comment id="12918241" author="tlipcon" created="Tue, 5 Oct 2010 21:54:49 +0000"  >&lt;p&gt;If someone wants to take this over, that&apos;s cool - I&apos;m unlikely to have time in the next week and a half, though. It is a nasty bug that I&apos;ve seen in real life, though.&lt;/p&gt;</comment>
                            <comment id="12930313" author="stack" created="Tue, 9 Nov 2010 22:08:00 +0000"  >&lt;p&gt;Todd, you got a fix for this or will we punt to 0.92?&lt;/p&gt;</comment>
                            <comment id="12930431" author="tlipcon" created="Wed, 10 Nov 2010 02:01:29 +0000"  >&lt;p&gt;Let&apos;s punt, though I&apos;m working on it and maybe it will happen tomorrow &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12930433" author="tlipcon" created="Wed, 10 Nov 2010 02:01:57 +0000"  >&lt;p&gt;Setting to 0.92 but hope to get this in a dot release or later RC of 0.90 if 0.92 takes too long&lt;/p&gt;</comment>
                            <comment id="13002784" author="dhruba" created="Fri, 4 Mar 2011 19:04:08 +0000"  >&lt;p&gt;hi folks, can we get this into some release of 0.90?&lt;/p&gt;</comment>
                            <comment id="13002801" author="dhruba" created="Fri, 4 Mar 2011 20:44:40 +0000"  >&lt;p&gt;yet another approach would be the following:&lt;/p&gt;

&lt;p&gt;the hdfs files remain inside a path that has the currently assigned regionname encoded in it. For example, a path of the form /hbase/tablename/regionname/currently-assigned-regionserver/....&lt;/p&gt;

&lt;p&gt;when a master assigns a region to a regionserver, it makes the change in zookeeper and then issues one rename call to hdfs to rename the top level region directory name to the appropriate regionserver name. In some ways, this is similar to IO-fencing in the sense that any old region servers cannot operate on any of the existing files of this region. Recovery from a master restart and/or region-server restart should be simple, and I can list those steps later.&lt;/p&gt;

&lt;p&gt;This has some drawbacks, especially since this makes the region data have variable path names at different points in time, could cause some issues in bulk-loading via map-reduce.&lt;/p&gt;</comment>
                            <comment id="13047508" author="stack" created="Fri, 10 Jun 2011 22:21:57 +0000"  >&lt;p&gt;Marking patch available&lt;/p&gt;</comment>
                            <comment id="13052810" author="stack" created="Tue, 21 Jun 2011 20:33:10 +0000"  >&lt;p&gt;Moving out of 0.92.0.  Pull back in if someone wants to work on it.&lt;/p&gt;</comment>
                            <comment id="13217966" author="lhofhansl" created="Tue, 28 Feb 2012 07:00:26 +0000"  >&lt;p&gt;Moving out of 0.94. Probably not a blocker if it can go unfixed for a long time.&lt;/p&gt;</comment>
                            <comment id="13471258" author="yuzhihong@gmail.com" created="Sun, 7 Oct 2012 15:54:55 +0000"  >&lt;p&gt;Todd&apos;s patch is not small.&lt;br/&gt;
Now that HLog interface has been introduced, rebase is needed.&lt;/p&gt;</comment>
                            <comment id="13471941" author="yuzhihong@gmail.com" created="Mon, 8 Oct 2012 22:55:21 +0000"  >&lt;p&gt;Testcase tailored to 0.94 branch.&lt;br/&gt;
I found that TestIOFencing hung:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; prio=5 tid=7fdd52801800 nid=0x10b415000 waiting on condition [10b413000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: TIMED_WAITING (sleeping)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.sleep(Native Method)
	at org.apache.hadoop.hbase.TestIOFencing.testFencingAroundCompaction(TestIOFencing.java:208)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;at the sleep() call below:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
      compactingRegion.allowCompactions();
      
      &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (compactingRegion.compactCount == 0) {
        &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.sleep(1000);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13499355" author="stack" created="Sat, 17 Nov 2012 06:02:12 +0000"  >&lt;p&gt;Here is the test for trunk.  Hanging at mo.  Let me see why.&lt;/p&gt;</comment>
                            <comment id="13499559" author="stack" created="Sat, 17 Nov 2012 23:33:18 +0000"  >&lt;p&gt;Fixed hang.  Test passes now but it should not.  We have become lax if a file is missing when we go to compact &amp;#8211; perhaps because region double-assigned &amp;#8211; since we made the CompactionRequest object changes.  I think the reasoning is that by the time our compaction runs, another may have run before us so it is ok if the geography is different.&lt;/p&gt;

&lt;p&gt;Need to fix this first.  Let me dig more.&lt;/p&gt;</comment>
                            <comment id="13501364" author="stack" created="Tue, 20 Nov 2012 18:37:24 +0000"  >&lt;p&gt;So, test passes because we are able to read from deleted file because dfsclient has block locations cached.  I suppose this makes sense it is just a little unexpected (It took me a while to figure it).&lt;/p&gt;

&lt;p&gt;Not sure how test failed in the past.  My guess is that in the past we were strict when you went to compact that all referenced files had to be present.  That is no longer the case in that we seem to be loosey-goosey about it to handle the case where a compaction may have run before ours.  Let me look into this more.&lt;/p&gt;</comment>
                            <comment id="13501737" author="stack" created="Wed, 21 Nov 2012 07:34:47 +0000"  >&lt;p&gt;This test case fails when files have been removed by a compaction.&lt;/p&gt;

&lt;p&gt;Not to forward port Todd&apos;s fancy WAL writing.&lt;/p&gt;</comment>
                            <comment id="13504430" author="stack" created="Tue, 27 Nov 2012 07:46:18 +0000"  >&lt;p&gt;Not done yet. pb&apos;d the compaction description added to the WAL.&lt;/p&gt;</comment>
                            <comment id="13504808" author="stack" created="Tue, 27 Nov 2012 18:12:57 +0000"  >&lt;p&gt;Here is finished patch but it seems that IOFencing does not work.  After recovering lease and assigning new regions, the dying server can still append the WAL &apos;successfully&apos;.&lt;/p&gt;</comment>
                            <comment id="13626082" author="sershe" created="Tue, 9 Apr 2013 01:32:41 +0000"  >&lt;p&gt;is there any documentation on how IO fencing is supposed to work in HBase? It wouldn&apos;t surprise me if you can still append to a moved file given how HDFS works.&lt;/p&gt;</comment>
                            <comment id="13629413" author="sershe" created="Thu, 11 Apr 2013 21:26:36 +0000"  >&lt;p&gt;ping? Perhaps we should introduce file creation operation of some sort to the end of compaction instead.&lt;/p&gt;</comment>
                            <comment id="13629456" author="stack" created="Thu, 11 Apr 2013 22:03:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sershe&quot; class=&quot;user-hover&quot; rel=&quot;sershe&quot;&gt;Sergey Shelukhin&lt;/a&gt; Sorry.  Owe you response.  Need to restudy patch and reconstitute context.  &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2645&quot; title=&quot;HLog writer can do 1-2 sync operations after lease has been recovered for split process.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2645&quot;&gt;&lt;del&gt;HBASE-2645&lt;/del&gt;&lt;/a&gt; is related.  Writer over there gets stuck on a sync and eventually fails complaining about lease.  Would think we&apos;d see similar over here when we try to write the compaction edit to the WAL on the dying regionserver.&lt;/p&gt;</comment>
                            <comment id="13630403" author="sershe" created="Fri, 12 Apr 2013 17:51:51 +0000"  >&lt;p&gt;Could it be related to the issue fixed in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7878&quot; title=&quot;recoverFileLease does not check return value of recoverLease&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7878&quot;&gt;&lt;del&gt;HBASE-7878&lt;/del&gt;&lt;/a&gt;, where recoverLease does not really recover lease when splitting start when the lease is not recovered yet, so due to timing data loss is possible? Or was it a different behavior here on dead writer&apos;s side&lt;/p&gt;</comment>
                            <comment id="13630404" author="sershe" created="Fri, 12 Apr 2013 17:52:11 +0000"  >&lt;p&gt;*and the splitting starts when&lt;/p&gt;</comment>
                            <comment id="13639985" author="enis" created="Wed, 24 Apr 2013 02:03:26 +0000"  >&lt;p&gt;I have rebased Stack&apos;s v4 patch, and made some changes. &lt;/p&gt;

&lt;p&gt;From my testing, it seems that IO Fencing for the WAL works (tested with &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7878&quot; title=&quot;recoverFileLease does not check return value of recoverLease&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7878&quot;&gt;&lt;del&gt;HBASE-7878&lt;/del&gt;&lt;/a&gt;, not &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8389&quot; title=&quot;HBASE-8354 forces Namenode into loop with lease recovery requests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8389&quot;&gt;&lt;del&gt;HBASE-8389&lt;/del&gt;&lt;/a&gt;). &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt; do you remember how did you test and conclude that it does not work? This is pretty important, so I can dedicate some more time on testing it. &lt;/p&gt;

&lt;p&gt;Some of the changes from patch v4 to v5 are: &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Renamed Compaction -&amp;gt; CompactionDescriptor&lt;/li&gt;
	&lt;li&gt;Compaction output can be a list of files, not a single file.&lt;/li&gt;
	&lt;li&gt;Added compaction WAL edit replay. Now we recognize and replay the compaction edit on region open. This is needed because if we fail after we snyc() the wal, we might still try to delete the files.&lt;/li&gt;
	&lt;li&gt;Added 2 more tests for above condition.&lt;/li&gt;
	&lt;li&gt;HLog does not know about compaction wal edit.&lt;/li&gt;
	&lt;li&gt;Compaction wal edit log goes through the normal append code path.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I&apos;ve tried to capture the Fencing / Idempotency semantics in the following javadoc excerpt: &lt;br/&gt;
Compaction event should be idempotent, since there is no IO Fencing for&lt;br/&gt;
    the region directory in hdfs. A region server might still try to complete the&lt;br/&gt;
    compaction after it lost the region. That is why the following events are carefully&lt;br/&gt;
    ordered for a compaction:&lt;br/&gt;
     1. Compaction writes new files under region/.tmp directory (compaction output)&lt;br/&gt;
     2. Compaction atomically moves the temporary file under region directory&lt;br/&gt;
     3. Compaction appends a WAL edit containing the compaction input and output files.&lt;br/&gt;
     Forces sync on WAL.&lt;br/&gt;
     4. Compaction deletes the input files from the region directory.&lt;/p&gt;

&lt;p&gt;    Failure conditions are handled like this:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;If RS fails before 2, compaction wont complete. Even if RS lives on and finishes&lt;br/&gt;
     the compaction later, it will only write the new data file to the region directory.&lt;br/&gt;
     Since we already have this data, this will be idempotent but we will have a redundant&lt;br/&gt;
     copy of the data.&lt;/li&gt;
	&lt;li&gt;If RS fails between 2 and 3, the region will have a redundant copy of the data. The&lt;br/&gt;
     RS that failed won&apos;t be able to finish snyc() for WAL because of lease recovery in WAL.&lt;/li&gt;
	&lt;li&gt;If RS fails after 3, the region region server who opens the region will pick up the&lt;br/&gt;
     the compaction marker from the WAL and replay it by removing the compaction input files.&lt;br/&gt;
     Failed RS can also attempt to delete those files, but the operation will be idempotent&lt;/li&gt;
&lt;/ul&gt;





</comment>
                            <comment id="13640002" author="hadoopqa" created="Wed, 24 Apr 2013 02:27:30 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12580216/hbase-2231_v5.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12580216/hbase-2231_v5.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 17 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5426//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5426//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13640066" author="stack" created="Wed, 24 Apr 2013 04:34:13 +0000"  >&lt;blockquote&gt;&lt;p&gt;.... it seems that IO Fencing for the WAL works&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Excellent (You are a better man than me!)&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;stack do you remember how did you test and conclude that it does not work? This is pretty important, so I can dedicate some more time on testing it.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Straight hbase and its bundled hadoop from circa November 2012.&lt;/p&gt;

&lt;p&gt;Looking at the differences between v5 and v4, I do not see anything that could have changed the mechanics unless its the hdfs difference, or very likely, I just wasn&apos;t testing properly.  &lt;/p&gt;

&lt;p&gt;Patch looks great.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+  repeated string compactionInput = 4;
+  repeated string compactionOutput = 5;
+  required string storeHomeDir = 6;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Are these full paths in above or partials?  Hopefully the latter (in case hbase.rootdir gets moved).&lt;/p&gt;

&lt;p&gt;This is good change:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
-            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (HLogUtil.isMetaFamily(kv.getFamily())) &lt;span class=&quot;code-keyword&quot;&gt;continue&lt;/span&gt;;
+            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (WALEdit.isMetaEditFamily(kv.getFamily())) &lt;span class=&quot;code-keyword&quot;&gt;continue&lt;/span&gt;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Do we need this class, CompactionDescriptor?  Why not just use the pb class of same name?  It has good accessors, etc., already?  Or its constructor should take the pb CompactionDescriptor?&lt;/p&gt;

&lt;p&gt;Should toByteArray add pb magic preamble?  (Probably not &amp;#8211; too much).&lt;/p&gt;

&lt;p&gt;Is there enough to ensure that this is a compaction edit?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (kv.matchingFamily(WALEdit.METAFAMILY) ||
                 !Bytes.equals(key.getEncodedRegionName(),
                   &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.getRegionInfo().getEncodedNameAsBytes())) {
+              &lt;span class=&quot;code-comment&quot;&gt;//&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; is a special edit, we should handle it
&lt;/span&gt;+              CompactionDescriptor compaction = WALEdit.getCompaction(kv);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In other words, any other kinds of edits w/ a METAFAMILY cf?&lt;/p&gt;

&lt;p&gt;Is this used?&lt;/p&gt;

&lt;p&gt;createFlush&lt;/p&gt;



&lt;p&gt;Patch looks good.&lt;/p&gt;

&lt;p&gt;IOFencing works?  I was seeing that I could write the edit anyways even after the master had recovered the lease.  Maybe it s hbase-7878 returning when it shouldn&apos;t have been (we weren&apos;t checking the return flag?)&lt;/p&gt;

&lt;p&gt;Thanks Enis.&lt;/p&gt;

&lt;p&gt;+1 on commit.&lt;/p&gt;


</comment>
                            <comment id="13641087" author="enis" created="Wed, 24 Apr 2013 22:34:47 +0000"  >&lt;blockquote&gt;&lt;p&gt;Are these full paths in above or partials? Hopefully the latter (in case hbase.rootdir gets moved).&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Good point, I think they are absolute paths for now. I&apos;ll change that. &lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Do we need this class, CompactionDescriptor? &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I don&apos;t know, you tell me &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; It was in the v4 patch, so I kept it. Let me get rid of it, we can just use the PB object directly as you said. &lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Is there enough to ensure that this is a compaction edit?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;If METAFAMILY we call getCompaction() which does check the row, cf, and column. If not just returns null. I was thinking of adding a new Type in KeyValue, smt like Marker, so that we do not hack around METAFAMILY. wdyt, I can do a follow up issue. &lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;createFlush Is this used?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;It is not used after &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7329&quot; title=&quot;remove flush-related records from WAL and make locking more granular&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7329&quot;&gt;&lt;del&gt;HBASE-7329&lt;/del&gt;&lt;/a&gt;. I should remove it. One thing we discussed offline with Sergey was that, if WAL disabled or deferred, a RS that lost the region, might still try to do a flush on entries that did not go into WAL. In these case, we might be writing a file to the region after the we lost the control of the region, but it should be fine since either: &lt;br/&gt;
 (1) the entries in the flushed file went into WAL already, so we would just be adding a redundant file to the region. &lt;br/&gt;
 (2) the entries did not go into WAL, but will be flushed into the region. They will or will not be immediately seen by the region, because the region might be already open. They will be seen by subsequent region opens. &lt;/p&gt;

&lt;p&gt;Both cases should be fine as far as i can tell though, because for (1), we rely on idempotent edits, for (2) since wal is deferred/skipped these cases would be semantically acceptable. &lt;/p&gt;</comment>
                            <comment id="13641474" author="enis" created="Thu, 25 Apr 2013 06:15:24 +0000"  >&lt;p&gt;Updated patch. Let&apos;s see what hadoopqa thinks. &lt;/p&gt;</comment>
                            <comment id="13641537" author="hadoopqa" created="Thu, 25 Apr 2013 07:48:39 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12580486/hbase-2231_v6.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12580486/hbase-2231_v6.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 17 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.0&lt;/font&gt;.  The patch compiles against the hadoop 1.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 2 warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 release audit&lt;/font&gt;.  The applied patch generated 1 release audit warnings (more than the trunk&apos;s current 0 warnings).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5448//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5448//testReport/&lt;/a&gt;&lt;br/&gt;
Release audit warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5448//artifact/trunk/patchprocess/patchReleaseAuditProblems.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5448//artifact/trunk/patchprocess/patchReleaseAuditProblems.txt&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5448//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5448//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5448//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5448//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5448//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5448//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5448//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5448//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5448//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5448//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5448//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5448//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5448//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5448//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5448//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5448//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5448//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5448//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13642205" author="enis" created="Thu, 25 Apr 2013 20:58:28 +0000"  >&lt;p&gt;Rebased patch, and fixed javadoc warnings. Test and release audit warnings seem unrelated. &lt;/p&gt;</comment>
                            <comment id="13642260" author="stack" created="Thu, 25 Apr 2013 21:48:20 +0000"  >&lt;blockquote&gt;&lt;p&gt;I don&apos;t know, you tell me  It was in the v4 patch, so I kept it. Let me get rid of it, we can just use the PB object directly as you said.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I don&apos;t remember what I was thinking back then (unsmile).&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I was thinking of adding a new Type in KeyValue, smt like Marker, so that we do not hack around METAFAMILY. wdyt, I can do a follow up issue.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It is fine as is for now.  If we want more special markers, lets do the special KV type (good idea btw).&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;It is not used after &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7329&quot; title=&quot;remove flush-related records from WAL and make locking more granular&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7329&quot;&gt;&lt;del&gt;HBASE-7329&lt;/del&gt;&lt;/a&gt;. I should remove it.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Out of scope for this.  New issue?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;if WAL disabled or deferred...&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;What is this?  If either of the above, you are playing w/ fire anyways so you could lose data?&lt;/p&gt;

&lt;p&gt;Let me look at new version of patch.&lt;/p&gt;


</comment>
                            <comment id="13642319" author="stack" created="Thu, 25 Apr 2013 22:39:05 +0000"  >&lt;p&gt;+1 on patch.&lt;/p&gt;</comment>
                            <comment id="13642323" author="hadoopqa" created="Thu, 25 Apr 2013 22:42:34 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12580586/hbase-2231_v7.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12580586/hbase-2231_v7.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 17 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.0&lt;/font&gt;.  The patch compiles against the hadoop 1.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 release audit&lt;/font&gt;.  The applied patch generated 1 release audit warnings (more than the trunk&apos;s current 0 warnings).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.security.access.TestAccessController&lt;br/&gt;
                  org.apache.hadoop.hbase.backup.TestHFileArchiving&lt;br/&gt;
                  org.apache.hadoop.hbase.TestIOFencing&lt;br/&gt;
                  org.apache.hadoop.hbase.client.TestAdmin&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5454//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5454//testReport/&lt;/a&gt;&lt;br/&gt;
Release audit warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5454//artifact/trunk/patchprocess/patchReleaseAuditProblems.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5454//artifact/trunk/patchprocess/patchReleaseAuditProblems.txt&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5454//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5454//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5454//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5454//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5454//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5454//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5454//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5454//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5454//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5454//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5454//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5454//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5454//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5454//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5454//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5454//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5454//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5454//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13642332" author="enis" created="Thu, 25 Apr 2013 22:49:26 +0000"  >&lt;p&gt;Tests might be failing because of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5930&quot; title=&quot;Limits the amount of time an edit can live in the memstore.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5930&quot;&gt;&lt;del&gt;HBASE-5930&lt;/del&gt;&lt;/a&gt;. I&apos;ve put an addendum there. &lt;/p&gt;</comment>
                            <comment id="13642384" author="enis" created="Thu, 25 Apr 2013 23:50:13 +0000"  >&lt;p&gt;Reattach for qa. &lt;/p&gt;</comment>
                            <comment id="13642474" author="hadoopqa" created="Fri, 26 Apr 2013 01:21:15 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12580625/hbase-2231_v7.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12580625/hbase-2231_v7.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 17 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.0&lt;/font&gt;.  The patch compiles against the hadoop 1.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 release audit&lt;/font&gt;.  The applied patch generated 1 release audit warnings (more than the trunk&apos;s current 0 warnings).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.backup.TestHFileArchiving&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5461//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5461//testReport/&lt;/a&gt;&lt;br/&gt;
Release audit warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5461//artifact/trunk/patchprocess/patchReleaseAuditProblems.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5461//artifact/trunk/patchprocess/patchReleaseAuditProblems.txt&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5461//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5461//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5461//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5461//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5461//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5461//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5461//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5461//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5461//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5461//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5461//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5461//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5461//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5461//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5461//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5461//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5461//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5461//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13643297" author="enis" created="Fri, 26 Apr 2013 22:15:38 +0000"  >&lt;p&gt;I&apos;ve committed this to trunk and 0.95. Thanks Stack.&lt;/p&gt;</comment>
                            <comment id="13643298" author="enis" created="Fri, 26 Apr 2013 22:16:22 +0000"  >&lt;p&gt;Attaching 0.95 version of the patch, had to resolve some minor conflicts. &lt;/p&gt;</comment>
                            <comment id="13643544" author="hudson" created="Sat, 27 Apr 2013 05:49:49 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #4082 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/4082/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/4082/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2231&quot; title=&quot;Compaction events should be written to HLog&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2231&quot;&gt;&lt;del&gt;HBASE-2231&lt;/del&gt;&lt;/a&gt; Compaction events should be written to HLog (Stack &amp;amp; Enis) (Revision 1476414)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
enis : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-client/src/main/java/org/apache/hadoop/hbase/protobuf/ProtobufUtil.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-protocol/src/main/java/org/apache/hadoop/hbase/protobuf/generated/WAL.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-protocol/src/main/protobuf/WAL.proto&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/mapreduce/WALPlayer.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HStore.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/Store.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/FSHLog.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLog.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLogUtil.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/WALEdit.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/HBaseTestingUtility.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/MiniHBaseCluster.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/TestFullLogReconstruction.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/TestIOFencing.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/coprocessor/TestRowProcessorEndpoint.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestHRegion.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13643581" author="hudson" created="Sat, 27 Apr 2013 07:30:29 +0000"  >&lt;p&gt;Integrated in hbase-0.95 #164 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.95/164/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.95/164/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2231&quot; title=&quot;Compaction events should be written to HLog&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2231&quot;&gt;&lt;del&gt;HBASE-2231&lt;/del&gt;&lt;/a&gt; Compaction events should be written to HLog (Stack &amp;amp; Enis) (Revision 1476419)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
enis : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-client/src/main/java/org/apache/hadoop/hbase/protobuf/ProtobufUtil.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-protocol/src/main/java/org/apache/hadoop/hbase/protobuf/generated/WAL.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-protocol/src/main/protobuf/WAL.proto&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/mapreduce/WALPlayer.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HStore.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/Store.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/FSHLog.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLog.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLogUtil.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/WALEdit.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/HBaseTestingUtility.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/MiniHBaseCluster.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/TestFullLogReconstruction.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/TestIOFencing.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/coprocessor/TestRowProcessorEndpoint.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestHRegion.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13643587" author="hudson" created="Sat, 27 Apr 2013 07:43:54 +0000"  >&lt;p&gt;Integrated in hbase-0.95-on-hadoop2 #82 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.95-on-hadoop2/82/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.95-on-hadoop2/82/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2231&quot; title=&quot;Compaction events should be written to HLog&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2231&quot;&gt;&lt;del&gt;HBASE-2231&lt;/del&gt;&lt;/a&gt; Compaction events should be written to HLog (Stack &amp;amp; Enis) (Revision 1476419)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
enis : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-client/src/main/java/org/apache/hadoop/hbase/protobuf/ProtobufUtil.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-protocol/src/main/java/org/apache/hadoop/hbase/protobuf/generated/WAL.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-protocol/src/main/protobuf/WAL.proto&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/mapreduce/WALPlayer.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HStore.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/Store.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/FSHLog.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLog.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLogUtil.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/WALEdit.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/HBaseTestingUtility.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/MiniHBaseCluster.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/TestFullLogReconstruction.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/TestIOFencing.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/coprocessor/TestRowProcessorEndpoint.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestHRegion.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13643604" author="hudson" created="Sat, 27 Apr 2013 08:38:48 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #512 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/512/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/512/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2231&quot; title=&quot;Compaction events should be written to HLog&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2231&quot;&gt;&lt;del&gt;HBASE-2231&lt;/del&gt;&lt;/a&gt; Compaction events should be written to HLog (Stack &amp;amp; Enis) (Revision 1476414)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
enis : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-client/src/main/java/org/apache/hadoop/hbase/protobuf/ProtobufUtil.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-protocol/src/main/java/org/apache/hadoop/hbase/protobuf/generated/WAL.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-protocol/src/main/protobuf/WAL.proto&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/mapreduce/WALPlayer.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HStore.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/Store.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/FSHLog.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLog.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLogUtil.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/WALEdit.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/HBaseTestingUtility.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/MiniHBaseCluster.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/TestFullLogReconstruction.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/TestIOFencing.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/coprocessor/TestRowProcessorEndpoint.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestHRegion.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13647014" author="jeffreyz" created="Wed, 1 May 2013 22:27:06 +0000"  >&lt;blockquote&gt;
&lt;p&gt;If RS fails after 3, the region region server who opens the region will pick up the&lt;br/&gt;
the compaction marker from the WAL and replay it by removing the compaction input files.&lt;br/&gt;
Failed RS can also attempt to delete those files, but the operation will be idempotent&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;One issue on the above is that WAL replay skips all flushed WAL edits. Let&apos;s say after the compaction marker WAL edit we have a region flush. Therefore, the wal compaction event won&apos;t be replayed.&lt;/p&gt;</comment>
                            <comment id="13647143" author="enis" created="Thu, 2 May 2013 00:47:24 +0000"  >&lt;p&gt;It seems that although very unlikely this can still happen: &lt;br/&gt;
HStore Compaction:&lt;br/&gt;
1. write compaction file&lt;br/&gt;
2. Append Compaction to WAL (new sequenceId)&lt;br/&gt;
3. store.writeLock.lock()&lt;br/&gt;
4. modify store files&lt;br/&gt;
5. store.writeLock.unlock() &lt;br/&gt;
6. delete files&lt;/p&gt;

&lt;p&gt;HRegion flush:&lt;br/&gt;
a. startSeqId = wal.startCacheFlush()     -&amp;gt; this has to come after 2&lt;br/&gt;
b. for each store&lt;br/&gt;
c.   store.writeLock.lock()&lt;br/&gt;
d.   add store file&lt;br/&gt;
e.   store.writeLock.unlock()&lt;br/&gt;
f. update completeSequenceId   &lt;/p&gt;

&lt;p&gt;If we get an execution where steps 1 and 2 completed, then flush starts with steps a..f and completes before we make sure that the compaction files are deleted, then the compact entry might be skipped on replay. It seems we cannot extend the HStore write lock to guard against this easily. I was not able to find a solution that is not ugly for this. &lt;/p&gt;</comment>
                            <comment id="13650628" author="hudson" created="Tue, 7 May 2013 08:51:26 +0000"  >&lt;p&gt;Integrated in hbase-0.95 #178 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.95/178/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.95/178/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8478&quot; title=&quot;HBASE-2231 breaks TestHRegion#testRecoveredEditsReplayCompaction under hadoop2 profile&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8478&quot;&gt;&lt;del&gt;HBASE-8478&lt;/del&gt;&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2231&quot; title=&quot;Compaction events should be written to HLog&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2231&quot;&gt;&lt;del&gt;HBASE-2231&lt;/del&gt;&lt;/a&gt; breaks TestHRegion#testRecoveredEditsReplayCompaction under hadoop2 profile (Revision 1479717)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
enis : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/util/FSUtils.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestHRegion.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13650636" author="hudson" created="Tue, 7 May 2013 09:00:58 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #4099 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/4099/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/4099/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8478&quot; title=&quot;HBASE-2231 breaks TestHRegion#testRecoveredEditsReplayCompaction under hadoop2 profile&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8478&quot;&gt;&lt;del&gt;HBASE-8478&lt;/del&gt;&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2231&quot; title=&quot;Compaction events should be written to HLog&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2231&quot;&gt;&lt;del&gt;HBASE-2231&lt;/del&gt;&lt;/a&gt; breaks TestHRegion#testRecoveredEditsReplayCompaction under hadoop2 profile (Revision 1479716)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
enis : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/util/FSUtils.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestHRegion.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13650861" author="hudson" created="Tue, 7 May 2013 14:18:52 +0000"  >&lt;p&gt;Integrated in hbase-0.95-on-hadoop2 #89 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.95-on-hadoop2/89/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.95-on-hadoop2/89/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8478&quot; title=&quot;HBASE-2231 breaks TestHRegion#testRecoveredEditsReplayCompaction under hadoop2 profile&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8478&quot;&gt;&lt;del&gt;HBASE-8478&lt;/del&gt;&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2231&quot; title=&quot;Compaction events should be written to HLog&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2231&quot;&gt;&lt;del&gt;HBASE-2231&lt;/del&gt;&lt;/a&gt; breaks TestHRegion#testRecoveredEditsReplayCompaction under hadoop2 profile (Revision 1479717)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
enis : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/util/FSUtils.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestHRegion.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13650910" author="hudson" created="Tue, 7 May 2013 14:54:44 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #518 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/518/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/518/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8478&quot; title=&quot;HBASE-2231 breaks TestHRegion#testRecoveredEditsReplayCompaction under hadoop2 profile&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8478&quot;&gt;&lt;del&gt;HBASE-8478&lt;/del&gt;&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2231&quot; title=&quot;Compaction events should be written to HLog&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2231&quot;&gt;&lt;del&gt;HBASE-2231&lt;/del&gt;&lt;/a&gt; breaks TestHRegion#testRecoveredEditsReplayCompaction under hadoop2 profile (Revision 1479716)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
enis : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/util/FSUtils.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestHRegion.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13665476" author="jdcryans" created="Thu, 23 May 2013 18:42:26 +0000"  >&lt;p&gt;The new INFO logging seems kinda chatty (and it shows up on multiple lines):&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2013-05-23 11:38:12,955 INFO  [RegionServer:0;172.21.3.117,57009,1369334164639-smallCompactions-1369334211720] org.apache.hadoop.hbase.regionserver.wal.HLogUtil: Appended compaction marker tableName: &quot;TestTable&quot;
encodedRegionName: &quot;338447e35d9c2b5b0a38e982c08cbf09&quot;
familyName: &quot;info&quot;
compactionInput: &quot;515e42ec2ef746fa86a5ca7acbc58aed&quot;
compactionInput: &quot;8abc6ae8c4754484b2628a4f4909342c&quot;
compactionInput: &quot;303b7f1767b24408a55813142a5618c8&quot;
compactionInput: &quot;0f93806c7ecf43a487f0c5dcc2de911f&quot;
compactionOutput: &quot;1bff72a0b8664a0b8072049a1899e908&quot;
storeHomeDir: &quot;info&quot;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I&apos;m not sure what the value is.&lt;/p&gt;</comment>
                            <comment id="13665477" author="khemani" created="Thu, 23 May 2013 18:44:20 +0000"  >&lt;p&gt;Hi, Prakash Khemani is no longer at Facebook so this email address is no longer being monitored. If you need assistance, please contact another person who is currently at the company.&lt;/p&gt;</comment>
                            <comment id="13665623" author="enis" created="Thu, 23 May 2013 20:32:52 +0000"  >&lt;blockquote&gt;&lt;p&gt;The new INFO logging seems kinda chatty&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yeah, I also noticed that today. Let me do an addendum to this to change to debug. &lt;/p&gt;</comment>
                            <comment id="13665662" author="enis" created="Thu, 23 May 2013 20:55:16 +0000"  >&lt;p&gt;How about this addendum? &lt;/p&gt;</comment>
                            <comment id="13665664" author="stack" created="Thu, 23 May 2013 20:56:21 +0000"  >&lt;p&gt;Trace level it on commit?  +1&lt;/p&gt;</comment>
                            <comment id="13665760" author="stack" created="Thu, 23 May 2013 22:18:57 +0000"  >&lt;p&gt;Here is what I applied (hope you don&apos;t mind Enis).  It makes the logging of compaction append trace level.&lt;/p&gt;</comment>
                            <comment id="13665809" author="enis" created="Thu, 23 May 2013 23:00:53 +0000"  >&lt;p&gt;Np at all. &lt;/p&gt;</comment>
                            <comment id="13665985" author="hudson" created="Fri, 24 May 2013 03:56:46 +0000"  >&lt;p&gt;Integrated in hbase-0.95 #212 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.95/212/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.95/212/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2231&quot; title=&quot;Compaction events should be written to HLog&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2231&quot;&gt;&lt;del&gt;HBASE-2231&lt;/del&gt;&lt;/a&gt; Compaction events should be written to HLog; LOGGING ADDENDUM (Revision 1485874)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLogUtil.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13666086" author="hudson" created="Fri, 24 May 2013 07:54:31 +0000"  >&lt;p&gt;Integrated in hbase-0.95-on-hadoop2 #110 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.95-on-hadoop2/110/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.95-on-hadoop2/110/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2231&quot; title=&quot;Compaction events should be written to HLog&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2231&quot;&gt;&lt;del&gt;HBASE-2231&lt;/del&gt;&lt;/a&gt; Compaction events should be written to HLog; LOGGING ADDENDUM (Revision 1485874)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLogUtil.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13666144" author="hudson" created="Fri, 24 May 2013 09:19:53 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #541 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/541/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/541/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2231&quot; title=&quot;Compaction events should be written to HLog&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2231&quot;&gt;&lt;del&gt;HBASE-2231&lt;/del&gt;&lt;/a&gt; Compaction events should be written to HLog; LOGGING ADDENDUM (Revision 1485873)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLogUtil.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13666156" author="hudson" created="Fri, 24 May 2013 09:29:00 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #4141 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/4141/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/4141/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2231&quot; title=&quot;Compaction events should be written to HLog&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2231&quot;&gt;&lt;del&gt;HBASE-2231&lt;/del&gt;&lt;/a&gt; Compaction events should be written to HLog; LOGGING ADDENDUM (Revision 1485873)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLogUtil.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12500419">HBASE-3604</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12463847">HBASE-2519</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12456730">HBASE-2238</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                            <outwardlinks description="breaks">
                                        <issuelink>
            <issuekey id="12645745">HBASE-8478</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12548325" name="2231-testcase-0.94.txt" size="11873" author="yuzhihong@gmail.com" created="Mon, 8 Oct 2012 22:55:21 +0000"/>
                            <attachment id="12553930" name="2231-testcase_v2.txt" size="7990" author="stack" created="Sat, 17 Nov 2012 23:33:18 +0000"/>
                            <attachment id="12554459" name="2231-testcase_v3.txt" size="14542" author="stack" created="Wed, 21 Nov 2012 07:34:47 +0000"/>
                            <attachment id="12553886" name="2231v2.txt" size="4430" author="stack" created="Sat, 17 Nov 2012 06:02:12 +0000"/>
                            <attachment id="12554974" name="2231v3.txt" size="60132" author="stack" created="Tue, 27 Nov 2012 07:46:18 +0000"/>
                            <attachment id="12555041" name="2231v4.txt" size="104598" author="stack" created="Tue, 27 Nov 2012 18:12:57 +0000"/>
                            <attachment id="12443826" name="hbase-2231-testcase.txt" size="13973" author="tlipcon" created="Thu, 6 May 2010 05:43:52 +0000"/>
                            <attachment id="12444757" name="hbase-2231.txt" size="42570" author="tlipcon" created="Tue, 18 May 2010 01:40:24 +0000"/>
                            <attachment id="12580216" name="hbase-2231_v5.patch" size="121146" author="enis" created="Wed, 24 Apr 2013 02:03:26 +0000"/>
                            <attachment id="12580486" name="hbase-2231_v6.patch" size="121169" author="enis" created="Thu, 25 Apr 2013 06:15:24 +0000"/>
                            <attachment id="12580764" name="hbase-2231_v7-0.95.patch" size="114487" author="enis" created="Fri, 26 Apr 2013 22:16:22 +0000"/>
                            <attachment id="12584579" name="hbase-2231_v7-addendum.patch" size="1188" author="enis" created="Thu, 23 May 2013 20:55:01 +0000"/>
                            <attachment id="12580625" name="hbase-2231_v7.patch" size="121009" author="enis" created="Thu, 25 Apr 2013 23:50:13 +0000"/>
                            <attachment id="12580586" name="hbase-2231_v7.patch" size="121009" author="enis" created="Thu, 25 Apr 2013 20:58:28 +0000"/>
                            <attachment id="12584600" name="hbase-2231_v8-addendum.patch" size="1188" author="stack" created="Thu, 23 May 2013 22:18:57 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>15.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 18 Feb 2010 17:06:44 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>32470</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 28 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02ffj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>12101</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>