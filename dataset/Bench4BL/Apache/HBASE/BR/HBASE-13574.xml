<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sat Dec 03 16:52:48 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-13574/HBASE-13574.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-13574] Broken TestHBaseFsck in master with hadoop 2.6.0</title>
                <link>https://issues.apache.org/jira/browse/HBASE-13574</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Got following exception and it reproducible (I can see it in recent tests runs from other patches).&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Running org.apache.hadoop.hbase.util.TestHBaseFsck
Tests run: 51, Failures: 0, Errors: 1, Skipped: 1, Time elapsed: 348.628 sec &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.hadoop.hbase.util.TestHBaseFsck
testParallelWithRetriesHbck(org.apache.hadoop.hbase.util.TestHBaseFsck)  Time elapsed: 30.052 sec  &amp;lt;&amp;lt;&amp;lt; ERROR!
java.util.concurrent.ExecutionException: java.io.IOException: Duplicate hbck - Abort
	at java.util.concurrent.FutureTask.report(FutureTask.java:122)
	at java.util.concurrent.FutureTask.get(FutureTask.java:188)
	at org.apache.hadoop.hbase.util.TestHBaseFsck.testParallelWithRetriesHbck(TestHBaseFsck.java:634)
Caused by: java.io.IOException: Duplicate hbck - Abort
	at org.apache.hadoop.hbase.util.HBaseFsck.connect(HBaseFsck.java:473)
	at org.apache.hadoop.hbase.util.hbck.HbckTestingUtil.doFsck(HbckTestingUtil.java:53)
	at org.apache.hadoop.hbase.util.hbck.HbckTestingUtil.doFsck(HbckTestingUtil.java:43)
	at org.apache.hadoop.hbase.util.hbck.HbckTestingUtil.doFsck(HbckTestingUtil.java:38)
	at org.apache.hadoop.hbase.util.TestHBaseFsck$2RunHbck.call(TestHBaseFsck.java:625)
	at org.apache.hadoop.hbase.util.TestHBaseFsck$2RunHbck.call(TestHBaseFsck.java:621)
	at java.util.concurrent.FutureTask.run(FutureTask.java:262)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
	at java.lang.Thread.run(Thread.java:745)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12824253">HBASE-13574</key>
            <summary>Broken TestHBaseFsck in master with hadoop 2.6.0</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="octo47">Andrey Stepachev</assignee>
                                    <reporter username="octo47">Andrey Stepachev</reporter>
                        <labels>
                    </labels>
                <created>Mon, 27 Apr 2015 12:16:30 +0000</created>
                <updated>Sat, 4 Jul 2015 12:49:18 +0000</updated>
                            <resolved>Wed, 3 Jun 2015 01:21:57 +0000</resolved>
                                    <version>2.0.0</version>
                                                    <component>test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="14514001" author="octo47" created="Mon, 27 Apr 2015 12:18:37 +0000"  >&lt;p&gt;it seems introduced by &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13339&quot; title=&quot;Update default Hadoop version to latest for master&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13339&quot;&gt;&lt;del&gt;HBASE-13339&lt;/del&gt;&lt;/a&gt;, something in hadoop-2.6 makes it broken.&lt;/p&gt;</comment>
                            <comment id="14514023" author="octo47" created="Mon, 27 Apr 2015 12:23:31 +0000"  >&lt;p&gt;reverting &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13339&quot; title=&quot;Update default Hadoop version to latest for master&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13339&quot;&gt;&lt;del&gt;HBASE-13339&lt;/del&gt;&lt;/a&gt; makes test run, so can confirm that &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13339&quot; title=&quot;Update default Hadoop version to latest for master&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13339&quot;&gt;&lt;del&gt;HBASE-13339&lt;/del&gt;&lt;/a&gt; introduced problem (suppose somewhere in proxy and close() method, will dig deeper).&lt;/p&gt;</comment>
                            <comment id="14514275" author="octo47" created="Mon, 27 Apr 2015 15:21:21 +0000"  >&lt;p&gt;It seems that test is broken due of the new create retry policy in hadoop 2.6. &lt;br/&gt;
Namenode proxy now created with custom RetryPolicy for AlreadyBeingCreatedException which&lt;br/&gt;
is implies timeout on this operations up to HdfsConstants.LEASE_SOFTLIMIT_PERIOD (60seconds).&lt;br/&gt;
So we should expect that create can execute as minimum as this constant if file already exists.&lt;br/&gt;
So for now we can fix that by hardcoding greater timeouts to HBaseFsck (for now they &lt;br/&gt;
are 15 seconds in test and 30seconds in HbaseFsck itself).&lt;br/&gt;
This change should not break production usage of HBaseFsck, except of it will take longer to&lt;br/&gt;
find out that other instance of HbaseFsck is running.&lt;/p&gt;</comment>
                            <comment id="14514558" author="hadoopqa" created="Mon, 27 Apr 2015 18:02:06 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12728427/HBASE-13574.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12728427/HBASE-13574.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit f2e1238f9812ebe0257ad4b3af1200230231529a.&lt;br/&gt;
  ATTACHMENT ID: 12728427&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.1 2.5.2 2.6.0)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.regionserver.compactions.TestCompactionWithThroughputController&lt;br/&gt;
                  org.apache.hadoop.hbase.util.TestHBaseFsck&lt;br/&gt;
                  org.apache.hadoop.hbase.regionserver.TestRegionServerNoMaster&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core zombie tests&lt;/font&gt;.  There are 1 zombie test(s): &lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/13837//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/13837//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/13837//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/13837//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/13837//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/13837//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/13837//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/13837//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14514562" author="octo47" created="Mon, 27 Apr 2015 18:03:50 +0000"  >&lt;p&gt;hm, need to fix that properly for 2.6. &lt;/p&gt;</comment>
                            <comment id="14514619" author="octo47" created="Mon, 27 Apr 2015 18:26:38 +0000"  >&lt;p&gt;Ok, here is a fix, that broke things: &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-6478&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HDFS-6478&lt;/a&gt;.&lt;br/&gt;
Prior to it RemoteException didn&apos;t handled properly.&lt;/p&gt;</comment>
                            <comment id="14514662" author="octo47" created="Mon, 27 Apr 2015 18:39:35 +0000"  >&lt;p&gt;created issue for that in HDFS project &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-8270&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HDFS-8270&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14514666" author="ndimiduk" created="Mon, 27 Apr 2015 18:40:47 +0000"  >&lt;p&gt;I reverted &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13339&quot; title=&quot;Update default Hadoop version to latest for master&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13339&quot;&gt;&lt;del&gt;HBASE-13339&lt;/del&gt;&lt;/a&gt; because the build is consistently broken, which means it&apos;s been pulled out from under you. You&apos;ll need to include the version bump in your patch if you want the build bot to do it work.&lt;/p&gt;</comment>
                            <comment id="14514670" author="octo47" created="Mon, 27 Apr 2015 18:42:34 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ndimiduk&quot; class=&quot;user-hover&quot; rel=&quot;ndimiduk&quot;&gt;Nick Dimiduk&lt;/a&gt; thanks, I think that we could do nothing there.&lt;br/&gt;
it should be fixed upstream in hdfs. seems that is anyway&lt;br/&gt;
wrong behaviour to retry for existent file almost 1 minute.&lt;br/&gt;
that as mininum should be configurable.&lt;/p&gt;</comment>
                            <comment id="14514749" author="ndimiduk" created="Mon, 27 Apr 2015 19:20:22 +0000"  >&lt;p&gt;Thanks for digging into this one &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=octo47&quot; class=&quot;user-hover&quot; rel=&quot;octo47&quot;&gt;Andrey Stepachev&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14570096" author="syuanjiang" created="Wed, 3 Jun 2015 01:21:57 +0000"  >&lt;p&gt;The fix in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13732&quot; title=&quot;TestHBaseFsck#testParallelWithRetriesHbck fails intermittently&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13732&quot;&gt;&lt;del&gt;HBASE-13732&lt;/del&gt;&lt;/a&gt; should resolve this issue.  In Windows env that has &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-2&quot; title=&quot;Reused Keys and Values fail with a Combiner&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-2&quot;&gt;&lt;del&gt;HADOOP-2&lt;/del&gt;&lt;/a&gt;.7, without patch, this test would fail 100%; with this patch, the test passed.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12785919">HBASE-13339</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12824379">HDFS-8270</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12831558">HBASE-13732</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12831558">HBASE-13732</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12825758">HBASE-13591</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12785919">HBASE-13339</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12718018">HDFS-6478</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12728427" name="HBASE-13574.patch" size="2259" author="octo47" created="Mon, 27 Apr 2015 15:23:26 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 27 Apr 2015 18:02:06 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 26 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2dsvz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>