<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 02 20:18:41 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-12/HBASE-12.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-12] when hbase regionserver restarts, it says &quot;impossible state for createLease()&quot;</title>
                <link>https://issues.apache.org/jira/browse/HBASE-12</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;I restarted a regionserver, and got this error in its logs:&lt;/p&gt;

&lt;p&gt;org.apache.hadoop.ipc.RemoteException: java.io.IOException: java.lang.AssertionError: Impossible state for createLease(): Lease -435227488/-435227488 is still held.&lt;br/&gt;
        at org.apache.hadoop.hbase.Leases.createLease(Leases.java:145)&lt;br/&gt;
        at org.apache.hadoop.hbase.HMaster.regionServerStartup(HMaster.java:1278&lt;br/&gt;
)&lt;br/&gt;
        at sun.reflect.GeneratedMethodAccessor11.invoke(Unknown Source)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Unknown Source)&lt;br/&gt;
        at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:379)&lt;br/&gt;
        at org.apache.hadoop.ipc.Server$Handler.run(Server.java:596)&lt;/p&gt;

&lt;p&gt;        at org.apache.hadoop.ipc.Client.call(Client.java:482)&lt;br/&gt;
        at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:184)&lt;br/&gt;
        at $Proxy0.regionServerStartup(Unknown Source)&lt;br/&gt;
        at org.apache.hadoop.hbase.HRegionServer.reportForDuty(HRegionServer.jav&lt;br/&gt;
a:1025)&lt;br/&gt;
        at org.apache.hadoop.hbase.HRegionServer.run(HRegionServer.java:659)&lt;br/&gt;
        at java.lang.Thread.run(Unknown Source)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12384041">HBASE-12</key>
            <summary>when hbase regionserver restarts, it says &quot;impossible state for createLease()&quot;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stack">stack</assignee>
                                    <reporter username="bien">Michael Bieniosek</reporter>
                        <labels>
                    </labels>
                <created>Thu, 6 Dec 2007 02:14:50 +0000</created>
                <updated>Fri, 22 Aug 2008 21:13:02 +0000</updated>
                            <resolved>Tue, 15 Apr 2008 03:36:00 +0000</resolved>
                                    <version>0.2.0</version>
                                    <fixVersion>0.1.2</fixVersion>
                    <fixVersion>0.2.0</fixVersion>
                                    <component>regionserver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12556655" author="bryanduxbury" created="Mon, 7 Jan 2008 19:12:27 +0000"  >&lt;p&gt;Did this actually cause any problems? Did the Region Server continue to start up ok, or is this just a spurious error message?&lt;/p&gt;</comment>
                            <comment id="12556658" author="bien" created="Mon, 7 Jan 2008 19:17:47 +0000"  >&lt;p&gt;I can&apos;t remember exactly.  I believe the regionserver keeps trying to connect, until eventually the old lease times out on the master.  &lt;/p&gt;</comment>
                            <comment id="12559207" author="jimk" created="Tue, 15 Jan 2008 20:03:46 +0000"  >&lt;p&gt;Is this still a problem? When did it last occur?&lt;/p&gt;</comment>
                            <comment id="12560135" author="stack" created="Thu, 17 Jan 2008 22:53:19 +0000"  >&lt;p&gt;Happened this morning on a pset machine (About 2 weeks behind TRUNK).  Here is excerpt from shutdown followed closely by restart:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
...
2008-01-16 03:17:06,124 INFO org.apache.hadoop.hbase.HRegionServer: worker thread exiting
2008-01-16 03:17:06,124 INFO org.apache.hadoop.hbase.HRegionServer: Shutdown thread complete
2008-01-16 03:17:09,755 DEBUG org.apache.hadoop.hbase.HRegionServer: Telling master we are up
2008-01-16 03:17:09,790 WARN org.apache.hadoop.hbase.HRegionServer: error telling master we are up
org.apache.hadoop.ipc.RemoteException: java.io.IOException: java.lang.AssertionError: Impossible state &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; createLease(): Lease -1387125223/-1387125223 is still held.
        at org.apache.hadoop.hbase.Leases.createLease(Leases.java:145)
        at org.apache.hadoop.hbase.HMaster.regionServerStartup(HMaster.java:1302) 
        at sun.reflect.GeneratedMethodAccessor6.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:379) 
        at org.apache.hadoop.ipc.Server$Handler.run(Server.java:596)
        
        at org.apache.hadoop.ipc.Client.call(Client.java:482)
        at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:184)
        at $Proxy0.regionServerStartup(Unknown Source)
        at org.apache.hadoop.hbase.HRegionServer.reportForDuty(HRegionServer.java:1073)
        at org.apache.hadoop.hbase.HRegionServer.run(HRegionServer.java:688)
        at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(Unknown Source)
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Goes on and on... will try and get master side of things....&lt;/p&gt;</comment>
                            <comment id="12560195" author="stack" created="Fri, 18 Jan 2008 02:05:44 +0000"  >&lt;p&gt;Here&apos;s more info...&lt;/p&gt;

&lt;p&gt;Does above exceptions for 4 hours and then...&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
...
2008-01-16 07:18:58,757 DEBUG org.apache.hadoop.hbase.HRegionServer: Done telling master we are up
2008-01-16 07:18:58,757 DEBUG org.apache.hadoop.hbase.HRegionServer: Config from master: fs.&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;.name=XX.XX.XX.XX:10000
2008-01-16 07:18:58,757 DEBUG org.apache.hadoop.hbase.HRegionServer: Config from master: hbase.rootdir=/hbase/XX.XX.XX.XX
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;... then it does this... (which don&apos;t look too pretty):&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
...
2008-01-16 07:18:59,517 INFO org.apache.hadoop.hbase.HRegionServer: HRegionServer started at: XX.XX.XX.232:60020
2008-01-16 07:18:59,517 INFO org.apache.hadoop.ipc.Server: IPC Server handler 9 on 60020: starting
2008-01-16 07:36:01,780 INFO org.apache.hadoop.hbase.HRegionServer: MSG_REGION_OPEN : .META.,,1
2008-01-16 07:36:01,804 DEBUG org.apache.hadoop.hbase.HStore: starting .META.,,1/info (1028785192/info) (no reconstruction log)
2008-01-16 07:36:01,832 DEBUG org.apache.hadoop.hbase.HStore: maximum sequence id &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; hstore .META.,,1/info (1028785192/info) is 26067834
2008-01-16 07:36:01,852 DEBUG org.apache.hadoop.hbase.HRegion: Next sequence id &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; region .META.,,1 is 26067835
2008-01-16 07:36:01,853 INFO org.apache.hadoop.hbase.HRegion: region .META.,,1 available
2008-01-16 07:36:01,854 DEBUG org.apache.hadoop.hbase.HLog: changing sequence number from 0 to 26067835
2008-01-16 07:37:04,137 INFO org.apache.hadoop.hbase.HRegionServer: MSG_REGION_OPEN : .META.,,1
2008-01-16 07:37:10,144 INFO org.apache.hadoop.hbase.HRegionServer: MSG_REGION_OPEN : .META.,,1
2008-01-16 07:37:21,476 INFO org.apache.hadoop.hbase.HRegionServer: MSG_REGION_OPEN : .META.,,1
2008-01-16 07:39:01,468 INFO org.apache.hadoop.hbase.HRegionServer: MSG_REGION_OPEN : .META.,,1
2008-01-16 07:39:22,489 INFO org.apache.hadoop.hbase.HRegionServer: MSG_REGION_OPEN : .META.,,1
2008-01-16 07:40:27,559 INFO org.apache.hadoop.hbase.HRegionServer: MSG_REGION_OPEN : .META.,,1
2008-01-16 07:41:12,603 INFO org.apache.hadoop.hbase.HRegionServer: MSG_REGION_OPEN : .META.,,1
2008-01-16 07:41:27,619 INFO org.apache.hadoop.hbase.HRegionServer: MSG_REGION_OPEN : .META.,,1
2008-01-16 07:41:36,628 INFO org.apache.hadoop.hbase.HRegionServer: MSG_REGION_OPEN : .META.,,1
2008-01-16 07:41:42,633 INFO org.apache.hadoop.hbase.HRegionServer: MSG_REGION_OPEN : .META.,,1
2008-01-16 07:41:48,640 INFO org.apache.hadoop.hbase.HRegionServer: MSG_REGION_OPEN : .META.,,1
2008-01-16 07:41:57,650 INFO org.apache.hadoop.hbase.HRegionServer: MSG_REGION_OPEN : .META.,,1
2008-01-16 07:42:03,657 INFO org.apache.hadoop.hbase.HRegionServer: MSG_REGION_OPEN : .META.,,1
2008-01-16 07:42:21,675 INFO org.apache.hadoop.hbase.HRegionServer: MSG_REGION_OPEN : .META.,,1
2008-01-16 07:43:03,719 INFO org.apache.hadoop.hbase.HRegionServer: MSG_REGION_OPEN : .META.,,1
2008-01-16 07:46:47,721 INFO org.apache.hadoop.hbase.HRegionServer: MSG_REGION_OPEN : .META.,,1
2008-01-16 07:47:05,738 INFO org.apache.hadoop.hbase.HRegionServer: MSG_REGION_OPEN : .META.,,1
2008-01-16 07:47:11,744 INFO org.apache.hadoop.hbase.HRegionServer: MSG_REGION_OPEN : .META.,,1
2008-01-16 07:47:43,403 INFO org.apache.hadoop.hbase.HRegionServer: MSG_REGION_OPEN : .META.,,1
2008-01-16 07:47:49,408 INFO org.apache.hadoop.hbase.HRegionServer: MSG_REGION_OPEN : .META.,,1
2008-01-16 07:48:04,423 INFO org.apache.hadoop.hbase.HRegionServer: MSG_REGION_OPEN : .META.,,1
2008-01-16 07:48:37,457 INFO org.apache.hadoop.hbase.HRegionServer: MSG_REGION_OPEN : .META.,,1
2008-01-16 07:52:18,805 INFO org.apache.hadoop.hbase.HRegionServer: MSG_REGION_OPEN : .META.,,1
2008-01-16 07:52:30,817 INFO org.apache.hadoop.hbase.HRegionServer: MSG_REGION_OPEN : .META.,,1
2008-01-16 07:55:39,002 INFO org.apache.hadoop.hbase.HRegionServer: MSG_REGION_OPEN : .META.,,1
2008-01-16 07:59:40,590 INFO org.apache.hadoop.hbase.HRegionServer: MSG_REGION_OPEN : .META.,,1
2008-01-16 07:59:55,605 INFO org.apache.hadoop.hbase.HRegionServer: MSG_REGION_OPEN : .META.,,1
2008-01-16 08:03:34,072 INFO org.apache.hadoop.hbase.HRegionServer: MSG_REGION_OPEN : .META.,,1
2008-01-16 08:03:40,079 INFO org.apache.hadoop.hbase.HRegionServer: MSG_REGION_OPEN : .META.,,1
2008-01-16 08:04:01,099 INFO org.apache.hadoop.hbase.HRegionServer: MSG_REGION_OPEN : .META.,,1
2008-01-16 08:04:10,108 INFO org.apache.hadoop.hbase.HRegionServer: MSG_REGION_OPEN : .META.,,1
2008-01-16 08:04:16,113 INFO org.apache.hadoop.hbase.HRegionServer: MSG_REGION_OPEN : .META.,,1
2008-01-16 08:04:22,120 INFO org.apache.hadoop.hbase.HRegionServer: MSG_REGION_OPEN : .META.,,1
2008-01-16 08:04:46,724 INFO org.apache.hadoop.hbase.HRegionServer: MSG_REGION_OPEN : .META.,,1
2008-01-16 08:04:52,730 INFO org.apache.hadoop.hbase.HRegionServer: MSG_REGION_OPEN : .META.,,1
2008-01-16 08:05:16,754 INFO org.apache.hadoop.hbase.HRegionServer: MSG_REGION_OPEN : .META.,,1
2008-01-16 08:05:22,760 INFO org.apache.hadoop.hbase.HRegionServer: MSG_REGION_OPEN : .META.,,1
2008-01-16 08:09:11,033 INFO org.apache.hadoop.hbase.HRegionServer: MSG_REGION_OPEN : .META.,,1
2008-01-16 08:12:01,093 INFO org.apache.hadoop.hbase.HRegionServer: MSG_REGION_OPEN : .META.,,1
2008-01-16 08:12:07,100 INFO org.apache.hadoop.hbase.HRegionServer: MSG_REGION_OPEN : .META.,,1
2008-01-16 08:13:55,994 INFO org.apache.hadoop.hbase.HRegionServer: MSG_REGION_OPEN : .META.,,1
2008-01-16 08:14:05,002 INFO org.apache.hadoop.hbase.HRegionServer: MSG_REGION_OPEN : .META.,,1
2008-01-16 08:17:20,146 WARN org.apache.hadoop.hbase.HRegionServer: Processing message (Retry: 0)
java.net.SocketTimeoutException: timed out waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; rpc response
        at org.apache.hadoop.ipc.Client.call(Client.java:484)
        at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:184)
        at $Proxy0.regionServerReport(Unknown Source)
        at org.apache.hadoop.hbase.HRegionServer.run(HRegionServer.java:714)
        at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(Unknown Source)
2008-01-16 08:17:20,147 FATAL org.apache.hadoop.hbase.HRegionServer: unable to report to master &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; 63015 milliseconds - aborting server
..
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;.. and shuts itself down.&lt;/p&gt;

&lt;p&gt;Back later w/ master side of things...&lt;/p&gt;</comment>
                            <comment id="12566379" author="jdcryans" created="Wed, 6 Feb 2008 22:28:51 +0000"  >&lt;p&gt;Got pretty much the same thing here. Fetched 0.17-dev, compiled, config hadoop, started dfs, config hbase with just the master adress and regionservers (12 nodes), started hbase and then this. (sorry for long post)&lt;/p&gt;

&lt;p&gt;HBase master log :&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
...
2008-02-06 16:57:22,131 INFO org.apache.hadoop.hbase.HMaster: Root region dir: /tmp/hadoop-root/hbase/-ROOT-/70236052
2008-02-06 16:57:23,577 INFO org.apache.hadoop.hbase.HMaster: bootstrap: creating ROOT and first META regions
2008-02-06 16:57:23,792 INFO org.apache.hadoop.hbase.HLog: &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; log writer created at hdfs:&lt;span class=&quot;code-comment&quot;&gt;//192.168.0.1:9000/tmp/hadoop-root/hbase/-ROOT-/70236052/log/hlog.dat.000
&lt;/span&gt;2008-02-06 16:57:23,964 INFO org.apache.hadoop.hbase.HRegion: region -ROOT-,,0 available
2008-02-06 16:57:24,014 INFO org.apache.hadoop.hbase.HLog: &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; log writer created at hdfs:&lt;span class=&quot;code-comment&quot;&gt;//192.168.0.1:9000/tmp/hadoop-root/hbase/.META./1028785192/log/hlog.dat.000
&lt;/span&gt;2008-02-06 16:57:24,079 INFO org.apache.hadoop.hbase.HRegion: region .META.,,1 available
2008-02-06 16:57:24,217 WARN org.apache.hadoop.util.NativeCodeLoader: Unable to load &lt;span class=&quot;code-keyword&quot;&gt;native&lt;/span&gt;-hadoop library &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; your platform... using builtin-java classes where applicable
2008-02-06 16:57:25,398 INFO org.apache.hadoop.hbase.HRegion: closed -ROOT-,,0
2008-02-06 16:57:25,474 INFO org.apache.hadoop.hbase.HRegion: closed .META.,,1
2008-02-06 16:57:25,887 INFO org.apache.hadoop.metrics.jvm.JvmMetrics: Initializing RPC Metrics with serverName=60000, port=60000
2008-02-06 16:57:26,342 INFO org.apache.hadoop.hbase.HMaster: HMaster initialized on 192.168.0.1:60000
2008-02-06 16:57:26,748 INFO org.mortbay.util.Credential: Checking Resource aliases
2008-02-06 16:57:26,959 INFO org.mortbay.http.HttpServer: Version Jetty/5.1.4
2008-02-06 16:57:26,963 INFO org.mortbay.util.Container: Started HttpContext[/&lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt;,/&lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt;]
2008-02-06 16:57:26,963 INFO org.mortbay.util.Container: Started HttpContext[/logs,/logs]
2008-02-06 16:57:28,489 INFO org.mortbay.util.Container: Started org.mortbay.jetty.servlet.WebApplicationHandler@8997d1
2008-02-06 16:57:28,670 INFO org.mortbay.util.Container: Started WebApplicationContext[/,/]
2008-02-06 16:57:29,815 INFO org.mortbay.util.Container: Started org.mortbay.jetty.servlet.WebApplicationHandler@1b7ae22
2008-02-06 16:57:29,827 INFO org.mortbay.util.Container: Started WebApplicationContext[/api,&lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt;]
2008-02-06 16:57:29,839 INFO org.mortbay.http.SocketListener: Started SocketListener on 0.0.0.0:60010
2008-02-06 16:57:29,839 INFO org.mortbay.util.Container: Started org.mortbay.jetty.Server@b301f2
2008-02-06 16:57:29,840 INFO org.apache.hadoop.ipc.Server: IPC Server Responder: starting
2008-02-06 16:57:29,842 INFO org.apache.hadoop.ipc.Server: IPC Server listener on 60000: starting
2008-02-06 16:57:29,873 INFO org.apache.hadoop.ipc.Server: IPC Server handler 0 on 60000: starting
2008-02-06 16:57:29,874 INFO org.apache.hadoop.ipc.Server: IPC Server handler 1 on 60000: starting
2008-02-06 16:57:29,875 INFO org.apache.hadoop.ipc.Server: IPC Server handler 2 on 60000: starting
2008-02-06 16:57:29,876 INFO org.apache.hadoop.ipc.Server: IPC Server handler 3 on 60000: starting
2008-02-06 16:57:29,877 INFO org.apache.hadoop.ipc.Server: IPC Server handler 4 on 60000: starting
2008-02-06 16:57:29,878 INFO org.apache.hadoop.ipc.Server: IPC Server handler 5 on 60000: starting
2008-02-06 16:57:29,878 INFO org.apache.hadoop.ipc.Server: IPC Server handler 6 on 60000: starting
2008-02-06 16:57:29,879 INFO org.apache.hadoop.ipc.Server: IPC Server handler 7 on 60000: starting
2008-02-06 16:57:29,880 INFO org.apache.hadoop.ipc.Server: IPC Server handler 8 on 60000: starting
2008-02-06 16:57:29,881 INFO org.apache.hadoop.ipc.Server: IPC Server handler 9 on 60000: starting
2008-02-06 16:57:29,923 INFO org.apache.hadoop.hbase.HMaster: received start message from: 127.0.0.1:60020
2008-02-06 16:57:29,962 INFO org.apache.hadoop.hbase.HMaster: received start message from: 127.0.0.1:60020
2008-02-06 16:57:29,972 INFO org.apache.hadoop.hbase.HMaster: received start message from: 127.0.0.1:60020
2008-02-06 16:57:29,982 INFO org.apache.hadoop.hbase.HMaster: received start message from: 127.0.0.1:60020
2008-02-06 16:57:29,995 INFO org.apache.hadoop.ipc.Server: IPC Server handler 1 on 60000, call regionServerStartup(address: 127.0.0.1:60020, startcode: 1202333840817, load: (requests: 0 regions: 0)) from 192.168.0.5:43524: error: java.io.IOException: java.lang.AssertionError: Impossible state &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; createLease(): Lease -1109690057/-1109690057 is still held.
java.io.IOException: java.lang.AssertionError: Impossible state &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; createLease(): Lease -1109690057/-1109690057 is still held.
        at org.apache.hadoop.hbase.Leases.createLease(Leases.java:145)
        at org.apache.hadoop.hbase.HMaster.regionServerStartup(HMaster.java:1310)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.hadoop.hbase.ipc.HbaseRPC$Server.call(HbaseRPC.java:413)
        at org.apache.hadoop.ipc.Server$Handler.run(Server.java:910)
... many times

and &lt;span class=&quot;code-keyword&quot;&gt;finally&lt;/span&gt;

2008-02-06 17:14:44,701 INFO org.apache.hadoop.hbase.HMaster: Cancelling lease &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; 127.0.0.1:60020
2008-02-06 17:14:44,701 INFO org.apache.hadoop.hbase.HMaster: received start message from: 127.0.0.1:60020
2008-02-06 17:14:44,701 INFO org.apache.hadoop.hbase.HMaster: Region server 127.0.0.1:60020: MSG_REPORT_EXITING -- lease cancelled
2008-02-06 17:14:45,289 INFO org.apache.hadoop.hbase.HMaster: Cancelling lease &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; 127.0.0.1:60020
2008-02-06 17:14:46,901 INFO org.apache.hadoop.hbase.HMaster: All user tables quiesced. Proceeding with shutdown
2008-02-06 17:14:46,904 INFO org.apache.hadoop.hbase.HMaster$MetaScanner: HMaster.metaScanner exiting
2008-02-06 17:14:47,161 INFO org.apache.hadoop.hbase.HMaster: All user tables quiesced. Proceeding with shutdown
2008-02-06 17:14:47,587 INFO org.apache.hadoop.hbase.HMaster: All user tables quiesced. Proceeding with shutdown
2008-02-06 17:14:47,628 INFO org.apache.hadoop.hbase.HMaster: All user tables quiesced. Proceeding with shutdown
2008-02-06 17:14:48,936 INFO org.apache.hadoop.hbase.HMaster: Stopping infoServer
2008-02-06 17:14:48,937 INFO org.mortbay.util.ThreadedServer: Stopping Acceptor ServerSocket[addr=0.0.0.0/0.0.0.0,port=0,localport=60010]
2008-02-06 17:14:48,967 INFO org.mortbay.http.SocketListener: Stopped SocketListener on 0.0.0.0:60010
2008-02-06 17:14:49,307 INFO org.mortbay.util.Container: Stopped HttpContext[/&lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt;,/&lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt;]
2008-02-06 17:14:49,756 INFO org.mortbay.util.Container: Stopped HttpContext[/logs,/logs]
2008-02-06 17:14:49,757 INFO org.mortbay.util.Container: Stopped org.mortbay.jetty.servlet.WebApplicationHandler@1a4c5b4
2008-02-06 17:14:50,087 INFO org.mortbay.util.Container: Stopped WebApplicationContext[/,/]
2008-02-06 17:14:50,087 INFO org.mortbay.util.Container: Stopped org.mortbay.jetty.servlet.WebApplicationHandler@5b675e
2008-02-06 17:14:50,466 INFO org.mortbay.util.Container: Stopped WebApplicationContext[/api,&lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt;]
2008-02-06 17:14:50,467 INFO org.mortbay.util.Container: Stopped org.mortbay.jetty.Server@a00185
2008-02-06 17:14:50,467 INFO org.apache.hadoop.ipc.Server: Stopping server on 60000
2008-02-06 17:14:50,469 INFO org.apache.hadoop.ipc.Server: IPC Server handler 0 on 60000: exiting
2008-02-06 17:14:50,469 INFO org.apache.hadoop.ipc.Server: IPC Server handler 1 on 60000: exiting
2008-02-06 17:14:50,469 INFO org.apache.hadoop.ipc.Server: IPC Server handler 2 on 60000: exiting
2008-02-06 17:14:50,470 INFO org.apache.hadoop.ipc.Server: IPC Server handler 8 on 60000: exiting
2008-02-06 17:14:50,470 INFO org.apache.hadoop.ipc.Server: IPC Server handler 7 on 60000: exiting
2008-02-06 17:14:50,470 INFO org.apache.hadoop.ipc.Server: IPC Server handler 9 on 60000: exiting
2008-02-06 17:14:50,470 INFO org.apache.hadoop.ipc.Server: IPC Server handler 6 on 60000: exiting
2008-02-06 17:14:50,471 INFO org.apache.hadoop.ipc.Server: Stopping IPC Server listener on 60000
2008-02-06 17:14:50,471 INFO org.apache.hadoop.ipc.Server: IPC Server handler 3 on 60000: exiting
2008-02-06 17:14:50,472 INFO org.apache.hadoop.ipc.Server: IPC Server handler 4 on 60000: exiting
2008-02-06 17:14:50,473 INFO org.apache.hadoop.ipc.Server: IPC Server handler 5 on 60000: exiting
2008-02-06 17:14:50,483 INFO org.apache.hadoop.hbase.Leases: HMaster closing leases
2008-02-06 17:14:50,484 INFO org.apache.hadoop.hbase.Leases$LeaseMonitor: HMaster.leaseChecker exiting
2008-02-06 17:14:50,485 INFO org.apache.hadoop.hbase.Leases: HMaster closed leases
2008-02-06 17:14:50,495 INFO org.apache.hadoop.ipc.Server: Stopping IPC Server Responder
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;regionservers stop after few seconds, unable to stop master properly.&lt;/p&gt;</comment>
                            <comment id="12566771" author="jdcryans" created="Thu, 7 Feb 2008 20:12:25 +0000"  >&lt;p&gt;Got the same thing today with 0.2.0 from trunk. Messages are different like  &quot;Lease -1109690057/-1109690057 is still held &quot;is now  lease &apos;127.0.0.1:60020&apos; already exists&quot;. Seems to me that each regionservers are asking for the same lease. Is it configuration related?&lt;/p&gt;</comment>
                            <comment id="12566776" author="stack" created="Thu, 7 Feb 2008 20:19:48 +0000"  >&lt;p&gt;Are regionservers bouncing Jean-Daniel?  That is, are they going down then coming back up again soon after?  Check the logs under the regionservers themselves to see.  Enable DEBUG too.  You&apos;ll get picture of whats going on (See FAQ for how).&lt;/p&gt;</comment>
                            <comment id="12566787" author="jdcryans" created="Thu, 7 Feb 2008 20:46:11 +0000"  >&lt;p&gt;Regionservers starts right away with (here node11) :&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2008-02-07 17:29:08,057 WARN org.apache.hadoop.hbase.HRegionServer: error telling master we are up
org.apache.hadoop.ipc.RemoteException: java.io.IOException: java.lang.IllegalStateException: lease &apos;127.0.0.1:60020&apos; already exists
        at org.apache.hadoop.hbase.Leases.createLease(Leases.java:142)
        at org.apache.hadoop.hbase.HMaster.regionServerStartup(HMaster.java:1310)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.hadoop.hbase.ipc.HbaseRPC$Server.call(HbaseRPC.java:413)
        at org.apache.hadoop.ipc.Server$Handler.run(Server.java:910)

        at org.apache.hadoop.ipc.Client.call(Client.java:512)
        at org.apache.hadoop.hbase.ipc.HbaseRPC$Invoker.invoke(HbaseRPC.java:210)
        at $Proxy0.regionServerStartup(Unknown Source)
        at org.apache.hadoop.hbase.HRegionServer.reportForDuty(HRegionServer.java:1014)
        at org.apache.hadoop.hbase.HRegionServer.run(HRegionServer.java:633)
        at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:619)
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Then it proceeds with shutting down.&lt;/p&gt;</comment>
                            <comment id="12566793" author="stack" created="Thu, 7 Feb 2008 20:56:47 +0000"  >&lt;p&gt;Can you try shutting down the cluster to make it go away?  Do you have a recipe for triggering the issue?  That&apos;d help.  Thanks.&lt;/p&gt;</comment>
                            <comment id="12566795" author="stack" created="Thu, 7 Feb 2008 21:00:06 +0000"  >&lt;p&gt;Could your machines be misconfigured?  Are they all reporting in to the master that they are 127.0.0.1:60020?&lt;/p&gt;</comment>
                            <comment id="12566796" author="jdcryans" created="Thu, 7 Feb 2008 21:06:27 +0000"  >&lt;p&gt;For your 12:56 comment stack, nope, it always does. But the DFS works in distributed mode.&lt;/p&gt;

&lt;p&gt;I also come to think it&apos;s machine misconfiguration. They all have the same log so they are reporting that they are 127.0.0.1:60020 but I&apos;m not really sure where to look first. OS digging time...&lt;/p&gt;</comment>
                            <comment id="12568309" author="jdcryans" created="Tue, 12 Feb 2008 20:43:55 +0000"  >&lt;p&gt;Finally solved for me. I had to insert the dfs.datanode.dns.interface property in hbase-site.xml to have the regionservers send their good IP (and not 127.0.0.1). &lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                            <comment id="12570065" author="bryanduxbury" created="Tue, 19 Feb 2008 00:45:57 +0000"  >&lt;p&gt;What&apos;s the status of this issue? Is it still alive? The latest comments seem to indicate it was a DNS misconfiguration problem. Stack, could that have been the cause of your experience with the issue?&lt;/p&gt;</comment>
                            <comment id="12570359" author="stack" created="Tue, 19 Feb 2008 18:33:49 +0000"  >&lt;p&gt;The misconfiguration I believe was cause of Jean-Daniel&apos;s &apos;Impossible Lease&apos; exceptions but I don&apos;t believe it cause of the original report nor my subsequent observance..  &lt;/p&gt;</comment>
                            <comment id="12570361" author="jimk" created="Tue, 19 Feb 2008 18:39:33 +0000"  >&lt;p&gt;This problem can arise when a region server restarts before its original lease times out.&lt;/p&gt;</comment>
                            <comment id="12570405" author="bryanduxbury" created="Tue, 19 Feb 2008 20:02:25 +0000"  >&lt;p&gt;What should we do when this exception shows up? Immediately cancel the existing lease? Let the lease time out and have the RegionServer keep retrying?&lt;/p&gt;

&lt;p&gt;I think we should add to the error message and describe possible causes and resolutions. Something like &quot;Check your DNS configuration so that all region servers are reporting their true IPs and not 127.0.0.1. Otherwise, this problem will resolve itself in $&lt;/p&gt;
{lease-timeout}
&lt;p&gt; seconds.&quot;&lt;/p&gt;</comment>
                            <comment id="12570413" author="jimk" created="Tue, 19 Feb 2008 20:11:47 +0000"  >&lt;p&gt;I like your latter suggestion:&lt;/p&gt;

&lt;p&gt;&amp;gt; Bryan Duxbury - 19/Feb/08 12:02 PM&lt;br/&gt;
&amp;gt; I think we should add to the error message and describe possible causes and resolutions.&lt;br/&gt;
&amp;gt; Something like &quot;Check your DNS configuration so that all region servers are reporting their true&lt;br/&gt;
&amp;gt; IPs and not 127.0.0.1. Otherwise, this problem will resolve itself in $&lt;/p&gt;
{lease-timeout}
&lt;p&gt; seconds.&quot;&lt;/p&gt;

&lt;p&gt;But the region server should stay alive until lease timeout period expires and report for duty&lt;br/&gt;
again at that time.&lt;/p&gt;</comment>
                            <comment id="12570427" author="jdcryans" created="Tue, 19 Feb 2008 20:36:32 +0000"  >&lt;p&gt;Bryan, I like your suggestion too. Would have saved me a couple of hours searching in my OS, Hadoop and HBase configurations.&lt;/p&gt;

&lt;p&gt;And how come the dfs.datanode.dns.interface isn&apos;t documented anyway?&lt;br/&gt;
I know this is HBase&apos;s Jira but HDFS was working fine even if it was set to default, unlike my HBase setup.&lt;/p&gt;

&lt;p&gt;Thx&lt;/p&gt;
</comment>
                            <comment id="12576346" author="jimk" created="Fri, 7 Mar 2008 19:44:12 +0000"  >&lt;p&gt;The solution for &quot;impossible state for createLease&quot; is addressed by &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-495&quot; title=&quot;No server address listed in .META.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-495&quot;&gt;&lt;del&gt;HBASE-495&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;However, leaving this issue open until &quot;friendlier&quot; error message is added.&lt;/p&gt;</comment>
                            <comment id="12588651" author="jimk" created="Mon, 14 Apr 2008 16:54:36 +0000"  >&lt;p&gt;Provides friendly message while region server is waiting for old lease to expire&lt;/p&gt;</comment>
                            <comment id="12588652" author="jimk" created="Mon, 14 Apr 2008 16:56:17 +0000"  >&lt;p&gt;Passes tests. Please review.&lt;/p&gt;</comment>
                            <comment id="12588712" author="stack" created="Mon, 14 Apr 2008 18:54:27 +0000"  >&lt;p&gt;LOG.info would be better than system.out I&apos;d say... Thats where I think people will be looking.  And I like bryan&apos;s message better... And perhaps a particular exception based on IOE rather than ISE?&lt;/p&gt;</comment>
                            <comment id="12588722" author="jimk" created="Mon, 14 Apr 2008 19:06:12 +0000"  >&lt;p&gt;Uses LOG.info instead of System.out.println&lt;/p&gt;</comment>
                            <comment id="12588723" author="jimk" created="Mon, 14 Apr 2008 19:06:42 +0000"  >&lt;p&gt;Change System.out.println to LOG.info&lt;/p&gt;</comment>
                            <comment id="12588759" author="jimk" created="Mon, 14 Apr 2008 20:08:12 +0000"  >&lt;p&gt;Address comments.&lt;/p&gt;</comment>
                            <comment id="12588763" author="jimk" created="Mon, 14 Apr 2008 20:09:00 +0000"  >&lt;p&gt;Ok. this is the patch for 12.&lt;/p&gt;</comment>
                            <comment id="12588771" author="jimk" created="Mon, 14 Apr 2008 20:21:37 +0000"  >&lt;p&gt;In 0.1.x, these errors are AssertionErrors. Catch them and try to continue.&lt;/p&gt;</comment>
                            <comment id="12588781" author="stack" created="Mon, 14 Apr 2008 20:41:02 +0000"  >&lt;p&gt;Latest patch will output log about DNS and leases if we get any throwable (OOME, etc.).  That&apos;ll confuse.  Making a proposal....&lt;/p&gt;</comment>
                            <comment id="12588794" author="stack" created="Mon, 14 Apr 2008 21:11:18 +0000"  >&lt;p&gt;Alternate proposal&lt;/p&gt;</comment>
                            <comment id="12588796" author="bien" created="Mon, 14 Apr 2008 21:18:12 +0000"  >&lt;p&gt;+1 for 12-0.1.patch&lt;/p&gt;

&lt;p&gt;I don&apos;t think we should throw AssertionError in reachable code (excluding software bugs).&lt;/p&gt;</comment>
                            <comment id="12588887" author="stack" created="Tue, 15 Apr 2008 03:36:00 +0000"  >&lt;p&gt;Committed to trunk and branch.  Thanks for the review Michael.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12390381">HBASE-495</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12380114" name="12-0.1.patch" size="3444" author="stack" created="Mon, 14 Apr 2008 21:11:18 +0000"/>
                            <attachment id="12380108" name="patch.txt" size="878" author="jimk" created="Mon, 14 Apr 2008 20:21:37 +0000"/>
                            <attachment id="12380103" name="patch.txt" size="721" author="jimk" created="Mon, 14 Apr 2008 20:08:12 +0000"/>
                            <attachment id="12380092" name="patch.txt" size="746" author="jimk" created="Mon, 14 Apr 2008 19:06:12 +0000"/>
                            <attachment id="12380076" name="patch.txt" size="756" author="jimk" created="Mon, 14 Apr 2008 16:54:36 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 7 Jan 2008 19:12:27 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>24850</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 34 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0h3f3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>97816</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>