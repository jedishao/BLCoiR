<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sat Dec 03 16:54:55 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-4748/HBASE-4748.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-4748] Race between creating recovered edits for META and master assigning ROOT and META.</title>
                <link>https://issues.apache.org/jira/browse/HBASE-4748</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;1. Start a cluster.&lt;br/&gt;
2. Alter a table&lt;br/&gt;
3. Restart the master using ./hbase-daemon.sh restart master&lt;br/&gt;
4. Kill the RS after master restarts.&lt;br/&gt;
5. Start RS again.&lt;br/&gt;
6. No table operations can be performed on the table that was altered but admin.listTables() is able to list the altered table.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12530257">HBASE-4748</key>
            <summary>Race between creating recovered edits for META and master assigning ROOT and META.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="ram_krish">ramkrishna.s.vasudevan</assignee>
                                    <reporter username="ram_krish">ramkrishna.s.vasudevan</reporter>
                        <labels>
                    </labels>
                <created>Fri, 4 Nov 2011 11:22:05 +0000</created>
                <updated>Tue, 28 Aug 2012 18:16:05 +0000</updated>
                            <resolved>Tue, 28 Aug 2012 18:16:05 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="13145288" author="ram_krish" created="Mon, 7 Nov 2011 08:53:08 +0000"  >&lt;p&gt;Pls find the analysis.  Correct me if am wrong.  &lt;br/&gt;
-&amp;gt; This defect is not related to alter table.(I got it when i was trying something with alter table and so thought it is related to alter table functionality)&lt;br/&gt;
-&amp;gt; When we restart the master we issue split logs to RS.(Note that RS was also restarted) &lt;br/&gt;
-&amp;gt; Before RS could actually complete the log splitting we carry on with ROOT and META assignment.&lt;br/&gt;
-&amp;gt; AFter assigning root and meta, in AssignmentManager.joinCluster() we try to rebuild user regions and from meta scan we dont get the table and its regions.&lt;br/&gt;
Hence the table information is lost.&lt;br/&gt;
Another observation is&lt;br/&gt;
If we restart the regionserver once again (to see if the problem rectifies) and this time split logs gets completed and then root and meta tables are assigned then&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
      HRegionInfo regionInfo = region.getFirst();
      ServerName regionLocation = region.getSecond();
      &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; tableName = regionInfo.getTableNameAsString();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Here regionInfo comes as null and hence in &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
     &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; tableName = regionInfo.getTableNameAsString();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;we get null pointer exception and master aborts.&lt;/p&gt;

&lt;p&gt;I reproduced the problem in 0.92 and with 1 master and 1 RS. Will dig in more into this. &lt;/p&gt;</comment>
                            <comment id="13145358" author="ram_krish" created="Mon, 7 Nov 2011 11:46:55 +0000"  >&lt;p&gt;The problem is there is race between when the SplitLogManager completes the split of recovered edits of META and the time the assignRootAndMeta gets completed.&lt;/p&gt;

&lt;p&gt;If before the recoverd edits is finished for META by that time if ROOT and META allocation gets completed then we get this problem.  Correct me if am wrong.  Distributed log splitting not very familiar with.&lt;/p&gt;</comment>
                            <comment id="13146410" author="ram_krish" created="Tue, 8 Nov 2011 17:19:37 +0000"  >&lt;p&gt;I would like to suggest a solution to this JIRA.&lt;br/&gt;
As already said the problem is that on master restart it tries to assign ROOT and META.&lt;/p&gt;

&lt;p&gt;Before doing that if the RS carrying the ROOT and META goes down, just before master assigning ROOT and META the master will split the logs.  As part of this recovered edits will be created.&lt;br/&gt;
But before this recovered edits could be created if master tries to open META it will miss out the recovered edits and all the entries in META is gone.&lt;/p&gt;

&lt;p&gt;Can we do something like&lt;/p&gt;

&lt;p&gt;Just before we try to assign root and meta can we check the zk SPLIT node and see if there are any children in that for META recovery.&lt;/p&gt;

&lt;p&gt;If so wait till the node is deleted.  &lt;br/&gt;
May be we may have to check the same thing in ServerShutdownHandler logic also where root and META is assigned.&lt;/p&gt;

&lt;p&gt;But is it correct to go by this.  As far as my analysis i could not find anything else to sync these 2 code flows. &lt;/p&gt;

&lt;p&gt;Ideas and suggestions are welcome before i could prepare a patch.&lt;/p&gt;</comment>
                            <comment id="13146415" author="yuzhihong@gmail.com" created="Tue, 8 Nov 2011 17:25:39 +0000"  >&lt;p&gt;I think the above suggestion makes sense.&lt;/p&gt;</comment>
                            <comment id="13146908" author="ram_krish" created="Wed, 9 Nov 2011 10:13:32 +0000"  >&lt;p&gt;Two things i observed after trying out the suggested approach &lt;/p&gt;

&lt;p&gt;2 RS are there but the RS carrying META doesnot come up when the master is restarting&lt;br/&gt;
 -&amp;gt; Here as part of HMaster starting operation it will try to split the log &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.fileSystemManager. splitLogAfterStartup(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.serverManager.getOnlineServers().keySet()); 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; 
&lt;p&gt;So we can ensure that the znode splitlog node is created and it has some children. We can wait till there are no more children to proceed with META assignment. &lt;/p&gt;

&lt;p&gt;2 RS are there but the RS carrying META comes up immediately when the master is restarting and also gets registered with the master.&lt;br/&gt;
In this case &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.fileSystemManager. splitLogAfterStartup(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.serverManager.getOnlineServers().keySet()); &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; 
&lt;p&gt;Will not start the splitLog process as it sees that the logs of the server is online. So it will proceed with assign root and meta region. But by the time if the ServerShutdownhandler comes into picture and splits the logs just before master is assigning root and meta then it merges with case #1. So in case#2 if the ServerShutDownHandler does not start its action then we are again in for the trouble as the recovered edits may still may not be created. &lt;/p&gt;

&lt;p&gt;I think overall when the master restarts and before master tries to split log if the expireServer does not remove from onlineServers list(the RS that got killed when master was coming up) then master will fail splitting the logs and will carry on with root and meta assignment.&lt;/p&gt;</comment>
                            <comment id="13147082" author="ram_krish" created="Wed, 9 Nov 2011 15:05:28 +0000"  >&lt;p&gt;Any suggestions here.&lt;br/&gt;
When the HMaster is restarting and at that time if an RS goes down we have a race there between the time the expireServer gets notified and HMaster splits the logs.&lt;/p&gt;

&lt;p&gt;HMaster will split the log only if the server is not online but for the server not to be online expireServer() should get completed.&lt;br/&gt;
Because of this we cannot go with the soln that i had suggested i.e to check the splitlog node to see if there any children and wait for before assigning META&lt;/p&gt;</comment>
                            <comment id="13147222" author="lhofhansl" created="Wed, 9 Nov 2011 18:58:58 +0000"  >&lt;p&gt;@Ram, did you actually observe the 2nd behavior (without alter table)? Can this be reproduced with a test?&lt;/p&gt;</comment>
                            <comment id="13147485" author="ram_krish" created="Thu, 10 Nov 2011 04:29:57 +0000"  >&lt;p&gt;@Lars&lt;/p&gt;

&lt;p&gt;I can reproduce all the scenario mentioned here.  But with test case am not sure because it depends on the timing when expireServer() may happen.&lt;/p&gt;</comment>
                            <comment id="13147498" author="ram_krish" created="Thu, 10 Nov 2011 05:31:33 +0000"  >&lt;p&gt;Stack trace as requested by Ted&lt;br/&gt;
Master is restarting and the RS goes down and comes back (holds META and root)&lt;/p&gt;

&lt;p&gt;RS logs&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2011-11-10 17:04:31,536 INFO org.apache.hadoop.hbase.regionserver.HRegionServer: Received request to open region: -ROOT-,,0.70236052
2011-11-10 17:04:31,747 DEBUG org.apache.hadoop.hbase.zookeeper.ZKAssign: regionserver:60020-0x1335f3da72b0245 Attempting to transition node 70236052/-ROOT- from M_ZK_REGION_OFFLINE to RS_ZK_REGION_OPENING
2011-11-10 17:04:31,789 DEBUG org.apache.hadoop.hbase.zookeeper.ZKAssign: regionserver:60020-0x1335f3da72b0245 Successfully transitioned node 70236052 from M_ZK_REGION_OFFLINE to RS_ZK_REGION_OPENING
2011-11-10 17:04:31,818 DEBUG org.apache.hadoop.hbase.regionserver.HRegion: Opening region: REGION =&amp;gt; {NAME =&amp;gt; &apos;-ROOT-,,0&apos;, TableName =&amp;gt; &apos;-ROOT-&apos;, STARTKEY =&amp;gt; &apos;&apos;, ENDKEY =&amp;gt; &apos;&apos;, ENCODED =&amp;gt; 70236052,}
2011-11-10 17:04:31,856 INFO org.apache.hadoop.hbase.regionserver.HRegion: Setting up tabledescriptor config now ...
2011-11-10 17:04:31,994 DEBUG org.apache.hadoop.hbase.regionserver.HRegion: Instantiated -ROOT-,,0.70236052
2011-11-10 17:04:32,933 DEBUG org.apache.hadoop.hbase.regionserver.Store: loaded hdfs:&lt;span class=&quot;code-comment&quot;&gt;//linux76:9000/hbase/-ROOT-/70236052/info/b015599976a2484bb85564ee399976cb, isReference=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, isBulkLoadResult=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, seqid=2, majorCompaction=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
&lt;/span&gt;2011-11-10 17:04:33,371 INFO org.apache.hadoop.hbase.regionserver.HRegion: Replaying edits from hdfs:&lt;span class=&quot;code-comment&quot;&gt;//linux76:9000/hbase/-ROOT-/70236052/recovered.edits/0000000000000000004; minSequenceid=2; path=hdfs://linux76:9000/hbase/-ROOT-/70236052/recovered.edits/0000000000000000004
&lt;/span&gt;2011-11-10 17:04:33,481 DEBUG org.apache.hadoop.hbase.zookeeper.ZKAssign: regionserver:60020-0x1335f3da72b0245 Attempting to transition node 70236052/-ROOT- from RS_ZK_REGION_OPENING to RS_ZK_REGION_OPENING
2011-11-10 17:04:33,505 DEBUG org.apache.hadoop.hbase.zookeeper.ZKAssign: regionserver:60020-0x1335f3da72b0245 Successfully transitioned node 70236052 from RS_ZK_REGION_OPENING to RS_ZK_REGION_OPENING
2011-11-10 17:04:33,505 DEBUG org.apache.hadoop.hbase.regionserver.HRegion: Applied 2, skipped 0, firstSequenceidInLog=4, maxSequenceidInLog=4, path=hdfs:&lt;span class=&quot;code-comment&quot;&gt;//linux76:9000/hbase/-ROOT-/70236052/recovered.edits/0000000000000000004
&lt;/span&gt;2011-11-10 17:04:33,517 DEBUG org.apache.hadoop.hbase.regionserver.HRegion: Started memstore flush &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; -ROOT-,,0.70236052, current region memstore size 352.0; wal is &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, using passed sequenceid=4
2011-11-10 17:04:33,538 DEBUG org.apache.hadoop.hbase.regionserver.HRegion: Finished snapshotting, commencing waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; rwcc
2011-11-10 17:04:33,538 DEBUG org.apache.hadoop.hbase.regionserver.HRegion: Finished snapshotting, commencing flushing stores
2011-11-10 17:04:33,777 INFO org.apache.hadoop.hbase.regionserver.SplitLogWorker: SplitLogWorker linux76,60020,1320924852399 starting
2011-11-10 17:04:33,794 DEBUG org.apache.hadoop.hbase.io.hfile.HFileWriterV2: Initialized with CacheConfig:enabled [cacheDataOnRead=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;] [cacheDataOnWrite=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;] [cacheIndexesOnWrite=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;] [cacheBloomsOnWrite=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;] [cacheEvictOnClose=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;] [cacheCompressed=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;]
2011-11-10 17:04:33,794 DEBUG org.apache.hadoop.hbase.util.BloomFilterFactory: Bloom filter is turned off &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the column family
2011-11-10 17:04:33,800 INFO org.apache.hadoop.hbase.regionserver.StoreFile: Delete Family Bloom filter type &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; hdfs:&lt;span class=&quot;code-comment&quot;&gt;//linux76:9000/hbase/-ROOT-/70236052/.tmp/a2c290a9cb264d99a128a18943cf0de9: CompoundBloomFilterWriter
&lt;/span&gt;2011-11-10 17:04:33,803 DEBUG org.apache.hadoop.hbase.io.hfile.HFileBlockIndex: Wrote a 1-level index with root level at pos 200, 1 root-level entries, 1 total entries, 44.0 on-disk size, 44.0 total uncompressed size.
2011-11-10 17:04:33,803 INFO org.apache.hadoop.hbase.io.hfile.HFileBlockIndex: Wrote a single-level meta index with 0 entries, 0 bytes
2011-11-10 17:04:33,873 INFO org.apache.hadoop.hbase.regionserver.StoreFile: NO General Bloom and NO DeleteFamily was added to HFile (hdfs:&lt;span class=&quot;code-comment&quot;&gt;//linux76:9000/hbase/-ROOT-/70236052/.tmp/a2c290a9cb264d99a128a18943cf0de9) 
&lt;/span&gt;2011-11-10 17:04:33,873 INFO org.apache.hadoop.hbase.regionserver.Store: Flushed , sequenceid=4, memsize=352.0, into tmp file hdfs:&lt;span class=&quot;code-comment&quot;&gt;//linux76:9000/hbase/-ROOT-/70236052/.tmp/a2c290a9cb264d99a128a18943cf0de9
&lt;/span&gt;2011-11-10 17:04:33,891 DEBUG org.apache.hadoop.hbase.regionserver.Store: Renaming flushed file at hdfs:&lt;span class=&quot;code-comment&quot;&gt;//linux76:9000/hbase/-ROOT-/70236052/.tmp/a2c290a9cb264d99a128a18943cf0de9 to hdfs://linux76:9000/hbase/-ROOT-/70236052/info/a2c290a9cb264d99a128a18943cf0de9
&lt;/span&gt;2011-11-10 17:04:33,910 INFO org.apache.hadoop.hbase.regionserver.Store: Added hdfs:&lt;span class=&quot;code-comment&quot;&gt;//linux76:9000/hbase/-ROOT-/70236052/info/a2c290a9cb264d99a128a18943cf0de9, entries=2, sequenceid=4, filesize=719.0
&lt;/span&gt;2011-11-10 17:04:33,911 INFO org.apache.hadoop.hbase.regionserver.HRegion: Finished memstore flush of ~352.0 &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; region -ROOT-,,0.70236052 in 394ms, sequenceid=4, compaction requested=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;; wal=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
2011-11-10 17:04:33,929 DEBUG org.apache.hadoop.hbase.regionserver.HRegion: Deleted recovered.edits file=hdfs:&lt;span class=&quot;code-comment&quot;&gt;//linux76:9000/hbase/-ROOT-/70236052/recovered.edits/0000000000000000004
&lt;/span&gt;2011-11-10 17:04:34,616 INFO org.apache.hadoop.hbase.regionserver.HRegion: Onlined -ROOT-,,0.70236052; next sequenceid=5
2011-11-10 17:04:34,616 DEBUG org.apache.hadoop.hbase.zookeeper.ZKAssign: regionserver:60020-0x1335f3da72b0245 Attempting to transition node 70236052/-ROOT- from RS_ZK_REGION_OPENING to RS_ZK_REGION_OPENING
2011-11-10 17:04:34,621 DEBUG org.apache.hadoop.hbase.zookeeper.ZKAssign: regionserver:60020-0x1335f3da72b0245 Successfully transitioned node 70236052 from RS_ZK_REGION_OPENING to RS_ZK_REGION_OPENING
2011-11-10 17:04:34,627 INFO org.apache.hadoop.hbase.regionserver.HRegionServer: Post open deploy tasks &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; region=-ROOT-,,0.70236052, daughter=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
2011-11-10 17:04:34,627 INFO org.apache.hadoop.hbase.regionserver.HRegionServer: addToOnlineRegions is doneREGION =&amp;gt; {NAME =&amp;gt; &apos;-ROOT-,,0&apos;, TableName =&amp;gt; &apos;-ROOT-&apos;, STARTKEY =&amp;gt; &apos;&apos;, ENDKEY =&amp;gt; &apos;&apos;, ENCODED =&amp;gt; 70236052,}
2011-11-10 17:04:34,630 INFO org.apache.hadoop.hbase.catalog.RootLocationEditor: Setting ROOT region location in ZooKeeper as linux76,60020,1320924852399
2011-11-10 17:04:34,642 INFO org.apache.hadoop.hbase.regionserver.HRegionServer: Done with post open deploy taks &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; region=-ROOT-,,0.70236052, daughter=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
2011-11-10 17:04:34,643 DEBUG org.apache.hadoop.hbase.zookeeper.ZKAssign: regionserver:60020-0x1335f3da72b0245 Attempting to transition node 70236052/-ROOT- from RS_ZK_REGION_OPENING to RS_ZK_REGION_OPENED
2011-11-10 17:04:34,652 DEBUG org.apache.hadoop.hbase.zookeeper.ZKAssign: regionserver:60020-0x1335f3da72b0245 Successfully transitioned node 70236052 from RS_ZK_REGION_OPENING to RS_ZK_REGION_OPENED
2011-11-10 17:04:34,653 DEBUG org.apache.hadoop.hbase.regionserver.handler.OpenRegionHandler: region transitioned to opened in zookeeper: REGION =&amp;gt; {NAME =&amp;gt; &apos;-ROOT-,,0&apos;, TableName =&amp;gt; &apos;-ROOT-&apos;, STARTKEY =&amp;gt; &apos;&apos;, ENDKEY =&amp;gt; &apos;&apos;, ENCODED =&amp;gt; 70236052,}, server: linux76,60020,1320924852399
2011-11-10 17:04:34,653 DEBUG org.apache.hadoop.hbase.regionserver.handler.OpenRegionHandler: Opened -ROOT-,,0.70236052 on server:linux76,60020,1320924852399
2011-11-10 17:04:35,863 INFO org.apache.hadoop.hbase.regionserver.HRegionServer: Received request to open region: .META.,,1.1028785192
2011-11-10 17:04:35,881 DEBUG org.apache.hadoop.hbase.zookeeper.ZKAssign: regionserver:60020-0x1335f3da72b0245 Attempting to transition node 1028785192/.META. from M_ZK_REGION_OFFLINE to RS_ZK_REGION_OPENING
2011-11-10 17:04:35,891 DEBUG org.apache.hadoop.hbase.zookeeper.ZKAssign: regionserver:60020-0x1335f3da72b0245 Successfully transitioned node 1028785192 from M_ZK_REGION_OFFLINE to RS_ZK_REGION_OPENING
2011-11-10 17:04:35,891 DEBUG org.apache.hadoop.hbase.regionserver.HRegion: Opening region: REGION =&amp;gt; {NAME =&amp;gt; &apos;.META.,,1&apos;, TableName =&amp;gt; &apos;.META.&apos;, STARTKEY =&amp;gt; &apos;&apos;, ENDKEY =&amp;gt; &apos;&apos;, ENCODED =&amp;gt; 1028785192,}
2011-11-10 17:04:35,892 INFO org.apache.hadoop.hbase.regionserver.HRegion: Setting up tabledescriptor config now ...
2011-11-10 17:04:35,893 DEBUG org.apache.hadoop.hbase.regionserver.HRegion: Instantiated .META.,,1.1028785192
2011-11-10 17:04:35,919 INFO org.apache.hadoop.hbase.regionserver.HRegion: Onlined .META.,,1.1028785192; next sequenceid=1
2011-11-10 17:04:35,919 DEBUG org.apache.hadoop.hbase.zookeeper.ZKAssign: regionserver:60020-0x1335f3da72b0245 Attempting to transition node 1028785192/.META. from RS_ZK_REGION_OPENING to RS_ZK_REGION_OPENING
2011-11-10 17:04:36,005 DEBUG org.apache.hadoop.hbase.zookeeper.ZKAssign: regionserver:60020-0x1335f3da72b0245 Successfully transitioned node 1028785192 from RS_ZK_REGION_OPENING to RS_ZK_REGION_OPENING
2011-11-10 17:04:36,045 INFO org.apache.hadoop.hbase.regionserver.HRegionServer: Post open deploy tasks &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; region=.META.,,1.1028785192, daughter=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
2011-11-10 17:04:36,045 INFO org.apache.hadoop.hbase.regionserver.HRegionServer: addToOnlineRegions is doneREGION =&amp;gt; {NAME =&amp;gt; &apos;.META.,,1&apos;, TableName =&amp;gt; &apos;.META.&apos;, STARTKEY =&amp;gt; &apos;&apos;, ENDKEY =&amp;gt; &apos;&apos;, ENCODED =&amp;gt; 1028785192,}
2011-11-10 17:04:36,199 DEBUG org.apache.hadoop.hbase.regionserver.SplitLogWorker: tasks arrived or departed
2011-11-10 17:04:36,246 INFO org.apache.hadoop.hbase.regionserver.SplitLogWorker: worker linux76,60020,1320924852399 acquired task /hbase/splitlog/hdfs%3A%2F%2Flinux76%3A9000%2Fhbase%2F.logs%2Flinux76%2C60020%2C1320924692314-splitting%2Flinux76%252C60020%252C1320924692314.1320924693350
2011-11-10 17:04:36,378 INFO org.apache.hadoop.hbase.regionserver.wal.HLogSplitter: Splitting hlog: hdfs:&lt;span class=&quot;code-comment&quot;&gt;//linux76:9000/hbase/.logs/linux76,60020,1320924692314-splitting/linux76%2C60020%2C1320924692314.1320924693350, length=294
&lt;/span&gt;2011-11-10 17:04:36,381 INFO org.apache.hadoop.hbase.util.FSHDFSUtils: Recovering file hdfs:&lt;span class=&quot;code-comment&quot;&gt;//linux76:9000/hbase/.logs/linux76,60020,1320924692314-splitting/linux76%2C60020%2C1320924692314.1320924693350
&lt;/span&gt;2011-11-10 17:04:37,250 DEBUG org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation: Lookedup root region location, connection=org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation@964823; serverName=linux76,60020,1320924852399
2011-11-10 17:04:37,263 DEBUG org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation: Lookedup root region location, connection=org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation@964823; serverName=linux76,60020,1320924852399
2011-11-10 17:04:37,394 INFO org.apache.hadoop.hbase.util.FSHDFSUtils: Finished lease recover attempt &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; hdfs:&lt;span class=&quot;code-comment&quot;&gt;//linux76:9000/hbase/.logs/linux76,60020,1320924692314-splitting/linux76%2C60020%2C1320924692314.1320924693350
&lt;/span&gt;2011-11-10 17:04:37,453 DEBUG org.apache.hadoop.hbase.regionserver.wal.SequenceFileLogWriter: &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; createWriter -- HADOOP-6840 -- not available
2011-11-10 17:04:37,464 DEBUG org.apache.hadoop.hbase.regionserver.wal.SequenceFileLogWriter: Path=hdfs:&lt;span class=&quot;code-comment&quot;&gt;//linux76:9000/hbase/splitlog/linux76,60020,1320924852399_hdfs%3A%2F%2Flinux76%3A9000%2Fhbase%2F.logs%2Flinux76%2C60020%2C1320924692314-splitting%2Flinux76%252C60020%252C1320924692314.1320924693350/-ROOT-/70236052/recovered.edits/0000000000000000004, syncFs=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, hflush=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
&lt;/span&gt;2011-11-10 17:04:37,465 DEBUG org.apache.hadoop.hbase.regionserver.wal.HLogSplitter: Creating writer path=hdfs:&lt;span class=&quot;code-comment&quot;&gt;//linux76:9000/hbase/splitlog/linux76,60020,1320924852399_hdfs%3A%2F%2Flinux76%3A9000%2Fhbase%2F.logs%2Flinux76%2C60020%2C1320924692314-splitting%2Flinux76%252C60020%252C1320924692314.1320924693350/-ROOT-/70236052/recovered.edits/0000000000000000004 region=70236052
&lt;/span&gt;2011-11-10 17:04:37,482 WARN org.apache.hadoop.hbase.regionserver.wal.HLog: HDFS pipeline error detected. Found 1 replicas but expecting no less than 2 replicas.  Requesting close of hlog.
2011-11-10 17:04:37,483 DEBUG org.apache.hadoop.hbase.regionserver.LogRoller: HLog roll requested
2011-11-10 17:04:37,488 DEBUG org.apache.hadoop.hbase.regionserver.wal.SequenceFileLogWriter: &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; createWriter -- HADOOP-6840 -- not available
2011-11-10 17:04:37,494 DEBUG org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation: The connection to hconnection-0x1335f3da72b0246 has been closed.
2011-11-10 17:04:37,494 INFO org.apache.hadoop.hbase.catalog.MetaEditor: Updated row .META.,,1.1028785192 with server=linux76,60020,1320924852399
2011-11-10 17:04:37,494 INFO org.apache.hadoop.hbase.regionserver.HRegionServer: Done with post open deploy taks &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; region=.META.,,1.1028785192, daughter=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
2011-11-10 17:04:37,499 DEBUG org.apache.hadoop.hbase.zookeeper.ZKAssign: regionserver:60020-0x1335f3da72b0245 Attempting to transition node 1028785192/.META. from RS_ZK_REGION_OPENING to RS_ZK_REGION_OPENED
2011-11-10 17:04:37,504 DEBUG org.apache.hadoop.hbase.regionserver.wal.SequenceFileLogWriter: Path=hdfs:&lt;span class=&quot;code-comment&quot;&gt;//linux76:9000/hbase/.logs/linux76,60020,1320924852399/linux76%2C60020%2C1320924852399.1320924877487, syncFs=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, hflush=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
&lt;/span&gt;2011-11-10 17:04:37,541 DEBUG org.apache.hadoop.hbase.zookeeper.ZKAssign: regionserver:60020-0x1335f3da72b0245 Successfully transitioned node 1028785192 from RS_ZK_REGION_OPENING to RS_ZK_REGION_OPENED
2011-11-10 17:04:37,541 DEBUG org.apache.hadoop.hbase.regionserver.handler.OpenRegionHandler: region transitioned to opened in zookeeper: REGION =&amp;gt; {NAME =&amp;gt; &apos;.META.,,1&apos;, TableName =&amp;gt; &apos;.META.&apos;, STARTKEY =&amp;gt; &apos;&apos;, ENDKEY =&amp;gt; &apos;&apos;, ENCODED =&amp;gt; 1028785192,}, server: linux76,60020,1320924852399
2011-11-10 17:04:37,542 DEBUG org.apache.hadoop.hbase.regionserver.handler.OpenRegionHandler: Opened .META.,,1.1028785192 on server:linux76,60020,1320924852399
2011-11-10 17:04:37,577 DEBUG org.apache.hadoop.hbase.catalog.CatalogTracker: Current cached META location, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, is not valid, resetting
2011-11-10 17:04:37,583 DEBUG org.apache.hadoop.hbase.regionserver.wal.HLogSplitter: Closed hdfs:&lt;span class=&quot;code-comment&quot;&gt;//linux76:9000/hbase/splitlog/linux76,60020,1320924852399_hdfs%3A%2F%2Flinux76%3A9000%2Fhbase%2F.logs%2Flinux76%2C60020%2C1320924692314-splitting%2Flinux76%252C60020%252C1320924692314.1320924693350/-ROOT-/70236052/recovered.edits/0000000000000000004
&lt;/span&gt;2011-11-10 17:04:37,583 INFO org.apache.hadoop.hbase.regionserver.wal.HLogSplitter: processed 1 edits across 1 regions threw away edits &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; 0 regions log file = hdfs:&lt;span class=&quot;code-comment&quot;&gt;//linux76:9000/hbase/.logs/linux76,60020,1320924692314-splitting/linux76%2C60020%2C1320924692314.1320924693350 is corrupted = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
&lt;/span&gt;2011-11-10 17:04:37,587 INFO org.apache.hadoop.hbase.regionserver.wal.HLog: Roll /hbase/.logs/linux76,60020,1320924852399/linux76%2C60020%2C1320924852399.1320924853463, entries=1, filesize=294.  &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; /hbase/.logs/linux76,60020,1320924852399/linux76%2C60020%2C1320924852399.1320924877487
2011-11-10 17:04:37,598 INFO org.apache.hadoop.hbase.regionserver.SplitLogWorker: successfully transitioned task /hbase/splitlog/hdfs%3A%2F%2Flinux76%3A9000%2Fhbase%2F.logs%2Flinux76%2C60020%2C1320924692314-splitting%2Flinux76%252C60020%252C1320924692314.1320924693350 to &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; state done
2011-11-10 17:04:37,599 INFO org.apache.hadoop.hbase.regionserver.SplitLogWorker: worker linux76,60020,1320924852399 done with task /hbase/splitlog/hdfs%3A%2F%2Flinux76%3A9000%2Fhbase%2F.logs%2Flinux76%2C60020%2C1320924692314-splitting%2Flinux76%252C60020%252C1320924692314.1320924693350 in 1338ms
2011-11-10 17:04:37,616 INFO org.apache.hadoop.hbase.regionserver.SplitLogWorker: worker linux76,60020,1320924852399 acquired task /hbase/splitlog/hdfs%3A%2F%2Flinux76%3A9000%2Fhbase%2F.logs%2Flinux76%2C60020%2C1320924692314-splitting%2Flinux76%252C60020%252C1320924692314.1320924804044
2011-11-10 17:04:37,620 INFO org.apache.hadoop.hbase.regionserver.wal.HLogSplitter: Splitting hlog: hdfs:&lt;span class=&quot;code-comment&quot;&gt;//linux76:9000/hbase/.logs/linux76,60020,1320924692314-splitting/linux76%2C60020%2C1320924692314.1320924804044, length=352
&lt;/span&gt;2011-11-10 17:04:37,620 INFO org.apache.hadoop.hbase.util.FSHDFSUtils: Recovering file hdfs:&lt;span class=&quot;code-comment&quot;&gt;//linux76:9000/hbase/.logs/linux76,60020,1320924692314-splitting/linux76%2C60020%2C1320924692314.1320924804044
&lt;/span&gt;2011-11-10 17:04:38,539 DEBUG org.apache.hadoop.hbase.regionserver.SplitLogWorker: tasks arrived or departed
2011-11-10 17:04:38,622 INFO org.apache.hadoop.hbase.util.FSHDFSUtils: Finished lease recover attempt &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; hdfs:&lt;span class=&quot;code-comment&quot;&gt;//linux76:9000/hbase/.logs/linux76,60020,1320924692314-splitting/linux76%2C60020%2C1320924692314.1320924804044
&lt;/span&gt;2011-11-10 17:04:38,691 DEBUG org.apache.hadoop.hbase.regionserver.wal.SequenceFileLogWriter: &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; createWriter -- HADOOP-6840 -- not available
2011-11-10 17:04:38,697 DEBUG org.apache.hadoop.hbase.regionserver.wal.SequenceFileLogWriter: Path=hdfs:&lt;span class=&quot;code-comment&quot;&gt;//linux76:9000/hbase/splitlog/linux76,60020,1320924852399_hdfs%3A%2F%2Flinux76%3A9000%2Fhbase%2F.logs%2Flinux76%2C60020%2C1320924692314-splitting%2Flinux76%252C60020%252C1320924692314.1320924804044/t1/dcbe1ee9681da1111a8043e2d8515dc4/recovered.edits/0000000000000000007, syncFs=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, hflush=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
&lt;/span&gt;2011-11-10 17:04:38,697 DEBUG org.apache.hadoop.hbase.regionserver.wal.HLogSplitter: Creating writer path=hdfs:&lt;span class=&quot;code-comment&quot;&gt;//linux76:9000/hbase/splitlog/linux76,60020,1320924852399_hdfs%3A%2F%2Flinux76%3A9000%2Fhbase%2F.logs%2Flinux76%2C60020%2C1320924692314-splitting%2Flinux76%252C60020%252C1320924692314.1320924804044/t1/dcbe1ee9681da1111a8043e2d8515dc4/recovered.edits/0000000000000000007 region=dcbe1ee9681da1111a8043e2d8515dc4
&lt;/span&gt;2011-11-10 17:04:38,748 DEBUG org.apache.hadoop.hbase.regionserver.wal.HLogSplitter: Closed hdfs:&lt;span class=&quot;code-comment&quot;&gt;//linux76:9000/hbase/splitlog/linux76,60020,1320924852399_hdfs%3A%2F%2Flinux76%3A9000%2Fhbase%2F.logs%2Flinux76%2C60020%2C1320924692314-splitting%2Flinux76%252C60020%252C1320924692314.1320924804044/t1/dcbe1ee9681da1111a8043e2d8515dc4/recovered.edits/0000000000000000007
&lt;/span&gt;2011-11-10 17:04:38,748 INFO org.apache.hadoop.hbase.regionserver.wal.HLogSplitter: processed 2 edits across 1 regions threw away edits &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; 0 regions log file = hdfs:&lt;span class=&quot;code-comment&quot;&gt;//linux76:9000/hbase/.logs/linux76,60020,1320924692314-splitting/linux76%2C60020%2C1320924692314.1320924804044 is corrupted = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
&lt;/span&gt;2011-11-10 17:04:38,805 INFO org.apache.hadoop.hbase.regionserver.SplitLogWorker: successfully transitioned task /hbase/splitlog/hdfs%3A%2F%2Flinux76%3A9000%2Fhbase%2F.logs%2Flinux76%2C60020%2C1320924692314-splitting%2Flinux76%252C60020%252C1320924692314.1320924804044 to &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; state done
2011-11-10 17:04:38,805 INFO org.apache.hadoop.hbase.regionserver.SplitLogWorker: worker linux76,60020,1320924852399 done with task /hbase/splitlog/hdfs%3A%2F%2Flinux76%3A9000%2Fhbase%2F.logs%2Flinux76%2C60020%2C1320924692314-splitting%2Flinux76%252C60020%252C1320924692314.1320924804044 in 1189ms
2011-11-10 17:04:38,833 INFO org.apache.hadoop.hbase.regionserver.SplitLogWorker: worker linux76,60020,1320924852399 acquired task /hbase/splitlog/hdfs%3A%2F%2Flinux76%3A9000%2Fhbase%2F.logs%2Flinux76%2C60020%2C1320924692314-splitting%2Flinux76%252C60020%252C1320924692314.1320924806282
2011-11-10 17:04:38,837 INFO org.apache.hadoop.hbase.regionserver.wal.HLogSplitter: Splitting hlog: hdfs:&lt;span class=&quot;code-comment&quot;&gt;//linux76:9000/hbase/.logs/linux76,60020,1320924692314-splitting/linux76%2C60020%2C1320924692314.1320924806282, length=484
&lt;/span&gt;2011-11-10 17:04:38,837 INFO org.apache.hadoop.hbase.util.FSHDFSUtils: Recovering file hdfs:&lt;span class=&quot;code-comment&quot;&gt;//linux76:9000/hbase/.logs/linux76,60020,1320924692314-splitting/linux76%2C60020%2C1320924692314.1320924806282
&lt;/span&gt;2011-11-10 17:04:39,842 INFO org.apache.hadoop.hbase.util.FSHDFSUtils: Finished lease recover attempt &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; hdfs:&lt;span class=&quot;code-comment&quot;&gt;//linux76:9000/hbase/.logs/linux76,60020,1320924692314-splitting/linux76%2C60020%2C1320924692314.1320924806282
&lt;/span&gt;2011-11-10 17:04:39,880 DEBUG org.apache.hadoop.hbase.regionserver.wal.SequenceFileLogWriter: &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; createWriter -- HADOOP-6840 -- not available
2011-11-10 17:04:39,901 DEBUG org.apache.hadoop.hbase.regionserver.wal.SequenceFileLogWriter: Path=hdfs:&lt;span class=&quot;code-comment&quot;&gt;//linux76:9000/hbase/splitlog/linux76,60020,1320924852399_hdfs%3A%2F%2Flinux76%3A9000%2Fhbase%2F.logs%2Flinux76%2C60020%2C1320924692314-splitting%2Flinux76%252C60020%252C1320924692314.1320924806282/t1/dcbe1ee9681da1111a8043e2d8515dc4/recovered.edits/0000000000000000009, syncFs=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, hflush=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
&lt;/span&gt;2011-11-10 17:04:39,901 DEBUG org.apache.hadoop.hbase.regionserver.wal.HLogSplitter: Creating writer path=hdfs:&lt;span class=&quot;code-comment&quot;&gt;//linux76:9000/hbase/splitlog/linux76,60020,1320924852399_hdfs%3A%2F%2Flinux76%3A9000%2Fhbase%2F.logs%2Flinux76%2C60020%2C1320924692314-splitting%2Flinux76%252C60020%252C1320924692314.1320924806282/t1/dcbe1ee9681da1111a8043e2d8515dc4/recovered.edits/0000000000000000009 region=dcbe1ee9681da1111a8043e2d8515dc4
&lt;/span&gt;2011-11-10 17:04:39,930 DEBUG org.apache.hadoop.hbase.regionserver.wal.HLogSplitter: Closed hdfs:&lt;span class=&quot;code-comment&quot;&gt;//linux76:9000/hbase/splitlog/linux76,60020,1320924852399_hdfs%3A%2F%2Flinux76%3A9000%2Fhbase%2F.logs%2Flinux76%2C60020%2C1320924692314-splitting%2Flinux76%252C60020%252C1320924692314.1320924806282/t1/dcbe1ee9681da1111a8043e2d8515dc4/recovered.edits/0000000000000000009
&lt;/span&gt;2011-11-10 17:04:39,930 INFO org.apache.hadoop.hbase.regionserver.wal.HLogSplitter: processed 3 edits across 1 regions threw away edits &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; 0 regions log file = hdfs:&lt;span class=&quot;code-comment&quot;&gt;//linux76:9000/hbase/.logs/linux76,60020,1320924692314-splitting/linux76%2C60020%2C1320924692314.1320924806282 is corrupted = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
&lt;/span&gt;2011-11-10 17:04:39,942 INFO org.apache.hadoop.hbase.regionserver.SplitLogWorker: successfully transitioned task /hbase/splitlog/hdfs%3A%2F%2Flinux76%3A9000%2Fhbase%2F.logs%2Flinux76%2C60020%2C1320924692314-splitting%2Flinux76%252C60020%252C1320924692314.1320924806282 to &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; state done
2011-11-10 17:04:39,942 INFO org.apache.hadoop.hbase.regionserver.SplitLogWorker: worker linux76,60020,1320924852399 done with task /hbase/splitlog/hdfs%3A%2F%2Flinux76%3A9000%2Fhbase%2F.logs%2Flinux76%2C60020%2C1320924692314-splitting%2Flinux76%252C60020%252C1320924692314.1320924806282 in 1109ms
2011-11-10 17:04:39,964 INFO org.apache.hadoop.hbase.regionserver.SplitLogWorker: worker linux76,60020,1320924852399 acquired task /hbase/splitlog/hdfs%3A%2F%2Flinux76%3A9000%2Fhbase%2F.logs%2Flinux76%2C60020%2C1320924692314-splitting%2Flinux76%252C60020%252C1320924692314.1320924806535
2011-11-10 17:04:39,969 INFO org.apache.hadoop.hbase.regionserver.wal.HLogSplitter: Splitting hlog: hdfs:&lt;span class=&quot;code-comment&quot;&gt;//linux76:9000/hbase/.logs/linux76,60020,1320924692314-splitting/linux76%2C60020%2C1320924692314.1320924806535, length=0
&lt;/span&gt;2011-11-10 17:04:39,969 WARN org.apache.hadoop.hbase.regionserver.wal.HLogSplitter: File hdfs:&lt;span class=&quot;code-comment&quot;&gt;//linux76:9000/hbase/.logs/linux76,60020,1320924692314-splitting/linux76%2C60020%2C1320924692314.1320924806535 might be still open, length is 0
&lt;/span&gt;2011-11-10 17:04:39,971 INFO org.apache.hadoop.hbase.util.FSHDFSUtils: Recovering file hdfs:&lt;span class=&quot;code-comment&quot;&gt;//linux76:9000/hbase/.logs/linux76,60020,1320924692314-splitting/linux76%2C60020%2C1320924692314.1320924806535
&lt;/span&gt;2011-11-10 17:04:40,983 INFO org.apache.hadoop.hbase.util.FSHDFSUtils: Finished lease recover attempt &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; hdfs:&lt;span class=&quot;code-comment&quot;&gt;//linux76:9000/hbase/.logs/linux76,60020,1320924692314-splitting/linux76%2C60020%2C1320924692314.1320924806535
&lt;/span&gt;2011-11-10 17:04:41,140 DEBUG org.apache.hadoop.hbase.regionserver.wal.SequenceFileLogWriter: &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; createWriter -- HADOOP-6840 -- not available
2011-11-10 17:04:41,162 DEBUG org.apache.hadoop.hbase.regionserver.wal.SequenceFileLogWriter: Path=hdfs:&lt;span class=&quot;code-comment&quot;&gt;//linux76:9000/hbase/splitlog/linux76,60020,1320924852399_hdfs%3A%2F%2Flinux76%3A9000%2Fhbase%2F.logs%2Flinux76%2C60020%2C1320924692314-splitting%2Flinux76%252C60020%252C1320924692314.1320924806535/t1/dcbe1ee9681da1111a8043e2d8515dc4/recovered.edits/0000000000000000012, syncFs=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, hflush=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
&lt;/span&gt;2011-11-10 17:04:41,162 DEBUG org.apache.hadoop.hbase.regionserver.wal.HLogSplitter: Creating writer path=hdfs:&lt;span class=&quot;code-comment&quot;&gt;//linux76:9000/hbase/splitlog/linux76,60020,1320924852399_hdfs%3A%2F%2Flinux76%3A9000%2Fhbase%2F.logs%2Flinux76%2C60020%2C1320924692314-splitting%2Flinux76%252C60020%252C1320924692314.1320924806535/t1/dcbe1ee9681da1111a8043e2d8515dc4/recovered.edits/0000000000000000012 region=dcbe1ee9681da1111a8043e2d8515dc4
&lt;/span&gt;2011-11-10 17:04:41,288 DEBUG org.apache.hadoop.hbase.regionserver.wal.HLogSplitter: Closed hdfs:&lt;span class=&quot;code-comment&quot;&gt;//linux76:9000/hbase/splitlog/linux76,60020,1320924852399_hdfs%3A%2F%2Flinux76%3A9000%2Fhbase%2F.logs%2Flinux76%2C60020%2C1320924692314-splitting%2Flinux76%252C60020%252C1320924692314.1320924806535/t1/dcbe1ee9681da1111a8043e2d8515dc4/recovered.edits/0000000000000000012
&lt;/span&gt;2011-11-10 17:04:41,288 INFO org.apache.hadoop.hbase.regionserver.wal.HLogSplitter: processed 200 edits across 1 regions threw away edits &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; 0 regions log file = hdfs:&lt;span class=&quot;code-comment&quot;&gt;//linux76:9000/hbase/.logs/linux76,60020,1320924692314-splitting/linux76%2C60020%2C1320924692314.1320924806535 is corrupted = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
&lt;/span&gt;2011-11-10 17:04:41,295 INFO org.apache.hadoop.hbase.regionserver.SplitLogWorker: successfully transitioned task /hbase/splitlog/hdfs%3A%2F%2Flinux76%3A9000%2Fhbase%2F.logs%2Flinux76%2C60020%2C1320924692314-splitting%2Flinux76%252C60020%252C1320924692314.1320924806535 to &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; state done
2011-11-10 17:04:41,295 INFO org.apache.hadoop.hbase.regionserver.SplitLogWorker: worker linux76,60020,1320924852399 done with task /hbase/splitlog/hdfs%3A%2F%2Flinux76%3A9000%2Fhbase%2F.logs%2Flinux76%2C60020%2C1320924692314-splitting%2Flinux76%252C60020%252C1320924692314.1320924806535 in 1330ms
2011-11-10 17:04:41,315 INFO org.apache.hadoop.hbase.regionserver.SplitLogWorker: worker linux76,60020,1320924852399 acquired task /hbase/splitlog/hdfs%3A%2F%2Flinux76%3A9000%2Fhbase%2F.logs%2Flinux76%2C60020%2C1320924692314-splitting%2Flinux76%252C60020%252C1320924692314.1320924802840
2011-11-10 17:04:41,319 INFO org.apache.hadoop.hbase.regionserver.wal.HLogSplitter: Splitting hlog: hdfs:&lt;span class=&quot;code-comment&quot;&gt;//linux76:9000/hbase/.logs/linux76,60020,1320924692314-splitting/linux76%2C60020%2C1320924692314.1320924802840, length=380
&lt;/span&gt;2011-11-10 17:04:41,319 INFO org.apache.hadoop.hbase.util.FSHDFSUtils: Recovering file hdfs:&lt;span class=&quot;code-comment&quot;&gt;//linux76:9000/hbase/.logs/linux76,60020,1320924692314-splitting/linux76%2C60020%2C1320924692314.1320924802840
&lt;/span&gt;2011-11-10 17:04:42,323 INFO org.apache.hadoop.hbase.util.FSHDFSUtils: Finished lease recover attempt &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; hdfs:&lt;span class=&quot;code-comment&quot;&gt;//linux76:9000/hbase/.logs/linux76,60020,1320924692314-splitting/linux76%2C60020%2C1320924692314.1320924802840
&lt;/span&gt;2011-11-10 17:04:42,359 DEBUG org.apache.hadoop.hbase.regionserver.wal.SequenceFileLogWriter: &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; createWriter -- HADOOP-6840 -- not available
2011-11-10 17:04:42,431 DEBUG org.apache.hadoop.hbase.regionserver.wal.SequenceFileLogWriter: Path=hdfs:&lt;span class=&quot;code-comment&quot;&gt;//linux76:9000/hbase/splitlog/linux76,60020,1320924852399_hdfs%3A%2F%2Flinux76%3A9000%2Fhbase%2F.logs%2Flinux76%2C60020%2C1320924692314-splitting%2Flinux76%252C60020%252C1320924692314.1320924802840/.META./1028785192/recovered.edits/0000000000000000006, syncFs=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, hflush=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
&lt;/span&gt;2011-11-10 17:04:42,432 DEBUG org.apache.hadoop.hbase.regionserver.wal.HLogSplitter: Creating writer path=hdfs:&lt;span class=&quot;code-comment&quot;&gt;//linux76:9000/hbase/splitlog/linux76,60020,1320924852399_hdfs%3A%2F%2Flinux76%3A9000%2Fhbase%2F.logs%2Flinux76%2C60020%2C1320924692314-splitting%2Flinux76%252C60020%252C1320924692314.1320924802840/.META./1028785192/recovered.edits/0000000000000000006 region=1028785192
&lt;/span&gt;2011-11-10 17:04:42,582 DEBUG org.apache.hadoop.hbase.regionserver.wal.HLogSplitter: Closed hdfs:&lt;span class=&quot;code-comment&quot;&gt;//linux76:9000/hbase/splitlog/linux76,60020,1320924852399_hdfs%3A%2F%2Flinux76%3A9000%2Fhbase%2F.logs%2Flinux76%2C60020%2C1320924692314-splitting%2Flinux76%252C60020%252C1320924692314.1320924802840/.META./1028785192/recovered.edits/0000000000000000006
&lt;/span&gt;2011-11-10 17:04:42,582 INFO org.apache.hadoop.hbase.regionserver.wal.HLogSplitter: processed 1 edits across 1 regions threw away edits &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; 0 regions log file = hdfs:&lt;span class=&quot;code-comment&quot;&gt;//linux76:9000/hbase/.logs/linux76,60020,1320924692314-splitting/linux76%2C60020%2C1320924692314.1320924802840 is corrupted = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
&lt;/span&gt;2011-11-10 17:04:42,597 INFO org.apache.hadoop.hbase.regionserver.SplitLogWorker: successfully transitioned task /hbase/splitlog/hdfs%3A%2F%2Flinux76%3A9000%2Fhbase%2F.logs%2Flinux76%2C60020%2C1320924692314-splitting%2Flinux76%252C60020%252C1320924692314.1320924802840 to &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; state done
2011-11-10 17:04:42,597 INFO org.apache.hadoop.hbase.regionserver.SplitLogWorker: worker linux76,60020,1320924852399 done with task /hbase/splitlog/hdfs%3A%2F%2Flinux76%3A9000%2Fhbase%2F.logs%2Flinux76%2C60020%2C1320924692314-splitting%2Flinux76%252C60020%252C1320924692314.1320924802840 in 1281ms

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Master logs&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2011-11-10 17:03:55,284 DEBUG org.apache.hadoop.hbase.master.HMaster: Started service threads
2011-11-10 17:03:58,288 INFO org.apache.hadoop.hbase.master.ServerManager: Waiting on regionserver(s) to checkin
2011-11-10 17:04:01,292 INFO org.apache.hadoop.hbase.master.ServerManager: Waiting on regionserver(s) to checkin
2011-11-10 17:04:04,296 INFO org.apache.hadoop.hbase.master.ServerManager: Waiting on regionserver(s) to checkin
2011-11-10 17:04:07,300 INFO org.apache.hadoop.hbase.master.ServerManager: Waiting on regionserver(s) to checkin
2011-11-10 17:04:10,313 INFO org.apache.hadoop.hbase.master.ServerManager: Waiting on regionserver(s) to checkin
2011-11-10 17:04:13,124 INFO org.apache.hadoop.hbase.master.ServerManager: Registering server=linux76,60020,1320924852399
2011-11-10 17:04:13,317 INFO org.apache.hadoop.hbase.master.ServerManager: Waiting on regionserver(s) count to settle; currently=1
2011-11-10 17:04:16,321 INFO org.apache.hadoop.hbase.master.HMaster: Registering server found up in zk: linux76,60020,1320924692314
2011-11-10 17:04:16,321 INFO org.apache.hadoop.hbase.master.ServerManager: Registering server=linux76,60020,1320924692314
2011-11-10 17:04:22,495 INFO org.apache.hadoop.hbase.master.MasterFileSystem: Log folder hdfs:&lt;span class=&quot;code-comment&quot;&gt;//linux76:9000/hbase/.logs/linux76,60020,1320924692314 belongs to an existing region server
&lt;/span&gt;2011-11-10 17:04:22,497 INFO org.apache.hadoop.hbase.master.MasterFileSystem: Log folder hdfs:&lt;span class=&quot;code-comment&quot;&gt;//linux76:9000/hbase/.logs/linux76,60020,1320924852399 belongs to an existing region server
&lt;/span&gt;2011-11-10 17:04:22,497 INFO org.apache.hadoop.hbase.master.MasterFileSystem: No logs to split
2011-11-10 17:04:31,356 INFO org.apache.hadoop.hbase.catalog.CatalogTracker: Failed verification of -ROOT-,,0 at address=linux76,60020,1320924692314; org.apache.hadoop.hbase.NotServingRegionException: org.apache.hadoop.hbase.NotServingRegionException: Region is not online: -ROOT-,,0
2011-11-10 17:04:31,358 INFO org.apache.hadoop.hbase.catalog.RootLocationEditor: Unsetting ROOT region location in ZooKeeper
2011-11-10 17:04:31,511 DEBUG org.apache.hadoop.hbase.zookeeper.ZKAssign: master:60000-0x1335f3da72b0243 Creating (or updating) unassigned node &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; 70236052 with OFFLINE state
2011-11-10 17:04:31,530 INFO org.apache.hadoop.hbase.master.AssignmentManager: No previous transition plan was found (or we are ignoring an existing plan) &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; -ROOT-,,0.70236052 so generated a random one; hri=-ROOT-,,0.70236052, src=, dest=linux76,60020,1320924852399; 2 (online=2, exclude=0) available servers
2011-11-10 17:04:31,530 INFO org.apache.hadoop.hbase.master.AssignmentManager: Assigning region -ROOT-,,0.70236052 to linux76,60020,1320924852399
2011-11-10 17:04:31,530 DEBUG org.apache.hadoop.hbase.master.ServerManager: New connection to linux76,60020,1320924852399
2011-11-10 17:04:31,786 DEBUG org.apache.hadoop.hbase.master.AssignmentManager: Handling transition=RS_ZK_REGION_OPENING, server=linux76,60020,1320924852399, region=70236052/-ROOT-
2011-11-10 17:04:33,505 DEBUG org.apache.hadoop.hbase.master.AssignmentManager: Handling transition=RS_ZK_REGION_OPENING, server=linux76,60020,1320924852399, region=70236052/-ROOT-
2011-11-10 17:04:34,008 INFO org.apache.hadoop.hbase.zookeeper.RegionServerTracker: RegionServer ephemeral node deleted, processing expiration [linux76,60020,1320924692314]
2011-11-10 17:04:34,315 DEBUG org.apache.hadoop.hbase.master.AssignmentManager: based on ZK, current region=-ROOT-,,0.70236052 is on server=linux76,60020,1320924852399 server being checked=: linux76,60020,1320924692314
2011-11-10 17:04:34,317 DEBUG org.apache.hadoop.hbase.master.AssignmentManager: based on AM, current region=.META.,,1.1028785192 is on server=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; server being checked: linux76,60020,1320924692314
2011-11-10 17:04:34,558 DEBUG org.apache.hadoop.hbase.master.ServerManager: Added=linux76,60020,1320924692314 to dead servers, submitted shutdown handler to be executed, root=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, meta=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
2011-11-10 17:04:34,623 DEBUG org.apache.hadoop.hbase.master.AssignmentManager: Handling transition=RS_ZK_REGION_OPENING, server=linux76,60020,1320924852399, region=70236052/-ROOT-
2011-11-10 17:04:34,654 DEBUG org.apache.hadoop.hbase.master.AssignmentManager: Handling transition=RS_ZK_REGION_OPENED, server=linux76,60020,1320924852399, region=70236052/-ROOT-
2011-11-10 17:04:34,658 INFO org.apache.hadoop.hbase.master.handler.OpenedRegionHandler: Handling OPENED event &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; -ROOT-,,0.70236052 from linux76,60020,1320924852399; deleting unassigned node
2011-11-10 17:04:34,658 DEBUG org.apache.hadoop.hbase.zookeeper.ZKAssign: master:60000-0x1335f3da72b0243 Deleting existing unassigned node &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; 70236052 that is in expected state RS_ZK_REGION_OPENED
2011-11-10 17:04:34,670 WARN org.apache.hadoop.hbase.master.AssignmentManager: Node deleted but still in RIT: -ROOT-,,0.70236052 state=OPEN, ts=1320924874644, server=linux76,60020,1320924852399
2011-11-10 17:04:34,670 DEBUG org.apache.hadoop.hbase.zookeeper.ZKAssign: master:60000-0x1335f3da72b0243 Successfully deleted unassigned node &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; region 70236052 in expected state RS_ZK_REGION_OPENED
2011-11-10 17:04:34,679 INFO org.apache.hadoop.hbase.master.HMaster: -ROOT- assigned=1, rit=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, location=linux76,60020,1320924852399
2011-11-10 17:04:34,729 DEBUG org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation: Lookedup root region location, connection=org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation@fe8c4; serverName=linux76,60020,1320924852399
2011-11-10 17:04:34,736 DEBUG org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation: Lookedup root region location, connection=org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation@fe8c4; serverName=linux76,60020,1320924852399
2011-11-10 17:04:34,761 INFO org.apache.hadoop.hbase.master.handler.OpenedRegionHandler: The master has opened the region -ROOT-,,0.70236052 that was online on linux76,60020,1320924852399
2011-11-10 17:04:34,793 DEBUG org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation: The connection to hconnection-0x1335f3da72b0244 has been closed.
2011-11-10 17:04:34,813 INFO org.apache.hadoop.hbase.catalog.CatalogTracker: Failed verification of .META.,,1 at address=linux76,60020,1320924159959; org.apache.hadoop.hbase.NotServingRegionException: org.apache.hadoop.hbase.NotServingRegionException: Region is not online: .META.,,1
2011-11-10 17:04:34,813 DEBUG org.apache.hadoop.hbase.catalog.CatalogTracker: &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; .META. server: linux76,60020,1320924159959 isn&apos;t valid. Cached .META. server: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
2011-11-10 17:04:35,317 DEBUG org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation: Lookedup root region location, connection=org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation@fe8c4; serverName=linux76,60020,1320924852399
2011-11-10 17:04:35,320 DEBUG org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation: Lookedup root region location, connection=org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation@fe8c4; serverName=linux76,60020,1320924852399
2011-11-10 17:04:35,324 DEBUG org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation: The connection to hconnection-0x1335f3da72b0244 has been closed.
2011-11-10 17:04:35,330 INFO org.apache.hadoop.hbase.catalog.CatalogTracker: Failed verification of .META.,,1 at address=linux76,60020,1320924159959; org.apache.hadoop.hbase.NotServingRegionException: org.apache.hadoop.hbase.NotServingRegionException: Region is not online: .META.,,1
2011-11-10 17:04:35,330 DEBUG org.apache.hadoop.hbase.catalog.CatalogTracker: &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; .META. server: linux76,60020,1320924159959 isn&apos;t valid. Cached .META. server: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
2011-11-10 17:04:35,833 DEBUG org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation: Lookedup root region location, connection=org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation@fe8c4; serverName=linux76,60020,1320924852399
2011-11-10 17:04:35,834 DEBUG org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation: Lookedup root region location, connection=org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation@fe8c4; serverName=linux76,60020,1320924852399
2011-11-10 17:04:35,839 DEBUG org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation: The connection to hconnection-0x1335f3da72b0244 has been closed.
2011-11-10 17:04:35,846 INFO org.apache.hadoop.hbase.catalog.CatalogTracker: Failed verification of .META.,,1 at address=linux76,60020,1320924159959; org.apache.hadoop.hbase.NotServingRegionException: org.apache.hadoop.hbase.NotServingRegionException: Region is not online: .META.,,1
2011-11-10 17:04:35,846 DEBUG org.apache.hadoop.hbase.catalog.CatalogTracker: &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; .META. server: linux76,60020,1320924159959 isn&apos;t valid. Cached .META. server: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
2011-11-10 17:04:35,850 DEBUG org.apache.hadoop.hbase.zookeeper.ZKAssign: master:60000-0x1335f3da72b0243 Creating (or updating) unassigned node &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; 1028785192 with OFFLINE state
2011-11-10 17:04:35,859 INFO org.apache.hadoop.hbase.master.AssignmentManager: No previous transition plan was found (or we are ignoring an existing plan) &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; .META.,,1.1028785192 so generated a random one; hri=.META.,,1.1028785192, src=, dest=linux76,60020,1320924852399; 1 (online=1, exclude=0) available servers
2011-11-10 17:04:35,859 INFO org.apache.hadoop.hbase.master.AssignmentManager: Assigning region .META.,,1.1028785192 to linux76,60020,1320924852399
2011-11-10 17:04:35,859 DEBUG org.apache.hadoop.hbase.master.ServerManager: New connection to linux76,60020,1320924852399
2011-11-10 17:04:35,865 DEBUG org.apache.hadoop.hbase.master.AssignmentManager: Handling transition=M_ZK_REGION_OFFLINE, server=linux76,60000,1320924832712, region=1028785192/.META.
2011-11-10 17:04:35,870 DEBUG org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation: Lookedup root region location, connection=org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation@fe8c4; serverName=linux76,60020,1320924852399
2011-11-10 17:04:35,871 DEBUG org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation: Lookedup root region location, connection=org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation@fe8c4; serverName=linux76,60020,1320924852399
2011-11-10 17:04:35,875 DEBUG org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation: The connection to hconnection-0x1335f3da72b0244 has been closed.
2011-11-10 17:04:35,880 INFO org.apache.hadoop.hbase.catalog.CatalogTracker: Failed verification of .META.,,1 at address=linux76,60020,1320924159959; org.apache.hadoop.hbase.NotServingRegionException: org.apache.hadoop.hbase.NotServingRegionException: Region is not online: .META.,,1
2011-11-10 17:04:35,880 DEBUG org.apache.hadoop.hbase.catalog.CatalogTracker: &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; .META. server: linux76,60020,1320924159959 isn&apos;t valid. Cached .META. server: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
2011-11-10 17:04:35,890 DEBUG org.apache.hadoop.hbase.master.AssignmentManager: Handling transition=RS_ZK_REGION_OPENING, server=linux76,60020,1320924852399, region=1028785192/.META.
2011-11-10 17:04:36,006 DEBUG org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation: Lookedup root region location, connection=org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation@fe8c4; serverName=linux76,60020,1320924852399
2011-11-10 17:04:36,007 DEBUG org.apache.hadoop.hbase.master.AssignmentManager: Handling transition=RS_ZK_REGION_OPENING, server=linux76,60020,1320924852399, region=1028785192/.META.
2011-11-10 17:04:36,009 DEBUG org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation: Lookedup root region location, connection=org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation@fe8c4; serverName=linux76,60020,1320924852399
2011-11-10 17:04:36,015 DEBUG org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation: The connection to hconnection-0x1335f3da72b0244 has been closed.
2011-11-10 17:04:36,018 INFO org.apache.hadoop.hbase.catalog.CatalogTracker: Failed verification of .META.,,1 at address=linux76,60020,1320924159959; org.apache.hadoop.hbase.NotServingRegionException: org.apache.hadoop.hbase.NotServingRegionException: Region is not online: .META.,,1
2011-11-10 17:04:36,018 DEBUG org.apache.hadoop.hbase.catalog.CatalogTracker: &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; .META. server: linux76,60020,1320924159959 isn&apos;t valid. Cached .META. server: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
2011-11-10 17:04:36,021 INFO org.apache.hadoop.hbase.catalog.CatalogTracker: Retrying
org.apache.hadoop.hbase.NotAllMetaRegionsOnlineException: Timed out (100ms)
	at org.apache.hadoop.hbase.catalog.CatalogTracker.waitForMeta(CatalogTracker.java:449)
	at org.apache.hadoop.hbase.catalog.CatalogTracker.waitForMeta(CatalogTracker.java:413)
	at org.apache.hadoop.hbase.master.HMaster.assignRootAndMeta(HMaster.java:563)
	at org.apache.hadoop.hbase.master.HMaster.finishInitialization(HMaster.java:485)
	at org.apache.hadoop.hbase.master.HMaster.run(HMaster.java:322)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:619)
2011-11-10 17:04:36,027 DEBUG org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation: Lookedup root region location, connection=org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation@fe8c4; serverName=linux76,60020,1320924852399
2011-11-10 17:04:36,029 DEBUG org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation: Lookedup root region location, connection=org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation@fe8c4; serverName=linux76,60020,1320924852399
2011-11-10 17:04:36,040 DEBUG org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation: The connection to hconnection-0x1335f3da72b0244 has been closed.
2011-11-10 17:04:36,045 INFO org.apache.hadoop.hbase.catalog.CatalogTracker: Failed verification of .META.,,1 at address=linux76,60020,1320924159959; org.apache.hadoop.hbase.NotServingRegionException: org.apache.hadoop.hbase.NotServingRegionException: Region is not online: .META.,,1
2011-11-10 17:04:36,045 DEBUG org.apache.hadoop.hbase.catalog.CatalogTracker: &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; .META. server: linux76,60020,1320924159959 isn&apos;t valid. Cached .META. server: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
2011-11-10 17:04:36,114 INFO org.apache.hadoop.hbase.master.handler.ServerShutdownHandler: Splitting logs &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; linux76,60020,1320924692314
2011-11-10 17:04:36,139 DEBUG org.apache.hadoop.hbase.master.MasterFileSystem: Renamed region directory: hdfs:&lt;span class=&quot;code-comment&quot;&gt;//linux76:9000/hbase/.logs/linux76,60020,1320924692314-splitting
&lt;/span&gt;2011-11-10 17:04:36,139 INFO org.apache.hadoop.hbase.master.SplitLogManager: dead splitlog worker linux76,60020,1320924692314
2011-11-10 17:04:36,149 DEBUG org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation: Lookedup root region location, connection=org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation@fe8c4; serverName=linux76,60020,1320924852399
2011-11-10 17:04:36,151 DEBUG org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation: Lookedup root region location, connection=org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation@fe8c4; serverName=linux76,60020,1320924852399
2011-11-10 17:04:36,155 DEBUG org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation: The connection to hconnection-0x1335f3da72b0244 has been closed.
2011-11-10 17:04:36,161 DEBUG org.apache.hadoop.hbase.catalog.CatalogTracker: set &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; cached META location: linux76,60020,1320924159959
2011-11-10 17:04:36,181 DEBUG org.apache.hadoop.hbase.master.SplitLogManager: Scheduling batch of logs to split
2011-11-10 17:04:36,183 INFO org.apache.hadoop.hbase.master.SplitLogManager: started splitting logs in [hdfs:&lt;span class=&quot;code-comment&quot;&gt;//linux76:9000/hbase/.logs/linux76,60020,1320924692314-splitting]
&lt;/span&gt;2011-11-10 17:04:36,207 DEBUG org.apache.hadoop.hbase.master.SplitLogManager: put up splitlog task at znode /hbase/splitlog/hdfs%3A%2F%2Flinux76%3A9000%2Fhbase%2F.logs%2Flinux76%2C60020%2C1320924692314-splitting%2Flinux76%252C60020%252C1320924692314.1320924693350
2011-11-10 17:04:36,221 DEBUG org.apache.hadoop.hbase.master.SplitLogManager: put up splitlog task at znode /hbase/splitlog/hdfs%3A%2F%2Flinux76%3A9000%2Fhbase%2F.logs%2Flinux76%2C60020%2C1320924692314-splitting%2Flinux76%252C60020%252C1320924692314.1320924792869
2011-11-10 17:04:36,223 DEBUG org.apache.hadoop.hbase.master.SplitLogManager: put up splitlog task at znode /hbase/splitlog/hdfs%3A%2F%2Flinux76%3A9000%2Fhbase%2F.logs%2Flinux76%2C60020%2C1320924692314-splitting%2Flinux76%252C60020%252C1320924692314.1320924802840
2011-11-10 17:04:36,224 DEBUG org.apache.hadoop.hbase.master.SplitLogManager: put up splitlog task at znode /hbase/splitlog/hdfs%3A%2F%2Flinux76%3A9000%2Fhbase%2F.logs%2Flinux76%2C60020%2C1320924692314-splitting%2Flinux76%252C60020%252C1320924692314.1320924804044
2011-11-10 17:04:36,225 DEBUG org.apache.hadoop.hbase.master.SplitLogManager: put up splitlog task at znode /hbase/splitlog/hdfs%3A%2F%2Flinux76%3A9000%2Fhbase%2F.logs%2Flinux76%2C60020%2C1320924692314-splitting%2Flinux76%252C60020%252C1320924692314.1320924806282
2011-11-10 17:04:36,226 DEBUG org.apache.hadoop.hbase.master.SplitLogManager: put up splitlog task at znode /hbase/splitlog/hdfs%3A%2F%2Flinux76%3A9000%2Fhbase%2F.logs%2Flinux76%2C60020%2C1320924692314-splitting%2Flinux76%252C60020%252C1320924692314.1320924806535
2011-11-10 17:04:36,227 DEBUG org.apache.hadoop.hbase.master.SplitLogManager: task not yet acquired /hbase/splitlog/hdfs%3A%2F%2Flinux76%3A9000%2Fhbase%2F.logs%2Flinux76%2C60020%2C1320924692314-splitting%2Flinux76%252C60020%252C1320924692314.1320924693350 ver = 0
2011-11-10 17:04:36,229 DEBUG org.apache.hadoop.hbase.master.SplitLogManager: task not yet acquired /hbase/splitlog/hdfs%3A%2F%2Flinux76%3A9000%2Fhbase%2F.logs%2Flinux76%2C60020%2C1320924692314-splitting%2Flinux76%252C60020%252C1320924692314.1320924792869 ver = 0
2011-11-10 17:04:36,230 DEBUG org.apache.hadoop.hbase.master.SplitLogManager: task not yet acquired /hbase/splitlog/hdfs%3A%2F%2Flinux76%3A9000%2Fhbase%2F.logs%2Flinux76%2C60020%2C1320924692314-splitting%2Flinux76%252C60020%252C1320924692314.1320924802840 ver = 0
2011-11-10 17:04:36,231 DEBUG org.apache.hadoop.hbase.master.SplitLogManager: task not yet acquired /hbase/splitlog/hdfs%3A%2F%2Flinux76%3A9000%2Fhbase%2F.logs%2Flinux76%2C60020%2C1320924692314-splitting%2Flinux76%252C60020%252C1320924692314.1320924804044 ver = 0
2011-11-10 17:04:36,231 DEBUG org.apache.hadoop.hbase.master.SplitLogManager: task not yet acquired /hbase/splitlog/hdfs%3A%2F%2Flinux76%3A9000%2Fhbase%2F.logs%2Flinux76%2C60020%2C1320924692314-splitting%2Flinux76%252C60020%252C1320924692314.1320924806282 ver = 0
2011-11-10 17:04:36,232 DEBUG org.apache.hadoop.hbase.master.SplitLogManager: task not yet acquired /hbase/splitlog/hdfs%3A%2F%2Flinux76%3A9000%2Fhbase%2F.logs%2Flinux76%2C60020%2C1320924692314-splitting%2Flinux76%252C60020%252C1320924692314.1320924806535 ver = 0
2011-11-10 17:04:36,241 INFO org.apache.hadoop.hbase.master.SplitLogManager: task /hbase/splitlog/hdfs%3A%2F%2Flinux76%3A9000%2Fhbase%2F.logs%2Flinux76%2C60020%2C1320924692314-splitting%2Flinux76%252C60020%252C1320924692314.1320924693350 acquired by linux76,60020,1320924852399
2011-11-10 17:04:36,713 DEBUG org.apache.hadoop.hbase.master.SplitLogManager: total tasks = 6 unassigned = 5
2011-11-10 17:04:37,529 DEBUG org.apache.hadoop.hbase.master.AssignmentManager: Handling transition=RS_ZK_REGION_OPENED, server=linux76,60020,1320924852399, region=1028785192/.META.
2011-11-10 17:04:37,531 INFO org.apache.hadoop.hbase.master.handler.OpenedRegionHandler: Handling OPENED event &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; .META.,,1.1028785192 from linux76,60020,1320924852399; deleting unassigned node
2011-11-10 17:04:37,532 DEBUG org.apache.hadoop.hbase.zookeeper.ZKAssign: master:60000-0x1335f3da72b0243 Deleting existing unassigned node &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; 1028785192 that is in expected state RS_ZK_REGION_OPENED
2011-11-10 17:04:37,549 WARN org.apache.hadoop.hbase.master.AssignmentManager: Node deleted but still in RIT: .META.,,1.1028785192 state=OPEN, ts=1320924877527, server=linux76,60020,1320924852399
2011-11-10 17:04:37,549 DEBUG org.apache.hadoop.hbase.catalog.CatalogTracker: Current cached META location, linux76,60020,1320924159959, is not valid, resetting
2011-11-10 17:04:37,578 DEBUG org.apache.hadoop.hbase.zookeeper.ZKAssign: master:60000-0x1335f3da72b0243 Successfully deleted unassigned node &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; region 1028785192 in expected state RS_ZK_REGION_OPENED
2011-11-10 17:04:37,578 INFO org.apache.hadoop.hbase.master.handler.OpenedRegionHandler: The master has opened the region .META.,,1.1028785192 that was online on linux76,60020,1320924852399
2011-11-10 17:04:37,581 INFO org.apache.hadoop.hbase.master.HMaster: .META. assigned=2, rit=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, location=linux76,60020,1320924159959
2011-11-10 17:04:37,600 INFO org.apache.hadoop.hbase.master.SplitLogManager: task /hbase/splitlog/hdfs%3A%2F%2Flinux76%3A9000%2Fhbase%2F.logs%2Flinux76%2C60020%2C1320924692314-splitting%2Flinux76%252C60020%252C1320924692314.1320924693350 entered state done linux76,60020,1320924852399
2011-11-10 17:04:37,624 DEBUG org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation: Lookedup root region location, connection=org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation@fe8c4; serverName=linux76,60020,1320924852399
2011-11-10 17:04:37,631 DEBUG org.apache.hadoop.hbase.client.HTable$ClientScanner: Creating scanner over -ROOT- starting at key &apos;&apos;
2011-11-10 17:04:37,631 DEBUG org.apache.hadoop.hbase.client.HTable$ClientScanner: Advancing internal scanner to startKey at &apos;&apos;
2011-11-10 17:04:37,634 DEBUG org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation: Lookedup root region location, connection=org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation@fe8c4; serverName=linux76,60020,1320924852399
2011-11-10 17:04:37,666 DEBUG org.apache.hadoop.hbase.client.HTable$ClientScanner: Finished with scanning at REGION =&amp;gt; {NAME =&amp;gt; &apos;-ROOT-,,0&apos;, TableName =&amp;gt; &apos;-ROOT-&apos;, STARTKEY =&amp;gt; &apos;&apos;, ENDKEY =&amp;gt; &apos;&apos;, ENCODED =&amp;gt; 70236052,}
2011-11-10 17:04:37,667 DEBUG org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation: The connection to hconnection-0x1335f3da72b0244 has been closed.
2011-11-10 17:04:37,667 INFO org.apache.hadoop.hbase.catalog.MetaMigrationRemovingHTD: Meta version=0; migrated=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
2011-11-10 17:04:37,667 INFO org.apache.hadoop.hbase.catalog.MetaMigrationRemovingHTD: ROOT/Meta already up-to date with &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HRI.
2011-11-10 17:04:37,672 DEBUG org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation: Lookedup root region location, connection=org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation@fe8c4; serverName=linux76,60020,1320924852399
2011-11-10 17:04:37,698 DEBUG org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation: Cached location &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; .META.,,1.1028785192 is linux76:60020
2011-11-10 17:04:37,699 DEBUG org.apache.hadoop.hbase.client.HTable$ClientScanner: Creating scanner over .META. starting at key &apos;&apos;
2011-11-10 17:04:37,699 DEBUG org.apache.hadoop.hbase.client.HTable$ClientScanner: Advancing internal scanner to startKey at &apos;&apos;
2011-11-10 17:04:37,705 DEBUG org.apache.hadoop.hbase.client.HTable$ClientScanner: Finished with scanning at REGION =&amp;gt; {NAME =&amp;gt; &apos;.META.,,1&apos;, TableName =&amp;gt; &apos;.META.&apos;, STARTKEY =&amp;gt; &apos;&apos;, ENDKEY =&amp;gt; &apos;&apos;, ENCODED =&amp;gt; 1028785192,}
2011-11-10 17:04:37,706 DEBUG org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation: The connection to hconnection-0x1335f3da72b0244 has been closed.
2011-11-10 17:04:37,707 INFO org.apache.hadoop.hbase.master.AssignmentManager: Clean cluster startup. Assigning userregions
2011-11-10 17:04:37,707 DEBUG org.apache.hadoop.hbase.zookeeper.ZKAssign: master:60000-0x1335f3da72b0243 Deleting any existing unassigned nodes
2011-11-10 17:04:37,711 DEBUG org.apache.hadoop.hbase.client.HTable$ClientScanner: Creating scanner over .META. starting at key &apos;&apos;
2011-11-10 17:04:37,711 DEBUG org.apache.hadoop.hbase.client.HTable$ClientScanner: Advancing internal scanner to startKey at &apos;&apos;
2011-11-10 17:04:37,715 DEBUG org.apache.hadoop.hbase.master.SplitLogManager: total tasks = 6 unassigned = 5
2011-11-10 17:04:37,721 DEBUG org.apache.hadoop.hbase.client.HTable$ClientScanner: Finished with scanning at REGION =&amp;gt; {NAME =&amp;gt; &apos;.META.,,1&apos;, TableName =&amp;gt; &apos;.META.&apos;, STARTKEY =&amp;gt; &apos;&apos;, ENDKEY =&amp;gt; &apos;&apos;, ENCODED =&amp;gt; 1028785192,}
2011-11-10 17:04:37,721 DEBUG org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation: The connection to hconnection-0x1335f3da72b0244 has been closed.
2011-11-10 17:04:38,135 INFO org.apache.hadoop.hbase.master.HMaster: Master has completed initialization
2011-11-10 17:04:38,180 DEBUG org.apache.hadoop.hbase.client.HTable$ClientScanner: Creating scanner over .META. starting at key &apos;&apos;
2011-11-10 17:04:38,182 DEBUG org.apache.hadoop.hbase.client.HTable$ClientScanner: Advancing internal scanner to startKey at &apos;&apos;
2011-11-10 17:04:38,194 DEBUG org.apache.hadoop.hbase.client.HTable$ClientScanner: Finished with scanning at REGION =&amp;gt; {NAME =&amp;gt; &apos;.META.,,1&apos;, TableName =&amp;gt; &apos;.META.&apos;, STARTKEY =&amp;gt; &apos;&apos;, ENDKEY =&amp;gt; &apos;&apos;, ENCODED =&amp;gt; 1028785192,}
2011-11-10 17:04:38,194 DEBUG org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation: The connection to hconnection-0x1335f3da72b0244 has been closed.
2011-11-10 17:04:38,194 DEBUG org.apache.hadoop.hbase.master.CatalogJanitor: Scanned 0 catalog row(s) and gc&apos;d 0 unreferenced parent region(s)
2011-11-10 17:04:38,211 DEBUG org.apache.hadoop.hbase.regionserver.wal.HLogSplitter:  moved hdfs:&lt;span class=&quot;code-comment&quot;&gt;//linux76:9000/hbase/splitlog/linux76,60020,1320924852399_hdfs%3A%2F%2Flinux76%3A9000%2Fhbase%2F.logs%2Flinux76%2C60020%2C1320924692314-splitting%2Flinux76%252C60020%252C1320924692314.1320924693350/-ROOT-/70236052/recovered.edits/0000000000000000004 =&amp;gt; hdfs://linux76:9000/hbase/-ROOT-/70236052/recovered.edits/0000000000000000004
&lt;/span&gt;2011-11-10 17:04:38,513 INFO org.apache.hadoop.hbase.regionserver.wal.HLogSplitter: Archived processed log hdfs:&lt;span class=&quot;code-comment&quot;&gt;//linux76:9000/hbase/.logs/linux76,60020,1320924692314-splitting/linux76%2C60020%2C1320924692314.1320924693350 to hdfs://linux76:9000/hbase/.oldlogs/linux76%2C60020%2C1320924692314.1320924693350
&lt;/span&gt;2011-11-10 17:04:38,534 INFO org.apache.hadoop.hbase.master.SplitLogManager: Done splitting /hbase/splitlog/hdfs%3A%2F%2Flinux76%3A9000%2Fhbase%2F.logs%2Flinux76%2C60020%2C1320924692314-splitting%2Flinux76%252C60020%252C1320924692314.1320924693350
2011-11-10 17:04:38,540 DEBUG org.apache.hadoop.hbase.master.SplitLogManager$DeleteAsyncCallback: deleted /hbase/splitlog/hdfs%3A%2F%2Flinux76%3A9000%2Fhbase%2F.logs%2Flinux76%2C60020%2C1320924692314-splitting%2Flinux76%252C60020%252C1320924692314.1320924693350
2011-11-10 17:04:38,540 INFO org.apache.hadoop.hbase.master.SplitLogManager: task /hbase/splitlog/hdfs%3A%2F%2Flinux76%3A9000%2Fhbase%2F.logs%2Flinux76%2C60020%2C1320924692314-splitting%2Flinux76%252C60020%252C1320924692314.1320924804044 acquired by linux76,60020,1320924852399
2011-11-10 17:04:38,719 DEBUG org.apache.hadoop.hbase.master.SplitLogManager: total tasks = 5 unassigned = 4
2011-11-10 17:04:38,758 INFO org.apache.hadoop.hbase.master.SplitLogManager: task /hbase/splitlog/hdfs%3A%2F%2Flinux76%3A9000%2Fhbase%2F.logs%2Flinux76%2C60020%2C1320924692314-splitting%2Flinux76%252C60020%252C1320924692314.1320924804044 entered state done linux76,60020,1320924852399
2011-11-10 17:04:38,841 DEBUG org.apache.hadoop.hbase.regionserver.wal.HLogSplitter:  moved hdfs:&lt;span class=&quot;code-comment&quot;&gt;//linux76:9000/hbase/splitlog/linux76,60020,1320924852399_hdfs%3A%2F%2Flinux76%3A9000%2Fhbase%2F.logs%2Flinux76%2C60020%2C1320924692314-splitting%2Flinux76%252C60020%252C1320924692314.1320924804044/t1/dcbe1ee9681da1111a8043e2d8515dc4/recovered.edits/0000000000000000007 =&amp;gt; hdfs://linux76:9000/hbase/t1/dcbe1ee9681da1111a8043e2d8515dc4/recovered.edits/0000000000000000007
&lt;/span&gt;2011-11-10 17:04:38,880 INFO org.apache.hadoop.hbase.regionserver.wal.HLogSplitter: Archived processed log hdfs:&lt;span class=&quot;code-comment&quot;&gt;//linux76:9000/hbase/.logs/linux76,60020,1320924692314-splitting/linux76%2C60020%2C1320924692314.1320924804044 to hdfs://linux76:9000/hbase/.oldlogs/linux76%2C60020%2C1320924692314.1320924804044
&lt;/span&gt;2011-11-10 17:04:38,890 INFO org.apache.hadoop.hbase.master.SplitLogManager: Done splitting /hbase/splitlog/hdfs%3A%2F%2Flinux76%3A9000%2Fhbase%2F.logs%2Flinux76%2C60020%2C1320924692314-splitting%2Flinux76%252C60020%252C1320924692314.1320924804044
2011-11-10 17:04:38,916 DEBUG org.apache.hadoop.hbase.master.SplitLogManager$DeleteAsyncCallback: deleted /hbase/splitlog/hdfs%3A%2F%2Flinux76%3A9000%2Fhbase%2F.logs%2Flinux76%2C60020%2C1320924692314-splitting%2Flinux76%252C60020%252C1320924692314.1320924804044
2011-11-10 17:04:38,916 INFO org.apache.hadoop.hbase.master.SplitLogManager: task /hbase/splitlog/hdfs%3A%2F%2Flinux76%3A9000%2Fhbase%2F.logs%2Flinux76%2C60020%2C1320924692314-splitting%2Flinux76%252C60020%252C1320924692314.1320924806282 acquired by linux76,60020,1320924852399
2011-11-10 17:04:39,722 DEBUG org.apache.hadoop.hbase.master.SplitLogManager: total tasks = 4 unassigned = 3
2011-11-10 17:04:39,944 INFO org.apache.hadoop.hbase.master.SplitLogManager: task /hbase/splitlog/hdfs%3A%2F%2Flinux76%3A9000%2Fhbase%2F.logs%2Flinux76%2C60020%2C1320924692314-splitting%2Flinux76%252C60020%252C1320924692314.1320924806282 entered state done linux76,60020,1320924852399
2011-11-10 17:04:40,014 DEBUG org.apache.hadoop.hbase.regionserver.wal.HLogSplitter:  moved hdfs:&lt;span class=&quot;code-comment&quot;&gt;//linux76:9000/hbase/splitlog/linux76,60020,1320924852399_hdfs%3A%2F%2Flinux76%3A9000%2Fhbase%2F.logs%2Flinux76%2C60020%2C1320924692314-splitting%2Flinux76%252C60020%252C1320924692314.1320924806282/t1/dcbe1ee9681da1111a8043e2d8515dc4/recovered.edits/0000000000000000009 =&amp;gt; hdfs://linux76:9000/hbase/t1/dcbe1ee9681da1111a8043e2d8515dc4/recovered.edits/0000000000000000009
&lt;/span&gt;2011-11-10 17:04:40,060 INFO org.apache.hadoop.hbase.regionserver.wal.HLogSplitter: Archived processed log hdfs:&lt;span class=&quot;code-comment&quot;&gt;//linux76:9000/hbase/.logs/linux76,60020,1320924692314-splitting/linux76%2C60020%2C1320924692314.1320924806282 to hdfs://linux76:9000/hbase/.oldlogs/linux76%2C60020%2C1320924692314.1320924806282
&lt;/span&gt;2011-11-10 17:04:40,063 INFO org.apache.hadoop.hbase.master.SplitLogManager: Done splitting /hbase/splitlog/hdfs%3A%2F%2Flinux76%3A9000%2Fhbase%2F.logs%2Flinux76%2C60020%2C1320924692314-splitting%2Flinux76%252C60020%252C1320924692314.1320924806282
2011-11-10 17:04:40,076 DEBUG org.apache.hadoop.hbase.master.SplitLogManager$DeleteAsyncCallback: deleted /hbase/splitlog/hdfs%3A%2F%2Flinux76%3A9000%2Fhbase%2F.logs%2Flinux76%2C60020%2C1320924692314-splitting%2Flinux76%252C60020%252C1320924692314.1320924806282
2011-11-10 17:04:40,077 INFO org.apache.hadoop.hbase.master.SplitLogManager: task /hbase/splitlog/hdfs%3A%2F%2Flinux76%3A9000%2Fhbase%2F.logs%2Flinux76%2C60020%2C1320924692314-splitting%2Flinux76%252C60020%252C1320924692314.1320924806535 acquired by linux76,60020,1320924852399
2011-11-10 17:04:40,727 DEBUG org.apache.hadoop.hbase.master.SplitLogManager: total tasks = 3 unassigned = 2
2011-11-10 17:04:41,296 INFO org.apache.hadoop.hbase.master.SplitLogManager: task /hbase/splitlog/hdfs%3A%2F%2Flinux76%3A9000%2Fhbase%2F.logs%2Flinux76%2C60020%2C1320924692314-splitting%2Flinux76%252C60020%252C1320924692314.1320924806535 entered state done linux76,60020,1320924852399
2011-11-10 17:04:41,348 DEBUG org.apache.hadoop.hbase.regionserver.wal.HLogSplitter:  moved hdfs:&lt;span class=&quot;code-comment&quot;&gt;//linux76:9000/hbase/splitlog/linux76,60020,1320924852399_hdfs%3A%2F%2Flinux76%3A9000%2Fhbase%2F.logs%2Flinux76%2C60020%2C1320924692314-splitting%2Flinux76%252C60020%252C1320924692314.1320924806535/t1/dcbe1ee9681da1111a8043e2d8515dc4/recovered.edits/0000000000000000012 =&amp;gt; hdfs://linux76:9000/hbase/t1/dcbe1ee9681da1111a8043e2d8515dc4/recovered.edits/0000000000000000012
&lt;/span&gt;2011-11-10 17:04:41,370 INFO org.apache.hadoop.hbase.regionserver.wal.HLogSplitter: Archived processed log hdfs:&lt;span class=&quot;code-comment&quot;&gt;//linux76:9000/hbase/.logs/linux76,60020,1320924692314-splitting/linux76%2C60020%2C1320924692314.1320924806535 to hdfs://linux76:9000/hbase/.oldlogs/linux76%2C60020%2C1320924692314.1320924806535
&lt;/span&gt;2011-11-10 17:04:41,378 INFO org.apache.hadoop.hbase.master.SplitLogManager: Done splitting /hbase/splitlog/hdfs%3A%2F%2Flinux76%3A9000%2Fhbase%2F.logs%2Flinux76%2C60020%2C1320924692314-splitting%2Flinux76%252C60020%252C1320924692314.1320924806535
2011-11-10 17:04:41,386 DEBUG org.apache.hadoop.hbase.master.SplitLogManager$DeleteAsyncCallback: deleted /hbase/splitlog/hdfs%3A%2F%2Flinux76%3A9000%2Fhbase%2F.logs%2Flinux76%2C60020%2C1320924692314-splitting%2Flinux76%252C60020%252C1320924692314.1320924806535
2011-11-10 17:04:41,386 INFO org.apache.hadoop.hbase.master.SplitLogManager: task /hbase/splitlog/hdfs%3A%2F%2Flinux76%3A9000%2Fhbase%2F.logs%2Flinux76%2C60020%2C1320924692314-splitting%2Flinux76%252C60020%252C1320924692314.1320924802840 acquired by linux76,60020,1320924852399
2011-11-10 17:04:41,731 DEBUG org.apache.hadoop.hbase.master.SplitLogManager: total tasks = 2 unassigned = 1
2011-11-10 17:04:42,598 INFO org.apache.hadoop.hbase.master.SplitLogManager: task /hbase/splitlog/hdfs%3A%2F%2Flinux76%3A9000%2Fhbase%2F.logs%2Flinux76%2C60020%2C1320924692314-splitting%2Flinux76%252C60020%252C1320924692314.1320924802840 entered state done linux76,60020,1320924852399
2011-11-10 17:04:42,680 DEBUG org.apache.hadoop.hbase.regionserver.wal.HLogSplitter:  moved hdfs:&lt;span class=&quot;code-comment&quot;&gt;//linux76:9000/hbase/splitlog/linux76,60020,1320924852399_hdfs%3A%2F%2Flinux76%3A9000%2Fhbase%2F.logs%2Flinux76%2C60020%2C1320924692314-splitting%2Flinux76%252C60020%252C1320924692314.1320924802840/.META./1028785192/recovered.edits/0000000000000000006 =&amp;gt; hdfs://linux76:9000/hbase/.META./1028785192/recovered.edits/0000000000000000006
&lt;/span&gt;2011-11-10 17:04:42,697 INFO org.apache.hadoop.hbase.regionserver.wal.HLogSplitter: Archived processed log hdfs:&lt;span class=&quot;code-comment&quot;&gt;//linux76:9000/hbase/.logs/linux76,60020,1320924692314-splitting/linux76%2C60020%2C1320924692314.1320924802840 to hdfs://linux76:9000/hbase/.oldlogs/linux76%2C60020%2C1320924692314.1320924802840
&lt;/span&gt;2011-11-10 17:04:42,705 INFO org.apache.hadoop.hbase.master.SplitLogManager: Done splitting /hbase/splitlog/hdfs%3A%2F%2Flinux76%3A9000%2Fhbase%2F.logs%2Flinux76%2C60020%2C1320924692314-splitting%2Flinux76%252C60020%252C1320924692314.1320924802840
2011-11-10 17:04:42,713 DEBUG org.apache.hadoop.hbase.master.SplitLogManager$DeleteAsyncCallback: deleted /hbase/splitlog/hdfs%3A%2F%2Flinux76%3A9000%2Fhbase%2F.logs%2Flinux76%2C60020%2C1320924692314-splitting%2Flinux76%252C60020%252C1320924692314.1320924802840
2011-11-10 17:04:42,714 INFO org.apache.hadoop.hbase.master.SplitLogManager: task /hbase/splitlog/hdfs%3A%2F%2Flinux76%3A9000%2Fhbase%2F.logs%2Flinux76%2C60020%2C1320924692314-splitting%2Flinux76%252C60020%252C1320924692314.1320924792869 acquired by linux76,60020,1320924852399
2011-11-10 17:04:42,735 DEBUG org.apache.hadoop.hbase.master.SplitLogManager: total tasks = 1 unassigned = 0
2011-11-10 17:04:43,725 INFO org.apache.hadoop.hbase.master.SplitLogManager: task /hbase/splitlog/hdfs%3A%2F%2Flinux76%3A9000%2Fhbase%2F.logs%2Flinux76%2C60020%2C1320924692314-splitting%2Flinux76%252C60020%252C1320924692314.1320924792869 entered state done linux76,60020,1320924852399
2011-11-10 17:04:43,739 DEBUG org.apache.hadoop.hbase.master.SplitLogManager: total tasks = 1 unassigned = 0
2011-11-10 17:04:43,764 DEBUG org.apache.hadoop.hbase.regionserver.wal.HLogSplitter:  moved hdfs:&lt;span class=&quot;code-comment&quot;&gt;//linux76:9000/hbase/splitlog/linux76,60020,1320924852399_hdfs%3A%2F%2Flinux76%3A9000%2Fhbase%2F.logs%2Flinux76%2C60020%2C1320924692314-splitting%2Flinux76%252C60020%252C1320924692314.1320924792869/.META./1028785192/recovered.edits/0000000000000000005 =&amp;gt; hdfs://linux76:9000/hbase/.META./1028785192/recovered.edits/0000000000000000005
&lt;/span&gt;2011-11-10 17:04:43,791 INFO org.apache.hadoop.hbase.regionserver.wal.HLogSplitter: Archived processed log hdfs:&lt;span class=&quot;code-comment&quot;&gt;//linux76:9000/hbase/.logs/linux76,60020,1320924692314-splitting/linux76%2C60020%2C1320924692314.1320924792869 to hdfs://linux76:9000/hbase/.oldlogs/linux76%2C60020%2C1320924692314.1320924792869
&lt;/span&gt;2011-11-10 17:04:43,799 INFO org.apache.hadoop.hbase.master.SplitLogManager: Done splitting /hbase/splitlog/hdfs%3A%2F%2Flinux76%3A9000%2Fhbase%2F.logs%2Flinux76%2C60020%2C1320924692314-splitting%2Flinux76%252C60020%252C1320924692314.1320924792869
2011-11-10 17:04:43,799 DEBUG org.apache.hadoop.hbase.master.SplitLogManager: re-listing hdfs:&lt;span class=&quot;code-comment&quot;&gt;//linux76:9000/hbase/.logs/linux76,60020,1320924692314-splitting
&lt;/span&gt;2011-11-10 17:04:43,808 DEBUG org.apache.hadoop.hbase.master.SplitLogManager$DeleteAsyncCallback: deleted /hbase/splitlog/hdfs%3A%2F%2Flinux76%3A9000%2Fhbase%2F.logs%2Flinux76%2C60020%2C1320924692314-splitting%2Flinux76%252C60020%252C1320924692314.1320924792869
2011-11-10 17:04:43,810 INFO org.apache.hadoop.hbase.master.SplitLogManager: finished splitting (more than or equal to) 1851 bytes in 6 log files in [hdfs:&lt;span class=&quot;code-comment&quot;&gt;//linux76:9000/hbase/.logs/linux76,60020,1320924692314-splitting] in 7627ms
&lt;/span&gt;2011-11-10 17:04:46,215 DEBUG org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation: Lookedup root region location, connection=org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation@fe8c4; serverName=linux76,60020,1320924852399
2011-11-10 17:04:46,218 DEBUG org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation: Lookedup root region location, connection=org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation@fe8c4; serverName=linux76,60020,1320924852399
2011-11-10 17:04:46,221 DEBUG org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation: The connection to hconnection-0x1335f3da72b0244 has been closed.
2011-11-10 17:04:46,223 DEBUG org.apache.hadoop.hbase.catalog.CatalogTracker: set &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; cached META location: linux76,60020,1320924852399
2011-11-10 17:04:46,224 DEBUG org.apache.hadoop.hbase.client.HTable$ClientScanner: Creating scanner over .META. starting at key &apos;&apos;
2011-11-10 17:04:46,224 DEBUG org.apache.hadoop.hbase.client.HTable$ClientScanner: Advancing internal scanner to startKey at &apos;&apos;
2011-11-10 17:04:46,231 DEBUG org.apache.hadoop.hbase.client.HTable$ClientScanner: Finished with scanning at REGION =&amp;gt; {NAME =&amp;gt; &apos;.META.,,1&apos;, TableName =&amp;gt; &apos;.META.&apos;, STARTKEY =&amp;gt; &apos;&apos;, ENDKEY =&amp;gt; &apos;&apos;, ENCODED =&amp;gt; 1028785192,}
2011-11-10 17:04:46,231 DEBUG org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation: The connection to hconnection-0x1335f3da72b0244 has been closed.
2011-11-10 17:04:46,231 INFO org.apache.hadoop.hbase.master.handler.ServerShutdownHandler: Reassigning 0 region(s) that linux76,60020,1320924692314 was carrying (skipping 0 regions(s) that are already in transition)
2011-11-10 17:04:46,232 INFO org.apache.hadoop.hbase.master.handler.ServerShutdownHandler: Finished processing of shutdown of linux76,60020,1320924692314
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13147500" author="lhofhansl" created="Thu, 10 Nov 2011 05:33:38 +0000"  >&lt;p&gt;Reading the explanation of the problem makes my head spin.&lt;/p&gt;

&lt;p&gt;Looking at the code... It seems the Master&apos;s log splitting is always synchronous, followed by assigning root/meta. So if the Master does the splitting there is no race, correct?&lt;/p&gt;

&lt;p&gt;The problem you describe is with ServerShutdownhandler. I&apos;m having a little bit a hard time when exactly that is triggered. From the ZK node-deleted event?&lt;/p&gt;</comment>
                            <comment id="13147505" author="ram_krish" created="Thu, 10 Nov 2011 05:47:23 +0000"  >&lt;p&gt;@Lars&lt;br/&gt;
Sorry if my explanation is tiring.  its because i tried to explain what all i found.. i will try to make it crisper. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
1 MAster 2 RS&lt;br/&gt;
Master is getting restarted and just that time RS carrying META goes down.&lt;br/&gt;
-&amp;gt;Master&apos;s log splitting is synchronous but if the RS is still in onlineServerlist he will not split the log.&lt;br/&gt;
-&amp;gt; Yes problem is with ServerShutdownhandler() as it will get triggered on ZK node-deleted event which may not happen immediately. So the RS is not yet removed from onlineServerList and still the META recovered edits is not yet created.&lt;br/&gt;
-&amp;gt; By that time master tries to assign the ROOT and META without the Recovered Edits.&lt;br/&gt;
Am i clear now? I made things appear little messier ..&lt;/p&gt;</comment>
                            <comment id="13147509" author="lhofhansl" created="Thu, 10 Nov 2011 05:59:47 +0000"  >&lt;p&gt;Thanks Ram. I was referring to the problem (not your explanation) &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;I see what the problem is now (I don&apos;t see a solution either).&lt;br/&gt;
You know more this about than I do, but I&apos;ll think about this more tomorrow, maybe I have an epiphany.&lt;/p&gt;</comment>
                            <comment id="13147534" author="yuzhihong@gmail.com" created="Thu, 10 Nov 2011 07:23:43 +0000"  >&lt;p&gt;Here is relevant master log:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2011-11-10 17:04:22,495 INFO org.apache.hadoop.hbase.master.MasterFileSystem: Log folder hdfs:&lt;span class=&quot;code-comment&quot;&gt;//linux76:9000/hbase/.logs/linux76,60020,1320924692314 belongs to an existing region server
&lt;/span&gt;2011-11-10 17:04:22,497 INFO org.apache.hadoop.hbase.master.MasterFileSystem: Log folder hdfs:&lt;span class=&quot;code-comment&quot;&gt;//linux76:9000/hbase/.logs/linux76,60020,1320924852399 belongs to an existing region server
&lt;/span&gt;2011-11-10 17:04:22,497 INFO org.apache.hadoop.hbase.master.MasterFileSystem: No logs to split
...
2011-11-10 17:04:36,018 DEBUG org.apache.hadoop.hbase.catalog.CatalogTracker: &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; .META. server: linux76,60020,1320924159959 isn&apos;t valid. Cached .META. server: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
2011-11-10 17:04:36,021 INFO org.apache.hadoop.hbase.catalog.CatalogTracker: Retrying
org.apache.hadoop.hbase.NotAllMetaRegionsOnlineException: Timed out (100ms)
	at org.apache.hadoop.hbase.catalog.CatalogTracker.waitForMeta(CatalogTracker.java:449)
	at org.apache.hadoop.hbase.catalog.CatalogTracker.waitForMeta(CatalogTracker.java:413)
	at org.apache.hadoop.hbase.master.HMaster.assignRootAndMeta(HMaster.java:563)
	at org.apache.hadoop.hbase.master.HMaster.finishInitialization(HMaster.java:485)
	at org.apache.hadoop.hbase.master.HMaster.run(HMaster.java:322)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:619)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I think NotAllMetaRegionsOnlineException should be handled by HMaster.finishInitialization(). Upon catching NotAllMetaRegionsOnlineException we can call the following in a loop:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.fileSystemManager.
      splitLogAfterStartup(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.serverManager.getOnlineServers().keySet());

    &lt;span class=&quot;code-comment&quot;&gt;// Make sure root and meta assigned before proceeding.
&lt;/span&gt;    assignRootAndMeta(status);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13147592" author="ram_krish" created="Thu, 10 Nov 2011 09:50:10 +0000"  >&lt;p&gt;@Ted&lt;br/&gt;
So by doing so we will get a considerable delay which will ensure that ServerShutDownHandler is completed? &lt;/p&gt;</comment>
                            <comment id="13147890" author="lhofhansl" created="Thu, 10 Nov 2011 18:28:29 +0000"  >&lt;p&gt;Looking at the code that makes a lot of sense.&lt;br/&gt;
I think it&apos;s fine to retry forever, as the cluster is not functional until all meta regions are online.&lt;/p&gt;

&lt;p&gt;We have a plan &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Ram, you wanna take a stab at it?&lt;/p&gt;</comment>
                            <comment id="13147903" author="yuzhihong@gmail.com" created="Thu, 10 Nov 2011 18:42:44 +0000"  >&lt;p&gt;Patch illustrating my proposal.&lt;/p&gt;</comment>
                            <comment id="13147910" author="lhofhansl" created="Thu, 10 Nov 2011 18:50:23 +0000"  >&lt;p&gt;Looks good to me. Should we add some sleeping inside the loop?&lt;/p&gt;</comment>
                            <comment id="13147918" author="yuzhihong@gmail.com" created="Thu, 10 Nov 2011 18:53:24 +0000"  >&lt;p&gt;I thought about that.&lt;br/&gt;
Since assignRootAndMeta() involves waiting, I didn&apos;t add the sleep.&lt;/p&gt;

&lt;p&gt;BTW, the retry logic would only be active during race condition which should be rare.&lt;/p&gt;</comment>
                            <comment id="13147929" author="lhofhansl" created="Thu, 10 Nov 2011 19:07:04 +0000"  >&lt;p&gt;Makes sense. +1 for patch.&lt;/p&gt;

&lt;p&gt;Ram, can you validate that your scenarios are all fixed with this change?&lt;/p&gt;</comment>
                            <comment id="13147936" author="yuzhihong@gmail.com" created="Thu, 10 Nov 2011 19:17:04 +0000"  >&lt;p&gt;Validating patch.&lt;/p&gt;</comment>
                            <comment id="13148023" author="hadoopqa" created="Thu, 10 Nov 2011 21:25:37 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12503270/4748.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12503270/4748.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated -164 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 51 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;/p&gt;


&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/226//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/226//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/226//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/226//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/226//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/226//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13148059" author="yuzhihong@gmail.com" created="Thu, 10 Nov 2011 22:29:30 +0000"  >&lt;p&gt;Patch v2 changes the return value from assignRootAndMeta() - either &lt;del&gt;ROOT&lt;/del&gt; or .META. may pass verification and doesn&apos;t need to be assigned.&lt;/p&gt;</comment>
                            <comment id="13148142" author="hadoopqa" created="Fri, 11 Nov 2011 00:14:47 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12503291/4748-v2.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12503291/4748-v2.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated -164 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 51 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.regionserver.wal.TestLogRolling&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/227//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/227//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/227//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/227//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/227//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/227//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13148165" author="yuzhihong@gmail.com" created="Fri, 11 Nov 2011 00:43:37 +0000"  >&lt;p&gt;The test failure was due to:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.io.IOException: Cannot lock storage /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/trunk/target/test-data/1623d417-fdbe-461d-865c-1bec8d29fb37/dfscluster_3909585f-582c-43d3-92f6-67178c43e228/dfs/data/data3. The directory is already locked.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13148271" author="ram_krish" created="Fri, 11 Nov 2011 05:10:06 +0000"  >&lt;p&gt;@Ted&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
} &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (NotAllMetaRegionsOnlineException namroe) {
+        metaExceptions++;
+        regionsAssigned = 0;
+        LOG.debug(&lt;span class=&quot;code-quote&quot;&gt;&quot;Meta regions offline, seen &quot;&lt;/span&gt; + metaExceptions + &lt;span class=&quot;code-quote&quot;&gt;&quot; exceptions&quot;&lt;/span&gt;);
+      }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;but the internal code inside assignRootandMeta() is already catching the NotAllMetaRegionsOnlineException.  Inside verifyMetaRegionLocation()&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
      connection = waitForMetaServerConnection(timeout);
    } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (NotAllMetaRegionsOnlineException e) {
      &lt;span class=&quot;code-comment&quot;&gt;// Pass
&lt;/span&gt;    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and waitforMeta() &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (waitForMeta(100) != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) &lt;span class=&quot;code-keyword&quot;&gt;break&lt;/span&gt;;
      } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (NotAllMetaRegionsOnlineException e) {
        LOG.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;Retrying&quot;&lt;/span&gt;, e);
      } 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;is also doing the same thing.  So the NotAllMetaRegionsOnlineException will never come to finishInitialization&lt;br/&gt;
and the flow will carry on as it was doing earlier.  Correct me if am wrong.&lt;/p&gt;</comment>
                            <comment id="13148275" author="yuzhihong@gmail.com" created="Fri, 11 Nov 2011 05:26:39 +0000"  >&lt;p&gt;Good catch, Ramkrishna.&lt;/p&gt;

&lt;p&gt;How about letting NotAllMetaRegionsOnlineException escape from verifyRootRegionLocation() and verifyMetaRegionLocation() ?&lt;br/&gt;
I think these two methods shouldn&apos;t hide NotAllMetaRegionsOnlineException.&lt;/p&gt;</comment>
                            <comment id="13148285" author="ram_krish" created="Fri, 11 Nov 2011 06:09:54 +0000"  >&lt;p&gt;@Ted&lt;br/&gt;
If we try to let NotAllMetaRegionsOnlineException escape from verifyMetaRegionLocation() and have it in finishInitialization() then we will not be able to do a clean start up of master.  I think along with this we need to do some synch between expireServer() and master.assignRootAndMeta().?&lt;br/&gt;
Will try creating a patch for this.&lt;/p&gt;</comment>
                            <comment id="13148762" author="yuzhihong@gmail.com" created="Fri, 11 Nov 2011 21:43:16 +0000"  >&lt;p&gt;I received patch v3 from Ramkrishna et. al.&lt;br/&gt;
TestAdmin hangs with the patch.&lt;br/&gt;
Would refine the patch before publishing.&lt;/p&gt;</comment>
                            <comment id="13148938" author="yuzhihong@gmail.com" created="Sat, 12 Nov 2011 02:07:36 +0000"  >&lt;p&gt;I think we should revalidate the scenario in this JIRA now that &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4511&quot; title=&quot;There is data loss when master failovers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4511&quot;&gt;&lt;del&gt;HBASE-4511&lt;/del&gt;&lt;/a&gt; gets integrated.&lt;/p&gt;</comment>
                            <comment id="13150280" author="ram_krish" created="Tue, 15 Nov 2011 07:31:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4511&quot; title=&quot;There is data loss when master failovers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4511&quot;&gt;&lt;del&gt;HBASE-4511&lt;/del&gt;&lt;/a&gt; will now ensure that the RS is removed from online list but after master tries to split the log.&lt;br/&gt;
So now as part of expireServer() the splitLog should happen before the assignment of META happens if not the same problem may happen. &lt;/p&gt;</comment>
                            <comment id="13184696" author="zjushch" created="Thu, 12 Jan 2012 03:23:33 +0000"  >&lt;p&gt;Could I see the patch?&lt;/p&gt;

&lt;p&gt;Since it is quite rare, I think we should wait to assignRootAndMeta unitl finishing MetaServerShutdownHandler if exists.&lt;/p&gt;</comment>
                            <comment id="13184715" author="ram_krish" created="Thu, 12 Jan 2012 04:27:15 +0000"  >&lt;p&gt;@Chunhui&lt;br/&gt;
Ok let me check with your suggestion and then upload the patch. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; thanks&lt;/p&gt;</comment>
                            <comment id="13185084" author="ram_krish" created="Thu, 12 Jan 2012 17:28:18 +0000"  >&lt;p&gt;The fix for this is combined with &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5179&quot; title=&quot;Concurrent processing of processFaileOver and ServerShutdownHandler may cause region to be assigned before log splitting is completed, causing data loss&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5179&quot;&gt;&lt;del&gt;HBASE-5179&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13443335" author="jesse_yates" created="Tue, 28 Aug 2012 18:16:05 +0000"  >&lt;p&gt;Marking as a duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5179&quot; title=&quot;Concurrent processing of processFaileOver and ServerShutdownHandler may cause region to be assigned before log splitting is completed, causing data loss&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5179&quot;&gt;&lt;del&gt;HBASE-5179&lt;/del&gt;&lt;/a&gt;. Reopen if I misread Ram&apos;s comments.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="12538023">HBASE-5179</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 8 Nov 2011 17:25:39 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>216039</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 14 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hs3b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>101813</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>