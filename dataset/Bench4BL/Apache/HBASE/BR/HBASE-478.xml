<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 02 20:32:56 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-478/HBASE-478.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-478] offlining of table does not run reliably</title>
                <link>https://issues.apache.org/jira/browse/HBASE-478</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;I have a table of 4 regions made w/ PE.  I cannot reliably offline it.  I&apos;m using &apos;disable TestTable&apos; and have traced it to ensure its not a problem in hql.    What I see is that one region will get the offlined mark or maybe two.. but never all.&lt;/p&gt;

&lt;p&gt;Jim in IRC suggested that if we did the .TABLE. catalog table, offlining the entry there might be more reliable than trying to offline all regions in a table.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12389927">HBASE-478</key>
            <summary>offlining of table does not run reliably</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jimk">Jim Kellerman</assignee>
                                    <reporter username="stack">stack</reporter>
                        <labels>
                    </labels>
                <created>Fri, 29 Feb 2008 22:10:06 +0000</created>
                <updated>Fri, 22 Aug 2008 21:13:10 +0000</updated>
                            <resolved>Wed, 7 May 2008 17:57:05 +0000</resolved>
                                    <version>0.1.1</version>
                    <version>0.1.2</version>
                    <version>0.2.0</version>
                                    <fixVersion>0.1.2</fixVersion>
                    <fixVersion>0.2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12577594" author="stack" created="Tue, 11 Mar 2008 20:43:51 +0000"  >&lt;p&gt;Made critical issue.  Can&apos;t admin hbase &amp;#8211; add columns after creation, etc. &amp;#8211; without being able to offline reliably.&lt;/p&gt;</comment>
                            <comment id="12591840" author="stack" created="Wed, 23 Apr 2008 22:32:42 +0000"  >&lt;p&gt;Needs fixing for 0.2.0; offlining/onlining needs to be reliable.&lt;/p&gt;</comment>
                            <comment id="12593210" author="bryanduxbury" created="Wed, 30 Apr 2008 02:59:32 +0000"  >&lt;p&gt;It seems whatever strategy we take for this issue it&apos;ll be easier if we do &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-451&quot; title=&quot;Remove HTableDescriptor from HRegionInfo&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-451&quot;&gt;&lt;del&gt;HBASE-451&lt;/del&gt;&lt;/a&gt;. Maybe we should do that first?&lt;/p&gt;

&lt;p&gt;In general, the problem is that its impossible (or at least impractical) for the client to block while a table is being offlined. So, instead, I think HTableDescriptor should get a new flag, something like isGoingDown that indicates it&apos;s not offline yet but it&apos;s supposed to be coming down. Then, whenever the client tries to do a schema operation, if the table is going down but isn&apos;t offline yet, we know to reject attempts. Regions for tables that are offline or going down won&apos;t get assigned. &lt;/p&gt;

&lt;p&gt;I&apos;d go one step further and say that we should require explicit disable of table before allowing schema operations, rather than doing it automatically. It&apos;d be an extra step but I think it would set expectations a little better about what should happen during schema operations.&lt;/p&gt;</comment>
                            <comment id="12593488" author="stack" created="Thu, 1 May 2008 05:32:54 +0000"  >&lt;p&gt;I thought &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-609&quot; title=&quot;Master doesn&amp;#39;t see regionserver edits because of clock skew&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-609&quot;&gt;&lt;del&gt;HBASE-609&lt;/del&gt;&lt;/a&gt; also fixed this issue but I just tested with a 40 region table and there are laggards... 3 regions that wouldn&apos;t offline.  Then enabling, only about 10 or 12 came back online.  Deleting, all but the 3 that wouldn&apos;t offline went away.  Once it gets into the half-online/half-offline state, its hosed (which is odd &amp;#8211; a second run of disable should just offline whatever is still online).&lt;/p&gt;</comment>
                            <comment id="12593691" author="jimk" created="Fri, 2 May 2008 01:30:47 +0000"  >&lt;p&gt;With a couple of changes, I disable table now appears to work, even if the table is only partially enabled.&lt;/p&gt;

&lt;p&gt;(49 table regions)&lt;/p&gt;

&lt;p&gt;enable is still problematic. It still only on-lines part of the table, and repeated attempts to online the remainder has only worked in one of 5 disable/enable cycles.&lt;/p&gt;

&lt;p&gt;I&apos;ll pursue this further tomorrow.&lt;/p&gt;</comment>
                            <comment id="12593932" author="jimk" created="Fri, 2 May 2008 23:47:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-478&quot; title=&quot;offlining of table does not run reliably&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-478&quot;&gt;&lt;del&gt;HBASE-478&lt;/del&gt;&lt;/a&gt; offlining of table does not run reliably&lt;/p&gt;

&lt;p&gt;M HMaster&lt;/p&gt;

&lt;p&gt;  Require tables to be offline before they can be deleted. This&lt;br/&gt;
  enables the Set regionsToBeDeleted to be removed. Also we need no&lt;br/&gt;
  longer worry about regionsToBe deleted in processMsgs,&lt;br/&gt;
  ProcessServerShutdown, ProcessServerShutdown.scanMetaRegion,&lt;br/&gt;
  ProcessRegionClose, ProcessRegionClose.process&lt;/p&gt;

&lt;p&gt;  If a region server exits cleanly, do not put any region up for&lt;br/&gt;
  reassignment if it was in the killedRegions Set.&lt;/p&gt;

&lt;p&gt;  Fix potential synchronization problem in&lt;br/&gt;
  ProcessServerShutdown.scanMetaRegion &lt;/p&gt;

&lt;p&gt;  Remove regions from killList when ProcessServerShutdown finishes.&lt;/p&gt;

&lt;p&gt;  Don&apos;t throw an error from TableOperation.process if info:regioninfo&lt;br/&gt;
  is empty. Log an error and continue.&lt;/p&gt;

&lt;p&gt;  Change IOException to TableNotFoundException in TableOperation.process&lt;/p&gt;

&lt;p&gt;  Don&apos;t retry in TableOperation.process if exception caught is&lt;br/&gt;
  TableNotFoundException, TableNotDisabledException, or&lt;br/&gt;
  InvalidColumnNameException. Just rethrow the exception.&lt;/p&gt;

&lt;p&gt;  In ChangeTableState.postProcessMeta, if onlining a region, remove&lt;br/&gt;
  the region from killedRegions. Fix a couple of potential&lt;br/&gt;
  synchronization problems. Put regions being offlined into&lt;br/&gt;
  localKillList before adding those already queued for that server.&lt;/p&gt;

&lt;p&gt;  In TableDelete, add method processScanItem, which throws&lt;br/&gt;
  TableNotDisabledException if the table is still online.&lt;/p&gt;

&lt;p&gt;  TableDelete.postProcessMeta need no longer worry about regions that&lt;br/&gt;
  are online. If it is called, it can assert that every region in the&lt;br/&gt;
  table is offline, remove them from the meta and delete the region&lt;br/&gt;
  directories. &lt;/p&gt;

&lt;p&gt;  ModifyColumn.postProcessMeta now throws InvalidColumnNameException&lt;br/&gt;
  if the column does not exist instead of generic IOException&lt;/p&gt;

&lt;p&gt;M HStore&lt;/p&gt;

&lt;p&gt;  Add deleted columns to results of MemcacheScanner&lt;/p&gt;

&lt;p&gt;  Added @SuppressWarnings(&quot;hiding&quot;) annotations to StoreFileScanner as&lt;br/&gt;
  needed.&lt;/p&gt;

&lt;p&gt;  Add javadoc for public methods and @Override annotations where needed. &lt;/p&gt;

&lt;p&gt;  Fix some indentation and line too long problems.&lt;/p&gt;

&lt;p&gt;M TestHBaseCluster&lt;/p&gt;

&lt;p&gt;  Remove private method cleanup which deleted table.&lt;/p&gt;</comment>
                            <comment id="12593933" author="jimk" created="Fri, 2 May 2008 23:49:09 +0000"  >&lt;p&gt;Patch for 0.1.2. Passes local tests and enable/disable now work reliably.&lt;/p&gt;

&lt;p&gt;Please review.&lt;/p&gt;</comment>
                            <comment id="12593936" author="jimk" created="Fri, 2 May 2008 23:53:43 +0000"  >&lt;p&gt;Once patch for 0.1 branch is approved, I will submit patch for 0.2.0&lt;/p&gt;</comment>
                            <comment id="12594063" author="stack" created="Sun, 4 May 2008 06:22:25 +0000"  >&lt;p&gt;Jim: Can you fix the patch.  Seems like most of it is you adding ^M.  For example:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Index: src/java/org/apache/hadoop/hbase/HStore.java
===================================================================
--- src/java/org/apache/hadoop/hbase/HStore.java    (revision 652949)
+++ src/java/org/apache/hadoop/hbase/HStore.java    (working copy)
@@ -85,7 +85,7 @@
     &lt;span class=&quot;code-comment&quot;&gt;// The currently active sorted map of edits.
&lt;/span&gt;     &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;volatile&lt;/span&gt; SortedMap&amp;lt;HStoreKey, &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[]&amp;gt; mc =
       createSynchronizedSortedMap();
- 
+
     &lt;span class=&quot;code-comment&quot;&gt;// Snapshot of memcache.  Made &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; flusher.
&lt;/span&gt;     &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;volatile&lt;/span&gt; SortedMap&amp;lt;HStoreKey, &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[]&amp;gt; snapshot =
       createSynchronizedSortedMap();
@@ -126,43 +126,43 @@
       }
     }

-   /**
-    * Return the current snapshot.
-    * Called by flusher when it wants to clean up snapshot made by a previous
+    /**
+     * Return the current snapshot.
+     * Called by flusher when it wants to clean up snapshot made by a previous
      * call to {@link snapshot}
-    * @&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; Return snapshot.
-    * @see {@link #snapshot()}
-    * @see {@link #clearSnapshot(SortedMap)}
-    */
-   SortedMap&amp;lt;HStoreKey, &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[]&amp;gt; getSnapshot() {
-     &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.snapshot;
-   }
+     * @&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; Return snapshot.
+     * @see {@link #snapshot()}
+     * @see {@link #clearSnapshot(SortedMap)}
+     */
+    SortedMap&amp;lt;HStoreKey, &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[]&amp;gt; getSnapshot() {
+      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.snapshot;
+    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Above is from the head of the patch and nothing of substance has been changed.  Makes it hard to review.  Thanks.&lt;/p&gt;</comment>
                            <comment id="12594124" author="jimk" created="Sun, 4 May 2008 21:31:35 +0000"  >&lt;p&gt;This patch removes most of the whitespace changes, so it should be easier to read.&lt;/p&gt;

&lt;p&gt;The whitespace changes were made originally because several sections of code are indented 1 space instead of 2.&lt;/p&gt;</comment>
                            <comment id="12594125" author="jimk" created="Sun, 4 May 2008 21:32:39 +0000"  >&lt;p&gt;new patch that removes whitespace changes. please review.&lt;/p&gt;</comment>
                            <comment id="12594270" author="stack" created="Mon, 5 May 2008 17:00:10 +0000"  >&lt;p&gt;Thanks for removing white-space differences.&lt;/p&gt;

&lt;p&gt;Following is not important.&lt;/p&gt;

&lt;p&gt;To avoid confusion, I&apos;d suggest in future that we act on the IDE&apos;s suggestion and rename these fields in the subclass.  My sense is that subclasses with data members of the same name as members of their parent class will for sure burn someone refactoring or debugging.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    @SuppressWarnings(&lt;span class=&quot;code-quote&quot;&gt;&quot;hiding&quot;&lt;/span&gt;)
     &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; MapFile.Reader[] readers;

     &lt;span class=&quot;code-comment&quot;&gt;// Used around replacement of Readers &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; they change &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; we&apos;re scanning.
&lt;/span&gt;+    @SuppressWarnings(&lt;span class=&quot;code-quote&quot;&gt;&quot;hiding&quot;&lt;/span&gt;)
     &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; ReentrantReadWriteLock lock = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ReentrantReadWriteLock();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You removed table delete from TestHBaseCluster.  It&apos;d be too hard to add enable/delete?  It&apos;d be hard asserting enable state?   Disabled state?   If you could assert disabled state, maybe add back delete?  I just suggest this because this facility &amp;#8211; enabling/disabling table is critical to hbase admin and can&apos;t be broken going forward (I can&apos;t believe we got this far w/o clammer for this fix &amp;#8211; smile).&lt;/p&gt;

&lt;p&gt;Will be back after test has finished.&lt;/p&gt;</comment>
                            <comment id="12594356" author="jimk" created="Mon, 5 May 2008 21:52:17 +0000"  >&lt;p&gt;I removed the table delete because enable/disable are asychronous and might not be deterministic for a test case. Given that this table is so small, that may not be an issue, on the other hand, it doesn&apos;t test much either since we generally needed a table of 30-40 regions to get enable/disable to fail.&lt;/p&gt;

&lt;p&gt;I can put back the table delete if you want, preceded by a disable. I don&apos;t have a strong opinion either way. Your call.&lt;/p&gt;</comment>
                            <comment id="12594391" author="stack" created="Mon, 5 May 2008 23:11:51 +0000"  >&lt;p&gt;+1 on this patch.&lt;/p&gt;

&lt;p&gt;I tested with a big table.  I was able to disable, then enable, and then scan the whole thing.  I then did a remove and all regions were cleared from the .META. (dropping a table that has not been first disabled comes back with success though nothing happened but this is a HQL bug and HQL is going bye-byes so not a worry).  Its not removing the table directory but thats another issue.&lt;/p&gt;

&lt;p&gt;Regards tests for enable/disable, maybe add them to TRUNK if can figure an easy means of making assertions (Scan of .META. and all regions are on or offline?) otherwise, lets worry about it next time we break this facility (smile).  Lets not tests get in way of adding this patch to branch.&lt;/p&gt;</comment>
                            <comment id="12594393" author="jimk" created="Mon, 5 May 2008 23:12:39 +0000"  >&lt;p&gt;The patch to fix this issue for trunk, demonstrates the CME exception described in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-599&quot; title=&quot;CME iterating return from ServerManager.getMarkedToClose&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-599&quot;&gt;&lt;del&gt;HBASE-599&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12594406" author="jimk" created="Mon, 5 May 2008 23:57:45 +0000"  >&lt;p&gt;Committed patch for 0.1 branch. Working on patch for trunk&lt;/p&gt;</comment>
                            <comment id="12594408" author="jimk" created="Tue, 6 May 2008 00:00:07 +0000"  >&lt;p&gt;This patch is so intertwined with &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-599&quot; title=&quot;CME iterating return from ServerManager.getMarkedToClose&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-599&quot;&gt;&lt;del&gt;HBASE-599&lt;/del&gt;&lt;/a&gt;, incorporating fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-599&quot; title=&quot;CME iterating return from ServerManager.getMarkedToClose&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-599&quot;&gt;&lt;del&gt;HBASE-599&lt;/del&gt;&lt;/a&gt; in this issue for 0.2.0&lt;/p&gt;</comment>
                            <comment id="12594453" author="jimk" created="Tue, 6 May 2008 03:27:44 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-478&quot; title=&quot;offlining of table does not run reliably&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-478&quot;&gt;&lt;del&gt;HBASE-478&lt;/del&gt;&lt;/a&gt; offlining of table does not run reliably, &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-599&quot; title=&quot;CME iterating return from ServerManager.getMarkedToClose&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-599&quot;&gt;&lt;del&gt;HBASE-599&lt;/del&gt;&lt;/a&gt; CME iterating return from ServerManager.getMarkedToClose&lt;/p&gt;

&lt;p&gt;M BaseScanner, ProcessRegionClose, ProcessServerShutdown, RegionManager, ServerManager, TableDelete&lt;/p&gt;

&lt;p&gt;Require tables to be offline before they can be deleted. This enables the Set regionsToBeDeleted to be removed.&lt;/p&gt;

&lt;p&gt;M In ChangeTableState.postProcessMeta&lt;/p&gt;

&lt;p&gt;If onlining a region, mark it as noLongerClosing.  Fix a couple of potential synchronization problems. Put regions being offlined into localKillList before adding those already queued for that server.&lt;/p&gt;

&lt;p&gt;M ModifyColumn&lt;/p&gt;

&lt;p&gt;In postProcessMeta, throw InvalidColumnNameException if the column does not exist instead of generic IOException&lt;/p&gt;

&lt;p&gt;M ProcessServerShutdown&lt;/p&gt;

&lt;p&gt;Remove regions from closing regions when ProcessServerShutdown finishes.&lt;/p&gt;

&lt;p&gt;M RegionManager&lt;/p&gt;

&lt;p&gt;Fix potential synchronization problem in regionsAwaitingAssignment, markToCloseBulk&lt;/p&gt;

&lt;p&gt;Eliminate potential CME&apos;s by returning a copy of map in onlineMetaRegions&lt;/p&gt;

&lt;p&gt;Eliminate CME by changing getMarkedToClose to removeMarkedToClose&lt;/p&gt;

&lt;p&gt;Add method allRegionsClosed.&lt;/p&gt;

&lt;p&gt;M RetryableMetaOperation&lt;/p&gt;

&lt;p&gt;Don&apos;t retry in doWithRetries if exception caught is TableNotFoundException, TableNotDisabledException, or InvalidColumnNameException. Just rethrow the exception.&lt;/p&gt;

&lt;p&gt;M ServerManager&lt;/p&gt;

&lt;p&gt;Fix potential synchronization problems in regionServerStartup, processRegionServerAllsWell, cancelLease, leaseExpired&lt;/p&gt;

&lt;p&gt;If a region server exits cleanly, do not put any region up for reassignment if it was marked to close.&lt;/p&gt;

&lt;p&gt;In processMsgs, remove regions to close, rather than getting, iterating and removing. Caused a CME.&lt;/p&gt;

&lt;p&gt;Don&apos;t need to iterate over entrySet in getAverageLoad. Iterating over values is sufficient.&lt;/p&gt;

&lt;p&gt;Eliminate potential CME&apos;s by returning a copy of map in getServersToServerInfo, getServersToLoad, getLoadToServers&lt;/p&gt;

&lt;p&gt;M TableDelete&lt;/p&gt;

&lt;p&gt;Add method processScanItem, which throws TableNotDisabledException if the table is still online.&lt;/p&gt;

&lt;p&gt;M TableOperation&lt;/p&gt;

&lt;p&gt;Don&apos;t throw an error from TableOperation.process if info:regioninfo is empty. Log an error and continue.&lt;/p&gt;

&lt;p&gt;Change IOException to TableNotFoundException in TableOperation.process&lt;/p&gt;

&lt;p&gt;M Memcache&lt;/p&gt;

&lt;p&gt;Add deleted columns to results of MemcacheScanner&lt;/p&gt;

&lt;p&gt;M TestHBaseCluster&lt;/p&gt;

&lt;p&gt;Remove private method cleanup which deleted table.&lt;/p&gt;</comment>
                            <comment id="12594454" author="jimk" created="Tue, 6 May 2008 03:29:21 +0000"  >&lt;p&gt;Patch for trunk available. Includes fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-599&quot; title=&quot;CME iterating return from ServerManager.getMarkedToClose&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-599&quot;&gt;&lt;del&gt;HBASE-599&lt;/del&gt;&lt;/a&gt;. Please review.&lt;/p&gt;</comment>
                            <comment id="12594967" author="stack" created="Wed, 7 May 2008 17:11:46 +0000"  >&lt;p&gt;+1 on patch.&lt;/p&gt;

&lt;p&gt;I did not test (Patch is stale for TRUNK I believe).&lt;/p&gt;

&lt;p&gt;The 599 fixes all look reasonable to me.&lt;/p&gt;

&lt;p&gt;I like changes where IOEs are converted to TableNotFoundExceptions where it makes sense.&lt;/p&gt;

&lt;p&gt;Going forward, doesn&apos;t have to be in this patch, we should consider new exception superclass, one we don&apos;t retry so we don&apos;t have to do this kinda thing in multiple places:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (e &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; TableNotFoundException ||
+            e &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; TableNotDisabledException ||
+            e &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; InvalidColumnNameException) {
+          &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; e;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</comment>
                            <comment id="12594980" author="jimk" created="Wed, 7 May 2008 17:57:05 +0000"  >&lt;p&gt;Committed to branch and trunk.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                            <outwardlinks description="incorporates">
                                        <issuelink>
            <issuekey id="12394489">HBASE-599</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12396088">HBASE-627</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12381396" name="478-0.1-v2.patch" size="19001" author="jimk" created="Sun, 4 May 2008 21:31:35 +0000"/>
                            <attachment id="12381355" name="478-0.1.patch" size="54375" author="jimk" created="Fri, 2 May 2008 23:47:33 +0000"/>
                            <attachment id="12381476" name="478-trunk.patch" size="33789" author="jimk" created="Tue, 6 May 2008 03:27:44 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 30 Apr 2008 02:59:32 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>25222</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 31 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0h7jr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>98485</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>