<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sat Dec 03 18:11:40 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-5970/HBASE-5970.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-5970] Improve the AssignmentManager#updateTimer and speed up handling opened event</title>
                <link>https://issues.apache.org/jira/browse/HBASE-5970</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;We found handing opened event very slow in the environment with lots of regions.&lt;/p&gt;

&lt;p&gt;The problem is the slow AssignmentManager#updateTimer.&lt;/p&gt;

&lt;p&gt;We do the test for bulk assigning 10w (i.e. 100k) regions, the whole process of bulk assigning took 1 hours.&lt;/p&gt;

&lt;p&gt;2012-05-06 20:31:49,201 INFO org.apache.hadoop.hbase.master.AssignmentManager: Bulk assigning 100000 region(s) round-robin across 5 server(s)&lt;br/&gt;
2012-05-06 21:26:32,103 INFO org.apache.hadoop.hbase.master.AssignmentManager: Bulk assigning done&lt;/p&gt;

&lt;p&gt;I think we could do the improvement for the AssignmentManager#updateTimer: Make a thread do this work.&lt;br/&gt;
After the improvement, it took only 4.5mins&lt;/p&gt;

&lt;p&gt;2012-05-07 11:03:36,581 INFO org.apache.hadoop.hbase.master.AssignmentManager: Bulk assigning 100000 region(s) across 5 server(s), retainAssignment=true &lt;br/&gt;
2012-05-07 11:07:57,073 INFO org.apache.hadoop.hbase.master.AssignmentManager: Bulk assigning done &lt;/p&gt;</description>
                <environment></environment>
        <key id="12554429">HBASE-5970</key>
            <summary>Improve the AssignmentManager#updateTimer and speed up handling opened event</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zjushch">chunhui shen</assignee>
                                    <reporter username="zjushch">chunhui shen</reporter>
                        <labels>
                    </labels>
                <created>Wed, 9 May 2012 04:44:58 +0000</created>
                <updated>Mon, 23 Sep 2013 18:30:18 +0000</updated>
                            <resolved>Thu, 31 May 2012 05:48:17 +0000</resolved>
                                                    <fixVersion>0.95.0</fixVersion>
                                    <component>master</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>12</watches>
                                                                <comments>
                            <comment id="13271103" author="ram_krish" created="Wed, 9 May 2012 05:15:42 +0000"  >&lt;p&gt;@Chunhui&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5337&quot; title=&quot;AM.updateTimers() delays the timeout monitor from assigning regions.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5337&quot;&gt;&lt;del&gt;HBASE-5337&lt;/del&gt;&lt;/a&gt;-AM.updateTimers() delays the timeout monitor from assigning regions.&lt;br/&gt;
I think i can duplicate it with this defect.&lt;br/&gt;
Few comments&lt;br/&gt;
serversInUpdatingTimer can be changed to updateTimerForServer?&lt;br/&gt;
The order in which the updation should happen matters? &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Threads.setDaemonThreadRunning(timerUpdater.getThread(),
+        master.getServerName() + &lt;span class=&quot;code-quote&quot;&gt;&quot;.timerUpdater&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Can we just add this to one protected method.  Actually we found that doing like that will help you in mocking the master in case of testing these scenarios?&lt;/p&gt;

&lt;p&gt;Patch looks good.&lt;/p&gt;
</comment>
                            <comment id="13271109" author="zjushch" created="Wed, 9 May 2012 05:24:17 +0000"  >&lt;p&gt;@ram&lt;br/&gt;
Thanks for the review.&lt;br/&gt;
Let&apos;s see what others say, and I&apos;ll do the modify together.&lt;/p&gt;</comment>
                            <comment id="13271113" author="zhihyu@ebaysf.com" created="Wed, 9 May 2012 05:32:23 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+          serverToUpdateTimer = serversInUpdatingTimer
+              .higher(serverToUpdateTimer);
+        }
+        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (serverToUpdateTimer == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
+          &lt;span class=&quot;code-keyword&quot;&gt;break&lt;/span&gt;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;What would happen if a &apos;lower&apos; ServerName gets its timers updated, gets removed from serversInUpdatingTimer and later is added back to serversInUpdatingTimer ?&lt;br/&gt;
How would this server be picked up ?&lt;/p&gt;</comment>
                            <comment id="13271115" author="zjushch" created="Wed, 9 May 2012 05:37:12 +0000"  >&lt;blockquote&gt;&lt;p&gt;What would happen if a &apos;lower&apos; ServerName gets its timers updated, gets removed from serversInUpdatingTimer and later is added back to serversInUpdatingTimer ?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;If later it is added back to serversInUpdatingTimer, we will update timer again after next chore()&lt;/p&gt;</comment>
                            <comment id="13271119" author="zhihyu@ebaysf.com" created="Wed, 9 May 2012 05:44:13 +0000"  >&lt;p&gt;That&apos;s right. But I wonder why we need to wait for the next chore() ?&lt;/p&gt;</comment>
                            <comment id="13271127" author="zjushch" created="Wed, 9 May 2012 06:01:05 +0000"  >&lt;p&gt;I think we don&apos;t need to update the timer so active.&lt;br/&gt;
Waiting for the next chore() could reduce much consume if there are lots of opened event, because they may update the same server. &lt;/p&gt;</comment>
                            <comment id="13271153" author="zhihyu@ebaysf.com" created="Wed, 9 May 2012 06:35:11 +0000"  >&lt;p&gt;The above assumption is reasonable.&lt;/p&gt;</comment>
                            <comment id="13271983" author="mingma" created="Thu, 10 May 2012 00:32:50 +0000"  >&lt;p&gt;Looks good. Why do we need &quot;true&quot; in &quot;while (true &amp;amp;&amp;amp; !stopper.isStopped())&quot;?&lt;/p&gt;</comment>
                            <comment id="13272025" author="zjushch" created="Thu, 10 May 2012 01:52:12 +0000"  >&lt;blockquote&gt;&lt;p&gt;Why do we need &quot;true&quot; in &quot;while (true &amp;amp;&amp;amp; !stopper.isStopped())&quot;?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Sorry, make such a mistake~~~~,  correct it in patch v2.&lt;/p&gt;

&lt;p&gt;Thanks for the review&lt;/p&gt;</comment>
                            <comment id="13274457" author="zjushch" created="Mon, 14 May 2012 05:28:32 +0000"  >&lt;p&gt;In patchv3, change &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (!stopper.isStopped())&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;to&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (!serversInUpdatingTimer.isEmpty() &amp;amp;&amp;amp; !stopper.isStopped())&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13275283" author="zjushch" created="Tue, 15 May 2012 09:21:33 +0000"  >&lt;p&gt;@stack&lt;br/&gt;
Could you take a see for this issue.&lt;br/&gt;
In our tests, it could speed up handling opened event if there are lots of regions when cluster start up:&lt;br/&gt;
For bulk assigning 10w (i.e. 100k) regions, reduce the time from 1 hours to 4.5 mins&lt;/p&gt;
</comment>
                            <comment id="13276090" author="hadoopqa" created="Tue, 15 May 2012 18:21:12 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12526715/HBASE-5970v3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12526715/HBASE-5970v3.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    +1 hadoop23.  The patch compiles against the hadoop 0.23.x profile.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 31 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;/p&gt;


&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1872//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1872//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1872//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1872//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1872//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1872//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13276217" author="zhihyu@ebaysf.com" created="Tue, 15 May 2012 21:11:50 +0000"  >&lt;p&gt;Re-attaching patch v3.&lt;/p&gt;</comment>
                            <comment id="13276272" author="hadoopqa" created="Tue, 15 May 2012 22:06:45 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12527518/5970v3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12527518/5970v3.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    +1 hadoop23.  The patch compiles against the hadoop 0.23.x profile.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 31 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.regionserver.TestSplitTransactionOnCluster&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1877//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1877//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1877//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1877//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1877//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1877//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13279118" author="stack" created="Fri, 18 May 2012 19:44:39 +0000"  >&lt;p&gt;I like the effect this patch has.  You are addressing this comment in updateTimers?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-comment&quot;&gt;// This loop could be expensive.&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Should this be in the new timer class?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; ConcurrentSkipListSet&amp;lt;ServerName&amp;gt; serversInUpdatingTimer = 
+    &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ConcurrentSkipListSet&amp;lt;ServerName&amp;gt;();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Is this javadoc right?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+   * Add the server to serversInUpdatingTimer, and wait {@link TimerUpdater} to
+   * update timers &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; all regions in transition going against &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; server.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Why is doing this work in the background faster?  Is it just that it being inline, it takes a noticeable amount of time?&lt;/p&gt;

&lt;p&gt;This is a nice improvement.&lt;/p&gt;</comment>
                            <comment id="13279526" author="zjushch" created="Sat, 19 May 2012 11:36:14 +0000"  >&lt;blockquote&gt;&lt;p&gt;Why is doing this work in the background faster? Is it just that it being inline, it takes a noticeable amount of time?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;AssignmentManager#updateTimers would check each region in RIT, and there are lots of regions in the RIT when startup, so it will took much time(about 30ms if 100k regions in RIT). However, in the current logic, we will do the AssignmentManager#updateTimers for each opened event, causing the whole process of handling all the opened events tooks much much time.&lt;/p&gt;

&lt;p&gt;If we do the updateTimers in the background, we needn&apos;t wait it when handling opened event. Also, we wouldn&apos;t updateTimers for the same Regionserver in a short time.(In fact, when cluster startup , lots of opened events from the same regionserver at the same time, we needn&apos;t do this work many times at the moment)&lt;/p&gt;</comment>
                            <comment id="13279531" author="zjushch" created="Sat, 19 May 2012 11:43:36 +0000"  >&lt;p&gt;@stack&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;You are addressing this comment in updateTimers?&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-comment&quot;&gt;// This loop could be expensive.&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I keep this loop, but greatly reduce the call times&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Is this javadoc right?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I&apos;m not sure, could you give a suggestion.&lt;/p&gt;

&lt;p&gt;Thanks for the review&lt;/p&gt;</comment>
                            <comment id="13280367" author="nkeywal" created="Mon, 21 May 2012 19:03:48 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;Could you share the logs of the tests? I would be interested to have a look at them.&lt;br/&gt;
The javadoc for updateTimers says it&apos;s not used for bulk assignment, is there a mix of regions &apos;bulk assigned&apos; and other regions?&lt;br/&gt;
I see as well in the description that the time was once with &apos;retainAssignment=true&apos; and once without. Are the results comparable in both cases?&lt;/p&gt;

&lt;p&gt;Thank you!&lt;/p&gt;</comment>
                            <comment id="13280667" author="zjushch" created="Tue, 22 May 2012 01:20:00 +0000"  >&lt;p&gt;@nkeywal&lt;br/&gt;
In the current bulk assign, we also put plans to AssignmentManager.regionPlans to prevent multi assign.&lt;br/&gt;
So, we would also use updateTimers in the bulk assign.&lt;/p&gt;</comment>
                            <comment id="13286197" author="stack" created="Wed, 30 May 2012 23:49:05 +0000"  >&lt;p&gt;What do we need to do to get this patch in?  Can you update it for trunk please Chunhui so we can rerun it by hadoopqa.&lt;/p&gt;

&lt;p&gt;On the javadoc suggestion?  I&apos;m not sure what you&apos;d write but write something that makes sense (the javadoc as is is nonesensical).&lt;/p&gt;
</comment>
                            <comment id="13286198" author="stack" created="Wed, 30 May 2012 23:49:44 +0000"  >&lt;p&gt;Upping priority.  This helps w/ MTTR.&lt;/p&gt;</comment>
                            <comment id="13286269" author="zjushch" created="Thu, 31 May 2012 02:18:57 +0000"  >&lt;p&gt;Update patch for current trunk,  modify the javadoc for the method AssignmentManager#addToServersInUpdatingTimer&lt;/p&gt;</comment>
                            <comment id="13286282" author="hadoopqa" created="Thu, 31 May 2012 03:07:03 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12530318/HBASE-5970v4.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12530318/HBASE-5970v4.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    +1 hadoop2.0.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to cause Findbugs (version 1.3.9) to fail.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.master.TestAssignmentManager&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2068//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2068//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2068//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2068//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13286297" author="stack" created="Thu, 31 May 2012 04:04:15 +0000"  >&lt;p&gt;Chunhui Do you think the failure in AM because of this patch?  Should we retry it against hadoopqa?&lt;/p&gt;

&lt;p&gt;I was wondering what bound we have on the number of threads when splitting out on the regionserver?  It should be low by default I&apos;d say.&lt;/p&gt;

&lt;p&gt;Good stuff.&lt;/p&gt;</comment>
                            <comment id="13286319" author="zjushch" created="Thu, 31 May 2012 05:01:49 +0000"  >&lt;p&gt;Reattaching patch v4&lt;/p&gt;</comment>
                            <comment id="13286324" author="zjushch" created="Thu, 31 May 2012 05:07:22 +0000"  >&lt;blockquote&gt;&lt;p&gt;I was wondering what bound we have on the number of threads when splitting out on the regionserver? It should be low by default I&apos;d say.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Sorry, Stack, I&apos;m not clear about this, is it related to this issue?&lt;/p&gt;</comment>
                            <comment id="13286326" author="stack" created="Thu, 31 May 2012 05:09:20 +0000"  >&lt;blockquote&gt;&lt;p&gt;Sorry, Stack, I&apos;m not clear about this, is it related to this issue?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It is.  I found the answer reviewing the last patch up on rb (answer is 3).&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="13286342" author="zjushch" created="Thu, 31 May 2012 05:38:32 +0000"  >&lt;p&gt;I run the failed test case(org.apache.hadoop.hbase.master.TestAssignmentManager) and passed on the local PC.&lt;/p&gt;

&lt;p&gt;Also I think I found the reason why it failed: caused by TestAssignmentManager#testRegionPlanIsUpdatedWhenRegionFailsToOpen&lt;/p&gt;

&lt;p&gt;At the last of testRegionPlanIsUpdatedWhenRegionFailsToOpen, am will handle region with the state RS_ZK_REGION_FAILED_OPEN, &lt;/p&gt;

&lt;p&gt;in the AssignmentManager#handleRegion()&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; RS_ZK_REGION_FAILED_OPEN:
...
&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.executorService.submit(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ClosedRegionHandler(master,
            &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;, regionState.getRegion()));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;so we call a thread to execute ClosedRegionHandler in the background, and it create a node after &lt;br/&gt;
testRegionPlanIsUpdatedWhenRegionFailsToOpen execute &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void after() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; KeeperException {
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.watcher != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
      &lt;span class=&quot;code-comment&quot;&gt;// Clean up all znodes
&lt;/span&gt;      ZKAssign.deleteAllNodes(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.watcher);
      &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.watcher.close();
    }
  }&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Hence, it will fail with a probability and nothing with this patch.&lt;/p&gt;</comment>
                            <comment id="13286346" author="stack" created="Thu, 31 May 2012 05:46:42 +0000"  >&lt;p&gt;Excellent Chunhui.  Can you file a new issue w/ what you found on AM (any chance of a patch to fix it?)&lt;/p&gt;

&lt;p&gt;Also, you are correct above when you think my question about &apos;number of threads&apos; belonged to another issue.  Pardon my being confused.&lt;/p&gt;

&lt;p&gt;Let me commit this patch.&lt;/p&gt;</comment>
                            <comment id="13286347" author="stack" created="Thu, 31 May 2012 05:48:35 +0000"  >&lt;p&gt;Committed to trunk.  Thanks for the patch Chunhui.&lt;/p&gt;</comment>
                            <comment id="13286354" author="hadoopqa" created="Thu, 31 May 2012 05:57:33 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12530329/HBASE-5970v4.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12530329/HBASE-5970v4.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    +1 hadoop2.0.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to cause Findbugs (version 1.3.9) to fail.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.master.TestSplitLogManager&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2071//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2071//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2071//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2071//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13286370" author="ram_krish" created="Thu, 31 May 2012 06:39:44 +0000"  >&lt;p&gt;@Chunhui&lt;br/&gt;
As mentioned in that &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5337&quot; title=&quot;AM.updateTimers() delays the timeout monitor from assigning regions.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5337&quot;&gt;&lt;del&gt;HBASE-5337&lt;/del&gt;&lt;/a&gt; now when we start updating the timers at different times if suppose we introduce timeoutmonitor again to a lower value like 5 min then the update timers overall does not help becuase it delays the timeout monitor from acting after 5 mins. Just adding this so that later if we try to bring back the TM then we have to recheck this.&lt;br/&gt;
Nice work Chunhui.&lt;/p&gt;</comment>
                            <comment id="13286378" author="zjushch" created="Thu, 31 May 2012 07:04:35 +0000"  >&lt;p&gt;@ram&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;it delays the timeout monitor from acting after 5 mins&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes, but we will delays the timeout monitor at most 10s( period is 10s as default), isn&apos;t it acceptable?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.timerUpdater = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; TimerUpdater(conf.getInt(
+        &lt;span class=&quot;code-quote&quot;&gt;&quot;hbase.master.assignment.timerupdater.period&quot;&lt;/span&gt;, 10000), master);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13286380" author="ram_krish" created="Thu, 31 May 2012 07:13:31 +0000"  >&lt;p&gt;@Chunhui&lt;br/&gt;
What i meant is overall the updatetimers itself affects the TM.  The problem is updatetimer just updates all the RITs time with the current time.&lt;br/&gt;
Suppose the TM saw the RIT at time x.  Now if the timeout monitor is 5 mins.  Exactly after x+5 we expect the TM to reassign.  But the updatetimer will update all the regions in RIT.  So even this region who should be assinged after x+5 will also get updated to the current time.&lt;br/&gt;
So now the TM will be able to take action only after x+5+Delta.  Currently as it is 30 mins we wont be much affected as no one will be waiting for 30 mins.&lt;/p&gt;</comment>
                            <comment id="13286391" author="hudson" created="Thu, 31 May 2012 07:34:04 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2963 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2963/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2963/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5970&quot; title=&quot;Improve the AssignmentManager#updateTimer and speed up handling opened event&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5970&quot;&gt;&lt;del&gt;HBASE-5970&lt;/del&gt;&lt;/a&gt; Improve the AssignmentManager#updateTimer and speed up handling opened event (Revision 1344569)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13286392" author="zjushch" created="Thu, 31 May 2012 07:35:51 +0000"  >&lt;blockquote&gt;&lt;p&gt;So now the TM will be able to take action only after x+5+Delta&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;We use updatetimers to prevent unnecessary multi assign region, it just updates the RITs time as the related server.&lt;/p&gt;

&lt;p&gt;Comparing to previous logic, here Delta is at most 10s.&lt;/p&gt;

&lt;p&gt;Anyway, multi assign is much more serious than delayed assign by TimeoutMonitor,&lt;/p&gt;

&lt;p&gt;And, we should try our best to ensure that there is no case to need use TimeoutMonitor assign region.&lt;/p&gt;

&lt;p&gt;Correct me if wrong, thanks&lt;/p&gt;

</comment>
                            <comment id="13286396" author="ram_krish" created="Thu, 31 May 2012 07:49:39 +0000"  >&lt;p&gt;@Chunhui&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;And, we should try our best to ensure that there is no case to need use TimeoutMonitor assign region.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yes.  This is what we are also trying to achieve.  Many of our issues is also targeted on that.&lt;/p&gt;</comment>
                            <comment id="13286509" author="hudson" created="Thu, 31 May 2012 11:59:00 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #34 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/34/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/34/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5970&quot; title=&quot;Improve the AssignmentManager#updateTimer and speed up handling opened event&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5970&quot;&gt;&lt;del&gt;HBASE-5970&lt;/del&gt;&lt;/a&gt; Improve the AssignmentManager#updateTimer and speed up handling opened event (Revision 1344569)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13293796" author="ram_krish" created="Tue, 12 Jun 2012 17:34:58 +0000"  >&lt;p&gt;@Chunhui&lt;br/&gt;
I have a question here.  We tried this patch on 0.94 with 20000 regions and 4 RS.  The scenario we tried was to disable and enable a table that had 20000 regions.&lt;br/&gt;
We did not see much improvement. Do you see any specific scenario where we can get improvement? Thanks.&lt;/p&gt;</comment>
                            <comment id="13294063" author="zjushch" created="Wed, 13 Jun 2012 02:12:05 +0000"  >&lt;p&gt;@ram&lt;br/&gt;
How much time did you took to enable 20000 regions, if regions is not very much, master handle fast enough, could you test with 100,000 regions?&lt;br/&gt;
In our testing, RS open region fast, but master handle opened event slowly, and find 100,000 regions much much slower than 50,000 regions&lt;/p&gt;

&lt;p&gt;Another reason, recently we found RS open regions very slowly after 0.92 if one table has much regions&lt;/p&gt;

&lt;p&gt;You could see the following code to get the detail&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; RegionOpeningState openRegion(HRegionInfo region, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; versionOfOfflineNode){
...
HTableDescriptor htd = &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.tableDescriptors.get(region.getTableName());
...

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; HTableDescriptor get(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; tablename){
...
&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; modtime = getTableInfoModtime(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.fs, &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.rootdir, tablename);
...
}
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;getTableInfoModtime-&amp;gt;getTableInfoPath-&amp;gt;getTableInfoPath-&amp;gt;FSUtils.listStatus()&lt;/p&gt;

&lt;p&gt;if one table has much regions, FSUtils.listStatus() will take much time, and opening region in parallel on the rs will be closed to serially.&lt;/p&gt;

&lt;p&gt;So maybe we should do the improvement for above code.&lt;/p&gt;</comment>
                            <comment id="13294072" author="zhihyu@ebaysf.com" created="Wed, 13 Jun 2012 02:35:22 +0000"  >&lt;p&gt;@Chunhui:&lt;br/&gt;
You can open a new issue for improving the above code.&lt;/p&gt;</comment>
                            <comment id="13294132" author="ram_krish" created="Wed, 13 Jun 2012 04:20:03 +0000"  >&lt;p&gt;@Chunhui&lt;br/&gt;
I think in trunk some change has been done in the code that you are suggesting by N? &lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5998&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-5998&lt;/a&gt;.  &lt;/p&gt;</comment>
                            <comment id="13487271" author="hudson" created="Tue, 30 Oct 2012 21:36:50 +0000"  >&lt;p&gt;Integrated in HBase-0.94 #560 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/560/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/560/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7038&quot; title=&quot;Port HBASE-5970 Improve the AssignmentManager#updateTimer and speed up handling opened event to 0.94&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7038&quot;&gt;&lt;del&gt;HBASE-7038&lt;/del&gt;&lt;/a&gt; Port &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5970&quot; title=&quot;Improve the AssignmentManager#updateTimer and speed up handling opened event&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5970&quot;&gt;&lt;del&gt;HBASE-5970&lt;/del&gt;&lt;/a&gt; Improve the AssignmentManager#updateTimer and speed up handling opened event to 0.94 (Sergey Shelukhin) (Revision 1403787)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13489944" author="yangming860101" created="Sat, 3 Nov 2012 06:25:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=zjushch&quot; class=&quot;user-hover&quot; rel=&quot;zjushch&quot;&gt;chunhui shen&lt;/a&gt; &lt;br/&gt;
I have tried this patch on 0.94.2 with 100,000 regions(one empty table) and 4RS.I restarted the cluster,but found handing opened event still very slow.&lt;br/&gt;
I did not see any improvement,can you show us your test environment?&lt;br/&gt;
Thanks.&lt;/p&gt;</comment>
                            <comment id="13489950" author="yangming860101" created="Sat, 3 Nov 2012 06:35:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=zjushch&quot; class=&quot;user-hover&quot; rel=&quot;zjushch&quot;&gt;chunhui shen&lt;/a&gt;&lt;br/&gt;
Or does this path depend on other modification? Thanks.&lt;/p&gt;</comment>
                            <comment id="13490355" author="hudson" created="Mon, 5 Nov 2012 01:35:34 +0000"  >&lt;p&gt;Integrated in HBase-0.94-security-on-Hadoop-23 #9 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security-on-Hadoop-23/9/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security-on-Hadoop-23/9/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7038&quot; title=&quot;Port HBASE-5970 Improve the AssignmentManager#updateTimer and speed up handling opened event to 0.94&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7038&quot;&gt;&lt;del&gt;HBASE-7038&lt;/del&gt;&lt;/a&gt; Port &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5970&quot; title=&quot;Improve the AssignmentManager#updateTimer and speed up handling opened event&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5970&quot;&gt;&lt;del&gt;HBASE-5970&lt;/del&gt;&lt;/a&gt; Improve the AssignmentManager#updateTimer and speed up handling opened event to 0.94 (Sergey Shelukhin) (Revision 1403787)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13490414" author="zjushch" created="Mon, 5 Nov 2012 02:07:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yangming&quot; class=&quot;user-hover&quot; rel=&quot;yangming&quot;&gt;yangming85&lt;/a&gt;&lt;br/&gt;
Please see the &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7018&quot; title=&quot;Fix and Improve TableDescriptor caching for bulk assignment&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7018&quot;&gt;&lt;del&gt;HBASE-7018&lt;/del&gt;&lt;/a&gt;, you know why your cluster handle opened event slow.&lt;/p&gt;

&lt;p&gt;In my testing, the cluster doesn&apos;t have the problem by &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7018&quot; title=&quot;Fix and Improve TableDescriptor caching for bulk assignment&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7018&quot;&gt;&lt;del&gt;HBASE-7018&lt;/del&gt;&lt;/a&gt;, so its bottleneck is on the master.&lt;/p&gt;

&lt;p&gt;Also, please increase the open region threads on the regionserver.&lt;/p&gt;

&lt;p&gt;If you also have problem, you could email me directly...&lt;/p&gt;</comment>
                            <comment id="13490420" author="yangming860101" created="Mon, 5 Nov 2012 02:55:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=zjushch&quot; class=&quot;user-hover&quot; rel=&quot;zjushch&quot;&gt;chunhui shen&lt;/a&gt;&lt;br/&gt;
ok,thanks very much!&lt;br/&gt;
I will try!&lt;/p&gt;</comment>
                            <comment id="13774899" author="stack" created="Mon, 23 Sep 2013 18:30:18 +0000"  >&lt;p&gt;Marking closed.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12541228">HBASE-5337</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12613221">HBASE-7038</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12551766">HBASE-5843</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12527518" name="5970v3.patch" size="3620" author="zhihyu@ebaysf.com" created="Tue, 15 May 2012 21:11:50 +0000"/>
                            <attachment id="12526101" name="HBASE-5970.patch" size="3591" author="zjushch" created="Wed, 9 May 2012 04:55:10 +0000"/>
                            <attachment id="12526281" name="HBASE-5970v2.patch" size="3583" author="zjushch" created="Thu, 10 May 2012 01:54:45 +0000"/>
                            <attachment id="12526715" name="HBASE-5970v3.patch" size="3620" author="zjushch" created="Mon, 14 May 2012 05:28:32 +0000"/>
                            <attachment id="12530329" name="HBASE-5970v4.patch" size="3637" author="zjushch" created="Thu, 31 May 2012 05:01:49 +0000"/>
                            <attachment id="12530318" name="HBASE-5970v4.patch" size="3637" author="zjushch" created="Thu, 31 May 2012 02:18:57 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 9 May 2012 05:15:42 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>238671</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 10 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0aggv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>58941</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>