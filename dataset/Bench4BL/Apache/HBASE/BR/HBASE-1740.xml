<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 02 18:43:14 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-1740/HBASE-1740.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-1740] ICV has a subtle race condition only visible under high load</title>
                <link>https://issues.apache.org/jira/browse/HBASE-1740</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;ICV demonstrates a race condition under high load.  The result is a duplicate KeyValue with the same timestamp, at first in the memcache, and in hfile, then both in hfile.  The get/scan code doesnt know which one to read, and picks one arbitrarily.  One of the keyvalues is correct, one is incorrect.&lt;/p&gt;

&lt;p&gt;What happens at a deeper level:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;we start an ICV&lt;/li&gt;
	&lt;li&gt;a snapshot happens and moves the memstore to the snapshot&lt;/li&gt;
	&lt;li&gt;the ICV code puts a key-value into memstore that has the same timestamp as a keyvalue in the snapshot.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;This is a deep race condition and several attempts to fix it failed in production here at SU.  This issue is about a more permanent fix.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12432106">HBASE-1740</key>
            <summary>ICV has a subtle race condition only visible under high load</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ryanobjc">ryan rawson</assignee>
                                    <reporter username="ryanobjc">ryan rawson</reporter>
                        <labels>
                    </labels>
                <created>Tue, 4 Aug 2009 00:00:29 +0000</created>
                <updated>Fri, 20 Nov 2015 13:02:08 +0000</updated>
                            <resolved>Fri, 11 Sep 2009 21:46:31 +0000</resolved>
                                    <version>0.20.0</version>
                                    <fixVersion>0.20.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12738691" author="ryanobjc" created="Tue, 4 Aug 2009 00:01:23 +0000"  >&lt;p&gt;here is a prelim potential fix, but no test updates and probably doesnt compile in the wider codebase (the snippet doesnt have errors).&lt;/p&gt;</comment>
                            <comment id="12742700" author="stack" created="Thu, 13 Aug 2009 03:51:09 +0000"  >&lt;p&gt;Move to 0.20.1&lt;/p&gt;</comment>
                            <comment id="12753884" author="ryanobjc" created="Thu, 10 Sep 2009 23:08:00 +0000"  >&lt;p&gt;here is a patch that works for us. Highly recommended, but also very intrusive.  It does do ICV &quot;the right way&quot;:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;log to HLog&lt;/li&gt;
	&lt;li&gt;then make in-ram changes&lt;/li&gt;
	&lt;li&gt;dont end up with duplicate timestamps in memstore and hfiles&lt;/li&gt;
	&lt;li&gt;dont create too many versions&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;enjoy&lt;/p&gt;</comment>
                            <comment id="12753900" author="ryanobjc" created="Thu, 10 Sep 2009 23:37:17 +0000"  >&lt;p&gt;i forgot the tests! oops!&lt;/p&gt;</comment>
                            <comment id="12754357" author="stack" created="Fri, 11 Sep 2009 21:27:39 +0000"  >&lt;p&gt;Reviewed and ran unit tests.  All pass but the broken ITHBase test.  Committed branch and trunk.&lt;/p&gt;</comment>
                            <comment id="12754367" author="stack" created="Fri, 11 Sep 2009 21:46:31 +0000"  >&lt;p&gt;Committed branch and trunk.  Ran tests.  Tests passed but for the ones in contrib currently failing up on hudson.&lt;/p&gt;</comment>
                            <comment id="15017990" author="lars_francke" created="Fri, 20 Nov 2015 13:02:08 +0000"  >&lt;p&gt;This issue was closed as part of a bulk closing operation on 2015-11-20. All issues that have been resolved and where all fixVersions have been released have been closed (following discussions on the mailing list).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12419240" name="HBASE-1740-test.patch" size="13013" author="ryanobjc" created="Thu, 10 Sep 2009 23:37:17 +0000"/>
                            <attachment id="12415427" name="HBASE-1740.patch" size="8394" author="ryanobjc" created="Tue, 4 Aug 2009 00:01:23 +0000"/>
                            <attachment id="12419234" name="HBASE-icv.patch" size="10046" author="ryanobjc" created="Thu, 10 Sep 2009 23:08:00 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 13 Aug 2009 03:51:09 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>25951</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 2 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hf07:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>99693</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>