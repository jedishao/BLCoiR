<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Thu Dec 01 21:08:15 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-14196/HBASE-14196.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-14196] Thrift server idle connection timeout issue</title>
                <link>https://issues.apache.org/jira/browse/HBASE-14196</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;When idle connection get cleaned from Thrift server, underlying table instances are still cached in a thread local cache.&lt;br/&gt;
This is the antipattern. Table objects are lightweight and should not be cached, besides this, underlying connections can be closed by periodic connection cleaner chore (ConnectionCache) and cached table instances may become invalid. This is Thrift1 specific issue. Thrift2 is OK.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12853026">HBASE-14196</key>
            <summary>Thrift server idle connection timeout issue</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="vrodionov">Vladimir Rodionov</assignee>
                                    <reporter username="vrodionov">Vladimir Rodionov</reporter>
                        <labels>
                    </labels>
                <created>Fri, 7 Aug 2015 18:29:00 +0000</created>
                <updated>Thu, 8 Oct 2015 21:47:56 +0000</updated>
                            <resolved>Thu, 13 Aug 2015 00:39:54 +0000</resolved>
                                    <version>0.98.13</version>
                    <version>1.1.1</version>
                    <version>1.0.1.1</version>
                    <version>1.1.0.1</version>
                                    <fixVersion>2.0.0</fixVersion>
                    <fixVersion>0.98.14</fixVersion>
                    <fixVersion>1.0.2</fixVersion>
                    <fixVersion>1.2.0</fixVersion>
                    <fixVersion>1.1.2</fixVersion>
                    <fixVersion>1.3.0</fixVersion>
                                    <component>Thrift</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="14662528" author="vrodionov" created="Fri, 7 Aug 2015 22:03:25 +0000"  >&lt;p&gt;Invalid again.&lt;/p&gt;</comment>
                            <comment id="14682175" author="vrodionov" created="Tue, 11 Aug 2015 18:00:45 +0000"  >&lt;p&gt;Reopening this after consultation with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ndimiduk&quot; class=&quot;user-hover&quot; rel=&quot;ndimiduk&quot;&gt;Nick Dimiduk&lt;/a&gt;]. The issue is Thrift1 specific and we still need to support Thrift1 code.&lt;/p&gt;</comment>
                            <comment id="14692335" author="vrodionov" created="Tue, 11 Aug 2015 22:03:28 +0000"  >&lt;p&gt;Master patch.&lt;/p&gt;</comment>
                            <comment id="14692336" author="vrodionov" created="Tue, 11 Aug 2015 22:04:39 +0000"  >&lt;p&gt;Master branch.&lt;/p&gt;</comment>
                            <comment id="14692789" author="hadoopqa" created="Wed, 12 Aug 2015 02:13:27 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12749960/HBASE-14196.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12749960/HBASE-14196.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit a78e6e94994aaba2bee7747054ea9a55f1edd421.&lt;br/&gt;
  ATTACHMENT ID: 12749960&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.7.0)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.util.TestProcessBasedCluster&lt;br/&gt;
                  org.apache.hadoop.hbase.mapreduce.TestImportExport&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core zombie tests&lt;/font&gt;.  There are 3 zombie test(s): 	at org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat2.testMRIncrementalLoadWithSplit(TestHFileOutputFormat2.java:385)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.wal.TestLogRolling.testLogRollOnDatanodeDeath(TestLogRolling.java:381)&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15059//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15059//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15059//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15059//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15059//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15059//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15059//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15059//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14694392" author="apurtell" created="Wed, 12 Aug 2015 23:14:10 +0000"  >&lt;p&gt;+1, changes look reasonable, going to commit shortly&lt;/p&gt;</comment>
                            <comment id="14694473" author="apurtell" created="Thu, 13 Aug 2015 00:39:54 +0000"  >&lt;p&gt;Pushed to 0.98 and up. All thrift units pass on all branches. &lt;/p&gt;</comment>
                            <comment id="14694576" author="hudson" created="Thu, 13 Aug 2015 02:31:17 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.0 #1013 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.0/1013/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.0/1013/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14196&quot; title=&quot;Thrift server idle connection timeout issue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14196&quot;&gt;&lt;del&gt;HBASE-14196&lt;/del&gt;&lt;/a&gt; Thrift server idle connection timeout issue (Vladimir Rodionov) (apurtell: rev a81d0a4a7b9792681b12b5f7a7fc59aff70ae884)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-thrift/src/main/java/org/apache/hadoop/hbase/thrift/ThriftServerRunner.java&lt;/li&gt;
	&lt;li&gt;hbase-thrift/src/main/java/org/apache/hadoop/hbase/thrift/IncrementCoalescer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14694620" author="hudson" created="Thu, 13 Aug 2015 03:13:57 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.1 #611 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.1/611/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.1/611/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14196&quot; title=&quot;Thrift server idle connection timeout issue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14196&quot;&gt;&lt;del&gt;HBASE-14196&lt;/del&gt;&lt;/a&gt; Thrift server idle connection timeout issue (Vladimir Rodionov) (apurtell: rev 5627e0020e59d3bf77d1a83b57037d9837c7b99f)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-thrift/src/main/java/org/apache/hadoop/hbase/thrift/ThriftServerRunner.java&lt;/li&gt;
	&lt;li&gt;hbase-thrift/src/main/java/org/apache/hadoop/hbase/thrift/IncrementCoalescer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14694639" author="hudson" created="Thu, 13 Aug 2015 03:31:28 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-TRUNK #6721 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/6721/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/6721/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14196&quot; title=&quot;Thrift server idle connection timeout issue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14196&quot;&gt;&lt;del&gt;HBASE-14196&lt;/del&gt;&lt;/a&gt; Thrift server idle connection timeout issue (Vladimir Rodionov) (apurtell: rev 643ba90185f20419016080d6d32adba9fe7019dd)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-thrift/src/main/java/org/apache/hadoop/hbase/thrift/IncrementCoalescer.java&lt;/li&gt;
	&lt;li&gt;hbase-thrift/src/main/java/org/apache/hadoop/hbase/thrift/ThriftServerRunner.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14694652" author="hudson" created="Thu, 13 Aug 2015 03:50:09 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.2 #105 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.2/105/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.2/105/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14196&quot; title=&quot;Thrift server idle connection timeout issue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14196&quot;&gt;&lt;del&gt;HBASE-14196&lt;/del&gt;&lt;/a&gt; Thrift server idle connection timeout issue (Vladimir Rodionov) (apurtell: rev 93d6fbe9271e85ce144b47cdaeb4bf63162dde37)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-thrift/src/main/java/org/apache/hadoop/hbase/thrift/ThriftServerRunner.java&lt;/li&gt;
	&lt;li&gt;hbase-thrift/src/main/java/org/apache/hadoop/hbase/thrift/IncrementCoalescer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14694763" author="hudson" created="Thu, 13 Aug 2015 06:06:23 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.3 #106 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.3/106/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.3/106/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14196&quot; title=&quot;Thrift server idle connection timeout issue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14196&quot;&gt;&lt;del&gt;HBASE-14196&lt;/del&gt;&lt;/a&gt; Thrift server idle connection timeout issue (Vladimir Rodionov) (apurtell: rev e8b5e922cb1741ccc4954ef2ba0f97b5d6d39079)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-thrift/src/main/java/org/apache/hadoop/hbase/thrift/ThriftServerRunner.java&lt;/li&gt;
	&lt;li&gt;hbase-thrift/src/main/java/org/apache/hadoop/hbase/thrift/IncrementCoalescer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14694806" author="hudson" created="Thu, 13 Aug 2015 06:52:26 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.2-IT #88 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.2-IT/88/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.2-IT/88/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14196&quot; title=&quot;Thrift server idle connection timeout issue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14196&quot;&gt;&lt;del&gt;HBASE-14196&lt;/del&gt;&lt;/a&gt; Thrift server idle connection timeout issue (Vladimir Rodionov) (apurtell: rev 93d6fbe9271e85ce144b47cdaeb4bf63162dde37)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-thrift/src/main/java/org/apache/hadoop/hbase/thrift/IncrementCoalescer.java&lt;/li&gt;
	&lt;li&gt;hbase-thrift/src/main/java/org/apache/hadoop/hbase/thrift/ThriftServerRunner.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14694815" author="hudson" created="Thu, 13 Aug 2015 06:58:42 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.3-IT #87 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.3-IT/87/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.3-IT/87/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14196&quot; title=&quot;Thrift server idle connection timeout issue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14196&quot;&gt;&lt;del&gt;HBASE-14196&lt;/del&gt;&lt;/a&gt; Thrift server idle connection timeout issue (Vladimir Rodionov) (apurtell: rev e8b5e922cb1741ccc4954ef2ba0f97b5d6d39079)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-thrift/src/main/java/org/apache/hadoop/hbase/thrift/ThriftServerRunner.java&lt;/li&gt;
	&lt;li&gt;hbase-thrift/src/main/java/org/apache/hadoop/hbase/thrift/IncrementCoalescer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14694819" author="hudson" created="Thu, 13 Aug 2015 07:06:30 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.98-on-Hadoop-1.1 #1032 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/1032/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/1032/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14196&quot; title=&quot;Thrift server idle connection timeout issue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14196&quot;&gt;&lt;del&gt;HBASE-14196&lt;/del&gt;&lt;/a&gt; Thrift server idle connection timeout issue (Vladimir Rodionov) (apurtell: rev a705a7484637c94c1d4c3555c3888cf3908611ce)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-thrift/src/main/java/org/apache/hadoop/hbase/thrift/ThriftServerRunner.java&lt;/li&gt;
	&lt;li&gt;hbase-thrift/src/main/java/org/apache/hadoop/hbase/thrift/IncrementCoalescer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14694822" author="hudson" created="Thu, 13 Aug 2015 07:06:35 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.98 #1079 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98/1079/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98/1079/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14196&quot; title=&quot;Thrift server idle connection timeout issue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14196&quot;&gt;&lt;del&gt;HBASE-14196&lt;/del&gt;&lt;/a&gt; Thrift server idle connection timeout issue (Vladimir Rodionov) (apurtell: rev a705a7484637c94c1d4c3555c3888cf3908611ce)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-thrift/src/main/java/org/apache/hadoop/hbase/thrift/ThriftServerRunner.java&lt;/li&gt;
	&lt;li&gt;hbase-thrift/src/main/java/org/apache/hadoop/hbase/thrift/IncrementCoalescer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14724274" author="enis" created="Mon, 31 Aug 2015 22:39:48 +0000"  >&lt;p&gt;Closing this issue after 1.0.2 release.&lt;/p&gt;</comment>
                            <comment id="14947855" author="stack" created="Thu, 8 Oct 2015 00:17:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vrodionov&quot; class=&quot;user-hover&quot; rel=&quot;vrodionov&quot;&gt;Vladimir Rodionov&lt;/a&gt; How did this issue manifest itself? &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=syuanjiang&quot; class=&quot;user-hover&quot; rel=&quot;syuanjiang&quot;&gt;Stephen Yuan Jiang&lt;/a&gt; just sent me here from &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14533&quot; title=&quot;Thrift client gets &amp;quot;AsyncProcess: Failed to get region location .... closed&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14533&quot;&gt;HBASE-14533&lt;/a&gt; just as I was trying to reproduce the issue locally (was seen on a server internally... but couldn&apos;t figure the why nor reproduce with simple test).  Does &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14533&quot; title=&quot;Thrift client gets &amp;quot;AsyncProcess: Failed to get region location .... closed&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14533&quot;&gt;HBASE-14533&lt;/a&gt; look like what you were seeing?  Thanks.&lt;/p&gt;</comment>
                            <comment id="14947862" author="vrodionov" created="Thu, 8 Oct 2015 00:25:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt; The original issue was related to a usage of ThreadLocalCache for Table instances in Thrift server. If connection is closed due to inactivity, all associated table instances become invalid. Your issue looks similar I would check ThriftServerRunner if it uses ThreadLocal to cache tables, if - yes, then try this patch. &lt;/p&gt;

&lt;p&gt;To reproduce the issue, you have to set Thrift connection idle timeout to a more comfortable value than 10min and run sum thrift client against, then wait for little bit longer than timeout and continue test - should fail.  &lt;/p&gt;</comment>
                            <comment id="14948768" author="stack" created="Thu, 8 Oct 2015 14:43:12 +0000"  >&lt;p&gt;Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vrodionov&quot; class=&quot;user-hover&quot; rel=&quot;vrodionov&quot;&gt;Vladimir Rodionov&lt;/a&gt; I tried various things .... many threads waiting then mutating in the hope of tripping the timedout connection with chore time set down &amp;#8211; a version of which I posted here  &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12764610/test.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12764610/test.patch&lt;/a&gt;  &amp;#8211; but was only able to repro the issue w/ much manual intervention... I&apos;ll keep at it.... thinking on it, I may have been testing against a version of hbase that had your fix here. Let me back up some versions.&lt;/p&gt;

&lt;p&gt;Regardless, this is a nice find. Good one.&lt;/p&gt;</comment>
                            <comment id="14949451" author="stack" created="Thu, 8 Oct 2015 21:47:56 +0000"  >&lt;p&gt;Yeah, &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14533&quot; title=&quot;Thrift client gets &amp;quot;AsyncProcess: Failed to get region location .... closed&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14533&quot;&gt;HBASE-14533&lt;/a&gt; is this issue. Let me add a test against regression over there and then close. Thanks for the fix &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vrodionov&quot; class=&quot;user-hover&quot; rel=&quot;vrodionov&quot;&gt;Vladimir Rodionov&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12853022">HBASE-14195</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12749960" name="HBASE-14196.patch" size="17502" author="vrodionov" created="Tue, 11 Aug 2015 22:03:28 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 12 Aug 2015 02:13:27 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 7 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ihb3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>