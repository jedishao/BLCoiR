<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 02 18:45:09 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-134/HBASE-134.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-134] [hbase] Concurrent creates of a table named &apos;X&apos; all succeed</title>
                <link>https://issues.apache.org/jira/browse/HBASE-134</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;If multiple threads all try to create a table of a particular, all succeed.  It makes for a mess. &lt;/p&gt;

&lt;p&gt;Create table needs to be synchronized so only one thread creates a table and subsequent threads fail with &apos;table already exits&apos;.  The test for pre-existence also needs fixing.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12373213">HBASE-134</key>
            <summary>[hbase] Concurrent creates of a table named &apos;X&apos; all succeed</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="stack">stack</reporter>
                        <labels>
                    </labels>
                <created>Sat, 7 Jul 2007 01:22:22 +0000</created>
                <updated>Mon, 4 Feb 2008 18:40:48 +0000</updated>
                            <resolved>Sat, 14 Jul 2007 20:10:36 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12510831" author="stack" created="Sat, 7 Jul 2007 01:23:29 +0000"  >&lt;p&gt;First cut at a fix.&lt;/p&gt;</comment>
                            <comment id="12511279" author="stack" created="Mon, 9 Jul 2007 22:28:59 +0000"  >&lt;p&gt;Version 2.  Adds throwing new TableExistsException if attempt at creating an existing table:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;hbase&amp;#93;&lt;/span&gt; Concurrent creates of a table named &apos;X&apos; all succeed&lt;br/&gt;
Make createTable synchronized.  Fix test for table &apos;already-exists&apos;.&lt;/p&gt;

&lt;p&gt;M src/contrib/hbase/src/test/org/apache/hadoop/hbase/TestTable.java&lt;br/&gt;
    Refactor.  Add assertions we&apos;re getting back right exceptions.&lt;br/&gt;
M src/contrib/hbase/src/java/org/apache/hadoop/hbase/HClient.java&lt;br/&gt;
    Javadoc edits.&lt;br/&gt;
    (createTable,createTableAsync): Add mention of new TableExistsException.&lt;br/&gt;
M src/contrib/hbase/src/java/org/apache/hadoop/hbase/HMaster.java&lt;br/&gt;
    (createTable): Fix test for existing table. Throw new TableExistsException.&lt;br/&gt;
    (deleteTable, shutdown, disableTable, enableTable): Make synchronized.&lt;br/&gt;
A src/contrib/hbase/src/java/org/apache/hadoop/hbase/TableExistsException.java&lt;br/&gt;
    Added.&lt;/p&gt;</comment>
                            <comment id="12511587" author="stack" created="Tue, 10 Jul 2007 22:20:17 +0000"  >&lt;p&gt;Break up createTable so can narrow the HMaster synchronization scope.&lt;/p&gt;</comment>
                            <comment id="12511591" author="stack" created="Tue, 10 Jul 2007 22:41:48 +0000"  >&lt;p&gt;Builds and passes all tests locally.  Trying against hudson.&lt;/p&gt;</comment>
                            <comment id="12511691" author="hadoopqa" created="Wed, 11 Jul 2007 08:36:55 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12361533/duptable-v3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12361533/duptable-v3.patch&lt;/a&gt; applied and successfully tested against trunk revision r555114.&lt;/p&gt;

&lt;p&gt;Test results:   &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/394/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/394/testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/394/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/394/console&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12511902" author="stack" created="Wed, 11 Jul 2007 22:55:26 +0000"  >&lt;p&gt;This version implements a Jim Kellerman suggestion that does away with synchronize on createTable method and instead keeps a &apos;lock&apos; per table currently being created.   Also added better testing of concurrent table creations.&lt;/p&gt;</comment>
                            <comment id="12511932" author="stack" created="Thu, 12 Jul 2007 02:12:25 +0000"  >&lt;p&gt;Version 5 because version 4 tests no longer work since RemoteException handling changed (&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-231&quot; title=&quot;Exception handling in HBase is broken over client server connections&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-231&quot;&gt;&lt;del&gt;HADOOP-1589&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;</comment>
                            <comment id="12511939" author="jimk" created="Thu, 12 Jul 2007 02:36:27 +0000"  >&lt;p&gt;Do you think it will need to be changed again if &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-231&quot; title=&quot;Exception handling in HBase is broken over client server connections&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-231&quot;&gt;&lt;del&gt;HADOOP-1589&lt;/del&gt;&lt;/a&gt; is committed?&lt;/p&gt;</comment>
                            <comment id="12511947" author="stack" created="Thu, 12 Jul 2007 02:48:08 +0000"  >&lt;p&gt;I don&apos;t think so.  This test was catching RemoteException and undoing it &lt;br/&gt;
to pull out TableExistsException. Below changed it to catch &lt;br/&gt;
TableExistsException, which should still hold after you do your new commit.&lt;/p&gt;

&lt;p&gt;Good on you Jim,&lt;br/&gt;
St.Ack&lt;/p&gt;

</comment>
                            <comment id="12511948" author="stack" created="Thu, 12 Jul 2007 02:49:20 +0000"  >&lt;p&gt;No.  This test was catching RemoteException and undoing it to pull out TableExistsException. The new patch changes the test to instead catch TableExistsException, which should still hold after you do your new commit (Thanks for asking)&lt;/p&gt;</comment>
                            <comment id="12512376" author="stack" created="Fri, 13 Jul 2007 06:36:35 +0000"  >&lt;p&gt;Version 7.  Added utility to HRegionInfo to return table name out of a region name.&lt;/p&gt;</comment>
                            <comment id="12512378" author="stack" created="Fri, 13 Jul 2007 06:37:27 +0000"  >&lt;p&gt;Builds local and passes all tests.  Trying against hudson.&lt;/p&gt;</comment>
                            <comment id="12512633" author="hadoopqa" created="Fri, 13 Jul 2007 21:53:15 +0000"  >&lt;p&gt;-1, build or testing failed&lt;/p&gt;

&lt;p&gt;2 attempts failed to build and test the latest attachment &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12361753/hadoop-1574-v7.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12361753/hadoop-1574-v7.patch&lt;/a&gt; against trunk revision r555813.&lt;/p&gt;

&lt;p&gt;Test results:   &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/406/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/406/testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/406/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/406/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Please note that this message is automatically generated and may represent a problem with the automation system and not the patch.&lt;/p&gt;</comment>
                            <comment id="12512682" author="hadoopqa" created="Sat, 14 Jul 2007 06:22:04 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12361753/hadoop-1574-v7.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12361753/hadoop-1574-v7.patch&lt;/a&gt; applied and successfully tested against trunk revision r555813.&lt;/p&gt;

&lt;p&gt;Test results:   &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/411/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/411/testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/411/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/411/console&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12512734" author="stack" created="Sat, 14 Jul 2007 20:10:36 +0000"  >&lt;p&gt;Committed with below message.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-134&quot; title=&quot;[hbase] Concurrent creates of a table named &amp;#39;X&amp;#39; all succeed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-134&quot;&gt;&lt;del&gt;HADOOP-1574&lt;/del&gt;&lt;/a&gt; Concurrent creates of a table named &apos;X&apos; all succeed&lt;br/&gt;
M src/contrib/hbase/src/test/org/apache/hadoop/hbase/TestTable.java&lt;br/&gt;
    (testTable): Add checking of actual exceptions thrown and&lt;br/&gt;
    assertions that we are getting right behavior.  Add a test&lt;br/&gt;
    that has ten clients concurrently trying to create same table.&lt;br/&gt;
M src/contrib/hbase/src/java/org/apache/hadoop/hbase/HClient.java&lt;br/&gt;
    javadoc edit. Fix debug message that could give impression&lt;br/&gt;
    table was found when it wasn&apos;t.&lt;br/&gt;
M src/contrib/hbase/src/java/org/apache/hadoop/hbase/HTableDescriptor.java&lt;br/&gt;
    Added comment on table nameing.&lt;br/&gt;
M src/contrib/hbase/src/java/org/apache/hadoop/hbase/HMaster.java&lt;br/&gt;
    (createTable): Refactored. Bulk moved to a private override.&lt;br/&gt;
    Changed how check for existance is done.&lt;br/&gt;
M rc/contrib/hbase/src/java/org/apache/hadoop/hbase/HRegionInfo.java&lt;br/&gt;
    (getTableNameFromRegionName): Utility method added.&lt;br/&gt;
A src/contrib/hbase/src/java/org/apache/hadoop/hbase/TableExistsException.java&lt;br/&gt;
    Added.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12361445" name="duptable-v2.patch" size="14766" author="stack" created="Mon, 9 Jul 2007 22:28:59 +0000"/>
                            <attachment id="12361533" name="duptable-v3.patch" size="17151" author="stack" created="Tue, 10 Jul 2007 22:20:17 +0000"/>
                            <attachment id="12361335" name="duptable.patch" size="8977" author="stack" created="Sat, 7 Jul 2007 01:23:29 +0000"/>
                            <attachment id="12361623" name="hadoop-1574-v4.patch" size="19702" author="stack" created="Wed, 11 Jul 2007 22:55:26 +0000"/>
                            <attachment id="12361634" name="hadoop-1574-v5.patch" size="19459" author="stack" created="Thu, 12 Jul 2007 02:12:25 +0000"/>
                            <attachment id="12361753" name="hadoop-1574-v7.patch" size="24158" author="stack" created="Fri, 13 Jul 2007 06:36:35 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 11 Jul 2007 08:36:55 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>24918</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 21 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0h4p3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>98023</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>