<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 02 18:42:23 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-1309/HBASE-1309.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-1309] HFile rejects key in Memcache with empty value</title>
                <link>https://issues.apache.org/jira/browse/HBASE-1309</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;2009-04-05 02:12:56,497 FATAL org.apache.hadoop.hbase.regionserver.MemcacheFlusher: Replay of hlog required. Forcing server shutdown&lt;br/&gt;
org.apache.hadoop.hbase.DroppedSnapshotException: region: content,,1238896745127&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.HRegion.internalFlushcache(HRegion.java:878)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.HRegion.flushcache(HRegion.java:771)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.MemcacheFlusher.flushRegion(MemcacheFlusher.java:229)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.MemcacheFlusher.run(MemcacheFlusher.java:139)&lt;br/&gt;
Caused by: java.io.IOException: Value cannot be null or empty&lt;br/&gt;
	at org.apache.hadoop.hbase.io.hfile.HFile$Writer.checkValue(HFile.java:485)&lt;br/&gt;
	at org.apache.hadoop.hbase.io.hfile.HFile$Writer.append(HFile.java:447)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.Store.internalFlushCache(Store.java:501)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.Store.flushCache(Store.java:463)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.HRegion.internalFlushcache(HRegion.java:863)&lt;br/&gt;
	... 3 more&lt;/p&gt;</description>
                <environment></environment>
        <key id="12422060">HBASE-1309</key>
            <summary>HFile rejects key in Memcache with empty value</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="apurtell">Andrew Purtell</reporter>
                        <labels>
                    </labels>
                <created>Sun, 5 Apr 2009 02:18:31 +0000</created>
                <updated>Sun, 13 Sep 2009 22:24:31 +0000</updated>
                            <resolved>Tue, 7 Apr 2009 18:23:08 +0000</resolved>
                                    <version>0.20.0</version>
                                    <fixVersion>0.20.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12695807" author="apurtell" created="Sun, 5 Apr 2009 03:30:05 +0000"  >&lt;p&gt;Changed issue title after some initial digging in the code. &lt;/p&gt;

&lt;p&gt;Null values is one thing. Should empty values just be ignored rather than cause exceptions? Actually empty values are valid also: Apps may only want to test for presence of a key.&lt;/p&gt;</comment>
                            <comment id="12695891" author="apurtell" created="Sun, 5 Apr 2009 19:25:56 +0000"  >&lt;p&gt;From Ryan on hbase-dev@:&lt;/p&gt;

&lt;p&gt;&amp;gt; I think it might be legit to store an empty value,&lt;br/&gt;
&amp;gt; empty key = not gonna happen.&lt;br/&gt;
&amp;gt;&lt;br/&gt;
&amp;gt; but if the key has enough data in it, eg: a delete tombstone, the value&lt;br/&gt;
&amp;gt; might be not interesting, so why store a placeholder?&lt;br/&gt;
&amp;gt;&lt;br/&gt;
&amp;gt; what particular circumstance is this happening under?  I dont want to &apos;fix&apos;&lt;br/&gt;
&amp;gt; hfile by allowing empty/null values only to mask a different error that you&lt;br/&gt;
&amp;gt; are getting...&lt;/p&gt;</comment>
                            <comment id="12695894" author="apurtell" created="Sun, 5 Apr 2009 19:29:11 +0000"  >&lt;p&gt;In my opinion HBase should not dictate to users what they can or cannot store into the system.&lt;/p&gt;

&lt;p&gt;I did not say anything about empty keys, which of course makes no sense. &lt;/p&gt;

&lt;p&gt;The particular circumstance in this place is a crawling application that stores content indexed by SHA-1 hash but also includes a family &apos;url:&apos; which stores, for each unique object according to hash, the list of URLs where it was encountered. The URLs are stored as column qualifiers to produce a list of unique values with no need for scanning for duplicate elimination etc. There is no need to store data also because all the data is already in the key. &lt;/p&gt;</comment>
                            <comment id="12695896" author="apurtell" created="Sun, 5 Apr 2009 19:31:40 +0000"  >&lt;p&gt;A more basic case is booleans as existence tests on keys. &lt;/p&gt;</comment>
                            <comment id="12696250" author="apurtell" created="Mon, 6 Apr 2009 21:10:18 +0000"  >&lt;p&gt;If there are no objections I&apos;m going to apply the patch attached to this issue.&lt;/p&gt;</comment>
                            <comment id="12696673" author="apurtell" created="Tue, 7 Apr 2009 18:22:49 +0000"  >&lt;p&gt;Committed to trunk. Passes all local tests. Tested under concurrent write/scan load.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12404677" name="HBASE-1309.patch" size="949" author="apurtell" created="Sun, 5 Apr 2009 19:35:19 +0000"/>
                            <attachment id="12404659" name="hbase-hadoop-regionserver-nashua.zip" size="3069" author="apurtell" created="Sun, 5 Apr 2009 02:19:21 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>25678</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 35 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hcif:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>99289</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>