<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 02 20:42:51 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-879/HBASE-879.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-879] When dfs restarts or moves blocks around, hbase regionservers don&apos;t notice</title>
                <link>https://issues.apache.org/jira/browse/HBASE-879</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Since the hbase regionservers use a DFSClient to keep handles open to the dfs, if the dfs blocks move around (typically because of a dfs restart, but can also happen if datanodes die or blocks get shuffled around), the regionserver will be unable to service the region.  It would be nice if the DFSClient that the regionservers use could notice this case and refresh the block list. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12403937">HBASE-879</key>
            <summary>When dfs restarts or moves blocks around, hbase regionservers don&apos;t notice</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="bien">Michael Bieniosek</reporter>
                        <labels>
                    </labels>
                <created>Mon, 8 Sep 2008 22:29:21 +0000</created>
                <updated>Thu, 6 Sep 2012 06:04:08 +0000</updated>
                            <resolved>Wed, 5 Sep 2012 20:25:26 +0000</resolved>
                                    <version>0.18.1</version>
                    <version>0.19.0</version>
                                                    <component>regionserver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="12629357" author="rafan" created="Tue, 9 Sep 2008 01:07:51 +0000"  >&lt;p&gt;Do you see errors from your HBase client or just in region server log?&lt;/p&gt;</comment>
                            <comment id="12629537" author="bien" created="Tue, 9 Sep 2008 17:21:18 +0000"  >&lt;p&gt;The regionserver throws an exception like &quot;Can&apos;t get block location&quot; or &quot;all datanodes are bad&quot;; this exception is then thrown back to the client.&lt;/p&gt;</comment>
                            <comment id="12643550" author="stack" created="Wed, 29 Oct 2008 17:49:09 +0000"  >&lt;p&gt;This was on 0.18.0 hadoop Michael?  I wonder if it &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-3831&quot; title=&quot;slow-reading dfs clients do not recover from datanode-write-timeouts&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-3831&quot;&gt;&lt;del&gt;HADOOP-3831&lt;/del&gt;&lt;/a&gt;?  It doesn&apos;t happen anymore now our cluster is rebalanced?&lt;/p&gt;</comment>
                            <comment id="12643659" author="bien" created="Wed, 29 Oct 2008 21:19:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-3831&quot; title=&quot;slow-reading dfs clients do not recover from datanode-write-timeouts&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-3831&quot;&gt;&lt;del&gt;HADOOP-3831&lt;/del&gt;&lt;/a&gt; is related, but not quite the same.  HBase should be able to survive the block shuffle caused by restarting the dfs entirely.  So I suppose the test for this one should be: restart the dfs, and get the regionservers to deal with blocks moving to different datanodes.&lt;/p&gt;</comment>
                            <comment id="12654288" author="apurtell" created="Mon, 8 Dec 2008 02:54:19 +0000"  >&lt;p&gt;Had another of what I first thought was an instance of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1046&quot; title=&quot;Region assigned to two regionservers after split&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1046&quot;&gt;&lt;del&gt;HBASE-1046&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Some regions were damaged during a write test last night: lease expired exceptions, NotYetReplicated exceptions, &quot;file does not exist&quot; errors on mapfile data files, EOF exceptions while processing reconstruction logs. Compactions/splits failed, leading to dead regions in both of my large tables and complete loss of ability to scan the tables in question.&lt;/p&gt;

&lt;p&gt;Enable/disable table did not resolve the problem of dead regions. However, after a full restart of all HBase daemons, all tables are fully back online. This last point is interesting. &lt;/p&gt;

&lt;p&gt;Based on this there should be something that can be done to bring the regions back from the dead without resorting&lt;br/&gt;
to a complete shutdown of all HBase daemons, correct? Can the regionservers just reinitialize their DFS client if they start taking filesystem exceptions?&lt;/p&gt;</comment>
                            <comment id="12654300" author="apurtell" created="Mon, 8 Dec 2008 04:27:01 +0000"  >&lt;p&gt;Updated affected versions. Not just an 0.2.0 issue. &lt;/p&gt;</comment>
                            <comment id="13449091" author="jesse_yates" created="Wed, 5 Sep 2012 20:25:26 +0000"  >&lt;p&gt;I think this is fixed in the current versions of HBase. Reoopen if I&apos;m mistaken.&lt;/p&gt;</comment>
                            <comment id="13449443" author="stack" created="Thu, 6 Sep 2012 06:04:08 +0000"  >&lt;p&gt;I&apos;m fine closing this.  The issue Michael talks of in original comment is not an issue any more; the DFSClient should pick up blocks in new location getting new block locations list from namenode.  Andrew&apos;s comment on hbase being able to survive a dfs restart under it is still to be fixed (we have other issues to cover this though)&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12405244">HBASE-904</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12406115">HBASE-917</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 9 Sep 2008 01:07:51 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>25456</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 13 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ha0f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>98884</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>