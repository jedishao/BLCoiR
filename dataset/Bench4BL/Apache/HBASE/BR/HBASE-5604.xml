<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sat Dec 03 19:31:03 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-5604/HBASE-5604.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-5604] M/R tool to replay WAL files</title>
                <link>https://issues.apache.org/jira/browse/HBASE-5604</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Just an idea I had. Might be useful for restore of a backup using the HLogs.&lt;br/&gt;
This could an M/R (with a mapper per HLog file).&lt;/p&gt;

&lt;p&gt;The tool would get a timerange and a (set of) table(s). We&apos;d pick the right HLogs based on time before the M/R job is started and then have a mapper per HLog file.&lt;br/&gt;
The mapper would then go through the HLog, filter all WALEdits that didn&apos;t fit into the time range or are not any of the tables and then uses HFileOutputFormat to generate HFiles.&lt;br/&gt;
Would need to indicate the splits we want, probably from a live table.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12547240">HBASE-5604</key>
            <summary>M/R tool to replay WAL files</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lhofhansl">Lars Hofhansl</assignee>
                                    <reporter username="lhofhansl">Lars Hofhansl</reporter>
                        <labels>
                    </labels>
                <created>Tue, 20 Mar 2012 17:14:12 +0000</created>
                <updated>Tue, 26 Feb 2013 08:12:39 +0000</updated>
                            <resolved>Thu, 12 Apr 2012 22:33:39 +0000</resolved>
                                                    <fixVersion>0.94.0</fixVersion>
                    <fixVersion>0.95.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                                                            <comments>
                            <comment id="13234006" author="stack" created="Wed, 21 Mar 2012 01:11:13 +0000"  >&lt;p&gt;I considered that instead of writing sequence files when we did log splitting, that instead we write hfiles and then load those instead of replaying the edits on region open as we currently do now.  I think I balked because we&apos;d no longer respect the order in which the edits arrived; i.e. we&apos;d not apply the edits in sequenceid order.&lt;/p&gt;</comment>
                            <comment id="13234019" author="lhofhansl" created="Wed, 21 Mar 2012 01:32:06 +0000"  >&lt;p&gt;Interesting.&lt;br/&gt;
Does the order matter in this case? Here we&apos;d replay the entire set of WALEdits for the duration specified and then store the collective outcome in HFiles.&lt;br/&gt;
All operations in the HLogs are idempotent, right?&lt;/p&gt;</comment>
                            <comment id="13234032" author="stack" created="Wed, 21 Mar 2012 02:06:31 +0000"  >&lt;p&gt;Oh, hfile has to be sorted too.  At log splitting time, would probably end up writing lots of small hfiles... one per WAL split say.  Could make for more i/o though might in long run though it could also get region back online faster.&lt;/p&gt;</comment>
                            <comment id="13234485" author="lhofhansl" created="Wed, 21 Mar 2012 16:49:54 +0000"  >&lt;p&gt;This is a part of HBase I not that familiar with.&lt;br/&gt;
Why is this in principle different from ImportTsv?&lt;br/&gt;
I guess it is because each mapper can encounter WALEdits for many tables in the HLog file(s) that it works on...?&lt;br/&gt;
In the end, though, it would a reducer writing the HFiles, so the distribution of HLogs to mappers should not matter. I think.&lt;/p&gt;

&lt;p&gt;Hmm... Maybe this is only useful when we have a &lt;b&gt;lot&lt;/b&gt; of logs to replay such as in a point in time recovery scenario using HLogs.&lt;br/&gt;
Or maybe there would be no advantage here turning this in an M/R job, but maybe it should just be a standalone client...?&lt;/p&gt;</comment>
                            <comment id="13235420" author="jmhsieh" created="Thu, 22 Mar 2012 07:31:22 +0000"  >
&lt;p&gt;What is the use case for filtering the HLogs?  Would you want to do a &quot;partial&quot; recovery?&lt;/p&gt;

&lt;p&gt;I&apos;ve encountered a situation where an entire large cluster went out and every RS&apos;s WAL needed to do log splitting.  The nn went down under hbase.  Since this was before distributed log splitting it took an overnight to restore.  Distributed log splitting would have really helped here (roughly divide by 100) but its not clear if there was enough data to make the bulk load overcome the extra writes required with a MR job.&lt;/p&gt;

&lt;p&gt;I&apos;d guess that distributed log splitting is probably faster &amp;#8211; with an MR job you&apos;d potentially need to materialize after map, do a shuffle (needed?), and materialize again after reduce before bulk loading (which may split the generated hfiles) (multiple writes per put/delete).  Distributed log splitting, assuming there is no WAL writes on replay may not incur disk cost except for regular memstore flushes (which means single write per put/delete).  &lt;/p&gt;</comment>
                            <comment id="13235640" author="lhofhansl" created="Thu, 22 Mar 2012 15:29:51 +0000"  >&lt;p&gt;This is definitely not to replace distributed log splitting as result of a crash but for dealing with accidentally deleted data.&lt;/p&gt;

&lt;p&gt;Relational databases usually support point in time recovery from a backup by taking periodic baseline backups and archiving the WAL. Upon recovery the base backup closest before the PIT is used and then the logs are replayed to the desired to PIT.&lt;/p&gt;

&lt;p&gt;Since HBase has not snapshotting, yet, any backup solution will necessary lead to an inconsistent copy that can only be made consistent by replaying some of the logs (to cover the duration the backup took).&lt;/p&gt;

&lt;p&gt;Log replay in HBase is either slow (standalone client using the highlevel API) or can only be used for crash recovery (log splitting, because the logs are split by region names, wouldn&apos;t be able to deal with split regions).&lt;/p&gt;

&lt;p&gt;This would take the part of log replaying for a thje log replay part in a PITR scenario.&lt;br/&gt;
Look at this as an M/R version of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3752&quot; title=&quot;Tool to replay moved-aside WAL logs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3752&quot;&gt;&lt;del&gt;HBASE-3752&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13237543" author="jmhsieh" created="Sat, 24 Mar 2012 14:30:45 +0000"  >&lt;p&gt;Hm, so this is similar to this &lt;a href=&quot;http://www.postgresql.org/docs/8.2/static/continuous-archiving.html?&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.postgresql.org/docs/8.2/static/continuous-archiving.html?&lt;/a&gt; For hbase, this would to enable a &quot;consistent&quot; warm backup (though no strong guarantees across regions) that would be cheaper than the full replication mechanism?&lt;/p&gt;</comment>
                            <comment id="13237661" author="lhofhansl" created="Sat, 24 Mar 2012 20:39:50 +0000"  >&lt;p&gt;Yep, that&apos;s what I have in mind. Can do PITR within HBase&apos;s time resolution.&lt;/p&gt;

&lt;p&gt;We have the requirement to keep historical data around for our customers.&lt;/p&gt;

&lt;p&gt;Replication is for disaster recovery (main cluster died, we will do that too).&lt;br/&gt;
Backpup with PITR would be for &quot;Sh*t, we messed up some data can you restore the data as of X?&quot; type scenarios.&lt;/p&gt;</comment>
                            <comment id="13237726" author="stack" created="Sat, 24 Mar 2012 23:37:57 +0000"  >&lt;p&gt;I like the postgres link.  Should point at that when we doc this tool.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;This could an M/R (with a mapper per HLog file).&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;You&apos;ll need a reduce (I think you deduce this yourself above but saying it for completeness).  If a map-only MR job, if many WALs, say 100s, you could end up w/ the same amount of hfiles per region (if each WAL had at least one edit for this region).  You&apos;d need a reducer to coalesce by region.&lt;/p&gt;

&lt;p&gt;This tool would not apply the edits in the order in which we received them.  We&apos;d be reliant on sort order only which should be fine I think since this is what happens if they were instead inserted via the memstore anyways.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Hmm... Maybe this is only useful when we have a lot of logs ....maybe there would be no advantage here turning this in an M/R job, but maybe it should just be a standalone client...?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Well, even if tens of files only, you&apos;d want to //ize it to do the filtering, etc., so MR sounds right.&lt;/p&gt;

&lt;p&gt;Or you could hack on the distributed split code to add a &apos;filtering&apos; facility... so it dropped edits that were outside of a range &amp;#8211; e.g. not one of the specified tables or not of a time range.  The output of distributed log splitting is only replayed on region open so you&apos;d need to figure how to get the region to load the edits (An MR job to write hfiles sounds way more straightforward relatively).&lt;/p&gt;</comment>
                            <comment id="13237744" author="lhofhansl" created="Sun, 25 Mar 2012 00:27:57 +0000"  >&lt;p&gt;I went the distributed log splitting route first a while back. Had it all working in fact.&lt;br/&gt;
Or so I thought. Then I tried playing logs to a new table and realized that distributed log splitting only works for crash recovery (before the regions could split further) because it splits using the region name in the log.&lt;br/&gt;
That makes sense, because otherwise each region server participating in log splitting would need to look up the current region for each encountered row otherwise (the region could have split and the row in question needs to go one of the daugthers). That is essentially what the highlevel API does anyway.&lt;/p&gt;

&lt;p&gt;Yes, definitely need a reducer.&lt;/p&gt;

&lt;p&gt;Similar to what I did for Import, I can see this working in two modes:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;The mappers directly apply changes to a running HBase cluster (TableOutputformat). No reducers needed in this case.&lt;/li&gt;
	&lt;li&gt;Create HFiles via HFileOutputFormat in the reduce phase.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;In fact this tool would probably be very much like Import, &quot;just&quot; with a different InputFormat.&lt;/p&gt;</comment>
                            <comment id="13237778" author="stack" created="Sun, 25 Mar 2012 04:55:01 +0000"  >&lt;p&gt;So, just need to write a smart mapper that takes filtering params and a WALInputFormat?&lt;/p&gt;</comment>
                            <comment id="13242067" author="lhofhansl" created="Fri, 30 Mar 2012 05:06:34 +0000"  >&lt;p&gt;I have something basic working now. Needs a bunch of polishing, but it works in principle.&lt;/p&gt;

&lt;p&gt;Right now I have this hooked up with Import. I.e. Import can optionally import from a directory that contains HLog files (at any depth).&lt;/p&gt;

&lt;p&gt;Does it make sense to keep this with Import? The advantage is that there is one place for Importing stuff, and things like CF mapping exist already. On the other hand Import is becoming a bit overloaded with options now and something PlayLogs might be better along ImportTsv and Import. Can still work out how to share some of the code.&lt;/p&gt;

&lt;p&gt;Also from the name of an HLog file I can tell when the first entry was written to it, but not what the last entry is. Is there a way to find this out? It would allow me to filter HLog files of it is known that they do not fall in the requested time range.&lt;/p&gt;</comment>
                            <comment id="13242076" author="stack" created="Fri, 30 Mar 2012 05:28:15 +0000"  >&lt;p&gt;I like the name WALPlayer.&lt;/p&gt;

&lt;p&gt;How is this related to Import at all?  (Import imports WAL files?)&lt;/p&gt;

&lt;p&gt;Does Import write HFiles?&lt;/p&gt;

&lt;p&gt;Does the hdfs mod time get updated when you close the files?  If so, that might work for when the file is in postion but won&apos;t work if file gets moved to .oldlogs or to archive?  Should we add a tail on a WAL with metadata of fixed size so you know where to start reading to pick it up?  I suppose you can&apos;t rely on the fact that all WALs are present?  If they were, you could use the start date of the next WAL (after sorting them by date) as the ending date of the current file.&lt;/p&gt;

&lt;p&gt;Should we rename WALs on close so they have the start and end time as their name?&lt;/p&gt;
</comment>
                            <comment id="13242584" author="lhofhansl" created="Fri, 30 Mar 2012 17:42:08 +0000"  >&lt;p&gt;Ok... I&apos;ll do a separate tool called WALPlayer. The Import rationale would be that indeed right now it can import HLog files. I added HFiles output to Import in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5440&quot; title=&quot;Allow Import to optionally use HFileOutputFormat&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5440&quot;&gt;&lt;del&gt;HBASE-5440&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
HDFS would probably not work, as these files would be copied around for archiving.&lt;br/&gt;
Changing the names of WALs is interesting. I&apos;d be worried about side-effects to other tools.&lt;/p&gt;

&lt;p&gt;Maybe it&apos;s not even an issue. A reader of the HLog can tell after looking at the first log entries whether it can ignore the rest of the file.&lt;/p&gt;</comment>
                            <comment id="13247876" author="lhofhansl" created="Fri, 6 Apr 2012 00:08:57 +0000"  >&lt;p&gt;This is what I have so far. Pretty simple.&lt;/p&gt;

&lt;p&gt;It&apos;s not finished, and I only sporadically get to work on this.&lt;/p&gt;

&lt;p&gt;Did some testing, both playing directly into a table and writing to HFiles worked fine.&lt;br/&gt;
I have not tested time based filtering, yet.&lt;/p&gt;

&lt;p&gt;Repeat: This is not ready, I just need to store this somewhere &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13248005" author="lhofhansl" created="Fri, 6 Apr 2012 03:39:25 +0000"  >&lt;blockquote&gt;&lt;p&gt;Should we rename WALs on close so they have the start and end time as their name?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Thinking more about this. It would be quite useful, possibly for other cases in the future, if one could tell by the file the exact time range of the edits.&lt;br/&gt;
Do you have a feeling for what (if anything) this would break?&lt;/p&gt;</comment>
                            <comment id="13249335" author="lhofhansl" created="Sat, 7 Apr 2012 21:19:49 +0000"  >&lt;p&gt;Related to this, when I say point in time (PIT) restore, I mean a PIT w.r.t. to the write time of the WAL edits (not the timestamps of the KeyValues).&lt;br/&gt;
Although I can see a usecase for the latter as well, especially when the timestamps are used for snapshot isolation.&lt;/p&gt;
</comment>
                            <comment id="13249389" author="lhofhansl" created="Sat, 7 Apr 2012 22:37:09 +0000"  >&lt;p&gt;New version. Should hold up to some amount of scrutiny now.&lt;br/&gt;
Added an initial test to verify basic HLogInputFormat/HLogReader functionality.&lt;/p&gt;</comment>
                            <comment id="13249396" author="stack" created="Sat, 7 Apr 2012 22:42:11 +0000"  >&lt;p&gt;Its kinda ugly doing the rename when I think on it.  Would be nice having the metadata but the rename could take a little time to do going against the namenode.  We could do it offline out of line w/ the edits but it could always fail.  Should never really happen but that it could means that we should be able to handle both name formats.&lt;/p&gt;</comment>
                            <comment id="13249403" author="lhofhansl" created="Sat, 7 Apr 2012 22:59:51 +0000"  >&lt;p&gt;Maybe we could do it only when the file is renamed anyway, such as when it is moved to .oldlogs. It&apos;s not really needed for this to work correctly.&lt;/p&gt;</comment>
                            <comment id="13249405" author="stack" created="Sat, 7 Apr 2012 23:05:09 +0000"  >&lt;p&gt;On the patch, can we play all edits from all passed in WALs or does it have to be by a specific table only?  I think it&apos;d be nice to be able to pass a list of tables but thats just a &apos;nice-to-have&apos;.  I think it more important we play edits for one table or all (Could do the &apos;all&apos; in another JIRA.  Could add time range to include in another issue too)&lt;/p&gt;

&lt;p&gt;We check if a meta table and if it is one, we just skip?  Whats up w/ that?  Maybe I want to use this tool to restore meta table?  If you don&apos;t want it used on meta, fail earlier if we are passed a meta table to use as table.&lt;/p&gt;


&lt;p&gt;Make this a LOG rather than a stdout +        e.printStackTrace();&lt;/p&gt;

&lt;p&gt;Make it a versionedwritable instead in the below?&lt;/p&gt;

&lt;p&gt;+  static class HLogSplit extends InputSplit implements Writable {&lt;/p&gt;

&lt;p&gt;Usual style is to have space around operators.  Try the fb lint on your patch?&lt;/p&gt;

&lt;p&gt;Patch looks good.  +1 on commit.  Add a release note.&lt;/p&gt;</comment>
                            <comment id="13249431" author="lhofhansl" created="Sun, 8 Apr 2012 00:26:27 +0000"  >&lt;p&gt;Thanks Stack.&lt;/p&gt;

&lt;p&gt;The meta check is actually for &quot;meta&quot; entries in the WAL (see HLog.completeCacheFlushLogEdit), not edits to the ROOT or META. I&apos;ll add a comment to that extend. ROOT and META could be passed as &amp;lt;tablename&amp;gt; and it would do the right thing.&lt;/p&gt;

&lt;p&gt;The printStackTrace I took from Import. Just means that the message will show up in the Jobs stderr rather then syslog. I think that is what we want? Can change, though.&lt;/p&gt;

&lt;p&gt;Playing all edits or edit from multiple tables does not allow me to use TableOutputFormat or HFileOutputFormat. I can use MultiTableOutputFormat for the live cluster case, and change the mappers to output the tablename as key.&lt;br/&gt;
For bulk output to HFiles that would tricky. +1 on doing that, though, for a full backup option.&lt;/p&gt;

&lt;p&gt;Maybe allow all or a set of tables for the live cluster case and only allow a single table for the Bulk output case. I&apos;ll do that.&lt;/p&gt;

&lt;p&gt;Re: coding style... I thought I followed the standard &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Will use FBs lint.&lt;/p&gt;</comment>
                            <comment id="13249475" author="lhofhansl" created="Sun, 8 Apr 2012 05:10:24 +0000"  >&lt;p&gt;I also think it is still important to be able to import log entries to a different table. So I&apos;ll allow providing two comma separated lists of table names. The 2nd one is optional, and if provided it will be used to derive the respective target tables.&lt;/p&gt;

&lt;p&gt;If the case of BulkExport only a single table name and no mapping will be allowed.&lt;br/&gt;
Or maybe I should get rid of that option now...?&lt;/p&gt;</comment>
                            <comment id="13249631" author="lhofhansl" created="Sun, 8 Apr 2012 22:57:58 +0000"  >&lt;p&gt;Supports multiple tables or all tables now (unless bulk output is used).&lt;br/&gt;
Added more tests.&lt;/p&gt;

&lt;p&gt;This is still just for parking, I plan to add some high level end-to-end tests.&lt;/p&gt;</comment>
                            <comment id="13249910" author="stack" created="Mon, 9 Apr 2012 16:13:42 +0000"  >&lt;p&gt;All sounds good Lars.&lt;/p&gt;</comment>
                            <comment id="13250292" author="lhofhansl" created="Mon, 9 Apr 2012 23:22:50 +0000"  >&lt;p&gt;This should be close to what I would like to commit.&lt;br/&gt;
Added a simple end-to-end test for WALPlayer.&lt;/p&gt;</comment>
                            <comment id="13250327" author="hadoopqa" created="Tue, 10 Apr 2012 00:08:01 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12522035/5604-v7.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12522035/5604-v7.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 3 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.io.hfile.TestForceCacheImportantBlocks&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1458//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1458//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1458//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1458//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1458//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1458//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13250336" author="lhofhansl" created="Tue, 10 Apr 2012 00:26:23 +0000"  >&lt;p&gt;TestForceCacheImportantBlocks passes locally. I&apos;m ready to commit.&lt;/p&gt;</comment>
                            <comment id="13250393" author="zhihyu@ebaysf.com" created="Tue, 10 Apr 2012 01:58:01 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; class WALPlayer &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; Configured &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; Tool {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Javadoc for the above new class is desirable.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void setup(Context context) {
+      table = Bytes.toBytes(context.getConfiguration().getStrings(TABLES_KEY)[0]);
+    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Why index of 0 is always used above ?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void setup(Context context) {
+      &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] tableMap = context.getConfiguration().getStrings(TABLE_MAP_KEY);
+      &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i = 0;
+      &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; table : context.getConfiguration().getStrings(TABLES_KEY)) {
+        tables.put(Bytes.toBytes(table), Bytes.toBytes(tableMap[i++]));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I think validation on the lengths of the two String[] should be performed. If they don&apos;t match, bail out early.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+            &lt;span class=&quot;code-comment&quot;&gt;// Aggregate as much as possible into a single Put/Delete
&lt;/span&gt;+            &lt;span class=&quot;code-comment&quot;&gt;// operation before writing to the context.&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Shall we utilize Put.heapSize() and remember the aggregate size of the Put so that we can write to context when certain threshold is reached ?&lt;/p&gt;</comment>
                            <comment id="13250439" author="lhofhansl" created="Tue, 10 Apr 2012 03:30:34 +0000"  >&lt;p&gt;Thanks Ted.&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;I&apos;ll add Javadoc.&lt;/li&gt;
	&lt;li&gt;index of 0 is used here, since when creating HFiles for bulk import only a single table is currently allowed (that is also documented in usage(), but perhaps not clearly enough...?). I&apos;ll add a comment to that extent.&lt;/li&gt;
	&lt;li&gt;That the two arrays are of the same size if guaranteed in WALPlayer.createSubmittableJob(), but perhaps it is better to double check here.&lt;/li&gt;
	&lt;li&gt;Checking heapSize() seems unnecessary. After all, this is single WALEdit.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13250446" author="lhofhansl" created="Tue, 10 Apr 2012 03:59:55 +0000"  >&lt;p&gt;Addressed Ted&apos;s comment (except for Put.heapSize()). Also actually included the WALPlayer end-to-end test this time.&lt;/p&gt;</comment>
                            <comment id="13250450" author="zhihyu@ebaysf.com" created="Tue, 10 Apr 2012 04:36:24 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (tablesToUse == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; || tableMap == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; || tablesToUse.length != tableMap.length) {
+        &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; can only happen when HLogMapper is used directly by a class other than WALPlayer
&lt;/span&gt;+        &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IOException(&lt;span class=&quot;code-quote&quot;&gt;&quot;No tables or incorrect table mapping specified.&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I think if we provide separate exceptions for the first two checks and the last check, it would be easier for user to understand.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.err.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;  -D&quot;&lt;/span&gt; + HLogInputFormat.START_TIME_KEY + &lt;span class=&quot;code-quote&quot;&gt;&quot;=ms (only apply edit after &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; time)&quot;&lt;/span&gt;);
+    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.err.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;  -D&quot;&lt;/span&gt; + HLogInputFormat.END_TIME_KEY + &lt;span class=&quot;code-quote&quot;&gt;&quot;=ms (only apply edit before &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; time)&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;User would have to resort to conversion tool in order to find out the ms readings for desired date / time. Can we make this more user-friendly ?&lt;br/&gt;
e.g. in TimeStampingFileContext.java we have:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.sdf = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SimpleDateFormat(&lt;span class=&quot;code-quote&quot;&gt;&quot;yyyy-MM-dd&apos;T&apos;HH:mm:ss&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;See also &lt;a href=&quot;http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html#parse%28java.lang.String,%20java.text.ParsePosition%29&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html#parse%28java.lang.String,%20java.text.ParsePosition%29&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] getLocations() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException, InterruptedException {
+      &lt;span class=&quot;code-comment&quot;&gt;// TODO: Find the data node with the most blocks &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; HLog?&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Would the above be addressed in a separate JIRA ?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (i&amp;gt;0) LOG.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;Skipped &quot;&lt;/span&gt; + i + &lt;span class=&quot;code-quote&quot;&gt;&quot; entries.&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Minor: add spaces around &apos;&amp;gt;&apos;&lt;/p&gt;
</comment>
                            <comment id="13250453" author="hadoopqa" created="Tue, 10 Apr 2012 04:48:41 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12522068/5604-v8.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12522068/5604-v8.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 3 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.client.TestFromClientSide&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1460//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1460//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1460//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1460//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1460//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1460//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13250959" author="lhofhansl" created="Tue, 10 Apr 2012 19:04:13 +0000"  >&lt;ul&gt;
	&lt;li&gt;Let&apos;s not overkill on the exceptions. This is an inner class of WALPlayer, WALPlayer will always pass the correct arguments. Maybe I&apos;ll make the mapper classed private and remove all exception handling.&lt;/li&gt;
	&lt;li&gt;Thought about using SimpleDateFormat, then punted. I guess you&apos;re right, should make it bit more user friendly.&lt;/li&gt;
	&lt;li&gt;The TODO was left over. Not sure that even makes sense.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13250974" author="stack" created="Tue, 10 Apr 2012 19:18:33 +0000"  >&lt;blockquote&gt;&lt;p&gt;Thought about using SimpleDateFormat, then punted. I guess you&apos;re right, should make it bit more user friendly.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Passing dates instead of ms will be a pain doing the parse.  Outputting a date instead of ms will be of little use when hbase only shows ms.&lt;/p&gt;
</comment>
                            <comment id="13251002" author="lhofhansl" created="Tue, 10 Apr 2012 19:42:56 +0000"  >&lt;p&gt;The parsing would be done with SimpleDateFormat. I was going a bit back and forth about this. Could accept both actually, try SimpleDateFormat first, if there&apos;s a parse error use ms.&lt;br/&gt;
Not sure which part would do that parsing. Can be done in WALPlayer, or down at HLogInputFormat.&lt;/p&gt;</comment>
                            <comment id="13251007" author="stack" created="Tue, 10 Apr 2012 19:47:10 +0000"  >&lt;blockquote&gt;&lt;p&gt;The parsing would be done with SimpleDateFormat.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;If user entered data exactly right (they probably will have looked at hbase, done math w/ ms&apos;s, then converted to date to pass your tool only to have it convert back to ms).&lt;/p&gt;</comment>
                            <comment id="13251053" author="lhofhansl" created="Tue, 10 Apr 2012 20:47:40 +0000"  >&lt;p&gt;@Stack: Yeah, probably. You&apos;d vote for leaving it the way it is?&lt;/p&gt;</comment>
                            <comment id="13251078" author="lhofhansl" created="Tue, 10 Apr 2012 21:30:39 +0000"  >&lt;p&gt;Added data parsing, if you hate it, I&apos;ll pull. Might be useful, as the date is human readable so the operator can double check.&lt;br/&gt;
Includes a simple data parsing test.&lt;/p&gt;</comment>
                            <comment id="13251117" author="hadoopqa" created="Tue, 10 Apr 2012 22:20:41 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12522168/5604-v9.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12522168/5604-v9.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 3 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1470//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1470//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1470//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1470//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1470//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1470//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13251328" author="lhofhansl" created="Wed, 11 Apr 2012 05:17:46 +0000"  >&lt;p&gt;Any objections to the latest patch?&lt;/p&gt;</comment>
                            <comment id="13251341" author="stack" created="Wed, 11 Apr 2012 05:33:43 +0000"  >&lt;p&gt;None +1 on commit.&lt;/p&gt;</comment>
                            <comment id="13252530" author="lhofhansl" created="Thu, 12 Apr 2012 16:13:33 +0000"  >&lt;p&gt;Since this is only new code I propose this for 0.94.0 as well.&lt;/p&gt;</comment>
                            <comment id="13252537" author="yuzhihong@gmail.com" created="Thu, 12 Apr 2012 16:22:04 +0000"  >&lt;p&gt;If you run the patch through &apos;arc lint&apos;, you would see (just excerpt):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
   Warning  (TXT3) Line Too &lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt;
    This line is 106 characters &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;, but the convention is 100 characters.

             274     &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.err.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;  -D&quot;&lt;/span&gt; + BULK_OUTPUT_CONF_KEY + &lt;span class=&quot;code-quote&quot;&gt;&quot;=/path/&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;/output&quot;&lt;/span&gt;);
             275     &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.err.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;  (Exactly one table must be specified &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; option, and not mapping can be specified!)&quot;&lt;/span&gt;);
             276     &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.err.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;Other options:&quot;&lt;/span&gt;);
    &amp;gt;&amp;gt;&amp;gt;      277     &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.err.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;  -D&quot;&lt;/span&gt; + HLogInputFormat.START_TIME_KEY + &lt;span class=&quot;code-quote&quot;&gt;&quot;=ms (only apply edit after &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; time)&quot;&lt;/span&gt;);
             278     &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.err.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;  -D&quot;&lt;/span&gt; + HLogInputFormat.END_TIME_KEY + &lt;span class=&quot;code-quote&quot;&gt;&quot;=ms (only apply edit before &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; time)&quot;&lt;/span&gt;);
             279     &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.err.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;For performance also consider the following options:\n&quot;&lt;/span&gt;
             280         + &lt;span class=&quot;code-quote&quot;&gt;&quot;  -Dmapred.map.tasks.speculative.execution=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;\n&quot;&lt;/span&gt;

   Warning  (TXT3) Line Too &lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt;
    This line is 105 characters &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;, but the convention is 100 characters.

             275     &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.err.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;  (Exactly one table must be specified &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; option, and not mapping can be specified!)&quot;&lt;/span&gt;);
             276     &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.err.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;Other options:&quot;&lt;/span&gt;);
             277     &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.err.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;  -D&quot;&lt;/span&gt; + HLogInputFormat.START_TIME_KEY + &lt;span class=&quot;code-quote&quot;&gt;&quot;=ms (only apply edit after &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; time)&quot;&lt;/span&gt;);
    &amp;gt;&amp;gt;&amp;gt;      278     &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.err.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;  -D&quot;&lt;/span&gt; + HLogInputFormat.END_TIME_KEY + &lt;span class=&quot;code-quote&quot;&gt;&quot;=ms (only apply edit before &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; time)&quot;&lt;/span&gt;);
             279     &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.err.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;For performance also consider the following options:\n&quot;&lt;/span&gt;
             280         + &lt;span class=&quot;code-quote&quot;&gt;&quot;  -Dmapred.map.tasks.speculative.execution=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;\n&quot;&lt;/span&gt;
             281         + &lt;span class=&quot;code-quote&quot;&gt;&quot;  -Dmapred.reduce.tasks.speculative.execution=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Below is a long line:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+        &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IOException(option + &lt;span class=&quot;code-quote&quot;&gt;&quot; must be specified either in the form 2001-02-20T16:35:06.99 or as a number of milliseconds&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Minor comment: the &apos;a&apos; in &apos;as a number&apos; should be omitted.&lt;/p&gt;</comment>
                            <comment id="13252631" author="lhofhansl" created="Thu, 12 Apr 2012 17:31:55 +0000"  >&lt;p&gt;all arc lint problems fixed.&lt;/p&gt;</comment>
                            <comment id="13252698" author="hadoopqa" created="Thu, 12 Apr 2012 18:29:55 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12522454/5604-v10.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12522454/5604-v10.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 3 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1497//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1497//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1497//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1497//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1497//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1497//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13252757" author="lhofhansl" created="Thu, 12 Apr 2012 19:24:21 +0000"  >&lt;p&gt;Patch that includes the documentation from &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5774&quot; title=&quot;Add documentation for WALPlayer to HBase reference guide.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5774&quot;&gt;&lt;del&gt;HBASE-5774&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13252812" author="hadoopqa" created="Thu, 12 Apr 2012 20:44:53 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12522473/5604-v11.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12522473/5604-v11.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 3 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.replication.TestReplication&lt;br/&gt;
                  org.apache.hadoop.hbase.client.TestFromClientSide&lt;br/&gt;
                  org.apache.hadoop.hbase.io.hfile.TestForceCacheImportantBlocks&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1498//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1498//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1498//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1498//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1498//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1498//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13252892" author="lhofhansl" created="Thu, 12 Apr 2012 21:57:25 +0000"  >&lt;p&gt;@Ted: Are you OK with latest patch? If so, I&apos;ll commit today.&lt;/p&gt;</comment>
                            <comment id="13252916" author="yuzhihong@gmail.com" created="Thu, 12 Apr 2012 22:12:01 +0000"  >&lt;p&gt;Patch looks good.&lt;br/&gt;
Minor comment:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+      HLog.Entry temp;
+      &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; i=-1;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Insert spaces around equal sign above.&lt;/p&gt;</comment>
                            <comment id="13252933" author="lhofhansl" created="Thu, 12 Apr 2012 22:33:39 +0000"  >&lt;p&gt;Committed to 0.94 and 0.96.&lt;br/&gt;
Thanks for the reviews Stack and Ted!&lt;/p&gt;</comment>
                            <comment id="13252934" author="lhofhansl" created="Thu, 12 Apr 2012 22:34:06 +0000"  >&lt;p&gt;And I did insert the spaces before commit &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13252977" author="hudson" created="Thu, 12 Apr 2012 23:43:37 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2749 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2749/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2749/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5604&quot; title=&quot;M/R tool to replay WAL files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5604&quot;&gt;&lt;del&gt;HBASE-5604&lt;/del&gt;&lt;/a&gt; M/R tool to replay WAL files (Revision 1325555)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/docbkx/ops_mgt.xml&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/mapreduce/HLogInputFormat.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/mapreduce/WALPlayer.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/mapreduce/TestHLogRecordReader.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/mapreduce/TestWALPlayer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13253002" author="hudson" created="Fri, 13 Apr 2012 00:11:55 +0000"  >&lt;p&gt;Integrated in HBase-0.94 #109 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/109/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/109/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5604&quot; title=&quot;M/R tool to replay WAL files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5604&quot;&gt;&lt;del&gt;HBASE-5604&lt;/del&gt;&lt;/a&gt; M/R tool to replay WAL files (Revision 1325562)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/docbkx/ops_mgt.xml&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/mapreduce/HLogInputFormat.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/mapreduce/WALPlayer.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/mapreduce/TestHLogRecordReader.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/mapreduce/TestWALPlayer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13253085" author="yuzhihong@gmail.com" created="Fri, 13 Apr 2012 03:53:57 +0000"  >&lt;p&gt;TestWALPlayer.java doesn&apos;t have test category.&lt;/p&gt;</comment>
                            <comment id="13253094" author="lhofhansl" created="Fri, 13 Apr 2012 04:09:20 +0000"  >&lt;p&gt;Yes, should do an addendum. Will mark as large.&lt;/p&gt;</comment>
                            <comment id="13253095" author="lhofhansl" created="Fri, 13 Apr 2012 04:13:30 +0000"  >&lt;p&gt;Done. Thanks Ted.&lt;/p&gt;</comment>
                            <comment id="13253112" author="hudson" created="Fri, 13 Apr 2012 04:59:46 +0000"  >&lt;p&gt;Integrated in HBase-0.94 #111 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/111/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/111/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5604&quot; title=&quot;M/R tool to replay WAL files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5604&quot;&gt;&lt;del&gt;HBASE-5604&lt;/del&gt;&lt;/a&gt; addendum, mark TestWALPlayer as LargeTest (Revision 1325608)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/mapreduce/TestWALPlayer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13253137" author="hudson" created="Fri, 13 Apr 2012 05:53:11 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2750 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2750/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2750/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5604&quot; title=&quot;M/R tool to replay WAL files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5604&quot;&gt;&lt;del&gt;HBASE-5604&lt;/del&gt;&lt;/a&gt; addendum, mark TestWALPlayer as LargeTest (Revision 1325609)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/mapreduce/TestWALPlayer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13253147" author="hudson" created="Fri, 13 Apr 2012 05:54:57 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-security #169 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-security/169/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-security/169/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5604&quot; title=&quot;M/R tool to replay WAL files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5604&quot;&gt;&lt;del&gt;HBASE-5604&lt;/del&gt;&lt;/a&gt; addendum, mark TestWALPlayer as LargeTest (Revision 1325609)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5604&quot; title=&quot;M/R tool to replay WAL files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5604&quot;&gt;&lt;del&gt;HBASE-5604&lt;/del&gt;&lt;/a&gt; M/R tool to replay WAL files (Revision 1325555)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/mapreduce/TestWALPlayer.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/docbkx/ops_mgt.xml&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/mapreduce/HLogInputFormat.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/mapreduce/WALPlayer.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/mapreduce/TestHLogRecordReader.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/mapreduce/TestWALPlayer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13253607" author="zhihyu@ebaysf.com" created="Fri, 13 Apr 2012 18:22:28 +0000"  >&lt;p&gt;Looking at test failure reported by Hadoop QA: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1514//testReport/org.apache.hadoop.hbase.mapreduce/TestWALPlayer/testTimeFormat/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1514//testReport/org.apache.hadoop.hbase.mapreduce/TestWALPlayer/testTimeFormat/&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.lang.AssertionError: expected:&amp;lt;1334092861001&amp;gt; but was:&amp;lt;1334067661001&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I wonder if timezone could be an issue here - the difference is 7 hours.&lt;/p&gt;

&lt;p&gt;If you don&apos;t want to involve call such as setTimeZone(TimeZone.getTimeZone(&#8220;America/Los_Angeles&#8221;)), please comment out:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    assertEquals(1334092861001L, conf.getLong(HLogInputFormat.END_TIME_KEY, 0));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13253620" author="hudson" created="Fri, 13 Apr 2012 18:32:51 +0000"  >&lt;p&gt;Integrated in HBase-0.94-security #9 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security/9/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security/9/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5604&quot; title=&quot;M/R tool to replay WAL files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5604&quot;&gt;&lt;del&gt;HBASE-5604&lt;/del&gt;&lt;/a&gt; addendum, mark TestWALPlayer as LargeTest (Revision 1325608)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5604&quot; title=&quot;M/R tool to replay WAL files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5604&quot;&gt;&lt;del&gt;HBASE-5604&lt;/del&gt;&lt;/a&gt; M/R tool to replay WAL files (Revision 1325562)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/mapreduce/TestWALPlayer.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/docbkx/ops_mgt.xml&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/mapreduce/HLogInputFormat.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/mapreduce/WALPlayer.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/mapreduce/TestHLogRecordReader.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/mapreduce/TestWALPlayer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13253765" author="lhofhansl" created="Fri, 13 Apr 2012 21:37:42 +0000"  >&lt;p&gt;Sigh... That&apos;s exactly what I was afraid about when adding data parsing.&lt;br/&gt;
What timezone is used to store the WAL edit? Is it GMT? If so, the date should be interpreted as GMT.&lt;br/&gt;
If the data in the WAL is always the local TZ, I should remove the date verification test (which in a sense is pointless anyway, because it just tests whether SimpleDateFormat works).&lt;/p&gt;</comment>
                            <comment id="13253778" author="stack" created="Fri, 13 Apr 2012 21:49:03 +0000"  >&lt;p&gt;Remove the Date stuff.  Just do basic ms.&lt;/p&gt;</comment>
                            <comment id="13253797" author="zhihyu@ebaysf.com" created="Fri, 13 Apr 2012 22:11:21 +0000"  >&lt;p&gt;See the following code from &lt;a href=&quot;http://stackoverflow.com/questions/2375222/java-simpledateformat-for-time-zone-with-a-colon-seperator:&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://stackoverflow.com/questions/2375222/java-simpledateformat-for-time-zone-with-a-colon-seperator:&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; dateString = &lt;span class=&quot;code-quote&quot;&gt;&quot;2010-03-01T00:00:00-08:00&quot;&lt;/span&gt;;
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; pattern = &lt;span class=&quot;code-quote&quot;&gt;&quot;yyyy-MM-dd&apos;T&apos;HH:mm:ss&quot;&lt;/span&gt;;
SimpleDateFormat sdf = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SimpleDateFormat(pattern);
Date date = sdf.parse(dateString);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13253824" author="lhofhansl" created="Fri, 13 Apr 2012 22:38:22 +0000"  >&lt;p&gt;@Stack and Ted: I&apos;ll just remove that test. The HFile pretty printer will show time in the same TZ as WALPlayer would parse it, which is still useful.&lt;br/&gt;
I&apos;ll not file an extra jira but post an addendum to this one.&lt;/p&gt;</comment>
                            <comment id="13253839" author="lhofhansl" created="Fri, 13 Apr 2012 22:49:33 +0000"  >&lt;p&gt;OK. Done. I&apos;ll use that build as RC1.&lt;/p&gt;</comment>
                            <comment id="13253859" author="hudson" created="Fri, 13 Apr 2012 23:25:32 +0000"  >&lt;p&gt;Integrated in HBase-0.94-security #10 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security/10/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security/10/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5604&quot; title=&quot;M/R tool to replay WAL files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5604&quot;&gt;&lt;del&gt;HBASE-5604&lt;/del&gt;&lt;/a&gt; Addendum. Remove test as per discussion on jira. (Revision 1326001)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/mapreduce/TestWALPlayer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13253860" author="hudson" created="Fri, 13 Apr 2012 23:25:48 +0000"  >&lt;p&gt;Integrated in HBase-0.94 #114 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/114/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/114/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5604&quot; title=&quot;M/R tool to replay WAL files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5604&quot;&gt;&lt;del&gt;HBASE-5604&lt;/del&gt;&lt;/a&gt; Addendum. Remove test as per discussion on jira. (Revision 1326001)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/mapreduce/TestWALPlayer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13253881" author="hudson" created="Fri, 13 Apr 2012 23:51:59 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2757 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2757/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2757/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5604&quot; title=&quot;M/R tool to replay WAL files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5604&quot;&gt;&lt;del&gt;HBASE-5604&lt;/del&gt;&lt;/a&gt; Addendum. Remove test as per discussion on jira. (Revision 1326002)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/mapreduce/TestWALPlayer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13254002" author="hudson" created="Sat, 14 Apr 2012 05:58:26 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-security #171 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-security/171/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-security/171/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5604&quot; title=&quot;M/R tool to replay WAL files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5604&quot;&gt;&lt;del&gt;HBASE-5604&lt;/del&gt;&lt;/a&gt; Addendum. Remove test as per discussion on jira. (Revision 1326002)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/mapreduce/TestWALPlayer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12550704">HBASE-5774</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12503653">HBASE-3752</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12522454" name="5604-v10.txt" size="36705" author="lhofhansl" created="Thu, 12 Apr 2012 17:31:55 +0000"/>
                            <attachment id="12522473" name="5604-v11.txt" size="38359" author="lhofhansl" created="Thu, 12 Apr 2012 19:24:21 +0000"/>
                            <attachment id="12521861" name="5604-v4.txt" size="24970" author="lhofhansl" created="Sat, 7 Apr 2012 22:37:09 +0000"/>
                            <attachment id="12521898" name="5604-v6.txt" size="29415" author="lhofhansl" created="Sun, 8 Apr 2012 22:57:58 +0000"/>
                            <attachment id="12522035" name="5604-v7.txt" size="29432" author="lhofhansl" created="Mon, 9 Apr 2012 23:22:50 +0000"/>
                            <attachment id="12522068" name="5604-v8.txt" size="34861" author="lhofhansl" created="Tue, 10 Apr 2012 03:59:54 +0000"/>
                            <attachment id="12522168" name="5604-v9.txt" size="36736" author="lhofhansl" created="Tue, 10 Apr 2012 21:30:39 +0000"/>
                            <attachment id="12521615" name="HLog-5604-v3.txt" size="16202" author="lhofhansl" created="Fri, 6 Apr 2012 00:45:01 +0000"/>
                    </attachments>
                <subtasks>
                            <subtask id="12550704">HBASE-5774</subtask>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>8.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 21 Mar 2012 01:11:13 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>232398</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 34 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08r3j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48990</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tool to replay WAL files using a M/R job.&lt;br/&gt;
&lt;br/&gt;
The WAL can be replayed for a set of tables or all tables, and a timerange can be provided (in milliseconds).&lt;br/&gt;
The WAL is filtered to this set of tables, the output can optionally be mapped to another set of tables.&lt;br/&gt;
&lt;br/&gt;
WAL replay can also generate HFiles for later bulk importing, in that case the WAL is replayed for a single table only.&lt;br/&gt;
</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>