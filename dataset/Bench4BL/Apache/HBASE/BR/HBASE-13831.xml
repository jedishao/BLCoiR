<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Thu Dec 01 21:29:41 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-13831/HBASE-13831.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-13831] TestHBaseFsck#testParallelHbck is flaky against hadoop 2.6+</title>
                <link>https://issues.apache.org/jira/browse/HBASE-13831</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Running TestHBaseFsck#testParallelHbck is flaky against &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-2&quot; title=&quot;Reused Keys and Values fail with a Combiner&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-2&quot;&gt;&lt;del&gt;HADOOP-2&lt;/del&gt;&lt;/a&gt;.6+ environment.  The idea of the test is that with when 2 HBCK operations are running simultaneously, the 2nd HBCK would fail with no-retry because creating lock file would fail due to the 1st HBCK already created.  However, with &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-2&quot; title=&quot;Reused Keys and Values fail with a Combiner&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-2&quot;&gt;&lt;del&gt;HADOOP-2&lt;/del&gt;&lt;/a&gt;.6+, the FileSystem#createFile call internally retries with AlreadyBeingCreatedException (see &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13574&quot; title=&quot;Broken TestHBaseFsck in master with hadoop 2.6.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13574&quot;&gt;&lt;del&gt;HBASE-13574&lt;/del&gt;&lt;/a&gt; for more details: &quot;It seems that test is broken due of the new create retry policy in hadoop 2.6. Namenode proxy now created with custom RetryPolicy for AlreadyBeingCreatedException which is implies timeout on this operations up to HdfsConstants.LEASE_SOFTLIMIT_PERIOD (60seconds).&quot;)&lt;/p&gt;

&lt;p&gt;When I run the TestHBaseFsck#testParallelHbck test against &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-2&quot; title=&quot;Reused Keys and Values fail with a Combiner&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-2&quot;&gt;&lt;del&gt;HADOOP-2&lt;/del&gt;&lt;/a&gt;.7 in a Windows environment (HBASE is branch-1.1) multiple times, the result is unpredictable (sometime succeeded, sometime failed - more failure than succeeded).  &lt;/p&gt;

&lt;p&gt;The fix is trivial: Leverage the change in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13732&quot; title=&quot;TestHBaseFsck#testParallelWithRetriesHbck fails intermittently&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13732&quot;&gt;&lt;del&gt;HBASE-13732&lt;/del&gt;&lt;/a&gt; and reduce the max wait time to a smaller number.   &lt;/p&gt;</description>
                <environment></environment>
        <key id="12835148">HBASE-13831</key>
            <summary>TestHBaseFsck#testParallelHbck is flaky against hadoop 2.6+</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="syuanjiang">Stephen Yuan Jiang</assignee>
                                    <reporter username="syuanjiang">Stephen Yuan Jiang</reporter>
                        <labels>
                    </labels>
                <created>Wed, 3 Jun 2015 18:59:06 +0000</created>
                <updated>Thu, 4 Jun 2015 01:42:47 +0000</updated>
                            <resolved>Wed, 3 Jun 2015 22:47:19 +0000</resolved>
                                    <version>2.0.0</version>
                    <version>1.1.0</version>
                    <version>1.2.0</version>
                                    <fixVersion>2.0.0</fixVersion>
                    <fixVersion>1.2.0</fixVersion>
                    <fixVersion>1.1.1</fixVersion>
                                    <component>hbck</component>
                    <component>test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="14571501" author="syuanjiang" created="Wed, 3 Jun 2015 19:01:59 +0000"  >&lt;p&gt;Testing the patch in both Linux and Windows - running multiple times and no failure.&lt;/p&gt;</comment>
                            <comment id="14571687" author="hadoopqa" created="Wed, 3 Jun 2015 21:30:13 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12737346/HBASE-13831.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12737346/HBASE-13831.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit fad545652fc330d11061a1608e7812dade7f0845.&lt;br/&gt;
  ATTACHMENT ID: 12737346&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.1 2.5.2 2.6.0)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;/p&gt;


&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14270//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14270//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14270//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14270//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14270//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14270//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14270//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14270//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14571764" author="syuanjiang" created="Wed, 3 Jun 2015 22:29:56 +0000"  >&lt;p&gt;The failed TestReplicationKillSlaveRS.xml test has nothing to do with this patch.&lt;/p&gt;</comment>
                            <comment id="14571777" author="yuzhihong@gmail.com" created="Wed, 3 Jun 2015 22:47:19 +0000"  >&lt;p&gt;TestHBaseFsck passed in QA run.&lt;/p&gt;

&lt;p&gt;Thanks for the patch, Stephen.&lt;/p&gt;</comment>
                            <comment id="14571912" author="hudson" created="Thu, 4 Jun 2015 00:43:12 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.2 #132 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.2/132/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.2/132/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13831&quot; title=&quot;TestHBaseFsck#testParallelHbck is flaky against hadoop 2.6+&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13831&quot;&gt;&lt;del&gt;HBASE-13831&lt;/del&gt;&lt;/a&gt; TestHBaseFsck#testParallelHbck is flaky against hadoop 2.6+ (Stephen Jiang) (tedyu: rev 86d30e0bfe62098415a41af2ae7f534488919f24)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/util/TestHBaseFsck.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14571939" author="hudson" created="Thu, 4 Jun 2015 01:11:20 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-TRUNK #6544 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/6544/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/6544/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13831&quot; title=&quot;TestHBaseFsck#testParallelHbck is flaky against hadoop 2.6+&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13831&quot;&gt;&lt;del&gt;HBASE-13831&lt;/del&gt;&lt;/a&gt; TestHBaseFsck#testParallelHbck is flaky against hadoop 2.6+ (Stephen Jiang) (tedyu: rev e8e5a9f6398f5a99f1d89be359212a7a4f1d7b05)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/util/TestHBaseFsck.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14571960" author="hudson" created="Thu, 4 Jun 2015 01:42:47 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.1 #522 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.1/522/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.1/522/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13831&quot; title=&quot;TestHBaseFsck#testParallelHbck is flaky against hadoop 2.6+&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13831&quot;&gt;&lt;del&gt;HBASE-13831&lt;/del&gt;&lt;/a&gt; TestHBaseFsck#testParallelHbck is flaky against hadoop 2.6+ (Stephen Jiang) (tedyu: rev 5998217357448f60d80e7d15b28bdffb4e59514d)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/util/TestHBaseFsck.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12737346" name="HBASE-13831.patch" size="841" author="syuanjiang" created="Wed, 3 Jun 2015 19:00:20 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 3 Jun 2015 21:30:13 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 26 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2fldj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>