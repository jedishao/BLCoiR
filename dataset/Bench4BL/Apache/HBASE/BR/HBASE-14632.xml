<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Thu Dec 01 22:21:45 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-14632/HBASE-14632.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-14632] Region server aborts due to unguarded dereference of Reader</title>
                <link>https://issues.apache.org/jira/browse/HBASE-14632</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;I noticed the following in one run of org.apache.hadoop.hbase.regionserver.TestSplitTransactionOnCluster-output.txt :&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2015-10-16 09:46:33,108 INFO  [main] client.HBaseAdmin$10(1233): Started disable of testStoreFileReferenceCreationWhenSplitPolicySaysToSkipRangeCheck
2015-10-16 09:46:33,108 INFO  [B.defaultRpcServer.handler=4,queue=0,port=38813] master.HMaster(1908): Client=hbase/&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; disable                                                   testStoreFileReferenceCreationWhenSplitPolicySaysToSkipRangeCheck
2015-10-16 09:46:33,223 DEBUG [B.defaultRpcServer.handler=4,queue=0,port=38813] procedure2.ProcedureExecutor(654): Procedure DisableTableProcedure                                (table=testStoreFileReferenceCreationWhenSplitPolicySaysToSkipRangeCheck) id=24 owner=hbase state=RUNNABLE:DISABLE_TABLE_PREPARE added to the store.
2015-10-16 09:46:33,225 DEBUG [B.defaultRpcServer.handler=1,queue=0,port=38813] master.MasterRpcServices(1057): Checking to see &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; procedure is done procId=24
2015-10-16 09:46:33,230 DEBUG [ProcedureExecutor-22] lock.ZKInterProcessLockBase(226): Acquired a lock &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; /hbase/table-lock/                                                     testStoreFileReferenceCreationWhenSplitPolicySaysToSkipRangeCheck/write-master:388130000000001
2015-10-16 09:46:33,320 WARN  [RS:0;cn012:53683] regionserver.HStore(1910): StoreFile hdfs:&lt;span class=&quot;code-comment&quot;&gt;//localhost:40022/user/hbase/test-data/f09d7163-94f7-4218-b1b0-43dfc733a37b/data/      &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/testStoreFileReferenceCreationWhenSplitPolicySaysToSkipRangeCheck/dc90661cebac678ac508ed98093fc3e9/f/fffae6d1a0234c1791d8098cbcdb2c5e has a &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; Reader
&lt;/span&gt;2015-10-16 09:46:33,320 WARN  [RS:0;cn012:53683] regionserver.HStore(1924): StoreFile hdfs:&lt;span class=&quot;code-comment&quot;&gt;//localhost:40022/user/hbase/test-data/f09d7163-94f7-4218-b1b0-43dfc733a37b/data/      &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/testStoreFileReferenceCreationWhenSplitPolicySaysToSkipRangeCheck/dc90661cebac678ac508ed98093fc3e9/f/fffae6d1a0234c1791d8098cbcdb2c5e has a &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; Reader
&lt;/span&gt;2015-10-16 09:46:33,321 WARN  [RS:0;cn012:53683] regionserver.HStore(1924): StoreFile hdfs:&lt;span class=&quot;code-comment&quot;&gt;//localhost:40022/user/hbase/test-data/f09d7163-94f7-4218-b1b0-43dfc733a37b/data/      &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/testStoreFileReferenceCreationWhenSplitPolicySaysToSkipRangeCheck/dc90661cebac678ac508ed98093fc3e9/f/fffae6d1a0234c1791d8098cbcdb2c5e has a &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; Reader
&lt;/span&gt;2015-10-16 09:46:33,321 FATAL [RS:0;cn012:53683] regionserver.HRegionServer(2078): ABORTING region server cn012.l42scl.hortonworks.com,53683,1445013948320: Unhandled: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
java.lang.NullPointerException
  at org.apache.hadoop.hbase.regionserver.HStore.getTotalStaticIndexSize(HStore.java:1936)
  at org.apache.hadoop.hbase.regionserver.HRegionServer.createRegionLoad(HRegionServer.java:1470)
  at org.apache.hadoop.hbase.regionserver.HRegionServer.buildServerLoad(HRegionServer.java:1206)
  at org.apache.hadoop.hbase.regionserver.HRegionServer.tryRegionServerReport(HRegionServer.java:1149)
  at org.apache.hadoop.hbase.regionserver.HRegionServer.run(HRegionServer.java:965)
  at org.apache.hadoop.hbase.MiniHBaseCluster$MiniHBaseClusterRegionServer.runRegionServer(MiniHBaseCluster.java:156)
  at org.apache.hadoop.hbase.MiniHBaseCluster$MiniHBaseClusterRegionServer.access$000(MiniHBaseCluster.java:108)
  at org.apache.hadoop.hbase.MiniHBaseCluster$MiniHBaseClusterRegionServer$1.run(MiniHBaseCluster.java:140)
  at java.security.AccessController.doPrivileged(Native Method)
  at javax.security.auth.Subject.doAs(Subject.java:356)
  at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1637)
  at org.apache.hadoop.hbase.security.User$SecureHadoopUser.runAs(User.java:302)
  at org.apache.hadoop.hbase.MiniHBaseCluster$MiniHBaseClusterRegionServer.run(MiniHBaseCluster.java:138)
  at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Here is related code:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; getTotalStaticIndexSize() {
    &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; size = 0;
    &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (StoreFile s : &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.storeEngine.getStoreFileManager().getStorefiles()) {
      size += s.getReader().getUncompressedDataIndexSize();
    }
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; size;
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Some methods, such as getStorefilesIndexSize(), guard against null Reader by checking r against null.&lt;/p&gt;

&lt;p&gt;Same practice should be followed in other getters.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12905666">HBASE-14632</key>
            <summary>Region server aborts due to unguarded dereference of Reader</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="yuzhihong@gmail.com">Ted Yu</assignee>
                                    <reporter username="yuzhihong@gmail.com">Ted Yu</reporter>
                        <labels>
                    </labels>
                <created>Fri, 16 Oct 2015 22:32:35 +0000</created>
                <updated>Wed, 27 Jan 2016 15:28:59 +0000</updated>
                            <resolved>Fri, 6 Nov 2015 20:08:14 +0000</resolved>
                                                    <fixVersion>2.0.0</fixVersion>
                    <fixVersion>1.2.0</fixVersion>
                    <fixVersion>1.3.0</fixVersion>
                    <fixVersion>1.1.3</fixVersion>
                                    <component>regionserver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>10</watches>
                                                                <comments>
                            <comment id="14961477" author="syuanjiang" created="Fri, 16 Oct 2015 22:45:07 +0000"  >&lt;p&gt;+1 LGTM&lt;/p&gt;</comment>
                            <comment id="14961522" author="eclark" created="Fri, 16 Oct 2015 23:20:55 +0000"  >&lt;p&gt;Should those be WARN&apos;s ? Why would the reader be null? What went wrong such that the reader is null?&lt;/p&gt;</comment>
                            <comment id="14961533" author="yuzhihong@gmail.com" created="Fri, 16 Oct 2015 23:34:28 +0000"  >&lt;p&gt;The exception happened due to concurrent table disablement and tryRegionServerReport() call.&lt;/p&gt;

&lt;p&gt;Since there is not much user can do when seeing the log message, that was why I chose DEBUG log level.&lt;/p&gt;</comment>
                            <comment id="14961548" author="stack" created="Fri, 16 Oct 2015 23:49:29 +0000"  >&lt;blockquote&gt;&lt;p&gt;The exception happened due to concurrent table disablement and tryRegionServerReport() call.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Do you know how?&lt;/p&gt;

&lt;p&gt;If reader can be null legitimately, then I&apos;d say don&apos;t even log at DEBUG.  Otherwise, if its an error, what Elliott said... WARN or ERROR if a real prob.&lt;/p&gt;</comment>
                            <comment id="14961564" author="yuzhihong@gmail.com" created="Sat, 17 Oct 2015 00:12:36 +0000"  >&lt;p&gt;When table is disabled, regions close.&lt;br/&gt;
HStore#close() calls the following method in StoreFile:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;synchronized&lt;/span&gt; void closeReader(&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; evictOnClose)
      &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.reader != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
      &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.reader.close(evictOnClose);
      &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.reader = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
    }
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Meanwhile, in another thread HStore#getTotalStaticIndexSize() executes the following method in StoreFileManager:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  Collection&amp;lt;StoreFile&amp;gt; getStorefiles();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;When HStore#getTotalStaticIndexSize() iterates over the returned collection and calls s.getReader() for each StoreFile.&lt;br/&gt;
The race condition results in null Reader being returned, leading to NPE.&lt;/p&gt;

&lt;p&gt;In the case, I think the log can be omitted.&lt;br/&gt;
I can attach patch v2 without the log.&lt;/p&gt;</comment>
                            <comment id="14961649" author="hadoopqa" created="Sat, 17 Oct 2015 02:05:49 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12767156/14632-v1.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12767156/14632-v1.txt&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 6774f223a4a1cfd3cd81a17861ac94faad3b2916.&lt;br/&gt;
  ATTACHMENT ID: 12767156&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16073//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16073//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16073//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16073//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16073//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16073//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16073//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16073//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14961719" author="hadoopqa" created="Sat, 17 Oct 2015 03:55:59 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12767166/14632-v2.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12767166/14632-v2.txt&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 6774f223a4a1cfd3cd81a17861ac94faad3b2916.&lt;br/&gt;
  ATTACHMENT ID: 12767166&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16075//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16075//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16075//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16075//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16075//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16075//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16075//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16075//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14962785" author="yuzhihong@gmail.com" created="Mon, 19 Oct 2015 02:54:07 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eclark&quot; class=&quot;user-hover&quot; rel=&quot;eclark&quot;&gt;Elliott Clark&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt;&lt;br/&gt;
Mind taking a second look ?&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="14974572" author="yuzhihong@gmail.com" created="Mon, 26 Oct 2015 17:17:51 +0000"  >&lt;p&gt;Ping &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eclark&quot; class=&quot;user-hover&quot; rel=&quot;eclark&quot;&gt;Elliott Clark&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14974606" author="eclark" created="Mon, 26 Oct 2015 17:33:45 +0000"  >&lt;p&gt;Can the call to HStore#getTotalStaticIndexSize() returning the wrong size do anything dangerous ?&lt;/p&gt;</comment>
                            <comment id="14974707" author="yuzhihong@gmail.com" created="Mon, 26 Oct 2015 18:13:14 +0000"  >&lt;p&gt;getTotalStaticIndexSize() is used for metrics reporting.&lt;br/&gt;
In case region is closing, the value returned would be approximation of index size.&lt;/p&gt;

&lt;p&gt;This should be acceptable.&lt;/p&gt;</comment>
                            <comment id="14974754" author="yuzhihong@gmail.com" created="Mon, 26 Oct 2015 18:20:42 +0000"  >&lt;p&gt;BTW existing methods, such as getStorefilesIndexSize(), already use the same approach.&lt;/p&gt;</comment>
                            <comment id="14993857" author="yuzhihong@gmail.com" created="Fri, 6 Nov 2015 15:56:58 +0000"  >&lt;p&gt;Ping &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eclark&quot; class=&quot;user-hover&quot; rel=&quot;eclark&quot;&gt;Elliott Clark&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14994144" author="eclark" created="Fri, 6 Nov 2015 18:22:27 +0000"  >&lt;p&gt;+1 since existing methods use the same.&lt;/p&gt;</comment>
                            <comment id="14994167" author="yuzhihong@gmail.com" created="Fri, 6 Nov 2015 18:34:29 +0000"  >&lt;p&gt;Thanks, Elliott.&lt;/p&gt;

&lt;p&gt;Will integrate later today if there is no more review comment.&lt;/p&gt;</comment>
                            <comment id="14994591" author="hudson" created="Fri, 6 Nov 2015 22:32:29 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.3 #352 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.3/352/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.3/352/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14632&quot; title=&quot;Region server aborts due to unguarded dereference of Reader&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14632&quot;&gt;&lt;del&gt;HBASE-14632&lt;/del&gt;&lt;/a&gt; Region server aborts due to unguarded dereference of Reader (tedyu: rev 0e2e5d328071a9f5a116a9fb0ed1df7bc1f562ab)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HStore.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14994777" author="hudson" created="Sat, 7 Nov 2015 00:35:14 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.3-IT #298 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.3-IT/298/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.3-IT/298/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14632&quot; title=&quot;Region server aborts due to unguarded dereference of Reader&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14632&quot;&gt;&lt;del&gt;HBASE-14632&lt;/del&gt;&lt;/a&gt; Region server aborts due to unguarded dereference of Reader (tedyu: rev 0e2e5d328071a9f5a116a9fb0ed1df7bc1f562ab)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HStore.java&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14632&quot; title=&quot;Region server aborts due to unguarded dereference of Reader&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14632&quot;&gt;&lt;del&gt;HBASE-14632&lt;/del&gt;&lt;/a&gt; Revert due to over commit (tedyu: rev c69c74fcbfc6c1313bbac174dd181469755b4926)&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HStore.java&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14632&quot; title=&quot;Region server aborts due to unguarded dereference of Reader&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14632&quot;&gt;&lt;del&gt;HBASE-14632&lt;/del&gt;&lt;/a&gt; Region server aborts due to unguarded dereference of Reader (tedyu: rev c1a19dece03bc6696dbfbb69e801959f16ab69e9)&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HStore.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14994788" author="hudson" created="Sat, 7 Nov 2015 00:40:50 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-Trunk_matrix #440 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-Trunk_matrix/440/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-Trunk_matrix/440/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14632&quot; title=&quot;Region server aborts due to unguarded dereference of Reader&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14632&quot;&gt;&lt;del&gt;HBASE-14632&lt;/del&gt;&lt;/a&gt; Region server aborts due to unguarded dereference of Reader (tedyu: rev 6ec4a968144b7dfcbddcd3648e6139c985044e41)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HStore.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14994800" author="hudson" created="Sat, 7 Nov 2015 00:53:18 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.2-IT #268 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.2-IT/268/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.2-IT/268/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14632&quot; title=&quot;Region server aborts due to unguarded dereference of Reader&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14632&quot;&gt;&lt;del&gt;HBASE-14632&lt;/del&gt;&lt;/a&gt; Region server aborts due to unguarded dereference of Reader (tedyu: rev 805fcc63466ed79760e4b41d62c6d5c7fe59d7c9)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HStore.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14994947" author="hudson" created="Sat, 7 Nov 2015 02:46:54 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.2 #352 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.2/352/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.2/352/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14632&quot; title=&quot;Region server aborts due to unguarded dereference of Reader&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14632&quot;&gt;&lt;del&gt;HBASE-14632&lt;/del&gt;&lt;/a&gt; Region server aborts due to unguarded dereference of Reader (tedyu: rev 805fcc63466ed79760e4b41d62c6d5c7fe59d7c9)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HStore.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14994993" author="hudson" created="Sat, 7 Nov 2015 03:25:27 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.3 #353 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.3/353/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.3/353/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14632&quot; title=&quot;Region server aborts due to unguarded dereference of Reader&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14632&quot;&gt;&lt;del&gt;HBASE-14632&lt;/del&gt;&lt;/a&gt; Revert due to over commit (tedyu: rev c69c74fcbfc6c1313bbac174dd181469755b4926)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HStore.java&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14632&quot; title=&quot;Region server aborts due to unguarded dereference of Reader&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14632&quot;&gt;&lt;del&gt;HBASE-14632&lt;/del&gt;&lt;/a&gt; Region server aborts due to unguarded dereference of Reader (tedyu: rev c1a19dece03bc6696dbfbb69e801959f16ab69e9)&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HStore.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15047260" author="enis" created="Tue, 8 Dec 2015 18:54:45 +0000"  >&lt;p&gt;We have seen this in 1.1 code base. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tedyu&quot; class=&quot;user-hover&quot; rel=&quot;tedyu&quot;&gt;Ted Yu&lt;/a&gt; do you mind backporting it to 1.1.3 and 1.0 (if applicable) as well. &lt;/p&gt;</comment>
                            <comment id="15047707" author="hudson" created="Tue, 8 Dec 2015 23:56:42 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.1-JDK7 #1615 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.1-JDK7/1615/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.1-JDK7/1615/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14632&quot; title=&quot;Region server aborts due to unguarded dereference of Reader&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14632&quot;&gt;&lt;del&gt;HBASE-14632&lt;/del&gt;&lt;/a&gt; Region server aborts due to unguarded dereference of Reader (tedyu: rev 1b427f1987fe355cd6475c2836d2791a67a3c8cb)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HStore.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15047708" author="hudson" created="Tue, 8 Dec 2015 23:56:42 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.1-JDK8 #1703 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.1-JDK8/1703/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.1-JDK8/1703/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14632&quot; title=&quot;Region server aborts due to unguarded dereference of Reader&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14632&quot;&gt;&lt;del&gt;HBASE-14632&lt;/del&gt;&lt;/a&gt; Region server aborts due to unguarded dereference of Reader (tedyu: rev 1b427f1987fe355cd6475c2836d2791a67a3c8cb)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HStore.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15119586" author="ndimiduk" created="Wed, 27 Jan 2016 15:28:59 +0000"  >&lt;p&gt;Bulk closing 1.1.3 issues.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12767156" name="14632-v1.txt" size="1247" author="yuzhihong@gmail.com" created="Fri, 16 Oct 2015 22:35:53 +0000"/>
                            <attachment id="12767166" name="14632-v2.txt" size="1124" author="yuzhihong@gmail.com" created="Sat, 17 Oct 2015 00:14:10 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 16 Oct 2015 22:45:07 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            44 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2n54f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>