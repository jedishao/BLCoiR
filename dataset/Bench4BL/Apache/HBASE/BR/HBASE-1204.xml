<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sat Dec 03 17:07:48 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-1204/HBASE-1204.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-1204] Ensure there is always at least one server.X line in ZooKeeper conf/zoo.cfg</title>
                <link>https://issues.apache.org/jira/browse/HBASE-1204</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;This is needed so that we can get rid of the &quot;hbase.master&quot; property from the configuration XML.&lt;/p&gt;

&lt;p&gt;From &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1145&quot; title=&quot;Ensure that there is only 1 Master with Zookeeper (part of HA Master)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1145&quot;&gt;&lt;del&gt;HBASE-1145&lt;/del&gt;&lt;/a&gt;:&lt;/p&gt;

&lt;p&gt;There is a bit of an issue regarding getting rid of the &quot;hbase.master&quot; property in hbase-site.xml. Currently, anybody in HBase needing ZooKeeper parses the server.X lines out of conf/zoo.cfg to know how to connect to ZooKeeper. If there are no server.X lines, it means we are running a single instance ZooKeeper on the master server. To find that server, we use the &quot;hbase.master&quot; property in hbase-site.xml.&lt;/p&gt;

&lt;p&gt;After discussing it with Andrew Purtell and Michael Stack, we came up with the following:&lt;/p&gt;

&lt;p&gt;We have three cases:&lt;br/&gt;
1) &quot;local&quot; mode. All servers/clients are on localhost.&lt;br/&gt;
2) Distributed operation with single instance ZooKeeper running on master host.&lt;br/&gt;
3) Distributed operation with distributed ZooKeeper running.&lt;/p&gt;

&lt;p&gt;To fix these cases (1 and 2) and allow us to remove the &quot;hbase.master&quot; property from hbase-site.xml, we need to make sure there is &lt;em&gt;always&lt;/em&gt; a server.X line with the master&apos;s address in the zoo.cfg. Even when you&apos;re running a single instance ZooKeeper on the master server, there should be a single server.X line with the master&apos;s address.&lt;/p&gt;

&lt;p&gt;To avoid adding a lot of configuration headache on the user, we want to have the default conf/zoo.cfg have a sensible default for the single server master hostname case. We suggest shipping a new ZooKeeper jar with &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-279&quot; title=&quot;Allow specialization of quorum config parsing (e.g. variable expansion in zoo.cfg)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-279&quot;&gt;&lt;del&gt;ZOOKEEPER-279&lt;/del&gt;&lt;/a&gt; patched in, and using the variable substitution to inject the master hostname into zoo.cfg. For example, our new zoo.cfg would look something like:&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;# The number of milliseconds of each tick
tickTime=2000
# The number of ticks that the initial 
# synchronization phase can take
initLimit=10
# The number of ticks that can pass between 
# sending a request and getting an acknowledgement
syncLimit=5
# the directory where the snapshot is stored.
dataDir=${hbase.tmp.dir}/zookeeper
# the port at which the clients will connect
clientPort=2181 

server.0=${master.address.hostname}:2888:3888
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;The &quot;master.address.hostname&quot; is a new property being added to the hbase-site.xml during this period while we transition users to ZooKeeper. If the property is not set, we will use gethostname() to fill in the variable and produce copious warning messages that it may not work and the user should either fill in that variable in hbase-site.xml, or edit zoo.cfg by hand.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12415106">HBASE-1204</key>
            <summary>Ensure there is always at least one server.X line in ZooKeeper conf/zoo.cfg</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="nitay">Nitay Joffe</assignee>
                                    <reporter username="nitay">Nitay Joffe</reporter>
                        <labels>
                    </labels>
                <created>Thu, 19 Feb 2009 00:30:30 +0000</created>
                <updated>Thu, 2 May 2013 02:29:20 +0000</updated>
                            <resolved>Wed, 18 Mar 2009 20:54:58 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12679464" author="nitay" created="Fri, 6 Mar 2009 02:04:27 +0000"  >&lt;p&gt;This patch depends on updated ZooKeeper jar from &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1241&quot; title=&quot;HBase additions to ZooKeeper&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1241&quot;&gt;&lt;del&gt;HBASE-1241&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12683162" author="stack" created="Wed, 18 Mar 2009 20:52:50 +0000"  >&lt;p&gt;Nitay, this should be close, right?&lt;/p&gt;</comment>
                            <comment id="12683165" author="nitay" created="Wed, 18 Mar 2009 20:54:58 +0000"  >&lt;p&gt;Yes, thanks.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12416247">HBASE-1241</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12412929">HBASE-1145</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12401578" name="hbase-1204.patch" size="13232" author="nitay" created="Fri, 6 Mar 2009 02:04:27 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 18 Mar 2009 20:52:50 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>32040</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 38 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hbxz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>99197</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>