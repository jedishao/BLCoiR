<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Thu Dec 01 21:35:48 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-14777/HBASE-14777.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-14777] Fix Inter Cluster Replication Future ordering issues</title>
                <link>https://issues.apache.org/jira/browse/HBASE-14777</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Replication fails with IndexOutOfBoundsException &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
regionserver.ReplicationSource$ReplicationSourceWorkerThread(939): org.apache.hadoop.hbase.replication.regionserver.HBaseInterClusterReplicationEndpoint threw unknown exception:java.lang.IndexOutOfBoundsException: Index: 1, Size: 1
	at java.util.ArrayList.rangeCheck(Unknown Source)
	at java.util.ArrayList.remove(Unknown Source)
	at org.apache.hadoop.hbase.replication.regionserver.HBaseInterClusterReplicationEndpoint.replicate(HBaseInterClusterReplicationEndpoint.java:222)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Its happening due to incorrect removal of entries from the replication entries list. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12911015">HBASE-14777</key>
            <summary>Fix Inter Cluster Replication Future ordering issues</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ashu210890">Ashu Pachauri</assignee>
                                    <reporter username="Bhupendra">Bhupendra Kumar Jain</reporter>
                        <labels>
                    </labels>
                <created>Fri, 6 Nov 2015 10:32:50 +0000</created>
                <updated>Thu, 26 Nov 2015 11:55:20 +0000</updated>
                            <resolved>Thu, 26 Nov 2015 05:21:16 +0000</resolved>
                                                    <fixVersion>2.0.0</fixVersion>
                    <fixVersion>1.2.0</fixVersion>
                    <fixVersion>1.3.0</fixVersion>
                                    <component>Replication</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>18</watches>
                                                                <comments>
                            <comment id="14993479" author="bhupendra" created="Fri, 6 Nov 2015 10:35:40 +0000"  >&lt;p&gt;The code removes the successful entries from the list of entries. Each removal from the list changes the position of subsequent element of list which results in IndexOutOfBoundsException&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (Future&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt; f : futures) {
          &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
            &lt;span class=&quot;code-comment&quot;&gt;// wait &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; all futures, remove successful parts
&lt;/span&gt;            &lt;span class=&quot;code-comment&quot;&gt;// (only the remaining parts will be retried)
&lt;/span&gt;            entryLists.remove(f.get());
          } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (InterruptedException ie) {
            iox =  &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IOException(ie);
          }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To handle this, We can iterate and remove in reverse order. &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; fLen = futures.size();
        &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; fIndex = fLen - 1; fIndex &amp;gt;= 0; fIndex--) {
          &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
            &lt;span class=&quot;code-comment&quot;&gt;// wait &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; all futures, remove successful parts
&lt;/span&gt;            &lt;span class=&quot;code-comment&quot;&gt;// (only the remaining parts will be retried)
&lt;/span&gt;            entryLists.remove(futures.get(fIndex).get());
            } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (InterruptedException ie) {
            iox =  &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IOException(ie);
          }

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14993600" author="bhupendra" created="Fri, 6 Nov 2015 12:46:48 +0000"  >&lt;p&gt;Please review the attached patch&lt;/p&gt;</comment>
                            <comment id="14993728" author="yuzhihong@gmail.com" created="Fri, 6 Nov 2015 14:20:31 +0000"  >&lt;p&gt;+1 if tests pass.&lt;/p&gt;</comment>
                            <comment id="14993795" author="hadoopqa" created="Fri, 6 Nov 2015 15:18:05 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12771008/HBASE-14777.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12771008/HBASE-14777.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit bfa36891901b96b95d82f5307642c35fd2b9f534.&lt;br/&gt;
  ATTACHMENT ID: 12771008&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16430//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16430//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16430//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16430//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16430//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16430//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16430//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16430//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14993988" author="ashish singhi" created="Fri, 6 Nov 2015 17:06:36 +0000"  >&lt;p&gt;+1 (non-binding)&lt;/p&gt;</comment>
                            <comment id="14994559" author="appy" created="Fri, 6 Nov 2015 22:16:05 +0000"  >&lt;p&gt;+1&lt;br/&gt;
Please consider adding a unit test for the same.&lt;/p&gt;</comment>
                            <comment id="14994823" author="stack" created="Sat, 7 Nov 2015 01:16:27 +0000"  >&lt;p&gt;I like the &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=appy&quot; class=&quot;user-hover&quot; rel=&quot;appy&quot;&gt;Appy&lt;/a&gt; suggestion. Would it be hard to add a test &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Bhupendra&quot; class=&quot;user-hover&quot; rel=&quot;Bhupendra&quot;&gt;Bhupendra Kumar Jain&lt;/a&gt;? It might be hard to add a simple test of just that bit of code (could break it out as a static method perhaps and then test the static method does the right thing). Thanks for the fix.&lt;/p&gt;</comment>
                            <comment id="14996498" author="bhupendra" created="Mon, 9 Nov 2015 13:08:51 +0000"  >&lt;p&gt;Thanks all for the review. I will try to add the test case for this scenario. &lt;/p&gt;</comment>
                            <comment id="15005173" author="ashish singhi" created="Sat, 14 Nov 2015 05:52:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12988&quot; title=&quot;[Replication]Parallel apply edits across regions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12988&quot;&gt;&lt;del&gt;HBASE-12988&lt;/del&gt;&lt;/a&gt; was committed only to 1.2+, so this jira will not affect versions before it.&lt;/p&gt;</comment>
                            <comment id="15007635" author="ashu210890" created="Mon, 16 Nov 2015 23:39:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Bhupendra&quot; class=&quot;user-hover&quot; rel=&quot;Bhupendra&quot;&gt;Bhupendra Kumar Jain&lt;/a&gt; This issue is breaking inter cluster replication and is quite critical. Are you still actively working on the issue? If not, I can try adding a test for this.&lt;/p&gt;</comment>
                            <comment id="15009969" author="ashu210890" created="Wed, 18 Nov 2015 01:00:06 +0000"  >&lt;p&gt;V1: &lt;br/&gt;
I am not sure how &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Bhupendra&quot; class=&quot;user-hover&quot; rel=&quot;Bhupendra&quot;&gt;Bhupendra Kumar Jain&lt;/a&gt; actually encountered the issue, because there is another bug that actually masks the issue mentioned here.&lt;/p&gt;

&lt;p&gt;Doing Future&amp;lt;Integer&amp;gt;#get() returns an Integer object and using this Integer object in ArrayList#remove calls the overloaded ArrayList#remove(Object) method (no auto-unboxing will happen since this method exists), which basically means that it does not remove anything.&lt;/p&gt;

&lt;p&gt;However, if you replace Integer with an int , you will encounter the ArrayIndexOutofBoundsException.&lt;/p&gt;

&lt;p&gt;Anyways, I fixed both the issues and added a simple unit test to test inter cluster replication on mini clusters.&lt;/p&gt;</comment>
                            <comment id="15009982" author="ashu210890" created="Wed, 18 Nov 2015 01:08:51 +0000"  >&lt;p&gt;V2: &lt;br/&gt;
slight performance improvement in the test.&lt;/p&gt;</comment>
                            <comment id="15010277" author="appy" created="Wed, 18 Nov 2015 05:30:37 +0000"  >&lt;p&gt;Indeed, what threw ArrayIndexOutofBoundsException?&lt;/p&gt;

&lt;p&gt;Overall patch looks good. I have two questions though:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;why are we returning index and iterating reverse and all. Can&apos;t we simply remove first element every time given the fact we are going in order and blocking on futures. Such a simple logic would have avoided the bug in first place.&lt;/li&gt;
	&lt;li&gt;Why change utility cluster from 2 to 4? If it is a non-trivial reason, please add a comment for the same.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15010279" author="appy" created="Wed, 18 Nov 2015 05:30:58 +0000"  >&lt;p&gt;On side note (looking the code around this patch made me realize this), in IntegrationTestReplication we run internally, with 200 million rows, we were seeing significant GC pressure on the sink side. GC pauses were 10-30 sec long, no doubt the tests were failing (heap size = 4G).&lt;br/&gt;
Reason being, KeyValues are living long enough to be promoted to old generation. All KeyValues are kept around until every last one is replicated. Next, we can probably optimize that, it will significantly reduce gc pressure in sink clusters.&lt;/p&gt;</comment>
                            <comment id="15010336" author="ashu210890" created="Wed, 18 Nov 2015 06:24:37 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=appy&quot; class=&quot;user-hover&quot; rel=&quot;appy&quot;&gt;Appy&lt;/a&gt; &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;why are we returning index and iterating reverse and all. Can&apos;t we simply remove first element every time given the fact we are going in order and blocking on futures. Such a simple logic would have avoided the bug in first place.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;This is a perfectly valid question, and I also had the same doubt, we can totally make it work without the use of ordinals. But, removing the first element always won&apos;t work. If you look at the code more closely:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (Future&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt; f : futures) {
          &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
            &lt;span class=&quot;code-comment&quot;&gt;// wait &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; all futures, remove successful parts
&lt;/span&gt;            &lt;span class=&quot;code-comment&quot;&gt;// (only the remaining parts will be retried)
&lt;/span&gt;            entryLists.remove(f.get());
          } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (InterruptedException ie) {
            iox =  &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IOException(ie);
          } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (ExecutionException ee) {
            &lt;span class=&quot;code-comment&quot;&gt;// cause must be an IOException
&lt;/span&gt;            iox = (IOException)ee.getCause();
          }
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Suppose, we always remove the first element. If an InterruptedException/ExecutionException is thrown at index 0, we will not remove the element. Now, we don&apos;t want to retry, we want to check other Futures before we retry. So, we move to index 1, check the future and remove an entry if it succeeds. Now, which element would you remove, index 0 or index 1? To make this work, at any point in the loop, you will have to keep track of how many futures failed before this future in the list (the index to remove is offset by that number from index 0). Now, this is perfectly simple to do, just keep a running counter of successful futures. But, what is already being done here is also perfectly simple. Also, having ordinals gives you other guarantees that you are referring to the correct Entry in the list, if code became more complicated in the future.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Why change utility cluster from 2 to 4? If it is a non-trivial reason, please add a comment for the same.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yes, because InterClusterReplicationEndpoint uses number of sinks as a component in deciding the batches for shipping. I thought having at most two batches was not much of a test. I will add a comment for the same.&lt;/p&gt;</comment>
                            <comment id="15010422" author="appy" created="Wed, 18 Nov 2015 07:50:09 +0000"  >&lt;p&gt;Patch looks good. +1 (once the comment is added)&lt;/p&gt;

&lt;p&gt;Thanks for the explaining &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashu210890&quot; class=&quot;user-hover&quot; rel=&quot;ashu210890&quot;&gt;Ashu Pachauri&lt;/a&gt;.&lt;br/&gt;
I agree it is simple as it is. I asked just out of curiosity in case i was missing something.&lt;br/&gt;
Now that i am clear, i believe exceptions don&apos;t really matter, this would have been the alternative way. (Stating just as a fyi,  no need to make any changes.)&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;  try {
    f.get();
  } catch {
    ...
  } finally {
    entryLists.remove(0)
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;And it would have removed entries in face of exception too.&lt;/p&gt;</comment>
                            <comment id="15010435" author="ashu210890" created="Wed, 18 Nov 2015 08:05:03 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=appy&quot; class=&quot;user-hover&quot; rel=&quot;appy&quot;&gt;Appy&lt;/a&gt; Thanks for the comment. But, now I am curious, because I am also not the one who wrote this piece of code originally &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;  I had the impression that if f.get() failed, we would NOT want entryLists.remove to execute on that item, because we want to retry to ship the remaining entries in the list. Isn&apos;t that so?&lt;/p&gt;</comment>
                            <comment id="15010453" author="ashu210890" created="Wed, 18 Nov 2015 08:15:21 +0000"  >&lt;p&gt;Actually, after re-reading the code, I am positive this is what is happening. We want to try to ship all edits in batches. The list of batches is entryLists. If a batch succeeds replicating, we immediately remove it from entryLists. After iterating through all futures and removing entries corresponding to successful futures, we take the &quot;remaining&quot; list and try again, till the entryLists becomes empty. &lt;/p&gt;</comment>
                            <comment id="15010468" author="ashu210890" created="Wed, 18 Nov 2015 08:29:56 +0000"  >&lt;p&gt;V3: Added comments config changes to the Test.&lt;/p&gt;</comment>
                            <comment id="15010766" author="bhupendra" created="Wed, 18 Nov 2015 11:02:37 +0000"  >&lt;p&gt;Thanks Ashu and Appy&lt;br/&gt;
I was on festival vacation, So didn&apos;t check this further. &lt;/p&gt;

&lt;p&gt;V3 looks good. Can you also add the failure scenario in test case(DummyReplicator can throw exception). This can cover the scenarios when entry from entryLists should not be removed and retried. &lt;/p&gt;

&lt;p&gt;Initially I observed the index problem during my code review and during simulation of the same, I was printing the index returned from the future like below code&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i = (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;)f.get();
entryLists.remove(i);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Since I was assigning as int , so thats the reason, I got IndexOutOfBoundsException. But as &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashu210890&quot; class=&quot;user-hover&quot; rel=&quot;ashu210890&quot;&gt;Ashu Pachauri&lt;/a&gt; pointed out, before index problem, the other problem of removal exists. &lt;/p&gt;

&lt;p&gt;Thanks for looking into this&lt;/p&gt;</comment>
                            <comment id="15010814" author="anoop.hbase" created="Wed, 18 Nov 2015 11:37:18 +0000"  >&lt;p&gt;nit:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;entryLists.remove((int)f.get());&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;f.get().intValue() can be a better choice?&lt;/p&gt;

&lt;p&gt;Seeing the way we maintain these 2 lists of entryLists and futures, we maintain the same ordinal and not even we have to maintain the ordinal in the Runnable and return it may be.  The nth future item in futures List relates to nth item in entryList.  Ya for better understand ability of the code, let us not change that part.&lt;/p&gt;

&lt;p&gt;+1 for the patch..  Great catch guys.&lt;/p&gt;</comment>
                            <comment id="15011678" author="yuzhihong@gmail.com" created="Wed, 18 Nov 2015 18:57:08 +0000"  >&lt;p&gt;+1 if tests pass.&lt;/p&gt;</comment>
                            <comment id="15011863" author="ashu210890" created="Wed, 18 Nov 2015 20:05:15 +0000"  >&lt;p&gt;V4:&lt;br/&gt;
Modified as per &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anoop.hbase&quot; class=&quot;user-hover&quot; rel=&quot;anoop.hbase&quot;&gt;Anoop Sam John&lt;/a&gt;&apos;s comment. Also incorporated suggested change from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Bhupendra&quot; class=&quot;user-hover&quot; rel=&quot;Bhupendra&quot;&gt;Bhupendra Kumar Jain&lt;/a&gt; and added a FailingDummyReplicator that throws an exception while shipping edits. &lt;/p&gt;</comment>
                            <comment id="15011902" author="ashu210890" created="Wed, 18 Nov 2015 20:38:09 +0000"  >&lt;p&gt;V5: Using FailingDummyReplicator every alternate time slows the test down quite a lot; modifying it to fail only once.&lt;/p&gt;</comment>
                            <comment id="15012031" author="hadoopqa" created="Wed, 18 Nov 2015 21:33:54 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12772939/HBASE-14777-3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12772939/HBASE-14777-3.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit b2187c31ab8294215aab46db5dcd3b0dce4fad65.&lt;br/&gt;
  ATTACHMENT ID: 12772939&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 8 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.replication.TestReplicationChangingPeerRegionservers&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16574//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16574//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16574//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16574//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16574//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16574//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16574//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16574//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="15012042" author="yuzhihong@gmail.com" created="Wed, 18 Nov 2015 21:37:35 +0000"  >&lt;p&gt;TestReplicationChangingPeerRegionservers failure can be reproduced with patch v5&lt;/p&gt;</comment>
                            <comment id="15012081" author="ashu210890" created="Wed, 18 Nov 2015 21:52:31 +0000"  >&lt;p&gt;V6:&lt;br/&gt;
Yeah, just saw that TestReplicationChangingPeerRegionservers depends on the number of RS in peer cluster, and uses a hardcoded value of 2 for that. Since, I changed that value to 4 here, it was failing. I have modified the test to be more robust and fetch number of RS rather than using a hardcoded value.&lt;/p&gt;</comment>
                            <comment id="15012146" author="yuzhihong@gmail.com" created="Wed, 18 Nov 2015 22:08:13 +0000"  >&lt;p&gt;+1 on V6&lt;/p&gt;</comment>
                            <comment id="15012471" author="hadoopqa" created="Thu, 19 Nov 2015 00:35:24 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12773087/HBASE-14777-6.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12773087/HBASE-14777-6.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit b2187c31ab8294215aab46db5dcd3b0dce4fad65.&lt;br/&gt;
  ATTACHMENT ID: 12773087&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 12 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16578//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16578//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16578//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16578//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16578//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16578//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16578//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16578//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="15012477" author="eclark" created="Thu, 19 Nov 2015 00:37:36 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="15012760" author="hudson" created="Thu, 19 Nov 2015 04:19:15 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.3-IT #321 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.3-IT/321/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.3-IT/321/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14777&quot; title=&quot;Fix Inter Cluster Replication Future ordering issues&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14777&quot;&gt;&lt;del&gt;HBASE-14777&lt;/del&gt;&lt;/a&gt; Fix Inter Cluster Replication Future ordering issues (eclark: rev de4f235bf4f5a6b1f6b624bd03028b7267d50d1e)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/TestReplicationBase.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/TestReplicationChangingPeerRegionservers.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/TestReplicationEndpoint.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/HBaseInterClusterReplicationEndpoint.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15012774" author="hudson" created="Thu, 19 Nov 2015 04:30:15 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-Trunk_matrix #479 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-Trunk_matrix/479/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-Trunk_matrix/479/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14777&quot; title=&quot;Fix Inter Cluster Replication Future ordering issues&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14777&quot;&gt;&lt;del&gt;HBASE-14777&lt;/del&gt;&lt;/a&gt; Fix Inter Cluster Replication Future ordering issues (eclark: rev c8fbaf0c965b76f765e7230e51485add3c73df48)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/TestReplicationEndpoint.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/HBaseInterClusterReplicationEndpoint.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/TestReplicationChangingPeerRegionservers.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/TestReplicationBase.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15012780" author="hudson" created="Thu, 19 Nov 2015 04:36:25 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.2-IT #291 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.2-IT/291/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.2-IT/291/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14777&quot; title=&quot;Fix Inter Cluster Replication Future ordering issues&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14777&quot;&gt;&lt;del&gt;HBASE-14777&lt;/del&gt;&lt;/a&gt; Fix Inter Cluster Replication Future ordering issues (eclark: rev c831a4522fd14f1012a6d4d0cd9b88d279704244)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/TestReplicationBase.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/TestReplicationChangingPeerRegionservers.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/HBaseInterClusterReplicationEndpoint.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/TestReplicationEndpoint.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15012962" author="hudson" created="Thu, 19 Nov 2015 06:22:56 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.2 #384 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.2/384/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.2/384/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14777&quot; title=&quot;Fix Inter Cluster Replication Future ordering issues&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14777&quot;&gt;&lt;del&gt;HBASE-14777&lt;/del&gt;&lt;/a&gt; Fix Inter Cluster Replication Future ordering issues (eclark: rev c831a4522fd14f1012a6d4d0cd9b88d279704244)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/TestReplicationEndpoint.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/TestReplicationChangingPeerRegionservers.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/TestReplicationBase.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/HBaseInterClusterReplicationEndpoint.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15013029" author="hudson" created="Thu, 19 Nov 2015 06:55:55 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.3 #379 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.3/379/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.3/379/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14777&quot; title=&quot;Fix Inter Cluster Replication Future ordering issues&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14777&quot;&gt;&lt;del&gt;HBASE-14777&lt;/del&gt;&lt;/a&gt; Fix Inter Cluster Replication Future ordering issues (eclark: rev de4f235bf4f5a6b1f6b624bd03028b7267d50d1e)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/TestReplicationBase.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/TestReplicationChangingPeerRegionservers.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/TestReplicationEndpoint.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/HBaseInterClusterReplicationEndpoint.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15014318" author="stack" created="Thu, 19 Nov 2015 20:46:59 +0000"  >&lt;p&gt;Since this patch went in, replication related tests are failing the 1.7 build:&lt;/p&gt;

&lt;p&gt;See &lt;a href=&quot;https://builds.apache.org/view/H-L/view/HBase/job/HBase-1.3/379/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/view/H-L/view/HBase/job/HBase-1.3/379/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;and &lt;/p&gt;


&lt;p&gt;&lt;a href=&quot;https://builds.apache.org/view/H-L/view/HBase/job/HBase-1.3/380/jdk=latest1.7,label=Hadoop/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/view/H-L/view/HBase/job/HBase-1.3/380/jdk=latest1.7,label=Hadoop/testReport/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;If you click on the tests, it is not showing you anything useful (unfortunately, TODO) but if you go to the artifacts and dig to find these tests you see:&lt;/p&gt;


&lt;p&gt;-------------------------------------------------------------------------------&lt;br/&gt;
Test set: org.apache.hadoop.hbase.replication.TestReplicationEndpoint&lt;br/&gt;
-------------------------------------------------------------------------------&lt;br/&gt;
Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 283.994 sec &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.hadoop.hbase.replication.TestReplicationEndpoint&lt;br/&gt;
testInterClusterReplication(org.apache.hadoop.hbase.replication.TestReplicationEndpoint)  Time elapsed: 120.72 sec  &amp;lt;&amp;lt;&amp;lt; ERROR!&lt;br/&gt;
org.junit.runners.model.TestTimedOutException: test timed out after 120000 milliseconds&lt;br/&gt;
	at java.lang.Thread.start0(Native Method)&lt;br/&gt;
	at java.lang.Thread.start(Thread.java:714)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor.addWorker(ThreadPoolExecutor.java:949)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor.execute(ThreadPoolExecutor.java:1360)&lt;br/&gt;
	at org.apache.hadoop.hbase.client.ResultBoundedCompletionService.submit(ResultBoundedCompletionService.java:146)&lt;br/&gt;
	at org.apache.hadoop.hbase.client.ScannerCallableWithReplicas.addCallsForCurrentReplica(ScannerCallableWithReplicas.java:279)&lt;br/&gt;
	at org.apache.hadoop.hbase.client.ScannerCallableWithReplicas.call(ScannerCallableWithReplicas.java:166)&lt;br/&gt;
	at org.apache.hadoop.hbase.client.ScannerCallableWithReplicas.call(ScannerCallableWithReplicas.java:60)&lt;br/&gt;
	at org.apache.hadoop.hbase.client.RpcRetryingCaller.callWithoutRetries(RpcRetryingCaller.java:200)&lt;br/&gt;
	at org.apache.hadoop.hbase.client.ClientSmallReversedScanner.loadCache(ClientSmallReversedScanner.java:212)&lt;br/&gt;
	at org.apache.hadoop.hbase.client.ClientSmallReversedScanner.next(ClientSmallReversedScanner.java:186)&lt;br/&gt;
	at org.apache.hadoop.hbase.client.ConnectionManager$HConnectionImplementation.locateRegionInMeta(ConnectionManager.java:1279)&lt;br/&gt;
	at org.apache.hadoop.hbase.client.ConnectionManager$HConnectionImplementation.locateRegion(ConnectionManager.java:1185)&lt;br/&gt;
	at org.apache.hadoop.hbase.client.AsyncProcess.submit(AsyncProcess.java:370)&lt;br/&gt;
	at org.apache.hadoop.hbase.client.AsyncProcess.submit(AsyncProcess.java:321)&lt;br/&gt;
	at org.apache.hadoop.hbase.client.BufferedMutatorImpl.backgroundFlushCommits(BufferedMutatorImpl.java:238)&lt;br/&gt;
	at org.apache.hadoop.hbase.client.BufferedMutatorImpl.flush(BufferedMutatorImpl.java:190)&lt;br/&gt;
	at org.apache.hadoop.hbase.client.HTable.flushCommits(HTable.java:1430)&lt;br/&gt;
	at org.apache.hadoop.hbase.client.HTable.put(HTable.java:1021)&lt;br/&gt;
	at org.apache.hadoop.hbase.replication.TestReplicationEndpoint.doPut(TestReplicationEndpoint.java:265)&lt;br/&gt;
	at org.apache.hadoop.hbase.replication.TestReplicationEndpoint.doPut(TestReplicationEndpoint.java:257)&lt;br/&gt;
	at org.apache.hadoop.hbase.replication.TestReplicationEndpoint.testInterClusterReplication(TestReplicationEndpoint.java:202)&lt;/p&gt;

&lt;p&gt;Here is output: &lt;a href=&quot;https://builds.apache.org/view/H-L/view/HBase/job/HBase-1.3/380/jdk=latest1.7,label=Hadoop/artifact/hbase-server/target/surefire-reports/org.apache.hadoop.hbase.replication.TestReplicationEndpoint-output.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/view/H-L/view/HBase/job/HBase-1.3/380/jdk=latest1.7,label=Hadoop/artifact/hbase-server/target/surefire-reports/org.apache.hadoop.hbase.replication.TestReplicationEndpoint-output.txt&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Please take a look. I&apos;ve started a new build of branch-1.3 in the meantime to try and get more data. Resolve if you don&apos;t think it this patch.&lt;/p&gt;

</comment>
                            <comment id="15014322" author="stack" created="Thu, 19 Nov 2015 20:48:08 +0000"  >&lt;p&gt;This history is a bit unreliable but it does &apos;show&apos; that the two times this test ran, it failed:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://builds.apache.org/view/H-L/view/HBase/job/HBase-1.3/jdk=latest1.7,label=Hadoop/lastCompletedBuild/testReport/TEST-org.apache.hadoop.hbase.replication.TestReplicationEndpoint/xml/_init_/history/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/view/H-L/view/HBase/job/HBase-1.3/jdk=latest1.7,label=Hadoop/lastCompletedBuild/testReport/TEST-org.apache.hadoop.hbase.replication.TestReplicationEndpoint/xml/_init_/history/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15014377" author="ashu210890" created="Thu, 19 Nov 2015 21:16:30 +0000"  >&lt;p&gt;It is a side effect of what I am doing. For the test, I am using the doPut call that was already there is TestReplicationEndpoint, and using it quite a few times in succession. From the logs, it seems that it is getting stuck and is very slow because it goes the the generic HTable.put call.&lt;/p&gt;

&lt;p&gt;Since, in my test, I have access to HRegion object, I am going to modify the test to use directly do a region.put, which will be way faster.&lt;/p&gt;</comment>
                            <comment id="15014404" author="ashu210890" created="Thu, 19 Nov 2015 21:24:47 +0000"  >&lt;p&gt;Addendum: The patch so that directly goes through HRegion#put instead of calling HTable#put.&lt;/p&gt;</comment>
                            <comment id="15014415" author="stack" created="Thu, 19 Nov 2015 21:27:46 +0000"  >&lt;p&gt;Thank you for the prompt action &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashu210890&quot; class=&quot;user-hover&quot; rel=&quot;ashu210890&quot;&gt;Ashu Pachauri&lt;/a&gt; I applied your addendum. Lets see how it does on any build post now.  Will leave issue open in meantime. Thanks.&lt;/p&gt;</comment>
                            <comment id="15015311" author="busbey" created="Fri, 20 Nov 2015 06:37:48 +0000"  >&lt;p&gt;FYI, reverted and pushed addendum with updated commit message on master, branch-1, and branch-1.2.&lt;/p&gt;</comment>
                            <comment id="15015324" author="hudson" created="Fri, 20 Nov 2015 06:55:16 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.3-IT #326 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.3-IT/326/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.3-IT/326/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14777&quot; title=&quot;Fix Inter Cluster Replication Future ordering issues&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14777&quot;&gt;&lt;del&gt;HBASE-14777&lt;/del&gt;&lt;/a&gt; ADDENDUM Fix failing TestReplicationEndpoint test (busbey: rev f56c605e7389da1d2dcd2925d25be1fa972cb6cd)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/TestReplicationEndpoint.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15015371" author="hudson" created="Fri, 20 Nov 2015 07:41:49 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.2-IT #295 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.2-IT/295/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.2-IT/295/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14777&quot; title=&quot;Fix Inter Cluster Replication Future ordering issues&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14777&quot;&gt;&lt;del&gt;HBASE-14777&lt;/del&gt;&lt;/a&gt; ADDENDUM Fix failing TestReplicationEndpoint test (busbey: rev ca7fbeadafb6caa1b9534a225900e31acbd5cf34)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/TestReplicationEndpoint.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15015562" author="hudson" created="Fri, 20 Nov 2015 10:34:21 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.2 #389 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.2/389/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.2/389/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14777&quot; title=&quot;Fix Inter Cluster Replication Future ordering issues&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14777&quot;&gt;&lt;del&gt;HBASE-14777&lt;/del&gt;&lt;/a&gt; ADDENDUM Fix failing TestReplicationEndpoint test (busbey: rev ca7fbeadafb6caa1b9534a225900e31acbd5cf34)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/TestReplicationEndpoint.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15015612" author="hudson" created="Fri, 20 Nov 2015 11:09:55 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.3 #384 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.3/384/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.3/384/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14777&quot; title=&quot;Fix Inter Cluster Replication Future ordering issues&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14777&quot;&gt;&lt;del&gt;HBASE-14777&lt;/del&gt;&lt;/a&gt; ADDENDUM Fix failing TestReplicationEndpoint test (busbey: rev f56c605e7389da1d2dcd2925d25be1fa972cb6cd)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/TestReplicationEndpoint.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15015629" author="hudson" created="Fri, 20 Nov 2015 11:24:38 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-Trunk_matrix #484 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-Trunk_matrix/484/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-Trunk_matrix/484/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14777&quot; title=&quot;Fix Inter Cluster Replication Future ordering issues&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14777&quot;&gt;&lt;del&gt;HBASE-14777&lt;/del&gt;&lt;/a&gt; ADDENDUM Fix failing TestReplicationEndpoint test (busbey: rev 8dbbe96e040cdee2a94b2a0ac53462a5c8f5c233)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/TestReplicationEndpoint.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15022613" author="lhofhansl" created="Mon, 23 Nov 2015 18:07:59 +0000"  >&lt;p&gt;I guess I messed &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12988&quot; title=&quot;[Replication]Parallel apply edits across regions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12988&quot;&gt;&lt;del&gt;HBASE-12988&lt;/del&gt;&lt;/a&gt; up. Sorry about that &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
I&apos;ll do an extra review through this patch/addendum now.&lt;/p&gt;</comment>
                            <comment id="15023878" author="lhofhansl" created="Tue, 24 Nov 2015 06:53:33 +0000"  >&lt;p&gt;In fact the first version of the patch used a CompletionService to allow removing the futures in the order in which they finished, so that we won&apos;t retry part that needn&apos;t to. I thought later to simplify it.&lt;/p&gt;</comment>
                            <comment id="15023905" author="lhofhansl" created="Tue, 24 Nov 2015 07:20:52 +0000"  >&lt;p&gt;May I offer this instead?&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Uses a proper CompletionService now (like my first - unpublished - version had). Futures are handled in the proper order.&lt;/li&gt;
	&lt;li&gt;Does not alter the entryLists indexes at all, just set any completed chunk to an emptyLiist (instead of .clear() on the existing set so as not to leave a large array around longer than needed).&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Let me know what you think.&lt;/p&gt;</comment>
                            <comment id="15025078" author="lhofhansl" created="Tue, 24 Nov 2015 18:45:19 +0000"  >&lt;p&gt;Any comments &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashu210890&quot; class=&quot;user-hover&quot; rel=&quot;ashu210890&quot;&gt;Ashu Pachauri&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eclark&quot; class=&quot;user-hover&quot; rel=&quot;eclark&quot;&gt;Elliott Clark&lt;/a&gt;? I&apos;d like to commit my addendum, with the &quot;real&quot; fix.&lt;/p&gt;</comment>
                            <comment id="15025222" author="ashu210890" created="Tue, 24 Nov 2015 19:55:04 +0000"  >&lt;p&gt;Looks good to me. +!&lt;/p&gt;</comment>
                            <comment id="15027371" author="apurtell" created="Wed, 25 Nov 2015 18:59:13 +0000"  >&lt;blockquote&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Uses a proper CompletionService now (like my first - unpublished - version had). Futures are handled in the proper order.&lt;/li&gt;
	&lt;li&gt;Does not alter the entryLists indexes at all, just set any completed chunk to an emptyLiist (instead of .clear() on the existing set so as not to leave a large array around longer than needed).&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;

&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="15028183" author="lhofhansl" created="Thu, 26 Nov 2015 05:14:56 +0000"  >&lt;p&gt;Cool... I&apos;ll commit this as an addendum to 1.2, 1.3, 2.0.&lt;/p&gt;</comment>
                            <comment id="15028190" author="lhofhansl" created="Thu, 26 Nov 2015 05:21:16 +0000"  >&lt;p&gt;Pushed to all branches. Thanks for bearing with me.&lt;/p&gt;</comment>
                            <comment id="15028259" author="hudson" created="Thu, 26 Nov 2015 06:30:24 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.3-IT #340 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.3-IT/340/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.3-IT/340/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14777&quot; title=&quot;Fix Inter Cluster Replication Future ordering issues&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14777&quot;&gt;&lt;del&gt;HBASE-14777&lt;/del&gt;&lt;/a&gt; second addendum, better fix using CompletionService. (larsh: rev dbbdb7b2e8fcf5f7b2cfc895fd6dfc8f85e4259c)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/HBaseInterClusterReplicationEndpoint.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15028317" author="hudson" created="Thu, 26 Nov 2015 07:50:53 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.2-IT #310 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.2-IT/310/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.2-IT/310/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14777&quot; title=&quot;Fix Inter Cluster Replication Future ordering issues&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14777&quot;&gt;&lt;del&gt;HBASE-14777&lt;/del&gt;&lt;/a&gt; second addendum, better fix using CompletionService. (larsh: rev 89e34f36a4bf28c569e3b83757365c84dd1997b6)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/HBaseInterClusterReplicationEndpoint.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15028395" author="hudson" created="Thu, 26 Nov 2015 09:07:33 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-Trunk_matrix #504 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-Trunk_matrix/504/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-Trunk_matrix/504/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14777&quot; title=&quot;Fix Inter Cluster Replication Future ordering issues&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14777&quot;&gt;&lt;del&gt;HBASE-14777&lt;/del&gt;&lt;/a&gt; second addendum, better fix using CompletionService. (larsh: rev 6531b465a757f8f6dad08d924c0a7a88bd52e5a9)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/HBaseInterClusterReplicationEndpoint.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15028499" author="hudson" created="Thu, 26 Nov 2015 10:28:22 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.2 #404 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.2/404/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.2/404/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14777&quot; title=&quot;Fix Inter Cluster Replication Future ordering issues&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14777&quot;&gt;&lt;del&gt;HBASE-14777&lt;/del&gt;&lt;/a&gt; second addendum, better fix using CompletionService. (larsh: rev 89e34f36a4bf28c569e3b83757365c84dd1997b6)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/HBaseInterClusterReplicationEndpoint.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15028633" author="hudson" created="Thu, 26 Nov 2015 11:55:20 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.3 #400 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.3/400/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.3/400/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14777&quot; title=&quot;Fix Inter Cluster Replication Future ordering issues&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14777&quot;&gt;&lt;del&gt;HBASE-14777&lt;/del&gt;&lt;/a&gt; second addendum, better fix using CompletionService. (larsh: rev dbbdb7b2e8fcf5f7b2cfc895fd6dfc8f85e4259c)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/HBaseInterClusterReplicationEndpoint.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12912967">HBASE-14811</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12773387">HBASE-12988</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12774008" name="14777-alternative.txt" size="3060" author="lhofhansl" created="Tue, 24 Nov 2015 07:20:52 +0000"/>
                            <attachment id="12772884" name="HBASE-14777-1.patch" size="9483" author="ashu210890" created="Wed, 18 Nov 2015 01:00:06 +0000"/>
                            <attachment id="12772886" name="HBASE-14777-2.patch" size="9481" author="ashu210890" created="Wed, 18 Nov 2015 01:08:51 +0000"/>
                            <attachment id="12772939" name="HBASE-14777-3.patch" size="10011" author="ashu210890" created="Wed, 18 Nov 2015 08:29:56 +0000"/>
                            <attachment id="12773061" name="HBASE-14777-4.patch" size="10520" author="ashu210890" created="Wed, 18 Nov 2015 20:05:15 +0000"/>
                            <attachment id="12773069" name="HBASE-14777-5.patch" size="10639" author="ashu210890" created="Wed, 18 Nov 2015 20:38:09 +0000"/>
                            <attachment id="12773087" name="HBASE-14777-6.patch" size="12091" author="ashu210890" created="Wed, 18 Nov 2015 21:52:31 +0000"/>
                            <attachment id="12773339" name="HBASE-14777-addendum.patch" size="1150" author="ashu210890" created="Thu, 19 Nov 2015 21:24:47 +0000"/>
                            <attachment id="12771008" name="HBASE-14777.patch" size="1590" author="Bhupendra" created="Fri, 6 Nov 2015 12:46:48 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 6 Nov 2015 14:20:31 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 1 week ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2o1y7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>