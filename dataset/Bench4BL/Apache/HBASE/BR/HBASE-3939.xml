<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sat Dec 03 18:04:59 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-3939/HBASE-3939.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-3939] Some crossports of Hadoop IPC fixes</title>
                <link>https://issues.apache.org/jira/browse/HBASE-3939</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;A few fixes from Hadoop IPC that we should probably cross-port into our copy:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7227&quot; title=&quot;Remove protocol version check at proxy creation in Hadoop RPC.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7227&quot;&gt;&lt;del&gt;HADOOP-7227&lt;/del&gt;&lt;/a&gt;: remove the protocol version check at call time&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7146&quot; title=&quot;RPC server leaks file descriptors&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7146&quot;&gt;&lt;del&gt;HADOOP-7146&lt;/del&gt;&lt;/a&gt;: fix a socket leak in server&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7121&quot; title=&quot;Exceptions while serializing IPC call response are not handled well&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7121&quot;&gt;&lt;del&gt;HADOOP-7121&lt;/del&gt;&lt;/a&gt;: fix behavior when response serialization throws an exception&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7346&quot; title=&quot;Send back nicer error to clients using outdated IPC version&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7346&quot;&gt;&lt;del&gt;HADOOP-7346&lt;/del&gt;&lt;/a&gt;: send back nicer error response when client is using an out of date IPC version&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12508900">HBASE-3939</key>
            <summary>Some crossports of Hadoop IPC fixes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="tlipcon">Todd Lipcon</reporter>
                        <labels>
                    </labels>
                <created>Wed, 1 Jun 2011 01:53:13 +0000</created>
                <updated>Fri, 20 Nov 2015 12:41:52 +0000</updated>
                            <resolved>Sun, 6 Nov 2011 21:49:57 +0000</resolved>
                                    <version>0.92.0</version>
                                    <fixVersion>0.92.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13042508" author="yuzhihong@gmail.com" created="Wed, 1 Jun 2011 23:26:38 +0000"  >&lt;p&gt;This version pulls in &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7227&quot; title=&quot;Remove protocol version check at proxy creation in Hadoop RPC.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7227&quot;&gt;&lt;del&gt;HADOOP-7227&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
Decision of pulling ProtocolSignature in is pending.&lt;/p&gt;

&lt;p&gt;HMasterInterface, etc already have VERSION field. So I use that instead of versionID in &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7227&quot; title=&quot;Remove protocol version check at proxy creation in Hadoop RPC.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7227&quot;&gt;&lt;del&gt;HADOOP-7227&lt;/del&gt;&lt;/a&gt;.6.patch&lt;/p&gt;

&lt;p&gt;TestAdmin passes based on this patch.&lt;/p&gt;</comment>
                            <comment id="13042510" author="tlipcon" created="Wed, 1 Jun 2011 23:35:32 +0000"  >&lt;p&gt;You currently have the server-side check all commented out.&lt;/p&gt;

&lt;p&gt;I think you should do the following:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;refactor the code that grabs the VERSION constant into a static function somewhere&lt;/li&gt;
	&lt;li&gt;call that new function from Invocation(Method,Object[])&lt;/li&gt;
	&lt;li&gt;also call that new function from the block of code starting with &quot;// Verify rpc version&quot;&lt;/li&gt;
	&lt;li&gt;remove all of the code referencing clientMethodsHash&lt;/li&gt;
	&lt;li&gt;we need to bump the HBaseServer.CURRENT_VERSION constant as well.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13042841" author="yuzhihong@gmail.com" created="Thu, 2 Jun 2011 16:08:08 +0000"  >&lt;p&gt;VersionedProtocol has changed in hadoop-common.&lt;br/&gt;
getProtocolVersion() is now Deprecated.&lt;br/&gt;
getProtocolSignature() isn&apos;t in cdh3u0 or hadoop-core-0.20-append jar hbase trunk is using.&lt;/p&gt;</comment>
                            <comment id="13042873" author="tlipcon" created="Thu, 2 Jun 2011 16:53:55 +0000"  >&lt;p&gt;Do we still depend on hadoop-common&apos;s VersionedProtocol? I thought we&apos;d copy-paste forked all of the IPC code by now.&lt;/p&gt;</comment>
                            <comment id="13042875" author="yuzhihong@gmail.com" created="Thu, 2 Jun 2011 16:56:56 +0000"  >&lt;p&gt;We still depend on hadoop-common&apos;s VersionedProtocol:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.hadoop.ipc.VersionedProtocol;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13042882" author="tlipcon" created="Thu, 2 Jun 2011 17:04:01 +0000"  >&lt;p&gt;oh... let&apos;s stop doing that &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13047600" author="stack" created="Fri, 10 Jun 2011 22:46:01 +0000"  >&lt;p&gt;Moving out of 0.92.0. Pull it back in if you think different.&lt;/p&gt;</comment>
                            <comment id="13051546" author="yuzhihong@gmail.com" created="Sat, 18 Jun 2011 16:15:39 +0000"  >&lt;p&gt;Version 2 pulls in VersionedProtocol.java from hadoop-common&lt;/p&gt;</comment>
                            <comment id="13051627" author="yuzhihong@gmail.com" created="Sun, 19 Jun 2011 02:31:38 +0000"  >&lt;p&gt;Modified test classes for change in VersionedProtocol&lt;/p&gt;</comment>
                            <comment id="13051680" author="yuzhihong@gmail.com" created="Sun, 19 Jun 2011 12:52:43 +0000"  >&lt;p&gt;Version 3 incorporates the remaining changes for HBaseServer&lt;/p&gt;</comment>
                            <comment id="13051704" author="yuzhihong@gmail.com" created="Sun, 19 Jun 2011 16:25:43 +0000"  >&lt;p&gt;Tests pass.&lt;/p&gt;</comment>
                            <comment id="13053920" author="jiraposter@reviews.apache.org" created="Thu, 23 Jun 2011 15:31:48 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/951/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/951/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for hbase and Todd Lipcon.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;A few fixes from Hadoop IPC that we should probably cross-port into our copy:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7227&quot; title=&quot;Remove protocol version check at proxy creation in Hadoop RPC.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7227&quot;&gt;&lt;del&gt;HADOOP-7227&lt;/del&gt;&lt;/a&gt;: remove the protocol version check at call time&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7146&quot; title=&quot;RPC server leaks file descriptors&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7146&quot;&gt;&lt;del&gt;HADOOP-7146&lt;/del&gt;&lt;/a&gt;: fix a socket leak in server&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7121&quot; title=&quot;Exceptions while serializing IPC call response are not handled well&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7121&quot;&gt;&lt;del&gt;HADOOP-7121&lt;/del&gt;&lt;/a&gt;: fix behavior when response serialization throws an exception&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7346&quot; title=&quot;Send back nicer error to clients using outdated IPC version&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7346&quot;&gt;&lt;del&gt;HADOOP-7346&lt;/del&gt;&lt;/a&gt;: send back nicer error response when client is using an out of date IPC version&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3939&quot; title=&quot;Some crossports of Hadoop IPC fixes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3939&quot;&gt;&lt;del&gt;HBASE-3939&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3939&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-3939&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  /src/main/java/org/apache/hadoop/hbase/coprocessor/AggregateImplementation.java 1137262 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/coprocessor/AggregateProtocol.java 1137262 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/coprocessor/BaseEndpointCoprocessor.java 1137262 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/ipc/CoprocessorProtocol.java 1137280 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/ipc/HBaseClient.java 1134732 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/ipc/HBaseRPC.java 1134732 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/ipc/HBaseRpcMetrics.java 1134732 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/ipc/HBaseServer.java 1137362 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/ipc/HMasterInterface.java 1134732 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/ipc/HMasterRegionInterface.java 1134732 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/ipc/HRegionInterface.java 1134732 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/ipc/Invocation.java 1134732 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/ipc/ProtocolSignature.java PRE-CREATION &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/ipc/RpcEngine.java 1134732 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/ipc/RpcServer.java 1134732 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/ipc/Status.java PRE-CREATION &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/ipc/VersionedProtocol.java PRE-CREATION &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/ipc/WritableRpcEngine.java 1134732 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/master/HMaster.java 1134732 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java 1134732 &lt;br/&gt;
  /src/test/java/org/apache/hadoop/hbase/regionserver/TestServerCustomProtocol.java 1137280 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/951/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/951/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Test suite passed.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Ted&lt;/p&gt;
</comment>
                            <comment id="13054035" author="jiraposter@reviews.apache.org" created="Thu, 23 Jun 2011 18:59:47 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/951/#review899&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/951/#review899&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Ship it!&lt;/p&gt;


&lt;p&gt;I guess it&apos;s fine if it&apos;s just a crossport, maybe clean the white spaces?&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Jean-Daniel&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2011-06-23 15:30:03, Ted Yu wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/951/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/951/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-06-23 15:30:03)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hbase and Todd Lipcon.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;A few fixes from Hadoop IPC that we should probably cross-port into our copy:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;* &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7227&quot; title=&quot;Remove protocol version check at proxy creation in Hadoop RPC.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7227&quot;&gt;&lt;del&gt;HADOOP-7227&lt;/del&gt;&lt;/a&gt;: remove the protocol version check at call time&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;* &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7146&quot; title=&quot;RPC server leaks file descriptors&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7146&quot;&gt;&lt;del&gt;HADOOP-7146&lt;/del&gt;&lt;/a&gt;: fix a socket leak in server&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;* &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7121&quot; title=&quot;Exceptions while serializing IPC call response are not handled well&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7121&quot;&gt;&lt;del&gt;HADOOP-7121&lt;/del&gt;&lt;/a&gt;: fix behavior when response serialization throws an exception&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;* &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7346&quot; title=&quot;Send back nicer error to clients using outdated IPC version&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7346&quot;&gt;&lt;del&gt;HADOOP-7346&lt;/del&gt;&lt;/a&gt;: send back nicer error response when client is using an out of date IPC version&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3939&quot; title=&quot;Some crossports of Hadoop IPC fixes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3939&quot;&gt;&lt;del&gt;HBASE-3939&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3939&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-3939&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/coprocessor/AggregateImplementation.java 1137262 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/coprocessor/AggregateProtocol.java 1137262 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/coprocessor/BaseEndpointCoprocessor.java 1137262 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/CoprocessorProtocol.java 1137280 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/HBaseClient.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/HBaseRPC.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/HBaseRpcMetrics.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/HBaseServer.java 1137362 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/HMasterInterface.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/HMasterRegionInterface.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/HRegionInterface.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/Invocation.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/ProtocolSignature.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/RpcEngine.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/RpcServer.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/Status.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/VersionedProtocol.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/WritableRpcEngine.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/master/HMaster.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/test/java/org/apache/hadoop/hbase/regionserver/TestServerCustomProtocol.java 1137280 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/951/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/951/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Test suite passed.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Ted&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13054083" author="jiraposter@reviews.apache.org" created="Thu, 23 Jun 2011 20:32:47 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/951/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/951/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-06-23 20:31:21.703117)&lt;/p&gt;


&lt;p&gt;Review request for hbase and Todd Lipcon.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Removed white spaces.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;A few fixes from Hadoop IPC that we should probably cross-port into our copy:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7227&quot; title=&quot;Remove protocol version check at proxy creation in Hadoop RPC.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7227&quot;&gt;&lt;del&gt;HADOOP-7227&lt;/del&gt;&lt;/a&gt;: remove the protocol version check at call time&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7146&quot; title=&quot;RPC server leaks file descriptors&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7146&quot;&gt;&lt;del&gt;HADOOP-7146&lt;/del&gt;&lt;/a&gt;: fix a socket leak in server&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7121&quot; title=&quot;Exceptions while serializing IPC call response are not handled well&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7121&quot;&gt;&lt;del&gt;HADOOP-7121&lt;/del&gt;&lt;/a&gt;: fix behavior when response serialization throws an exception&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7346&quot; title=&quot;Send back nicer error to clients using outdated IPC version&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7346&quot;&gt;&lt;del&gt;HADOOP-7346&lt;/del&gt;&lt;/a&gt;: send back nicer error response when client is using an out of date IPC version&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3939&quot; title=&quot;Some crossports of Hadoop IPC fixes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3939&quot;&gt;&lt;del&gt;HBASE-3939&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3939&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-3939&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  /src/main/java/org/apache/hadoop/hbase/coprocessor/AggregateImplementation.java 1137262 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/coprocessor/AggregateProtocol.java 1137262 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/coprocessor/BaseEndpointCoprocessor.java 1137262 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/ipc/CoprocessorProtocol.java 1137280 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/ipc/HBaseClient.java 1134732 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/ipc/HBaseRPC.java 1134732 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/ipc/HBaseRpcMetrics.java 1134732 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/ipc/HBaseServer.java 1137362 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/ipc/HMasterInterface.java 1134732 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/ipc/HMasterRegionInterface.java 1134732 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/ipc/HRegionInterface.java 1134732 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/ipc/Invocation.java 1134732 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/ipc/ProtocolSignature.java PRE-CREATION &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/ipc/RpcEngine.java 1134732 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/ipc/RpcServer.java 1134732 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/ipc/Status.java PRE-CREATION &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/ipc/VersionedProtocol.java PRE-CREATION &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/ipc/WritableRpcEngine.java 1134732 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/master/HMaster.java 1134732 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java 1134732 &lt;br/&gt;
  /src/test/java/org/apache/hadoop/hbase/regionserver/TestServerCustomProtocol.java 1137280 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/951/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/951/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Test suite passed.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Ted&lt;/p&gt;
</comment>
                            <comment id="13054084" author="jiraposter@reviews.apache.org" created="Thu, 23 Jun 2011 20:36:47 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/951/#review900&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/951/#review900&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;


&lt;p&gt;What kind of testing did you do with this? We should test old-&amp;gt;new RPC to make sure the error messages come out OK&lt;/p&gt;


&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/HBaseServer.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/951/#comment1943&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/951/#comment1943&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    we should check this against old versions of HBase &amp;#8211; the constants I put in this code are hadoop RPC version numbers, which might not correspond to hbase IPC version numbers.&lt;/p&gt;

&lt;p&gt;    ie we should start a trunk server, then try to connect to it from an 0.90 shell, 0.89 shell, 0.20 shell, and make sure it works correctly.&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Todd&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2011-06-23 20:31:21, Ted Yu wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/951/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/951/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-06-23 20:31:21)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hbase and Todd Lipcon.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;A few fixes from Hadoop IPC that we should probably cross-port into our copy:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;* &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7227&quot; title=&quot;Remove protocol version check at proxy creation in Hadoop RPC.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7227&quot;&gt;&lt;del&gt;HADOOP-7227&lt;/del&gt;&lt;/a&gt;: remove the protocol version check at call time&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;* &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7146&quot; title=&quot;RPC server leaks file descriptors&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7146&quot;&gt;&lt;del&gt;HADOOP-7146&lt;/del&gt;&lt;/a&gt;: fix a socket leak in server&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;* &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7121&quot; title=&quot;Exceptions while serializing IPC call response are not handled well&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7121&quot;&gt;&lt;del&gt;HADOOP-7121&lt;/del&gt;&lt;/a&gt;: fix behavior when response serialization throws an exception&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;* &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7346&quot; title=&quot;Send back nicer error to clients using outdated IPC version&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7346&quot;&gt;&lt;del&gt;HADOOP-7346&lt;/del&gt;&lt;/a&gt;: send back nicer error response when client is using an out of date IPC version&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3939&quot; title=&quot;Some crossports of Hadoop IPC fixes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3939&quot;&gt;&lt;del&gt;HBASE-3939&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3939&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-3939&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/coprocessor/AggregateImplementation.java 1137262 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/coprocessor/AggregateProtocol.java 1137262 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/coprocessor/BaseEndpointCoprocessor.java 1137262 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/CoprocessorProtocol.java 1137280 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/HBaseClient.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/HBaseRPC.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/HBaseRpcMetrics.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/HBaseServer.java 1137362 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/HMasterInterface.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/HMasterRegionInterface.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/HRegionInterface.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/Invocation.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/ProtocolSignature.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/RpcEngine.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/RpcServer.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/Status.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/VersionedProtocol.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/WritableRpcEngine.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/master/HMaster.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/test/java/org/apache/hadoop/hbase/regionserver/TestServerCustomProtocol.java 1137280 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/951/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/951/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Test suite passed.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Ted&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13054090" author="jiraposter@reviews.apache.org" created="Thu, 23 Jun 2011 20:52:47 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/951/#review901&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/951/#review901&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;



&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/HBaseServer.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/951/#comment1944&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/951/#comment1944&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    I checked CURRENT_VERSION field back to 0.20 codebase.&lt;br/&gt;
    It was 3 back then.&lt;br/&gt;
    I am not sure which baseline corresponded to version 2.&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Ted&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2011-06-23 20:31:21, Ted Yu wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/951/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/951/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-06-23 20:31:21)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hbase and Todd Lipcon.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;A few fixes from Hadoop IPC that we should probably cross-port into our copy:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;* &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7227&quot; title=&quot;Remove protocol version check at proxy creation in Hadoop RPC.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7227&quot;&gt;&lt;del&gt;HADOOP-7227&lt;/del&gt;&lt;/a&gt;: remove the protocol version check at call time&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;* &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7146&quot; title=&quot;RPC server leaks file descriptors&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7146&quot;&gt;&lt;del&gt;HADOOP-7146&lt;/del&gt;&lt;/a&gt;: fix a socket leak in server&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;* &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7121&quot; title=&quot;Exceptions while serializing IPC call response are not handled well&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7121&quot;&gt;&lt;del&gt;HADOOP-7121&lt;/del&gt;&lt;/a&gt;: fix behavior when response serialization throws an exception&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;* &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7346&quot; title=&quot;Send back nicer error to clients using outdated IPC version&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7346&quot;&gt;&lt;del&gt;HADOOP-7346&lt;/del&gt;&lt;/a&gt;: send back nicer error response when client is using an out of date IPC version&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3939&quot; title=&quot;Some crossports of Hadoop IPC fixes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3939&quot;&gt;&lt;del&gt;HBASE-3939&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3939&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-3939&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/coprocessor/AggregateImplementation.java 1137262 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/coprocessor/AggregateProtocol.java 1137262 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/coprocessor/BaseEndpointCoprocessor.java 1137262 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/CoprocessorProtocol.java 1137280 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/HBaseClient.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/HBaseRPC.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/HBaseRpcMetrics.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/HBaseServer.java 1137362 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/HMasterInterface.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/HMasterRegionInterface.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/HRegionInterface.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/Invocation.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/ProtocolSignature.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/RpcEngine.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/RpcServer.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/Status.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/VersionedProtocol.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/WritableRpcEngine.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/master/HMaster.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/test/java/org/apache/hadoop/hbase/regionserver/TestServerCustomProtocol.java 1137280 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/951/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/951/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Test suite passed.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Ted&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13054091" author="jiraposter@reviews.apache.org" created="Thu, 23 Jun 2011 20:54:47 +0000"  >

&lt;blockquote&gt;&lt;p&gt;On 2011-06-23 20:51:31, Ted Yu wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; /src/main/java/org/apache/hadoop/hbase/ipc/HBaseServer.java, line 1026&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/951/diff/1/?file=21581#file21581line1026&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/951/diff/1/?file=21581#file21581line1026&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     I checked CURRENT_VERSION field back to 0.20 codebase.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     It was 3 back then.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     I am not sure which baseline corresponded to version 2.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;did you try starting a server with trunk and connecting with an older version? It should spit out a nice error message instead of an EOFException. If you can confirm that, then I&apos;ll be +1.&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Todd&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/951/#review901&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/951/#review901&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;


&lt;p&gt;On 2011-06-23 20:31:21, Ted Yu wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/951/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/951/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-06-23 20:31:21)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hbase and Todd Lipcon.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;A few fixes from Hadoop IPC that we should probably cross-port into our copy:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;* &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7227&quot; title=&quot;Remove protocol version check at proxy creation in Hadoop RPC.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7227&quot;&gt;&lt;del&gt;HADOOP-7227&lt;/del&gt;&lt;/a&gt;: remove the protocol version check at call time&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;* &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7146&quot; title=&quot;RPC server leaks file descriptors&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7146&quot;&gt;&lt;del&gt;HADOOP-7146&lt;/del&gt;&lt;/a&gt;: fix a socket leak in server&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;* &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7121&quot; title=&quot;Exceptions while serializing IPC call response are not handled well&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7121&quot;&gt;&lt;del&gt;HADOOP-7121&lt;/del&gt;&lt;/a&gt;: fix behavior when response serialization throws an exception&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;* &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7346&quot; title=&quot;Send back nicer error to clients using outdated IPC version&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7346&quot;&gt;&lt;del&gt;HADOOP-7346&lt;/del&gt;&lt;/a&gt;: send back nicer error response when client is using an out of date IPC version&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3939&quot; title=&quot;Some crossports of Hadoop IPC fixes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3939&quot;&gt;&lt;del&gt;HBASE-3939&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3939&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-3939&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/coprocessor/AggregateImplementation.java 1137262 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/coprocessor/AggregateProtocol.java 1137262 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/coprocessor/BaseEndpointCoprocessor.java 1137262 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/CoprocessorProtocol.java 1137280 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/HBaseClient.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/HBaseRPC.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/HBaseRpcMetrics.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/HBaseServer.java 1137362 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/HMasterInterface.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/HMasterRegionInterface.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/HRegionInterface.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/Invocation.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/ProtocolSignature.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/RpcEngine.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/RpcServer.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/Status.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/VersionedProtocol.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/WritableRpcEngine.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/master/HMaster.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/test/java/org/apache/hadoop/hbase/regionserver/TestServerCustomProtocol.java 1137280 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/951/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/951/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Test suite passed.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Ted&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13054131" author="jiraposter@reviews.apache.org" created="Thu, 23 Jun 2011 22:02:47 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/951/#review903&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/951/#review903&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;



&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/HBaseServer.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/951/#comment1946&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/951/#comment1946&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    I tried to start cluster with hbase-0.91.0-SNAPSHOT&lt;br/&gt;
    First time I encountered conversion failure (&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-451&quot; title=&quot;Remove HTableDescriptor from HRegionInfo&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-451&quot;&gt;&lt;del&gt;HBASE-451&lt;/del&gt;&lt;/a&gt;)&lt;br/&gt;
    I removed hdfs:/hbase and started again.&lt;/p&gt;

&lt;p&gt;    Table creation request from 0.90.4 client got:&lt;/p&gt;

&lt;p&gt;    java.lang.IllegalArgumentException: Not a host:port pair: ciq.com,60000,1308866059399&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Ted&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2011-06-23 20:31:21, Ted Yu wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/951/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/951/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-06-23 20:31:21)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hbase and Todd Lipcon.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;A few fixes from Hadoop IPC that we should probably cross-port into our copy:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;* &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7227&quot; title=&quot;Remove protocol version check at proxy creation in Hadoop RPC.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7227&quot;&gt;&lt;del&gt;HADOOP-7227&lt;/del&gt;&lt;/a&gt;: remove the protocol version check at call time&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;* &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7146&quot; title=&quot;RPC server leaks file descriptors&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7146&quot;&gt;&lt;del&gt;HADOOP-7146&lt;/del&gt;&lt;/a&gt;: fix a socket leak in server&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;* &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7121&quot; title=&quot;Exceptions while serializing IPC call response are not handled well&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7121&quot;&gt;&lt;del&gt;HADOOP-7121&lt;/del&gt;&lt;/a&gt;: fix behavior when response serialization throws an exception&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;* &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7346&quot; title=&quot;Send back nicer error to clients using outdated IPC version&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7346&quot;&gt;&lt;del&gt;HADOOP-7346&lt;/del&gt;&lt;/a&gt;: send back nicer error response when client is using an out of date IPC version&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3939&quot; title=&quot;Some crossports of Hadoop IPC fixes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3939&quot;&gt;&lt;del&gt;HBASE-3939&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3939&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-3939&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/coprocessor/AggregateImplementation.java 1137262 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/coprocessor/AggregateProtocol.java 1137262 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/coprocessor/BaseEndpointCoprocessor.java 1137262 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/CoprocessorProtocol.java 1137280 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/HBaseClient.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/HBaseRPC.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/HBaseRpcMetrics.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/HBaseServer.java 1137362 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/HMasterInterface.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/HMasterRegionInterface.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/HRegionInterface.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/Invocation.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/ProtocolSignature.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/RpcEngine.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/RpcServer.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/Status.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/VersionedProtocol.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/WritableRpcEngine.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/master/HMaster.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/test/java/org/apache/hadoop/hbase/regionserver/TestServerCustomProtocol.java 1137280 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/951/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/951/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Test suite passed.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Ted&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13054478" author="jiraposter@reviews.apache.org" created="Fri, 24 Jun 2011 14:43:48 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/951/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/951/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-06-24 14:42:47.298437)&lt;/p&gt;


&lt;p&gt;Review request for hbase and Todd Lipcon.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Removed clientVersion check where clientVersion is less than 3.&lt;br/&gt;
Those clients would encounter the following exception connecting to zookeeper:&lt;/p&gt;

&lt;p&gt;java.lang.IllegalArgumentException: Not a host:port pair: ciq.com,60000,1308866059399&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;A few fixes from Hadoop IPC that we should probably cross-port into our copy:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7227&quot; title=&quot;Remove protocol version check at proxy creation in Hadoop RPC.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7227&quot;&gt;&lt;del&gt;HADOOP-7227&lt;/del&gt;&lt;/a&gt;: remove the protocol version check at call time&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7146&quot; title=&quot;RPC server leaks file descriptors&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7146&quot;&gt;&lt;del&gt;HADOOP-7146&lt;/del&gt;&lt;/a&gt;: fix a socket leak in server&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7121&quot; title=&quot;Exceptions while serializing IPC call response are not handled well&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7121&quot;&gt;&lt;del&gt;HADOOP-7121&lt;/del&gt;&lt;/a&gt;: fix behavior when response serialization throws an exception&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7346&quot; title=&quot;Send back nicer error to clients using outdated IPC version&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7346&quot;&gt;&lt;del&gt;HADOOP-7346&lt;/del&gt;&lt;/a&gt;: send back nicer error response when client is using an out of date IPC version&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3939&quot; title=&quot;Some crossports of Hadoop IPC fixes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3939&quot;&gt;&lt;del&gt;HBASE-3939&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3939&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-3939&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  /src/main/java/org/apache/hadoop/hbase/coprocessor/AggregateImplementation.java 1137262 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/coprocessor/AggregateProtocol.java 1137262 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/coprocessor/BaseEndpointCoprocessor.java 1137262 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/ipc/CoprocessorProtocol.java 1137280 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/ipc/HBaseClient.java 1134732 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/ipc/HBaseRPC.java 1134732 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/ipc/HBaseRpcMetrics.java 1134732 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/ipc/HBaseServer.java 1139326 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/ipc/HMasterInterface.java 1134732 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/ipc/HMasterRegionInterface.java 1134732 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/ipc/HRegionInterface.java 1134732 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/ipc/Invocation.java 1134732 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/ipc/ProtocolSignature.java PRE-CREATION &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/ipc/RpcEngine.java 1134732 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/ipc/RpcServer.java 1134732 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/ipc/Status.java PRE-CREATION &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/ipc/VersionedProtocol.java PRE-CREATION &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/ipc/WritableRpcEngine.java 1134732 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/master/HMaster.java 1134732 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java 1134732 &lt;br/&gt;
  /src/test/java/org/apache/hadoop/hbase/regionserver/TestServerCustomProtocol.java 1137280 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/951/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/951/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Test suite passed.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Ted&lt;/p&gt;
</comment>
                            <comment id="13056891" author="stack" created="Tue, 28 Jun 2011 23:42:11 +0000"  >&lt;p&gt;The &apos;java.lang.IllegalArgumentException: Not a host:port pair: abc.com,60000,1308866059399&apos; is probably because of move away from HSA toward ServerName.  Do you have the stack trace?  Its probably preventing the nice message Todd talks about above from popping up in the client.&lt;/p&gt;</comment>
                            <comment id="13056896" author="yuzhihong@gmail.com" created="Tue, 28 Jun 2011 23:49:50 +0000"  >&lt;p&gt;@Stack, I think you&apos;re right.&lt;/p&gt;

&lt;p&gt;I don&apos;t have stack trace.&lt;br/&gt;
Currently we don&apos;t have a cluster running TRUNK hbase.&lt;/p&gt;</comment>
                            <comment id="13062395" author="jiraposter@reviews.apache.org" created="Sat, 9 Jul 2011 15:13:16 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/951/#review1014&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/951/#review1014&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;


&lt;p&gt;Request for review.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Ted&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2011-06-24 14:42:47, Ted Yu wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/951/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/951/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-06-24 14:42:47)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hbase and Todd Lipcon.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;A few fixes from Hadoop IPC that we should probably cross-port into our copy:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;* &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7227&quot; title=&quot;Remove protocol version check at proxy creation in Hadoop RPC.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7227&quot;&gt;&lt;del&gt;HADOOP-7227&lt;/del&gt;&lt;/a&gt;: remove the protocol version check at call time&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;* &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7146&quot; title=&quot;RPC server leaks file descriptors&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7146&quot;&gt;&lt;del&gt;HADOOP-7146&lt;/del&gt;&lt;/a&gt;: fix a socket leak in server&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;* &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7121&quot; title=&quot;Exceptions while serializing IPC call response are not handled well&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7121&quot;&gt;&lt;del&gt;HADOOP-7121&lt;/del&gt;&lt;/a&gt;: fix behavior when response serialization throws an exception&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;* &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7346&quot; title=&quot;Send back nicer error to clients using outdated IPC version&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7346&quot;&gt;&lt;del&gt;HADOOP-7346&lt;/del&gt;&lt;/a&gt;: send back nicer error response when client is using an out of date IPC version&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3939&quot; title=&quot;Some crossports of Hadoop IPC fixes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3939&quot;&gt;&lt;del&gt;HBASE-3939&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3939&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-3939&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/coprocessor/AggregateImplementation.java 1137262 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/coprocessor/AggregateProtocol.java 1137262 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/coprocessor/BaseEndpointCoprocessor.java 1137262 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/CoprocessorProtocol.java 1137280 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/HBaseClient.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/HBaseRPC.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/HBaseRpcMetrics.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/HBaseServer.java 1139326 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/HMasterInterface.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/HMasterRegionInterface.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/HRegionInterface.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/Invocation.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/ProtocolSignature.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/RpcEngine.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/RpcServer.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/Status.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/VersionedProtocol.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/WritableRpcEngine.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/master/HMaster.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/test/java/org/apache/hadoop/hbase/regionserver/TestServerCustomProtocol.java 1137280 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/951/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/951/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Test suite passed.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Ted&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13062595" author="jiraposter@reviews.apache.org" created="Sat, 9 Jul 2011 17:56:00 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/951/#review1018&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/951/#review1018&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;


&lt;p&gt;Needs unit tests before any +1:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Confirm protocol signature (new feature) match and mismatch is handled correctly.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Confirm this sends back nicer error responses when client is using an out of date IPC version&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Andrew&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2011-06-24 14:42:47, Ted Yu wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/951/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/951/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-06-24 14:42:47)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hbase and Todd Lipcon.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;A few fixes from Hadoop IPC that we should probably cross-port into our copy:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;* &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7227&quot; title=&quot;Remove protocol version check at proxy creation in Hadoop RPC.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7227&quot;&gt;&lt;del&gt;HADOOP-7227&lt;/del&gt;&lt;/a&gt;: remove the protocol version check at call time&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;* &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7146&quot; title=&quot;RPC server leaks file descriptors&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7146&quot;&gt;&lt;del&gt;HADOOP-7146&lt;/del&gt;&lt;/a&gt;: fix a socket leak in server&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;* &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7121&quot; title=&quot;Exceptions while serializing IPC call response are not handled well&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7121&quot;&gt;&lt;del&gt;HADOOP-7121&lt;/del&gt;&lt;/a&gt;: fix behavior when response serialization throws an exception&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;* &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7346&quot; title=&quot;Send back nicer error to clients using outdated IPC version&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7346&quot;&gt;&lt;del&gt;HADOOP-7346&lt;/del&gt;&lt;/a&gt;: send back nicer error response when client is using an out of date IPC version&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3939&quot; title=&quot;Some crossports of Hadoop IPC fixes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3939&quot;&gt;&lt;del&gt;HBASE-3939&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3939&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-3939&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/coprocessor/AggregateImplementation.java 1137262 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/coprocessor/AggregateProtocol.java 1137262 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/coprocessor/BaseEndpointCoprocessor.java 1137262 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/CoprocessorProtocol.java 1137280 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/HBaseClient.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/HBaseRPC.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/HBaseRpcMetrics.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/HBaseServer.java 1139326 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/HMasterInterface.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/HMasterRegionInterface.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/HRegionInterface.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/Invocation.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/ProtocolSignature.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/RpcEngine.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/RpcServer.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/Status.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/VersionedProtocol.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/ipc/WritableRpcEngine.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/master/HMaster.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java 1134732 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/test/java/org/apache/hadoop/hbase/regionserver/TestServerCustomProtocol.java 1137280 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/951/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/951/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Test suite passed.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Ted&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13062601" author="yuzhihong@gmail.com" created="Sat, 9 Jul 2011 18:50:27 +0000"  >&lt;p&gt;A person with more knowledge about hdfs would be able to decide where the tests should be placed.&lt;/p&gt;</comment>
                            <comment id="13102122" author="stack" created="Sat, 10 Sep 2011 19:35:42 +0000"  >&lt;p&gt;@Ted If you update this patch &amp;#8211; i.e. we have VersionedProtocol pulled in already &amp;#8211; I&apos;ll do the testing.&lt;/p&gt;</comment>
                            <comment id="13102199" author="yuzhihong@gmail.com" created="Sun, 11 Sep 2011 01:59:59 +0000"  >&lt;p&gt;Patch version 4 aligns with the current setResponse() method.&lt;br/&gt;
Compiles.&lt;br/&gt;
TestServerCustomProtocol passes.&lt;/p&gt;</comment>
                            <comment id="13141493" author="stack" created="Tue, 1 Nov 2011 19:41:09 +0000"  >&lt;p&gt;Marking this critical.  Lets try and get it in.&lt;/p&gt;</comment>
                            <comment id="13141499" author="apurtell" created="Tue, 1 Nov 2011 19:47:55 +0000"  >&lt;p&gt;That will collide with SecureRPCEngine (&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2742&quot; title=&quot;Provide strong authentication with a secure RPC engine&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2742&quot;&gt;&lt;del&gt;HBASE-2742&lt;/del&gt;&lt;/a&gt;)&lt;/p&gt;</comment>
                            <comment id="13141503" author="apurtell" created="Tue, 1 Nov 2011 19:49:58 +0000"  >&lt;p&gt;This is a great example of why I&apos;ve asked Gary to work on upstreaming the security changes full time. RPC changes in particular can be painful if made in a manner unaware of subclassing for SecureRPCEngine.&lt;/p&gt;</comment>
                            <comment id="13141741" author="stack" created="Tue, 1 Nov 2011 23:14:15 +0000"  >&lt;p&gt;v5 same as v4.  Trying to trigger patch-build.&lt;/p&gt;</comment>
                            <comment id="13141757" author="hadoopqa" created="Tue, 1 Nov 2011 23:26:05 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12501870/3939-v5.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12501870/3939-v5.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated -165 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 4 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;/p&gt;


&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/129//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/129//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/129//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/129//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/129//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/129//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13141777" author="yuzhihong@gmail.com" created="Tue, 1 Nov 2011 23:52:29 +0000"  >&lt;p&gt;From &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/129//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/129//testReport/&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[ERROR] /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/trunk/src/test/java/org/apache/hadoop/hbase/ipc/TestDelayedRpc.java:[163,17] org.apache.hadoop.hbase.ipc.TestDelayedRpc.TestRpcImpl is not &lt;span class=&quot;code-keyword&quot;&gt;abstract&lt;/span&gt; and does not override &lt;span class=&quot;code-keyword&quot;&gt;abstract&lt;/span&gt; method getProtocolSignature(java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;,&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;,&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;) in org.apache.hadoop.hbase.ipc.VersionedProtocol
[ERROR] 
[ERROR] /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/trunk/src/test/java/org/apache/hadoop/hbase/ipc/TestDelayedRpc.java:[266,17] org.apache.hadoop.hbase.ipc.TestDelayedRpc.FaultyTestRpc is not &lt;span class=&quot;code-keyword&quot;&gt;abstract&lt;/span&gt; and does not override &lt;span class=&quot;code-keyword&quot;&gt;abstract&lt;/span&gt; method getProtocolSignature(java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;,&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;,&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;) in org.apache.hadoop.hbase.ipc.VersionedProtocol
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13143396" author="stack" created="Thu, 3 Nov 2011 18:11:20 +0000"  >&lt;p&gt;Fix failed compile by adding VERSION to the test rpc Interface in TestDelayedRpc&lt;/p&gt;</comment>
                            <comment id="13143398" author="stack" created="Thu, 3 Nov 2011 18:11:50 +0000"  >&lt;p&gt;Submitting patch.&lt;/p&gt;</comment>
                            <comment id="13143399" author="stack" created="Thu, 3 Nov 2011 18:12:02 +0000"  >&lt;p&gt;@Gary This patch ok w/ you?&lt;/p&gt;</comment>
                            <comment id="13143415" author="stack" created="Thu, 3 Nov 2011 18:27:16 +0000"  >&lt;p&gt;We can&apos;t get to the new rpc message because 0.90.x clients don&apos;t get that far; they fail reading zookeeper master entry:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
hbase(main):002:0&amp;gt; debug
Debug mode is ON

hbase(main):003:0&amp;gt; list 
TABLE                                                                                                                                                                                                                                                                                                                                                                       

ERROR: java.lang.IllegalArgumentException: Not a host:port pair: &#65533;12054@h-24-30.sfo.stumble.neth-24-30.sfo.stumble.net,60637,1320344107987
Backtrace: org/apache/hadoop/hbase/HServerAddress.java:60:in `&amp;lt;init&amp;gt;&apos;
           org/apache/hadoop/hbase/MasterAddressTracker.java:63:in `getMasterAddress&apos;
           org/apache/hadoop/hbase/client/HConnectionManager.java:354:in `getMaster&apos;
           org/apache/hadoop/hbase/client/HBaseAdmin.java:94:in `&amp;lt;init&amp;gt;&apos;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ServerName is in the way of our getting to rpc.&lt;/p&gt;

&lt;p&gt;I tried making an HBaseAdmin instance but that don&apos;t work because on construction it tries to talk to Master (which is dumb):&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
hbase(main):008:0&amp;gt; a = HBaseAdmin.&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt;(c)
NativeException: java.lang.IllegalArgumentException: Not a host:port pair: &#65533;12054@h-24-30.sfo.stumble.neth-24-30.sfo.stumble.net,60637,1320344107987
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Can&apos;t create an HTable.&lt;/p&gt;

&lt;p&gt;Reverting the ServerName change is not an option.&lt;/p&gt;</comment>
                            <comment id="13143468" author="hadoopqa" created="Thu, 3 Nov 2011 19:22:51 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12502190/3939-v6.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12502190/3939-v6.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/161//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/161//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13143591" author="ghelmling" created="Thu, 3 Nov 2011 23:10:21 +0000"  >&lt;p&gt;Would be easier to review if the latest patch was in review board.&lt;/p&gt;

&lt;p&gt;Here are comments from what I see:&lt;/p&gt;

&lt;p&gt;In &lt;tt&gt;HBaseServer&lt;/tt&gt;:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;In &lt;tt&gt;setupResponse()&lt;/tt&gt; we take a &lt;tt&gt;Status&lt;/tt&gt; instance (which is good), but it doesn&apos;t get passed back through to the client.  If we&apos;re modifying the wire protocol to pass RPC version, I think we should also take advantage of the change to serialize &lt;tt&gt;Status&lt;/tt&gt; back to the client.  This allows the client to differentiate between fatal errors (authentication error, or bad rpc version) which should kill the connection, and request-specific errors.  By the way, adding &lt;tt&gt;Status&lt;/tt&gt; here allows me to remove it from the &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2742&quot; title=&quot;Provide strong authentication with a secure RPC engine&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2742&quot;&gt;&lt;del&gt;HBASE-2742&lt;/del&gt;&lt;/a&gt; patch, which is great!&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;In &lt;tt&gt;Invocation&lt;/tt&gt;:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;In the constructor:
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    rpcVersion = WritableRpcEngine.writableRpcVersion;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This binds &lt;tt&gt;Invocation&lt;/tt&gt; unnecessarily to &lt;tt&gt;WritableRpcEngine&lt;/tt&gt;.  We&apos;ve diverged a little from Hadoop RPC by making &lt;tt&gt;Invocation&lt;/tt&gt; a top-level class, allowing it to be shared between RPC engine implementations, so this would undermine that.  Since &lt;tt&gt;rpcVersion&lt;/tt&gt; only seems to relate to &lt;tt&gt;Invocation&lt;/tt&gt; serialization, why not just define &lt;tt&gt;RPC_VERSION&lt;/tt&gt; as a static final constant on &lt;tt&gt;Invocation&lt;/tt&gt;?  Or alternately, couldn&apos;t we just make &lt;tt&gt;Invocation&lt;/tt&gt; implement &lt;tt&gt;VersionedWritable&lt;/tt&gt; and let that handle the check for us?&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;



&lt;p&gt;Other than that, this patch looks fine to me.  I&apos;ve applied it together with the &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2742&quot; title=&quot;Provide strong authentication with a secure RPC engine&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2742&quot;&gt;&lt;del&gt;HBASE-2742&lt;/del&gt;&lt;/a&gt; patch and run through a few of the tests, and so far seems to work fine.&lt;/p&gt;</comment>
                            <comment id="13143634" author="stack" created="Fri, 4 Nov 2011 00:07:58 +0000"  >&lt;p&gt;Sorry about not putting it up in rb.  Will do next time.&lt;/p&gt;

&lt;p&gt;On setupResponse above, there is a byte which says whether an error or not (or error and length of the rpc provided).  Passing the Status, I don&apos;t see FATAL being used.  So why introduce it?  Just so its in place when we want to use it later?&lt;/p&gt;

&lt;p&gt;If this is so, see what you think of the following patch (it puts Status into the back and forth though it does not really exploit it &amp;#8211; hadoop seems to have come to rely on it but our stuff is old in this regard &amp;#8211; and it does your suggestion around VersionedWritable too).&lt;/p&gt;</comment>
                            <comment id="13143637" author="stack" created="Fri, 4 Nov 2011 00:10:15 +0000"  >&lt;p&gt;Let me put this up on rb too.&lt;/p&gt;</comment>
                            <comment id="13143640" author="stack" created="Fri, 4 Nov 2011 00:12:39 +0000"  >&lt;p&gt;Thanks for the help with this Gary.&lt;/p&gt;</comment>
                            <comment id="13143658" author="hadoopqa" created="Fri, 4 Nov 2011 00:52:55 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12502230/3939-v7.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12502230/3939-v7.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated -164 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 48 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.thrift2.TestThriftHBaseServiceHandler&lt;br/&gt;
                  org.apache.hadoop.hbase.client.TestAdmin&lt;br/&gt;
                  org.apache.hadoop.hbase.TestGlobalMemStoreSize&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/165//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/165//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/165//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/165//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/165//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/165//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13143679" author="hadoopqa" created="Fri, 4 Nov 2011 01:55:20 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12502241/3939-v8.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12502241/3939-v8.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated -164 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 49 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.master.TestMasterFailover&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/167//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/167//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/167//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/167//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/167//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/167//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13144569" author="jiraposter@reviews.apache.org" created="Sat, 5 Nov 2011 04:27:51 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2718/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2718/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-11-05 04:26:43.914383)&lt;/p&gt;


&lt;p&gt;Review request for hbase.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Fix hbase issue number.&lt;/p&gt;


&lt;p&gt;Summary (updated)&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Versions of Gary suggestions&lt;/p&gt;


&lt;p&gt;This addresses bug hbase-3939.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/hbase-3939&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/hbase-3939&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  src/main/java/org/apache/hadoop/hbase/coprocessor/AggregateImplementation.java fce5490 &lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/coprocessor/AggregateProtocol.java 2fa4d6f &lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/coprocessor/BaseEndpointCoprocessor.java 6f88357 &lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/ipc/CoprocessorProtocol.java 6fcb771 &lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/ipc/HBaseClient.java 1365411 &lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/ipc/HBaseServer.java 4a8918a &lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/ipc/Invocation.java e60f970 &lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/ipc/ProtocolSignature.java PRE-CREATION &lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/ipc/Status.java PRE-CREATION &lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/ipc/VersionedProtocol.java fb07374 &lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/ipc/WritableRpcEngine.java 60a9248 &lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java 8de2314 &lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/master/HMaster.java 0d0e4c5 &lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java 12bd33e &lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/ipc/TestDelayedRpc.java 888f428 &lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/regionserver/TestServerCustomProtocol.java e5b6a78 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2718/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2718/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Michael&lt;/p&gt;
</comment>
                            <comment id="13144570" author="stack" created="Sat, 5 Nov 2011 04:29:45 +0000"  >&lt;p&gt;Address Gary comments over in rb.&lt;/p&gt;</comment>
                            <comment id="13144826" author="hadoopqa" created="Sat, 5 Nov 2011 20:47:12 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12502575/3939-v9.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12502575/3939-v9.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated -164 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 51 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.thrift2.TestThriftHBaseServiceHandler&lt;br/&gt;
                  org.apache.hadoop.hbase.client.TestAdmin&lt;br/&gt;
                  org.apache.hadoop.hbase.coprocessor.TestRegionServerCoprocessorExceptionWithRemove&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/188//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/188//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/188//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/188//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/188//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/188//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13145126" author="stack" created="Sun, 6 Nov 2011 21:49:58 +0000"  >&lt;p&gt;Committed branch and trunk.  Thanks to all you who helped get this in.&lt;/p&gt;</comment>
                            <comment id="13145167" author="hudson" created="Mon, 7 Nov 2011 00:16:18 +0000"  >&lt;p&gt;Integrated in HBase-0.92 #115 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.92/115/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.92/115/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3939&quot; title=&quot;Some crossports of Hadoop IPC fixes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3939&quot;&gt;&lt;del&gt;HBASE-3939&lt;/del&gt;&lt;/a&gt; Some crossports of Hadoop IPC fixes&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3939&quot; title=&quot;Some crossports of Hadoop IPC fixes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3939&quot;&gt;&lt;del&gt;HBASE-3939&lt;/del&gt;&lt;/a&gt; Some crossports of Hadoop IPC fixes&lt;/p&gt;

&lt;p&gt;stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/ipc/ProtocolSignature.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/ipc/Status.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.92/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/coprocessor/AggregateImplementation.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/coprocessor/AggregateProtocol.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/coprocessor/BaseEndpointCoprocessor.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/ipc/CoprocessorProtocol.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/ipc/HBaseClient.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/ipc/HBaseServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/ipc/Invocation.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/ipc/VersionedProtocol.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/ipc/WritableRpcEngine.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/master/HMaster.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/test/java/org/apache/hadoop/hbase/ipc/TestDelayedRpc.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/test/java/org/apache/hadoop/hbase/regionserver/TestServerCustomProtocol.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13145189" author="hudson" created="Mon, 7 Nov 2011 02:22:22 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2416 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2416/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2416/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3939&quot; title=&quot;Some crossports of Hadoop IPC fixes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3939&quot;&gt;&lt;del&gt;HBASE-3939&lt;/del&gt;&lt;/a&gt; Some crossports of Hadoop IPC fixes&lt;/p&gt;

&lt;p&gt;stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/coprocessor/AggregateImplementation.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/coprocessor/AggregateProtocol.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/coprocessor/BaseEndpointCoprocessor.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/ipc/CoprocessorProtocol.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/ipc/HBaseClient.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/ipc/HBaseServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/ipc/Invocation.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/ipc/ProtocolSignature.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/ipc/Status.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/ipc/VersionedProtocol.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/ipc/WritableRpcEngine.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/master/HMaster.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/ipc/TestDelayedRpc.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/regionserver/TestServerCustomProtocol.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13179450" author="tsuna" created="Wed, 4 Jan 2012 12:50:18 +0000"  >&lt;p&gt;On 04/Nov/11 00:07, Stack wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;So why introduce it? Just so its in place when we want to use it later?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Anyone knows the answer?&lt;/p&gt;</comment>
                            <comment id="13179551" author="stack" created="Wed, 4 Jan 2012 15:26:24 +0000"  >&lt;p&gt;@Beno&#238;t Is this a blocker for you?&lt;/p&gt;</comment>
                            <comment id="13186128" author="tsuna" created="Sat, 14 Jan 2012 07:29:24 +0000"  >&lt;p&gt;No, I&apos;m just trying to make sense of what&apos;s doing what.  I don&apos;t understand what this Status is intended for, it&apos;s just unused and wasting 4 bytes on every RPC.  The ProtocolSignature thing is also unclear to me.  It doesn&apos;t seem to be used either and also adds an extra 4 bytes per RPC.  To top things up nicely, there is also an extra 8 bytes added per RPC for the clientVersion that this is always set to zero because, as a comment in the code says, &quot;VersionedProtocol is exempted from version check&quot;.&lt;/p&gt;

&lt;p&gt;I don&apos;t understand what&apos;s the point of any of this stuff, so I thought maybe someone could shed some light on the reasons why things are the way they are.&lt;/p&gt;</comment>
                            <comment id="15017093" author="lars_francke" created="Fri, 20 Nov 2015 12:41:52 +0000"  >&lt;p&gt;This issue was closed as part of a bulk closing operation on 2015-11-20. All issues that have been resolved and where all fixVersions have been released have been closed (following discussions on the mailing list).&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12438311">HBASE-1913</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12531203">HBASE-4777</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12483075" name="3939-v2.txt" size="30850" author="yuzhihong@gmail.com" created="Sun, 19 Jun 2011 04:55:24 +0000"/>
                            <attachment id="12483092" name="3939-v3.txt" size="41213" author="yuzhihong@gmail.com" created="Sun, 19 Jun 2011 12:59:12 +0000"/>
                            <attachment id="12493937" name="3939-v4.txt" size="34448" author="yuzhihong@gmail.com" created="Sun, 11 Sep 2011 01:59:59 +0000"/>
                            <attachment id="12501870" name="3939-v5.txt" size="34448" author="stack" created="Tue, 1 Nov 2011 23:14:15 +0000"/>
                            <attachment id="12502190" name="3939-v6.txt" size="39289" author="stack" created="Thu, 3 Nov 2011 18:11:20 +0000"/>
                            <attachment id="12502230" name="3939-v7.txt" size="39024" author="stack" created="Thu, 3 Nov 2011 22:43:25 +0000"/>
                            <attachment id="12502241" name="3939-v8.txt" size="42470" author="stack" created="Fri, 4 Nov 2011 00:10:14 +0000"/>
                            <attachment id="12502575" name="3939-v9.txt" size="40768" author="stack" created="Sat, 5 Nov 2011 04:29:45 +0000"/>
                            <attachment id="12481166" name="3939.txt" size="6354" author="yuzhihong@gmail.com" created="Wed, 1 Jun 2011 23:26:38 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 1 Jun 2011 23:26:38 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>27098</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10342"><![CDATA[Incompatible change]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 2 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0holr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>101248</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>VersionedProtocol and ProtocolSignature are pulled from hadoop into HBase.</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>