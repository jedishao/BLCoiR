<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sat Dec 03 17:03:50 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-3196/HBASE-3196.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-3196] Regionserver stuck when after all IPC Server handlers fatal&apos;d</title>
                <link>https://issues.apache.org/jira/browse/HBASE-3196</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;The region server is stuck with the following jstack&lt;/p&gt;

&lt;p&gt;2010-11-03 22:23:41&lt;br/&gt;
Full thread dump Java HotSpot(TM) 64-Bit Server VM (14.0-b16 mixed mode):&lt;/p&gt;

&lt;p&gt;&quot;Attach Listener&quot; daemon prio=10 tid=0x00002aaeb6774000 nid=0x3974 waiting on condition &lt;span class=&quot;error&quot;&gt;&amp;#91;0x0000000000000000&amp;#93;&lt;/span&gt;&lt;br/&gt;
   java.lang.Thread.State: RUNNABLE&lt;/p&gt;

&lt;p&gt;&quot;RS_CLOSE_REGION-pumahbase028.snc5.facebook.com,60020,1288733355197-2&quot; prio=10 tid=0x00002aaeb8449000 nid=0x3bbc waiting on condition &lt;span class=&quot;error&quot;&gt;&amp;#91;0x0000000043f67000&amp;#93;&lt;/span&gt;&lt;br/&gt;
   java.lang.Thread.State: WAITING (parking)&lt;br/&gt;
        at sun.misc.Unsafe.park(Native Method)&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;parking to wait for  &amp;lt;0x00002aaab7fd1130&amp;gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)&lt;br/&gt;
        at java.util.concurrent.locks.LockSupport.park(LockSupport.java:158)&lt;br/&gt;
        at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1925)&lt;br/&gt;
        at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:358)&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:947)&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907)&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:619)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&quot;RS_CLOSE_REGION-pumahbase028.snc5.facebook.com,60020,1288733355197-1&quot; prio=10 tid=0x00002aaeb843f800 nid=0x3bbb waiting on condition &lt;span class=&quot;error&quot;&gt;&amp;#91;0x0000000043e66000&amp;#93;&lt;/span&gt;&lt;br/&gt;
   java.lang.Thread.State: WAITING (parking)&lt;br/&gt;
        at sun.misc.Unsafe.park(Native Method)&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;parking to wait for  &amp;lt;0x00002aaab7fd1130&amp;gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)&lt;br/&gt;
        at java.util.concurrent.locks.LockSupport.park(LockSupport.java:158)&lt;br/&gt;
        at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1925)&lt;br/&gt;
        at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:358)&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:947)&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907)&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:619)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&quot;RS_CLOSE_REGION-pumahbase028.snc5.facebook.com,60020,1288733355197-0&quot; prio=10 tid=0x00002aaeb8447800 nid=0x3bba waiting on condition &lt;span class=&quot;error&quot;&gt;&amp;#91;0x0000000044068000&amp;#93;&lt;/span&gt;&lt;br/&gt;
   java.lang.Thread.State: WAITING (parking)&lt;br/&gt;
        at sun.misc.Unsafe.park(Native Method)&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;parking to wait for  &amp;lt;0x00002aaab7fd1130&amp;gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)&lt;br/&gt;
        at java.util.concurrent.locks.LockSupport.park(LockSupport.java:158)&lt;br/&gt;
        at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1925)&lt;br/&gt;
        at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:358)&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:947)&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907)&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:619)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&quot;RMI Scheduler(0)&quot; daemon prio=10 tid=0x00002aaeb48c4800 nid=0x1c97 waiting on condition &lt;span class=&quot;error&quot;&gt;&amp;#91;0x00000000580a7000&amp;#93;&lt;/span&gt;&lt;br/&gt;
   java.lang.Thread.State: TIMED_WAITING (parking)&lt;br/&gt;
        at sun.misc.Unsafe.park(Native Method)&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;parking to wait for  &amp;lt;0x00002aaab773a118&amp;gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)&lt;br/&gt;
        at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:198)&lt;br/&gt;
        at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:1963)&lt;br/&gt;
        at java.util.concurrent.DelayQueue.take(DelayQueue.java:164)&lt;br/&gt;
        at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:583)&lt;br/&gt;
        at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:576)&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:947)&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907)&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:619)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&quot;RS_OPEN_REGION-pumahbase028.snc5.facebook.com,60020,1288733355197-2&quot; daemon prio=10 tid=0x00002aaeb4804800 nid=0x17a0 waiting on condition &lt;span class=&quot;error&quot;&gt;&amp;#91;0x00000000582a9000&amp;#93;&lt;/span&gt;&lt;br/&gt;
   java.lang.Thread.State: WAITING (parking)&lt;br/&gt;
        at sun.misc.Unsafe.park(Native Method)&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;parking to wait for  &amp;lt;0x00002aaab7fca538&amp;gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)&lt;br/&gt;
        at java.util.concurrent.locks.LockSupport.park(LockSupport.java:158)&lt;br/&gt;
        at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1925)&lt;br/&gt;
        at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:358)&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:947)&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907)&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:619)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&quot;RS_OPEN_REGION-pumahbase028.snc5.facebook.com,60020,1288733355197-1&quot; daemon prio=10 tid=0x00002aaeb490a000 nid=0x179f waiting on condition &lt;span class=&quot;error&quot;&gt;&amp;#91;0x000000004345c000&amp;#93;&lt;/span&gt;&lt;br/&gt;
   java.lang.Thread.State: WAITING (parking)&lt;br/&gt;
        at sun.misc.Unsafe.park(Native Method)&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;parking to wait for  &amp;lt;0x00002aaab7fca538&amp;gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)&lt;br/&gt;
        at java.util.concurrent.locks.LockSupport.park(LockSupport.java:158)&lt;br/&gt;
        at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1925)&lt;br/&gt;
        at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:358)&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:947)&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907)&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:619)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&quot;RS_OPEN_REGION-pumahbase028.snc5.facebook.com,60020,1288733355197-0&quot; daemon prio=10 tid=0x00002aaeb4909000 nid=0x179e waiting on condition &lt;span class=&quot;error&quot;&gt;&amp;#91;0x000000004335b000&amp;#93;&lt;/span&gt;&lt;br/&gt;
   java.lang.Thread.State: WAITING (parking)&lt;br/&gt;
        at sun.misc.Unsafe.park(Native Method)&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;parking to wait for  &amp;lt;0x00002aaab7fca538&amp;gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)&lt;br/&gt;
        at java.util.concurrent.locks.LockSupport.park(LockSupport.java:158)&lt;br/&gt;
        at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1925)&lt;br/&gt;
        at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:358)&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:947)&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907)&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:619)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&quot;LruBlockCache.EvictionThread&quot; daemon prio=10 tid=0x00002aaeb889b000 nid=0x1767 in Object.wait() &lt;span class=&quot;error&quot;&gt;&amp;#91;0x0000000057ea5000&amp;#93;&lt;/span&gt;&lt;br/&gt;
   java.lang.Thread.State: WAITING (on object monitor)&lt;br/&gt;
        at java.lang.Object.wait(Native Method)&lt;br/&gt;
        at java.lang.Object.wait(Object.java:485)&lt;br/&gt;
        at org.apache.hadoop.hbase.io.hfile.LruBlockCache$EvictionThread.run(LruBlockCache.java:514)&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;locked &amp;lt;0x00002aaab7fdb728&amp;gt; (a org.apache.hadoop.hbase.io.hfile.LruBlockCache$EvictionThread)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&quot;Timer thread for monitoring jvm&quot; daemon prio=10 tid=0x00002aaebc0a5000 nid=0x1620 in Object.wait() &lt;span class=&quot;error&quot;&gt;&amp;#91;0x0000000043c64000&amp;#93;&lt;/span&gt;&lt;br/&gt;
   java.lang.Thread.State: TIMED_WAITING (on object monitor)&lt;br/&gt;
        at java.lang.Object.wait(Native Method)&lt;br/&gt;
        at java.util.TimerThread.mainLoop(Timer.java:509)&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;locked &amp;lt;0x00002aaab7e89c38&amp;gt; (a java.util.TaskQueue)&lt;br/&gt;
        at java.util.TimerThread.run(Timer.java:462)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&quot;Timer thread for monitoring hbase&quot; daemon prio=10 tid=0x00002aaebc0a3800 nid=0x161f in Object.wait() &lt;span class=&quot;error&quot;&gt;&amp;#91;0x0000000043b63000&amp;#93;&lt;/span&gt;&lt;br/&gt;
   java.lang.Thread.State: TIMED_WAITING (on object monitor)&lt;br/&gt;
        at java.lang.Object.wait(Native Method)&lt;br/&gt;
        at java.util.TimerThread.mainLoop(Timer.java:509)&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;locked &amp;lt;0x00002aaab7fe95d8&amp;gt; (a java.util.TaskQueue)&lt;br/&gt;
        at java.util.TimerThread.run(Timer.java:462)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&quot;DestroyJavaVM&quot; prio=10 tid=0x00002aaebc092000 nid=0x15ce waiting on condition &lt;span class=&quot;error&quot;&gt;&amp;#91;0x0000000000000000&amp;#93;&lt;/span&gt;&lt;br/&gt;
   java.lang.Thread.State: RUNNABLE&lt;/p&gt;

&lt;p&gt;&quot;regionserver60020-EventThread&quot; daemon prio=10 tid=0x00002aaeb5276800 nid=0x1606 waiting on condition &lt;span class=&quot;error&quot;&gt;&amp;#91;0x000000004325a000&amp;#93;&lt;/span&gt;&lt;br/&gt;
   java.lang.Thread.State: WAITING (parking)&lt;br/&gt;
        at sun.misc.Unsafe.park(Native Method)&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;parking to wait for  &amp;lt;0x00002aaab6bf6bb8&amp;gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)&lt;br/&gt;
        at java.util.concurrent.locks.LockSupport.park(LockSupport.java:158)&lt;br/&gt;
        at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1925)&lt;br/&gt;
        at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:358)&lt;br/&gt;
        at org.apache.zookeeper.ClientCnxn$EventThread.run(ClientCnxn.java:477)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&quot;regionserver60020-SendThread(pumahbasectrl001.snc5.facebook.com:2181)&quot; daemon prio=10 tid=0x00002aaeb5275800 nid=0x1605 runnable &lt;span class=&quot;error&quot;&gt;&amp;#91;0x0000000043159000&amp;#93;&lt;/span&gt;&lt;br/&gt;
   java.lang.Thread.State: RUNNABLE&lt;br/&gt;
        at sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)&lt;br/&gt;
        at sun.nio.ch.EPollArrayWrapper.poll(EPollArrayWrapper.java:215)&lt;br/&gt;
        at sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:65)&lt;br/&gt;
        at sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:69)&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;locked &amp;lt;0x00002aaab6c02078&amp;gt; (a sun.nio.ch.Util$1)&lt;/li&gt;
	&lt;li&gt;locked &amp;lt;0x00002aaab6c02090&amp;gt; (a java.util.Collections$UnmodifiableSet)&lt;/li&gt;
	&lt;li&gt;locked &amp;lt;0x00002aaab66713d0&amp;gt; (a sun.nio.ch.EPollSelectorImpl)&lt;br/&gt;
        at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:80)&lt;br/&gt;
        at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1066)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&quot;regionserver60020&quot; prio=10 tid=0x00002aaeb858c800 nid=0x1604 waiting on condition &lt;span class=&quot;error&quot;&gt;&amp;#91;0x0000000043058000&amp;#93;&lt;/span&gt;&lt;br/&gt;
   java.lang.Thread.State: TIMED_WAITING (sleeping)&lt;br/&gt;
        at java.lang.Thread.sleep(Native Method)&lt;br/&gt;
        at org.apache.hadoop.hbase.util.Threads.sleep(Threads.java:126)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HRegionServer.waitOnAllRegionsToClose(HRegionServer.java:645)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HRegionServer.run(HRegionServer.java:611)&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:619)&lt;/p&gt;

&lt;p&gt;&quot;Timer thread for monitoring rpc&quot; daemon prio=10 tid=0x00002aaeb8583000 nid=0x1602 in Object.wait() &lt;span class=&quot;error&quot;&gt;&amp;#91;0x0000000042f57000&amp;#93;&lt;/span&gt;&lt;br/&gt;
   java.lang.Thread.State: TIMED_WAITING (on object monitor)&lt;br/&gt;
        at java.lang.Object.wait(Native Method)&lt;br/&gt;
        at java.util.TimerThread.mainLoop(Timer.java:509)&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;locked &amp;lt;0x00002aaab6be7038&amp;gt; (a java.util.TaskQueue)&lt;br/&gt;
        at java.util.TimerThread.run(Timer.java:462)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&quot;main-EventThread&quot; daemon prio=10 tid=0x00002aaeb842d000 nid=0x15f7 waiting on condition &lt;span class=&quot;error&quot;&gt;&amp;#91;0x000000004244c000&amp;#93;&lt;/span&gt;&lt;br/&gt;
   java.lang.Thread.State: WAITING (parking)&lt;br/&gt;
        at sun.misc.Unsafe.park(Native Method)&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;parking to wait for  &amp;lt;0x00002aaab6bc0720&amp;gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)&lt;br/&gt;
        at java.util.concurrent.locks.LockSupport.park(LockSupport.java:158)&lt;br/&gt;
        at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1925)&lt;br/&gt;
        at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:358)&lt;br/&gt;
        at org.apache.zookeeper.ClientCnxn$EventThread.run(ClientCnxn.java:477)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&quot;main-SendThread(pumahbasectrl062.snc5.facebook.com:2181)&quot; daemon prio=10 tid=0x00002aaeb8451800 nid=0x15f6 runnable &lt;span class=&quot;error&quot;&gt;&amp;#91;0x000000004234b000&amp;#93;&lt;/span&gt;&lt;br/&gt;
   java.lang.Thread.State: RUNNABLE&lt;br/&gt;
        at sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)&lt;br/&gt;
        at sun.nio.ch.EPollArrayWrapper.poll(EPollArrayWrapper.java:215)&lt;br/&gt;
        at sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:65)&lt;br/&gt;
        at sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:69)&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;locked &amp;lt;0x00002aaab6bb08f0&amp;gt; (a sun.nio.ch.Util$1)&lt;/li&gt;
	&lt;li&gt;locked &amp;lt;0x00002aaab6bb0908&amp;gt; (a java.util.Collections$UnmodifiableSet)&lt;/li&gt;
	&lt;li&gt;locked &amp;lt;0x00002aaab764df90&amp;gt; (a sun.nio.ch.EPollSelectorImpl)&lt;br/&gt;
        at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:80)&lt;br/&gt;
        at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1066)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&quot;RMI TCP Accept-0&quot; daemon prio=10 tid=0x00002aaeb83b9800 nid=0x15f2 runnable &lt;span class=&quot;error&quot;&gt;&amp;#91;0x0000000042149000&amp;#93;&lt;/span&gt;&lt;br/&gt;
   java.lang.Thread.State: RUNNABLE&lt;br/&gt;
        at java.net.PlainSocketImpl.socketAccept(Native Method)&lt;br/&gt;
        at java.net.PlainSocketImpl.accept(PlainSocketImpl.java:390)&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;locked &amp;lt;0x00002aaab6b935e8&amp;gt; (a java.net.SocksSocketImpl)&lt;br/&gt;
        at java.net.ServerSocket.implAccept(ServerSocket.java:453)&lt;br/&gt;
        at java.net.ServerSocket.accept(ServerSocket.java:421)&lt;br/&gt;
        at sun.management.jmxremote.LocalRMIServerSocketFactory$1.accept(LocalRMIServerSocketFactory.java:34)&lt;br/&gt;
        at sun.rmi.transport.tcp.TCPTransport$AcceptLoop.executeAcceptLoop(TCPTransport.java:369)&lt;br/&gt;
        at sun.rmi.transport.tcp.TCPTransport$AcceptLoop.run(TCPTransport.java:341)&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:619)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&quot;RMI TCP Accept-8091&quot; daemon prio=10 tid=0x00002aaeb83b3000 nid=0x15f1 runnable &lt;span class=&quot;error&quot;&gt;&amp;#91;0x0000000042048000&amp;#93;&lt;/span&gt;&lt;br/&gt;
   java.lang.Thread.State: RUNNABLE&lt;br/&gt;
        at java.net.PlainSocketImpl.socketAccept(Native Method)&lt;br/&gt;
        at java.net.PlainSocketImpl.accept(PlainSocketImpl.java:390)&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;locked &amp;lt;0x00002aaab7659d50&amp;gt; (a java.net.SocksSocketImpl)&lt;br/&gt;
        at java.net.ServerSocket.implAccept(ServerSocket.java:453)&lt;br/&gt;
        at java.net.ServerSocket.accept(ServerSocket.java:421)&lt;br/&gt;
        at sun.rmi.transport.tcp.TCPTransport$AcceptLoop.executeAcceptLoop(TCPTransport.java:369)&lt;br/&gt;
        at sun.rmi.transport.tcp.TCPTransport$AcceptLoop.run(TCPTransport.java:341)&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:619)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&quot;RMI TCP Accept-0&quot; daemon prio=10 tid=0x00002aaeb83a0000 nid=0x15f0 runnable &lt;span class=&quot;error&quot;&gt;&amp;#91;0x0000000041f47000&amp;#93;&lt;/span&gt;&lt;br/&gt;
   java.lang.Thread.State: RUNNABLE&lt;br/&gt;
        at java.net.PlainSocketImpl.socketAccept(Native Method)&lt;br/&gt;
        at java.net.PlainSocketImpl.accept(PlainSocketImpl.java:390)&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;locked &amp;lt;0x00002aaab765c140&amp;gt; (a java.net.SocksSocketImpl)&lt;br/&gt;
        at java.net.ServerSocket.implAccept(ServerSocket.java:453)&lt;br/&gt;
        at java.net.ServerSocket.accept(ServerSocket.java:421)&lt;br/&gt;
        at sun.rmi.transport.tcp.TCPTransport$AcceptLoop.executeAcceptLoop(TCPTransport.java:369)&lt;br/&gt;
        at sun.rmi.transport.tcp.TCPTransport$AcceptLoop.run(TCPTransport.java:341)&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:619)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&quot;Low Memory Detector&quot; daemon prio=10 tid=0x00002aaeb8016000 nid=0x15eb runnable &lt;span class=&quot;error&quot;&gt;&amp;#91;0x0000000000000000&amp;#93;&lt;/span&gt;&lt;br/&gt;
   java.lang.Thread.State: RUNNABLE&lt;/p&gt;

&lt;p&gt;&quot;CompilerThread1&quot; daemon prio=10 tid=0x00002aaeb8013800 nid=0x15ea waiting on condition &lt;span class=&quot;error&quot;&gt;&amp;#91;0x0000000000000000&amp;#93;&lt;/span&gt;&lt;br/&gt;
   java.lang.Thread.State: RUNNABLE&lt;/p&gt;

&lt;p&gt;&quot;CompilerThread0&quot; daemon prio=10 tid=0x00002aaeb8011800 nid=0x15e9 waiting on condition &lt;span class=&quot;error&quot;&gt;&amp;#91;0x0000000000000000&amp;#93;&lt;/span&gt;&lt;br/&gt;
   java.lang.Thread.State: RUNNABLE&lt;/p&gt;

&lt;p&gt;&quot;JDWP Event Helper Thread&quot; daemon prio=10 tid=0x00002aaeb800f800 nid=0x15e8 runnable &lt;span class=&quot;error&quot;&gt;&amp;#91;0x0000000000000000&amp;#93;&lt;/span&gt;&lt;br/&gt;
   java.lang.Thread.State: RUNNABLE&lt;/p&gt;

&lt;p&gt;&quot;JDWP Transport Listener: dt_socket&quot; daemon prio=10 tid=0x00002aaeb800c000 nid=0x15e7 runnable &lt;span class=&quot;error&quot;&gt;&amp;#91;0x0000000000000000&amp;#93;&lt;/span&gt;&lt;br/&gt;
   java.lang.Thread.State: RUNNABLE&lt;/p&gt;

&lt;p&gt;&quot;Signal Dispatcher&quot; daemon prio=10 tid=0x00002aaeb45d4800 nid=0x15e6 runnable &lt;span class=&quot;error&quot;&gt;&amp;#91;0x0000000000000000&amp;#93;&lt;/span&gt;&lt;br/&gt;
   java.lang.Thread.State: RUNNABLE&lt;/p&gt;

&lt;p&gt;&quot;Surrogate Locker Thread (CMS)&quot; daemon prio=10 tid=0x00002aaeb45d2800 nid=0x15e5 waiting on condition &lt;span class=&quot;error&quot;&gt;&amp;#91;0x0000000000000000&amp;#93;&lt;/span&gt;&lt;br/&gt;
   java.lang.Thread.State: RUNNABLE&lt;/p&gt;

&lt;p&gt;&quot;Finalizer&quot; daemon prio=10 tid=0x00002aaeb440b000 nid=0x15e3 in Object.wait() &lt;span class=&quot;error&quot;&gt;&amp;#91;0x000000004173f000&amp;#93;&lt;/span&gt;&lt;br/&gt;
   java.lang.Thread.State: WAITING (on object monitor)&lt;br/&gt;
        at java.lang.Object.wait(Native Method)&lt;br/&gt;
        at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:118)&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;locked &amp;lt;0x00002aaab6663ac0&amp;gt; (a java.lang.ref.ReferenceQueue$Lock)&lt;br/&gt;
        at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:134)&lt;br/&gt;
        at java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:159)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&quot;Reference Handler&quot; daemon prio=10 tid=0x00002aaeb4409000 nid=0x15e2 in Object.wait() &lt;span class=&quot;error&quot;&gt;&amp;#91;0x000000004163e000&amp;#93;&lt;/span&gt;&lt;br/&gt;
   java.lang.Thread.State: WAITING (on object monitor)&lt;br/&gt;
        at java.lang.Object.wait(Native Method)&lt;br/&gt;
        at java.lang.Object.wait(Object.java:485)&lt;br/&gt;
        at java.lang.ref.Reference$ReferenceHandler.run(Reference.java:116)&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;locked &amp;lt;0x00002aaab6c01940&amp;gt; (a java.lang.ref.Reference$Lock)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&quot;VM Thread&quot; prio=10 tid=0x00002aaeb4402000 nid=0x15e1 runnable&lt;/p&gt;

&lt;p&gt;&quot;Gang worker#0 (Parallel GC Threads)&quot; prio=10 tid=0x000000004011e800 nid=0x15cf runnable&lt;/p&gt;

&lt;p&gt;&quot;Gang worker#1 (Parallel GC Threads)&quot; prio=10 tid=0x0000000040120800 nid=0x15d0 runnable&lt;/p&gt;

&lt;p&gt;&quot;Gang worker#2 (Parallel GC Threads)&quot; prio=10 tid=0x0000000040122000 nid=0x15d1 runnable&lt;/p&gt;

&lt;p&gt;&quot;Gang worker#3 (Parallel GC Threads)&quot; prio=10 tid=0x0000000040124000 nid=0x15d2 runnable&lt;/p&gt;

&lt;p&gt;&quot;Gang worker#4 (Parallel GC Threads)&quot; prio=10 tid=0x0000000040126000 nid=0x15d3 runnable&lt;/p&gt;

&lt;p&gt;&quot;Gang worker#5 (Parallel GC Threads)&quot; prio=10 tid=0x0000000040127800 nid=0x15d4 runnable&lt;/p&gt;

&lt;p&gt;&quot;Gang worker#6 (Parallel GC Threads)&quot; prio=10 tid=0x0000000040129800 nid=0x15d5 runnable&lt;/p&gt;

&lt;p&gt;&quot;Gang worker#7 (Parallel GC Threads)&quot; prio=10 tid=0x00002aaab2526800 nid=0x15d6 runnable&lt;/p&gt;

&lt;p&gt;&quot;Gang worker#8 (Parallel GC Threads)&quot; prio=10 tid=0x00002aaab2528000 nid=0x15d7 runnable&lt;/p&gt;

&lt;p&gt;&quot;Gang worker#9 (Parallel GC Threads)&quot; prio=10 tid=0x00002aaab252a000 nid=0x15d8 runnable&lt;/p&gt;

&lt;p&gt;&quot;Gang worker#10 (Parallel GC Threads)&quot; prio=10 tid=0x00002aaab252c000 nid=0x15d9 runnable&lt;/p&gt;

&lt;p&gt;&quot;Gang worker#11 (Parallel GC Threads)&quot; prio=10 tid=0x00002aaab252d800 nid=0x15da runnable&lt;/p&gt;

&lt;p&gt;&quot;Gang worker#12 (Parallel GC Threads)&quot; prio=10 tid=0x00002aaab252f800 nid=0x15db runnable&lt;/p&gt;

&lt;p&gt;&quot;Concurrent Mark-Sweep GC Thread&quot; prio=10 tid=0x00002aaea3b8f000 nid=0x15e0 runnable&lt;br/&gt;
&quot;Gang worker#0 (Parallel CMS Threads)&quot; prio=10 tid=0x00002aaea3a7e800 nid=0x15dc runnable&lt;/p&gt;

&lt;p&gt;&quot;Gang worker#1 (Parallel CMS Threads)&quot; prio=10 tid=0x00002aaea3a80000 nid=0x15dd runnable&lt;/p&gt;

&lt;p&gt;&quot;Gang worker#2 (Parallel CMS Threads)&quot; prio=10 tid=0x00002aaea3acb800 nid=0x15de runnable&lt;/p&gt;

&lt;p&gt;&quot;Gang worker#3 (Parallel CMS Threads)&quot; prio=10 tid=0x00002aaea3acd000 nid=0x15df runnable&lt;/p&gt;

&lt;p&gt;&quot;VM Periodic Task Thread&quot; prio=10 tid=0x00002aaeb83bc800 nid=0x15f3 waiting on condition&lt;/p&gt;

&lt;p&gt;JNI global references: 4205&lt;/p&gt;

&lt;p&gt;===&lt;/p&gt;

&lt;p&gt;In the RS logs all the IPC Server handlers have died because HDFS failure to write to the log.&lt;/p&gt;

&lt;p&gt;First failure to append to the logs&lt;br/&gt;
2010-11-02 17:05:58,620 WARN org.apache.hadoop.hdfs.DFSClient: Packet 243111 &lt;span class=&quot;error&quot;&gt;&amp;#91;offsetInBlock=241298432 pktLen=2173&amp;#93;&lt;/span&gt; of blk_-4978761844464053668_783579 is timed out&lt;br/&gt;
2010-11-02 17:05:58,623 WARN org.apache.hadoop.hdfs.DFSClient: Error Recovery for block blk_-4978761844464053668_783579 bad datanode&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; 10.38.47.49:50010&lt;br/&gt;
2010-11-02 17:05:58,623 WARN org.apache.hadoop.hdfs.DFSClient: Error Recovery for block blk_-4978761844464053668_783579 in pipeline 10.38.15.45:50010, 10.38.47.59:50010, 10.38.47.49:50010: bad datanode 10.38.47.49:50010&lt;br/&gt;
2010-11-02 17:05:58,755 WARN org.apache.hadoop.hdfs.DFSClient: Failed recovery attempt #0 from primary datanode 10.38.15.45:50010&lt;br/&gt;
org.apache.hadoop.ipc.RPC$VersionMismatch: Protocol org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol version mismatch. (client = 5, server = 3)&lt;br/&gt;
        at org.apache.hadoop.ipc.RPC.getProxy(RPC.java:452)&lt;br/&gt;
        at org.apache.hadoop.hdfs.DFSClient.createClientDatanodeProtocolProxy(DFSClient.java:194)&lt;br/&gt;
        at org.apache.hadoop.hdfs.DFSClient$DFSOutputStream.processDatanodeError(DFSClient.java:3027)&lt;br/&gt;
        at org.apache.hadoop.hdfs.DFSClient$DFSOutputStream.access$1800(DFSClient.java:2467)&lt;br/&gt;
        at org.apache.hadoop.hdfs.DFSClient$DFSOutputStream$DataStreamer.run(DFSClient.java:2687)&lt;br/&gt;
...&lt;br/&gt;
2010-11-02 17:11:09,667 WARN org.apache.hadoop.hdfs.DFSClient: Failed recovery attempt #0 from primary datanode 10.38.47.49:50010&lt;br/&gt;
java.net.SocketTimeoutException: Call to /10.38.47.49:50020 failed on socket timeout exception: java.net.SocketTimeoutException: 300000 millis timeout while waiting for channel to be ready for read. ch : java.nio.channels.SocketChannel&lt;span class=&quot;error&quot;&gt;&amp;#91;connected local=/10.38.15.45:56492 remote=/10.38.47.49:50020&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.hadoop.ipc.Client.wrapException(Client.java:855)&lt;br/&gt;
        at org.apache.hadoop.ipc.Client.call(Client.java:827)&lt;br/&gt;
        at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:222)&lt;br/&gt;
        at $Proxy3.getProtocolVersion(Unknown Source)&lt;br/&gt;
        at org.apache.hadoop.ipc.RPC.getProxy(RPC.java:447)&lt;br/&gt;
        at org.apache.hadoop.hdfs.DFSClient.createClientDatanodeProtocolProxy(DFSClient.java:194)&lt;br/&gt;
        at org.apache.hadoop.hdfs.DFSClient$DFSOutputStream.processDatanodeError(DFSClient.java:3027)&lt;br/&gt;
        at org.apache.hadoop.hdfs.DFSClient$DFSOutputStream.access$1800(DFSClient.java:2467)&lt;br/&gt;
        at org.apache.hadoop.hdfs.DFSClient$DFSOutputStream$DataStreamer.run(DFSClient.java:2687)&lt;br/&gt;
Caused by: java.net.SocketTimeoutException: 300000 millis timeout while waiting for channel to be ready for read. ch : java.nio.channels.SocketChannel&lt;span class=&quot;error&quot;&gt;&amp;#91;connected local=/10.38.15.45:56492 remote=/10.38.47.49:50020&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.hadoop.net.SocketIOWithTimeout.doIO(SocketIOWithTimeout.java:164)&lt;br/&gt;
        at org.apache.hadoop.net.SocketInputStream.read(SocketInputStream.java:155)&lt;br/&gt;
        at org.apache.hadoop.net.SocketInputStream.read(SocketInputStream.java:128)&lt;br/&gt;
        at java.io.FilterInputStream.read(FilterInputStream.java:116)&lt;br/&gt;
        at org.apache.hadoop.ipc.Client$Connection$PingInputStream.read(Client.java:325)&lt;br/&gt;
        at java.io.BufferedInputStream.fill(BufferedInputStream.java:218)&lt;br/&gt;
        at java.io.BufferedInputStream.read(BufferedInputStream.java:237)&lt;br/&gt;
        at java.io.DataInputStream.readInt(DataInputStream.java:370)&lt;br/&gt;
        at org.apache.hadoop.ipc.Client$Connection.receiveResponse(Client.java:572)&lt;br/&gt;
        at org.apache.hadoop.ipc.Client$Connection.run(Client.java:500)&lt;br/&gt;
2010-11-02 17:11:09,669 WARN org.apache.hadoop.hdfs.DFSClient: Error Recovery for block blk_-4978761844464053668_783579 file /PUMAHBASE001-SNC5-HBASE/.logs/pumahbase028.snc5.facebook.com,60020,1288733355197/10.38.15.45%3A60020.1288742259683 failed  because recovery from primary datanode 10.38.47.49:50010 failed 1 times.  Pipeline was 10.38.47.59:50010, 10.38.47.49:50010. Will retry...&lt;/p&gt;

&lt;p&gt;Error recovery fails.&lt;br/&gt;
2010-11-02 17:36:20,919 FATAL org.apache.hadoop.hbase.regionserver.wal.HLog: Could not append. Requesting close of hlog&lt;br/&gt;
java.io.IOException: Reflection&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.wal.SequenceFileLogWriter.sync(SequenceFileLogWriter.java:147)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.wal.HLog.hflush(HLog.java:1042)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.wal.HLog$LogSyncer.run(HLog.java:966)&lt;br/&gt;
Caused by: java.lang.reflect.InvocationTargetException&lt;br/&gt;
        at sun.reflect.GeneratedMethodAccessor22.invoke(Unknown Source)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.wal.SequenceFileLogWriter.sync(SequenceFileLogWriter.java:145)&lt;br/&gt;
        ... 2 more&lt;br/&gt;
Caused by: java.io.IOException: Error Recovery for block blk_-4978761844464053668_783579 file /PUMAHBASE001-SNC5-HBASE/.logs/pumahbase028.snc5.facebook.com,60020,1288733355197/10.38.15.45%3A60020.1288742259683 failed  because recovery from primary datanode 10.38.47.59:50010 failed 6 times.  Pipeline was 10.38.47.59:50010. Aborting...&lt;br/&gt;
        at org.apache.hadoop.hdfs.DFSClient$DFSOutputStream.processDatanodeError(DFSClient.java:3065)&lt;br/&gt;
        at org.apache.hadoop.hdfs.DFSClient$DFSOutputStream.access$1800(DFSClient.java:2467)&lt;br/&gt;
        at org.apache.hadoop.hdfs.DFSClient$DFSOutputStream$DataStreamer.run(DFSClient.java:2687)&lt;/p&gt;


&lt;p&gt;Regions start getting aborted  because hlog close fails because filesystem is not available&lt;/p&gt;


&lt;p&gt;2010-11-02 17:36:24,055 FATAL org.apache.hadoop.hbase.regionserver.HRegionServer: ABORTING region server serverName=pumahbase028.snc5.facebook.com,60020,1288733355197, load=(requests=492, regions=55, usedHeap=3376, maxHeap=15993): File System not available&lt;br/&gt;
java.io.IOException: File system is not available&lt;br/&gt;
        at org.apache.hadoop.hbase.util.FSUtils.checkFileSystemAvailable(FSUtils.java:130)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HRegionServer.checkFileSystem(HRegionServer.java:949)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HRegionServer.increment(HRegionServer.java:2312)&lt;br/&gt;
        at sun.reflect.GeneratedMethodAccessor21.invoke(Unknown Source)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
        at org.apache.hadoop.hbase.ipc.HBaseRPC$Server.call(HBaseRPC.java:561)&lt;br/&gt;
        at org.apache.hadoop.hbase.ipc.HBaseServer$Handler.run(HBaseServer.java:1025)&lt;br/&gt;
Caused by: java.io.IOException: Filesystem closed&lt;br/&gt;
        at org.apache.hadoop.hdfs.DFSClient.checkOpen(DFSClient.java:282)&lt;br/&gt;
        at org.apache.hadoop.hdfs.DFSClient.getFileInfo(DFSClient.java:875)&lt;br/&gt;
        at org.apache.hadoop.hdfs.DistributedFileSystem.getFileStatus(DistributedFileSystem.java:484)&lt;br/&gt;
        at org.apache.hadoop.fs.FileSystem.exists(FileSystem.java:766)&lt;br/&gt;
        at org.apache.hadoop.hbase.util.FSUtils.checkFileSystemAvailable(FSUtils.java:119)&lt;br/&gt;
        ... 7 more&lt;/p&gt;

&lt;p&gt;All the IPC Server handlers exit&lt;/p&gt;

&lt;p&gt;2010-11-02 17:36:24,097 WARN org.apache.hadoop.ipc.HBaseServer: IPC Server Responder, call increment([B@aa32978, row=b4da93229cfc2cfb7d731f46da44f108info.compartilo1.59624 lfi 450313269132, families={(family=COUNTERS_0, columns={&lt;ins&gt;=1, a13g1&lt;/ins&gt;=1, cCL+=1, les_LA+=1}), (family=COUNTERS_3600, columns={7ffa89a0+=1}}) from 10.38.15.37:49593: output error&lt;br/&gt;
2010-11-02 17:36:24,094 FATAL org.apache.hadoop.hbase.regionserver.wal.HLog: Could not append. Requesting close of hlog&lt;br/&gt;
java.io.IOException: Filesystem closed&lt;br/&gt;
        at org.apache.hadoop.hdfs.DFSClient.checkOpen(DFSClient.java:282)&lt;br/&gt;
        at org.apache.hadoop.hdfs.DFSClient.access$800(DFSClient.java:71)&lt;br/&gt;
        at org.apache.hadoop.hdfs.DFSClient$DFSOutputStream.writeChunk(DFSClient.java:3465)&lt;br/&gt;
        at org.apache.hadoop.fs.FSOutputSummer.writeChecksumChunk(FSOutputSummer.java:150)&lt;br/&gt;
        at org.apache.hadoop.fs.FSOutputSummer.flushBuffer(FSOutputSummer.java:132)&lt;br/&gt;
        at org.apache.hadoop.fs.FSOutputSummer.flushBuffer(FSOutputSummer.java:121)&lt;br/&gt;
        at org.apache.hadoop.fs.FSOutputSummer.write1(FSOutputSummer.java:112)&lt;br/&gt;
        at org.apache.hadoop.fs.FSOutputSummer.write(FSOutputSummer.java:86)&lt;br/&gt;
        at org.apache.hadoop.fs.FSDataOutputStream$PositionCache.write(FSDataOutputStream.java:49)&lt;br/&gt;
        at java.io.DataOutputStream.write(DataOutputStream.java:90)&lt;br/&gt;
        at org.apache.hadoop.io.SequenceFile$Writer.append(SequenceFile.java:1073)&lt;br/&gt;
        at org.apache.hadoop.io.SequenceFile$Writer.append(SequenceFile.java:1037)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.wal.SequenceFileLogWriter.append(SequenceFileLogWriter.java:133)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.wal.HLog.doWrite(HLog.java:1129)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.wal.HLog.append(HLog.java:914)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HRegion.increment(HRegion.java:3038)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HRegionServer.increment(HRegionServer.java:2309)&lt;br/&gt;
        at sun.reflect.GeneratedMethodAccessor21.invoke(Unknown Source)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
        at org.apache.hadoop.hbase.ipc.HBaseRPC$Server.call(HBaseRPC.java:561)&lt;br/&gt;
        at org.apache.hadoop.hbase.ipc.HBaseServer$Handler.run(HBaseServer.java:1025)&lt;br/&gt;
2010-11-02 17:36:24,108 WARN org.apache.hadoop.ipc.HBaseServer: IPC Server handler 69 on 60020 caught: java.nio.channels.ClosedChannelException&lt;br/&gt;
        at sun.nio.ch.SocketChannelImpl.ensureWriteOpen(SocketChannelImpl.java:126)&lt;br/&gt;
        at sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:324)&lt;br/&gt;
        at org.apache.hadoop.hbase.ipc.HBaseServer.channelWrite(HBaseServer.java:1282)&lt;br/&gt;
        at org.apache.hadoop.hbase.ipc.HBaseServer$Responder.processResponse(HBaseServer.java:713)&lt;br/&gt;
        at org.apache.hadoop.hbase.ipc.HBaseServer$Responder.doRespond(HBaseServer.java:778)&lt;br/&gt;
        at org.apache.hadoop.hbase.ipc.HBaseServer$Handler.run(HBaseServer.java:1053)&lt;/p&gt;

&lt;p&gt;2010-11-02 17:36:24,113 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server handler 69 on 60020: exiting&lt;/p&gt;

&lt;p&gt;===&lt;/p&gt;

&lt;p&gt;If all the IPC Server handlers exit for whatever reason then the Region Server should cleanly exit. I think my clients are getting stuck in locateRegionInMeta() because of this stuck region server.&lt;/p&gt;

&lt;p&gt;===&lt;/p&gt;


</description>
                <environment></environment>
        <key id="12479065">HBASE-3196</key>
            <summary>Regionserver stuck when after all IPC Server handlers fatal&apos;d</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="streamy">Jonathan Gray</assignee>
                                    <reporter username="khemani">Prakash Khemani</reporter>
                        <labels>
                    </labels>
                <created>Thu, 4 Nov 2010 05:42:38 +0000</created>
                <updated>Tue, 9 Nov 2010 19:17:13 +0000</updated>
                            <resolved>Tue, 9 Nov 2010 19:17:13 +0000</resolved>
                                    <version>0.90.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12928138" author="stack" created="Thu, 4 Nov 2010 06:34:56 +0000"  >&lt;p&gt;@Prakash It says &apos;org.apache.hadoop.ipc.RPC$VersionMismatch: Protocol org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol version mismatch. (client = 5, server = 3)&apos;&lt;/p&gt;

&lt;p&gt;This RS is up because its waiting on all regions to close before it goes out:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
at org.apache.hadoop.hbase.regionserver.HRegionServer.waitOnAllRegionsToClose(HRegionServer.java:645)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Seems like there are closer handlers waiting to do work.  Does it say in the regionserver log what region is not closing?  If so, can you grep it and try figure some history on the region?&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                            <comment id="12928144" author="khemani" created="Thu, 4 Nov 2010 07:03:32 +0000"  >&lt;p&gt;I am not sure where the version mismatch is coming from. It shouldn&apos;t. The 3rd datanode in the pipeline is inaccessible and I cannot ssh to it.&lt;/p&gt;

&lt;p&gt;===&lt;/p&gt;

&lt;p&gt;In the logs it doesn&apos;t appear that there is any region that could not be closed.&lt;/p&gt;

&lt;p&gt;When I grep for region names, all log lines at the end, look like the following&lt;/p&gt;

&lt;p&gt;2010-11-02 17:36:25,490 DEBUG org.apache.hadoop.hbase.regionserver.HRegion: Closing tmp_realtime_domain_feed_imps_urls_hot,f6b05d27d8b93e0691ae35a846f2742cno.blogg.renate87 sffi 2 7ffa8a0f 10150313506035171,1288637339566.612cf51b8553ea552f3c283a542a7fe9.: disabling compactions &amp;amp; flushes&lt;br/&gt;
2010-11-02 17:36:25,490 DEBUG org.apache.hadoop.hbase.regionserver.HRegion: Updates disabled for region tmp_realtime_domain_feed_imps_urls_hot,f6b05d27d8b93e0691ae35a846f2742cno.blogg.renate87 sffi 2 7ffa8a0f 10150313506035171,1288637339566.612cf51b8553ea552f3c283a542a7fe9.&lt;br/&gt;
2010-11-02 17:36:25,490 ERROR org.apache.hadoop.hbase.regionserver.handler.CloseRegionHandler: Closing region tmp_realtime_domain_feed_imps_urls_hot,f6b05d27d8b93e0691ae35a846f2742cno.blogg.renate87 sffi 2 7ffa8a0f 10150313506035171,1288637339566.612cf51b8553ea552f3c283a542a7fe9.&lt;br/&gt;
2010-11-02 17:36:25,490 DEBUG org.apache.hadoop.hbase.regionserver.handler.CloseRegionHandler: Closed region tmp_realtime_domain_feed_imps_urls_hot,f6b05d27d8b93e0691ae35a846f2742cno.blogg.renate87 sffi 2 7ffa8a0f 10150313506035171,1288637339566.612cf51b8553ea552f3c283a542a7fe9.&lt;br/&gt;
2010-11-02 17:36:25,490 DEBUG org.apache.hadoop.hbase.regionserver.handler.CloseRegionHandler: Processing close of tmp_realtime_domain_feed_imps_domains,bceda0983f7f83bfb71291220eb619c5com.mediafire.img16 sffi,1288637064513.05ea84f89daf7274ab9a88d54460b03b.&lt;br/&gt;
2010-11-02 17:36:25,490 DEBUG org.apache.hadoop.hbase.regionserver.HRegion: Closing tmp_realtime_domain_feed_imps_domains,bceda0983f7f83bfb71291220eb619c5com.mediafire.img16 sffi,1288637064513.05ea84f89daf7274ab9a88d54460b03b.: disabling compactions &amp;amp; flushes&lt;br/&gt;
2010-11-02 17:36:25,490 DEBUG org.apache.hadoop.hbase.regionserver.HRegion: Updates disabled for region tmp_realtime_domain_feed_imps_domains,bceda0983f7f83bfb71291220eb619c5com.mediafire.img16 sffi,1288637064513.05ea84f89daf7274ab9a88d54460b03b.&lt;br/&gt;
2010-11-02 17:36:25,490 ERROR org.apache.hadoop.hbase.regionserver.handler.CloseRegionHandler: Closing region tmp_realtime_domain_feed_imps_domains,bceda0983f7f83bfb71291220eb619c5com.mediafire.img16 sffi,1288637064513.05ea84f89daf7274ab9a88d54460b03b.&lt;br/&gt;
2010-11-02 17:36:25,490 DEBUG org.apache.hadoop.hbase.regionserver.handler.CloseRegionHandler: Closed region tmp_realtime_domain_feed_imps_domains,bceda0983f7f83bfb71291220eb619c5com.mediafire.img16 sffi,1288637064513.05ea84f89daf7274ab9a88d54460b03b.&lt;br/&gt;
2010-11-02 17:36:25,490 DEBUG org.apache.hadoop.hbase.regionserver.handler.CloseRegionHandler: Processing close of tmp_realtime_domain_feed_imps_urls,a6c845f0d1b183bc1817e7aef8354199com.brooklynvegan sffi 8332505780,1288637275045.283d82705c44eafc24e13e0e2d2e2bc5.&lt;br/&gt;
2010-11-02 17:36:25,490 DEBUG org.apache.hadoop.hbase.regionserver.HRegion: Closing tmp_realtime_domain_feed_imps_urls,a6c845f0d1b183bc1817e7aef8354199com.brooklynvegan sffi 8332505780,1288637275045.283d82705c44eafc24e13e0e2d2e2bc5.: disabling compactions &amp;amp; flushes&lt;br/&gt;
2010-11-02 17:36:25,490 DEBUG org.apache.hadoop.hbase.regionserver.HRegion: Updates disabled for region tmp_realtime_domain_feed_imps_urls,a6c845f0d1b183bc1817e7aef8354199com.brooklynvegan sffi 8332505780,1288637275045.283d82705c44eafc24e13e0e2d2e2bc5.&lt;br/&gt;
2010-11-02 17:36:25,490 ERROR org.apache.hadoop.hbase.regionserver.handler.CloseRegionHandler: Closing region tmp_realtime_domain_feed_imps_urls,a6c845f0d1b183bc1817e7aef8354199com.brooklynvegan sffi 8332505780,1288637275045.283d82705c44eafc24e13e0e2d2e2bc5.&lt;br/&gt;
2010-11-02 17:36:25,490 DEBUG org.apache.hadoop.hbase.regionserver.handler.CloseRegionHandler: Closed region tmp_realtime_domain_feed_imps_urls,a6c845f0d1b183bc1817e7aef8354199com.brooklynvegan sffi 8332505780,1288637275045.283d82705c44eafc24e13e0e2d2e2bc5.&lt;br/&gt;
2010-11-02 17:36:25,482 ERROR org.apache.hadoop.hbase.regionserver.handler.CloseRegionHandler: Closing region tmp_realtime_domain_feed_imps_urls_hot,35c28f48,1288637318666.e391902cf1e5a5a64c178001a42f055a.&lt;br/&gt;
2010-11-02 17:36:25,495 DEBUG org.apache.hadoop.hbase.regionserver.handler.CloseRegionHandler: Closed region tmp_realtime_domain_feed_imps_urls_hot,35c28f48,1288637318666.e391902cf1e5a5a64c178001a42f055a.&lt;br/&gt;
2010-11-02 17:36:25,482 ERROR org.apache.hadoop.hbase.regionserver.handler.CloseRegionHandler: Closing region tmp_realtime_domain_feed_imps_domains,3358dabfafc35708f8de488d6f20f848nl.ronsrovlinks sefi,1288637018644.2feeb71cd2573e8453ef77a9aa40aa38.&lt;br/&gt;
2010-11-02 17:36:25,496 DEBUG org.apache.hadoop.hbase.regionserver.handler.CloseRegionHandler: Closed region tmp_realtime_domain_feed_imps_domains,3358dabfafc35708f8de488d6f20f848nl.ronsrovlinks sefi,1288637018644.2feeb71cd2573e8453ef77a9aa40aa38.&lt;/p&gt;


&lt;p&gt;===&lt;/p&gt;

&lt;p&gt;There are 3 threads in jstack with RS_OPEN_REGION and 3 with RS_CLOSE_REGION in their names. What are these?&lt;/p&gt;





</comment>
                            <comment id="12930240" author="khemani" created="Tue, 9 Nov 2010 19:17:13 +0000"  >&lt;p&gt;dup of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3207&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-3207&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 4 Nov 2010 06:34:56 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>26703</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 4 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hl4v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>100686</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>