<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Thu Dec 01 22:13:55 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-14307/HBASE-14307.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-14307] Incorrect use of positional read api in HFileBlock</title>
                <link>https://issues.apache.org/jira/browse/HBASE-14307</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Considering that &lt;tt&gt;read()&lt;/tt&gt; is not guaranteed to read all bytes, &lt;br/&gt;
I&apos;m interested to understand this particular piece of code and why is partial read treated as an error :&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/hbase/blob/master/hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/HFileBlock.java#L1446-L1450&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/hbase/blob/master/hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/HFileBlock.java#L1446-L1450&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Particularly, if hbase were to use a different filesystem, say WebhdfsFileSystem, this would not work, please also see &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-8943&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HDFS-8943&lt;/a&gt; for discussion around this.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12858691">HBASE-14307</key>
            <summary>Incorrect use of positional read api in HFileBlock</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cnauroth">Chris Nauroth</assignee>
                                    <reporter username="srevanka">Shradha Revankar</reporter>
                        <labels>
                    </labels>
                <created>Tue, 25 Aug 2015 17:22:20 +0000</created>
                <updated>Wed, 27 Jan 2016 15:28:57 +0000</updated>
                            <resolved>Fri, 11 Sep 2015 10:34:38 +0000</resolved>
                                                    <fixVersion>2.0.0</fixVersion>
                    <fixVersion>1.2.0</fixVersion>
                    <fixVersion>0.98.15</fixVersion>
                    <fixVersion>1.0.3</fixVersion>
                    <fixVersion>1.1.3</fixVersion>
                                    <component>io</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>14</watches>
                                                                <comments>
                            <comment id="14712549" author="ram_krish" created="Wed, 26 Aug 2015 05:51:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=srevanka&quot; class=&quot;user-hover&quot; rel=&quot;srevanka&quot;&gt;Shradha Revankar&lt;/a&gt;&lt;br/&gt;
Can you explain a bit more here?  In the normal case we are treating that what ever we read will atleast of what &apos;size&apos; needs because we are sure that the thing that we require is in that block.  That is why we don&apos;t want to iterate for the next block&apos;s header size (the val represented by &apos;extraSize&apos; ) and we are ok if we are not able to read that extraSize.&lt;br/&gt;
Coming to the chunked-encoding, are you facing some issue with this API using HBase?  Ideally the size that hbase specifies should be the encoded size only- do you see otherwise? I have not worked with this chunked encoding type FS.  Lets see what others have to say here.&lt;/p&gt;</comment>
                            <comment id="14712608" author="srevanka" created="Wed, 26 Aug 2015 06:49:28 +0000"  >&lt;p&gt;Yes, but it is not guaranteed that it will even read as much as the &apos;size&apos; using the positional read api, shouldn&apos;t there be a loop to read until at least &apos;size&apos;. &lt;/p&gt;

&lt;p&gt;We tried running hbase with WebhdfsFilesystem (with server implementation that sets http header for Transfer-encoding as chunked encoding, there is no content-length present), the positional read api reads only the first chunk which is far less than the size. Unless there is a loop, the rest of the bytes are not read. We ended up getting errors like this :&lt;/p&gt;

&lt;p&gt;Caused by: java.io.IOException: Positional read of 16425 bytes failed at offset 4132767 (returned 26)&lt;br/&gt;
              at org.apache.hadoop.hbase.io.hfile.HFileBlock$AbstractFSReader.readAtOffset(HFileBlock.java:1322)&lt;/p&gt;</comment>
                            <comment id="14715180" author="anoop.hbase" created="Wed, 26 Aug 2015 17:17:26 +0000"  >&lt;p&gt;In many places we use IOUtils.readFully API which in turn will use loop. I dont think there is some reason why we should not use that here as well.&lt;/p&gt;</comment>
                            <comment id="14715223" author="cnauroth" created="Wed, 26 Aug 2015 17:50:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ram_krish&quot; class=&quot;user-hover&quot; rel=&quot;ram_krish&quot;&gt;ramkrishna.s.vasudevan&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anoop.hbase&quot; class=&quot;user-hover&quot; rel=&quot;anoop.hbase&quot;&gt;Anoop Sam John&lt;/a&gt;, thank you for your replies.&lt;/p&gt;

&lt;p&gt;Just to add a little more context on Shradha&apos;s information, the contract of &lt;a href=&quot;http://hadoop.apache.org/docs/r2.7.1/api/org/apache/hadoop/fs/PositionedReadable.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;&lt;tt&gt;FSDataInputStream&lt;/tt&gt;&lt;/a&gt; guarantees that it will read &quot;up to the specified number of bytes&quot;.  It does not guarantee that it will read exactly that number of bytes.  Even if the backing file contains that many bytes remaining, a file system implementation may choose to return immediately after reading any bytes that are already available in buffer space, without forcing the caller to block waiting for the exact number of bytes to be available.&lt;/p&gt;

&lt;p&gt;This is similar to the contract of &lt;a href=&quot;http://docs.oracle.com/javase/7/docs/api/java/io/InputStream.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;&lt;tt&gt;java.io.InputStream&lt;/tt&gt;&lt;/a&gt;, which states that &quot;a smaller number may be read&quot;.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;In many places we use IOUtils.readFully API which in turn will use loop. I dont think there is some reason why we should not use that here as well.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That sounds like exactly the kind of change we had in mind.  It sounds like the intent of this logic in HBase is to detect premature EOF, not necessarily demand that a single read call completes the entire operation.&lt;/p&gt;

&lt;p&gt;Thank you both!&lt;/p&gt;</comment>
                            <comment id="14715994" author="anoop.hbase" created="Thu, 27 Aug 2015 03:05:58 +0000"  >&lt;p&gt;Sounds good.. Plan to attach a patch?  Good one.&lt;/p&gt;</comment>
                            <comment id="14716175" author="cnauroth" created="Thu, 27 Aug 2015 06:45:18 +0000"  >&lt;p&gt;I am attaching a patch.  This introduces a &lt;tt&gt;positionalReadWithExtra&lt;/tt&gt; method that loops until completing the read.  This is similar to the existing &lt;tt&gt;readWithExtra&lt;/tt&gt; method that&apos;s used in the seek + read code path.&lt;/p&gt;

&lt;p&gt;I&apos;m still looking into adding a unit test in &lt;tt&gt;TestHFileBlock&lt;/tt&gt;.  I verified that the existing tests in that suite pass.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=srevanka&quot; class=&quot;user-hover&quot; rel=&quot;srevanka&quot;&gt;Shradha Revankar&lt;/a&gt;, would you be able to take this patch for a test run in your environment to verify that it works for your needs?  Thanks!&lt;/p&gt;</comment>
                            <comment id="14716181" author="hadoopqa" created="Thu, 27 Aug 2015 06:51:32 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12752676/HBASE-14307.001.master.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12752676/HBASE-14307.001.master.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 56890d9fe148dd192520fab349a66aa3f688e232.&lt;br/&gt;
  ATTACHMENT ID: 12752676&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javac&lt;/font&gt;.  The patch appears to cause mvn compile goal to fail with Hadoop version 2.4.0.&lt;/p&gt;

&lt;p&gt;    Compilation errors resume:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; Error invoking method &apos;get(java.lang.Integer)&apos; in java.util.ArrayList at META-INF/LICENSE.vm&lt;span class=&quot;error&quot;&gt;&amp;#91;line 1619, column 22&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; Failed to execute goal org.apache.maven.plugins:maven-remote-resources-plugin:1.5:process (default) on project hbase-assembly: Error rendering velocity resource. Error invoking method &apos;get(java.lang.Integer)&apos; in java.util.ArrayList at META-INF/LICENSE.vm&lt;span class=&quot;error&quot;&gt;&amp;#91;line 1619, column 22&amp;#93;&lt;/span&gt;: InvocationTargetException: Index: 0, Size: 0 -&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;Help 1&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; To see the full stack trace of the errors, re-run Maven with the -e switch.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; Re-run Maven using the -X switch to enable full debug logging.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; For more information about the errors and possible solutions, please read the following articles:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;Help 1&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; After correcting the problems, you can resume the build with the command&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt;   mvn &amp;lt;goals&amp;gt; -rf :hbase-assembly&lt;/p&gt;


&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15288//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15288//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14716326" author="ram_krish" created="Thu, 27 Aug 2015 09:12:51 +0000"  >&lt;p&gt;Thanks for the patch &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cnauroth&quot; class=&quot;user-hover&quot; rel=&quot;cnauroth&quot;&gt;Chris Nauroth&lt;/a&gt;. &lt;br/&gt;
I verified the logic and I think it seems right to  me. Should we perf test this change? +1 on patch as such.&lt;/p&gt;</comment>
                            <comment id="14716795" author="yuzhihong@gmail.com" created="Thu, 27 Aug 2015 14:54:57 +0000"  >&lt;p&gt;Thanks for taking this, Chris.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
736	   * @&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; succeeded reading the extra bytes
...
762	    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; bytesRead != necessaryLen &amp;amp;&amp;amp; bytesRemaining &amp;lt;= 0;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;What if extraLen is 0 ? The method would return false. Is that intentional ?&lt;br/&gt;
Parameter validation on extraLen should be performed at the beginning of the method.&lt;/p&gt;

&lt;p&gt;positionalReadWithExtra() is a static method. Should it be in IOUtils ?&lt;/p&gt;</comment>
                            <comment id="14716869" author="cnauroth" created="Thu, 27 Aug 2015 15:34:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ram_krish&quot; class=&quot;user-hover&quot; rel=&quot;ram_krish&quot;&gt;ramkrishna.s.vasudevan&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yuzhihong%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;yuzhihong@gmail.com&quot;&gt;Ted Yu&lt;/a&gt;, thank you for your code reviews.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Should we perf test this change?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This is my first HBase contribution.  Can you please advise if there is a standard way that the HBase community handles perf testing?&lt;/p&gt;

&lt;p&gt;My expectation is that there will be no impact on existing usage patterns.  The read will continue to be satisfied fully by a single read API call, and the loop will exit after a single iteration.  This change only helps for alternative file system implementations that might return a partial read, like what Shradha is testing.  That will result in more iterations of the loop/more read calls, but this is an implementation detail of the file system.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;What if extraLen is 0 ? The method would return false. Is that intentional ?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes, this is intentional.  The method should return false if reading extra was not requested.  This is equivalent to this piece of logic that was in place before the patch:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (ret == size || ret &amp;lt; size + extraSize) {
          &lt;span class=&quot;code-comment&quot;&gt;// Could not read the next block&apos;s header, or did not &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt;.
&lt;/span&gt;           &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; -1;
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I think the return value comment in my JavaDoc was misleading though, so here is patch v2 with an improvement.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Parameter validation on extraLen should be performed at the beginning of the method.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;&lt;tt&gt;extraLen&lt;/tt&gt; is passed by internal methods, and it&apos;s always either the header size or 0.  I see possible header sizes are sourced from either &lt;tt&gt;HConstants#HFILEBLOCK_HEADER_SIZE&lt;/tt&gt; or &lt;tt&gt;HConstants#HFILEBLOCK_HEADER_SIZE_NO_CHECKSUM&lt;/tt&gt;, and both of these constants are greater than zero.  Given that the input value always comes from internal constants instead of untrusted external input, I would not expect additional parameter validation is necessary.  Let me know if you disagree.  If parameter validation is required, then I&apos;d suggest validation should be done in the existing &lt;tt&gt;readWithExtra&lt;/tt&gt; method too for consistency.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;positionalReadWithExtra() is a static method. Should it be in IOUtils ?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I placed the method here based on the existing precedent of the &lt;tt&gt;readWithExtra&lt;/tt&gt; method.  Is there an HBase-specific &lt;tt&gt;IOUtils&lt;/tt&gt; class?  I couldn&apos;t find one.  It would not be appropriate in the Hadoop Common &lt;tt&gt;IOUtils&lt;/tt&gt; class, because this is a very application-specific usage pattern.&lt;/p&gt;

&lt;p&gt;Let me know if you think there is a better spot for this method.  I&apos;d suggest both &lt;tt&gt;readWithExtra&lt;/tt&gt; and &lt;tt&gt;positionalReadWithExtra&lt;/tt&gt; should be in the same class for consistency, so if one moves, then we probably should move both.&lt;/p&gt;</comment>
                            <comment id="14716925" author="yuzhihong@gmail.com" created="Thu, 27 Aug 2015 16:01:28 +0000"  >&lt;p&gt;After a brief search, I haven&apos;t found a suitable HBase Util class for the two read methods.&lt;br/&gt;
We can keep positionalReadWithExtra where it is for now.&lt;/p&gt;

&lt;p&gt;Other than getting a green QA run, I don&apos;t have other comments.&lt;/p&gt;</comment>
                            <comment id="14717269" author="hadoopqa" created="Thu, 27 Aug 2015 18:44:28 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12752780/HBASE-14307.002.master.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12752780/HBASE-14307.002.master.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit aa938c738a1a6378783eed1b1145a097fd062c20.&lt;br/&gt;
  ATTACHMENT ID: 12752780&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.7.0)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.snapshot.TestMobSecureExportSnapshot&lt;br/&gt;
                  org.apache.hadoop.hbase.TestIOFencing&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core zombie tests&lt;/font&gt;.  There are 9 zombie test(s): 	at org.apache.hadoop.mapred.TestMiniMRClasspath.testClassPath(TestMiniMRClasspath.java:175)&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15294//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15294//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15294//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15294//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15294//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15294//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15294//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15294//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14723050" author="anoop.hbase" created="Mon, 31 Aug 2015 06:56:40 +0000"  >&lt;p&gt;Looks good.  Minor comments&lt;/p&gt;

&lt;p&gt;@return true if succeeded reading the extra bytes, or reading extra bytes&lt;br/&gt;
737	   *     was not required&lt;/p&gt;

&lt;p&gt;Why say reading extra not required? When is that?  Seems we return true when necessary+ extra read. false when only necessary read and even necessary also not read, we throw IOE.  Mind correcting doc?&lt;/p&gt;

&lt;p&gt;return bytesRead != necessaryLen &amp;amp;&amp;amp; bytesRemaining &amp;lt;= 0;&lt;br/&gt;
Return  can be like bytesRemaining  ==0 only?&lt;/p&gt;</comment>
                            <comment id="14723766" author="srevanka" created="Mon, 31 Aug 2015 17:47:32 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cnauroth&quot; class=&quot;user-hover&quot; rel=&quot;cnauroth&quot;&gt;Chris Nauroth&lt;/a&gt;, I applied the patch and did some tests, while this might not be relevant to hbase, from a webhdfs perspective, this approach has a performance impact, mainly due the way the read() is implemented in webhdfs client :&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; 
@Override
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; read(&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; position, &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] buffer, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; offset, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; length)
          &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
    &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; (InputStream in = openInputStream(position).in) {
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; in.read(buffer, offset, length);
    }
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Every read at a position opens a new connection and sends a new OPEN request to the server with the specified offset. So when you loop within &lt;tt&gt;positionalReadWithExtra&lt;/tt&gt;, it sends as many requests to the server as the loop count, the perf impact is very visible with chunked-encoding when the returned bytes per read is only around 24 bytes. &lt;/p&gt;

&lt;p&gt;From an hbase perpective this fix is still useful and the right way, but I think we have to revisit - &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-8943&quot; title=&quot;Read apis in ByteRangeInputStream does not read all the bytes specified when chunked transfer-encoding is used in the server&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-8943&quot;&gt;&lt;del&gt;HDFS-8943&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14726601" author="apurtell" created="Wed, 2 Sep 2015 02:08:39 +0000"  >&lt;p&gt;I think after the last set of comments from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anoop.hbase&quot; class=&quot;user-hover&quot; rel=&quot;anoop.hbase&quot;&gt;Anoop Sam John&lt;/a&gt; are addressed we can commit this as a bug fix. &lt;/p&gt;</comment>
                            <comment id="14733147" author="cnauroth" created="Sun, 6 Sep 2015 21:52:57 +0000"  >&lt;p&gt;I&apos;m attaching patch v003.  This updates the JavaDoc description of the return value (see below) and adds a unit test suite.&lt;/p&gt;

&lt;p&gt;Writing the unit tests made me realize that the loop could cause one additional read in the case where there is a request for some extra bytes, and the initial read returned exactly the necessary bytes.  The prior logic never would attempt multiple reads to fill in the extra bytes, so I&apos;ve made a small change in the logic to prevent this one extra read attempt: the loop condition is now &lt;tt&gt;while (bytesRead &amp;lt; necessaryLen)&lt;/tt&gt;.  This means the loop keeps iterating as long as the reads are too short to satisfy the required bytes, and each read will attempt to fetch the extra bytes too, but it won&apos;t issue any additional reads just for the sake of filling in the extra bytes.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anoop.hbase&quot; class=&quot;user-hover&quot; rel=&quot;anoop.hbase&quot;&gt;Anoop Sam John&lt;/a&gt;, thank you for your review.  Here are responses to your comments.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Why say reading extra not required? When is that?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The call to &lt;tt&gt;positionalReadWithExtra&lt;/tt&gt; is in &lt;tt&gt;readAtOffset&lt;/tt&gt;, shown here:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
      } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
        &lt;span class=&quot;code-comment&quot;&gt;// Positional read. Better &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; random reads; or when the streamLock is already locked.
&lt;/span&gt;        &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; extraSize = peekIntoNextBlock ? hdrSize : 0;
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!positionalReadWithExtra(istream, fileOffset, dest, destOffset,
            size, extraSize)) {
          &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; -1;
        }
      }

      &lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; peekIntoNextBlock;
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; Bytes.toInt(dest, destOffset + size + BlockType.MAGIC_LENGTH) + hdrSize;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Reading extra is only required if &lt;tt&gt;peekIntoNextBlock&lt;/tt&gt; is true.  The JavaDocs say this about &lt;tt&gt;peekIntoNextBlock&lt;/tt&gt;:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
     * @param peekIntoNextBlock whether to read the next block&apos;s on-disk size
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Therefore, reading extra only occurs in certain cases where an attempt is made to read further ahead and determine the size of the next block.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Mind correcting doc?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;In patch v003, I have changed the doc to state explicitly that it returns true only if &lt;tt&gt;extraLen&lt;/tt&gt; is non-zero, and reading extra was successful.  Hopefully this helps clarify.  Let me know what you think.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Return can be like bytesRemaining ==0 only?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I don&apos;t think we can remove the check for &lt;tt&gt;bytesRead != necessaryLen&lt;/tt&gt;.  There are 2 different cases in which &lt;tt&gt;bytesRemaining&lt;/tt&gt; is zero: 1) no extra bytes were requested, and we successfully read all required bytes, and 2) extra bytes were requested, but we only successfully read the required bytes.  Going back to the code at the call site shown above, the caller needs to know the difference between these 2 cases.  For case 1, the caller needs to be able to exit early and return -1.  For case 2, the caller needs to be able to return the size of the next block.&lt;/p&gt;</comment>
                            <comment id="14733184" author="hadoopqa" created="Mon, 7 Sep 2015 01:03:59 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12754415/HBASE-14307.003.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12754415/HBASE-14307.003.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit bada19bb54a358233db2b3e23c86d215ac2dc29b.&lt;br/&gt;
  ATTACHMENT ID: 12754415&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 2 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15448//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15448//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15448//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15448//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15448//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15448//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15448//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15448//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14736205" author="stack" created="Wed, 9 Sep 2015 05:25:08 +0000"  >&lt;p&gt;LGTM&lt;/p&gt;</comment>
                            <comment id="14738251" author="ram_krish" created="Thu, 10 Sep 2015 06:22:52 +0000"  >&lt;p&gt;I think we can commit this.  Which versions should this go in other than master?  &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=saint.ack%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;saint.ack@gmail.com&quot;&gt;Stack&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ndimiduk&quot; class=&quot;user-hover&quot; rel=&quot;ndimiduk&quot;&gt;Nick Dimiduk&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mbertozzi&quot; class=&quot;user-hover&quot; rel=&quot;mbertozzi&quot;&gt;Matteo Bertozzi&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="14738955" author="stack" created="Thu, 10 Sep 2015 15:47:09 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ram_krish&quot; class=&quot;user-hover&quot; rel=&quot;ram_krish&quot;&gt;ramkrishna.s.vasudevan&lt;/a&gt; All versions sir.&lt;/p&gt;</comment>
                            <comment id="14740174" author="ram_krish" created="Fri, 11 Sep 2015 04:45:23 +0000"  >&lt;p&gt;Thanks Stack. Will commit before EOD.&lt;/p&gt;</comment>
                            <comment id="14740542" author="ram_krish" created="Fri, 11 Sep 2015 10:34:38 +0000"  >&lt;p&gt;Pushed to all branches including 0.98 and master. &lt;/p&gt;</comment>
                            <comment id="14740545" author="ram_krish" created="Fri, 11 Sep 2015 10:36:08 +0000"  >&lt;p&gt;Can some one correct me on the fix versions, if I have missed or added something extra?&lt;/p&gt;</comment>
                            <comment id="14740548" author="hudson" created="Fri, 11 Sep 2015 10:38:02 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.1 #656 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.1/656/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.1/656/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14307&quot; title=&quot;Incorrect use of positional read api in HFileBlock&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14307&quot;&gt;&lt;del&gt;HBASE-14307&lt;/del&gt;&lt;/a&gt; - Incorrect use of positional read api in HFileBlock (Chris (ramkrishna: rev c20cb7dd1df5562a5d991629e6b97267e1d8608e)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/HFileBlock.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/io/hfile/TestHFileBlockPositionalRead.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14740555" author="hudson" created="Fri, 11 Sep 2015 10:44:33 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.0 #1045 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.0/1045/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.0/1045/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14307&quot; title=&quot;Incorrect use of positional read api in HFileBlock&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14307&quot;&gt;&lt;del&gt;HBASE-14307&lt;/del&gt;&lt;/a&gt; - Incorrect use of positional read api in HFileBlock (Chris (ramkrishna: rev 05f1389c564a2091efe2c849698d3ff1c6bab48c)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/HFileBlock.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/io/hfile/TestHFileBlockPositionalRead.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14740573" author="hudson" created="Fri, 11 Sep 2015 11:01:23 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.2 #163 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.2/163/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.2/163/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14307&quot; title=&quot;Incorrect use of positional read api in HFileBlock&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14307&quot;&gt;&lt;del&gt;HBASE-14307&lt;/del&gt;&lt;/a&gt; - Incorrect use of positional read api in HFileBlock (Chris (ramkrishna: rev 346fc3483f55bcacf56f106d47191a1fd021afc5)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/io/hfile/TestHFileBlockPositionalRead.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/HFileBlock.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14740597" author="hudson" created="Fri, 11 Sep 2015 11:21:44 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.98-on-Hadoop-1.1 #1070 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/1070/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/1070/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14307&quot; title=&quot;Incorrect use of positional read api in HFileBlock&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14307&quot;&gt;&lt;del&gt;HBASE-14307&lt;/del&gt;&lt;/a&gt; - Incorrect use of positional read api in HFileBlock (Chris (ramkrishna: rev 6531e1ae17be35d5b2b9a03d13c0f2f35ce26d94)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/io/hfile/TestHFileBlockPositionalRead.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/HFileBlock.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14740607" author="hudson" created="Fri, 11 Sep 2015 11:30:48 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.98 #1117 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98/1117/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98/1117/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14307&quot; title=&quot;Incorrect use of positional read api in HFileBlock&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14307&quot;&gt;&lt;del&gt;HBASE-14307&lt;/del&gt;&lt;/a&gt; - Incorrect use of positional read api in HFileBlock (Chris (ramkrishna: rev 6531e1ae17be35d5b2b9a03d13c0f2f35ce26d94)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/io/hfile/TestHFileBlockPositionalRead.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/HFileBlock.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14740610" author="hudson" created="Fri, 11 Sep 2015 11:32:15 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.3 #162 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.3/162/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.3/162/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14307&quot; title=&quot;Incorrect use of positional read api in HFileBlock&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14307&quot;&gt;&lt;del&gt;HBASE-14307&lt;/del&gt;&lt;/a&gt; - Incorrect use of positional read api in HFileBlock (Chris (ramkrishna: rev 954a6e0a758b9597d9c2f30cc32bbe9a7f294d6c)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/HFileBlock.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/io/hfile/TestHFileBlockPositionalRead.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14740624" author="yuzhihong@gmail.com" created="Fri, 11 Sep 2015 11:40:12 +0000"  >&lt;p&gt;Looks like compilation on branch-1 is broken:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.5.1:testCompile (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-testCompile) on project hbase-server: Compilation failure: Compilation failure:
[ERROR] /Users/tyu/1-hbase/hbase-server/src/test/java/org/apache/hadoop/hbase/io/hfile/TestHFileBlockPositionalRead.java:[26,49] error: cannot find symbol
[ERROR] symbol:   class IOTests
[ERROR] location: &lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; org.apache.hadoop.hbase.testclassification
[ERROR] /Users/tyu/1-hbase/hbase-server/src/test/java/org/apache/hadoop/hbase/io/hfile/TestHFileBlockPositionalRead.java:[36,11] error: cannot find symbol
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14740628" author="yuzhihong@gmail.com" created="Fri, 11 Sep 2015 11:42:30 +0000"  >&lt;p&gt;Proposed addendum&lt;/p&gt;</comment>
                            <comment id="14740633" author="yuzhihong@gmail.com" created="Fri, 11 Sep 2015 11:45:08 +0000"  >&lt;p&gt;Pushed addendum to branch-1&lt;/p&gt;

&lt;p&gt;Haven&apos;t checked other branches yet.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ramkrishna.s.vasudevan%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;ramkrishna.s.vasudevan@gmail.com&quot;&gt;ramkrishna vasudevan&lt;/a&gt;:&lt;br/&gt;
FYI&lt;/p&gt;</comment>
                            <comment id="14740704" author="hudson" created="Fri, 11 Sep 2015 12:29:48 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.2-IT #138 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.2-IT/138/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.2-IT/138/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14307&quot; title=&quot;Incorrect use of positional read api in HFileBlock&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14307&quot;&gt;&lt;del&gt;HBASE-14307&lt;/del&gt;&lt;/a&gt; - Incorrect use of positional read api in HFileBlock (Chris (ramkrishna: rev 346fc3483f55bcacf56f106d47191a1fd021afc5)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/HFileBlock.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/io/hfile/TestHFileBlockPositionalRead.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14740729" author="hudson" created="Fri, 11 Sep 2015 12:51:04 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.3-IT #146 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.3-IT/146/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.3-IT/146/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14307&quot; title=&quot;Incorrect use of positional read api in HFileBlock&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14307&quot;&gt;&lt;del&gt;HBASE-14307&lt;/del&gt;&lt;/a&gt; - Incorrect use of positional read api in HFileBlock (Chris (ramkrishna: rev 954a6e0a758b9597d9c2f30cc32bbe9a7f294d6c)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/io/hfile/TestHFileBlockPositionalRead.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/HFileBlock.java&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14307&quot; title=&quot;Incorrect use of positional read api in HFileBlock&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14307&quot;&gt;&lt;del&gt;HBASE-14307&lt;/del&gt;&lt;/a&gt; Addendum fixes compilation for TestHFileBlockPositionalRead (tedyu: rev 272ca1f61ae315936efd95f4092753f7c1055198)&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/io/hfile/TestHFileBlockPositionalRead.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14740850" author="hudson" created="Fri, 11 Sep 2015 13:57:54 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-TRUNK #6797 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/6797/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/6797/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14307&quot; title=&quot;Incorrect use of positional read api in HFileBlock&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14307&quot;&gt;&lt;del&gt;HBASE-14307&lt;/del&gt;&lt;/a&gt; - Incorrect use of positional read api in HFileBlock (Chris (ramkrishna: rev c438052cc2280121727d4ae0883f0b76cad5816a)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/io/hfile/TestHFileBlockPositionalRead.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/HFileBlock.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14740891" author="hudson" created="Fri, 11 Sep 2015 14:21:21 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.98-on-Hadoop-1.1 #1071 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/1071/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/1071/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14307&quot; title=&quot;Incorrect use of positional read api in HFileBlock&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14307&quot;&gt;&lt;del&gt;HBASE-14307&lt;/del&gt;&lt;/a&gt; Addendum fixes compilation for TestHFileBlockPositionalRead (tedyu: rev 378f3c6a7d868e79cce9cefdc87164f785a31c2d)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/io/hfile/TestHFileBlockPositionalRead.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14740906" author="hudson" created="Fri, 11 Sep 2015 14:30:30 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.98 #1118 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98/1118/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98/1118/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14307&quot; title=&quot;Incorrect use of positional read api in HFileBlock&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14307&quot;&gt;&lt;del&gt;HBASE-14307&lt;/del&gt;&lt;/a&gt; Addendum fixes compilation for TestHFileBlockPositionalRead (tedyu: rev 378f3c6a7d868e79cce9cefdc87164f785a31c2d)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/io/hfile/TestHFileBlockPositionalRead.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14740911" author="hudson" created="Fri, 11 Sep 2015 14:33:07 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.3 #163 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.3/163/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.3/163/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14307&quot; title=&quot;Incorrect use of positional read api in HFileBlock&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14307&quot;&gt;&lt;del&gt;HBASE-14307&lt;/del&gt;&lt;/a&gt; Addendum fixes compilation for TestHFileBlockPositionalRead (tedyu: rev 272ca1f61ae315936efd95f4092753f7c1055198)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/io/hfile/TestHFileBlockPositionalRead.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14741021" author="hudson" created="Fri, 11 Sep 2015 15:58:41 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.0 #1046 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.0/1046/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.0/1046/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14307&quot; title=&quot;Incorrect use of positional read api in HFileBlock&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14307&quot;&gt;&lt;del&gt;HBASE-14307&lt;/del&gt;&lt;/a&gt; Addendum fixes compilation for TestHFileBlockPositionalRead (tedyu: rev 677b28ab056bb2cdbc41a04b60ea031303c1f327)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/io/hfile/TestHFileBlockPositionalRead.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14741065" author="hudson" created="Fri, 11 Sep 2015 16:20:51 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.1 #657 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.1/657/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.1/657/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14307&quot; title=&quot;Incorrect use of positional read api in HFileBlock&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14307&quot;&gt;&lt;del&gt;HBASE-14307&lt;/del&gt;&lt;/a&gt; Addendum fixes compilation for TestHFileBlockPositionalRead (tedyu: rev 856d2400190e7a07f94e0fb8afa1e66accc0b7d7)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/io/hfile/TestHFileBlockPositionalRead.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14741134" author="hudson" created="Fri, 11 Sep 2015 16:57:53 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.2 #164 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.2/164/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.2/164/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14307&quot; title=&quot;Incorrect use of positional read api in HFileBlock&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14307&quot;&gt;&lt;del&gt;HBASE-14307&lt;/del&gt;&lt;/a&gt; Addendum fixes compilation for TestHFileBlockPositionalRead (tedyu: rev f440ed936d75e5a0ba3b970d5616378e6a257efb)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/io/hfile/TestHFileBlockPositionalRead.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14741207" author="hudson" created="Fri, 11 Sep 2015 17:39:53 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.2-IT #139 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.2-IT/139/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.2-IT/139/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14307&quot; title=&quot;Incorrect use of positional read api in HFileBlock&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14307&quot;&gt;&lt;del&gt;HBASE-14307&lt;/del&gt;&lt;/a&gt; Addendum fixes compilation for TestHFileBlockPositionalRead (tedyu: rev f440ed936d75e5a0ba3b970d5616378e6a257efb)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/io/hfile/TestHFileBlockPositionalRead.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14741434" author="cnauroth" created="Fri, 11 Sep 2015 19:38:06 +0000"  >&lt;p&gt;Everyone, thank you for the reviews, commits and addendums.&lt;/p&gt;</comment>
                            <comment id="15119579" author="ndimiduk" created="Wed, 27 Jan 2016 15:28:57 +0000"  >&lt;p&gt;Bulk closing 1.1.3 issues.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12858191">HDFS-8943</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12755388" name="14307-branch-1.addendum" size="1004" author="yuzhihong@gmail.com" created="Fri, 11 Sep 2015 11:42:30 +0000"/>
                            <attachment id="12752676" name="HBASE-14307.001.master.patch" size="3161" author="cnauroth" created="Thu, 27 Aug 2015 06:45:18 +0000"/>
                            <attachment id="12752780" name="HBASE-14307.002.master.patch" size="3212" author="cnauroth" created="Thu, 27 Aug 2015 15:34:10 +0000"/>
                            <attachment id="12754415" name="HBASE-14307.003.patch" size="9574" author="cnauroth" created="Sun, 6 Sep 2015 21:52:57 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 26 Aug 2015 05:51:01 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            44 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2jcp3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>