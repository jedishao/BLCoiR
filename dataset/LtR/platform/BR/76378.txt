Bug 76378  [Progress] Deadlock in interaction between ModalContext, UIThread, and background NotifyJoborg.eclipse.ui.internal.UILockListener seems to contain code that allows the UI 
thread to obtain locks that are held by another thread, if the UI thread is 
currently servicing a syncExec request from that other thread.  However, when a 
third thread gets involved this seems to sometimes deadlock.  In particular, if 
workspace background notification is triggered during an workspace operation 
that contains multiple nested operations, deadlock occurs.  Since background 
notification is timing related, changes in timing can cause otherwise OK code 
to suddenly begin deadlocking.  I've included a JUnit test to reproduce the 
problem, and a patch that seems to solve it.