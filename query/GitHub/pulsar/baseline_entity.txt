1117	Exception namespace bundle split ERROR pulsar web  61 28 PulsarWebResource 381 Failed validate namespace bundle netflix prod ns1 0x84000000_0x86000000 think race condition is happening bundles are getting split time bundle cache gets updated bundle split is being processed result does cause issue bundle split fails bundle range bundle continue run split take place exception was reported was initiated bundle split IllegalArgumentException boundary bundle
2141	Race condition reconnection managed ledger is fenced checking failures SequenceIdWithErrorTest  ve seen test is failing race condition involving producer consumer reconnecting broker topic was fenced case test fencing error is inject
3768	pulsar function test failure deadlock Error Message Stacktrace shutdown has failure deadlock function worker Disabling have enable deadlock issue is fixed function worker Method shutdown did finish time out ThreadTimeoutException Method shutdown did finish time out
4447	Broker gets getting partitioned stats Describe bug Brokers cluster get stuck executing internalGetPartitionedStats Lines TopicStats partitionStats pulsar getAdminClient topics thread dump pulsar web  28 32   prio os_prio tid nid waiting condition 0x00007f30db1c6000 Reproduce have found way reproduce context Broker OS CentOS Linux release Broker version Broker spec server GHz 2CPU 256GBMEM SATA SSD GB x1 10G Base T 2port java State WAITING parking parking wait CompletableFuture
4635	Bookie causes deadlock broker is thread dump broker shuts phenomenon is   Pulsar version broker is 2 3 2 bug have been fixed bookie servers cluster went hardware failure time broker server went Messages broker connect ZK were output log think is deadlock pulsar zk session watcher  5 1 WARN ZooKeeperSessionWatcher zoo keeper waiting reconnect time remaining seconds pulsar zk session watcher  5 1 WARN ZooKeeperSessionWatcher zoo keeper waiting reconnect time remaining seconds pulsar zk session watcher  5 1 WARN ZooKeeperSessionWatcher zoo keeper waiting reconnect time remaining seconds pulsar zk session watcher  5 1 WARN ZooKeeperSessionWatcher zoo keeper waiting reconnect time remaining seconds pulsar zk session watcher  5 1 WARN ZooKeeperSessionWatcher zoo keeper waiting reconnect time remaining seconds pulsar zk session watcher  5 1 WARN ZooKeeperSessionWatcher zoo keeper waiting reconnect time remaining seconds pulsar zk session watcher  5 1 WARN ZooKeeperSessionWatcher zoo keeper waiting reconnect time remaining seconds pulsar zk session watcher  5 1 WARN ZooKeeperSessionWatcher zoo keeper waiting reconnect time remaining seconds pulsar zk session watcher  5 1 WARN ZooKeeperSessionWatcher zoo keeper waiting reconnect time remaining seconds pulsar zk session watcher  5 1 WARN ZooKeeperSessionWatcher zoo keeper waiting reconnect time remaining seconds pulsar zk session watcher  5 1 WARN ZooKeeperSessionWatcher zoo keeper waiting reconnect time remaining seconds pulsar zk session watcher  5 1 WARN ZooKeeperSessionWatcher zoo keeper waiting reconnect time remaining seconds pulsar zk session watcher  5 1 WARN ZooKeeperSessionWatcher zoo keeper waiting reconnect time remaining seconds pulsar zk session watcher  5 1 ERROR ZooKeeperSessionWatcher timeout expired reconnecting invoking shutdown service txt
4707	PulsarKafkaProducer is thread Is feature request related problem describe replaced client pulsar client kafka referring document sending messages topics time caused exception NullPointerException exception does occur version does occur version think change made PR is cause time send message topic cluster object is regenerated javadoc states KafkaProducer is thread want use pulsar client kafka modifying code used Kafka client Reproduce group junit name junit version   gradle compile group pulsar name pulsar client kafka version 2 3 2 compile group pulsar name pulsar client auth athenz version 2 3 2 Exception thread Thread NullPointerException
5585	topic replication has deadlock ProducerImpl semaphore has effect ProducerImpl sendAsync method blocked pendingMessages put method be deadlock ackReceived sendAsync deadlock is pulsar io  22 8 pulsar io  22 12 log broker log NonPersistentReplicator disable batching is batch message producer acquire release num message meta process ack int numMessages hasNumMessagesInBatch getNumMessagesInBatch
8050	Replace map set PulsarClientImpl use IdentityHashMap hold reference producers consumers  s use List value is used stored Pulsar pursues performance looks use thread set newSetFromMap ConcurrentHashMap
8293	Describe bug Reproduce is concurrency issue  s reproduce is shared way reproduce behavior context race condition seems happen code setAcknowledgePosition method Lines Clarification solution be detect thread has modified state have code do conflict resolution example readPosition gets updated setAcknowledgePosition method move readPosition Race condition updating readPosition   seems have been caused race condition updating readPosition Updates readPosition field lead state  s understanding code updates be handled refer   context  s link Slack thread discussions  s fix   prevents loop   fix does address race condition happens updating readPosition field seems be issues race condition updating readPosition has been issue example       is change   adds READ_POSITION_UPDATER readPosition Regarding race condition   seems readPosition get sync readPosition readPosition gets updated OpReadEntry has been created OpReadEntry readPosition gets initialized readPosition java debug Moved read position mark position getName problem is synchronization lock  s race condition be resolved adding lock synchronization  s code setReadPosition take markDeletePosition account updating readPosition setAcknowledgePosition take state readPosition account updating value readPosition does jump race condition
9109	pulsar timer thread blocked redeliver UnacknowledgedMessages Describe bug broker crash restart consumers got blocked consumer rateOut decrease auto recover restart consumer process Reproduce Steps reproduce behavior Run reproduce code  Before serviceUrl pulsar  broker  maxRedeliverCount topic topic deadLetterPolicy deadLetterPolicy subscriptionName subscriptionName  After  Test Send messages topic sample ns1 topic1 Wait 15s time redeliver kill restart broker process Look thread pulsar timer  4 1 stack check  s blocked problem does appear try step times behavior pulsar timer  4 1   prio os_prio tid nid waiting condition 0x00007efe30aec000 Locked synchronizers Screenshots consumer thread got blocked production context Broker version pulsar client version pulsarClient builder DeadLetterPolicy deadLetterPolicy builder format   s   s DLQ topic subscriptionName consumer newConsumer ackTimeout SECONDS acknowledgmentGroupTime MILLISECONDS Shared thread pulsar timer  4 1 blocked send method receive blocked UnAckedMessageTracker  add method acquire writeLock UnAckedMessageTracker State WAITING parking parking wait CompletableFuture ReentrantReadWriteLock
10170	Optimize lock AuthenticationAthenz Describe bug Reproduce information see   CI logs behavior description expected happen Screenshots add screenshots help explain problem Desktop complete following information context Add context problem use lock AuthenticationAthenz reduce efficiency AuthenticationAthenz Hope be optimized Error Medium synchronization roleToken locked   time AuthenticationAthenz AuthenticationAthenz AuthenticationAthenz AuthenticationAthenz AuthenticationAthenz AuthenticationAthenz AuthenticationAthenz access java line access java line access java line Synchronized access java line Synchronized access java line Synchronized access java line Synchronized access java line OS g iOS
10235	Describe bug threaddump_itomdipulsar broker 7865b7ff5d zg42s_150421 004920 log threaddump_itomdipulsar broker 7865b7ff5d gcs4n_150421 004920 log threaddump_itomdipulsar broker 7865b7ff5d 8rglm_150421 004920 log Deadlock Monitoring thread isLeader Review stack traces showed prometheus stats thread was hung waiting Lock was held thread pulsar listener thread was waiting locks suspect is deadlock condition find lock was waiting believe problem be scope is executed becameInactive is log log log
10767	Java client Deadlock Pulsar Client running ConsumerBatchReceiveTest Found Java level deadlock pulsar timer  462 1 is held pulsar client  459 1 pulsar client  459 1 is held pulsar timer  462 1 Java stack information threads listed pulsar timer  462 1 pulsar client  459 1 Found deadlock test was executing was ConsumerBatchReceiveTest waiting behavior Pulsar Client deadlock  s deadlock issue Pulsar Client master branch PR test run had stalled thread dump detected deadlock issue waiting lock monitor 0x00007fce080ad180 object 0x00000000c6094a00 ConsumerImpl waiting synchronizer 0x00000000c6094bf0 ReentrantReadWriteLock waiting lock ConsumerImpl Method parking wait ReentrantReadWriteLock locked ConsumerImpl   prio os_prio cpu ms elapsed s tid nid wait State TIMED_WAITING object monitor Method waiting re lock wait FastThreadLocalThread
11379	Directory facing race condition NarUnpacker Describe bug issue is extension   users create functions parallelism number functions worker directory race condition be observed Reproduce Steps reproduce behavior create function sample package parallelism is reproduce parallelism observe issue pulsar admin functions status instances are running instances observe exception broker log is race condition happens threads trying delete file instances observe exception described Extracted Pulsar Function jar file content tmp pulsar nar directory gets corrupted overridden content   is race condition happens threads deleted extracted nar package extracting thread extracting thread is loading classes Exception thread InvocationTargetException Caused IOException delete tmp pulsar nar pulsar java functions pojo parse  1 0 SNAPSHOT jar META INF maven exception node broker functions worker sample function parallelism exception shows is delete tmp pulsar nar pulsar java functions pojo parse  1 0 SNAPSHOT jar META INF maven has been deleted instance sample function exception raised attention lead
11605	Race condition schema deletion Describe bug Reproduce Steps reproduce behavior start cluster brokers create partitioned topic A partitions delete topics topic A schema see ledger exists Bookies NoNode for schemas XX YY ZZ Note phenomenon does happen time behavior Broker service handle scenarios scenarios deleted topics trigger race condition deleting topic schema example AbstractTopic  deleteSchema perform schemaRegistryService  getSchema read bookkeeper schemaRegistryService  deleteSchemaStorage delete corresponding ledgers bookkeeper delete schema threads happen thread has deleted ledger thread has started executing throws ledger exception
11689	Java consumer block batchReceive Describe bug Reproduce Create consumer threads call batchReceive Wait time block added Thread sleep peek poll peekNextBatchReceive make trigger behavior batchReceive block have fix way batchReceive is called threads exists race condition java triggered causes CompletableFuture queue pendingBatchReceives be removed queue completed causing consumer block issue is are calls peek poll peekNextBatchReceive code is is peeked is polled thread calls poll peek poll bug occurs is error message occurs Bug Removed entry was expected
11690	example failure test revalidateLockOnDifferentSession LockManagerTest is revalidateLockOnDifferentSession test method fails Error Tests run Failures Errors Skipped Time elapsed s FAILURE LockManagerTest Error LockManagerTest Time elapsed s FAILURE NoSuchElementException value
11966	Proxy Proxied admin endpoint connections remain blocked Describe bug Proxied admin endpoint connections remain blocked Example stacktrace waiting behavior be timeout place prevents threads hang state investigating issue code be seen timeout is set requests pulsar web  6 7   prio os_prio cpu ms elapsed s tid nid wait State WAITING object monitor Method waiting re lock wait ArrayDeque call setTimeout method is missing AdminProxyHandler base method is  s does get set value is code base class method sets timeout observation code is has been copy pasted Jetty code  s use using ServletConfig getting configuration values code need cleanup
12723	Race condition PersistentTopic  addReplicationCluster Describe bug is thread measures applied code behavior be thead Screenshots Desktop complete following information OS mac context Nop class PersistentTopic have field replicators class ConcurrentOpenHashMap is race condiftion method addReplicationCluster return cursor localCluster  s is race condition threads run code example Thread A is execute remove Thread B inserts non null PersistentReplicator thread A delete PersistentReplicator thread B created
12885	Bug consuming case Key_Shared subscription Describe bug See   is race condition PersistentDispatcherMultipleConsumers client closed messaages Explanation is core steps case produce messages m0 m9 wait c1 got message create c2 setting c1 produce messages m10 m19 c2 be receive messages c1 is done processing got prefetched Call c2 receive receive m0 is chance return m10 race condition happens step6 step6 is retry loop going consumer Thread PersistentDispatcherMultipleConsumers  readMoreEntries synchronized calculateToRead return xxx getMessagesToReplayNow return m10 m14 havePendingReplayRead Thread PersistentDispatcherMultipleConsumers  readEntriesComplete synchronized PersistentStickyKeyDispatcherMultipleConsumers  sendMessagesToConsumers m10 m14 DEBUG Log consumer c1 messages read type is Replay send c1 runs permits DEBUG Log consumer c2 messages read type is Replay send c2 wait c1 complete messages close c1 PersistentDispatcherMultipleConsumers  removeConsumer be called Thread3 PersistentDispatcherMultipleConsumers  removeConsumer calls readMoreEntries does happens order Thread1 Thread3 Thread2 disorder occurs readMoreEntries calculateToRead return  1 havePendingReplayRead is Thread1 readMoreEntries returns actions Reproduce Steps reproduce behavior reproduce environment changing 100ms 1ms Line behavior Screenshots Nop Desktop complete following information OS macOS context  s test KeySharedSubscriptionTest  testRemoveFirstConsumer asyncReplayEntriesInOrder m10 m14 asyncReplayEntries readEntriesComplete async consumer send message schedule call readMoreEntries 100ms forEach addMessageToReplay m0 m9 Thread3 happens Thread2 everything is is cases time Thread1 Thread2 is Thread2 reading ended got m10 m14 dispatch select consumer c2 have c1 waiting client c2 got m10 m0 java Run Test KeySharedSubscriptionTest  testRemoveFirstConsumer hit race condition retries case designed testRemoveFirstConsumer consuming order be
12929	Deadlock internalDeleteSubscription metadata store callback thread Describe bug metadata store  6 1   prio os_prio cpu ms elapsed s tid nid waiting condition 0x00007f7001ce1000 issue is Reproduce behavior metadata store callback thread deadlock Screenshots add screenshots help explain problem Desktop complete following information context Add context problem doing topic operations delete subscription result deadlock metadata store callback thread see stack trace State WAITING parking Method parking wait CompletableFuture is race condition have been come way reproduce is inin node broker setup creating deleting topic consumers OS g iOS
13004	metadata Race condition ResourceLockImpl  revalidate Describe bug fails line Line 693a066 Call stack A Node Delete Event LockManagerImpl  handleDataNotification ResourceLockImpl  lockWasInvalidated ResourceLockImpl  revalidate Call stack B ResourceLockImpl  acquireWithNoRevalidation fails LockBusyException ResourceLockImpl  revalidate See Line 693a066 revalidate newValue node is deleted ResourceLockImpl  revalidate are called time is going fail Reproduce Steps reproduce behavior  s reproduce add 5ms delay MetadataStore  get use DelayInjectionMetadataStore metadata add DelayInjectionMetadataStore   Run updateValueWhenKeyDisappears times See error behavior Screenshots NA Desktop complete following information context NA unit test LockManagerTest  updateValueWhenKeyDisappears have chance fails following exception CompletionException MetadataStoreException Resource path is locked Caused MetadataStoreException Resource path is locked java digging found  s is race condition method ResourceLockImpl  revalidate ResourceLockImpl  acquire java case updateValue is failed updateValue success case OS g iOS
13923	Proxy Race condition Pulsar Proxy causes UnsupportedOperationExceptions Proxy logs Describe bug nal nal l nal nal l nal nal l nal nal Reproduce Steps reproduce behavior Setup Pulsar clusters enable geo replication namespace is shared clusters Create topic partitions replicated namespace Restart brokers cluster get geo replication connections re initialize have reproduced issue Pulsar Proxy logs behavior race conditions be handled Pulsar Proxy is UnsupportedOperationExceptions appear Proxy logs issue was reproduced Geo replication was configured clusters pulsar proxy io  2 3 INFO ProxyConnection New connection opened pulsar proxy io  2 3 INFO ProxyConnection connection init proxy handler authenticated role superuser hasProxyToBrokerUrl pulsar proxy io  2 3 WARN DefaultChannelPipeline An exceptionCaught event was fired reached tail pipeline means handler pipeline did handle exception UnsupportedOperationException
13964	example failure   prio os_prio cpu ms elapsed s tid nid waiting condition 0x00007f46e549e000 pulsar client shutdown threadawaiting notification pulsar client shutdown threadawaiting notification  s deadlock tests close hangs hangs Example shutdown State WAITING parking Method parking wait CompletableFuture Method
13986	Transactiion Performance bottleneck TransactionBufferHandler Is enhancement request related problem describe synchronization lock added timeout cause performance bottleneck TransactionBufferHandler Describe solution like Do use run method timeout processing Do use sync locks
14362	Broker Healthcheck Endpoint Exposes Race Conditions Describe bug are issues exposed behavior resulting stack traces call endpoint force fail is chance NPE Lines f7f8619 code is is called lock subscription remove subscription method is blocking pulsar thread reason Lines f7f8619  Override  Override Reproduce Steps reproduce behavior Deploy broker Observer logs Resulting stack trace behavior expect health check endpoint work calls appears be race conditions brokers health endpoint verified is 2 9 1 looks is master java java  s fix endpoint make work calls am going start focusing calls  s need rerun step times Given is race endpoint is guaranteed trigger time  090  0000 pulsar web  36 2 INFO BrokersBase Running healthCheck topic pulsar pulsar healthcheck  094  0000 pulsar io  4 3 INFO ProducerImpl pulsar pulsar healthcheck Creating producer cnx id 0x8bb88ae1 L R  094  0000 pulsar io  4 4 INFO ServerCnx pulsar pulsar healthcheck Creating producer producerId  095  0000 pulsar io  4 3 INFO ConsumerImpl pulsar pulsar healthcheck reader b624a86dcd Subscribing topic cnx id 0x8bb88ae1 L R consumerId  096  0000 pulsar io  4 4 INFO ServerCnx Subscribing topic pulsar pulsar healthcheck reader b624a86dcd  106  0000 pulsar io  4 3 INFO ProducerImpl pulsar pulsar healthcheck pulsar  0 171 Created producer cnx id 0x8bb88ae1 L R  124 commonPool worker INFO PersistentTopic pulsar pulsar healthcheck reader b624a86dcd Creating subscription msg id  125 commonPool worker INFO NonDurableCursorImpl pulsar pulsar healthcheck Created cursor read position mark position  125 commonPool worker INFO ManagedCursorImpl pulsar pulsar healthcheck reader b624a86dcd Rewind  125 commonPool worker INFO PersistentTopic pulsar pulsar healthcheck are replicated subscriptions topic  125 commonPool worker INFO PersistentTopic pulsar pulsar healthcheck reader b624a86dcd Created subscription  125 commonPool worker INFO ServerCnx Created subscription topic pulsar pulsar healthcheck reader b624a86dcd  126  0000 pulsar io  4 3 INFO ConsumerImpl pulsar pulsar healthcheck reader b624a86dcd Subscribed topic consumer  144  0000 pulsar client  39 1 INFO RequestLog 127 0 0 1 Feb GET admin v2 brokers health HTTP curl  143  0000 pulsar web  36 5 INFO BrokersBase Running healthCheck topic pulsar pulsar healthcheck  145  0000 pulsar web  36 5 INFO PersistentSubscription pulsar pulsar healthcheck reader b624a86dcd  151  0000 pulsar web  36 5 INFO PersistentSubscription pulsar pulsar healthcheck reader b624a86dcd closed subscription NonDurableCursorImpl ledger pulsar pulsar healthcheck ackPos readPos  151  0000 pulsar web  36 5 INFO PersistentSubscription pulsar pulsar healthcheck reader b624a86dcd closed dispatcher reader  151  0000 pulsar io  4 4 INFO ServerCnx PersistentTopic topic pulsar pulsar healthcheck pulsar  0 171 Closing producer cnx producerId  152  0000 pulsar web  36 5 INFO PersistentSubscription pulsar pulsar healthcheck reader b624a86dcd closed subscription NonDurableCursorImpl ledger pulsar pulsar healthcheck ackPos readPos  152  0000 pulsar web  36 5 INFO PersistentSubscription pulsar pulsar healthcheck reader b624a86dcd subscription  152  0000 pulsar io  4 4 INFO ServerCnx PersistentTopic topic pulsar pulsar healthcheck pulsar  0 171 Closed producer cnx producerId  152  0000 pulsar io  4 4 INFO ServerCnx Closing consumer consumerId  152  0000 pulsar io  4 3 INFO ProducerImpl pulsar pulsar healthcheck pulsar  0 171 Closed Producer  153  0000 pulsar io  4 3 INFO ClientCnx Broker notification Closed consumer  153  0000 pulsar io  4 4 WARN ServerCnx Consumer was registered connection consumerId  153  0000 pulsar io  4 3 INFO ConnectionHandler pulsar pulsar healthcheck reader b624a86dcd Ignoring reconnection request state Closing  153  0000 pulsar io  4 3 WARN ClientCnx id 0x8bb88ae1 L R Received error server Consumer found  155  0000 pulsar io  4 3 INFO ConsumerImpl pulsar pulsar healthcheck reader b624a86dcd Closed consumer  158  0000 bookkeeper ml scheduler OrderedScheduler  0 0 ERROR PersistentSubscription pulsar pulsar healthcheck reader b624a86dcd Error deleting subscription CompletionException BrokerServiceException ManagedLedgerException ManagedCursor found reader b624a86dcd Caused BrokerServiceException ManagedLedgerException ManagedCursor found reader b624a86dcd Caused ManagedLedgerException ManagedCursor found reader b624a86dcd  163  0000 pulsar io  4 3 WARN BrokersBase Error closing reader healthcheck  170  0000 pulsar io  4 3 INFO ProducerImpl pulsar pulsar healthcheck Creating producer cnx id 0x8bb88ae1 L R  175  0000 pulsar io  4 4 INFO ServerCnx pulsar pulsar healthcheck Creating producer producerId  175  0000 pulsar io  4 3 INFO ConsumerImpl pulsar pulsar healthcheck reader 37f6b60cd2 Subscribing topic cnx id 0x8bb88ae1 L R consumerId  177  0000 pulsar io  4 4 INFO ServerCnx Subscribing topic pulsar pulsar healthcheck reader 37f6b60cd2  182  0000 pulsar io  4 3 INFO ProducerImpl pulsar pulsar healthcheck pulsar  0 172 Created producer cnx id 0x8bb88ae1 L R  192 commonPool worker INFO PersistentTopic pulsar pulsar healthcheck reader 37f6b60cd2 Creating subscription msg id  192 commonPool worker INFO NonDurableCursorImpl pulsar pulsar healthcheck Created cursor read position mark position  193 commonPool worker INFO ManagedCursorImpl pulsar pulsar healthcheck reader 37f6b60cd2 Rewind  193 commonPool worker INFO PersistentTopic pulsar pulsar healthcheck are replicated subscriptions topic  193 commonPool worker INFO PersistentTopic pulsar pulsar healthcheck reader 37f6b60cd2 Created subscription  193 commonPool worker INFO ServerCnx Created subscription topic pulsar pulsar healthcheck reader 37f6b60cd2  194  0000 pulsar io  4 3 INFO ConsumerImpl pulsar pulsar healthcheck reader 37f6b60cd2 Subscribed topic consumer  209  0000 pulsar io  4 4 INFO ServerCnx PersistentTopic topic pulsar pulsar healthcheck pulsar  0 172 Closing producer cnx producerId  209  0000 pulsar io  4 4 INFO ServerCnx PersistentTopic topic pulsar pulsar healthcheck pulsar  0 172 Closed producer cnx producerId  210  0000 pulsar io  4 3 INFO ProducerImpl pulsar pulsar healthcheck pulsar  0 172 Closed Producer  210  0000 pulsar io  4 4 INFO ServerCnx Closing consumer consumerId time got stack trace case was using custom build Pulsar line numbers are bit NPEs are be addressed pulsar web  40 6 ERROR PersistentSubscription pulsar pulsar 10 16 1 52 8080 healthcheck reader 6a02552209 Error deleting subscription CompletionException NullPointerException invoke Source Caused NullPointerException
14413	Describe bug Retry topics are enabled ConsumerBuilderImpl performs compatibility check look DLQ Retry topics were created version Pulsar using naming scheme does calling getPartitionedTopicMetadata using get block waiting results was implemented   fix add Timeout was implemented   fix does block calling thread lookup Reproduce Call subscribeAsync enableRetry calling thread be blocked metadata lookup is behavior subscribeAsync return CompletableFuture performing IO Proposed Fix Restructure subscribeAsync chain getPartitionedTopicMetadata calls blocking Do perform metadata lookup DLQ Retry topic names are specified Add flag disable compatibility check projects do need project maintainer are proposal  m raise PR change subscribeAsync blocks calling thread getPartitionedTopicMetadata getPartitionedTopicMetadata be issue code attempt call subscribeAsync Pool using Netty signature subscribeAsync implies  s seems have subscribeAsync blocks Note is breaking change behavior was call pool case were running custom SLF4J log exporter thread pool resulted deadlock number subscribeAsync calls exceeded pool size is example decision part example blocking be Note blocking call is made retry DLQ names are specified DeadLetterPolicy scenario check be needed blocking calling Thread results lookup requests
14438	DeleteTopicForcefully block Line d1fb88a pulsar web  44 4   prio os_prio tid nid waiting condition 0x00007fcabc99e000 scene dump thread times see wait java State WAITING parking parking wait CompletableFuture
14633	setupTopicPublishRateLimiterMonitor block causing deadlock metadata store operations Describe bug Line 2b3e8ae block causing metadata operations deadlock metadata store  6 1   prio os_prio cpu ms elapsed s tid nid waiting monitor entry 0x00007f15a7805000 Reproduce way reproduce problem have seen production deployment behavior method block java State BLOCKED object monitor waiting lock BrokerService
17446	Bug Producer be blocked chunking messages blockIfQueueFull is enabled Search asking searched issues found nothing Version Pulsar reproduce step be reproduced following  Test  Cleanup chunkMaxMessageSize blockIfQueueFull maxPendingMessages did expect see reason bug is chunk message semaphore is obtained Lines way blockIfQueueFull maxPendingMessages chunking are enabled time risk deadlock exists number chunks message is did see Anything response Are submit PR  m submit PR Producer byte producer enableChunking java message is split number chunks e message is chunkMaxMessageSize is set remaining semaphores be acquired sending send sendAsync message be blocked
17913	Bug Deadlock reading Schema BookKeeper Search asking searched issues found nothing Version rc reproduce step is combination facts end broker ZK client thread stuck EventThread   daemon prio os_prio cpu ms elapsed s tid nid waiting condition 0x00007f3213fb8000 did expect see broker works did see broker is Anything is consequence   problem is PulsarRegistrationClient use MetadataCache is chance load value blocking call ZK BookKeeper Zk Registration Driver perform reads method Are submit PR  m submit PR State WAITING parking Method parking wait CompletableFuture
18196	Bug locallyAcquiredLocks leak OwnershipCache Search asking searched issues found nothing Version master reproduce step review code 34M did expect see did see leak Anything response Are submit PR  m submit PR be remove bundle
18988	Bug Deadlock pulsar io metadata store transactions enabled Search asking searched issues found nothing Version Seen believe issue exists master reproduce reproduce step reproduce did expect see get deadlock did see Metadata store Z stdout F owned pulsar io  12 16 Id pulsar io Z stdout F owned metadata store  18 1 Id Anything response Are submit PR  m submit PR Z stdout F locked PendingAckHandleImpl 1289d850 Z stdout F metadata store  18 1 Id BLOCKED PersistentSubscription 981a97c Z stdout F locked PersistentSubscription 981a97c Z stdout F locked PersistentSubscription 981a97c Z stdout F pulsar io  12 16 Id BLOCKED PendingAckHandleImpl 1289d850