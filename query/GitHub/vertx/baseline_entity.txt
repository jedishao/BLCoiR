1247	Deadlock connection is being used HttpClient is closing Thread state BLOCKED Thread state BLOCKED happens x thread hold lock lock   try acquire lock lock   thread hold lock   handleClosed try hold lock   checkClosed boom get deadlock do have repro  s reproduce demonstrate stack trace close  bci line Interpreted frame close  bci line Interpreted frame checkClosed  bci line Interpreted frame HttpMethod String int String MultiMap  bci line Interpreted frame HttpMethod int String String  bci line Interpreted frame get int String String  bci line Interpreted frame Handler Throwable  bci line Interpreted frame Object  bci Interpreted frame  bci line Interpreted frame handleClosed  bci line Interpreted frame run  bci Interpreted frame lambda ContextTask Handler  bci line Compiled frame run  bci Compiled frame ContextTask  bci line Compiled frame ChannelHandlerContext  bci line Interpreted frame invokeChannelInactive  bci line Interpreted frame fireChannelInactive  bci line Interpreted frame ChannelHandlerContext  bci line Interpreted frame ChannelHandlerContext  bci line Interpreted frame invokeChannelInactive  bci line Interpreted frame fireChannelInactive  bci line Interpreted frame ChannelHandlerContext  bci line Interpreted frame ChannelHandlerContext  bci line Interpreted frame ChannelHandlerContext  bci line Interpreted frame invokeChannelInactive  bci line Interpreted frame fireChannelInactive  bci line Interpreted frame fireChannelInactive  bci line Interpreted frame run  bci line Interpreted frame runAllTasks  bci line Compiled frame run  bci line Compiled frame run  bci line Compiled frame run  bci line Compiled frame
1302	Vertx Stacktrace EventLoop thread blocked clusteredVertx EventLoop thread blocked clusteredVertx Method clusteredVertx called java thread application startup vertx blocked thread checker WARN BlockedThreadChecker Thread x eventloop thread 0 5 has been blocked ms time limit is VertxException Thread blocked wait Method handle Source handle Source run Source
1355	Deadlock ClientConnection HttpClientRequestImpl week attached load balancer does poll rest end points have traffic machines instances end deadlock had be kill  9 ed theory brought DC are testing stages was problem imagine be bit hair raising analysis seems Exception handling request response seem be locking HttpClientRequestImpl handleException getlock HttpClientRequestImpl connect lamda was running code Ive seen fixes using JVM RHEL is jstack information Debugger attached Server compiler detected JVM version is b02 Deadlock Detection Found Java level deadlock waiting lock Monitor 0x0000000081060ac8 Object 0x0000000081060ac8 io vertx core http impl ClientConnection waiting lock Monitor 0x00007f6dac2a5e98 Object 0x0000000081060bf0 io vertx core http impl HttpClientRequestImpl Found total deadlock Thread state BLOCKED Thread state BLOCKED looking traffic seems load balancer cisco content switch ACE module sends request gets response resets connection believe behaviour is causing deadlock is go try create test replicate behaviour x eventloop thread 0 is held x eventloop thread 7 x eventloop thread 7 is held x eventloop thread 0 Object  bci line Compiled frame ByteBuf  bci line Compiled frame ClientConnection  bci line Compiled frame ClientConnection  bci line Compiled frame Object  bci Compiled frame ConnectionManager ClientConnection Void  bci line Compiled frame Object  bci Compiled frame lambda ContextTask Handler  bci line Compiled frame run  bci Compiled frame runAllTasks  bci line Compiled frame run  bci line Compiled frame run  bci line Interpreted frame run  bci line Interpreted frame getLock  bci line Compiled frame Throwable  bci line Compiled frame Throwable  bci line Compiled frame Channel ConnectionBase Throwable  bci line Compiled frame run  bci Compiled frame lambda ContextTask Handler  bci line Compiled frame run  bci Compiled frame ContextTask  bci line Compiled frame ChannelHandlerContext Throwable  bci line Compiled frame Throwable  bci line Compiled frame Throwable  bci line Compiled frame ChannelHandlerContext Throwable  bci line Compiled frame Throwable  bci line Compiled frame Throwable  bci line Compiled frame ChannelHandlerContext Throwable  bci line Compiled frame ChannelHandlerContext Throwable  bci line Compiled frame Throwable  bci line Compiled frame Throwable  bci line Compiled frame ChannelHandlerContext Throwable  bci line Compiled frame Throwable  bci line Compiled frame Throwable  bci line Compiled frame Throwable  bci line Compiled frame ChannelPipeline ByteBuf Throwable  bci line Compiled frame read  bci line Compiled frame SelectionKey AbstractNioChannel  bci line Compiled frame SelectionKey  bci line Compiled frame processSelectedKeys  bci line Compiled frame run  bci line Compiled frame run  bci line Interpreted frame run  bci line Interpreted frame
1466	Deadlock ServerConnection HttpClientRequestImpl use HttpClient thread happened Found Java level deadlock Java stack information threads listed related df69aa3     x eventloop thread 0 waiting lock monitor 0x00007f553c037b48 object 0x000000070d5fda10 ServerConnection is held x eventloop thread 3 x eventloop thread 3 waiting lock monitor 0x00007f55d9772a28 object 0x0000000653c73ab0 HttpClientRequestImpl is held x eventloop thread 0 x eventloop thread 0 waiting lock ServerConnection locked HttpClientRequestImpl x eventloop thread 3 waiting lock HttpClientRequestImpl locked ServerConnection locked ServerConnection is chance  s glitch had behaviour instances launched something code looks bit HttpClientRequestImpl  getLock
1469	HttpClientMetrics  createEndpoint be called times endpoint HttpClientMetrics  createEndpoint is called ConnQueue constructor instance ConnQueue be created none is map SPI implementations leak resources acquired  createEndpoint  closeEndpoint be called corresponding queue instance implementation QueueManager  getConnQueue lead HttpClientMetrics  createEndpoint being called times endpoint threads try use HTTP client
1573	Blocked thread warning opening closing AsyncFile Users have reported blocked thread warning opening closing AsyncFile are example stack traces user provided details reported was using mapped Windows shared drive have been reproduce opening issue network filesystem twickle nbd VertxException Thread blocked VertxException Thread blocked
1598	read write done thread issue has been addressed   Async read write is blocking aaa WARN vertx blocked thread checker BlockedThreadChecker Thread x eventloop thread 1 5 has been blocked ms time limit is VertxException Thread blocked
1633	Context  executeBlocking does log blocked threads description provided
1742	File caching implementation thread instance hits FileResolver  resolveFile find cached file resolution file is being copied happen read cached file is copied verticle read data Sample output file data5 1024000bytes file data5 1024000bytes file data6 1024000bytes file data6 1024000bytes file data6 1024000bytes file data7 1024000bytes file data7 1024000bytes file data7 1024000bytes file data8 65516bytes file data8 73703bytes file data8 1024000bytes file data9 646968bytes file data9 1024000bytes file data9 1024000bytes FileResolver implementation caching is thread problem occurs file is be cached is being read verticles issue be reproduced FileSystem  readFileBlocking believe async implementation yield results problem is following Consider use case file is read verticles parallel file does reside filesystem x try cache file moving directory verticle hits FileResolver  resolveFile trigger copying action resource designated cache directory copy action is finished file be read verticle read data problem be reproduced running supplied verticle instances verticle reads files attached jar are MB size outputs size read payload zip run cp jar instances java
1834	Do call HttpServer request ws handler holding locks Motivation Change ServerWebSocket HttpServerRequest handlers are called synchronized lock connection create deadlocks SockJSSocket SockJSSocket uses request websocket reconnects event loops processing Netty event call handlers tick e scheduled run context
1892	Race condition setHandler completion threads verticle junit tests is sample program prints something ERROR implementation FutureImpl is thread using threads cause difficulties running verticle  s callbacks are serialized event loop run do know is behaviour Futures compositions be used intention was make thread projects have encountered problem running implementation setHandler function is called future composition case problem is completion futures runs thread setting handler functions setHandler are result situation handler is called problem seems be future verticles understanding based looking implementation CompositeFutureImpl is
2012	Race condition AsyncFileImpl writesOutstanding AsyncFileImpl is written thread context created counter writesOutstanding get state is counter is updated updated caller thread context write is Fix is use AtomicLong writesOutstanding
2370	HttpClient pool gets connection failure HttpClient pool assumes underlying ConnectionProvider make callback is case case DNS resolver JVM resolver host be resolved
2418	deadlock trying get locks is code illustrates problem Consumer verticle acuires lock1 gets have reproduced problem using HazelcastClusterManager IgniteClusterManager VertxOptions setClusterManager HazelcastClusterManager consumer DeploymentOptions Supplier messagesToSend DeploymentOptions messagesToSend DEFAULT_LOCK_TIMEOUT  Override  Override TEST_ADDRESS clusteredVertx deployVerticle deployVerticle setTimer consumer
2670	Client connections GlobalEventExecutor thread are propagated application Netty bootstrap notify client connections GlobalEventExecutor thread happens boostrap event loop has been determined Vertx expects notifications happen event loop thread results Event loop context executing thread failure
2684	executeBlocking callback run thread resolution happen Mongo client fails stack trace executeBlocking Handler Future Handler AsyncResult execute callback thread runOnContext execution loses race thread completes future happens worker thread completes future happen worker thread hands future thread completes
2773	HttpClient race condition getting connection pool being closed is race condition HttpClient client request connection close pool delivers client request tick connection be removed pool schedule delivery moment client does know connection was closed is connection close fact connection pool hold connections multiples context does allow run pool requests pool situation is avoid re check connection is delivered solution be attach vertx context pool consider connections use context allow eliminate race avoid tick situation e client request is fulfilled connection be called avoid race
2916	HTTP event handler be called holding lock have event handlers are called holding lock lead deadlocks remove
2982	HTTP Client Deadlock is threaddump  m trying provide reproducer seems deadlock is reproduce appears eventloops are blocked doing http client stuff x 3 7 0   prio os_prio tid nid waiting monitor entry 0x00007f54fb771000 State BLOCKED object monitor waiting lock HttpClientRequestImpl locked Http1xClientConnection locked Http1xClientConnection   prio os_prio tid nid waiting monitor entry 0x00007f54fb46d000 State BLOCKED object monitor waiting lock Http1xClientConnection locked HttpClientRequestImpl
3064	HttpServerResponse operation fail stream is is have made improvements have behaviour responses methods stream is ended user fail is programming mistake stream is closed fail fail x operation return result be failed case
3140	Do lock handler calls AsyncFile AsyncFile implementation calls file handlers synchronized block synchronization is reading handler be used calling
3142	Deadlock deploying instances verticle starting server is regression
3232	Vertx  close Future callback handler works second does  Test  Test output is completes returned completes thread pool has been shut await is blocking method waits future complete using setHandler DEBUG VertxTest Shutting promise DEBUG VertxTest Shut promise DEBUG VertxTest Shutting future Exception thread x eventloop thread 24 RejectedExecutionException event executor terminated
3335	Version Context resolveFile be called perform method Do have reproducer Steps reproduce See existsInternal block event loop thread Invoking exists block event loop thread is resolveFile runs runs event loop thread worker thread mock calls resolveFile sleep amount time set breakpoint call test runs Wait blocked thread checker interval execution BlockedThreadChecker report thread has been blocked
3468	openjdk version 1 8 0_252 OpenJDK Runtime Environment build b09 1ubuntu1 b09 OpenJDK Bit Server VM build b09 mode openjdk version 14 0 1 OpenJDK Runtime Environment build Ubuntu 1ubuntu1 OpenJDK Bit Server VM build Ubuntu 1ubuntu1 mode sharing Host Ubuntu amd64 Log Test case  Before  After  Test onSuccess Thread blocked getConnection INFO Running HttpClientDoubleFail WARN Thread x eventloop thread 1 5 has been blocked ms time limit is ms WARN Thread x eventloop thread 1 5 has been blocked ms time limit is ms WARN Thread x eventloop thread 1 5 has been blocked ms time limit is ms WARN Thread x eventloop thread 1 5 has been blocked ms time limit is ms VertxException Thread blocked handle Source handle Source handle Source handle Source handle Source handle Source operationComplete Source operationComplete Source WARN Thread x eventloop thread 1 5 has been blocked ms time limit is ms class HttpClientRequest req1 request HttpClientRequest req2 request exceptionHandler res2
3469	HTTP client retry host self deadlock HTTP client retrying host failure self deadlock close pool performs callback close pool retries fail does retry
3658	Version version did encounter bug is versions Context gap synchronized block method reached future fails synchronized block doComplete method returning tryFail method throws exception method Steps reproduce  Test throw exception depending number executions Extra Mac OS 10 15 7 openjdk version 11 0 6 OpenJDK Runtime Environment AdoptOpenJDK build  10 OpenJDK Bit Server VM AdoptOpenJDK build  10 mode Race condition throws exception futures executing threads are passed is race condition throwing exception futures fail time create situation future thread sees isComplete is making doComplete method returning seeing result is is test class treating unhandled exceptions unit test failures class List  Promise  promises range NUM_THREADS IllegalStateException Result is failed
4024	Concurrency issue listener TCPServerBase  listen Version Context stumbled concurrency issue debugging TCPServerBase context   listener is setting field id port field is pre set listener port is race  s happening listener is registered code is running listen method doBind is done addListener says specified listener is notified future is dependening is listener method code put id pick id port is id having synchronized effect debugging was waited put id was getting port verticle term debugging got port
4069	Deadlock closing Vertx WorkerExecutor met deadlock issue Vertx version investigated looked VertxImpl CloseFuture WorkerExecutorImpl looks deadlock happened Vertx take look Backtrace printed jstack Found Java level deadlock is held Java stack information threads listed Found deadlock Checked vertx code find closing WorkerExecutor do Lock self WorkerExecutorImpl Remove self CloseFuture SharedWorkerPool require Vertx closing Vertx do Lock self VertxImpl CloseFuture synchronized copy list callbacks invoke synchronized block callback is close WorkerExecutorImpl instance copy callbacks CloseFuture happened removing WorkerExecutorImpl CloseFuture be called cause deadlock Time thread Eventloop thread T1 Start Vertx locked VertxImpl instance T2 Start WorkerExecutor locked WorkerExecutorImpl instance T3 CloseFuture list callbacks are copied T6 Close SharedWorkerPool require lock VertxImpl instance was acquired thread T1 is waiting lock be released thread Deadlock Deadlock issue seems exist 4 1 2 case deadlock issue is hit happened be called time thread thread workerExecutor is created createSharedWorkerExecutor waiting lock monitor 0x00007fa958116580 object 0x00000000b3329eb8 WorkerExecutorImpl is held x eventloop thread 0 x eventloop thread 0 waiting lock monitor 0x00007fa89c01ae80 object 0x00000000b3329f58 VertxImpl waiting lock WorkerExecutorImpl locked VertxImpl x eventloop thread 0 waiting lock VertxImpl locked WorkerExecutorImpl T4 Remove WorkerExecutorImpl instance CloseFuture callback is copied T3 does prevent callback being called T5 callback WorkerExecutorImpl instance is called require lock WorkerExecutorImpl instance was acquired eventloop thread T2 is waiting lock be released eventloop thread
4104	Version Beta1 Context we1 executeBlocking followed we2 executeBlocking thread does order call thread makes ends running asyncResultHandler deadlock Do have reproducer is JUnit test reproduces  Override  Test used Intellij Evaluate log breakpoint option insert sleep line lead reproductions executing test Steps reproduce suspect is reproduce constructed test timing requirements are executeBlocking holds lock WorkerExecutor blocking call has completed ran Java deadlock application based stack trace blocked threads seems be caused thread running executeBlocking WorkerExecutor instances order thread looked x eventloop thread 0 waiting lock WorkerExecutorImpl locked WorkerExecutorImpl x eventloop thread 2 waiting lock WorkerExecutorImpl locked ContextScheduler locked WorkerExecutorImpl executeBlocking looks call runs blockingCodeHandler has finished asyncResultHandler be executed thread means stay synchronized block continue thread does we1 executeBlocking ign we2 executeBlocking ign2 Note need add breakpoint line executeBlocking ensure blockingCodeHandler finishes runs
4221	Pool deliver lease connection race happen pool delivers lease Leases are created pool post actions read connection slot became meantime post action is executed leads NPE HttpClient get connection connection reported   comment
4275	ConnectionBase exception handler be called synchronized block
4278	ArrayList concurrency error deploying verticles have problem startup applications attempts reproduce occur Java version openjdk version LTS is error is piece code is triggering concurrency error class DeploymentManager method registerVerticleFactory modCount expectedModCount analysis ArrayList is being modified is being sorted have verticles application iterate collection class names invoke method vertex rx java2 rxDeployVerticle String name DeploymentOptions options let know information is required Thanks version ConcurrentModificationException exception is thrown is code