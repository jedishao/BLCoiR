39	Locking Jersey Lock Unlock Jersey Resource User POST request System LOCK System stuff System UNLOCK User POST request System LOCK System stuff System UNLOCK system crashes point view attachment LOCK UNLOCK loop works LOCK UNLOCK Threads works WARN netty channel DefaultChannelPipeline exceptionCaught event fired reached tail pipeline handler pipeline handle exception java lang IllegalStateException complete DefaultPromise incomplete netty common jar redisson jar redisson jar netty transport jar netty transport jar redisson jar redisson jar netty transport jar netty transport jar netty transport jar netty transport jar netty transport jar netty transport jar netty transport jar netty transport jar netty transport jar netty transport jar netty transport jar netty common jar Locking Jersey lock time set map queue topic nodes options
40	Lock TTL plan add TTL Lock operation Don confuse tryLock TIME refer situation thread dead leave resource locked deadlock Lock TTL lock async test time queue redisson topic set
67	RedissonList concurrency problem safe rely RedissonList size invocation technically calling subList size consecutive calls hasNext iterator exception RedissonList concurrency problem test async address method executor string reactive multimap
83	Deadlock obtaining lock Thread stuck obtaining lock Running redis cli returns empty list INFO jvm http exec daemon prio tid nid Object wait INFO jvm java lang Thread WAITING object monitor INFO jvm INFO jvm INFO jvm INFO jvm locked netty util concurrent DefaultPromise INFO jvm INFO jvm INFO jvm INFO jvm lock concurrently held thread jvm released Redisson version Deadlock obtaining lock test lock async time unlock thread single count
89	RedissonLock locks heavy production Redisson locks locked application stalls Redisson thread locked release lock Thread BLOCKED java lang Object wait bci Compiled frame imprecise java lang Object wait bci Compiled frame netty util concurrent DefaultPromise await bci Compiled frame netty util concurrent DefaultPromise awaitUninterruptibly java util concurrent TimeUnit bci Compiled frame lambdaworks redis RedisAsyncConnection await netty util concurrent java util concurrent TimeUnit bci Compiled frame lambdaworks redis RedisConnection await netty util concurrent bci Compiled frame lambdaworks redis RedisConnection multi bci Compiled frame org redisson RedissonLock unlock lambdaworks redis RedisConnection bci Compiled frame org redisson RedissonLock access org redisson RedissonLock lambdaworks redis RedisConnection bci Compiled frame org redisson RedissonLock execute lambdaworks redis RedisConnection bci Compiled frame org redisson RedissonLock execute lambdaworks redis RedisConnection bci Compiled frame org redisson connection MasterSlaveConnectionManager write org redisson async SyncOperation bci Compiled frame org redisson connection MasterSlaveConnectionManager write org redisson async SyncOperation bci Compiled frame org redisson RedissonLock unlock bci Compiled frame note threads locked awaiting lock previous thread checked threads jstack relevant output Thread BLOCKED java lang Object wait bci Compiled frame imprecise java lang Object wait bci Interpreted frame netty util concurrent DefaultPromise awaitUninterruptibly bci Interpreted frame netty util concurrent DefaultPromise awaitUninterruptibly bci Interpreted frame org redisson RedissonLock lockInterruptibly java util concurrent TimeUnit bci Interpreted frame org redisson RedissonLock lockInterruptibly bci Interpreted frame org redisson RedissonLock lock bci Interpreted frame checked Redis redis cli betCreation key thread blocked release lock threads waiting separate lock locked lock RedissonLock locks lock async time operation topic redisson set map
106	RedissonList Iterator Race Conditions RedissonList iterator data race condition hasNext call set emptied list NoSuchElementException RedissonList Iterator Race Conditions async lock set sort redisson map topic time
169	ConnectionManager call hangs exception thrown Command processing Bug MasterSlaveConnectionManager hang call exception thrown CommandHandler replicate bug RedissonMap JsonJacksonCodec instance doesn constructor fetch object RedissonMap call deserialization object fail MapOutput missing constructor thread calling RedissonMap block details happening method awaits object released Command complete called complete call executed decode method CommandHandler RedisStateMachine processes Redis response RedisStateMachine exception complete won called result exception set object causing calling thread block MasterSlaveConnectionManager method Pull request test proving bug bug proposition published shortly ConnectionManager call hangs exception thrown Command processing async connection command eval handle write reference promise
199	Concurrency Issues Today tests experiment Redisson performance build master discovered concurrency issues code issues wanted guys aware simple app Creates Redisson instance connection pool masters slaves creates quick thread pool Executors newFixedThreadPool feeds Runnables generates random string adds Deque Add millions queued Runnables Increase number threads add call Deque ton exceptions don include code stack trace snippet main INFO org redisson connection ClusterConnectionManager master slot range main INFO org redisson connection ClusterConnectionManager master slot range main INFO org redisson connection ClusterConnectionManager master slot range nioEventLoopGroup WARN netty channel DefaultChannelPipeline exceptionCaught event fired reached tail pipeline handler pipeline handle exception netty handler codec DecoderException java lang IllegalStateException complete DefaultPromise failure java util concurrent CancellationException Caused java lang IllegalStateException complete DefaultPromise failure java util concurrent CancellationException nioEventLoopGroup WARN netty channel DefaultChannelPipeline exceptionCaught event fired reached tail pipeline handler pipeline handle exception netty handler codec DecoderException java lang IllegalStateException complete DefaultPromise failure java util concurrent CancellationException Caused java lang IllegalStateException complete DefaultPromise failure java util concurrent CancellationException nioEventLoopGroup WARN netty channel DefaultChannelPipeline exceptionCaught event fired reached tail pipeline handler pipeline handle exception nioEventLoopGroup WARN netty channel DefaultChannelPipeline exceptionCaught event fired reached tail pipeline handler pipeline handle exception netty handler codec DecoderException java lang IllegalStateException complete DefaultPromise failure java util concurrent CancellationException Caused java lang IllegalStateException complete DefaultPromise failure java util concurrent CancellationException nioEventLoopGroup WARN netty channel DefaultChannelPipeline exceptionCaught event fired reached tail pipeline handler pipeline handle exception nioEventLoopGroup WARN netty channel DefaultChannelPipeline exceptionCaught event fired reached tail pipeline handler pipeline handle exception nioEventLoopGroup WARN netty channel DefaultChannelPipeline exceptionCaught event fired reached tail pipeline handler pipeline handle exception netty handler codec DecoderException java lang IllegalStateException complete DefaultPromise failure java util concurrent CancellationException Caused java lang IllegalStateException complete DefaultPromise failure java util concurrent CancellationException nioEventLoopGroup WARN netty channel DefaultChannelPipeline exceptionCaught event fired reached tail pipeline handler pipeline handle exception netty handler codec DecoderException java lang IllegalStateException complete DefaultPromise failure java util concurrent CancellationException Caused java lang IllegalStateException complete DefaultPromise failure java util concurrent CancellationException netty handler codec DecoderException java lang IllegalStateException complete DefaultPromise fdf failure java util concurrent CancellationException Caused java lang IllegalStateException complete DefaultPromise fdf failure java util concurrent CancellationException netty handler codec DecoderException java lang IllegalStateException complete DefaultPromise cdcbd failure java util concurrent CancellationException Caused java lang IllegalStateException complete DefaultPromise cdcbd failure java util concurrent CancellationException netty handler codec DecoderException java lang IllegalStateException complete DefaultPromise failure java util concurrent CancellationException Caused java lang IllegalStateException complete DefaultPromise failure java util concurrent CancellationException nioEventLoopGroup WARN netty channel DefaultChannelPipeline exceptionCaught event fired reached tail pipeline handler pipeline handle exception netty handler codec DecoderException java lang IllegalStateException complete DefaultPromise failure java util concurrent CancellationException Caused java lang IllegalStateException complete DefaultPromise failure java util concurrent CancellationException nioEventLoopGroup WARN netty channel DefaultChannelPipeline exceptionCaught event fired reached tail pipeline handler pipeline handle exception netty handler codec DecoderException java lang IllegalStateException complete DefaultPromise failure java util concurrent CancellationException Caused java lang IllegalStateException complete DefaultPromise failure java util concurrent CancellationException nioEventLoopGroup WARN netty channel DefaultChannelPipeline exceptionCaught event fired reached tail pipeline handler pipeline handle exception netty handler codec DecoderException java lang IllegalStateException complete DefaultPromise failure java util concurrent CancellationException Caused java lang IllegalStateException complete DefaultPromise failure java util concurrent CancellationException nioEventLoopGroup WARN netty channel DefaultChannelPipeline exceptionCaught event fired reached tail pipeline handler pipeline handle exception netty handler codec DecoderException java lang IllegalStateException complete DefaultPromise failure java util concurrent CancellationException Caused java lang IllegalStateException complete DefaultPromise failure java util concurrent CancellationException nioEventLoopGroup WARN netty channel DefaultChannelPipeline exceptionCaught event fired reached tail pipeline handler pipeline handle exception netty handler codec DecoderException java lang IllegalStateException complete DefaultPromise failure java util concurrent CancellationException Caused java lang IllegalStateException complete DefaultPromise failure java util concurrent CancellationException nioEventLoopGroup WARN netty channel DefaultChannelPipeline exceptionCaught event fired reached tail pipeline handler pipeline handle exception netty handler codec DecoderException java lang IllegalStateException complete DefaultPromise failure java util concurrent CancellationException Caused java lang IllegalStateException complete DefaultPromise failure java util concurrent CancellationException Concurrency Issues async test node connection set method address command
254	EOFException RLock SerializationCodec configure Redisson SerializationCodec JsonJacksonCodec code environment concurrent threads Lock object sync thread exception unlock expiration Previous major version Redisson issues problem CountDown nioEventLoopGroup WARN netty channel DefaultChannelPipeline exceptionCaught event fired reached tail pipeline handler pipeline handle exception netty handler codec DecoderException java EOFException Caused java EOFException EOFException RLock SerializationCodec lock test async time multi read leasetime transactional
455	latency issue call Redis Redisson implement distributed lock project load test distributed lock SINGLE redis mode latency APIs wired latency APIs greater average latency percent latecy jstack call stack threads WAITING place Processor prio tid nid Object wait java lang Thread WAITING object monitor locked netty util concurrent DefaultPromise test dumped network packages tcpdump Redis Redis server didn find slow query latency latency API time cost project network check suggestion issue latency issue call Redis test async load function deque blocking restore list
486	Rlock performance issue reddison Rlock cluster setup latency acquire lock unlock issue opened zhxjouc problem working latency thread lock key code running Java thread pool accessing redis notice work pool size latency lock working threads lock delay thread overhead issue performance locking unlocking Rlock performance issue lock test async time multi read leasetime transactional
491	Dead Locks Happen lock Process heavy concurrency application lock requests sink responses lock lease time passed requests wait RedissonLock lockInterruptibly exact position RedissonLock RedissonLock subscribe opinion thread removes netty listener thread happen Thread loop lock subscription Thread applied subscription waits result Thread lock enters RedissonLock unsubscribe step removes listeners channel includes listener Thread Thread subscription response hang issue https github pull solved completely apply ttl algorithm RedissonLock step cost time timeout dead lock prevented work thread dump dead lock http nio exec daemon prio prio tid nid waiting condition java lang Thread WAITING parking Dead Locks Happen lock Process async lock pub time read entry listener transactional
530	Deadlock lock raise issue deadlocks bug exist making big headache heavy loaded tasks client talks claster located remotely single local claster local servers unable reproduce remote server rate runs heavy load JUnit test thread locked stuck CommandAsyncService await exits understand wrong mainPromise object staying incomplete change understand logics CommandAsyncService async function deals connection retry redirections release fail mainPromise object nightmare spagetty promises futures code difficult read impossible analyse BUG thoughts Deadlock lock test lock async time unlock thread single count
533	Exception RedissonMultiLock independent masters single server config create Redission instance java util concurrent TimeUnit org redisson Config org redisson Redisson org redisson RedissonClient org redisson core RLock org redisson core RedissonMultiLock LockTest RedissonClient redisson RedissonClient redisson RedissonClient redisson RedissonClient redisson RedissonClient redisson main String args redisson createClient redisson createClient redisson createClient redisson createClient redisson createClient System println lock lock shout Redis instance port System println lock System println lock lock RedissonClient createClient String port Config config Config config useSingleServer setAddress port RedissonClient redisson Redisson create config redisson lock String lockKey RLock lock redisson getLock lockKey RLock lock redisson getLock lockKey RLock lock redisson getLock lockKey RLock lock redisson getLock lockKey RLock lock redisson getLock lockKey RedissonMultiLock lock RedissonMultiLock lock lock lock lock lock lockResult lockResult lock tryLock TimeUnit MILLISECONDS InterruptedException printStackTrace System println lock successfuly lockResult lockResult RedissonMultiLock works fine redis nodes alive shutdown redis nodes RedisConnectionException Exception thread main org redisson client RedisConnectionException init connections amount initialized Server Redlock algorithm lock node exception RedissonMultiLock correctly acquire lock instances sequentially key random instances step setting lock instance client timeout small compared total lock auto release time order acquire auto release time seconds timeout milliseconds range prevents client remaining blocked time talk Redis node instance talk instance ASAP Exception RedissonMultiLock lock async task time transactional test leasetime multi
543	RLock trylock blocks verifying tryLock called wait time thread blocks thread dump stack pasted note environment running Elasticache cluster AWS accessing instances lot command timeouts leading pool thread prio prio tid nid xcd waiting monitor entry java lang Thread BLOCKED object monitor waiting lock org redisson pubsub LockPubSub RLock trylock blocks lock test async time thread timeout multi failed
757	Unlock unlock unlock FairLock thread delay threads lock test clase java util concurrent ExecutorService java util concurrent Executors java util concurrent TimeUnit org junit org junit Test org redisson Redisson org redisson api RLock org redisson api RedissonClient org redisson config Config org slf Logger org slf LoggerFactory RedissonLockTest String LOCK LOCK Logger log LoggerFactory getLogger RedissonLockTest Test itDoesSomething InterruptedException ExecutorService executorService Executors newFixedThreadPool Config config Config config useSingleServer setAddress RedissonClient redisson Redisson create config executorService execute log info Attempting lock executor Thread currentThread getId RLock fairLock redisson getFairLock LOCK fairLock tryLock TimeUnit SECONDS log info Sleeping lock holder thread Thread sleep InterruptedException log error Thread sleep interrupted log info Releasing lock executor LOCK fail Unable acquire lock reason InterruptedException log error Interrupted fairLock isHeldByCurrentThread fairLock unlock executorService execute Thread sleep InterruptedException printStackTrace log info Attempting lock executor Thread currentThread getId RLock fairLock redisson getFairLock LOCK fairLock tryLock TimeUnit SECONDS log info block fail block log info Releasing lock executor LOCK log info block lock InterruptedException log error Interrupted fairLock isHeldByCurrentThread fairLock unlock executorService awaitTermination TimeUnit SECONDS log info Attempting lock unlocked RLock fairLock redisson getFairLock LOCK fairLock tryLock TimeUnit SECONDS log info Lock acquired fail unlocked lock LOCK InterruptedException log error Interrupted fairLock isHeldByCurrentThread fairLock unlock Unlock unlock lock test time async thread read unlock write
758	RReadWriteLock reentrant expecting RReadWriteLock reentrant wiki describes emphasis Redisson distributed reentrant ReadWriteLock object Java simple test Config config Config config useSingleServer setAddress redisAddress client Redisson create config RReadWriteLock readWriteLock client getReadWriteLock TEST LOGGER warn Acquiring write lock readWriteLock writeLock lock LOGGER warn Write lock acquired acquiring read lock success readWriteLock readLock tryLock TimeUnit SECONDS LOGGER warn Lock success success InterruptedException printStackTrace app main WARN craigotis myapp core lock RedisLockService Acquiring write lock app main WARN craigotis myapp core lock RedisLockService Write lock acquired acquiring read lock app main WARN craigotis myapp core lock RedisLockService Lock success reentrancy clause ReentrantReadWriteLock Javadoc Additionally writer acquire read lock vice versa redisson relies locks reentrant Thread bug configuration issue RReadWriteLock reentrant test read lock write expirable unlock remove counted
775	Indefinite lock lost master failover indefinitely held locks disappear master slave failover block reschedule renewal attempt update fails update fail failover lock good exception thrown update fails org redisson RedissonLock update lock chaos pixel gun rQnzwnEeOcovlp fBZCw key expiration org redisson client RedisTimeoutException Redis server response timeout occured command EVAL params redis call hexists ARGV redis call pexpire ARGV retu chaos pixel gun rQnzwnEeOcovlp fBZCw key edaecd bdc fff channel redisson jar netty jar netty jar netty jar Indefinite lock lost master failover async redis sentinel servers connection named node master
828	URIBuilder thread safe test multi cluster setup java net URL factory original factory Scenario Thread replaceURLFactory currentFactory original start create URL Thread replaceURLFactory currentFactory newFactory currentFactory start create URL Thread restoreURLFactory set URL factory “new URL call load handlers ebersb URIBuilder thread safe codec jackson object create kryo stream pack channel
889	Cache ops Redisson JCache Provider cache operations time execute log WARN contaazul cache cdi interceptor CacheResultInterceptor http executor threads Cache result CompanyDemoFindService find milliseconds cases takes minutes thread dump noticed EJB async threads http executor threads generating huge queue async thread pool captura tela Thread dump threads Complete thread dump downloaded EJB async Thread java lang Thread TIMED WAITING parking wait java util concurrent Semaphore NonfairSync contaazul company CompanyDemoFindService Proxy Weld Proxy find CompanyDemoFindService Proxy Weld Proxy java Locked ownable synchronizers locked java util concurrent ThreadPoolExecutor Worker redisson Thread java lang Thread WAITING parking wait java util concurrent locks AbstractQueuedSynchronizer ConditionObject Locked ownable synchronizers redisson netty Thread java lang Thread RUNNABLE locked netty channel nio SelectedSelectionKeySet locked java util Collections UnmodifiableSet locked eab sun nio EPollSelectorImpl Locked ownable synchronizers lock issue don solve Cache ops cache test set async redisson map config count
891	RReadWriteLock incompatible reentry RReadWriteLock bug confuse time wrong ops yesterday logic problem ops write lock succeed read lock succeed read unlock succeed write unlock hold current thread Assuming unlock holding check holding check running concurrent environment IllegalMonitorException write lock succeed write lock succeed write unlock succeed write unlock succeed read unlock delete lock checking write lock bug shouldn RReadWriteLock incompatible reentry test read lock write expirable unlock remove counted
1048	Redisson hang RBatch execute redisson client multi threaded application RBatch batch commands RBatch batch client createBatch batch timeout TimeUnit MILLISECONDS RMapAsync String map batch getMap key RedissonByteArrayMapValueCodec INSTANCE map putAllAsync hashData map expireAsync ttlSeconds TimeUnit SECONDS batch execute test noticed hang time error hang VYM west elb amazonaws lego anchor driftMillis Sep WARN redisson netty netty util concurrent DefaultPromise exception thrown org redisson command CommandBatchService operationComplete org redisson client RedisNodeNotFoundException Node slot hasn discovered thread calling batch hung stacktrack java lang Thread WAITING parking set lockWatchdogTimeout set batch timeout Redisson hang RBatch execute test session batch set key event redisson map
1104	RFairLock dead lock issue report locking issue redisson versions RFairLock instances application competing fair lock time timeout fair lock queue set time hours thread lock redis reporting occurences commands PST redis zrange redisson lock timeout mylock WITHSCORES dfaa cfee baa aff redis lrange redisson lock queue mylock aff dfaa cfee baa timeout zscore timeout set hours Current time Tuesday October GMT DST Tuesday October GMT DST Tuesday October GMT DST haven reproduce issue locally happening daily production environment suspecting problem happening randomly application killed operating system kill happen manage apps redisson version experienced issue Earlier year updating version started problem day reverted waited updated version days decided upgrade assuming problem fixed happened hours reproduce issue appreciated Michael RFairLock dead lock issue test lock async time unlock thread single count
1268	org redisson RedissonTopic removeAllListeners blocked CountDownLatch await hit issue server Redission Redis Client single thread executor handling subscribe unsubscribe multiple channels week blocked server thread print pool thread prio prio tid nid waiting condition java lang Thread WAITING parking parking wait java util concurrent CountDownLatch Sync org redisson RedissonTopic removeAllListeners unable respond request blocked acquireUninterruptibly dig logs exception thrown CommandAsyncService syncSubscription Subscribe timeout Subscribe timeout message days logs issue happened don find prove rare hit reproduce locally luck removeAllListeners option caller pass timeout resolve root wondering people observed issue advise ideas org redisson RedissonTopic removeAllListeners blocked CountDownLatch await test listener async task cluster lock redisson count
1433	Concurrent calls RemoteService result exception Expected behavior Concurrent calls RemoteService result exception Actual behavior Concurrent calls RemoteService result exception Steps reproduce test IService addToThreadUnsafeList Integer element List Integer getList clear ServiceImpl IService List Integer list ServiceImpl list ArrayList addToThreadUnsafeList Integer element System println element list add element Override List Integer getList list Override clear list clear parallelTestUsingExecutorServiceAndPoolSizeOf poolSize ExecutorService executorService Executors newFixedThreadPool poolSize IService service redissonClient getRemoteService IService List futures ArrayList iterations Integer element futures add executorService submit service addToThreadUnsafeList element futures stream allMatch isDone Thread sleep InterruptedException RuntimeException assertThat service getList hasSize iterations Redis version Redisson version Redisson configuration config useSingleServer setAddress redis Concurrent calls RemoteService result exception async remote response result pub command queue cancel
1602	unlock fail expirationRenewal execute Expected behavior unlock success Actual behavior unlock fail Steps reproduce test unlock client redis service network problem unlock Exception network recovery expirationRenewal execute Redis version Redisson version Redisson configuration redisson connectionPoolSize redisson connectionMinimumIdleSize redisson address redisson database redisson password redisson connectTimeout redisson timeout unlock fail expirationRenewal execute test lock timeout set thread time read write
1626	Deadlock RedissonLock JCache number issues Redisson implementation JCache bucket production rate limiting Actual behavior JCache key calls RedissonLock lock lease time RedissonLock creating watchdog thread continuously renews lease lock Redis lockWatchdogTimeout seconds thread runs seconds rare cases watchdog thread canceled meaning continues renewing lease indefinitely instance thread restarted deadlock threads grab lock ultimately bring application threads build Threads RedissonLock wait lock released timeout waiting lock lockInterruptibly leaseTime TimeUnit unit InterruptedException ttl tryAcquire leaseTime unit threadId lock acquired ttl waiting message ttl getEntry threadId getLatch tryAcquire ttl TimeUnit MILLISECONDS getEntry threadId getLatch acquire unlock method RedissonLock fail number reasons timing unlock Redis seconds happened unlock fails watchdog thread canceled instance restarted release lock RFuture unlockAsync threadId RPromise result newPromise RFuture unlockInnerAsync threadId addListener FutureListener Override operationComplete Exception isSuccess result tryFailure opStatus getNow opStatus IllegalMonitorStateException IllegalMonitorStateException attempt unlock lock locked current thread node thread threadId result tryFailure opStatus cancelExpirationRenewal result trySuccess result Expected behavior watchdog thread exist prone issues destroyed lock held lease time ensure lock held verified lock held caller making updates atomic check update time thread doesn execute update lease time thread grabs lock Threads wait lock configurable timeout timeout unlock retried lease time handle failure unlock reason watchdog thread unlock ensure canceled fails Steps reproduce test Issues verified redisson code review reproduce forcing timeout redis unlock call RedissonLock leaving watchdog thread holding lock observing threads wait lock Redis version Redis AWS ElastiCache Redisson version Redisson issues Redisson configuration Config redissonConfig Config redissonConfig setCodec SerializationCodec redissonConfig setUseLinuxNativeEpoll redissonConfig useReplicatedServers addNodeAddress redisNodes Stacktraces Timeout unlock time javax cache processor EntryProcessorException org redisson client RedisTimeoutException Redis server response timeout occured command EVAL params redis call exists redis call publish ARGV buckets SiBJapgTpcxaB key redisson lock channel buckets SiBJapgTpcxa key channel cache amazonaws redisson jar bucket jcache jar bucket core jar bucket core jar bucket core jar Caused org redisson client RedisTimeoutException Redis server response timeout occured command EVAL params redis call exists redis call publish ARGV buckets SiBJapgTpcxaB key redisson lock channel buckets SiBJapgTpcx qSw key channel cache amazonaws redisson jar netty common jar netty common jar netty common jar Subsequent watchdog thread timing saving watchdog thread fails doesn reschedule lock released time update lock buckets SiBJapgTpcxaBHBLc ZqSw key expiration org redisson client RedisTimeoutException Redis server response timeout occured command EVAL params redis call hexists ARGV redis call pexpire ARGV retu buckets SiBJapgTpcxaB qSw key channel cache amazonaws redisson jar netty common jar netty common jar netty common jar Deadlock RedissonLock JCache cache operation management bucket statistics utable time expire
1950	PriorityBlockingQueue doesn release lock reconnect network redisson netty ERROR org redisson client handler CommandDecoder Unable decode data reply channel abf command CommandData promise RedissonPromise promise ImmediateEventExecutor ImmediatePromise failure java util concurrent CancellationException command EVAL params redis call exists redis call hset ARGV redis call redisson sortedset lock testqueue codec org redisson client codec LongCodec java util concurrent CancellationException redisson netty ERROR org redisson client handler CommandDecoder Unable decode data reply channel command CommandData promise RedissonPromise promise ImmediateEventExecutor ImmediatePromise failure java util concurrent CancellationException command EVAL params redis call hexists ARGV redis call pexpire ARGV retu redisson sortedset lock testqueue codec org redisson client codec LongCodec java util concurrent CancellationException Expected behavior reconnect network Actual behavior lock redisson sortedset lock testqueue dosen release release lock network boke lock network boke Steps reproduce test code blow TestReleaseLock main String args Config config Config MasterSlaveServersConfig serverConfig config useMasterSlaveServers setTimeout setMasterAddress redis addSlaveAddress redis serverConfig setTimeout serverConfig setRetryAttempts serverConfig setRetryInterval serverConfig setPingConnectionInterval serverConfig setMasterConnectionMinimumIdleSize serverConfig setKeepAlive RedissonClient redissonClient Redisson create config ExecutorService pullService Executors newFixedThreadPool pullService execute Runnable RPriorityBlockingQueue String blockingQueue redissonClient getPriorityBlockingQueue testqueue Override System println waiting String trunk blockingQueue Thread sleep System println trunk Exception printStackTrace disconnect network wait minute reconnect network Redis version Redisson version Redisson configuration PriorityBlockingQueue doesn release lock reconnect network pub entry async listener channel connection master listeners
1966	Deadlock Redis timeout Expected behavior Redis response timeout Redisson resilient normal operation Redis timeout lock unlock critical sections Actual behavior Redis response timeout attempts Redisson adds lock scheduled renew task remove application enters deadlock lock renewed unlock task thread reentrant lock feature task runs thread deadlock occurs Steps reproduce test Start Redis test application https github hmagarotto redissonlock simple locked task Force timeout Redis runnning client pause command CLIENT PAUSE Redis version Redisson version Redisson configuration Single server Deadlock Redis timeout set async ssl timeout time expire connection parallel
2099	RedissonFairLock timeout drift discovered additional conditions produce timeout drift originally summarize issue timeouts redisson lock timeout sorted set created RedissonFairLock gradually increase time hours days queue threads condition continues fair wait queue empties threads dies threads forced wait timeout dead thread lapse creates dead lock situation provide follow shortly test cases proposed issue greatly feed misunderstanding issue feedback Expected behavior expected behavior documented paragraph Fair Lock waiting threads queued thread died Redisson waits seconds threads died reason delay seconds replicates documentation threads lock expect redis data structures roughly threads acquire lock RLock tryLock threadId order delays HGETALL fair lock lock thread LRANGE redisson lock queue fair lock lock thread lock thread lock thread lock thread lock thread lock thread ZRANGE redisson lock timeout fair lock WITHSCORES lock thread lock timeout lock thread lock timeout lock thread lock timeout lock thread lock timeout lock thread lock timeout lock thread lock timeout thread wait lock expiration based lease time acquire lock threads die Additionally expect thread leaves queue voluntarily wait timeout acquiring lock timeouts adjust thread queue thread left queue RedissonFairLock acquireFailedAsync call wait timeout sorted set expected ZRANGE redisson lock timeout fair lock WITHSCORES lock thread lock timeout lock thread lock timeout lock thread lock timeout lock thread lock timeout lock thread lock timeout thread wait lock expiration acquire lock threads died Actual behavior usages redisson fair lock servers single instance Redisson running roughly code thread server RLock lock redisson getFairLock worker lock lock tryLock TimeUnit MILLISECONDS work Thread sleep lock unlock observe work locked portion code server threads running code churn lock queue issue queue time thread unlocks locks periodic snapshots redisson lock timeout sorted set tend timeouts increase increments time timeouts hours days servers killed observe servers work timing lock dead server lock holding position redisson lock queue timeout redisson lock timeout hours days expect lose server timeout values range time lease time thread wait time position queue lock usage foolish working chance deadlock Steps reproduce test provide issue follow additional test cases RedissonFairLockTest started modification testTimeoutDrift changed wait time changed lock holding time Thread sleep test tryLock failing wait timeout threads lock unlock lock version test test fails timeout drift futre test failed test cases hope cover code produce expected behavior Redis version Redisson version Redisson configuration single redis server exclusively redisson RedissonFairLock timeout drift async test timeout lock time expire unlock thread
2278	RedissonFairLock deadlock change upgrade behavior started occurring Expected behavior FairLock acquired high load system lease time defined Actual behavior Redisson handle Fair lock lease time high load threads lock key client stuck thread acquires lock Steps reproduce test ExecutorService executorService ThreadPoolExecutor Integer MAX TimeUnit MILLISECONDS SynchronousQueue Runnable RedissonClient client Redisson create IntStream rangeClosed boxed forEach Consumer Integer Override accept Integer integer executorService submit Runnable Override ConnectionManager connectionManager Redisson client getConnectionManager Field field MasterSlaveConnectionManager getDeclaredField field setAccessible field set connectionManager UUID randomUUID NoSuchFieldException IllegalAccessException printStackTrace RLock lock client getFairLock fair lock lock lock Thread sleep InterruptedException printStackTrace lock unlock System println integer Thread sleep Redis version Redisson version Redisson configuration defaults RedissonFairLock deadlock async lock test map read key set redisson
2355	RedissonLock unlock hangs infinitely waiting RedissonPromise Expected behavior Calls RedissonLock unlock expected finish lock deleted Redis Actual behavior experienced threads locked waiting calls RedissonLock unlock production system hours upgrading Redisson Redisson Steps reproduce test unable reproduce problem computer experienced production servers hours starting newer version application updated Redisson version upgraded order receive fixes bug Deadlock Redis timeout experienced couple times start exceptions logs coming internal redisson threads redisson netty WARN netty util concurrent DefaultPromise exception thrown org redisson misc RedissonPromise Lambda operationComplete java lang NullPointerException redisson jar redisson jar redisson jar netty common jar netty common jar netty common jar netty common jar netty common jar netty common jar netty common jar redisson jar redisson jar redisson jar redisson jar redisson jar redisson jar redisson jar netty common jar netty common jar netty common jar netty common jar netty common jar netty common jar netty common jar redisson jar redisson jar redisson jar redisson jar redisson jar redisson jar redisson jar netty codec jar netty codec jar netty codec jar netty transport jar netty transport jar netty transport jar netty transport jar netty transport jar netty transport jar netty transport jar netty transport jar netty transport jar netty transport jar netty transport jar netty transport jar netty common jar netty common jar netty common jar investigating issues blocked threads analyzing thread dumps stuck threads stack trace rabbitmq thread awaiting notification holding cad ebd code examining source code RedissonLock java NullPointerException occurs missing timeout object task threadId task hasNoThreads task getTimeout cancel EXPIRATION RENEWAL MAP remove getEntryName solve root task getTimeout returns calls cancelExpirationRenewal method fail exception RedissonLock unlockAsync method receive result failure Override RFuture unlockAsync threadId RPromise result RedissonPromise RFuture unlockInnerAsync threadId onComplete opStatus cancelExpirationRenewal threadId result tryFailure opStatus IllegalMonitorStateException IllegalMonitorStateException attempt unlock lock locked current thread node thread threadId result tryFailure cancelExpirationRenewal threadId result trySuccess result add check timeout ExpirationEntry object version problem quire severe Redis version Redisson version Redisson configuration configuration sentinel servers RedissonLock unlock hangs infinitely waiting RedissonPromise test async lock time read expire entry thread
2575	RedissonLock fails unsubscribe channel lock acquired Expected behavior pub channels created acquire lock RedissonLock unsubscribed longer needed Actual behavior pub channels meaning client unsubscribe locks longer expired unlocked channels cleaned created workaround rid restart client observed caused connection leak calling RedissonLock locks returned error Subscribe timeout Increase subscriptionsPerConnection subscriptionConnectionPoolSize parameters increased limits order workaround bug Steps reproduce test RedissonLock java implementation method lockInterruptibly leaseTime TimeUnit unit multiple locks simultaneously limits subscription connection pool size subscriptions connection increase probability bug wait error Subscribe timeout Increase subscriptionsPerConnection subscriptionConnectionPoolSize parameters connect Redis server fetch lock pub channels number pub channels active locks bug reproduced number pub channels decrease locks created subscriptions leaked active longer RedissonLock implementation Redis version Redisson version Redisson configuration redisson client redissonClient redisson single server address redis url idle connection timeout ping timeout connect timeout timeout connection pool size connection minimum idle size subscription connection pool size subscriptions connection redisson client RedissonLock fails unsubscribe channel lock acquired async pub time lock listener entry operation slave
2690	RedissonSessionRepository topic listeners initialization race condition We’ve migrated RedissonSessionRepository Spring sessions intermittent NPEs startup issue listener topics initialized conditional matching onMessage doesn’t order initialization java lang NullPointerException RedissonSessionRepository topic listeners initialization race condition session listener async key set principal event channel
2692	RedissonSession changeSessionId expiredKey race condition number instances app production we’ve encountered race condition session changeSessionId invoked session separate servers server receive PTTL isn’t handled Stacktrace org redisson client RedisException ERR invalid expire time psetex channel redacted redacted command PSETEX params spring session sessions expires session PooledUnsafeDirectByteBuf ridx widx cap RedissonSession changeSessionId expiredKey race condition session set key event redisson principal test dition
2714	RedissonLock tryLock interrupted renew lock Expected behavior tryLock interrupted watchdog renew listener cancelled Actual behavior tryLock interrupted watchdog renewing lock ifinite lock Steps reproduce test threadTwoScheduled test lockThenInterruptNotCatchThenBroke RLock lock redissonClient getLock concurrent test assertFalse lock isLocked Thread thread Thread threadTwoScheduled lock tryLock doBusiness lock unlock thread start threadTwoScheduled tcp request Object thread interrupt Thread sleep longer watchdog time InterruptedException printStackTrace lock renewed watchdog assertTrue lock isLocked Redis version doesn matter Redisson version Redisson configuration RedissonLock tryLock interrupted renew lock lock test time async expire thread read unlock
2883	RedissonFairLock deadlock version spring boot redisson spring boot starter redis test GetMapping testRedisson testRedisson String UUID randomUUID toString ExecutorService executorService ThreadPoolExecutor Integer MAX TimeUnit SECONDS SynchronousQueue Runnable log info startLock IntStream rangeClosed boxed forEach Consumer Integer Override accept Integer integer executorService submit Runnable Override RLock test redissonClient getFairLock test lock TimeUnit SECONDS ThreadUtil sleep log info endLok integer test unlock executorService shutdown RedissonFairLock result endLok printed。if RedissonLock，it print all。 redis key redisson lock queue cbfe bec aaf redisson lock timeout cbfe bec aaf Blocking program running LRANGE redisson lock queue cbfe bec aaf acc acc acc acc acc acc acc acc acc acc acc ZRANGE redisson lock timeout cbfe bec aaf WITHSCORES acc acc acc acc acc acc acc acc acc acc acc RedissonFairLock deadlock async lock test map read key set redisson
3484	concurrency problems org redisson RedissonLock tryLockInnerAsync tryLockInnerAsync waitTime leaseTime TimeUnit unit threadId RedisStrictCommand command internalLockLeaseTime unit toMillis leaseTime thread lock subject method time leaseTime leaseTime bigger thread cam set internalLockLeaseTime thread set internalLockLeaseTime bigger bigger leaseTime real redis lock watchDog invaild lock expired time evalWriteAsync getName LongCodec INSTANCE command redis call exists redis call hincrby ARGV redis call pexpire ARGV nil redis call hexists ARGV redis call hincrby ARGV redis call pexpire ARGV nil redis call pttl Collections singletonList getName internalLockLeaseTime getLockName threadId concurrency problems org redisson RedissonLock tryLockInnerAsync test async address time lock method string executor
4033	multilock fail Expected behavior lock successful Actual behavior lock fail lock multi lock Steps reproduce test set waitTime multi lock fail set waitTime RLock success RLock lock client getLock lock RLock lock client getLock lock RLock lock client getLock lock RedissonMultiLock lock RedissonMultiLock lock lock lock flag lock tryLock TimeUnit SECONDS flag debug RedissonMultiLock remainTime remainTime System currentTimeMillis time remainTime negative lock flow time System currentTimeMillis remainTime unlockInner acquiredLocks bug RedissonMultiLock Redis version Redisson version Redisson configuration single server multilock fail test set lock object cluster codec add find
4064	Thread safe problem acquiring locks pubsub channel unsubscribed Expected behavior pub channels created acquire lock RedissonLock unsubscribed longer needed Actual behavior cases pub channels created time lock error Subscribe timeout Increase subscriptionsPerConnection subscriptionConnectionPoolSize parameters error failed lock key lock fine locked locked thread fail instantly logging test notice thread pool thread locks key thread pool thread lock lockkey instantly subscribe timeout exception notice wait locking app running channel active lockkey PUBSUB CHANNELS redisson lock channel lock logging test fails pool thread INFO bprocare atc ReddisTest unlock lock pool thread INFO bprocare atc ReddisTest lock lock pool thread INFO bprocare atc ReddisTest lock lock pool thread INFO bprocare atc ReddisTest unlock lock pool thread INFO bprocare atc ReddisTest lock lock pool thread INFO bprocare atc ReddisTest lock lock pool thread INFO bprocare atc ReddisTest unlock lock pool thread INFO bprocare atc ReddisTest unlock lock pool thread INFO bprocare atc ReddisTest lock lock pool thread INFO bprocare atc ReddisTest lock lock pool thread INFO bprocare atc ReddisTest unlock lock pool thread INFO bprocare atc ReddisTest lock lock pool thread INFO bprocare atc ReddisTest unlock lock pool thread INFO bprocare atc ReddisTest lock lock pool thread INFO bprocare atc ReddisTest lock lock pool thread INFO bprocare atc ReddisTest lock lock pool thread INFO bprocare atc ReddisTest lock lock pool thread INFO bprocare atc ReddisTest lock lock pool thread INFO bprocare atc ReddisTest unlock lock pool thread INFO bprocare atc ReddisTest lock lock pool thread INFO bprocare atc ReddisTest lock lock pool thread INFO bprocare atc ReddisTest unlock lock pool thread INFO bprocare atc ReddisTest unlock lock pool thread INFO bprocare atc ReddisTest lock lock pool thread INFO bprocare atc ReddisTest lock lock pool thread INFO bprocare atc ReddisTest lock lock pool thread INFO bprocare atc ReddisTest lock lock pool thread INFO bprocare atc ReddisTest unlock lock pool thread INFO bprocare atc ReddisTest lock lock pool thread ERROR bprocare atc ReddisTest org redisson client RedisTimeoutException Subscribe timeout Increase subscriptionsPerConnection subscriptionConnectionPoolSize parameters Steps reproduce test fail runs locks issues error puts channel failed Slf ReddisTest main String args InterruptedException Config config Config config useSingleServer setSubscriptionConnectionPoolSize setSubscriptionConnectionMinimumIdleSize setSubscriptionsPerConnection setAddress redis RedissonClient redisson Redisson create config ExecutorService Executors newFixedThreadPool Random random Random submit String lockKey lock random nextInt RLock lock redisson getLock lockKey log info lock lockKey lock lock log info lock lockKey Thread sleep random nextInt lock unlock log info unlock lockKey Exception exception log error exception shutdown awaitTermination TimeUnit MINUTES Redis version Redisson version Redisson configuration testcase Thread safe problem acquiring locks pubsub channel unsubscribed jackson object time type stream permits lease pack