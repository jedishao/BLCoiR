2962	Deadlock Thead starvation Hive loadPartitionByName getTable  ve seen issue couple times Presto coordinator continues queue queries none get executed believe  ve traced race condition cause deadlock thread dump coordinator saw Hive Metastore refresh threads were waiting call loadPartitionByName method hive metastore hive   daemon prio os_prio cpu ms elapsed s tid nid waiting condition 0x00007fb06c40d000 believe issue is executors thread pool are being used leaving executors complete call needed fulfill behaviour seems have been introduced   loadPartitionByName was switched using calling getTable State WAITING parking Method parking wait SettableFuture
6202	Include stacktraces LogTestDurationListener test hang monitor tests hanged test thread is  1548037 Z Z Number locked synchronizers information owns TestClass 2a78dd6a is stacktrace is limited frames  1535741 Z pool  2 thread 2 prio Id BLOCKED TestClass 2a78dd6a owned pool  2 thread 1 Id  1539747 Z blocked TestClass 2a78dd6a  1549747 Z ThreadPoolExecutor
6389	Z query failures deadlock getTableProperties Transaction was has been chosen deadlock victim  7256766 Z ERROR TestSqlServerIntegrationSmokeTest Time elapsed s FAILURE  7271020 Z RuntimeException advance result set statement data_compression_desc partitions p JOIN tables t object_id JOIN indexes object_id schema_id schema name type 0 1 data_space_id partition_schemes arguments named schema dbo table_name finder  7363757 Z Caused ResultSetException advance result set statement data_compression_desc partitions p JOIN tables t object_id JOIN indexes object_id schema_id schema name type 0 1 data_space_id partition_schemes arguments named schema dbo table_name finder  7471276 Z Caused SQLServerException Transaction Process ID was deadlocked lock resources process has been chosen deadlock victim Rerun transaction
7454	Join spill disk race condition Join spill join side operates follows unblocks HashBuilderOperator finish Join spill build side operates follows Revoke finishes Race condition HashBuilderOperator  isBlocked finishes dispose is called spilled partition join operator instance calls PartitionedLookupSourceFactory  finishProbeOperator New PartitionedConsumption is created spilledPartitions Spilled partitions are released join order using Partition  release SpilledLookupSourceHandle is SpilledLookupSourceHandle  dispose joins call Partition  release partition Dispose sets SpilledLookupSourceHandle  disposeRequested was returned HashBuilderOperator  isBlocked HashBuilderOperator  startMemoryRevoke is called HashBuilderOperator HashBuilderOperator gets blocked SpilledLookupSourceHandle  disposeRequested unspillingRequested SpilledLookupSourceHandle is disposed  s used join sets SpilledLookupSourceHandle  disposeRequested unblocks HashBuilderOperator HashBuilderOperator finishes PartitionedLookupSourceFactory  finishProbeOperator New PartitionedConsumption is created spilledPartitions HashBuilderOperator  startMemoryRevoke is called HashBuilderOperator calls PartitionedLookupSourceFactory  setPartitionSpilledLookupSourceHandle registers spilled partition PartitionedLookupSourceFactory  spilledPartitions PartitionedConsumption is created spilled partition be released join operators
7872	TestSqlServerTypeMapping Transaction was has been chosen deadlock victim Z Z  3184530 issue    9038391 Z ERROR TestSqlServerTypeMapping Time elapsed s FAILURE  9040757 Z RuntimeException Failed execute statement ALTER DATABASE database_6dfc467e1fca49b3b1e222cf5b22d97b SET READ_COMMITTED_SNAPSHOT ON  9086391 Z Caused SQLServerException Transaction Process ID was deadlocked lock resources process has been chosen deadlock victim Rerun transaction
9741	Error Tests run Failures Errors Skipped Time elapsed s FAILURE TestSuite testSelectInformationSchemaColumns fail CU13 ubuntu test succeeds image fails image need find cause deadlock Error testSelectInformationSchemaColumns Time elapsed s FAILURE AssertionError Expected query succeed SELECT columns Caused RuntimeException Transaction Process ID was deadlocked lock resources process has been chosen deadlock victim Rerun transaction Suppressed Exception SQL SELECT columns Caused TrinoException Transaction Process ID was deadlocked lock resources process has been chosen deadlock victim Rerun transaction Caused SQLServerException Transaction Process ID was deadlocked lock resources process has been chosen deadlock victim Rerun transaction
11798	Hive locks waiting state held Hive locks waiting state timestamp acquired_at have value locks are held timestamp be cause Steps reproduce is lock hive table writing data hive spark Run query Trino Trino shared_read lock waiting state lock step cancel Trino query Trino lock stays waiting state ACQUIRED somenaths coordinator 58d7bfd46d thq4w WAITING SHARED_READ NULL sghildiyal coordinator WAITING SHARED_READ NULL beherasa coordinator   released locks ACQUIRED state did release locks WAITING state workaround is script delete locks Hive CC  findepi  losipiuk
13212	Lock congestion DirectExchangeClient is caused 5832a59 moved setBytes section DirectExchangeClient  addPages DirectExchangeClient  pollPage cause lock congestion
14132	Missing file releasing Hive Metastore lock has failed HiveMetastoreTableOperations using aquireLock releaseLock committing iceberg existing table releaseLock happens block step fail result missing file CREATE TABLE tbl id integer name varchar part varchar location path format PARQUET failure insert query table fail table becomes Query 20220829_214404_00026_j9tvf FAILED nodes Splits total done   rows 0B rows s 0B s Query 20220829_214404_00026_j9tvf failed Failed get status file path tbl metadata snap  5290494244823571353 1 34a427a1 054c 4ecf a49b f3e3ef9203a0 Reason be release lock step was failed Iceberg commit handles RuntimeException case NoSuchLockException being thrown has done step looks snapshot is created pointing file step file is created issues     HiveMetastoreTableOperations line failed execute Metastore level fail fail Metastore timeout lock is missing HMS side throw NoSuchLockException is Exception RuntimeException
14605	Queries are getting Stack trace  8702056 Z pool  3 thread 2 prio Id RUNNABLE test got stuck run is testExplainAnalyze test is built validate failure recovery capabilities fault execution query is getting is run fault execution see failsWithoutRetries stack trace  s chance something is broken query failure path execution