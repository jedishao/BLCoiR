2962	Deadlock Thead starvation Hive loadPartitionByName getTable issue couple times Presto coordinator continues queue queries executed traced race condition deadlock thread dump coordinator Hive Metastore refresh threads waiting getTable call loadPartitionByName method hive metastore hive daemon prio prio cpu elapsed tid nid waiting condition java lang Thread WAITING parking jdk internal misc Unsafe park java base Method parking wait google common util concurrent SettableFuture issue executors thread pool leaving open executors complete loadTable call needed fulfill getTable behaviour introduced loadPartitionByName switched delete calling getTable Deadlock Thead starvation Hive loadPartitionByName getTable table partition cache hive metastore stats column transaction
6202	Include full stacktraces LogTestDurationListener test hang monitor https github prestosql presto runs tests hanged test thread pool thread prio BLOCKED org testng TestClass owned pool thread blocked org testng TestClass Number locked synchronizers java util concurrent ThreadPoolExecutor Worker cedfa owns TestClass stacktrace limited frames full thread dump https github prestosql presto runs https gist github findepi bad bee Include full stacktraces LogTestDurationListener test hang monitor test join source process output exchange processor full
6389	Sporadic query failures deadlock SqlServerClient getTableProperties Transaction deadlocked chosen deadlock victim https github prestosql presto runs ERROR testStddevPushdown prestosql plugin sqlserver TestSqlServerIntegrationSmokeTest Time elapsed FAILURE java lang RuntimeException Unable advance result set statement SELECT data compression desc sys partitions JOIN sys tables object object JOIN sys indexes object object SCHEMA schema schema table type data space SELECT data space sys partition schemes arguments positional named schema dbo table test stddev pushdown finder Caused org jdbi core result ResultSetException Unable advance result set statement SELECT data compression desc sys partitions JOIN sys tables object object JOIN sys indexes object object SCHEMA schema schema table type data space SELECT data space sys partition schemes arguments positional named schema dbo table test stddev pushdown finder Caused microsoft sqlserver jdbc SQLServerException Transaction Process deadlocked lock resources process chosen deadlock victim Rerun transaction Sporadic query failures deadlock SqlServerClient getTableProperties Transaction deadlocked chosen deadlock victim test dynamic filter query table column connector group
7454	Join spill disk race condition Join spill join side operates join instance calls trino PartitionedLookupSourceFactory finishProbeOperator trino PartitionedConsumption created spilledPartitions Spilled partitions released join order trino PartitionedConsumption Partition release SpilledLookupSourceHandle disposed trino SpilledLookupSourceHandle dispose joins call PartitionedConsumption Partition release partition Dispose sets trino SpilledLookupSourceHandle disposeRequested returned trino HashBuilderOperator isBlocked unblocks HashBuilderOperator finish gracefully Join spill build side operates trino HashBuilderOperator startMemoryRevoke called HashBuilderOperator Revoke finishes HashBuilderOperator blocked trino SpilledLookupSourceHandle disposeRequested unspillingRequested SpilledLookupSourceHandle disposed longer join sets trino SpilledLookupSourceHandle disposeRequested unblocks HashBuilderOperator HashBuilderOperator finishes gracefully Race condition trino PartitionedLookupSourceFactory finishProbeOperator trino PartitionedConsumption created spilledPartitions trino HashBuilderOperator startMemoryRevoke called HashBuilderOperator calls trino PartitionedLookupSourceFactory setPartitionSpilledLookupSourceHandle registers spilled partition trino PartitionedLookupSourceFactory spilledPartitions PartitionedConsumption created newly spilled partition released join operators HashBuilderOperator isBlocked finishes dispose called spilled partition Join spill disk race condition spill probe position test join table source space
7872	Flaky TestSqlServerTypeMapping Transaction deadlocked chosen deadlock victim ERROR init trino plugin sqlserver TestSqlServerTypeMapping Time elapsed FAILURE java lang RuntimeException Failed execute statement ALTER DATABASE database dfc fca SET READ COMMITTED SNAPSHOT Caused microsoft sqlserver jdbc SQLServerException Transaction Process deadlocked lock resources process chosen deadlock victim Rerun transaction issue Flaky TestSqlServerTypeMapping Transaction deadlocked chosen deadlock victim test table partition data create column insert location
9741	TestSqlServerConnectorTest testSelectInformationSchemaColumns fail ubuntu test succeeds image fails image find deadlock Error Tests Failures Errors Skipped Time elapsed FAILURE TestSuite Error trino plugin sqlserver TestSqlServerConnectorTest testSelectInformationSchemaColumns Time elapsed FAILURE java lang AssertionError Expected query succeed SELECT schema columns Caused java lang RuntimeException Transaction Process deadlocked lock resources process chosen deadlock victim Rerun transaction Suppressed java lang Exception SQL SELECT schema columns Caused trino spi TrinoException Transaction Process deadlocked lock resources process chosen deadlock victim Rerun transaction Caused microsoft sqlserver jdbc SQLServerException Transaction Process deadlocked lock resources process chosen deadlock victim Rerun transaction TestSqlServerConnectorTest testSelectInformationSchemaColumns fail ubuntu test query match table set port node ignore
11798	Hive locks waiting held indefinitely Hive locks waiting timestamp acquired ‘NULL’ locks held indefinitely missing timestamp Steps reproduce exclusive lock hive table writing data hive spark select query Trino Trino shared read lock waiting exclusive lock step cancel Trino query Trino lock stays waiting finance booking ACQUIRED SHARED READ somenaths coordinator bfd thq rerfi finance booking WAITING SHARED READ sghildiyal coordinator dfc dkj emh finance booking WAITING SHARED READ beherasa coordinator dfc dkj emh released locks ACQUIRED didn’t release locks WAITING workaround script delete locks Hive findepi losipiuk Hive locks waiting held indefinitely bucket split file table splits partition hive list
13212	Lock congestion DirectExchangeClient trino DirectExchangeClient addPages trino DirectExchangeClient pollPage lock congestion caused moved setBytes critical Lock congestion DirectExchangeClient source client partition manager buffer add exchange lookup
14132	Missing manifest file releasing Hive Metastore lock failed HiveMetastoreTableOperations aquireLock releaseLock committing iceberg existing table releaseLock block step fail result missing manifest file Steps Reproduce CREATE TABLE tbl integer varchar varchar location path format PARQUET INSERT tbl VALUES product HiveMetastoreTableOperations failed execute Metastore level fail Metastore timeout lock missing HMS side NoSuchLockException Exception RuntimeException failure insert select query table fail table unusable INSERT tbl VALUES product Query tvf FAILED nodes Splits total rows rows Query tvf failed Failed status file path tbl metadata snap ecf avro Reason release lock step failed Iceberg commit handles RuntimeException NoSuchLockException thrown step snapshot created pointing manifest file previous step file missing created issues Missing manifest file releasing Hive Metastore lock failed table metastore bucket file hive partition set test
14605	Queries occasionally stuck Manifests https pipelines actions githubusercontent serviceHosts apis pipelines runs signedlogcontent urlExpires urlSigningMethod HMACV urlSignature BdhvMIRPxrk hYFLkx OmL rPSLVFyQgNbLYFg rbMo test stuck specific trino faulttolerant iceberg TestIcebergTaskFailureRecoveryTest testExplainAnalyze Stack trace pool thread prio RUNNABLE test built validate failure recovery capabilities fault tolerant execution actual query stuck fault tolerant execution FailureRecoveryAssert failsWithoutRetries stack trace chance broken query failure path pipelined execution Queries occasionally stuck task set max query memory tasks split cpu