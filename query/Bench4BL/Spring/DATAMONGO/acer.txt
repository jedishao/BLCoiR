199	Synchronisation performance tests performance tests observed threads status blocked stack tests carried jmeter read queries http bio exec Thread java lang Thread BLOCKED waiting lock java lang reflect Field owned http bio exec MongoOperations find MongoOperations java Synchronisation performance tests correctly write objects concern address string mongo plain
532	Multithreading authentication issue issue exception thrown java lang RuntimeException org springframework data mongodb CannotGetMongoDbConnectionException Failed authenticate database appears caused multiple threads authenticate single instance bug appears MongoDbUtils doGetDB method method retrieves object checks authenticated authenticated authenticate username password threads check object attempt authenticate leads exception thrown checked latest source code git repository bug appears solve issue replaced lines credentialsGiven amp amp isAuthenticated String username credentials getUsername String password credentials hasPassword credentials getPassword isAuthenticated amp amp authenticate username password password toCharArray CannotGetMongoDbConnectionException Failed authenticate database databaseName username username password password databaseName credentials block moved include statements remove call isAuthenticated time doGetDb method called block entered calls doGetDb authenticated compromise isAuthenticated method called based RELEASE code appears solve issue issue aware pre version java mongo driver multithreading bug link latest dev version spring mongo worth upgrade https jira mongodb org browse JAVA Multithreading authentication issue
622	unversioned object created insert save MongoTemplate doSaveVersioned doSave store unversioned object doInsert avoid race conditions concurrent inserts unversioned object created insert save MongoTemplate doSaveVersioned doSave store unversioned object mongo collection query entity object update version set
737	Extra MongoSynchronizations TransactionSynchronizationManager IllegalStateException transaction completeMultiple Mongo databases accessed transactional test transaction rolled test exception thrown ERROR org springframework transaction support TransactionSynchronizationUtils TransactionSynchronization beforeCompletion threw exception java lang IllegalStateException key Mongo localhost bound thread main stack trace filed DATAMONGO looked code resolution issue appears closed reporter upgraded issue disappeared debugging interaction MongoDbUtils TransactionSynchronizationManager working theory nutshell MongoDbUtils invokes TransactionSynchronizationManager database Mongo instance ends registering MongoSynchronizations holder resource bound TransactionSynchronizationManager MongoDbUtils java lines transaction completed TransactionSynchronizationUtils triggerBeforeCompletion invoked iterates MongoSynchronizations invoking unbindResource database amp apos synchronization unbinds holder Mongo key fails holder bound submit patch issue Override MongoSynchronization beforeCompletion MongoSynchronization suspend utilize unbindResourceIfPossible Modify MongoDbUtils doGetDB registers MongoSynchronization Mongo database options feedback committer community appreciated weeds Extra MongoSynchronizations TransactionSynchronizationManager IllegalStateException transaction completeMultiple Mongo databases accessed transactional test mongo type parameter write output uri test jpa