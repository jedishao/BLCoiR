65	BasicPersistentEntity suffers ConcurrentModificationException BasicPersistentEntity exposes addPersistentEntity method adding properties essentially mutable opens concurrency problem scenario concurrently MongoTemplate inserting objects type MappingContext Thread enters getPersistentEntity discovers entity mapped calls addPersistentEntity algorithm eagerly adds PersistentEntity object map PersistentEntities type references detected properties discovered Thread enters getPersistentEntity discovers semi parsed PersistentEntity returns thread continues point doWithProperties invoked iterating PersistentProperties registered Thread add additional PersistentProperties ConcurrentModificationException thread BasicPersistentEntity suffers ConcurrentModificationException property type persistent entity simple map entities object
362	Potential concurrency issues RepositoriesgetRepoInfoFor iterating key set repositories cached eagerly RepositoryInformation instances upfront thread passed block code triggered lookupRepositoryFactoryInformationFor writes repositories instance variable ConcurrentModificationException reported issue Potential concurrency issues RepositoriesgetRepoInfoFor iterating key set repositories cached eagerly RepositoryInformation instances upfront repository type transaction bean set query factory annotation
390	HashMap HashIterator HashMap ValueIterator nextEntry MappingContextTypeInformationMapper DefaultTypeMapper Type MappingMongoConverter getFromCacheOrCreate resolveTypeFrom getDefaultedTypeToBeUsed Hash ConcurrentModificationException ConcurrentModificationException in MappingContextTypeInformationMapper resolveTypeFrom
831	AbstractMappingContext getPersistentEntity returns empty entity called multiple threads call getPersistentEntity method AbstractMappingContext type multiple threads concurrently empty entity entity properties caused race condition addPersistentEntity method thread calls method executing write lock method thread empty entity persistentEntities map thread populating properties addPersistentEntity method acquire read lock accessing persistentEntities map AbstractMappingContext getPersistentEntity returns empty entity called multiple threads set repository persistent property annotation bean query entity