Race condition in Future setHandler/completion between threads
In one of our projects we have encountered a problem with CompositeFuture.all() when running "outside" of a verticle (in junit tests).

Inside implementation of CompositeFutureImpl.all() the setHandler() function is called upon each future in the composition (in our case two).
Neither of the functions (setHandler() nor complete()) are atomic and it may result in a situation when the handler is never called.
The future implementation (FutureImpl) is not thread safe and using it from different threads may cause difficulties.
Our understanding based on looking into the implementation of CompositeFutureImpl is that the intention was to make it thread safe.
